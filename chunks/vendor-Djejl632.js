function tie(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const bk=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return Ns},get Circle(){return s1e},get Ellipse(){return l1e},get Image(){return u1e},get Line(){return f1e},get Marker(){return h1e},get Path(){return $I},get Polygon(){return b1e},get Polyline(){return x1e},get Rect(){return _1e},get Text(){return S1e}},Symbol.toStringTag,{value:"Module"})),xk=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return os},get Circle(){return T1e},get Dom(){return O1e},get Ellipse(){return k1e},get Image(){return I1e},get Line(){return L1e},get Marker(){return P1e},get Path(){return D1e},get Polygon(){return N1e},get Polyline(){return R1e},get Rect(){return F1e},get Text(){return j1e}},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wk(r,e){const t=new Set(r.split(","));return e?n=>t.has(n.toLowerCase()):n=>t.has(n)}const hn={},pv=[],oi=()=>{},rie=()=>!1,CE=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),Ek=r=>r.startsWith("onUpdate:"),gi=Object.assign,_k=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},nie=Object.prototype.hasOwnProperty,rn=(r,e)=>nie.call(r,e),Jt=Array.isArray,gv=r=>Sm(r)==="[object Map]",qG=r=>Sm(r)==="[object Set]",wR=r=>Sm(r)==="[object Date]",er=r=>typeof r=="function",qr=r=>typeof r=="string",kl=r=>typeof r=="symbol",on=r=>r!==null&&typeof r=="object",Rx=r=>(on(r)||er(r))&&er(r.then)&&er(r.catch),ZG=Object.prototype.toString,Sm=r=>ZG.call(r),iie=r=>Sm(r).slice(8,-1),QG=r=>Sm(r)==="[object Object]",Sk=r=>qr(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Yg=wk(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),AE=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},aie=/-(\w)/g,Mo=AE(r=>r.replace(aie,(e,t)=>t?t.toUpperCase():"")),oie=/\B([A-Z])/g,Fu=AE(r=>r.replace(oie,"-$1").toLowerCase()),TE=AE(r=>r.charAt(0).toUpperCase()+r.slice(1)),TS=AE(r=>r?`on${TE(r)}`:""),$a=(r,e)=>!Object.is(r,e),Wb=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},JG=(r,e,t,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:t})},QC=r=>{const e=parseFloat(r);return isNaN(e)?r:e},sie=r=>{const e=qr(r)?Number(r):NaN;return isNaN(e)?r:e};let ER;const ej=()=>ER||(ER=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ga(r){if(Jt(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],i=qr(n)?cie(n):ga(n);if(i)for(const a in i)e[a]=i[a]}return e}else if(qr(r)||on(r))return r}const lie=/;(?![^(]*\))/g,uie=/:([^]+)/,fie=/\/\*[^]*?\*\//g;function cie(r){const e={};return r.replace(fie,"").split(lie).forEach(t=>{if(t){const n=t.split(uie);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Tt(r){let e="";if(qr(r))e=r;else if(Jt(r))for(let t=0;t<r.length;t++){const n=Tt(r[t]);n&&(e+=n+" ")}else if(on(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const hie="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",die=wk(hie);function tj(r){return!!r||r===""}function vie(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=Bx(r[n],e[n]);return t}function Bx(r,e){if(r===e)return!0;let t=wR(r),n=wR(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=kl(r),n=kl(e),t||n)return r===e;if(t=Jt(r),n=Jt(e),t||n)return t&&n?vie(r,e):!1;if(t=on(r),n=on(e),t||n){if(!t||!n)return!1;const i=Object.keys(r).length,a=Object.keys(e).length;if(i!==a)return!1;for(const o in r){const s=r.hasOwnProperty(o),l=e.hasOwnProperty(o);if(s&&!l||!s&&l||!Bx(r[o],e[o]))return!1}}return String(r)===String(e)}const rj=r=>!!(r&&r.__v_isRef===!0),Oi=r=>qr(r)?r:r==null?"":Jt(r)||on(r)&&(r.toString===ZG||!er(r.toString))?rj(r)?Oi(r.value):JSON.stringify(r,nj,2):String(r),nj=(r,e)=>rj(e)?nj(r,e.value):gv(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],a)=>(t[OS(n,a)+" =>"]=i,t),{})}:qG(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>OS(t))}:kl(e)?OS(e):on(e)&&!Jt(e)&&!QG(e)?String(e):e,OS=(r,e="")=>{var t;return kl(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};/**
* @vue/reactivity v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fo;class ij{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=fo,!e&&fo&&(this.index=(fo.scopes||(fo.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=fo;try{return fo=this,e()}finally{fo=t}}}on(){fo=this}off(){fo=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Mk(r){return new ij(r)}function pie(r,e=fo){e&&e.active&&e.effects.push(r)}function OE(){return fo}function kE(r){fo&&fo.cleanups.push(r)}let wh;class Ck{constructor(e,t,n,i){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,pie(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,cc();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(gie(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),hc()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=jf,t=wh;try{return jf=!0,wh=this,this._runnings++,_R(this),this.fn()}finally{SR(this),this._runnings--,wh=t,jf=e}}stop(){this.active&&(_R(this),SR(this),this.onStop&&this.onStop(),this.active=!1)}}function gie(r){return r.value}function _R(r){r._trackId++,r._depsLength=0}function SR(r){if(r.deps.length>r._depsLength){for(let e=r._depsLength;e<r.deps.length;e++)aj(r.deps[e],r);r.deps.length=r._depsLength}}function aj(r,e){const t=r.get(e);t!==void 0&&e._trackId!==t&&(r.delete(e),r.size===0&&r.cleanup())}let jf=!0,JC=0;const oj=[];function cc(){oj.push(jf),jf=!1}function hc(){const r=oj.pop();jf=r===void 0?!0:r}function Ak(){JC++}function Tk(){for(JC--;!JC&&eA.length;)eA.shift()()}function sj(r,e,t){if(e.get(r)!==r._trackId){e.set(r,r._trackId);const n=r.deps[r._depsLength];n!==e?(n&&aj(n,r),r.deps[r._depsLength++]=e):r._depsLength++}}const eA=[];function lj(r,e,t){Ak();for(const n of r.keys()){let i;n._dirtyLevel<e&&(i??(i=r.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(i??(i=r.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&eA.push(n.scheduler)))}Tk()}const uj=(r,e)=>{const t=new Map;return t.cleanup=r,t.computed=e,t},Fx=new WeakMap,Eh=Symbol(""),tA=Symbol("");function Ka(r,e,t){if(jf&&wh){let n=Fx.get(r);n||Fx.set(r,n=new Map);let i=n.get(t);i||n.set(t,i=uj(()=>n.delete(t))),sj(wh,i)}}function Au(r,e,t,n,i,a){const o=Fx.get(r);if(!o)return;let s=[];if(e==="clear")s=[...o.values()];else if(t==="length"&&Jt(r)){const l=Number(n);o.forEach((u,f)=>{(f==="length"||!kl(f)&&f>=l)&&s.push(u)})}else switch(t!==void 0&&s.push(o.get(t)),e){case"add":Jt(r)?Sk(t)&&s.push(o.get("length")):(s.push(o.get(Eh)),gv(r)&&s.push(o.get(tA)));break;case"delete":Jt(r)||(s.push(o.get(Eh)),gv(r)&&s.push(o.get(tA)));break;case"set":gv(r)&&s.push(o.get(Eh));break}Ak();for(const l of s)l&&lj(l,4);Tk()}function mie(r,e){const t=Fx.get(r);return t&&t.get(e)}const yie=wk("__proto__,__v_isRef,__isVue"),fj=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(kl)),MR=bie();function bie(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const n=nn(this);for(let a=0,o=this.length;a<o;a++)Ka(n,"get",a+"");const i=n[e](...t);return i===-1||i===!1?n[e](...t.map(nn)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){cc(),Ak();const n=nn(this)[e].apply(this,t);return Tk(),hc(),n}}),r}function xie(r){kl(r)||(r=String(r));const e=nn(this);return Ka(e,"has",r),e.hasOwnProperty(r)}class cj{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const i=this._isReadonly,a=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return a;if(t==="__v_raw")return n===(i?a?Pie:pj:a?vj:dj).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Jt(e);if(!i){if(o&&rn(MR,t))return Reflect.get(MR,t,n);if(t==="hasOwnProperty")return xie}const s=Reflect.get(e,t,n);return(kl(t)?fj.has(t):yie(t))||(i||Ka(e,"get",t),a)?s:Sn(s)?o&&Sk(t)?s:s.value:on(s)?i?wp(s):dc(s):s}}class hj extends cj{constructor(e=!1){super(!1,e)}set(e,t,n,i){let a=e[t];if(!this._isShallow){const l=Bh(a);if(!Dv(n)&&!Bh(n)&&(a=nn(a),n=nn(n)),!Jt(e)&&Sn(a)&&!Sn(n))return l?!1:(a.value=n,!0)}const o=Jt(e)&&Sk(t)?Number(t)<e.length:rn(e,t),s=Reflect.set(e,t,n,i);return e===nn(i)&&(o?$a(n,a)&&Au(e,"set",t,n):Au(e,"add",t,n)),s}deleteProperty(e,t){const n=rn(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Au(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!kl(t)||!fj.has(t))&&Ka(e,"has",t),n}ownKeys(e){return Ka(e,"iterate",Jt(e)?"length":Eh),Reflect.ownKeys(e)}}class wie extends cj{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Eie=new hj,_ie=new wie,Sie=new hj(!0);const Ok=r=>r,IE=r=>Reflect.getPrototypeOf(r);function Jy(r,e,t=!1,n=!1){r=r.__v_raw;const i=nn(r),a=nn(e);t||($a(e,a)&&Ka(i,"get",e),Ka(i,"get",a));const{has:o}=IE(i),s=n?Ok:t?Pk:M0;if(o.call(i,e))return s(r.get(e));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(e)}function e1(r,e=!1){const t=this.__v_raw,n=nn(t),i=nn(r);return e||($a(r,i)&&Ka(n,"has",r),Ka(n,"has",i)),r===i?t.has(r):t.has(r)||t.has(i)}function t1(r,e=!1){return r=r.__v_raw,!e&&Ka(nn(r),"iterate",Eh),Reflect.get(r,"size",r)}function CR(r,e=!1){!e&&!Dv(r)&&!Bh(r)&&(r=nn(r));const t=nn(this);return IE(t).has.call(t,r)||(t.add(r),Au(t,"add",r,r)),this}function AR(r,e,t=!1){!t&&!Dv(e)&&!Bh(e)&&(e=nn(e));const n=nn(this),{has:i,get:a}=IE(n);let o=i.call(n,r);o||(r=nn(r),o=i.call(n,r));const s=a.call(n,r);return n.set(r,e),o?$a(e,s)&&Au(n,"set",r,e):Au(n,"add",r,e),this}function TR(r){const e=nn(this),{has:t,get:n}=IE(e);let i=t.call(e,r);i||(r=nn(r),i=t.call(e,r)),n&&n.call(e,r);const a=e.delete(r);return i&&Au(e,"delete",r,void 0),a}function OR(){const r=nn(this),e=r.size!==0,t=r.clear();return e&&Au(r,"clear",void 0,void 0),t}function r1(r,e){return function(n,i){const a=this,o=a.__v_raw,s=nn(o),l=e?Ok:r?Pk:M0;return!r&&Ka(s,"iterate",Eh),o.forEach((u,f)=>n.call(i,l(u),l(f),a))}}function n1(r,e,t){return function(...n){const i=this.__v_raw,a=nn(i),o=gv(a),s=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=i[r](...n),f=t?Ok:e?Pk:M0;return!e&&Ka(a,"iterate",l?tA:Eh),{next(){const{value:c,done:h}=u.next();return h?{value:c,done:h}:{value:s?[f(c[0]),f(c[1])]:f(c),done:h}},[Symbol.iterator](){return this}}}}function rf(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function Mie(){const r={get(a){return Jy(this,a)},get size(){return t1(this)},has:e1,add:CR,set:AR,delete:TR,clear:OR,forEach:r1(!1,!1)},e={get(a){return Jy(this,a,!1,!0)},get size(){return t1(this)},has:e1,add(a){return CR.call(this,a,!0)},set(a,o){return AR.call(this,a,o,!0)},delete:TR,clear:OR,forEach:r1(!1,!0)},t={get(a){return Jy(this,a,!0)},get size(){return t1(this,!0)},has(a){return e1.call(this,a,!0)},add:rf("add"),set:rf("set"),delete:rf("delete"),clear:rf("clear"),forEach:r1(!0,!1)},n={get(a){return Jy(this,a,!0,!0)},get size(){return t1(this,!0)},has(a){return e1.call(this,a,!0)},add:rf("add"),set:rf("set"),delete:rf("delete"),clear:rf("clear"),forEach:r1(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=n1(a,!1,!1),t[a]=n1(a,!0,!1),e[a]=n1(a,!1,!0),n[a]=n1(a,!0,!0)}),[r,t,e,n]}const[Cie,Aie,Tie,Oie]=Mie();function kk(r,e){const t=e?r?Oie:Tie:r?Aie:Cie;return(n,i,a)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(rn(t,i)&&i in n?t:n,i,a)}const kie={get:kk(!1,!1)},Iie={get:kk(!1,!0)},Lie={get:kk(!0,!1)};const dj=new WeakMap,vj=new WeakMap,pj=new WeakMap,Pie=new WeakMap;function Die(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nie(r){return r.__v_skip||!Object.isExtensible(r)?0:Die(iie(r))}function dc(r){return Bh(r)?r:Ik(r,!1,Eie,kie,dj)}function Rie(r){return Ik(r,!1,Sie,Iie,vj)}function wp(r){return Ik(r,!0,_ie,Lie,pj)}function Ik(r,e,t,n,i){if(!on(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const a=i.get(r);if(a)return a;const o=Nie(r);if(o===0)return r;const s=new Proxy(r,o===2?n:t);return i.set(r,s),s}function _h(r){return Bh(r)?_h(r.__v_raw):!!(r&&r.__v_isReactive)}function Bh(r){return!!(r&&r.__v_isReadonly)}function Dv(r){return!!(r&&r.__v_isShallow)}function gj(r){return r?!!r.__v_raw:!1}function nn(r){const e=r&&r.__v_raw;return e?nn(e):r}function Lk(r){return Object.isExtensible(r)&&JG(r,"__v_skip",!0),r}const M0=r=>on(r)?dc(r):r,Pk=r=>on(r)?wp(r):r;class mj{constructor(e,t,n,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ck(()=>e(this._value),()=>Kg(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=nn(this);return(!e._cacheable||e.effect.dirty)&&$a(e._value,e._value=e.effect.run())&&Kg(e,4),Dk(e),e.effect._dirtyLevel>=2&&Kg(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Bie(r,e,t=!1){let n,i;const a=er(r);return a?(n=r,i=oi):(n=r.get,i=r.set),new mj(n,i,a||!i,t)}function Dk(r){var e;jf&&wh&&(r=nn(r),sj(wh,(e=r.dep)!=null?e:r.dep=uj(()=>r.dep=void 0,r instanceof mj?r:void 0)))}function Kg(r,e=4,t,n){r=nn(r);const i=r.dep;i&&lj(i,e)}function Sn(r){return!!(r&&r.__v_isRef===!0)}function xt(r){return yj(r,!1)}function As(r){return yj(r,!0)}function yj(r,e){return Sn(r)?r:new Fie(r,e)}class Fie{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:nn(e),this._value=t?e:M0(e)}get value(){return Dk(this),this._value}set value(e){const t=this.__v_isShallow||Dv(e)||Bh(e);e=t?e:nn(e),$a(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:M0(e),Kg(this,4))}}function $(r){return Sn(r)?r.value:r}const $ie={get:(r,e,t)=>$(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const i=r[e];return Sn(i)&&!Sn(t)?(i.value=t,!0):Reflect.set(r,e,t,n)}};function bj(r){return _h(r)?r:new Proxy(r,$ie)}class zie{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e(()=>Dk(this),()=>Kg(this));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function xj(r){return new zie(r)}function LE(r){const e=Jt(r)?new Array(r.length):{};for(const t in r)e[t]=wj(r,t);return e}class Gie{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return mie(nn(this._object),this._key)}}class jie{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function vl(r,e,t){return Sn(r)?r:er(r)?new jie(r):on(r)&&arguments.length>1?wj(r,e,t):xt(r)}function wj(r,e,t){const n=r[e];return Sn(n)?n:new Gie(r,e,t)}/**
* @vue/runtime-core v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Uf(r,e,t,n){try{return n?r(...n):r()}catch(i){Mm(i,e,t)}}function Ho(r,e,t,n){if(er(r)){const i=Uf(r,e,t,n);return i&&Rx(i)&&i.catch(a=>{Mm(a,e,t)}),i}if(Jt(r)){const i=[];for(let a=0;a<r.length;a++)i.push(Ho(r[a],e,t,n));return i}}function Mm(r,e,t,n=!0){const i=e?e.vnode:null;if(e){let a=e.parent;const o=e.proxy,s=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](r,o,s)===!1)return}a=a.parent}const l=e.appContext.config.errorHandler;if(l){cc(),Uf(l,null,10,[r,o,s]),hc();return}}Uie(r,t,i,n)}function Uie(r,e,t,n=!0){console.error(r)}let C0=!1,rA=!1;const ca=[];let ul=0;const mv=[];let bf=null,ah=0;const Ej=Promise.resolve();let Nk=null;function di(r){const e=Nk||Ej;return r?e.then(this?r.bind(this):r):e}function Wie(r){let e=ul+1,t=ca.length;for(;e<t;){const n=e+t>>>1,i=ca[n],a=A0(i);a<r||a===r&&i.pre?e=n+1:t=n}return e}function PE(r){(!ca.length||!ca.includes(r,C0&&r.allowRecurse?ul+1:ul))&&(r.id==null?ca.push(r):ca.splice(Wie(r.id),0,r),_j())}function _j(){!C0&&!rA&&(rA=!0,Nk=Ej.then(Mj))}function Vie(r){const e=ca.indexOf(r);e>ul&&ca.splice(e,1)}function Hie(r){Jt(r)?mv.push(...r):(!bf||!bf.includes(r,r.allowRecurse?ah+1:ah))&&mv.push(r),_j()}function kR(r,e,t=C0?ul+1:0){for(;t<ca.length;t++){const n=ca[t];if(n&&n.pre){if(r&&n.id!==r.uid)continue;ca.splice(t,1),t--,n()}}}function Sj(r){if(mv.length){const e=[...new Set(mv)].sort((t,n)=>A0(t)-A0(n));if(mv.length=0,bf){bf.push(...e);return}for(bf=e,ah=0;ah<bf.length;ah++){const t=bf[ah];t.active!==!1&&t()}bf=null,ah=0}}const A0=r=>r.id==null?1/0:r.id,Xie=(r,e)=>{const t=A0(r)-A0(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function Mj(r){rA=!1,C0=!0,ca.sort(Xie);try{for(ul=0;ul<ca.length;ul++){const e=ca[ul];e&&e.active!==!1&&Uf(e,e.i,e.i?15:14)}}finally{ul=0,ca.length=0,Sj(),C0=!1,Nk=null,(ca.length||mv.length)&&Mj()}}let ki=null,DE=null;function $x(r){const e=ki;return ki=r,DE=r&&r.type.__scopeId||null,e}function crt(r){DE=r}function hrt(){DE=null}function gr(r,e=ki,t){if(!e||r._n)return r;const n=(...i)=>{n._d&&GR(-1);const a=$x(e);let o;try{o=r(...i)}finally{$x(a),n._d&&GR(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Kf(r,e){if(ki===null)return r;const t=$E(ki),n=r.dirs||(r.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,s,l=hn]=e[i];a&&(er(a)&&(a={mounted:a,updated:a}),a.deep&&Tf(o),n.push({dir:a,instance:t,value:o,oldValue:void 0,arg:s,modifiers:l}))}return r}function Gc(r,e,t,n){const i=r.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[n];l&&(cc(),Ho(l,t,8,[r.el,s,r,e]),hc())}}const xf=Symbol("_leaveCb"),i1=Symbol("_enterCb");function Cj(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fn(()=>{r.isMounted=!0}),La(()=>{r.isUnmounting=!0}),r}const Lo=[Function,Array],Aj={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Lo,onEnter:Lo,onAfterEnter:Lo,onEnterCancelled:Lo,onBeforeLeave:Lo,onLeave:Lo,onAfterLeave:Lo,onLeaveCancelled:Lo,onBeforeAppear:Lo,onAppear:Lo,onAfterAppear:Lo,onAppearCancelled:Lo},Tj=r=>{const e=r.subTree;return e.component?Tj(e.component):e},Yie={name:"BaseTransition",props:Aj,setup(r,{slots:e}){const t=Wn(),n=Cj();return()=>{const i=e.default&&Rk(e.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1){for(const h of i)if(h.type!==Ca){a=h;break}}const o=nn(r),{mode:s}=o;if(n.isLeaving)return kS(a);const l=IR(a);if(!l)return kS(a);let u=T0(l,o,n,t,h=>u=h);Nv(l,u);const f=t.subTree,c=f&&IR(f);if(c&&c.type!==Ca&&!oh(l,c)&&Tj(t).type!==Ca){const h=T0(c,o,n,t);if(Nv(c,h),s==="out-in"&&l.type!==Ca)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,t.update.active!==!1&&(t.effect.dirty=!0,t.update())},kS(a);s==="in-out"&&l.type!==Ca&&(h.delayLeave=(d,v,p)=>{const g=Oj(n,c);g[String(c.key)]=c,d[xf]=()=>{v(),d[xf]=void 0,delete u.delayedLeave},u.delayedLeave=p})}return a}}},Kie=Yie;function Oj(r,e){const{leavingVNodes:t}=r;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function T0(r,e,t,n,i){const{appear:a,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:c,onBeforeLeave:h,onLeave:d,onAfterLeave:v,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:b,onAppearCancelled:y}=e,x=String(r.key),w=Oj(t,r),E=(C,M)=>{C&&Ho(C,n,9,M)},_=(C,M)=>{const T=M[1];E(C,M),Jt(C)?C.every(A=>A.length<=1)&&T():C.length<=1&&T()},S={mode:o,persisted:s,beforeEnter(C){let M=l;if(!t.isMounted)if(a)M=g||l;else return;C[xf]&&C[xf](!0);const T=w[x];T&&oh(r,T)&&T.el[xf]&&T.el[xf](),E(M,[C])},enter(C){let M=u,T=f,A=c;if(!t.isMounted)if(a)M=m||u,T=b||f,A=y||c;else return;let O=!1;const L=C[i1]=N=>{O||(O=!0,N?E(A,[C]):E(T,[C]),S.delayedLeave&&S.delayedLeave(),C[i1]=void 0)};M?_(M,[C,L]):L()},leave(C,M){const T=String(r.key);if(C[i1]&&C[i1](!0),t.isUnmounting)return M();E(h,[C]);let A=!1;const O=C[xf]=L=>{A||(A=!0,M(),L?E(p,[C]):E(v,[C]),C[xf]=void 0,w[T]===r&&delete w[T])};w[T]=r,d?_(d,[C,O]):O()},clone(C){const M=T0(C,e,t,n,i);return i&&i(M),M}};return S}function kS(r){if(Cm(r))return r=ku(r),r.children=null,r}function IR(r){if(!Cm(r))return r;const{shapeFlag:e,children:t}=r;if(t){if(e&16)return t[0];if(e&32&&er(t.default))return t.default()}}function Nv(r,e){r.shapeFlag&6&&r.component?Nv(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function Rk(r,e=!1,t){let n=[],i=0;for(let a=0;a<r.length;a++){let o=r[a];const s=t==null?o.key:String(t)+String(o.key!=null?o.key:a);o.type===Qn?(o.patchFlag&128&&i++,n=n.concat(Rk(o.children,e,s))):(e||o.type!==Ca)&&n.push(s!=null?ku(o,{key:s}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Rt(r,e){return er(r)?gi({name:r.name},e,{setup:r}):r}const qg=r=>!!r.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function drt(r){er(r)&&(r={loader:r});const{loader:e,loadingComponent:t,errorComponent:n,delay:i=200,timeout:a,suspensible:o=!0,onError:s}=r;let l=null,u,f=0;const c=()=>(f++,l=null,h()),h=()=>{let d;return l||(d=l=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),s)return new Promise((p,g)=>{s(v,()=>p(c()),()=>g(v),f+1)});throw v}).then(v=>d!==l&&l?l:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return Rt({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const d=Ai;if(u)return()=>IS(u,d);const v=b=>{l=null,Mm(b,d,13,!n)};if(o&&d.suspense||km)return h().then(b=>()=>IS(b,d)).catch(b=>(v(b),()=>n?_r(n,{error:b}):null));const p=xt(!1),g=xt(),m=xt(!!i);return i&&setTimeout(()=>{m.value=!1},i),a!=null&&setTimeout(()=>{if(!p.value&&!g.value){const b=new Error(`Async component timed out after ${a}ms.`);v(b),g.value=b}},a),h().then(()=>{p.value=!0,d.parent&&Cm(d.parent.vnode)&&(d.parent.effect.dirty=!0,PE(d.parent.update))}).catch(b=>{v(b),g.value=b}),()=>{if(p.value&&u)return IS(u,d);if(g.value&&n)return _r(n,{error:g.value});if(t&&!m.value)return _r(t)}}})}function IS(r,e){const{ref:t,props:n,children:i,ce:a}=e.vnode,o=_r(r,n,i);return o.ref=t,o.ce=a,delete e.vnode.ce,o}const Cm=r=>r.type.__isKeepAlive;function qie(r,e){Ij(r,"a",e)}function kj(r,e){Ij(r,"da",e)}function Ij(r,e,t=Ai){const n=r.__wdc||(r.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(NE(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Cm(i.parent.vnode)&&Zie(n,e,t,i),i=i.parent}}function Zie(r,e,t,n){const i=NE(e,r,n,!0);RE(()=>{_k(n[e],i)},t)}function NE(r,e,t=Ai,n=!1){if(t){const i=t[r]||(t[r]=[]),a=e.__weh||(e.__weh=(...o)=>{cc();const s=Om(t),l=Ho(e,t,r,o);return s(),hc(),l});return n?i.unshift(a):i.push(a),a}}const $u=r=>(e,t=Ai)=>{(!km||r==="sp")&&NE(r,(...n)=>e(...n),t)},Bk=$u("bm"),Fn=$u("m"),Qie=$u("bu"),Fk=$u("u"),La=$u("bum"),RE=$u("um"),Jie=$u("sp"),eae=$u("rtg"),tae=$u("rtc");function rae(r,e=Ai){NE("ec",r,e)}const Lj="components",Pj=Symbol.for("v-ndc");function Ma(r){return qr(r)?nae(Lj,r,!1)||r:r||Pj}function nae(r,e,t=!0,n=!1){const i=ki||Ai;if(i){const a=i.type;if(r===Lj){const s=Kae(a,!1);if(s&&(s===e||s===Mo(e)||s===TE(Mo(e))))return a}const o=LR(i[r]||a[r],e)||LR(i.appContext[r],e);return!o&&n?a:o}}function LR(r,e){return r&&(r[e]||r[Mo(e)]||r[TE(Mo(e))])}function vrt(r,e,t,n){let i;const a=t&&t[n];if(Jt(r)||qr(r)){i=new Array(r.length);for(let o=0,s=r.length;o<s;o++)i[o]=e(r[o],o,void 0,a&&a[o])}else if(typeof r=="number"){i=new Array(r);for(let o=0;o<r;o++)i[o]=e(o+1,o,void 0,a&&a[o])}else if(on(r))if(r[Symbol.iterator])i=Array.from(r,(o,s)=>e(o,s,void 0,a&&a[s]));else{const o=Object.keys(r);i=new Array(o.length);for(let s=0,l=o.length;s<l;s++){const u=o[s];i[s]=e(r[u],u,s,a&&a[s])}}else i=[];return t&&(t[n]=i),i}function iae(r,e){for(let t=0;t<e.length;t++){const n=e[t];if(Jt(n))for(let i=0;i<n.length;i++)r[n[i].name]=n[i].fn;else n&&(r[n.name]=n.key?(...i)=>{const a=n.fn(...i);return a&&(a.key=n.key),a}:n.fn)}return r}function dr(r,e,t={},n,i){if(ki.isCE||ki.parent&&qg(ki.parent)&&ki.parent.isCE)return e!=="default"&&(t.name=e),_r("slot",t,n&&n());let a=r[e];a&&a._c&&(a._d=!1),ct();const o=a&&Dj(a(t)),s=mr(Qn,{key:(t.key||o&&o.key||`_${e}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&r._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function Dj(r){return r.some(e=>Fh(e)?!(e.type===Ca||e.type===Qn&&!Dj(e.children)):!0)?r:null}const nA=r=>r?n9(r)?$E(r):nA(r.parent):null,Zg=gi(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>nA(r.parent),$root:r=>nA(r.root),$emit:r=>r.emit,$options:r=>$k(r),$forceUpdate:r=>r.f||(r.f=()=>{r.effect.dirty=!0,PE(r.update)}),$nextTick:r=>r.n||(r.n=di.bind(r.proxy)),$watch:r=>Lae.bind(r)}),LS=(r,e)=>r!==hn&&!r.__isScriptSetup&&rn(r,e),aae={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:l}=r;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return a[e]}else{if(LS(n,e))return o[e]=1,n[e];if(i!==hn&&rn(i,e))return o[e]=2,i[e];if((u=r.propsOptions[0])&&rn(u,e))return o[e]=3,a[e];if(t!==hn&&rn(t,e))return o[e]=4,t[e];iA&&(o[e]=0)}}const f=Zg[e];let c,h;if(f)return e==="$attrs"&&Ka(r.attrs,"get",""),f(r);if((c=s.__cssModules)&&(c=c[e]))return c;if(t!==hn&&rn(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,rn(h,e))return h[e]},set({_:r},e,t){const{data:n,setupState:i,ctx:a}=r;return LS(i,e)?(i[e]=t,!0):n!==hn&&rn(n,e)?(n[e]=t,!0):rn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(a[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!t[o]||r!==hn&&rn(r,o)||LS(e,o)||(s=a[0])&&rn(s,o)||rn(n,o)||rn(Zg,o)||rn(i.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:rn(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function Am(){return Nj().slots}function oae(){return Nj().attrs}function Nj(){const r=Wn();return r.setupContext||(r.setupContext=a9(r))}function zx(r){return Jt(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}function prt(r,e){return!r||!e?r||e:Jt(r)&&Jt(e)?r.concat(e):gi({},zx(r),zx(e))}let iA=!0;function sae(r){const e=$k(r),t=r.proxy,n=r.ctx;iA=!1,e.beforeCreate&&PR(e.beforeCreate,r,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:f,beforeMount:c,mounted:h,beforeUpdate:d,updated:v,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:y,unmounted:x,render:w,renderTracked:E,renderTriggered:_,errorCaptured:S,serverPrefetch:C,expose:M,inheritAttrs:T,components:A,directives:O,filters:L}=e;if(u&&lae(u,n,null),o)for(const R in o){const G=o[R];er(G)&&(n[R]=G.bind(t))}if(i){const R=i.call(t,t);on(R)&&(r.data=dc(R))}if(iA=!0,a)for(const R in a){const G=a[R],D=er(G)?G.bind(t,t):er(G.get)?G.get.bind(t,t):oi,B=!er(G)&&er(G.set)?G.set.bind(t):oi,Y=Me({get:D,set:B});Object.defineProperty(n,R,{enumerable:!0,configurable:!0,get:()=>Y.value,set:ee=>Y.value=ee})}if(s)for(const R in s)Rj(s[R],n,t,R);if(l){const R=er(l)?l.call(t):l;Reflect.ownKeys(R).forEach(G=>{Ia(G,R[G])})}f&&PR(f,r,"c");function P(R,G){Jt(G)?G.forEach(D=>R(D.bind(t))):G&&R(G.bind(t))}if(P(Bk,c),P(Fn,h),P(Qie,d),P(Fk,v),P(qie,p),P(kj,g),P(rae,S),P(tae,E),P(eae,_),P(La,b),P(RE,x),P(Jie,C),Jt(M))if(M.length){const R=r.exposed||(r.exposed={});M.forEach(G=>{Object.defineProperty(R,G,{get:()=>t[G],set:D=>t[G]=D})})}else r.exposed||(r.exposed={});w&&r.render===oi&&(r.render=w),T!=null&&(r.inheritAttrs=T),A&&(r.components=A),O&&(r.directives=O)}function lae(r,e,t=oi){Jt(r)&&(r=aA(r));for(const n in r){const i=r[n];let a;on(i)?"default"in i?a=tn(i.from||n,i.default,!0):a=tn(i.from||n):a=tn(i),Sn(a)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function PR(r,e,t){Ho(Jt(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function Rj(r,e,t,n){const i=n.includes(".")?Qj(t,n):()=>t[n];if(qr(r)){const a=e[r];er(a)&&qt(i,a)}else if(er(r))qt(i,r.bind(t));else if(on(r))if(Jt(r))r.forEach(a=>Rj(a,e,t,n));else{const a=er(r.handler)?r.handler.bind(t):e[r.handler];er(a)&&qt(i,a,r)}}function $k(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(e);let l;return s?l=s:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(u=>Gx(l,u,o,!0)),Gx(l,e,o)),on(e)&&a.set(e,l),l}function Gx(r,e,t,n=!1){const{mixins:i,extends:a}=e;a&&Gx(r,a,t,!0),i&&i.forEach(o=>Gx(r,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const s=uae[o]||t&&t[o];r[o]=s?s(r[o],e[o]):e[o]}return r}const uae={data:DR,props:NR,emits:NR,methods:kg,computed:kg,beforeCreate:wa,created:wa,beforeMount:wa,mounted:wa,beforeUpdate:wa,updated:wa,beforeDestroy:wa,beforeUnmount:wa,destroyed:wa,unmounted:wa,activated:wa,deactivated:wa,errorCaptured:wa,serverPrefetch:wa,components:kg,directives:kg,watch:cae,provide:DR,inject:fae};function DR(r,e){return e?r?function(){return gi(er(r)?r.call(this,this):r,er(e)?e.call(this,this):e)}:e:r}function fae(r,e){return kg(aA(r),aA(e))}function aA(r){if(Jt(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function wa(r,e){return r?[...new Set([].concat(r,e))]:e}function kg(r,e){return r?gi(Object.create(null),r,e):e}function NR(r,e){return r?Jt(r)&&Jt(e)?[...new Set([...r,...e])]:gi(Object.create(null),zx(r),zx(e??{})):e}function cae(r,e){if(!r)return e;if(!e)return r;const t=gi(Object.create(null),r);for(const n in e)t[n]=wa(r[n],e[n]);return t}function Bj(){return{app:null,config:{isNativeTag:rie,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hae=0;function dae(r,e){return function(n,i=null){er(n)||(n=gi({},n)),i!=null&&!on(i)&&(i=null);const a=Bj(),o=new WeakSet;let s=!1;const l=a.app={_uid:hae++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:Zae,get config(){return a.config},set config(u){},use(u,...f){return o.has(u)||(u&&er(u.install)?(o.add(u),u.install(l,...f)):er(u)&&(o.add(u),u(l,...f))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,f){return f?(a.components[u]=f,l):a.components[u]},directive(u,f){return f?(a.directives[u]=f,l):a.directives[u]},mount(u,f,c){if(!s){const h=_r(n,i);return h.appContext=a,c===!0?c="svg":c===!1&&(c=void 0),f&&e?e(h,u):r(h,u,c),s=!0,l._container=u,u.__vue_app__=l,$E(h.component)}},unmount(){s&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,f){return a.provides[u]=f,l},runWithContext(u){const f=Sh;Sh=l;try{return u()}finally{Sh=f}}};return l}}let Sh=null;function Ia(r,e){if(Ai){let t=Ai.provides;const n=Ai.parent&&Ai.parent.provides;n===t&&(t=Ai.provides=Object.create(n)),t[r]=e}}function tn(r,e,t=!1){const n=Ai||ki;if(n||Sh){const i=Sh?Sh._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return t&&er(e)?e.call(n&&n.proxy):e}}function vae(){return!!(Ai||ki||Sh)}const Fj={},$j=()=>Object.create(Fj),zj=r=>Object.getPrototypeOf(r)===Fj;function pae(r,e,t,n=!1){const i={},a=$j();r.propsDefaults=Object.create(null),Gj(r,e,i,a);for(const o in r.propsOptions[0])o in i||(i[o]=void 0);t?r.props=n?i:Rie(i):r.type.props?r.props=i:r.props=a,r.attrs=a}function gae(r,e,t,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=r,s=nn(i),[l]=r.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const f=r.vnode.dynamicProps;for(let c=0;c<f.length;c++){let h=f[c];if(FE(r.emitsOptions,h))continue;const d=e[h];if(l)if(rn(a,h))d!==a[h]&&(a[h]=d,u=!0);else{const v=Mo(h);i[v]=oA(l,s,v,d,r,!1)}else d!==a[h]&&(a[h]=d,u=!0)}}}else{Gj(r,e,i,a)&&(u=!0);let f;for(const c in s)(!e||!rn(e,c)&&((f=Fu(c))===c||!rn(e,f)))&&(l?t&&(t[c]!==void 0||t[f]!==void 0)&&(i[c]=oA(l,s,c,void 0,r,!0)):delete i[c]);if(a!==s)for(const c in a)(!e||!rn(e,c))&&(delete a[c],u=!0)}u&&Au(r.attrs,"set","")}function Gj(r,e,t,n){const[i,a]=r.propsOptions;let o=!1,s;if(e)for(let l in e){if(Yg(l))continue;const u=e[l];let f;i&&rn(i,f=Mo(l))?!a||!a.includes(f)?t[f]=u:(s||(s={}))[f]=u:FE(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(a){const l=nn(t),u=s||hn;for(let f=0;f<a.length;f++){const c=a[f];t[c]=oA(i,l,c,u[c],r,!rn(u,c))}}return o}function oA(r,e,t,n,i,a){const o=r[t];if(o!=null){const s=rn(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&er(l)){const{propsDefaults:u}=i;if(t in u)n=u[t];else{const f=Om(i);n=u[t]=l.call(null,e),f()}}else n=l}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===Fu(t))&&(n=!0))}return n}const mae=new WeakMap;function jj(r,e,t=!1){const n=t?mae:e.propsCache,i=n.get(r);if(i)return i;const a=r.props,o={},s=[];let l=!1;if(!er(r)){const f=c=>{l=!0;const[h,d]=jj(c,e,!0);gi(o,h),d&&s.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(f),r.extends&&f(r.extends),r.mixins&&r.mixins.forEach(f)}if(!a&&!l)return on(r)&&n.set(r,pv),pv;if(Jt(a))for(let f=0;f<a.length;f++){const c=Mo(a[f]);RR(c)&&(o[c]=hn)}else if(a)for(const f in a){const c=Mo(f);if(RR(c)){const h=a[f],d=o[c]=Jt(h)||er(h)?{type:h}:gi({},h),v=d.type;let p=!1,g=!0;if(Jt(v))for(let m=0;m<v.length;++m){const b=v[m],y=er(b)&&b.name;if(y==="Boolean"){p=!0;break}else y==="String"&&(g=!1)}else p=er(v)&&v.name==="Boolean";d[0]=p,d[1]=g,(p||rn(d,"default"))&&s.push(c)}}const u=[o,s];return on(r)&&n.set(r,u),u}function RR(r){return r[0]!=="$"&&!Yg(r)}const Uj=r=>r[0]==="_"||r==="$stable",zk=r=>Jt(r)?r.map(ol):[ol(r)],yae=(r,e,t)=>{if(e._n)return e;const n=gr((...i)=>zk(e(...i)),t);return n._c=!1,n},Wj=(r,e,t)=>{const n=r._ctx;for(const i in r){if(Uj(i))continue;const a=r[i];if(er(a))e[i]=yae(i,a,n);else if(a!=null){const o=zk(a);e[i]=()=>o}}},Vj=(r,e)=>{const t=zk(e);r.slots.default=()=>t},Hj=(r,e,t)=>{for(const n in e)(t||n!=="_")&&(r[n]=e[n])},bae=(r,e,t)=>{const n=r.slots=$j();if(r.vnode.shapeFlag&32){const i=e._;i?(Hj(n,e,t),t&&JG(n,"_",i,!0)):Wj(e,n)}else e&&Vj(r,e)},xae=(r,e,t)=>{const{vnode:n,slots:i}=r;let a=!0,o=hn;if(n.shapeFlag&32){const s=e._;s?t&&s===1?a=!1:Hj(i,e,t):(a=!e.$stable,Wj(e,i)),o=e}else e&&(Vj(r,e),o={default:1});if(a)for(const s in i)!Uj(s)&&o[s]==null&&delete i[s]};function sA(r,e,t,n,i=!1){if(Jt(r)){r.forEach((h,d)=>sA(h,e&&(Jt(e)?e[d]:e),t,n,i));return}if(qg(n)&&!i)return;const a=n.shapeFlag&4?$E(n.component):n.el,o=i?null:a,{i:s,r:l}=r,u=e&&e.r,f=s.refs===hn?s.refs={}:s.refs,c=s.setupState;if(u!=null&&u!==l&&(qr(u)?(f[u]=null,rn(c,u)&&(c[u]=null)):Sn(u)&&(u.value=null)),er(l))Uf(l,s,12,[o,f]);else{const h=qr(l),d=Sn(l);if(h||d){const v=()=>{if(r.f){const p=h?rn(c,l)?c[l]:f[l]:l.value;i?Jt(p)&&_k(p,a):Jt(p)?p.includes(a)||p.push(a):h?(f[l]=[a],rn(c,l)&&(c[l]=f[l])):(l.value=[a],r.k&&(f[r.k]=l.value))}else h?(f[l]=o,rn(c,l)&&(c[l]=o)):d&&(l.value=o,r.k&&(f[r.k]=o))};o?(v.id=-1,Fa(v,t)):v()}}}const Xj=Symbol("_vte"),wae=r=>r.__isTeleport,Qg=r=>r&&(r.disabled||r.disabled===""),BR=r=>typeof SVGElement<"u"&&r instanceof SVGElement,FR=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,lA=(r,e)=>{const t=r&&r.to;return qr(t)?e?e(t):null:t},Eae={name:"Teleport",__isTeleport:!0,process(r,e,t,n,i,a,o,s,l,u){const{mc:f,pc:c,pbc:h,o:{insert:d,querySelector:v,createText:p,createComment:g}}=u,m=Qg(e.props);let{shapeFlag:b,children:y,dynamicChildren:x}=e;if(r==null){const w=e.el=p(""),E=e.anchor=p("");d(w,t,n),d(E,t,n);const _=e.target=lA(e.props,v),S=Kj(_,e,p,d);_&&(o==="svg"||BR(_)?o="svg":(o==="mathml"||FR(_))&&(o="mathml"));const C=(M,T)=>{b&16&&f(y,M,T,i,a,o,s,l)};m?C(t,E):_&&C(_,S)}else{e.el=r.el,e.targetStart=r.targetStart;const w=e.anchor=r.anchor,E=e.target=r.target,_=e.targetAnchor=r.targetAnchor,S=Qg(r.props),C=S?t:E,M=S?w:_;if(o==="svg"||BR(E)?o="svg":(o==="mathml"||FR(E))&&(o="mathml"),x?(h(r.dynamicChildren,x,C,i,a,o,s),Gk(r,e,!0)):l||c(r,e,C,M,i,a,o,s,!1),m)S?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):a1(e,t,w,u,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const T=e.target=lA(e.props,v);T&&a1(e,T,null,u,0)}else S&&a1(e,E,_,u,1)}Yj(e)},remove(r,e,t,{um:n,o:{remove:i}},a){const{shapeFlag:o,children:s,anchor:l,targetStart:u,targetAnchor:f,target:c,props:h}=r;if(c&&(i(u),i(f)),a&&i(l),o&16){const d=a||!Qg(h);for(let v=0;v<s.length;v++){const p=s[v];n(p,e,t,d,!!p.dynamicChildren)}}},move:a1,hydrate:_ae};function a1(r,e,t,{o:{insert:n},m:i},a=2){a===0&&n(r.targetAnchor,e,t);const{el:o,anchor:s,shapeFlag:l,children:u,props:f}=r,c=a===2;if(c&&n(o,e,t),(!c||Qg(f))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,t,2);c&&n(s,e,t)}function _ae(r,e,t,n,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l,insert:u,createText:f}},c){const h=e.target=lA(e.props,l);if(h){const d=h._lpa||h.firstChild;if(e.shapeFlag&16)if(Qg(e.props))e.anchor=c(o(r),e,s(r),t,n,i,a),e.targetStart=d,e.targetAnchor=d&&o(d);else{e.anchor=o(r);let v=d;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}v=o(v)}e.targetAnchor||Kj(h,e,f,u),c(d&&o(d),e,h,t,n,i,a)}Yj(e)}return e.anchor&&o(e.anchor)}const Sae=Eae;function Yj(r){const e=r.ctx;if(e&&e.ut){let t=r.children[0].el;for(;t&&t!==r.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}function Kj(r,e,t,n){const i=e.targetStart=t(""),a=e.targetAnchor=t("");return i[Xj]=a,r&&(n(i,r),n(a,r)),a}const Fa=$ae;function Mae(r){return Cae(r)}function Cae(r,e){const t=ej();t.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:f,parentNode:c,nextSibling:h,setScopeId:d=oi,insertStaticContent:v}=r,p=(te,H,de,Be=null,Ie=null,Pe=null,Ye=void 0,V=null,z=!!H.dynamicChildren)=>{if(te===H)return;te&&!oh(te,H)&&(Be=Fe(te),ee(te,Ie,Pe,!0),te=null),H.patchFlag===-2&&(z=!1,H.dynamicChildren=null);const{type:F,ref:k,shapeFlag:ue}=H;switch(F){case nd:g(te,H,de,Be);break;case Ca:m(te,H,de,Be);break;case NS:te==null&&b(H,de,Be,Ye);break;case Qn:A(te,H,de,Be,Ie,Pe,Ye,V,z);break;default:ue&1?w(te,H,de,Be,Ie,Pe,Ye,V,z):ue&6?O(te,H,de,Be,Ie,Pe,Ye,V,z):(ue&64||ue&128)&&F.process(te,H,de,Be,Ie,Pe,Ye,V,z,Xe)}k!=null&&Ie&&sA(k,te&&te.ref,Pe,H||te,!H)},g=(te,H,de,Be)=>{if(te==null)n(H.el=s(H.children),de,Be);else{const Ie=H.el=te.el;H.children!==te.children&&u(Ie,H.children)}},m=(te,H,de,Be)=>{te==null?n(H.el=l(H.children||""),de,Be):H.el=te.el},b=(te,H,de,Be)=>{[te.el,te.anchor]=v(te.children,H,de,Be,te.el,te.anchor)},y=({el:te,anchor:H},de,Be)=>{let Ie;for(;te&&te!==H;)Ie=h(te),n(te,de,Be),te=Ie;n(H,de,Be)},x=({el:te,anchor:H})=>{let de;for(;te&&te!==H;)de=h(te),i(te),te=de;i(H)},w=(te,H,de,Be,Ie,Pe,Ye,V,z)=>{H.type==="svg"?Ye="svg":H.type==="math"&&(Ye="mathml"),te==null?E(H,de,Be,Ie,Pe,Ye,V,z):C(te,H,Ie,Pe,Ye,V,z)},E=(te,H,de,Be,Ie,Pe,Ye,V)=>{let z,F;const{props:k,shapeFlag:ue,transition:ce,dirs:X}=te;if(z=te.el=o(te.type,Pe,k&&k.is,k),ue&8?f(z,te.children):ue&16&&S(te.children,z,null,Be,Ie,PS(te,Pe),Ye,V),X&&Gc(te,null,Be,"created"),_(z,te,te.scopeId,Ye,Be),k){for(const Ce in k)Ce!=="value"&&!Yg(Ce)&&a(z,Ce,null,k[Ce],Pe,Be);"value"in k&&a(z,"value",null,k.value,Pe),(F=k.onVnodeBeforeMount)&&Xs(F,Be,te)}X&&Gc(te,null,Be,"beforeMount");const ae=Aae(Ie,ce);ae&&ce.beforeEnter(z),n(z,H,de),((F=k&&k.onVnodeMounted)||ae||X)&&Fa(()=>{F&&Xs(F,Be,te),ae&&ce.enter(z),X&&Gc(te,null,Be,"mounted")},Ie)},_=(te,H,de,Be,Ie)=>{if(de&&d(te,de),Be)for(let Pe=0;Pe<Be.length;Pe++)d(te,Be[Pe]);if(Ie){let Pe=Ie.subTree;if(H===Pe){const Ye=Ie.vnode;_(te,Ye,Ye.scopeId,Ye.slotScopeIds,Ie.parent)}}},S=(te,H,de,Be,Ie,Pe,Ye,V,z=0)=>{for(let F=z;F<te.length;F++){const k=te[F]=V?wf(te[F]):ol(te[F]);p(null,k,H,de,Be,Ie,Pe,Ye,V)}},C=(te,H,de,Be,Ie,Pe,Ye)=>{const V=H.el=te.el;let{patchFlag:z,dynamicChildren:F,dirs:k}=H;z|=te.patchFlag&16;const ue=te.props||hn,ce=H.props||hn;let X;if(de&&jc(de,!1),(X=ce.onVnodeBeforeUpdate)&&Xs(X,de,H,te),k&&Gc(H,te,de,"beforeUpdate"),de&&jc(de,!0),(ue.innerHTML&&ce.innerHTML==null||ue.textContent&&ce.textContent==null)&&f(V,""),F?M(te.dynamicChildren,F,V,de,Be,PS(H,Ie),Pe):Ye||G(te,H,V,null,de,Be,PS(H,Ie),Pe,!1),z>0){if(z&16)T(V,ue,ce,de,Ie);else if(z&2&&ue.class!==ce.class&&a(V,"class",null,ce.class,Ie),z&4&&a(V,"style",ue.style,ce.style,Ie),z&8){const ae=H.dynamicProps;for(let Ce=0;Ce<ae.length;Ce++){const ke=ae[Ce],Ke=ue[ke],Et=ce[ke];(Et!==Ke||ke==="value")&&a(V,ke,Ke,Et,Ie,de)}}z&1&&te.children!==H.children&&f(V,H.children)}else!Ye&&F==null&&T(V,ue,ce,de,Ie);((X=ce.onVnodeUpdated)||k)&&Fa(()=>{X&&Xs(X,de,H,te),k&&Gc(H,te,de,"updated")},Be)},M=(te,H,de,Be,Ie,Pe,Ye)=>{for(let V=0;V<H.length;V++){const z=te[V],F=H[V],k=z.el&&(z.type===Qn||!oh(z,F)||z.shapeFlag&70)?c(z.el):de;p(z,F,k,null,Be,Ie,Pe,Ye,!0)}},T=(te,H,de,Be,Ie)=>{if(H!==de){if(H!==hn)for(const Pe in H)!Yg(Pe)&&!(Pe in de)&&a(te,Pe,H[Pe],null,Ie,Be);for(const Pe in de){if(Yg(Pe))continue;const Ye=de[Pe],V=H[Pe];Ye!==V&&Pe!=="value"&&a(te,Pe,V,Ye,Ie,Be)}"value"in de&&a(te,"value",H.value,de.value,Ie)}},A=(te,H,de,Be,Ie,Pe,Ye,V,z)=>{const F=H.el=te?te.el:s(""),k=H.anchor=te?te.anchor:s("");let{patchFlag:ue,dynamicChildren:ce,slotScopeIds:X}=H;X&&(V=V?V.concat(X):X),te==null?(n(F,de,Be),n(k,de,Be),S(H.children||[],de,k,Ie,Pe,Ye,V,z)):ue>0&&ue&64&&ce&&te.dynamicChildren?(M(te.dynamicChildren,ce,de,Ie,Pe,Ye,V),(H.key!=null||Ie&&H===Ie.subTree)&&Gk(te,H,!0)):G(te,H,de,k,Ie,Pe,Ye,V,z)},O=(te,H,de,Be,Ie,Pe,Ye,V,z)=>{H.slotScopeIds=V,te==null?H.shapeFlag&512?Ie.ctx.activate(H,de,Be,Ye,z):L(H,de,Be,Ie,Pe,Ye,z):N(te,H,z)},L=(te,H,de,Be,Ie,Pe,Ye)=>{const V=te.component=Vae(te,Be,Ie);if(Cm(te)&&(V.ctx.renderer=Xe),Hae(V,!1,Ye),V.asyncDep){if(Ie&&Ie.registerDep(V,P,Ye),!te.el){const z=V.subTree=_r(Ca);m(null,z,H,de)}}else P(V,te,H,de,Ie,Pe,Ye)},N=(te,H,de)=>{const Be=H.component=te.component;if(Rae(te,H,de))if(Be.asyncDep&&!Be.asyncResolved){R(Be,H,de);return}else Be.next=H,Vie(Be.update),Be.effect.dirty=!0,Be.update();else H.el=te.el,Be.vnode=H},P=(te,H,de,Be,Ie,Pe,Ye)=>{const V=()=>{if(te.isMounted){let{next:k,bu:ue,u:ce,parent:X,vnode:ae}=te;{const jt=qj(te);if(jt){k&&(k.el=ae.el,R(te,k,Ye)),jt.asyncDep.then(()=>{te.isUnmounted||V()});return}}let Ce=k,ke;jc(te,!1),k?(k.el=ae.el,R(te,k,Ye)):k=ae,ue&&Wb(ue),(ke=k.props&&k.props.onVnodeBeforeUpdate)&&Xs(ke,X,k,ae),jc(te,!0);const Ke=DS(te),Et=te.subTree;te.subTree=Ke,p(Et,Ke,c(Et.el),Fe(Et),te,Ie,Pe),k.el=Ke.el,Ce===null&&Bae(te,Ke.el),ce&&Fa(ce,Ie),(ke=k.props&&k.props.onVnodeUpdated)&&Fa(()=>Xs(ke,X,k,ae),Ie)}else{let k;const{el:ue,props:ce}=H,{bm:X,m:ae,parent:Ce}=te,ke=qg(H);if(jc(te,!1),X&&Wb(X),!ke&&(k=ce&&ce.onVnodeBeforeMount)&&Xs(k,Ce,H),jc(te,!0),ue&&bt){const Ke=()=>{te.subTree=DS(te),bt(ue,te.subTree,te,Ie,null)};ke?H.type.__asyncLoader().then(()=>!te.isUnmounted&&Ke()):Ke()}else{const Ke=te.subTree=DS(te);p(null,Ke,de,Be,te,Ie,Pe),H.el=Ke.el}if(ae&&Fa(ae,Ie),!ke&&(k=ce&&ce.onVnodeMounted)){const Ke=H;Fa(()=>Xs(k,Ce,Ke),Ie)}(H.shapeFlag&256||Ce&&qg(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&te.a&&Fa(te.a,Ie),te.isMounted=!0,H=de=Be=null}},z=te.effect=new Ck(V,oi,()=>PE(F),te.scope),F=te.update=()=>{z.dirty&&z.run()};F.i=te,F.id=te.uid,jc(te,!0),F()},R=(te,H,de)=>{H.component=te;const Be=te.vnode.props;te.vnode=H,te.next=null,gae(te,H.props,Be,de),xae(te,H.children,de),cc(),kR(te),hc()},G=(te,H,de,Be,Ie,Pe,Ye,V,z=!1)=>{const F=te&&te.children,k=te?te.shapeFlag:0,ue=H.children,{patchFlag:ce,shapeFlag:X}=H;if(ce>0){if(ce&128){B(F,ue,de,Be,Ie,Pe,Ye,V,z);return}else if(ce&256){D(F,ue,de,Be,Ie,Pe,Ye,V,z);return}}X&8?(k&16&&Le(F,Ie,Pe),ue!==F&&f(de,ue)):k&16?X&16?B(F,ue,de,Be,Ie,Pe,Ye,V,z):Le(F,Ie,Pe,!0):(k&8&&f(de,""),X&16&&S(ue,de,Be,Ie,Pe,Ye,V,z))},D=(te,H,de,Be,Ie,Pe,Ye,V,z)=>{te=te||pv,H=H||pv;const F=te.length,k=H.length,ue=Math.min(F,k);let ce;for(ce=0;ce<ue;ce++){const X=H[ce]=z?wf(H[ce]):ol(H[ce]);p(te[ce],X,de,null,Ie,Pe,Ye,V,z)}F>k?Le(te,Ie,Pe,!0,!1,ue):S(H,de,Be,Ie,Pe,Ye,V,z,ue)},B=(te,H,de,Be,Ie,Pe,Ye,V,z)=>{let F=0;const k=H.length;let ue=te.length-1,ce=k-1;for(;F<=ue&&F<=ce;){const X=te[F],ae=H[F]=z?wf(H[F]):ol(H[F]);if(oh(X,ae))p(X,ae,de,null,Ie,Pe,Ye,V,z);else break;F++}for(;F<=ue&&F<=ce;){const X=te[ue],ae=H[ce]=z?wf(H[ce]):ol(H[ce]);if(oh(X,ae))p(X,ae,de,null,Ie,Pe,Ye,V,z);else break;ue--,ce--}if(F>ue){if(F<=ce){const X=ce+1,ae=X<k?H[X].el:Be;for(;F<=ce;)p(null,H[F]=z?wf(H[F]):ol(H[F]),de,ae,Ie,Pe,Ye,V,z),F++}}else if(F>ce)for(;F<=ue;)ee(te[F],Ie,Pe,!0),F++;else{const X=F,ae=F,Ce=new Map;for(F=ae;F<=ce;F++){const lr=H[F]=z?wf(H[F]):ol(H[F]);lr.key!=null&&Ce.set(lr.key,F)}let ke,Ke=0;const Et=ce-ae+1;let jt=!1,kr=0;const Qt=new Array(Et);for(F=0;F<Et;F++)Qt[F]=0;for(F=X;F<=ue;F++){const lr=te[F];if(Ke>=Et){ee(lr,Ie,Pe,!0);continue}let Lr;if(lr.key!=null)Lr=Ce.get(lr.key);else for(ke=ae;ke<=ce;ke++)if(Qt[ke-ae]===0&&oh(lr,H[ke])){Lr=ke;break}Lr===void 0?ee(lr,Ie,Pe,!0):(Qt[Lr-ae]=F+1,Lr>=kr?kr=Lr:jt=!0,p(lr,H[Lr],de,null,Ie,Pe,Ye,V,z),Ke++)}const zr=jt?Tae(Qt):pv;for(ke=zr.length-1,F=Et-1;F>=0;F--){const lr=ae+F,Lr=H[lr],Zr=lr+1<k?H[lr+1].el:Be;Qt[F]===0?p(null,Lr,de,Zr,Ie,Pe,Ye,V,z):jt&&(ke<0||F!==zr[ke]?Y(Lr,de,Zr,2):ke--)}}},Y=(te,H,de,Be,Ie=null)=>{const{el:Pe,type:Ye,transition:V,children:z,shapeFlag:F}=te;if(F&6){Y(te.component.subTree,H,de,Be);return}if(F&128){te.suspense.move(H,de,Be);return}if(F&64){Ye.move(te,H,de,Xe);return}if(Ye===Qn){n(Pe,H,de);for(let ue=0;ue<z.length;ue++)Y(z[ue],H,de,Be);n(te.anchor,H,de);return}if(Ye===NS){y(te,H,de);return}if(Be!==2&&F&1&&V)if(Be===0)V.beforeEnter(Pe),n(Pe,H,de),Fa(()=>V.enter(Pe),Ie);else{const{leave:ue,delayLeave:ce,afterLeave:X}=V,ae=()=>n(Pe,H,de),Ce=()=>{ue(Pe,()=>{ae(),X&&X()})};ce?ce(Pe,ae,Ce):Ce()}else n(Pe,H,de)},ee=(te,H,de,Be=!1,Ie=!1)=>{const{type:Pe,props:Ye,ref:V,children:z,dynamicChildren:F,shapeFlag:k,patchFlag:ue,dirs:ce,cacheIndex:X}=te;if(ue===-2&&(Ie=!1),V!=null&&sA(V,null,de,te,!0),X!=null&&(H.renderCache[X]=void 0),k&256){H.ctx.deactivate(te);return}const ae=k&1&&ce,Ce=!qg(te);let ke;if(Ce&&(ke=Ye&&Ye.onVnodeBeforeUnmount)&&Xs(ke,H,te),k&6)ye(te.component,de,Be);else{if(k&128){te.suspense.unmount(de,Be);return}ae&&Gc(te,null,H,"beforeUnmount"),k&64?te.type.remove(te,H,de,Xe,Be):F&&!F.hasOnce&&(Pe!==Qn||ue>0&&ue&64)?Le(F,H,de,!1,!0):(Pe===Qn&&ue&384||!Ie&&k&16)&&Le(z,H,de),Be&&ne(te)}(Ce&&(ke=Ye&&Ye.onVnodeUnmounted)||ae)&&Fa(()=>{ke&&Xs(ke,H,te),ae&&Gc(te,null,H,"unmounted")},de)},ne=te=>{const{type:H,el:de,anchor:Be,transition:Ie}=te;if(H===Qn){Q(de,Be);return}if(H===NS){x(te);return}const Pe=()=>{i(de),Ie&&!Ie.persisted&&Ie.afterLeave&&Ie.afterLeave()};if(te.shapeFlag&1&&Ie&&!Ie.persisted){const{leave:Ye,delayLeave:V}=Ie,z=()=>Ye(de,Pe);V?V(te.el,Pe,z):z()}else Pe()},Q=(te,H)=>{let de;for(;te!==H;)de=h(te),i(te),te=de;i(H)},ye=(te,H,de)=>{const{bum:Be,scope:Ie,update:Pe,subTree:Ye,um:V,m:z,a:F}=te;$R(z),$R(F),Be&&Wb(Be),Ie.stop(),Pe&&(Pe.active=!1,ee(Ye,te,H,de)),V&&Fa(V,H),Fa(()=>{te.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&te.asyncDep&&!te.asyncResolved&&te.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},Le=(te,H,de,Be=!1,Ie=!1,Pe=0)=>{for(let Ye=Pe;Ye<te.length;Ye++)ee(te[Ye],H,de,Be,Ie)},Fe=te=>{if(te.shapeFlag&6)return Fe(te.component.subTree);if(te.shapeFlag&128)return te.suspense.next();const H=h(te.anchor||te.el),de=H&&H[Xj];return de?h(de):H};let _e=!1;const Ve=(te,H,de)=>{te==null?H._vnode&&ee(H._vnode,null,null,!0):p(H._vnode||null,te,H,null,null,null,de),H._vnode=te,_e||(_e=!0,kR(),Sj(),_e=!1)},Xe={p,um:ee,m:Y,r:ne,mt:L,mc:S,pc:G,pbc:M,n:Fe,o:r};let vt,bt;return e&&([vt,bt]=e(Xe)),{render:Ve,hydrate:vt,createApp:dae(Ve,vt)}}function PS({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function jc({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function Aae(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function Gk(r,e,t=!1){const n=r.children,i=e.children;if(Jt(n)&&Jt(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=wf(i[a]),s.el=o.el),!t&&s.patchFlag!==-2&&Gk(o,s)),s.type===nd&&(s.el=o.el)}}function Tae(r){const e=r.slice(),t=[0];let n,i,a,o,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=t[t.length-1],r[i]<u){e[n]=i,t.push(n);continue}for(a=0,o=t.length-1;a<o;)s=a+o>>1,r[t[s]]<u?a=s+1:o=s;u<r[t[a]]&&(a>0&&(e[n]=t[a-1]),t[a]=n)}}for(a=t.length,o=t[a-1];a-- >0;)t[a]=o,o=e[o];return t}function qj(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qj(e)}function $R(r){if(r)for(let e=0;e<r.length;e++)r[e].active=!1}const Oae=Symbol.for("v-scx"),kae=()=>tn(Oae);function Zj(r,e){return BE(r,null,e)}function Iae(r,e){return BE(r,null,{flush:"sync"})}const o1={};function qt(r,e,t){return BE(r,e,t)}function BE(r,e,{immediate:t,deep:n,flush:i,once:a,onTrack:o,onTrigger:s}=hn){if(e&&a){const E=e;e=(..._)=>{E(..._),w()}}const l=Ai,u=E=>n===!0?E:Tf(E,n===!1?1:void 0);let f,c=!1,h=!1;if(Sn(r)?(f=()=>r.value,c=Dv(r)):_h(r)?(f=()=>u(r),c=!0):Jt(r)?(h=!0,c=r.some(E=>_h(E)||Dv(E)),f=()=>r.map(E=>{if(Sn(E))return E.value;if(_h(E))return u(E);if(er(E))return Uf(E,l,2)})):er(r)?e?f=()=>Uf(r,l,2):f=()=>(d&&d(),Ho(r,l,3,[v])):f=oi,e&&n){const E=f;f=()=>Tf(E())}let d,v=E=>{d=y.onStop=()=>{Uf(E,l,4),d=y.onStop=void 0}},p;if(km)if(v=oi,e?t&&Ho(e,l,3,[f(),h?[]:void 0,v]):f(),i==="sync"){const E=kae();p=E.__watcherHandles||(E.__watcherHandles=[])}else return oi;let g=h?new Array(r.length).fill(o1):o1;const m=()=>{if(!(!y.active||!y.dirty))if(e){const E=y.run();(n||c||(h?E.some((_,S)=>$a(_,g[S])):$a(E,g)))&&(d&&d(),Ho(e,l,3,[E,g===o1?void 0:h&&g[0]===o1?[]:g,v]),g=E)}else y.run()};m.allowRecurse=!!e;let b;i==="sync"?b=m:i==="post"?b=()=>Fa(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>PE(m));const y=new Ck(f,oi,b),x=OE(),w=()=>{y.stop(),x&&_k(x.effects,y)};return e?t?m():g=y.run():i==="post"?Fa(y.run.bind(y),l&&l.suspense):y.run(),p&&p.push(w),w}function Lae(r,e,t){const n=this.proxy,i=qr(r)?r.includes(".")?Qj(n,r):()=>n[r]:r.bind(n,n);let a;er(e)?a=e:(a=e.handler,t=e);const o=Om(this),s=BE(i,a.bind(n),t);return o(),s}function Qj(r,e){const t=e.split(".");return()=>{let n=r;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}function Tf(r,e=1/0,t){if(e<=0||!on(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),e--,Sn(r))Tf(r.value,e,t);else if(Jt(r))for(let n=0;n<r.length;n++)Tf(r[n],e,t);else if(qG(r)||gv(r))r.forEach(n=>{Tf(n,e,t)});else if(QG(r)){for(const n in r)Tf(r[n],e,t);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&Tf(r[n],e,t)}return r}function grt(r,e,t=hn){const n=Wn(),i=Mo(e),a=Fu(e),o=Jj(r,e),s=xj((l,u)=>{let f,c=hn,h;return Iae(()=>{const d=r[e];$a(f,d)&&(f=d,u())}),{get(){return l(),t.get?t.get(f):f},set(d){const v=t.set?t.set(d):d;if(!$a(v,f)&&!(c!==hn&&$a(d,c)))return;const p=n.vnode.props;p&&(e in p||i in p||a in p)&&(`onUpdate:${e}`in p||`onUpdate:${i}`in p||`onUpdate:${a}`in p)||(f=d,u()),n.emit(`update:${e}`,v),$a(d,v)&&$a(d,c)&&!$a(v,h)&&u(),c=d,h=v}}});return s[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||hn:s,done:!1}:{done:!0}}}},s}const Jj=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${Mo(e)}Modifiers`]||r[`${Fu(e)}Modifiers`];function Pae(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||hn;let i=t;const a=e.startsWith("update:"),o=a&&Jj(n,e.slice(7));o&&(o.trim&&(i=t.map(f=>qr(f)?f.trim():f)),o.number&&(i=t.map(QC)));let s,l=n[s=TS(e)]||n[s=TS(Mo(e))];!l&&a&&(l=n[s=TS(Fu(e))]),l&&Ho(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,Ho(u,r,6,i)}}function e9(r,e,t=!1){const n=e.emitsCache,i=n.get(r);if(i!==void 0)return i;const a=r.emits;let o={},s=!1;if(!er(r)){const l=u=>{const f=e9(u,e,!0);f&&(s=!0,gi(o,f))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!s?(on(r)&&n.set(r,null),null):(Jt(a)?a.forEach(l=>o[l]=null):gi(o,a),on(r)&&n.set(r,o),o)}function FE(r,e){return!r||!CE(e)?!1:(e=e.slice(2).replace(/Once$/,""),rn(r,e[0].toLowerCase()+e.slice(1))||rn(r,Fu(e))||rn(r,e))}function DS(r){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:f,props:c,data:h,setupState:d,ctx:v,inheritAttrs:p}=r,g=$x(r);let m,b;try{if(t.shapeFlag&4){const x=i||n,w=x;m=ol(u.call(w,x,f,c,d,h,v)),b=s}else{const x=e;m=ol(x.length>1?x(c,{attrs:s,slots:o,emit:l}):x(c,null)),b=e.props?s:Dae(s)}}catch(x){Jg.length=0,Mm(x,r,1),m=_r(Ca)}let y=m;if(b&&p!==!1){const x=Object.keys(b),{shapeFlag:w}=y;x.length&&w&7&&(a&&x.some(Ek)&&(b=Nae(b,a)),y=ku(y,b,!1,!0))}return t.dirs&&(y=ku(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),m=y,$x(g),m}const Dae=r=>{let e;for(const t in r)(t==="class"||t==="style"||CE(t))&&((e||(e={}))[t]=r[t]);return e},Nae=(r,e)=>{const t={};for(const n in r)(!Ek(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function Rae(r,e,t){const{props:n,children:i,component:a}=r,{props:o,children:s,patchFlag:l}=e,u=a.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?zR(n,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let c=0;c<f.length;c++){const h=f[c];if(o[h]!==n[h]&&!FE(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?zR(n,o,u):!0:!!o;return!1}function zR(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(e[a]!==r[a]&&!FE(t,a))return!0}return!1}function Bae({vnode:r,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=t,e=e.parent;else break}}const Fae=r=>r.__isSuspense;function $ae(r,e){e&&e.pendingBranch?Jt(r)?e.effects.push(...r):e.effects.push(r):Hie(r)}const Qn=Symbol.for("v-fgt"),nd=Symbol.for("v-txt"),Ca=Symbol.for("v-cmt"),NS=Symbol.for("v-stc"),Jg=[];let bo=null;function ct(r=!1){Jg.push(bo=r?null:[])}function zae(){Jg.pop(),bo=Jg[Jg.length-1]||null}let O0=1;function GR(r){O0+=r,r<0&&bo&&(bo.hasOnce=!0)}function t9(r){return r.dynamicChildren=O0>0?bo||pv:null,zae(),O0>0&&bo&&bo.push(r),r}function or(r,e,t,n,i,a){return t9(xr(r,e,t,n,i,a,!0))}function mr(r,e,t,n,i){return t9(_r(r,e,t,n,i,!0))}function Fh(r){return r?r.__v_isVNode===!0:!1}function oh(r,e){return r.type===e.type&&r.key===e.key}const r9=({key:r})=>r??null,Vb=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?qr(r)||Sn(r)||er(r)?{i:ki,r,k:e,f:!!t}:r:null);function xr(r,e=null,t=null,n=0,i=null,a=r===Qn?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&r9(e),ref:e&&Vb(e),scopeId:DE,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ki};return s?(jk(l,t),a&128&&r.normalize(l)):t&&(l.shapeFlag|=qr(t)?8:16),O0>0&&!o&&bo&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&bo.push(l),l}const _r=Gae;function Gae(r,e=null,t=null,n=0,i=null,a=!1){if((!r||r===Pj)&&(r=Ca),Fh(r)){const s=ku(r,e,!0);return t&&jk(s,t),O0>0&&!a&&bo&&(s.shapeFlag&6?bo[bo.indexOf(r)]=s:bo.push(s)),s.patchFlag=-2,s}if(qae(r)&&(r=r.__vccOpts),e){e=jae(e);let{class:s,style:l}=e;s&&!qr(s)&&(e.class=Tt(s)),on(l)&&(gj(l)&&!Jt(l)&&(l=gi({},l)),e.style=ga(l))}const o=qr(r)?1:Fae(r)?128:wae(r)?64:on(r)?4:er(r)?2:0;return xr(r,e,t,n,i,o,a,!0)}function jae(r){return r?gj(r)||zj(r)?gi({},r):r:null}function ku(r,e,t=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:l}=r,u=e?Xo(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&r9(u),ref:e&&e.ref?t&&a?Jt(a)?a.concat(Vb(e)):[a,Vb(e)]:Vb(e):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Qn?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:l,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&ku(r.ssContent),ssFallback:r.ssFallback&&ku(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return l&&n&&Nv(f,l.clone(f)),f}function Tm(r=" ",e=0){return _r(nd,null,r,e)}function ar(r="",e=!1){return e?(ct(),mr(Ca,null,r)):_r(Ca,null,r)}function ol(r){return r==null||typeof r=="boolean"?_r(Ca):Jt(r)?_r(Qn,null,r.slice()):typeof r=="object"?wf(r):_r(nd,null,String(r))}function wf(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:ku(r)}function jk(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(Jt(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),jk(r,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!zj(e)?e._ctx=ki:i===3&&ki&&(ki.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else er(e)?(e={default:e,_ctx:ki},t=32):(e=String(e),n&64?(t=16,e=[Tm(e)]):t=8);r.children=e,r.shapeFlag|=t}function Xo(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Tt([e.class,n.class]));else if(i==="style")e.style=ga([e.style,n.style]);else if(CE(i)){const a=e[i],o=n[i];o&&a!==o&&!(Jt(a)&&a.includes(o))&&(e[i]=a?[].concat(a,o):o)}else i!==""&&(e[i]=n[i])}return e}function Xs(r,e,t,n=null){Ho(r,e,7,[t,n])}const Uae=Bj();let Wae=0;function Vae(r,e,t){const n=r.type,i=(e?e.appContext:r.appContext)||Uae,a={uid:Wae++,vnode:r,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new ij(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jj(n,i),emitsOptions:e9(n,i),emit:null,emitted:null,propsDefaults:hn,inheritAttrs:n.inheritAttrs,ctx:hn,data:hn,props:hn,attrs:hn,slots:hn,refs:hn,setupState:hn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Pae.bind(null,a),r.ce&&r.ce(a),a}let Ai=null;const Wn=()=>Ai||ki;let jx,uA;{const r=ej(),e=(t,n)=>{let i;return(i=r[t])||(i=r[t]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};jx=e("__VUE_INSTANCE_SETTERS__",t=>Ai=t),uA=e("__VUE_SSR_SETTERS__",t=>km=t)}const Om=r=>{const e=Ai;return jx(r),r.scope.on(),()=>{r.scope.off(),jx(e)}},jR=()=>{Ai&&Ai.scope.off(),jx(null)};function n9(r){return r.vnode.shapeFlag&4}let km=!1;function Hae(r,e=!1,t=!1){e&&uA(e);const{props:n,children:i}=r.vnode,a=n9(r);pae(r,n,a,e),bae(r,i,t);const o=a?Xae(r,e):void 0;return e&&uA(!1),o}function Xae(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,aae);const{setup:n}=t;if(n){const i=r.setupContext=n.length>1?a9(r):null,a=Om(r);cc();const o=Uf(n,r,0,[r.props,i]);if(hc(),a(),Rx(o)){if(o.then(jR,jR),e)return o.then(s=>{UR(r,s,e)}).catch(s=>{Mm(s,r,0)});r.asyncDep=o}else UR(r,o,e)}else i9(r,e)}function UR(r,e,t){er(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:on(e)&&(r.setupState=bj(e)),i9(r,t)}let WR;function i9(r,e,t){const n=r.type;if(!r.render){if(!e&&WR&&!n.render){const i=n.template||$k(r).template;if(i){const{isCustomElement:a,compilerOptions:o}=r.appContext.config,{delimiters:s,compilerOptions:l}=n,u=gi(gi({isCustomElement:a,delimiters:s},o),l);n.render=WR(i,u)}}r.render=n.render||oi}{const i=Om(r);cc();try{sae(r)}finally{hc(),i()}}}const Yae={get(r,e){return Ka(r,"get",""),r[e]}};function a9(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,Yae),slots:r.slots,emit:r.emit,expose:e}}function $E(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(bj(Lk(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in Zg)return Zg[t](r)},has(e,t){return t in e||t in Zg}})):r.proxy}function Kae(r,e=!0){return er(r)?r.displayName||r.name:r.name||e&&r.__name}function qae(r){return er(r)&&"__vccOpts"in r}const Me=(r,e)=>Bie(r,e,km);function Ep(r,e,t){const n=arguments.length;return n===2?on(e)&&!Jt(e)?Fh(e)?_r(r,null,[e]):_r(r,e):_r(r,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Fh(t)&&(t=[t]),_r(r,e,t))}const Zae="3.4.37",Qae=oi;/**
* @vue/runtime-dom v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Jae="http://www.w3.org/2000/svg",eoe="http://www.w3.org/1998/Math/MathML",pu=typeof document<"u"?document:null,VR=pu&&pu.createElement("template"),toe={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const i=e==="svg"?pu.createElementNS(Jae,r):e==="mathml"?pu.createElementNS(eoe,r):t?pu.createElement(r,{is:t}):pu.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>pu.createTextNode(r),createComment:r=>pu.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>pu.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,i,a){const o=t?t.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===a||!(i=i.nextSibling)););else{VR.innerHTML=n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r;const s=VR.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},nf="transition",tg="animation",Rv=Symbol("_vtc"),id=(r,{slots:e})=>Ep(Kie,s9(r),e);id.displayName="Transition";const o9={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},roe=id.props=gi({},Aj,o9),Uc=(r,e=[])=>{Jt(r)?r.forEach(t=>t(...e)):r&&r(...e)},HR=r=>r?Jt(r)?r.some(e=>e.length>1):r.length>1:!1;function s9(r){const e={};for(const A in r)A in o9||(e[A]=r[A]);if(r.css===!1)return e;const{name:t="v",type:n,duration:i,enterFromClass:a=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:s=`${t}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:f=s,leaveFromClass:c=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=r,v=noe(i),p=v&&v[0],g=v&&v[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:y,onLeave:x,onLeaveCancelled:w,onBeforeAppear:E=m,onAppear:_=b,onAppearCancelled:S=y}=e,C=(A,O,L)=>{df(A,O?f:s),df(A,O?u:o),L&&L()},M=(A,O)=>{A._isLeaving=!1,df(A,c),df(A,d),df(A,h),O&&O()},T=A=>(O,L)=>{const N=A?_:b,P=()=>C(O,A,L);Uc(N,[O,P]),XR(()=>{df(O,A?l:a),vu(O,A?f:s),HR(N)||YR(O,n,p,P)})};return gi(e,{onBeforeEnter(A){Uc(m,[A]),vu(A,a),vu(A,o)},onBeforeAppear(A){Uc(E,[A]),vu(A,l),vu(A,u)},onEnter:T(!1),onAppear:T(!0),onLeave(A,O){A._isLeaving=!0;const L=()=>M(A,O);vu(A,c),vu(A,h),u9(),XR(()=>{A._isLeaving&&(df(A,c),vu(A,d),HR(x)||YR(A,n,g,L))}),Uc(x,[A,L])},onEnterCancelled(A){C(A,!1),Uc(y,[A])},onAppearCancelled(A){C(A,!0),Uc(S,[A])},onLeaveCancelled(A){M(A),Uc(w,[A])}})}function noe(r){if(r==null)return null;if(on(r))return[RS(r.enter),RS(r.leave)];{const e=RS(r);return[e,e]}}function RS(r){return sie(r)}function vu(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r[Rv]||(r[Rv]=new Set)).add(e)}function df(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const t=r[Rv];t&&(t.delete(e),t.size||(r[Rv]=void 0))}function XR(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let ioe=0;function YR(r,e,t,n){const i=r._endId=++ioe,a=()=>{i===r._endId&&n()};if(t)return setTimeout(a,t);const{type:o,timeout:s,propCount:l}=l9(r,e);if(!o)return n();const u=o+"end";let f=0;const c=()=>{r.removeEventListener(u,h),a()},h=d=>{d.target===r&&++f>=l&&c()};setTimeout(()=>{f<l&&c()},s+1),r.addEventListener(u,h)}function l9(r,e){const t=window.getComputedStyle(r),n=v=>(t[v]||"").split(", "),i=n(`${nf}Delay`),a=n(`${nf}Duration`),o=KR(i,a),s=n(`${tg}Delay`),l=n(`${tg}Duration`),u=KR(s,l);let f=null,c=0,h=0;e===nf?o>0&&(f=nf,c=o,h=a.length):e===tg?u>0&&(f=tg,c=u,h=l.length):(c=Math.max(o,u),f=c>0?o>u?nf:tg:null,h=f?f===nf?a.length:l.length:0);const d=f===nf&&/\b(transform|all)(,|$)/.test(n(`${nf}Property`).toString());return{type:f,timeout:c,propCount:h,hasTransform:d}}function KR(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,n)=>qR(t)+qR(r[n])))}function qR(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function u9(){return document.body.offsetHeight}function aoe(r,e,t){const n=r[Rv];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const Ux=Symbol("_vod"),f9=Symbol("_vsh"),k0={beforeMount(r,{value:e},{transition:t}){r[Ux]=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):rg(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(r),rg(r,!0),n.enter(r)):n.leave(r,()=>{rg(r,!1)}):rg(r,e))},beforeUnmount(r,{value:e}){rg(r,e)}};function rg(r,e){r.style.display=e?r[Ux]:"none",r[f9]=!e}const ooe=Symbol(""),soe=/(^|;)\s*display\s*:/;function loe(r,e,t){const n=r.style,i=qr(t);let a=!1;if(t&&!i){if(e)if(qr(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();t[s]==null&&Hb(n,s,"")}else for(const o in e)t[o]==null&&Hb(n,o,"");for(const o in t)o==="display"&&(a=!0),Hb(n,o,t[o])}else if(i){if(e!==t){const o=n[ooe];o&&(t+=";"+o),n.cssText=t,a=soe.test(t)}}else e&&r.removeAttribute("style");Ux in r&&(r[Ux]=a?n.display:"",r[f9]&&(n.display="none"))}const ZR=/\s*!important$/;function Hb(r,e,t){if(Jt(t))t.forEach(n=>Hb(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=uoe(r,e);ZR.test(t)?r.setProperty(Fu(n),t.replace(ZR,""),"important"):r[n]=t}}const QR=["Webkit","Moz","ms"],BS={};function uoe(r,e){const t=BS[e];if(t)return t;let n=Mo(e);if(n!=="filter"&&n in r)return BS[e]=n;n=TE(n);for(let i=0;i<QR.length;i++){const a=QR[i]+n;if(a in r)return BS[e]=a}return e}const JR="http://www.w3.org/1999/xlink";function e3(r,e,t,n,i,a=die(e)){n&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(JR,e.slice(6,e.length)):r.setAttributeNS(JR,e,t):t==null||a&&!tj(t)?r.removeAttribute(e):r.setAttribute(e,a?"":kl(t)?String(t):t)}function foe(r,e,t,n){if(e==="innerHTML"||e==="textContent"){if(t==null)return;r[e]=t;return}const i=r.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?r.getAttribute("value")||"":r.value,s=t==null?"":String(t);(o!==s||!("_value"in r))&&(r.value=s),t==null&&r.removeAttribute(e),r._value=t;return}let a=!1;if(t===""||t==null){const o=typeof r[e];o==="boolean"?t=tj(t):t==null&&o==="string"?(t="",a=!0):o==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(e)}function sh(r,e,t,n){r.addEventListener(e,t,n)}function coe(r,e,t,n){r.removeEventListener(e,t,n)}const t3=Symbol("_vei");function hoe(r,e,t,n,i=null){const a=r[t3]||(r[t3]={}),o=a[e];if(n&&o)o.value=n;else{const[s,l]=doe(e);if(n){const u=a[e]=goe(n,i);sh(r,s,u,l)}else o&&(coe(r,s,o,l),a[e]=void 0)}}const r3=/(?:Once|Passive|Capture)$/;function doe(r){let e;if(r3.test(r)){e={};let n;for(;n=r.match(r3);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Fu(r.slice(2)),e]}let FS=0;const voe=Promise.resolve(),poe=()=>FS||(voe.then(()=>FS=0),FS=Date.now());function goe(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Ho(moe(n,t.value),e,5,[n])};return t.value=r,t.attached=poe(),t}function moe(r,e){if(Jt(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const n3=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,yoe=(r,e,t,n,i,a)=>{const o=i==="svg";e==="class"?aoe(r,n,o):e==="style"?loe(r,t,n):CE(e)?Ek(e)||hoe(r,e,t,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):boe(r,e,n,o))?(foe(r,e,n),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&e3(r,e,n,o,a,e!=="value")):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),e3(r,e,n,o))};function boe(r,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&n3(e)&&er(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return n3(e)&&qr(t)?!1:e in r}const c9=new WeakMap,h9=new WeakMap,Wx=Symbol("_moveCb"),i3=Symbol("_enterCb"),d9={name:"TransitionGroup",props:gi({},roe,{tag:String,moveClass:String}),setup(r,{slots:e}){const t=Wn(),n=Cj();let i,a;return Fk(()=>{if(!i.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!Moe(i[0].el,t.vnode.el,o))return;i.forEach(Eoe),i.forEach(_oe);const s=i.filter(Soe);u9(),s.forEach(l=>{const u=l.el,f=u.style;vu(u,o),f.transform=f.webkitTransform=f.transitionDuration="";const c=u[Wx]=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",c),u[Wx]=null,df(u,o))};u.addEventListener("transitionend",c)})}),()=>{const o=nn(r),s=s9(o);let l=o.tag||Qn;if(i=[],a)for(let u=0;u<a.length;u++){const f=a[u];f.el&&f.el instanceof Element&&(i.push(f),Nv(f,T0(f,s,n,t)),c9.set(f,f.el.getBoundingClientRect()))}a=e.default?Rk(e.default()):[];for(let u=0;u<a.length;u++){const f=a[u];f.key!=null&&Nv(f,T0(f,s,n,t))}return _r(l,null,a)}}},xoe=r=>delete r.mode;d9.props;const woe=d9;function Eoe(r){const e=r.el;e[Wx]&&e[Wx](),e[i3]&&e[i3]()}function _oe(r){h9.set(r,r.el.getBoundingClientRect())}function Soe(r){const e=c9.get(r),t=h9.get(r),n=e.left-t.left,i=e.top-t.top;if(n||i){const a=r.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",r}}function Moe(r,e,t){const n=r.cloneNode(),i=r[Rv];i&&i.forEach(s=>{s.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),t.split(/\s+/).forEach(s=>s&&n.classList.add(s)),n.style.display="none";const a=e.nodeType===1?e:e.parentNode;a.appendChild(n);const{hasTransform:o}=l9(n);return a.removeChild(n),o}const Vx=r=>{const e=r.props["onUpdate:modelValue"]||!1;return Jt(e)?t=>Wb(e,t):e};function Coe(r){r.target.composing=!0}function a3(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const yv=Symbol("_assign"),mrt={created(r,{modifiers:{lazy:e,trim:t,number:n}},i){r[yv]=Vx(i);const a=n||i.props&&i.props.type==="number";sh(r,e?"change":"input",o=>{if(o.target.composing)return;let s=r.value;t&&(s=s.trim()),a&&(s=QC(s)),r[yv](s)}),t&&sh(r,"change",()=>{r.value=r.value.trim()}),e||(sh(r,"compositionstart",Coe),sh(r,"compositionend",a3),sh(r,"change",a3))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:a}},o){if(r[yv]=Vx(o),r.composing)return;const s=(a||r.type==="number")&&!/^0\d/.test(r.value)?QC(r.value):r.value,l=e??"";s!==l&&(document.activeElement===r&&r.type!=="range"&&(n&&e===t||i&&r.value.trim()===l)||(r.value=l))}},v9={created(r,{value:e},t){r.checked=Bx(e,t.props.value),r[yv]=Vx(t),sh(r,"change",()=>{r[yv](Aoe(r))})},beforeUpdate(r,{value:e,oldValue:t},n){r[yv]=Vx(n),e!==t&&(r.checked=Bx(e,n.props.value))}};function Aoe(r){return"_value"in r?r._value:r.value}const Toe=["ctrl","shift","alt","meta"],Ooe={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>Toe.some(t=>r[`${t}Key`]&&!e.includes(t))},Il=(r,e)=>{const t=r._withMods||(r._withMods={}),n=e.join(".");return t[n]||(t[n]=(i,...a)=>{for(let o=0;o<e.length;o++){const s=Ooe[e[o]];if(s&&s(i,e))return}return r(i,...a)})},koe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ioe=(r,e)=>{const t=r._withKeys||(r._withKeys={}),n=e.join(".");return t[n]||(t[n]=i=>{if(!("key"in i))return;const a=Fu(i.key);if(e.some(o=>o===a||koe[o]===a))return r(i)})},Loe=gi({patchProp:yoe},toe);let o3;function p9(){return o3||(o3=Mae(Loe))}const s3=(...r)=>{p9().render(...r)},yrt=(...r)=>{const e=p9().createApp(...r),{mount:t}=e;return e.mount=n=>{const i=Doe(n);if(!i)return;const a=e._component;!er(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,Poe(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Poe(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function Doe(r){return qr(r)?document.querySelector(r):r}var Noe=!1;/*!
 * pinia v2.2.1
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let g9;const zE=r=>g9=r,m9=Symbol();function fA(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var e0;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(e0||(e0={}));function brt(){const r=Mk(!0),e=r.run(()=>xt({}));let t=[],n=[];const i=Lk({install(a){zE(i),i._a=a,a.provide(m9,i),a.config.globalProperties.$pinia=i,n.forEach(o=>t.push(o)),n=[]},use(a){return!this._a&&!Noe?n.push(a):t.push(a),this},_p:t,_a:null,_e:r,_s:new Map,state:e});return i}const y9=()=>{};function l3(r,e,t,n=y9){r.push(e);const i=()=>{const a=r.indexOf(e);a>-1&&(r.splice(a,1),n())};return!t&&OE()&&kE(i),i}function Id(r,...e){r.slice().forEach(t=>{t(...e)})}const Roe=r=>r(),u3=Symbol(),$S=Symbol();function cA(r,e){r instanceof Map&&e instanceof Map?e.forEach((t,n)=>r.set(n,t)):r instanceof Set&&e instanceof Set&&e.forEach(r.add,r);for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t],i=r[t];fA(i)&&fA(n)&&r.hasOwnProperty(t)&&!Sn(n)&&!_h(n)?r[t]=cA(i,n):r[t]=n}return r}const Boe=Symbol();function Foe(r){return!fA(r)||!r.hasOwnProperty(Boe)}const{assign:vf}=Object;function $oe(r){return!!(Sn(r)&&r.effect)}function zoe(r,e,t,n){const{state:i,actions:a,getters:o}=e,s=t.state.value[r];let l;function u(){s||(t.state.value[r]=i?i():{});const f=LE(t.state.value[r]);return vf(f,a,Object.keys(o||{}).reduce((c,h)=>(c[h]=Lk(Me(()=>{zE(t);const d=t._s.get(r);return o[h].call(d,d)})),c),{}))}return l=b9(r,u,e,t,n,!0),l}function b9(r,e,t={},n,i,a){let o;const s=vf({actions:{}},t),l={deep:!0};let u,f,c=[],h=[],d;const v=n.state.value[r];!a&&!v&&(n.state.value[r]={}),xt({});let p;function g(S){let C;u=f=!1,typeof S=="function"?(S(n.state.value[r]),C={type:e0.patchFunction,storeId:r,events:d}):(cA(n.state.value[r],S),C={type:e0.patchObject,payload:S,storeId:r,events:d});const M=p=Symbol();di().then(()=>{p===M&&(u=!0)}),f=!0,Id(c,C,n.state.value[r])}const m=a?function(){const{state:C}=t,M=C?C():{};this.$patch(T=>{vf(T,M)})}:y9;function b(){o.stop(),c=[],h=[],n._s.delete(r)}const y=(S,C="")=>{if(u3 in S)return S[$S]=C,S;const M=function(){zE(n);const T=Array.from(arguments),A=[],O=[];function L(R){A.push(R)}function N(R){O.push(R)}Id(h,{args:T,name:M[$S],store:w,after:L,onError:N});let P;try{P=S.apply(this&&this.$id===r?this:w,T)}catch(R){throw Id(O,R),R}return P instanceof Promise?P.then(R=>(Id(A,R),R)).catch(R=>(Id(O,R),Promise.reject(R))):(Id(A,P),P)};return M[u3]=!0,M[$S]=C,M},x={_p:n,$id:r,$onAction:l3.bind(null,h),$patch:g,$reset:m,$subscribe(S,C={}){const M=l3(c,S,C.detached,()=>T()),T=o.run(()=>qt(()=>n.state.value[r],A=>{(C.flush==="sync"?f:u)&&S({storeId:r,type:e0.direct,events:d},A)},vf({},l,C)));return M},$dispose:b},w=dc(x);n._s.set(r,w);const _=(n._a&&n._a.runWithContext||Roe)(()=>n._e.run(()=>(o=Mk()).run(()=>e({action:y}))));for(const S in _){const C=_[S];if(Sn(C)&&!$oe(C)||_h(C))a||(v&&Foe(C)&&(Sn(C)?C.value=v[S]:cA(C,v[S])),n.state.value[r][S]=C);else if(typeof C=="function"){const M=y(C,S);_[S]=M,s.actions[S]=C}}return vf(w,_),vf(nn(w),_),Object.defineProperty(w,"$state",{get:()=>n.state.value[r],set:S=>{g(C=>{vf(C,S)})}}),n._p.forEach(S=>{vf(w,o.run(()=>S({store:w,app:n._a,pinia:n,options:s})))}),v&&a&&t.hydrate&&t.hydrate(w.$state,v),u=!0,f=!0,w}function xrt(r,e,t){let n,i;const a=typeof e=="function";typeof r=="string"?(n=r,i=a?t:e):(i=r,n=r.id);function o(s,l){const u=vae();return s=s||(u?tn(m9,null):null),s&&zE(s),s=g9,s._s.has(n)||(a?b9(n,e,i,s):zoe(n,i,s)),s._s.get(n)}return o.$id=n,o}function Goe(r){return typeof r=="object"&&r!==null}function f3(r,e){return r=Goe(r)?r:Object.create(null),new Proxy(r,{get(t,n,i){return n==="key"?Reflect.get(t,n,i):Reflect.get(t,n,i)||Reflect.get(e,n,i)}})}function joe(r,e){return e.reduce((t,n)=>t==null?void 0:t[n],r)}function Uoe(r,e,t){return e.slice(0,-1).reduce((n,i)=>/^(__proto__)$/.test(i)?{}:n[i]=n[i]||{},r)[e[e.length-1]]=t,r}function Woe(r,e){return e.reduce((t,n)=>{const i=n.split(".");return Uoe(t,i,joe(r,i))},{})}function Voe(r,e){return t=>{var n;try{const{storage:i=localStorage,beforeRestore:a=void 0,afterRestore:o=void 0,serializer:s={serialize:JSON.stringify,deserialize:JSON.parse},key:l=e.$id,paths:u=null,debug:f=!1}=t;return{storage:i,beforeRestore:a,afterRestore:o,serializer:s,key:((n=r.key)!=null?n:c=>c)(typeof l=="string"?l:l(e.$id)),paths:u,debug:f}}catch(i){return t.debug&&console.error("[pinia-plugin-persistedstate]",i),null}}}function c3(r,{storage:e,serializer:t,key:n,debug:i}){try{const a=e==null?void 0:e.getItem(n);a&&r.$patch(t==null?void 0:t.deserialize(a))}catch(a){i&&console.error("[pinia-plugin-persistedstate]",a)}}function h3(r,{storage:e,serializer:t,key:n,paths:i,debug:a}){try{const o=Array.isArray(i)?Woe(r,i):r;e.setItem(n,t.serialize(o))}catch(o){a&&console.error("[pinia-plugin-persistedstate]",o)}}function Hoe(r={}){return e=>{const{auto:t=!1}=r,{options:{persist:n=t},store:i,pinia:a}=e;if(!n)return;if(!(i.$id in a.state.value)){const s=a._s.get(i.$id.replace("__hot:",""));s&&Promise.resolve().then(()=>s.$persist());return}const o=(Array.isArray(n)?n.map(s=>f3(s,r)):[f3(n,r)]).map(Voe(r,i)).filter(Boolean);i.$persist=()=>{o.forEach(s=>{h3(i.$state,s)})},i.$hydrate=({runHooks:s=!0}={})=>{o.forEach(l=>{const{beforeRestore:u,afterRestore:f}=l;s&&(u==null||u(e)),c3(i,l),s&&(f==null||f(e))})},o.forEach(s=>{const{beforeRestore:l,afterRestore:u}=s;l==null||l(e),c3(i,s),u==null||u(e),i.$subscribe((f,c)=>{h3(c,s)},{detached:!0})})}}var wrt=Hoe(),hA=function(r,e){return hA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},hA(r,e)};function nr(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hA(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var U=function(){return U=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},U.apply(this,arguments)};function Mi(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function x9(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function w9(r,e){return function(t,n){e(t,n,r)}}function Xoe(r,e,t,n,i,a){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),c,h=!1,d=t.length-1;d>=0;d--){var v={};for(var p in n)v[p]=p==="access"?{}:n[p];for(var p in n.access)v.access[p]=n.access[p];v.addInitializer=function(m){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(m||null))};var g=(0,t[d])(s==="accessor"?{get:f.get,set:f.set}:f[l],v);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(c=o(g.get))&&(f.get=c),(c=o(g.set))&&(f.set=c),(c=o(g.init))&&i.unshift(c)}else(c=o(g))&&(s==="field"?i.unshift(c):f[l]=c)}u&&Object.defineProperty(u,n.name,f),h=!0}function Yoe(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function Koe(r){return typeof r=="symbol"?r:"".concat(r)}function qoe(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function E9(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function co(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(f){try{u(n.next(f))}catch(c){o(c)}}function l(f){try{u(n.throw(f))}catch(c){o(c)}}function u(f){f.done?a(f.value):i(f.value).then(s,l)}u((n=n.apply(r,e||[])).next())})}function ho(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(f){return l([u,f])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var GE=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function _9(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&GE(e,r,t)}function Hx(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uk(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function S9(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Uk(arguments[e]));return r}function jE(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function So(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function Bv(r){return this instanceof Bv?(this.v=r,this):new Bv(r)}function M9(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(d){return new Promise(function(v,p){a.push([h,d,v,p])>1||s(h,d)})})}function s(h,d){try{l(n[h](d))}catch(v){c(a[0][3],v)}}function l(h){h.value instanceof Bv?Promise.resolve(h.value.v).then(u,f):c(a[0][2],h)}function u(h){s("next",h)}function f(h){s("throw",h)}function c(h,d){h(d),a.shift(),a.length&&s(a[0][0],a[0][1])}}function C9(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=r[i]?function(o){return(t=!t)?{value:Bv(r[i](o)),done:!1}:a?a(o):o}:a}}function A9(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Hx=="function"?Hx(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=r[a]&&function(o){return new Promise(function(s,l){o=r[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function T9(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var Zoe=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};function O9(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&GE(e,r,t);return Zoe(e,r),e}function k9(r){return r&&r.__esModule?r:{default:r}}function I9(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function L9(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function P9(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function D9(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var Qoe=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function N9(r){function e(n){r.error=r.hasError?new Qoe(n,r.error,"An error was suppressed during disposal."):n,r.hasError=!0}function t(){for(;r.stack.length;){var n=r.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(t,function(a){return e(a),t()})}catch(a){e(a)}}if(r.hasError)throw r.error}return t()}const Joe={__extends:nr,__assign:U,__rest:Mi,__decorate:x9,__param:w9,__metadata:E9,__awaiter:co,__generator:ho,__createBinding:GE,__exportStar:_9,__values:Hx,__read:Uk,__spread:S9,__spreadArrays:jE,__spreadArray:So,__await:Bv,__asyncGenerator:M9,__asyncDelegator:C9,__asyncValues:A9,__makeTemplateObject:T9,__importStar:O9,__importDefault:k9,__classPrivateFieldGet:I9,__classPrivateFieldSet:L9,__classPrivateFieldIn:P9,__addDisposableResource:D9,__disposeResources:N9},ese=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:D9,get __assign(){return U},__asyncDelegator:C9,__asyncGenerator:M9,__asyncValues:A9,__await:Bv,__awaiter:co,__classPrivateFieldGet:I9,__classPrivateFieldIn:P9,__classPrivateFieldSet:L9,__createBinding:GE,__decorate:x9,__disposeResources:N9,__esDecorate:Xoe,__exportStar:_9,__extends:nr,__generator:ho,__importDefault:k9,__importStar:O9,__makeTemplateObject:T9,__metadata:E9,__param:w9,__propKey:Koe,__read:Uk,__rest:Mi,__runInitializers:Yoe,__setFunctionName:qoe,__spread:S9,__spreadArray:So,__spreadArrays:jE,__values:Hx,default:Joe},Symbol.toStringTag,{value:"Module"}));var qa=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Xx=function(r,e){return qa(r)?r.indexOf(e)>-1:!1},UE=function(r,e){if(!qa(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},tse=function(r,e){return e===void 0&&(e=[]),UE(r,function(t){return!Xx(e,t)})},rse={}.toString,Ds=function(r,e){return rse.call(r)==="[object "+e+"]"};const Ln=function(r){return Ds(r,"Function")};var Lt=function(r){return r==null};const Ft=function(r){return Array.isArray?Array.isArray(r):Ds(r,"Array")},Hi=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function De(r,e){if(r){var t;if(Ft(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(Hi(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var R9=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return De(r,function(t,n){Ln(r)&&n==="prototype"||e.push(n)}),e};function B9(r,e){var t=R9(e),n=t.length;if(Lt(r))return!n;for(var i=0;i<n;i+=1){var a=t[i];if(e[a]!==r[a]||!(a in r))return!1}return!0}var Yx=function(r){return typeof r=="object"&&r!==null},Wi=function(r){if(!Yx(r)||!Ds(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};function nse(r,e){if(!Ft(r))return null;var t;if(Ln(e)&&(t=e),Wi(e)&&(t=function(i){return B9(i,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function ise(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var ase=function(r,e){for(var t=null,n=0;n<r.length;n++){var i=r[n],a=i[e];if(!Lt(a)){Ft(a)?t=a[0]:t=a;break}}return t},ose=function(r){if(!Ft(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e},F9=function(r,e){if(e===void 0&&(e=[]),!Ft(r))e.push(r);else for(var t=0;t<r.length;t+=1)F9(r[t],e);return e};const Ll=function(r){if(Ft(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},Pl=function(r){if(Ft(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var $9=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(Ft(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var i=Ll(e),a=Pl(e);return{min:a,max:i}},z9=Array.prototype,sse=z9.splice,lse=z9.indexOf,use=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=lse.call(r,i))>-1;)sse.call(r,a,1);return r},fse=Array.prototype.splice,G9=function(e,t){if(!qa(e))return[];for(var n=e?t.length:0,i=n-1;n--;){var a=void 0,o=t[n];(n===i||o!==a)&&(a=o,fse.call(e,o,1))}return e},j9=function(r,e,t){if(!Ft(r)&&!Wi(r))return r;var n=t;return De(r,function(i,a){n=e(n,i,a)}),n},cse=function(r,e){var t=[];if(!qa(r))return t;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];e(o,n,r)&&(t.push(o),i.push(n))}return G9(r,i),t};const tt=function(r){return Ds(r,"String")};function hse(r,e){var t;if(Ln(e))t=function(i,a){return e(i)-e(a)};else{var n=[];tt(e)?n.push(e):Ft(e)&&(n=e),t=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(t),r}function I0(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var dse=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return I0([].concat.apply([],r))};const vse=function(r,e){for(var t=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[e];if(!Lt(o)){Ft(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(t.push(l),n[l]=!0)}}}return t};function Ml(r){if(qa(r))return r[0]}function Yo(r){if(qa(r)){var e=r;return e[e.length-1]}}function pse(r,e){return Ft(r)||tt(r)?r[0]===e:!1}function gse(r,e){return Ft(r)||tt(r)?r[r.length-1]===e:!1}var mse=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0},yse=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1},bse=Object.prototype.hasOwnProperty;function Kx(r,e){if(!e||!Ft(r))return{};for(var t={},n=Ln(e)?e:function(s){return s[e]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),bse.call(t,i)?t[i].push(o):t[i]=[o]}return t}function U9(r,e){if(!e)return{0:r};if(!Ln(e)){var t=Ft(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=t.length;a<o;a++)i+=n[t[a]]&&n[t[a]].toString();return i}}return Kx(r,e)}const xse=function(r,e){if(!e)return[r];var t=U9(r,e),n=[];for(var i in t)n.push(t[i]);return n};function wse(r,e){return r["_wrap_"+e]}function hh(r,e){if(r["_wrap_"+e])return r["_wrap_"+e];var t=function(n){r[e](n)};return r["_wrap_"+e]=t,t}var d3={};function Ese(r){var e=d3[r];if(!e){for(var t=r.toString(16),n=t.length;n<6;n++)t="0"+t;e="#"+t,d3[r]=e}return e}function _se(r){var e=0,t=0,n=0,i=0;return Ft(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var Sse=function(r,e,t){return r<e?e:r>t?t:r},Xb=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var i=t.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},Pt=function(r){return Ds(r,"Number")},Mse=function(r){return Pt(r)&&r%1!==0},Cse=function(r){return Pt(r)&&r%2===0},Ase=Number.isInteger?Number.isInteger:function(r){return Pt(r)&&r%1===0},Tse=function(r){return Pt(r)&&r<0},Ose=1e-5;function W9(r,e,t){return t===void 0&&(t=Ose),Math.abs(r-e)<t}var kse=function(r){return Pt(r)&&r%2!==0},Ise=function(r){return Pt(r)&&r>0};const Lse=function(r,e){if(Ft(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=Ln(e)?e(a):a[e];o>n&&(t=a,n=o)}return t}},Pse=function(r,e){if(Ft(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],o=Ln(e)?e(a):a[e];o<n&&(t=a,n=o)}return t}};var WE=function(r,e){return(r%e+e)%e},Dse=180/Math.PI,Nse=function(r){return Dse*r};const Rse=parseInt;var Bse=Math.PI/180,VE=function(r){return Bse*r};const v3=function(r,e){return r.hasOwnProperty(e)};var Wk=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return De(r,function(t,n){Ln(r)&&n==="prototype"||e.push(t)}),e};const Fse=function(r,e){return Xx(Wk(r),e)},_p=function(r){return Lt(r)?"":r.toString()};var $se=function(r){return _p(r).toLowerCase()},zse=function(r){var e=_p(r);return e.charAt(0).toLowerCase()+e.substring(1)};function Gse(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var jse=function(r){return _p(r).toUpperCase()},Fv=function(r){var e=_p(r);return e.charAt(0).toUpperCase()+e.substring(1)},Use={}.toString,V9=function(r){return Use.call(r).replace(/^\[object /,"").replace(/]$/,"")},Wse=function(r){return Ds(r,"Arguments")},Im=function(r){return Ds(r,"Boolean")},Vk=function(r){return Ds(r,"Date")},Vse=function(r){return Ds(r,"Error")};function Hse(r){return Pt(r)&&isFinite(r)}var Xse=function(r){return r===null},Yse=Object.prototype,H9=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Yse;return r===t},Kse=function(r){return Ds(r,"RegExp")},qse=function(r){return r===void 0},Zse=function(r){return r instanceof Element||r instanceof HTMLDocument};function X9(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function Y9(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function zS(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function $t(r,e,t,n){return e&&zS(r,e),t&&zS(r,t),n&&zS(r,n),r}var Qse=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r[0],n=1;n<r.length;n++){var i=r[n];Ln(i)&&(i=i.prototype),$t(t.prototype,i)}},Tr=function(r){if(typeof r!="object"||r===null)return r;var e;if(Ft(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=Tr(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=Tr(r[i]):e[i]=r[i]}return e};function Lm(r,e,t){var n;return function(){var i=this,a=arguments,o=function(){n=null,t||r.apply(i,a)},s=t&&!n;clearTimeout(n),n=setTimeout(o,e),s&&r.apply(i,a)}}const K9=function(r,e){if(!Ln(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],o=t.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return t.cache=new Map,t};var Jse=5;function q9(r,e,t,n){t=t||0,n=n||Jse;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&Wi(a)?(Wi(r[i])||(r[i]={}),t<n?q9(r[i],a,t+1,n):r[i]=e[i]):Ft(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var dn=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)q9(r,e[n]);return r},ele=function(r,e,t,n){Ln(e)||(t=e,e=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,r);return r.prototype=$t(a,r.prototype),r.superclass=i(e.prototype,e),$t(a,t),$t(r,n),r},Hk=function(r,e){if(!qa(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,i=0;i<r.length;i++)if(r[i]===e){n=i;break}return n},tle=Object.prototype.hasOwnProperty;function Z9(r){if(Lt(r))return!0;if(qa(r))return!r.length;var e=V9(r);if(e==="Map"||e==="Set")return!r.size;if(H9(r))return!Object.keys(r).length;for(var t in r)if(tle.call(r,t))return!1;return!0}var qf=function(r,e){if(r===e)return!0;if(!r||!e||tt(r)||tt(e))return!1;if(qa(r)||qa(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=qf(r[n],e[n]),!!t);n++);return t}if(Yx(r)||Yx(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=qf(r[i[n]],e[i[n]]),!!t);n++);return t}return!1};const rle=function(r,e,t){return Ln(t)?!!t(r,e):qf(r,e)};var $h=function(r,e){if(!qa(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];t.push(e(i,n))}return t},nle=function(r){return r};const ile=function(r,e){e===void 0&&(e=nle);var t={};return Hi(r)&&!Lt(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},gu=function(r,e,t){for(var n=0,i=tt(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r},ale=function(r,e,t){var n=r,i=tt(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(Hi(n[a])||(n[a]=Pt(i[o+1])?[]:{}),n=n[a]):n[a]=t}),r};var ole=Object.prototype.hasOwnProperty;const sle=function(r,e){if(r===null||!Wi(r))return{};var t={};return De(e,function(n){ole.call(r,n)&&(t[n]=r[n])}),t},lle=function(r,e){return j9(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},L0=function(r,e,t){var n,i,a,o,s=0;t||(t={});var l=function(){s=t.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},u=function(){var f=Date.now();!s&&t.leading===!1&&(s=f);var c=e-(f-s);return i=this,a=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),s=f,o=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(l,c)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},Q9=function(r){return qa(r)?Array.prototype.slice.call(r):[]};var s1={};const Dl=function(r){return r=r||"g",s1[r]?s1[r]+=1:s1[r]=1,r+s1[r]},Ig=function(){},ule=function(r){return r};function HE(r){return Lt(r)?0:qa(r)?r.length:Object.keys(r).length}var l1;const Lg=K9(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return l1||(l1=document.createElement("canvas").getContext("2d")),l1.font=[a,o,i,t+"px",n].join(" "),l1.measureText(tt(r)?r:"").width},function(r,e){return e===void 0&&(e={}),jE([r],Wk(e)).join("")}),fle=function(r,e,t,n){n===void 0&&(n="...");var i=16,a=Lg(n,t),o=tt(r)?r:_p(r),s=e,l=[],u,f;if(Lg(r,t)<=e)return r;for(;u=o.substr(0,i),f=Lg(u,t),!(f+a>s&&f>s);)if(l.push(u),s-=f,o=o.substr(i),!o)return l.join("");for(;u=o.substr(0,1),f=Lg(u,t),!(f+a>s);)if(l.push(u),s-=f,o=o.substr(1),!o)return l.join("");return""+l.join("")+n};var cle=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}();const hle=Object.freeze(Object.defineProperty({__proto__:null,Cache:cle,assign:$t,augment:Qse,clamp:Sse,clearAnimationFrame:Y9,clone:Tr,contains:Xx,debounce:Lm,deepMix:dn,difference:tse,each:De,endsWith:gse,every:mse,extend:ele,filter:UE,find:nse,findIndex:ise,firstValue:ase,fixedBase:Xb,flatten:ose,flattenDeep:F9,forIn:De,get:gu,getEllipsisText:fle,getRange:$9,getType:V9,getWrapBehavior:wse,group:xse,groupBy:Kx,groupToMap:U9,has:v3,hasKey:v3,hasValue:Fse,head:Ml,identity:ule,includes:Xx,indexOf:Hk,isArguments:Wse,isArray:Ft,isArrayLike:qa,isBoolean:Im,isDate:Vk,isDecimal:Mse,isElement:Zse,isEmpty:Z9,isEqual:qf,isEqualWith:rle,isError:Vse,isEven:Cse,isFinite:Hse,isFunction:Ln,isInteger:Ase,isMatch:B9,isNegative:Tse,isNil:Lt,isNull:Xse,isNumber:Pt,isNumberEqual:W9,isObject:Hi,isObjectLike:Yx,isOdd:kse,isPlainObject:Wi,isPositive:Ise,isPrototype:H9,isRegExp:Kse,isString:tt,isType:Ds,isUndefined:qse,keys:R9,last:Yo,lowerCase:$se,lowerFirst:zse,map:$h,mapValues:ile,max:Ll,maxBy:Lse,measureTextWidth:Lg,memoize:K9,min:Pl,minBy:Pse,mix:$t,mod:WE,noop:Ig,number2color:Ese,omit:lle,parseRadius:_se,pick:sle,pull:use,pullAt:G9,reduce:j9,remove:cse,requestAnimationFrame:X9,set:ale,size:HE,some:yse,sortBy:hse,startsWith:pse,substitute:Gse,throttle:L0,toArray:Q9,toDegree:Nse,toInteger:Rse,toRadian:VE,toString:_p,union:dse,uniq:I0,uniqueId:Dl,upperCase:jse,upperFirst:Fv,values:Wk,valuesOfKey:vse,wrapBehavior:hh},Symbol.toStringTag,{value:"Module"})),dle={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,n=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),De(n,function(i,a){e.on(a,i)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,n=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),De(t,function(i,a){e.off(a,i)}),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};var Xk=function(){function r(){}return r.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var n=Tr(dle);Object.assign(n,t);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&(De(l,function(f,c){u[c]=hh(s,f)}),this.events=u)};i.prototype=n,r.types[e]=i},r.hasBehavior=function(e){return!!r.types[e]},r.getBehavior=function(e){return r.types[e]},r.types={},r}(),vle="*",J9=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[vle]||[],s=function(l){for(var u=l.length,f=0;f<u;f++)if(l[f]){var c=l[f],h=c.callback,d=c.once;d&&(l.splice(f,1),l.length===0&&delete t._events[e],u--,f--),h.apply(t,n)}};s(a),s(o)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===t&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r}(),Ht=1e-6,Br=typeof Float32Array<"u"?Float32Array:Array,Es=Math.random;function ple(r){Br=r}var gle=Math.PI/180;function mle(r){return r*gle}function yle(r,e){return Math.abs(r-e)<=Ht*Math.max(1,Math.abs(r),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});const ble=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return Br},EPSILON:Ht,RANDOM:Es,equals:yle,setMatrixArrayType:ple,toRadian:mle},Symbol.toStringTag,{value:"Module"}));function xle(){var r=new Br(4);return Br!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function wle(r){var e=new Br(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function Ele(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function _le(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function Sle(r,e,t,n){var i=new Br(4);return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i}function Mle(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function Cle(r,e){if(r===e){var t=e[1];r[1]=e[2],r[2]=t}else r[0]=e[0],r[1]=e[2],r[2]=e[1],r[3]=e[3];return r}function Ale(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*a-i*n;return o?(o=1/o,r[0]=a*o,r[1]=-n*o,r[2]=-i*o,r[3]=t*o,r):null}function Tle(r,e){var t=e[0];return r[0]=e[3],r[1]=-e[1],r[2]=-e[2],r[3]=t,r}function Ole(r){return r[0]*r[3]-r[2]*r[1]}function eU(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],f=t[3];return r[0]=n*s+a*l,r[1]=i*s+o*l,r[2]=n*u+a*f,r[3]=i*u+o*f,r}function kle(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l+a*s,r[1]=i*l+o*s,r[2]=n*-s+a*l,r[3]=i*-s+o*l,r}function Ile(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1];return r[0]=n*s,r[1]=i*s,r[2]=a*l,r[3]=o*l,r}function Lle(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=-t,r[3]=n,r}function Ple(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r}function Dle(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function Nle(r){return Math.hypot(r[0],r[1],r[2],r[3])}function Rle(r,e,t,n){return r[2]=n[2]/n[0],t[0]=n[0],t[1]=n[1],t[3]=n[3]-r[2]*t[1],[r,e,t]}function Ble(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r}function tU(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r}function Fle(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function $le(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(t-o)<=Ht*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-s)<=Ht*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Ht*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Ht*Math.max(1,Math.abs(a),Math.abs(u))}function zle(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function Gle(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r}var jle=eU,Ule=tU;const Wle=Object.freeze(Object.defineProperty({__proto__:null,LDU:Rle,add:Ble,adjoint:Tle,clone:wle,copy:Ele,create:xle,determinant:Ole,equals:$le,exactEquals:Fle,frob:Nle,fromRotation:Lle,fromScaling:Ple,fromValues:Sle,identity:_le,invert:Ale,mul:jle,multiply:eU,multiplyScalar:zle,multiplyScalarAndAdd:Gle,rotate:kle,scale:Ile,set:Mle,str:Dle,sub:Ule,subtract:tU,transpose:Cle},Symbol.toStringTag,{value:"Module"}));function Vle(){var r=new Br(6);return Br!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function Hle(r){var e=new Br(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function Xle(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Yle(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function Kle(r,e,t,n,i,a){var o=new Br(6);return o[0]=r,o[1]=e,o[2]=t,o[3]=n,o[4]=i,o[5]=a,o}function qle(r,e,t,n,i,a,o){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r}function Zle(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=t*a-n*i;return l?(l=1/l,r[0]=a*l,r[1]=-n*l,r[2]=-i*l,r[3]=t*l,r[4]=(i*s-a*o)*l,r[5]=(n*o-t*s)*l,r):null}function Qle(r){return r[0]*r[3]-r[1]*r[2]}function rU(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],f=t[1],c=t[2],h=t[3],d=t[4],v=t[5];return r[0]=n*u+a*f,r[1]=i*u+o*f,r[2]=n*c+a*h,r[3]=i*c+o*h,r[4]=n*d+a*v+s,r[5]=i*d+o*v+l,r}function Jle(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(t),f=Math.cos(t);return r[0]=n*f+a*u,r[1]=i*f+o*u,r[2]=n*-u+a*f,r[3]=i*-u+o*f,r[4]=s,r[5]=l,r}function eue(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],f=t[1];return r[0]=n*u,r[1]=i*u,r[2]=a*f,r[3]=o*f,r[4]=s,r[5]=l,r}function tue(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],f=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=n*u+a*f+s,r[5]=i*u+o*f+l,r}function rue(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=-t,r[3]=n,r[4]=0,r[5]=0,r}function nue(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r[4]=0,r[5]=0,r}function iue(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0],r[5]=e[1],r}function aue(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"}function oue(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],1)}function sue(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r}function nU(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r}function lue(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r}function uue(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r}function fue(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]}function cue(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=e[0],u=e[1],f=e[2],c=e[3],h=e[4],d=e[5];return Math.abs(t-l)<=Ht*Math.max(1,Math.abs(t),Math.abs(l))&&Math.abs(n-u)<=Ht*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-f)<=Ht*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-c)<=Ht*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-h)<=Ht*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=Ht*Math.max(1,Math.abs(s),Math.abs(d))}var hue=rU,due=nU;const vue=Object.freeze(Object.defineProperty({__proto__:null,add:sue,clone:Hle,copy:Xle,create:Vle,determinant:Qle,equals:cue,exactEquals:fue,frob:oue,fromRotation:rue,fromScaling:nue,fromTranslation:iue,fromValues:Kle,identity:Yle,invert:Zle,mul:hue,multiply:rU,multiplyScalar:lue,multiplyScalarAndAdd:uue,rotate:Jle,scale:eue,set:qle,str:aue,sub:due,subtract:nU,translate:tue},Symbol.toStringTag,{value:"Module"}));function iU(){var r=new Br(9);return Br!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function pue(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function gue(r){var e=new Br(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function mue(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function yue(r,e,t,n,i,a,o,s,l){var u=new Br(9);return u[0]=r,u[1]=e,u[2]=t,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function bue(r,e,t,n,i,a,o,s,l,u){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r[8]=u,r}function xue(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function wue(r,e){if(r===e){var t=e[1],n=e[2],i=e[5];r[1]=e[3],r[2]=e[6],r[3]=t,r[5]=e[7],r[6]=n,r[7]=i}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function Yk(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],f=e[8],c=f*o-s*u,h=-f*a+s*l,d=u*a-o*l,v=t*c+n*h+i*d;return v?(v=1/v,r[0]=c*v,r[1]=(-f*n+i*u)*v,r[2]=(s*n-i*o)*v,r[3]=h*v,r[4]=(f*t-i*l)*v,r[5]=(-s*t+i*a)*v,r[6]=d*v,r[7]=(-u*t+n*l)*v,r[8]=(o*t-n*a)*v,r):null}function Eue(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],f=e[8];return r[0]=o*f-s*u,r[1]=i*u-n*f,r[2]=n*s-i*o,r[3]=s*l-a*f,r[4]=t*f-i*l,r[5]=i*a-t*s,r[6]=a*u-o*l,r[7]=n*l-t*u,r[8]=t*o-n*a,r}function _ue(r){var e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],l=r[7],u=r[8];return e*(u*a-o*l)+t*(-u*i+o*s)+n*(l*i-a*s)}function $l(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=e[8],h=t[0],d=t[1],v=t[2],p=t[3],g=t[4],m=t[5],b=t[6],y=t[7],x=t[8];return r[0]=h*n+d*o+v*u,r[1]=h*i+d*s+v*f,r[2]=h*a+d*l+v*c,r[3]=p*n+g*o+m*u,r[4]=p*i+g*s+m*f,r[5]=p*a+g*l+m*c,r[6]=b*n+y*o+x*u,r[7]=b*i+y*s+x*f,r[8]=b*a+y*l+x*c,r}function Sue(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=h*n+d*o+u,r[7]=h*i+d*s+f,r[8]=h*a+d*l+c,r}function Mue(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*o,r[1]=d*i+h*s,r[2]=d*a+h*l,r[3]=d*o-h*n,r[4]=d*s-h*i,r[5]=d*l-h*a,r[6]=u,r[7]=f,r[8]=c,r}function Cue(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Kk(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function qk(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=-t,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Zk(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Aue(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function Tue(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t+t,s=n+n,l=i+i,u=t*o,f=n*o,c=n*s,h=i*o,d=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-c-v,r[3]=f-m,r[6]=h+g,r[1]=f+m,r[4]=1-u-v,r[7]=d-p,r[2]=h-g,r[5]=d+p,r[8]=1-u-c,r}function Oue(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],f=e[8],c=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15],b=t*s-n*o,y=t*l-i*o,x=t*u-a*o,w=n*l-i*s,E=n*u-a*s,_=i*u-a*l,S=f*p-c*v,C=f*g-h*v,M=f*m-d*v,T=c*g-h*p,A=c*m-d*p,O=h*m-d*g,L=b*O-y*A+x*T+w*M-E*C+_*S;return L?(L=1/L,r[0]=(s*O-l*A+u*T)*L,r[1]=(l*M-o*O-u*C)*L,r[2]=(o*A-s*M+u*S)*L,r[3]=(i*A-n*O-a*T)*L,r[4]=(t*O-i*M+a*C)*L,r[5]=(n*M-t*A-a*S)*L,r[6]=(p*_-g*E+m*w)*L,r[7]=(g*x-v*_-m*y)*L,r[8]=(v*E-p*x+m*b)*L,r):null}function kue(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function Iue(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function Lue(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Pue(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r}function aU(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r}function Due(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r}function Nue(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r}function Rue(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function Bue(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],f=r[8],c=e[0],h=e[1],d=e[2],v=e[3],p=e[4],g=e[5],m=e[6],b=e[7],y=e[8];return Math.abs(t-c)<=Ht*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(n-h)<=Ht*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=Ht*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-v)<=Ht*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=Ht*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-g)<=Ht*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=Ht*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-b)<=Ht*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(f-y)<=Ht*Math.max(1,Math.abs(f),Math.abs(y))}var Fue=$l,$ue=aU;const oU=Object.freeze(Object.defineProperty({__proto__:null,add:Pue,adjoint:Eue,clone:gue,copy:mue,create:iU,determinant:_ue,equals:Bue,exactEquals:Rue,frob:Lue,fromMat2d:Aue,fromMat4:pue,fromQuat:Tue,fromRotation:qk,fromScaling:Zk,fromTranslation:Kk,fromValues:yue,identity:xue,invert:Yk,mul:Fue,multiply:$l,multiplyScalar:Due,multiplyScalarAndAdd:Nue,normalFromMat4:Oue,projection:kue,rotate:Mue,scale:Cue,set:bue,str:Iue,sub:$ue,subtract:aU,translate:Sue,transpose:wue},Symbol.toStringTag,{value:"Module"}));function zue(){var r=new Br(16);return Br!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function Gue(r){var e=new Br(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function jue(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Uue(r,e,t,n,i,a,o,s,l,u,f,c,h,d,v,p){var g=new Br(16);return g[0]=r,g[1]=e,g[2]=t,g[3]=n,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=u,g[10]=f,g[11]=c,g[12]=h,g[13]=d,g[14]=v,g[15]=p,g}function Wue(r,e,t,n,i,a,o,s,l,u,f,c,h,d,v,p,g){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r[8]=u,r[9]=f,r[10]=c,r[11]=h,r[12]=d,r[13]=v,r[14]=p,r[15]=g,r}function sU(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Vue(r,e){if(r===e){var t=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=t,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=a,r[11]=e[14],r[12]=i,r[13]=o,r[14]=s}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function Hue(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],f=e[8],c=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15],b=t*s-n*o,y=t*l-i*o,x=t*u-a*o,w=n*l-i*s,E=n*u-a*s,_=i*u-a*l,S=f*p-c*v,C=f*g-h*v,M=f*m-d*v,T=c*g-h*p,A=c*m-d*p,O=h*m-d*g,L=b*O-y*A+x*T+w*M-E*C+_*S;return L?(L=1/L,r[0]=(s*O-l*A+u*T)*L,r[1]=(i*A-n*O-a*T)*L,r[2]=(p*_-g*E+m*w)*L,r[3]=(h*E-c*_-d*w)*L,r[4]=(l*M-o*O-u*C)*L,r[5]=(t*O-i*M+a*C)*L,r[6]=(g*x-v*_-m*y)*L,r[7]=(f*_-h*x+d*y)*L,r[8]=(o*A-s*M+u*S)*L,r[9]=(n*M-t*A-a*S)*L,r[10]=(v*E-p*x+m*b)*L,r[11]=(c*x-f*E-d*b)*L,r[12]=(s*C-o*T-l*S)*L,r[13]=(t*T-n*C+i*S)*L,r[14]=(p*y-v*w-g*b)*L,r[15]=(f*w-c*y+h*b)*L,r):null}function Xue(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],f=e[8],c=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15];return r[0]=s*(h*m-d*g)-c*(l*m-u*g)+p*(l*d-u*h),r[1]=-(n*(h*m-d*g)-c*(i*m-a*g)+p*(i*d-a*h)),r[2]=n*(l*m-u*g)-s*(i*m-a*g)+p*(i*u-a*l),r[3]=-(n*(l*d-u*h)-s*(i*d-a*h)+c*(i*u-a*l)),r[4]=-(o*(h*m-d*g)-f*(l*m-u*g)+v*(l*d-u*h)),r[5]=t*(h*m-d*g)-f*(i*m-a*g)+v*(i*d-a*h),r[6]=-(t*(l*m-u*g)-o*(i*m-a*g)+v*(i*u-a*l)),r[7]=t*(l*d-u*h)-o*(i*d-a*h)+f*(i*u-a*l),r[8]=o*(c*m-d*p)-f*(s*m-u*p)+v*(s*d-u*c),r[9]=-(t*(c*m-d*p)-f*(n*m-a*p)+v*(n*d-a*c)),r[10]=t*(s*m-u*p)-o*(n*m-a*p)+v*(n*u-a*s),r[11]=-(t*(s*d-u*c)-o*(n*d-a*c)+f*(n*u-a*s)),r[12]=-(o*(c*g-h*p)-f*(s*g-l*p)+v*(s*h-l*c)),r[13]=t*(c*g-h*p)-f*(n*g-i*p)+v*(n*h-i*c),r[14]=-(t*(s*g-l*p)-o*(n*g-i*p)+v*(n*l-i*s)),r[15]=t*(s*h-l*c)-o*(n*h-i*c)+f*(n*l-i*s),r}function Yue(r){var e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],l=r[7],u=r[8],f=r[9],c=r[10],h=r[11],d=r[12],v=r[13],p=r[14],g=r[15],m=e*o-t*a,b=e*s-n*a,y=e*l-i*a,x=t*s-n*o,w=t*l-i*o,E=n*l-i*s,_=u*v-f*d,S=u*p-c*d,C=u*g-h*d,M=f*p-c*v,T=f*g-h*v,A=c*g-h*p;return m*A-b*T+y*M+x*C-w*S+E*_}function lU(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=e[8],h=e[9],d=e[10],v=e[11],p=e[12],g=e[13],m=e[14],b=e[15],y=t[0],x=t[1],w=t[2],E=t[3];return r[0]=y*n+x*s+w*c+E*p,r[1]=y*i+x*l+w*h+E*g,r[2]=y*a+x*u+w*d+E*m,r[3]=y*o+x*f+w*v+E*b,y=t[4],x=t[5],w=t[6],E=t[7],r[4]=y*n+x*s+w*c+E*p,r[5]=y*i+x*l+w*h+E*g,r[6]=y*a+x*u+w*d+E*m,r[7]=y*o+x*f+w*v+E*b,y=t[8],x=t[9],w=t[10],E=t[11],r[8]=y*n+x*s+w*c+E*p,r[9]=y*i+x*l+w*h+E*g,r[10]=y*a+x*u+w*d+E*m,r[11]=y*o+x*f+w*v+E*b,y=t[12],x=t[13],w=t[14],E=t[15],r[12]=y*n+x*s+w*c+E*p,r[13]=y*i+x*l+w*h+E*g,r[14]=y*a+x*u+w*d+E*m,r[15]=y*o+x*f+w*v+E*b,r}function Kue(r,e,t){var n=t[0],i=t[1],a=t[2],o,s,l,u,f,c,h,d,v,p,g,m;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*a+e[12],r[13]=e[1]*n+e[5]*i+e[9]*a+e[13],r[14]=e[2]*n+e[6]*i+e[10]*a+e[14],r[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],f=e[4],c=e[5],h=e[6],d=e[7],v=e[8],p=e[9],g=e[10],m=e[11],r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=f,r[5]=c,r[6]=h,r[7]=d,r[8]=v,r[9]=p,r[10]=g,r[11]=m,r[12]=o*n+f*i+v*a+e[12],r[13]=s*n+c*i+p*a+e[13],r[14]=l*n+h*i+g*a+e[14],r[15]=u*n+d*i+m*a+e[15]),r}function que(r,e,t){var n=t[0],i=t[1],a=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11]*a,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Zue(r,e,t,n){var i=n[0],a=n[1],o=n[2],s=Math.hypot(i,a,o),l,u,f,c,h,d,v,p,g,m,b,y,x,w,E,_,S,C,M,T,A,O,L,N;return s<Ht?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(t),u=Math.cos(t),f=1-u,c=e[0],h=e[1],d=e[2],v=e[3],p=e[4],g=e[5],m=e[6],b=e[7],y=e[8],x=e[9],w=e[10],E=e[11],_=i*i*f+u,S=a*i*f+o*l,C=o*i*f-a*l,M=i*a*f-o*l,T=a*a*f+u,A=o*a*f+i*l,O=i*o*f+a*l,L=a*o*f-i*l,N=o*o*f+u,r[0]=c*_+p*S+y*C,r[1]=h*_+g*S+x*C,r[2]=d*_+m*S+w*C,r[3]=v*_+b*S+E*C,r[4]=c*M+p*T+y*A,r[5]=h*M+g*T+x*A,r[6]=d*M+m*T+w*A,r[7]=v*M+b*T+E*A,r[8]=c*O+p*L+y*N,r[9]=h*O+g*L+x*N,r[10]=d*O+m*L+w*N,r[11]=v*O+b*L+E*N,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function Que(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],h=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=a*i+u*n,r[5]=o*i+f*n,r[6]=s*i+c*n,r[7]=l*i+h*n,r[8]=u*i-a*n,r[9]=f*i-o*n,r[10]=c*i-s*n,r[11]=h*i-l*n,r}function Jue(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],f=e[9],c=e[10],h=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i-u*n,r[1]=o*i-f*n,r[2]=s*i-c*n,r[3]=l*i-h*n,r[8]=a*n+u*i,r[9]=o*n+f*i,r[10]=s*n+c*i,r[11]=l*n+h*i,r}function efe(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],f=e[5],c=e[6],h=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i+u*n,r[1]=o*i+f*n,r[2]=s*i+c*n,r[3]=l*i+h*n,r[4]=u*i-a*n,r[5]=f*i-o*n,r[6]=c*i-s*n,r[7]=h*i-l*n,r}function tfe(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function rfe(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function nfe(r,e,t){var n=t[0],i=t[1],a=t[2],o=Math.hypot(n,i,a),s,l,u;return o<Ht?null:(o=1/o,n*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),u=1-l,r[0]=n*n*u+l,r[1]=i*n*u+a*s,r[2]=a*n*u-i*s,r[3]=0,r[4]=n*i*u-a*s,r[5]=i*i*u+l,r[6]=a*i*u+n*s,r[7]=0,r[8]=n*a*u+i*s,r[9]=i*a*u-n*s,r[10]=a*a*u+l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function ife(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function afe(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ofe(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function uU(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,f=n*s,c=n*l,h=n*u,d=i*l,v=i*u,p=a*u,g=o*s,m=o*l,b=o*u;return r[0]=1-(d+p),r[1]=c+b,r[2]=h-m,r[3]=0,r[4]=c-b,r[5]=1-(f+p),r[6]=v+g,r[7]=0,r[8]=h+m,r[9]=v-g,r[10]=1-(f+d),r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function sfe(r,e){var t=new Br(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=n*n+i*i+a*a+o*o;return c>0?(t[0]=(s*o+f*n+l*a-u*i)*2/c,t[1]=(l*o+f*i+u*n-s*a)*2/c,t[2]=(u*o+f*a+s*i-l*n)*2/c):(t[0]=(s*o+f*n+l*a-u*i)*2,t[1]=(l*o+f*i+u*n-s*a)*2,t[2]=(u*o+f*a+s*i-l*n)*2),uU(r,e,t),r}function fU(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function cU(r,e){var t=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],u=e[9],f=e[10];return r[0]=Math.hypot(t,n,i),r[1]=Math.hypot(a,o,s),r[2]=Math.hypot(l,u,f),r}function hU(r,e){var t=new Br(3);cU(t,e);var n=1/t[0],i=1/t[1],a=1/t[2],o=e[0]*n,s=e[1]*i,l=e[2]*a,u=e[4]*n,f=e[5]*i,c=e[6]*a,h=e[8]*n,d=e[9]*i,v=e[10]*a,p=o+f+v,g=0;return p>0?(g=Math.sqrt(p+1)*2,r[3]=.25*g,r[0]=(c-d)/g,r[1]=(h-l)/g,r[2]=(s-u)/g):o>f&&o>v?(g=Math.sqrt(1+o-f-v)*2,r[3]=(c-d)/g,r[0]=.25*g,r[1]=(s+u)/g,r[2]=(h+l)/g):f>v?(g=Math.sqrt(1+f-o-v)*2,r[3]=(h-l)/g,r[0]=(s+u)/g,r[1]=.25*g,r[2]=(c+d)/g):(g=Math.sqrt(1+v-o-f)*2,r[3]=(s-u)/g,r[0]=(h+l)/g,r[1]=(c+d)/g,r[2]=.25*g),r}function lfe(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,f=o+o,c=i*l,h=i*u,d=i*f,v=a*u,p=a*f,g=o*f,m=s*l,b=s*u,y=s*f,x=n[0],w=n[1],E=n[2];return r[0]=(1-(v+g))*x,r[1]=(h+y)*x,r[2]=(d-b)*x,r[3]=0,r[4]=(h-y)*w,r[5]=(1-(c+g))*w,r[6]=(p+m)*w,r[7]=0,r[8]=(d+b)*E,r[9]=(p-m)*E,r[10]=(1-(c+v))*E,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function ufe(r,e,t,n,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,f=o+o,c=s+s,h=a*u,d=a*f,v=a*c,p=o*f,g=o*c,m=s*c,b=l*u,y=l*f,x=l*c,w=n[0],E=n[1],_=n[2],S=i[0],C=i[1],M=i[2],T=(1-(p+m))*w,A=(d+x)*w,O=(v-y)*w,L=(d-x)*E,N=(1-(h+m))*E,P=(g+b)*E,R=(v+y)*_,G=(g-b)*_,D=(1-(h+p))*_;return r[0]=T,r[1]=A,r[2]=O,r[3]=0,r[4]=L,r[5]=N,r[6]=P,r[7]=0,r[8]=R,r[9]=G,r[10]=D,r[11]=0,r[12]=t[0]+S-(T*S+L*C+R*M),r[13]=t[1]+C-(A*S+N*C+G*M),r[14]=t[2]+M-(O*S+P*C+D*M),r[15]=1,r}function ffe(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t+t,s=n+n,l=i+i,u=t*o,f=n*o,c=n*s,h=i*o,d=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-c-v,r[1]=f+m,r[2]=h-g,r[3]=0,r[4]=f-m,r[5]=1-u-v,r[6]=d+p,r[7]=0,r[8]=h+g,r[9]=d-p,r[10]=1-u-c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function cfe(r,e,t,n,i,a,o){var s=1/(t-e),l=1/(i-n),u=1/(a-o);return r[0]=a*2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a*2*l,r[6]=0,r[7]=0,r[8]=(t+e)*s,r[9]=(i+n)*l,r[10]=(o+a)*u,r[11]=-1,r[12]=0,r[13]=0,r[14]=o*a*2*u,r[15]=0,r}function dU(r,e,t,n,i){var a=1/Math.tan(e/2),o;return r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(o=1/(n-i),r[10]=(i+n)*o,r[14]=2*i*n*o):(r[10]=-1,r[14]=-2*n),r}var hfe=dU;function dfe(r,e,t,n,i){var a=1/Math.tan(e/2),o;return r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(o=1/(n-i),r[10]=i*o,r[14]=i*n*o):(r[10]=-1,r[14]=-n),r}function vfe(r,e,t,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=-((o-s)*l*.5),r[9]=(i-a)*u*.5,r[10]=n/(t-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*t/(t-n),r[15]=0,r}function vU(r,e,t,n,i,a,o){var s=1/(e-t),l=1/(n-i),u=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*u,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*l,r[14]=(o+a)*u,r[15]=1,r}var pfe=vU;function gfe(r,e,t,n,i,a,o){var s=1/(e-t),l=1/(n-i),u=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=u,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*l,r[14]=a*u,r[15]=1,r}function mfe(r,e,t,n){var i,a,o,s,l,u,f,c,h,d,v=e[0],p=e[1],g=e[2],m=n[0],b=n[1],y=n[2],x=t[0],w=t[1],E=t[2];return Math.abs(v-x)<Ht&&Math.abs(p-w)<Ht&&Math.abs(g-E)<Ht?sU(r):(f=v-x,c=p-w,h=g-E,d=1/Math.hypot(f,c,h),f*=d,c*=d,h*=d,i=b*h-y*c,a=y*f-m*h,o=m*c-b*f,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=c*o-h*a,l=h*i-f*o,u=f*a-c*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),r[0]=i,r[1]=s,r[2]=f,r[3]=0,r[4]=a,r[5]=l,r[6]=c,r[7]=0,r[8]=o,r[9]=u,r[10]=h,r[11]=0,r[12]=-(i*v+a*p+o*g),r[13]=-(s*v+l*p+u*g),r[14]=-(f*v+c*p+h*g),r[15]=1,r)}function yfe(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],u=n[2],f=i-t[0],c=a-t[1],h=o-t[2],d=f*f+c*c+h*h;d>0&&(d=1/Math.sqrt(d),f*=d,c*=d,h*=d);var v=l*h-u*c,p=u*f-s*h,g=s*c-l*f;return d=v*v+p*p+g*g,d>0&&(d=1/Math.sqrt(d),v*=d,p*=d,g*=d),r[0]=v,r[1]=p,r[2]=g,r[3]=0,r[4]=c*g-h*p,r[5]=h*v-f*g,r[6]=f*p-c*v,r[7]=0,r[8]=f,r[9]=c,r[10]=h,r[11]=0,r[12]=i,r[13]=a,r[14]=o,r[15]=1,r}function bfe(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function xfe(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function wfe(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function pU(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function Efe(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}function _fe(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r[9]=e[9]+t[9]*n,r[10]=e[10]+t[10]*n,r[11]=e[11]+t[11]*n,r[12]=e[12]+t[12]*n,r[13]=e[13]+t[13]*n,r[14]=e[14]+t[14]*n,r[15]=e[15]+t[15]*n,r}function Sfe(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Mfe(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],f=r[8],c=r[9],h=r[10],d=r[11],v=r[12],p=r[13],g=r[14],m=r[15],b=e[0],y=e[1],x=e[2],w=e[3],E=e[4],_=e[5],S=e[6],C=e[7],M=e[8],T=e[9],A=e[10],O=e[11],L=e[12],N=e[13],P=e[14],R=e[15];return Math.abs(t-b)<=Ht*Math.max(1,Math.abs(t),Math.abs(b))&&Math.abs(n-y)<=Ht*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-x)<=Ht*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=Ht*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-E)<=Ht*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-_)<=Ht*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(l-S)<=Ht*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-C)<=Ht*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(f-M)<=Ht*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(c-T)<=Ht*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-A)<=Ht*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-O)<=Ht*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(v-L)<=Ht*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(p-N)<=Ht*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(g-P)<=Ht*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(m-R)<=Ht*Math.max(1,Math.abs(m),Math.abs(R))}var Cfe=lU,Afe=pU;const Tfe=Object.freeze(Object.defineProperty({__proto__:null,add:wfe,adjoint:Xue,clone:Gue,copy:jue,create:zue,determinant:Yue,equals:Mfe,exactEquals:Sfe,frob:xfe,fromQuat:ffe,fromQuat2:sfe,fromRotation:nfe,fromRotationTranslation:uU,fromRotationTranslationScale:lfe,fromRotationTranslationScaleOrigin:ufe,fromScaling:rfe,fromTranslation:tfe,fromValues:Uue,fromXRotation:ife,fromYRotation:afe,fromZRotation:ofe,frustum:cfe,getRotation:hU,getScaling:cU,getTranslation:fU,identity:sU,invert:Hue,lookAt:mfe,mul:Cfe,multiply:lU,multiplyScalar:Efe,multiplyScalarAndAdd:_fe,ortho:pfe,orthoNO:vU,orthoZO:gfe,perspective:hfe,perspectiveFromFieldOfView:vfe,perspectiveNO:dU,perspectiveZO:dfe,rotate:Zue,rotateX:Que,rotateY:Jue,rotateZ:efe,scale:que,set:Wue,str:bfe,sub:Afe,subtract:pU,targetTo:yfe,translate:Kue,transpose:Vue},Symbol.toStringTag,{value:"Module"}));function Qk(){var r=new Br(3);return Br!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Ofe(r){var e=new Br(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function gU(r){var e=r[0],t=r[1],n=r[2];return Math.hypot(e,t,n)}function dA(r,e,t){var n=new Br(3);return n[0]=r,n[1]=e,n[2]=t,n}function kfe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function Ife(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function Lfe(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function mU(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function yU(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function bU(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}function Pfe(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}function Dfe(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}function Nfe(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function Rfe(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function Bfe(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}function Ffe(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function $fe(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r}function xU(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.hypot(t,n,i)}function wU(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return t*t+n*n+i*i}function EU(r){var e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n}function zfe(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function Gfe(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function _U(r,e){var t=e[0],n=e[1],i=e[2],a=t*t+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r}function Jk(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function Yb(r,e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return r[0]=i*l-a*s,r[1]=a*o-n*l,r[2]=n*s-i*o,r}function jfe(r,e,t,n){var i=e[0],a=e[1],o=e[2];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r[2]=o+n*(t[2]-o),r}function Ufe(r,e,t,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),f=o*(3-2*a);return r[0]=e[0]*s+t[0]*l+n[0]*u+i[0]*f,r[1]=e[1]*s+t[1]*l+n[1]*u+i[1]*f,r[2]=e[2]*s+t[2]*l+n[2]*u+i[2]*f,r}function Wfe(r,e,t,n,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,f=3*a*s,c=3*l*o,h=l*a;return r[0]=e[0]*u+t[0]*f+n[0]*c+i[0]*h,r[1]=e[1]*u+t[1]*f+n[1]*c+i[1]*h,r[2]=e[2]*u+t[2]*f+n[2]*c+i[2]*h,r}function Vfe(r,e){e=e||1;var t=Es()*2*Math.PI,n=Es()*2-1,i=Math.sqrt(1-n*n)*e;return r[0]=Math.cos(t)*i,r[1]=Math.sin(t)*i,r[2]=n*e,r}function Hfe(r,e,t){var n=e[0],i=e[1],a=e[2],o=t[3]*n+t[7]*i+t[11]*a+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*a+t[12])/o,r[1]=(t[1]*n+t[5]*i+t[9]*a+t[13])/o,r[2]=(t[2]*n+t[6]*i+t[10]*a+t[14])/o,r}function XE(r,e,t){var n=e[0],i=e[1],a=e[2];return r[0]=n*t[0]+i*t[3]+a*t[6],r[1]=n*t[1]+i*t[4]+a*t[7],r[2]=n*t[2]+i*t[5]+a*t[8],r}function Xfe(r,e,t){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],f=i*u-a*l,c=a*s-n*u,h=n*l-i*s,d=i*h-a*c,v=a*f-n*h,p=n*c-i*f,g=o*2;return f*=g,c*=g,h*=g,d*=2,v*=2,p*=2,r[0]=s+f+d,r[1]=l+c+v,r[2]=u+h+p,r}function Yfe(r,e,t,n){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),r[0]=a[0]+t[0],r[1]=a[1]+t[1],r[2]=a[2]+t[2],r}function Kfe(r,e,t,n){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),r[0]=a[0]+t[0],r[1]=a[1]+t[1],r[2]=a[2]+t[2],r}function qfe(r,e,t,n){var i=[],a=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],r[0]=a[0]+t[0],r[1]=a[1]+t[1],r[2]=a[2]+t[2],r}function Zfe(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(t*t+n*n+i*i),u=Math.sqrt(a*a+o*o+s*s),f=l*u,c=f&&Jk(r,e)/f;return Math.acos(Math.min(Math.max(c,-1),1))}function Qfe(r){return r[0]=0,r[1]=0,r[2]=0,r}function Jfe(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function ece(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function tce(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],o=e[1],s=e[2];return Math.abs(t-a)<=Ht*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(n-o)<=Ht*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=Ht*Math.max(1,Math.abs(i),Math.abs(s))}var rce=mU,nce=yU,ice=bU,ace=xU,oce=wU,SU=gU,sce=EU,lce=function(){var r=Qk();return function(e,t,n,i,a,o){var s,l;for(t||(t=3),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],a(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e}}();const uce=Object.freeze(Object.defineProperty({__proto__:null,add:Lfe,angle:Zfe,bezier:Wfe,ceil:Pfe,clone:Ofe,copy:kfe,create:Qk,cross:Yb,dist:ace,distance:xU,div:ice,divide:bU,dot:Jk,equals:tce,exactEquals:ece,floor:Dfe,forEach:lce,fromValues:dA,hermite:Ufe,inverse:Gfe,len:SU,length:gU,lerp:jfe,max:Rfe,min:Nfe,mul:nce,multiply:yU,negate:zfe,normalize:_U,random:Vfe,rotateX:Yfe,rotateY:Kfe,rotateZ:qfe,round:Bfe,scale:Ffe,scaleAndAdd:$fe,set:Ife,sqrDist:oce,sqrLen:sce,squaredDistance:wU,squaredLength:EU,str:Jfe,sub:rce,subtract:mU,transformMat3:XE,transformMat4:Hfe,transformQuat:Xfe,zero:Qfe},Symbol.toStringTag,{value:"Module"}));function MU(){var r=new Br(4);return Br!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function CU(r){var e=new Br(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function AU(r,e,t,n){var i=new Br(4);return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i}function TU(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function OU(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function kU(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r}function IU(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r}function LU(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r[3]=e[3]*t[3],r}function PU(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r[3]=e[3]/t[3],r}function fce(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r[3]=Math.ceil(e[3]),r}function cce(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r[3]=Math.floor(e[3]),r}function hce(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.min(e[3],t[3]),r}function dce(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r}function vce(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r[3]=Math.round(e[3]),r}function DU(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function pce(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r}function NU(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2],a=e[3]-r[3];return Math.hypot(t,n,i,a)}function RU(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2],a=e[3]-r[3];return t*t+n*n+i*i+a*a}function eI(r){var e=r[0],t=r[1],n=r[2],i=r[3];return Math.hypot(e,t,n,i)}function tI(r){var e=r[0],t=r[1],n=r[2],i=r[3];return e*e+t*t+n*n+i*i}function gce(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}function mce(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}function BU(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*t+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),r[0]=t*o,r[1]=n*o,r[2]=i*o,r[3]=a*o,r}function FU(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function yce(r,e,t,n){var i=t[0]*n[1]-t[1]*n[0],a=t[0]*n[2]-t[2]*n[0],o=t[0]*n[3]-t[3]*n[0],s=t[1]*n[2]-t[2]*n[1],l=t[1]*n[3]-t[3]*n[1],u=t[2]*n[3]-t[3]*n[2],f=e[0],c=e[1],h=e[2],d=e[3];return r[0]=c*u-h*l+d*s,r[1]=-(f*u)+h*o-d*a,r[2]=f*l-c*o+d*i,r[3]=-(f*s)+c*a-h*i,r}function $U(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=e[3];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r[2]=o+n*(t[2]-o),r[3]=s+n*(t[3]-s),r}function bce(r,e){e=e||1;var t,n,i,a,o,s;do t=Es()*2-1,n=Es()*2-1,o=t*t+n*n;while(o>=1);do i=Es()*2-1,a=Es()*2-1,s=i*i+a*a;while(s>=1);var l=Math.sqrt((1-o)/s);return r[0]=e*t,r[1]=e*n,r[2]=e*i*l,r[3]=e*a*l,r}function xce(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3];return r[0]=t[0]*n+t[4]*i+t[8]*a+t[12]*o,r[1]=t[1]*n+t[5]*i+t[9]*a+t[13]*o,r[2]=t[2]*n+t[6]*i+t[10]*a+t[14]*o,r[3]=t[3]*n+t[7]*i+t[11]*a+t[15]*o,r}function wce(r,e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2],u=t[3],f=u*n+s*a-l*i,c=u*i+l*n-o*a,h=u*a+o*i-s*n,d=-o*n-s*i-l*a;return r[0]=f*u+d*-o+c*-l-h*-s,r[1]=c*u+d*-s+h*-o-f*-l,r[2]=h*u+d*-l+f*-s-c*-o,r[3]=e[3],r}function Ece(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}function _ce(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function zU(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function GU(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(t-o)<=Ht*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-s)<=Ht*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Ht*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Ht*Math.max(1,Math.abs(a),Math.abs(u))}var Sce=IU,Mce=LU,Cce=PU,Ace=NU,Tce=RU,Oce=eI,kce=tI,Ice=function(){var r=MU();return function(e,t,n,i,a,o){var s,l;for(t||(t=4),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],r[3]=e[s+3],a(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2],e[s+3]=r[3];return e}}();const Lce=Object.freeze(Object.defineProperty({__proto__:null,add:kU,ceil:fce,clone:CU,copy:TU,create:MU,cross:yce,dist:Ace,distance:NU,div:Cce,divide:PU,dot:FU,equals:GU,exactEquals:zU,floor:cce,forEach:Ice,fromValues:AU,inverse:mce,len:Oce,length:eI,lerp:$U,max:dce,min:hce,mul:Mce,multiply:LU,negate:gce,normalize:BU,random:bce,round:vce,scale:DU,scaleAndAdd:pce,set:OU,sqrDist:Tce,sqrLen:kce,squaredDistance:RU,squaredLength:tI,str:_ce,sub:Sce,subtract:IU,transformMat4:xce,transformQuat:wce,zero:Ece},Symbol.toStringTag,{value:"Module"}));function qx(){var r=new Br(4);return Br!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function Pce(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function jU(r,e,t){t=t*.5;var n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function Dce(r,e){var t=Math.acos(e[3])*2,n=Math.sin(t/2);return n>Ht?(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n):(r[0]=1,r[1]=0,r[2]=0),t}function Nce(r,e){var t=nI(r,e);return Math.acos(2*t*t-1)}function UU(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],f=t[3];return r[0]=n*f+o*s+i*u-a*l,r[1]=i*f+o*l+a*s-n*u,r[2]=a*f+o*u+n*l-i*s,r[3]=o*f-n*s-i*l-a*u,r}function WU(r,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l+o*s,r[1]=i*l+a*s,r[2]=a*l-i*s,r[3]=o*l-n*s,r}function VU(r,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l-a*s,r[1]=i*l+o*s,r[2]=a*l+n*s,r[3]=o*l-i*s,r}function HU(r,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(t),l=Math.cos(t);return r[0]=n*l+i*s,r[1]=i*l-n*s,r[2]=a*l+o*s,r[3]=o*l-a*s,r}function Rce(r,e){var t=e[0],n=e[1],i=e[2];return r[0]=t,r[1]=n,r[2]=i,r[3]=Math.sqrt(Math.abs(1-t*t-n*n-i*i)),r}function XU(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(t*t+n*n+i*i),s=Math.exp(a),l=o>0?s*Math.sin(o)/o:0;return r[0]=t*l,r[1]=n*l,r[2]=i*l,r[3]=s*Math.cos(o),r}function YU(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(t*t+n*n+i*i),s=o>0?Math.atan2(o,a)/o:0;return r[0]=t*s,r[1]=n*s,r[2]=i*s,r[3]=.5*Math.log(t*t+n*n+i*i+a*a),r}function Bce(r,e,t){return YU(r,e),qU(r,r,t),XU(r,r),r}function Kb(r,e,t,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=t[0],u=t[1],f=t[2],c=t[3],h,d,v,p,g;return d=i*l+a*u+o*f+s*c,d<0&&(d=-d,l=-l,u=-u,f=-f,c=-c),1-d>Ht?(h=Math.acos(d),v=Math.sin(h),p=Math.sin((1-n)*h)/v,g=Math.sin(n*h)/v):(p=1-n,g=n),r[0]=p*i+g*l,r[1]=p*a+g*u,r[2]=p*o+g*f,r[3]=p*s+g*c,r}function Fce(r){var e=Es(),t=Es(),n=Es(),i=Math.sqrt(1-e),a=Math.sqrt(e);return r[0]=i*Math.sin(2*Math.PI*t),r[1]=i*Math.cos(2*Math.PI*t),r[2]=a*Math.sin(2*Math.PI*n),r[3]=a*Math.cos(2*Math.PI*n),r}function $ce(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=t*t+n*n+i*i+a*a,s=o?1/o:0;return r[0]=-t*s,r[1]=-n*s,r[2]=-i*s,r[3]=a*s,r}function zce(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function KU(r,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),r[i]=.5*n,n=.5/n,r[3]=(e[a*3+o]-e[o*3+a])*n,r[a]=(e[a*3+i]+e[i*3+a])*n,r[o]=(e[o*3+i]+e[i*3+o])*n}return r}function Gce(r,e,t,n){var i=.5*Math.PI/180;e*=i,t*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(t),l=Math.cos(t),u=Math.sin(n),f=Math.cos(n);return r[0]=a*l*f-o*s*u,r[1]=o*s*f+a*l*u,r[2]=o*l*u-a*s*f,r[3]=o*l*f+a*s*u,r}function jce(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var Uce=CU,Wce=AU,rI=TU,Vce=OU,Hce=kU,Xce=UU,qU=DU,nI=FU,Yce=$U,iI=eI,Kce=iI,aI=tI,qce=aI,oI=BU,Zce=zU,Qce=GU,Jce=function(){var r=Qk(),e=dA(1,0,0),t=dA(0,1,0);return function(n,i,a){var o=Jk(i,a);return o<-.999999?(Yb(r,e,i),SU(r)<1e-6&&Yb(r,t,i),_U(r,r),jU(n,r,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Yb(r,i,a),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+o,oI(n,n))}}(),ehe=function(){var r=qx(),e=qx();return function(t,n,i,a,o,s){return Kb(r,n,o,s),Kb(e,i,a,s),Kb(t,r,e,2*s*(1-s)),t}}(),the=function(){var r=iU();return function(e,t,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],oI(e,KU(e,r))}}();const rhe=Object.freeze(Object.defineProperty({__proto__:null,add:Hce,calculateW:Rce,clone:Uce,conjugate:zce,copy:rI,create:qx,dot:nI,equals:Qce,exactEquals:Zce,exp:XU,fromEuler:Gce,fromMat3:KU,fromValues:Wce,getAngle:Nce,getAxisAngle:Dce,identity:Pce,invert:$ce,len:Kce,length:iI,lerp:Yce,ln:YU,mul:Xce,multiply:UU,normalize:oI,pow:Bce,random:Fce,rotateX:WU,rotateY:VU,rotateZ:HU,rotationTo:Jce,scale:qU,set:Vce,setAxes:the,setAxisAngle:jU,slerp:Kb,sqlerp:ehe,sqrLen:qce,squaredLength:aI,str:jce},Symbol.toStringTag,{value:"Module"}));function nhe(){var r=new Br(8);return Br!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function ihe(r){var e=new Br(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function ahe(r,e,t,n,i,a,o,s){var l=new Br(8);return l[0]=r,l[1]=e,l[2]=t,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l}function ohe(r,e,t,n,i,a,o){var s=new Br(8);s[0]=r,s[1]=e,s[2]=t,s[3]=n;var l=i*.5,u=a*.5,f=o*.5;return s[4]=l*n+u*t-f*e,s[5]=u*n+f*r-l*t,s[6]=f*n+l*e-u*r,s[7]=-l*r-u*e-f*t,s}function ZU(r,e,t){var n=t[0]*.5,i=t[1]*.5,a=t[2]*.5,o=e[0],s=e[1],l=e[2],u=e[3];return r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=n*u+i*l-a*s,r[5]=i*u+a*o-n*l,r[6]=a*u+n*s-i*o,r[7]=-n*o-i*s-a*l,r}function she(r,e){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0]*.5,r[5]=e[1]*.5,r[6]=e[2]*.5,r[7]=0,r}function lhe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function uhe(r,e){var t=qx();hU(t,e);var n=new Br(3);return fU(n,e),ZU(r,t,n),r}function QU(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r}function fhe(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function che(r,e,t,n,i,a,o,s,l){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r}var hhe=rI;function dhe(r,e){return r[0]=e[4],r[1]=e[5],r[2]=e[6],r[3]=e[7],r}var vhe=rI;function phe(r,e){return r[4]=e[0],r[5]=e[1],r[6]=e[2],r[7]=e[3],r}function ghe(r,e){var t=e[4],n=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],l=-e[2],u=e[3];return r[0]=(t*u+a*o+n*l-i*s)*2,r[1]=(n*u+a*s+i*o-t*l)*2,r[2]=(i*u+a*l+t*s-n*o)*2,r}function mhe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0]*.5,l=t[1]*.5,u=t[2]*.5,f=e[4],c=e[5],h=e[6],d=e[7];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=o*s+i*u-a*l+f,r[5]=o*l+a*s-n*u+c,r[6]=o*u+n*l-i*s+h,r[7]=-n*s-i*l-a*u+d,r}function yhe(r,e,t){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=s*o+f*n+l*a-u*i,h=l*o+f*i+u*n-s*a,d=u*o+f*a+s*i-l*n,v=f*o-s*n-l*i-u*a;return WU(r,e,t),n=r[0],i=r[1],a=r[2],o=r[3],r[4]=c*o+v*n+h*a-d*i,r[5]=h*o+v*i+d*n-c*a,r[6]=d*o+v*a+c*i-h*n,r[7]=v*o-c*n-h*i-d*a,r}function bhe(r,e,t){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=s*o+f*n+l*a-u*i,h=l*o+f*i+u*n-s*a,d=u*o+f*a+s*i-l*n,v=f*o-s*n-l*i-u*a;return VU(r,e,t),n=r[0],i=r[1],a=r[2],o=r[3],r[4]=c*o+v*n+h*a-d*i,r[5]=h*o+v*i+d*n-c*a,r[6]=d*o+v*a+c*i-h*n,r[7]=v*o-c*n-h*i-d*a,r}function xhe(r,e,t){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],f=e[7],c=s*o+f*n+l*a-u*i,h=l*o+f*i+u*n-s*a,d=u*o+f*a+s*i-l*n,v=f*o-s*n-l*i-u*a;return HU(r,e,t),n=r[0],i=r[1],a=r[2],o=r[3],r[4]=c*o+v*n+h*a-d*i,r[5]=h*o+v*i+d*n-c*a,r[6]=d*o+v*a+c*i-h*n,r[7]=v*o-c*n-h*i-d*a,r}function whe(r,e,t){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],f=e[3];return r[0]=s*o+f*n+l*a-u*i,r[1]=l*o+f*i+u*n-s*a,r[2]=u*o+f*a+s*i-l*n,r[3]=f*o-s*n-l*i-u*a,s=e[4],l=e[5],u=e[6],f=e[7],r[4]=s*o+f*n+l*a-u*i,r[5]=l*o+f*i+u*n-s*a,r[6]=u*o+f*a+s*i-l*n,r[7]=f*o-s*n-l*i-u*a,r}function Ehe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],f=t[3];return r[0]=n*f+o*s+i*u-a*l,r[1]=i*f+o*l+a*s-n*u,r[2]=a*f+o*u+n*l-i*s,r[3]=o*f-n*s-i*l-a*u,s=t[4],l=t[5],u=t[6],f=t[7],r[4]=n*f+o*s+i*u-a*l,r[5]=i*f+o*l+a*s-n*u,r[6]=a*f+o*u+n*l-i*s,r[7]=o*f-n*s-i*l-a*u,r}function _he(r,e,t,n){if(Math.abs(n)<Ht)return QU(r,e);var i=Math.hypot(t[0],t[1],t[2]);n=n*.5;var a=Math.sin(n),o=a*t[0]/i,s=a*t[1]/i,l=a*t[2]/i,u=Math.cos(n),f=e[0],c=e[1],h=e[2],d=e[3];r[0]=f*u+d*o+c*l-h*s,r[1]=c*u+d*s+h*o-f*l,r[2]=h*u+d*l+f*s-c*o,r[3]=d*u-f*o-c*s-h*l;var v=e[4],p=e[5],g=e[6],m=e[7];return r[4]=v*u+m*o+p*l-g*s,r[5]=p*u+m*s+g*o-v*l,r[6]=g*u+m*l+v*s-p*o,r[7]=m*u-v*o-p*s-g*l,r}function She(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r}function JU(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[4],l=t[5],u=t[6],f=t[7],c=e[4],h=e[5],d=e[6],v=e[7],p=t[0],g=t[1],m=t[2],b=t[3];return r[0]=n*b+o*p+i*m-a*g,r[1]=i*b+o*g+a*p-n*m,r[2]=a*b+o*m+n*g-i*p,r[3]=o*b-n*p-i*g-a*m,r[4]=n*f+o*s+i*u-a*l+c*b+v*p+h*m-d*g,r[5]=i*f+o*l+a*s-n*u+h*b+v*g+d*p-c*m,r[6]=a*f+o*u+n*l-i*s+d*b+v*m+c*g-h*p,r[7]=o*f-n*s-i*l-a*u+v*b-c*p-h*g-d*m,r}var Mhe=JU;function Che(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r}var e7=nI;function Ahe(r,e,t,n){var i=1-n;return e7(e,t)<0&&(n=-n),r[0]=e[0]*i+t[0]*n,r[1]=e[1]*i+t[1]*n,r[2]=e[2]*i+t[2]*n,r[3]=e[3]*i+t[3]*n,r[4]=e[4]*i+t[4]*n,r[5]=e[5]*i+t[5]*n,r[6]=e[6]*i+t[6]*n,r[7]=e[7]*i+t[7]*n,r}function The(r,e){var t=YE(e);return r[0]=-e[0]/t,r[1]=-e[1]/t,r[2]=-e[2]/t,r[3]=e[3]/t,r[4]=-e[4]/t,r[5]=-e[5]/t,r[6]=-e[6]/t,r[7]=e[7]/t,r}function Ohe(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=e[7],r}var t7=iI,khe=t7,YE=aI,Ihe=YE;function Lhe(r,e){var t=YE(e);if(t>0){t=Math.sqrt(t);var n=e[0]/t,i=e[1]/t,a=e[2]/t,o=e[3]/t,s=e[4],l=e[5],u=e[6],f=e[7],c=n*s+i*l+a*u+o*f;r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=(s-n*c)/t,r[5]=(l-i*c)/t,r[6]=(u-a*c)/t,r[7]=(f-o*c)/t}return r}function Phe(r){return"quat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+")"}function Dhe(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]}function Nhe(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],f=e[0],c=e[1],h=e[2],d=e[3],v=e[4],p=e[5],g=e[6],m=e[7];return Math.abs(t-f)<=Ht*Math.max(1,Math.abs(t),Math.abs(f))&&Math.abs(n-c)<=Ht*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-h)<=Ht*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=Ht*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-v)<=Ht*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-p)<=Ht*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-g)<=Ht*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-m)<=Ht*Math.max(1,Math.abs(u),Math.abs(m))}const Rhe=Object.freeze(Object.defineProperty({__proto__:null,add:She,clone:ihe,conjugate:Ohe,copy:QU,create:nhe,dot:e7,equals:Nhe,exactEquals:Dhe,fromMat4:uhe,fromRotation:lhe,fromRotationTranslation:ZU,fromRotationTranslationValues:ohe,fromTranslation:she,fromValues:ahe,getDual:dhe,getReal:hhe,getTranslation:ghe,identity:fhe,invert:The,len:khe,length:t7,lerp:Ahe,mul:Mhe,multiply:JU,normalize:Lhe,rotateAroundAxis:_he,rotateByQuatAppend:whe,rotateByQuatPrepend:Ehe,rotateX:yhe,rotateY:bhe,rotateZ:xhe,scale:Che,set:che,setDual:phe,setReal:vhe,sqrLen:Ihe,squaredLength:YE,str:Phe,translate:mhe},Symbol.toStringTag,{value:"Module"}));function r7(){var r=new Br(2);return Br!=Float32Array&&(r[0]=0,r[1]=0),r}function Bhe(r){var e=new Br(2);return e[0]=r[0],e[1]=r[1],e}function Fhe(r,e){var t=new Br(2);return t[0]=r,t[1]=e,t}function $he(r,e){return r[0]=e[0],r[1]=e[1],r}function zhe(r,e,t){return r[0]=e,r[1]=t,r}function ji(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function n7(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function i7(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r}function a7(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r}function Ghe(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r}function jhe(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r}function pf(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function gf(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}function Uhe(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r}function ha(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function Whe(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r}function Zx(r,e){var t=e[0]-r[0],n=e[1]-r[1];return Math.hypot(t,n)}function o7(r,e){var t=e[0]-r[0],n=e[1]-r[1];return t*t+n*n}function s7(r){var e=r[0],t=r[1];return Math.hypot(e,t)}function l7(r){var e=r[0],t=r[1];return e*e+t*t}function Vhe(r,e){return r[0]=-e[0],r[1]=-e[1],r}function Hhe(r,e){return r[0]=1/e[0],r[1]=1/e[1],r}function Wf(r,e){var t=e[0],n=e[1],i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r}function sI(r,e){return r[0]*e[0]+r[1]*e[1]}function Xhe(r,e,t){var n=e[0]*t[1]-e[1]*t[0];return r[0]=r[1]=0,r[2]=n,r}function Yhe(r,e,t,n){var i=e[0],a=e[1];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r}function Khe(r,e){e=e||1;var t=Es()*2*Math.PI;return r[0]=Math.cos(t)*e,r[1]=Math.sin(t)*e,r}function qhe(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[2]*i,r[1]=t[1]*n+t[3]*i,r}function Zhe(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[2]*i+t[4],r[1]=t[1]*n+t[3]*i+t[5],r}function Qhe(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r}function Jhe(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[4]*i+t[12],r[1]=t[1]*n+t[5]*i+t[13],r}function ede(r,e,t,n){var i=e[0]-t[0],a=e[1]-t[1],o=Math.sin(n),s=Math.cos(n);return r[0]=i*s-a*o+t[0],r[1]=i*o+a*s+t[1],r}function u7(r,e){var t=r[0],n=r[1],i=e[0],a=e[1],o=Math.sqrt(t*t+n*n)*Math.sqrt(i*i+a*a),s=o&&(t*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function tde(r){return r[0]=0,r[1]=0,r}function rde(r){return"vec2("+r[0]+", "+r[1]+")"}function lI(r,e){return r[0]===e[0]&&r[1]===e[1]}function nde(r,e){var t=r[0],n=r[1],i=e[0],a=e[1];return Math.abs(t-i)<=Ht*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(n-a)<=Ht*Math.max(1,Math.abs(n),Math.abs(a))}var ide=s7,qb=n7,ade=i7,ode=a7,sde=Zx,lde=o7,ude=l7,fde=function(){var r=r7();return function(e,t,n,i,a,o){var s,l;for(t||(t=2),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],a(r,r,o),e[s]=r[0],e[s+1]=r[1];return e}}();const cde=Object.freeze(Object.defineProperty({__proto__:null,add:ji,angle:u7,ceil:Ghe,clone:Bhe,copy:$he,create:r7,cross:Xhe,dist:sde,distance:Zx,div:ode,divide:a7,dot:sI,equals:nde,exactEquals:lI,floor:jhe,forEach:fde,fromValues:Fhe,inverse:Hhe,len:ide,length:s7,lerp:Yhe,max:gf,min:pf,mul:ade,multiply:i7,negate:Vhe,normalize:Wf,random:Khe,rotate:ede,round:Uhe,scale:ha,scaleAndAdd:Whe,set:zhe,sqrDist:lde,sqrLen:ude,squaredDistance:o7,squaredLength:l7,str:rde,sub:qb,subtract:n7,transformMat2:qhe,transformMat2d:Zhe,transformMat3:Qhe,transformMat4:Jhe,zero:tde},Symbol.toStringTag,{value:"Module"})),hde=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:ble,mat2:Wle,mat2d:vue,mat3:oU,mat4:Tfe,quat:rhe,quat2:Rhe,vec2:cde,vec3:uce,vec4:Lce},Symbol.toStringTag,{value:"Module"}));function dde(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Kk(n,t),$l(r,n,e)}function vde(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return qk(n,t),$l(r,n,e)}function pde(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Zk(n,t),$l(r,n,e)}function gde(r,e,t){return $l(r,t,e)}function as(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":dde(t,t,[a[1],a[2]]);break;case"s":pde(t,t,[a[1],a[2]]);break;case"r":vde(t,t,a[1]);break;case"m":gde(t,t,a[1]);break}}return t}var zh=function(e,t){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,f=o[l],c=o[u];!f&&f!==0||!c&&c!==0||(a[f][c]=1,t||(a[c][f]=1))}),a},mde=function(e,t){return e===t},p3=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}(),f7=function(){function r(e){e===void 0&&(e=mde),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new p3(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new p3(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),yde=function(){function r(){this.linkedList=new f7}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}(),xo=function(e,t,n){t===void 0&&(t=[]);var i=t.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)},bde=function(e,t){return t.filter(function(n){return n.source===e})},Zb=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})},c7=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};function xde(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}var h7=function(e,t,n,i){i===void 0&&(i=!0);var a=xde(n),o=new yde,s=e.edges,l=s===void 0?[]:s;o.enqueue(t);for(var u="",f=function(){var h=o.dequeue();a.enter({current:h,previous:u}),xo(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)f()},wde=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(v){l.push(v),s[v.id]=!0;for(var p=xo(v.id,a),g=function(y){var x=p[y];if(!s[x]){var w=n.filter(function(E){return E.id===x});w.length>0&&d(w[0])}},m=0;m<p.length;++m)g(m)},f=0;f<n.length;f++){var c=n[f];if(!s[c.id]){u(c);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o},d7=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},f=[],c=0,h=function g(m){l[m.id]=c,u[m.id]=c,c+=1,o.push(m),s[m.id]=!0;for(var b=xo(m.id,a,"target").filter(function(_){return n.map(function(S){return S.id}).indexOf(_)>-1}),y=function(S){var C=b[S];if(!l[C]&&l[C]!==0){var M=n.filter(function(T){return T.id===C});M.length>0&&g(M[0]),u[m.id]=Math.min(u[m.id],u[C])}else s[C]&&(u[m.id]=Math.min(u[m.id],l[C]))},x=0;x<b.length;x++)y(x);if(u[m.id]===l[m.id]){for(var w=[];o.length>0;){var E=o.pop();if(s[E.id]=!1,w.push(E),E===m)break}w.length>0&&f.push(w)}},d=0,v=n;d<v.length;d++){var p=v[d];!l[p.id]&&l[p.id]!==0&&h(p)}return f};function uI(r,e){return e?d7(r):wde(r)}var Iu=function(e){var t={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},v7=function(e,t){var n=Iu(e);return n[t]?Iu(e)[t].inDegree:0},p7=function(e,t){var n=Iu(e);return n[t]?Iu(e)[t].outDegree:0};function Ede(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}function g7(r,e,t,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:t});var a=r.edges,o=a===void 0?[]:a;xo(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:t,current:e,next:s})&&g7(r,s,e,n,i)}),n.leave({current:e,previous:t})}function fI(r,e,t,n){n===void 0&&(n=!0),g7(r,e,"",Ede(t),n)}var cI=function(e){var t=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(c){o[c.id]=c});for(var u={enter:function(h){var d=h.current,v=h.previous;if(s[d]){t={};for(var p=d,g=v;g!==d;)t[p]=g,p=g,g=a[g];t[p]=g}else s[d]=d,delete o[d],a[d]=v},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return t?!1:!l[d]}};Object.keys(o).length;){var f=Object.keys(o)[0];fI(e,f,u)}return t},hI=function(e,t,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=uI(e,!1),l=0,u=s;l<u.length;l++){var f=u[l];if(f.length)for(var c=f[0],h=c.id,d=[c],v=(i={},i[h]=c,i),p=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,b=xo(m,e.edges),y=function(E){var _,S=b[E],C=e.nodes.find(function(N){return N.id===S});if(S===m)o.push((_={},_[S]=g,_));else if(!(S in p))v[S]=g,d.push(C),p[S]=new Set([g]);else if(!p[m].has(C)){for(var M=!0,T=[C,g],A=v[m];p[S].size&&!p[S].has(A)&&(T.push(A),A!==v[A.id]);)A=v[A.id];if(T.push(A),t&&n?(M=!1,T.findIndex(function(N){return t.indexOf(N.id)>-1})>-1&&(M=!0)):t&&!n&&T.findIndex(function(N){return t.indexOf(N.id)>-1})>-1&&(M=!1),M){for(var O={},L=1;L<T.length;L+=1)O[T[L-1].id]=T[L];T.length&&(O[T[T.length-1].id]=T[0]),o.push(O)}p[S].add(g)}},x=0;x<b.length;x+=1)y(x)}return o},dI=function(e,t,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},f=function(A){for(var O=[A];O.length>0;){var L=O.pop();a.has(L)&&(a.delete(L),o[L.id].forEach(function(N){O.push(N)}),o[L.id].clear())}},c=function T(A,O,L){var N=!1;if(t&&n===!1&&t.indexOf(A.id)>-1)return N;i.push(A),a.add(A);for(var P=L[A.id],R=0;R<P.length;R+=1){var G=l[P[R]];if(G===O){for(var D={},B=1;B<i.length;B+=1)D[i[B-1].id]=i[B];i.length&&(D[i[i.length-1].id]=i[0]),s.push(D),N=!0}else a.has(G)||T(G,O,L)&&(N=!0)}if(N)f(A);else for(var R=0;R<P.length;R+=1){var G=l[P[R]];o[G.id].has(A)||o[G.id].add(A)}return i.pop(),N},h=e.nodes,d=h===void 0?[]:h,v=0;v<d.length;v+=1){var p=d[v],g=p.id;u[g]=v,l[v]=p}if(t&&n)for(var m=function(A){var O=t[A];u[d[A].id]=u[O],u[O]=0,l[0]=d.find(function(L){return L.id===O}),l[u[d[A].id]]=d[A]},v=0;v<t.length;v++)m(v);for(var b=function(A){for(var O,L,N=1/0,P=0;P<A.length;P+=1)for(var R=A[P],G=0;G<R.length;G++){var D=u[R[G].id];D<N&&(N=D,L=P)}for(var B=A[L],Y=[],P=0;P<B.length;P+=1){var ee=B[P];Y[ee.id]=[];for(var ne=0,Q=xo(ee.id,e.edges,"target").filter(function(Fe){return B.map(function(_e){return _e.id}).indexOf(Fe)>-1});ne<Q.length;ne++){var ye=Q[ne];ye===ee.id&&!(n===!1&&t.indexOf(ee.id)>-1)?s.push((O={},O[ee.id]=ee,O)):Y[ee.id].push(u[ye])}}return{component:B,adjList:Y,minIdx:N}},y=0;y<d.length;){var x=d.filter(function(T){return u[T.id]>=y}),w=d7({nodes:x,edges:e.edges}).filter(function(T){return T.length>1});if(w.length===0)break;var E=b(w),_=E.minIdx,S=E.adjList,C=E.component;if(C.length>1){C.forEach(function(T){o[T.id]=new Set});var M=l[_];if(t&&n&&t.indexOf(M.id)===-1)return s;c(M,M,S),y=_+1}else break}return s},m7=function(e,t,n,i){return i===void 0&&(i=!0),t?dI(e,n,i):hI(e,n,i)},_de=function(e,t,n){for(var i=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=t[o])}return a},P0=function(e,t,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},f={},c={};o.forEach(function(b,y){var x=b.id;f[x]=1/0,x===t&&(f[x]=0)});for(var h=o.length,d=function(y){var x=_de(f,o,u),w=x.id;if(u[w]=!0,f[w]===1/0)return"continue";var E=[];n?E=bde(w,l):E=Zb(w,l),E.forEach(function(_){var S=_.target,C=_.source,M=S===w?C:S,T=i&&_[i]?_[i]:1;f[M]>f[x.id]+T?(f[M]=f[x.id]+T,c[M]=[x.id]):f[M]===f[x.id]+T&&c[M].push(x.id)})},v=0;v<h;v++)d();c[t]=[t];var p={};for(var g in f)f[g]!==1/0&&y7(t,g,c,p);var m={};for(var g in p)m[g]=p[g][0];return{length:f,path:m,allPath:p}};function y7(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],a=0,o=t[e];a<o.length;a++){var s=o[a],l=y7(r,s,t,n);if(!l)return;for(var u=0,f=l;u<f.length;u++){var c=f[u];Ft(c)?i.push(So(So([],c,!0),[e],!1)):i.push([c,e])}}return n[e]=i,n[e]}var b7=function(e,t,n,i,a){var o=P0(e,t,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}},x7=function(e,t,n,i){var a;if(t===n)return[[t]];var o=e.edges,s=o===void 0?[]:o,l=[t],u=(a={},a[t]=!0,a),f=[],c=[],h=i?xo(t,s,"target"):xo(t,s);for(f.push(h);l.length>0&&f.length>0;){var d=f[f.length-1];if(d.length){var v=d.shift();v&&(l.push(v),u[v]=!0,h=i?xo(v,s,"target"):xo(v,s),f.push(h.filter(function(m){return!u[m]})))}else{var p=l.pop();u[p]=!1,f.pop();continue}if(l[l.length-1]===n){var g=l.map(function(b){return b});c.push(g);var p=l.pop();u[p]=!1,f.pop()}}return c},D0=function(e,t){for(var n=zh(e,t),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},w7=function(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},f={};o.forEach(function(y,x){var w=c7();y.clusterId=w,u[w]={id:w,nodes:[y]},f[y.id]={node:y,idx:x}});var c=zh(e,t),h={};c.forEach(function(y,x){var w=o[x].id;h[w]={},y.forEach(function(E,_){if(E){var S=o[_].id;h[w][S]=E}})});for(var d=0,v=function(){var x=!1;if(o.forEach(function(w){var E={};Object.keys(h[w.id]).forEach(function(L){var N=h[w.id][L],P=f[L].node,R=P.clusterId;E[R]||(E[R]=0),E[R]+=N});var _=-1/0,S=[];if(Object.keys(E).forEach(function(L){_<E[L]?(_=E[L],S=[L]):_===E[L]&&S.push(L)}),!(S.length===1&&S[0]===w.clusterId)){var C=S.indexOf(w.clusterId);if(C>=0&&S.splice(C,1),S&&S.length){x=!0;var M=u[w.clusterId],T=M.nodes.indexOf(w);M.nodes.splice(T,1);var A=Math.floor(Math.random()*S.length),O=u[S[A]];O.nodes.push(w),w.clusterId=O.id}}}),!x)return"break";d++};d<i;){var p=v();if(p==="break")break}Object.keys(u).forEach(function(y){var x=u[y];(!x.nodes||!x.nodes.length)&&delete u[y]});var g=[],m={};l.forEach(function(y){var x=y.source,w=y.target,E=y[n]||1,_=f[x].node.clusterId,S=f[w].node.clusterId,C="".concat(_,"---").concat(S);if(m[C])m[C].weight+=E,m[C].count++;else{var M={source:_,target:S,weight:E,count:1};m[C]=M,g.push(M)}});var b=[];return Object.keys(u).forEach(function(y){b.push(u[y])}),{clusters:b,clusterEdges:g}},Uo=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(e){var t=[];if(e!==0)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=Tr(this.arr);t.sort(function(o,s){return o-s});var n=t[t.length-1],i=t[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new r(e)},r.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r}(),vI=function(e,t){t===void 0&&(t=void 0);var n=[];return e.forEach(function(i){t===void 0&&n.push(i),i[t]!==void 0&&n.push(i[t])}),n},xs;(function(r){r.EuclideanDistance="euclideanDistance"})(xs||(xs={}));var Sde=function(e,t,n){var i=[];t!=null&&t.length?i=t:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=I0(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=I0(s))}),a},pI=function(e,t,n){var i=Sde(e,t,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var f=[];Object.keys(i).forEach(function(c){var h=l[c],d=i[c],v=d.findIndex(function(m){return h===m}),p=[];if(s)p.push(h);else for(var g=0;g<d.length;g++)g===v?p.push(1):p.push(0);f=f.concat(p)}),a[u]=f}),a},g3=function(e,t,n,i){n===void 0&&(n=xs.EuclideanDistance);var a=0;switch(n){case xs.EuclideanDistance:a=new Uo(e).euclideanDistance(new Uo(t));break}return a},m3=function(e,t,n,i){for(var a=t.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,f=0;f<a;f++){var c=e[f].clusterId;if(u===c){var h=t[l][f]||0,d=n[l]||0,v=n[f]||0;s+=h-d*v/o}}return s*=1/o,s},GS=function(e,t){e===void 0&&(e=[]);for(var n=e.length,i=new Uo([]),a=0;a<n;a++)i=i.add(new Uo(t[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Uo(t[a]),u=l.squareEuclideanDistance(o);s+=u}var f=[];e.forEach(function(){f.push([])});for(var a=0;a<n;a++){var l=new Uo(t[a]);e[a].clusterInertial=0;for(var c=0;c<n;c++){if(a===c){f[a][c]=0;continue}var h=new Uo(t[c]);f[a][c]=l.squareEuclideanDistance(h),e[a].clusterInertial+=f[a][c]}}for(var d=0,v=2*n*s,a=0;a<n;a++)for(var p=e[a].clusterId,c=0;c<n;c++){var g=e[c].clusterId;if(!(a===c||p!==g)){var m=e[a].clusterInertial*e[c].clusterInertial/Math.pow(v,2)-f[a][c]/v;d+=m}}return Number(d.toFixed(4))},gI=function(e,t,n,i,a,o,s,l,u){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var f=e.nodes,c=f===void 0?[]:f,h=e.edges,d=h===void 0?[]:h,v=[];if(a){c.forEach(function(D,B){D.properties=D.properties||{},D.originIndex=B});var p=[];c.every(function(D){return D.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(c.map(function(D){return D.nodeType}))),c.forEach(function(D){D.properties.nodeType=p.findIndex(function(B){return B===D.nodeType})}));var g=vI(c,o);v=pI(g,s,l)}var m=1,b={},y={};c.forEach(function(D,B){var Y=String(m++);D.clusterId=Y,b[Y]={id:Y,nodes:[D]},y[D.id]={node:D,idx:B}});var x=zh(e,t),w=[],E={},_=0;x.forEach(function(D,B){var Y=0,ee=c[B].id;E[ee]={},D.forEach(function(ne,Q){if(ne){Y+=ne;var ye=c[Q].id;E[ee][ye]=ne,_+=ne}}),w.push(Y)}),_/=2;for(var S=1/0,C=1/0,M=0,T=[],A={};;){a&&c.every(function(D){return D.hasOwnProperty("properties")})?S=m3(c,x,w,_)+GS(c,v)*u:S=m3(c,x,w,_),M===0&&(C=S,T=c,A=b);var O=S>0&&S>C&&S-C<i;if(S>C&&(T=c.map(function(D){return{node:D,clusterId:D.clusterId}}),A=Tr(b),C=S),O||M>100)break;M++,Object.keys(b).forEach(function(D){var B=0;d.forEach(function(Y){var ee=Y.source,ne=Y.target,Q=y[ee].node.clusterId,ye=y[ne].node.clusterId;(Q===D&&ye!==D||ye===D&&Q!==D)&&(B=B+(Y[n]||1))}),b[D].sumTot=B}),c.forEach(function(D,B){var Y=b[D.clusterId],ee=0,ne,Q=w[B]/(2*_),ye=0,Le=Y.nodes;Le.forEach(function(de){var Be=y[de.id].idx;ye+=x[B][Be]||0});var Fe=ye-Y.sumTot*Q,_e=Le.filter(function(de){return de.id!==D.id});_e.forEach(function(de,Be){v[de.originIndex]});var Ve=GS(_e,v)*u,Xe=E[D.id];if(Object.keys(Xe).forEach(function(de){var Be=y[de].node,Ie=Be.clusterId;if(Ie!==D.clusterId){var Pe=b[Ie],Ye=Pe.nodes;if(!(!Ye||!Ye.length)){var V=0;Ye.forEach(function(ce){var X=y[ce.id].idx;V+=x[B][X]||0});var z=V-Pe.sumTot*Q,F=Ye.concat([D]);F.forEach(function(ce,X){v[ce.originIndex]});var k=GS(F,v)*u,ue=z-Fe;a&&(ue=z+k-(Fe+Ve)),ue>ee&&(ee=ue,ne=Pe)}}}),ee>0){ne.nodes.push(D);var vt=D.clusterId;D.clusterId=ne.id;var bt=Y.nodes.indexOf(D);Y.nodes.splice(bt,1);var te=0,H=0;d.forEach(function(de){var Be=de.source,Ie=de.target,Pe=y[Be].node.clusterId,Ye=y[Ie].node.clusterId;(Pe===ne.id&&Ye!==ne.id||Ye===ne.id&&Pe!==ne.id)&&(te=te+(de[n]||1)),(Pe===vt&&Ye!==vt||Ye===vt&&Pe!==vt)&&(H=H+(de[n]||1))}),ne.sumTot=te,Y.sumTot=H}})}var L={},N=0;Object.keys(A).forEach(function(D){var B=A[D];if(!B.nodes||!B.nodes.length){delete A[D];return}var Y=String(N+1);Y!==D&&(B.id=Y,B.nodes=B.nodes.map(function(ee){return{id:ee.id,clusterId:Y}}),A[Y]=B,L[D]=Y,delete A[D],N++)}),T.forEach(function(D){var B=D.node,Y=D.clusterId;B&&(B.clusterId=Y,B.clusterId&&L[B.clusterId]&&(B.clusterId=L[B.clusterId]))});var P=[],R={};d.forEach(function(D){var B=D.source,Y=D.target,ee=D[n]||1,ne=y[B].node.clusterId,Q=y[Y].node.clusterId;if(!(!ne||!Q)){var ye="".concat(ne,"---").concat(Q);if(R[ye])R[ye].weight+=ee,R[ye].count++;else{var Le={source:ne,target:Q,weight:ee,count:1};R[ye]=Le,P.push(Le)}}});var G=[];return Object.keys(A).forEach(function(D){G.push(A[D])}),{clusters:G,clusterEdges:P}},E7=function(e,t,n,i,a,o,s,l){return t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),l===void 0&&(l=1),gI(e,t,n,i,!0,a,o,s,l)},_7=function(e,t){var n;t===void 0&&(t=1);for(var i=Tr(e),a=i.nodes,o=a===void 0?[]:a,s=i.edges,l=s===void 0?[]:s,u=function(){var h=Iu({nodes:o,edges:l}),d=Object.keys(h);d.sort(function(g,m){var b,y;return((b=h[g])===null||b===void 0?void 0:b.degree)-((y=h[m])===null||y===void 0?void 0:y.degree)});var v=d[0];if(!o.length||((n=h[v])===null||n===void 0?void 0:n.degree)>=t)return"break";var p=o.findIndex(function(g){return g.id===v});o.splice(p,1),l=l.filter(function(g){return!(g.source===v||g.target===v)})};;){var f=u();if(f==="break")break}return{nodes:o,edges:l}},y3=function(e,t,n){var i=[];switch(e){case xs.EuclideanDistance:i=t[n];break;default:i=[];break}return i},S7=function(e,t,n,i,a,o){t===void 0&&(t=3),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=["id"]),o===void 0&&(o=xs.EuclideanDistance);var s=e.nodes,l=s===void 0?[]:s,u=e.edges,f=u===void 0?[]:u,c={clusters:[{id:"0",nodes:l}],clusterEdges:[]};if(o===xs.EuclideanDistance&&!l.every(function(Y){return Y.hasOwnProperty(n)}))return c;var h=[],d=[];if(o===xs.EuclideanDistance&&(h=vI(l,n),d=pI(h,i,a)),!d.length)return c;for(var v=I0(d.map(function(Y){return Y.join("")})),p=Math.min(t,l.length,v.length),g=0;g<l.length;g++)l[g].originIndex=g;for(var m=[],b=[],y=[],g=0;g<p;g++)if(g===0){var x=Math.floor(Math.random()*l.length);switch(o){case xs.EuclideanDistance:m[g]=d[x];break;default:m[g]=[];break}b.push(x),y[g]=[l[x]],l[x].clusterId=String(g)}else{for(var w=-1/0,E=0,_=function(ne){if(!b.includes(ne)){for(var Q=0,ye=0;ye<m.length;ye++){var Le=0;switch(o){case xs.EuclideanDistance:Le=g3(d[l[ne].originIndex],m[ye],o);break}Q+=Le}var Fe=Q/m.length;Fe>w&&!m.find(function(_e){return qf(_e,y3(o,d,l[ne].originIndex))})&&(w=Fe,E=ne)}},S=0;S<l.length;S++)_(S);m[g]=y3(o,d,E),b.push(E),y[g]=[l[E]],l[E].clusterId=String(g)}for(var C=0;;){for(var g=0;g<l.length;g++){var M=0,T=1/0;if(!(C===0&&b.includes(g))){for(var A=0;A<m.length;A++){var O=0;switch(o){case xs.EuclideanDistance:O=g3(d[g],m[A],o);break}O<T&&(T=O,M=A)}if(l[g].clusterId!==void 0)for(var L=y[Number(l[g].clusterId)].length-1;L>=0;L--)y[Number(l[g].clusterId)][L].id===l[g].id&&y[Number(l[g].clusterId)].splice(L,1);l[g].clusterId=String(M),y[M].push(l[g])}}for(var N=!1,g=0;g<y.length;g++){for(var P=y[g],R=new Uo([]),A=0;A<P.length;A++)R=R.add(new Uo(d[P[A].originIndex]));var G=R.avg(P.length);G.equal(new Uo(m[g]))||(N=!0,m[g]=G.getArr())}if(C++,l.every(function(Y){return Y.clusterId!==void 0})&&N||C>=1e3)break}var D=[],B={};return f.forEach(function(Y){var ee,ne,Q=Y.source,ye=Y.target,Le=(ee=l.find(function(Xe){return Xe.id===Q}))===null||ee===void 0?void 0:ee.clusterId,Fe=(ne=l.find(function(Xe){return Xe.id===ye}))===null||ne===void 0?void 0:ne.clusterId,_e="".concat(Le,"---").concat(Fe);if(B[_e])B[_e].count++;else{var Ve={source:Le,target:Fe,count:1};B[_e]=Ve,D.push(Ve)}}),{clusters:y,clusterEdges:D}},mI=function(e,t){var n=new Uo(t),i=n.norm2(),a=new Uo(e),o=a.norm2(),s=n.dot(a),l=i*o,u=l?s/l:0;return u},M7=function(e,t,n,i,a){e===void 0&&(e=[]),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=[]);var o=Tr(e.filter(function(h){return h.id!==t.id})),s=e.findIndex(function(h){return h.id===t.id}),l=vI(e,n),u=pI(l,i,a),f=u[s],c=[];return o.forEach(function(h,d){if(h.id!==t.id){var v=u[d],p=mI(v,f);c.push(p),h.cosineSimilarity=p}}),o.sort(function(h,d){return d.cosineSimilarity-h.cosineSimilarity}),{allCosineSimilarity:c,similarNodes:o}},Mde=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var i=n[t];this.parent[i]=i}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),i=this.find(t);n!==i&&(n<i?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}(),Cde=function(e,t){return e-t},Ade=function(){function r(e){e===void 0&&(e=Cde),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},r}(),Tde=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var f=function(g,m){return t?g.weight-m.weight:0},c=new Ade(f);for(Zb(l.id,s).forEach(function(p){c.insert(p)});!c.isEmpty();){var h=c.delMin(),d=h.source,v=h.target;u.has(d)&&u.has(v)||(n.push(h),u.has(d)||(u.add(d),Zb(d,s).forEach(function(p){c.insert(p)})),u.has(v)||(u.add(v),Zb(v,s).forEach(function(p){c.insert(p)})))}return n},b3=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});t&&l.sort(function(d,v){return d.weight-v.weight});for(var u=new Mde(a.map(function(d){return d.id}));l.length>0;){var f=l.shift(),c=f.source,h=f.target;u.connected(c,h)||(n.push(f),u.union(c,h))}return n},C7=function(e,t,n){var i={prim:Tde,kruskal:b3};return n?i[n](e,t):b3(e,t)},A7=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,f=u===void 0?[]:u,c=l.length,h,d={},v={},p=0;p<c;++p){var g=l[p],m=g.id;d[m]=1/c,v[m]=1/c}for(var b=Iu(e);o>0&&i>t;){a=0;for(var p=0;p<c;++p){var g=l[p],m=g.id;if(h=0,b[g.id].inDegree===0)d[m]=0;else{for(var y=xo(m,f,"source"),x=0;x<y.length;++x){var w=y[x],E=b[w].outDegree;E>0&&(h+=v[w]/E)}d[m]=n*h,a+=d[m]}}a=(1-a)/c,i=0;for(var p=0;p<c;++p){var g=l[p],m=g.id;h=d[m]+a,i+=Math.abs(h-v[m]),v[m]=h}o-=1}return v},Ode=-1,Qx=-1,T7="-1",pl="-1",O7=-1,x3=function(){function r(e,t,n,i){e===void 0&&(e=Ode),t===void 0&&(t=Qx),n===void 0&&(n=Qx),i===void 0&&(i=T7),this.id=e,this.from=t,this.to=n,this.label=i}return r}(),kde=function(){function r(e,t){e===void 0&&(e=Qx),t===void 0&&(t=pl),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}(),k7=function(){function r(e,t,n){e===void 0&&(e=Qx),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new kde(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new x3(e,t,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new x3(e,n,t,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}(),Jc=function(){function r(e,t,n,i,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||pl,edgeLabel:i||T7,nodeLabel2:a||pl}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),w3=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var i=0;i<t;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,i,a){return this.dfsEdgeList.push(new Jc(e,t,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){e===void 0&&(e=O7),t===void 0&&(t=!1);var n=new k7(e,!0,t);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,f=s.nodeLabel2;l!==pl&&n.addNode(a,l),f!==pl&&n.addNode(o,f),l!==pl&&f!==l&&n.addEdge(void 0,a,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,n=t-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),u1=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},r.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},r}(),Ide=function(){function r(e){var t=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,f=u===void 0?10:u,c=e.directed,h=c===void 0?!1:c,d=e.verbose,v=d===void 0?!1:d;this.graphs=t,this.dfsCode=new w3,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=f,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,i=[],a=e.nodeMap;return t.edges.forEach(function(o){(n.directed||t.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(e,t,n,i){if(!this.directed&&t===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var f=s[u];if(!(i.hasEdge(f)||f.to!==t.from)){if(this.directed){if(a[t.from].label<a[n.to].label||a[t.from].label===a[n.to].label&&t.label<=f.label)return f}else if(t.label<f.label||t.label===f.label&&a[t.to].label<=a[n.to].label)return f}}return null},r.prototype.findForwardPureEdges=function(e,t,n,i){for(var a=[],o=t.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var f=s[u],c=e.nodeMap[f.to];n<=c.label&&!i.hasNode(c)&&a.push(f)}return a},r.prototype.findForwardRmpathEdges=function(e,t,n,i){for(var a=[],o=e.nodeMap,s=o[t.to].label,l=o[t.from],u=l.edges,f=u.length,c=0;c<f;c++){var h=u[c],d=o[h.to].label;t.to===h.to||n>d||i.hasNode(o[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&a.push(h)}return a},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var n=this.directed,i=t.toGraph(O7,n),a=i.nodeMap,o=new w3,s={};i.nodes.forEach(function(c){var h=e.findForwardRootEdges(i,c);h.forEach(function(d){var v=a[d.to],p="".concat(c.label,"-").concat(d.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:c.label,edgeLabel:d.label,nodeLabel2:v.label});var g={graphId:i.id,edge:d,preNode:null};s[p].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new Jc(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function c(h){for(var d=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[d[0]].toNode,g={},m=!1,b=0,y=n?-1:0,x=function(R){if(m)return"break";h.forEach(function(G){var D=new u1(G),B=e.findBackwardEdge(i,D.edges[d[R]],D.edges[d[0]],D);B&&(g[B.label]||(g[B.label]={projected:[],edgeLabel:B.label}),g[B.label].projected.push({graphId:i.id,edge:g,preNode:G}),b=o.dfsEdgeList[d[R]].fromNode,m=!0)})},w=d.length-1;w>y;w--){var E=x(w);if(E==="break")break}if(m){var _=e.findMinLabel(g);o.dfsEdgeList.push(new Jc(p,b,pl,_.edgeLabel,pl));var S=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[S]!==o.dfsEdgeList[S]?!1:c(g[_.edgeLabel].projected)}var C={};m=!1;var M=0;h.forEach(function(P){var R=new u1(P),G=e.findForwardPureEdges(i,R.edges[d[0]],v,R);G.length>0&&(m=!0,M=p,G.forEach(function(D){var B="".concat(D.label,"-").concat(a[D.to].label);C[B]||(C[B]={projected:[],edgeLabel:D.label,nodeLabel2:a[D.to].label}),C[B].projected.push({graphId:i.id,edge:D,preNode:P})}))});for(var T=d.length,A=function(R){if(m)return"break";var G=d[R];h.forEach(function(D){var B=new u1(D),Y=e.findForwardRmpathEdges(i,B.edges[G],v,B);Y.length>0&&(m=!0,M=o.dfsEdgeList[G].fromNode,Y.forEach(function(ee){var ne="".concat(ee.label,"-").concat(a[ee.to].label);C[ne]||(C[ne]={projected:[],edgeLabel:ee.label,nodeLabel2:a[ee.to].label}),C[ne].projected.push({graphId:i.id,edge:ee,preNode:D})}))})},w=0;w<T;w++){var O=A(w);if(O==="break")break}if(!m)return!0;var L=e.findMinLabel(C);o.dfsEdgeList.push(new Jc(M,p+1,pl,L.edgeLabel,L.nodeLabel2));var N=o.dfsEdgeList.length-1;return t.dfsEdgeList[N]!==o.dfsEdgeList[N]?!1:c(C["".concat(L.edgeLabel,"-").concat(L.nodeLabel2)].projected)},f="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[f].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Tr(e))}},r.prototype.subGraphMining=function(e){var t=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(f){for(var c=t.graphs[f.graphId],h=c.nodeMap,d=new u1(f),v=a.length-1;v>=0;v--){var p=t.findBackwardEdge(c,d.edges[a[v]],d.edges[a[0]],d);if(p){var g="".concat(t.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:f.graphId,edge:p,preNode:f})}}if(!(i>=t.maxNodeNum)){var m=t.findForwardPureEdges(c,d.edges[a[0]],s,d);m.forEach(function(y){var x="".concat(o,"-").concat(y.label,"-").concat(h[y.to].label);l[x]||(l[x]={projected:[],fromNodeId:o,edgeLabel:y.label,nodeLabel2:h[y.to].label}),l[x].projected.push({graphId:f.graphId,edge:y,preNode:f})});for(var b=function(x){var w=t.findForwardRmpathEdges(c,d.edges[a[x]],s,d);w.forEach(function(E){var _="".concat(t.dfsCode.dfsEdgeList[a[x]].fromNode,"-").concat(E.label,"-").concat(h[E.to].label);l[_]||(l[_]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[x]].fromNode,edgeLabel:E.label,nodeLabel2:h[E.to].label}),l[_].projected.push({graphId:f.graphId,edge:E,preNode:f})})},v=0;v<a.length;v++)b(v)}}),Object.keys(u).forEach(function(f){var c=u[f],h=c.toNodeId,d=c.edgeLabel;t.dfsCode.dfsEdgeList.push(new Jc(o,h,"-1",d,"-1")),t.subGraphMining(u[f].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(f){var c=l[f],h=c.fromNodeId,d=c.edgeLabel,v=c.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Jc(h,o+1,pl,d,v)),t.subGraphMining(l[f].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],f=u.nodeMap;u.nodes.forEach(function(c,h){var d=c.label,v="".concat(l,"-").concat(d);if(!s[v]){var p=a[d]||0;p++,a[d]=p}s[v]={graphKey:l,label:d},c.edges.forEach(function(g){var m=d,b=f[g.to].label;if(!t&&m>b){var y=b;b=m,m=y}var x=g.label,w="".concat(m,"-").concat(x,"-").concat(b);if(!o[w]){var E=o[w]||0;E++,o[w]=E}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:l}),i.push(f)}}),i},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(i){var a=t[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var f=o[u.to],c="".concat(s.label,"-").concat(u.label,"-").concat(f.label);n[c]||(n[c]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:f.label});var h={graphId:i,edge:u,preNode:null};n[c].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Jc(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},r}(),Lde=function(e,t,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new k7(s,!0,t),f={};l.nodes.forEach(function(c,h){u.addNode(h,c[n]),f[c.id]=h}),l.edges.forEach(function(c,h){var d=f[c.source],v=f[c.target];u.addEdge(-1,d,v,c[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},Pde=function(e,t,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[t]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},E3="cluster",Dde=function(e){var t=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?E3:a,s=e.edgeLabelProp,l=s===void 0?E3:s,u=Lde(t,i,o,l),f=e.minSupport,c=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,v=e.top,p={graphs:u,minSupport:f,maxNodeNum:c,minNodeNum:h,top:v,verbose:d,directed:i},g=new Ide(p);g.run();var m=Pde(g.frequentSubgraphs,o,l);return m},_3=function(e,t,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return t.forEach(function(s,l){a.push(I7(o,s,l,n,i))}),a},I7=function(e,t,n,i,a){var o=[n],s=[],l={};return t.forEach(function(u,f){if(u<=a&&n!==f){o.push(f),s.push(e[f]);var c=e[f][i];l[c]?(l[c].count++,l[c].dists.push(u)):l[c]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(f,c){return f-c})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},Nde=function(e,t,n,i,a){var o=Math.ceil(n/t),s={},l=0;return i.forEach(function(u,f){for(var c=0,h=0,d=u.nodeIdxs,v=u.neighborNum-1;c<o;){for(var p=d[1+Math.floor(Math.random()*v)],g=0;(s["".concat(f,"-").concat(p)]||s["".concat(p,"-").concat(f)])&&(p=Math.floor(Math.random()*t),g++,!(g>2*t)););if(g<2*t&&(s["".concat(f,"-").concat(p)]={start:f,end:p,distance:a[f][p]},c++,l++,l>=n))return s;if(h++,h>2*t)break}if(c<o){var m=o-c;o=(o+m)/(t-f-1)}}),s},Qb=function(e,t,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],f=(s=t[u.start])===null||s===void 0?void 0:s.nodeIdxs,c=(l=t[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!f||!c)){var h=new Set(c),d=f.filter(function(b){return h.has(b)});if(!(!d||!d.length)){for(var v={},p=d.length,g=0;g<p;g++){var m=a[d[g]];i[o].nodes.push(m),v[m.id]=!0}n.edges.forEach(function(b){v[b.source]&&v[b.target]&&i[o].edges.push(b)})}}}}),i},Jb=function(e,t,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var f=s[u.source][n],c=s[u.target][n],h=t==null?void 0:t.nodes[0][n],d=t==null?void 0:t.nodes[1][n],v=t==null?void 0:t.edges[0][i];u[i]===v&&(f===h&&c===d||f===d&&c===h)&&l++}),l)},Rde=function(e,t,n){for(var i=1/0,a=0,o=function(u){var f=e[u],c=Object.keys(f).sort(function(b,y){return f[b]-f[y]}),h=10,d=[];c.forEach(function(b,y){d[y%h]||(d[y%h]={graphs:[],totalCount:0,aveCount:0}),d[y%h].graphs.push(b),d[y%h].totalCount+=f[b]});var v=0,p=[];d.forEach(function(b){var y=b.totalCount/b.graphs.length;b.aveCount=y,p.push(y);var x=0,w=b.length;b.graphs.forEach(function(E,_){var S=f[E];b.graphs.forEach(function(C,M){_!==M&&(x+=Math.abs(S-f[C]))})}),x/=w*(w-1)/2,v+=x}),v/=d.length;var g=0;p.forEach(function(b,y){p.forEach(function(x,w){y!==w&&(g+=Math.abs(b-x))}),g/=p.length*(p.length-1)/2});var m=g-v;i<m&&(i=m,a=u)},s=0;s<t;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},S3=function(e,t){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},M3=function(e,t,n){var i={},a={};return e.forEach(function(o,s){i["".concat(c7)]={idx:s,edge:o};var l=o[t];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var f=n[o.target];f&&(f.degree++,f.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},C3=function(e,t,n){var i=t.length,a={};return t.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,f=l;f<i;f++)if(s!==f){var c=e[f].id,h=o[f];a["".concat(u,"-").concat(c)]=h,n||(a["".concat(c,"-").concat(u)]=h)}}),a},Bde=function(e,t,n,i,a,o,s,l,u,f,c){var h,d="".concat(t.id,"-").concat(n.id);if(f&&f[d])return f[d];var v=c?c[d]:void 0;if(!v){var p=(h={},h[d]={start:i[t.id].idx,end:i[n.id].idx,distance:a},h);c=Qb(p,o,e,c),v=c[d]}return Jb(v,s,l,u)},A3=function(e,t,n,i){var a,o,s,l=(a=e[t])===null||a===void 0?void 0:a.degree,u=(o=e[t])===null||o===void 0?void 0:o.inDegree,f=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(l=1/0,u=1/0,f=1/0,i[t].forEach(function(c){var h=n[c.id].degree;l>h&&(l=h);var d=n[c.id].inDegree;u>d&&(u=d);var v=n[c.id].outDegree;f>v&&(f=v)}),e[t]={degree:l,inDegree:u,outDegree:f}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:f}},L7=function(e,t,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var f=D0(e,n),c=D0(t,n),h=C3(e.nodes,f,n),d=C3(t.nodes,c,n),v=S3(e.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,m=S3(t.nodes,o),b=m.nodeMap,y=m.nodeLabelMap;M3(e.edges,s,p);var x=M3(t.edges,s,b).edgeLabelMap,w=[];c==null||c.forEach(function(z){w=w.concat(z)}),a||(a=Math.max.apply(Math,So(So([],w,!1),[2],!1))),i||(i=a);var E=_3(e,f,o,i),_=_3(t,c,o,i),S=Math.min(100,u*(u-1)/2),C=Nde(i,u,S,E,f),M=Qb(C,E,e),T=10,A=1,O=1,L=4,N={graphs:M,nodeLabelProp:o,edgeLabelProp:s,minSupport:A,minNodeNum:O,maxNodeNum:L,directed:n},P=Dde(N).slice(0,T),R=P.length,G=[];P.forEach(function(z,F){G[F]={},Object.keys(M).forEach(function(k){var ue=M[k],ce=Jb(ue,z,o,s);G[F][k]=ce})});var D=Rde(G,R,P),B=D.structure,Y=D.structureCountMap,ee=t.nodes[0],ne=[],Q=(l=t.nodes[0])===null||l===void 0?void 0:l[o],ye=-1/0;t.nodes.forEach(function(z){var F=z[o],k=g[F];(k==null?void 0:k.length)>ye&&(ye=k.length,ne=k,Q=F,ee=z)});var Le={},Fe={},_e={},Ve={},Xe={},vt={};Object.keys(y).forEach(function(z,F){Xe[z]=[],n&&(vt[z]=[]);var k=y[z],ue={};k.forEach(function(ke){var Ke=d["".concat(ee.id,"-").concat(ke.id)];if(Ke&&Xe[z].push(Ke),ue["".concat(ee.id,"-").concat(ke.id)]={start:0,end:b[ke.id].idx,distance:Ke},n){var Et=d["".concat(ke.id,"-").concat(ee.id)];Et&&vt[z].push(Et)}}),Xe[z]=Xe[z].sort(function(ke,Ke){return ke-Ke}),n&&(vt[z]=vt[z].sort(function(ke,Ke){return ke-Ke})),Fe=Qb(ue,_,t,Fe);var ce=[];if(Object.keys(ue).forEach(function(ke){if(_e[ke]){ce.push(_e[ke]);return}var Ke=Fe[ke];_e[ke]=Jb(Ke,B,o,s),ce.push(_e[ke])}),ce=ce.sort(function(ke,Ke){return Ke-ke}),Ve["".concat(ee.id,"-").concat(z)]=ce,z!==Q)for(var X=(ne==null?void 0:ne.length)||0,ae=function(Ke){var Et=ne[Ke],jt=E[p[Et.id].idx],kr=jt.nodeLabelCountMap[z],Qt=y[z].length;if(!kr||kr.count<Qt)return ne.splice(Ke,1),"continue";for(var zr=!1,lr=0;lr<Qt;lr++)if(kr.dists[lr]>Xe[z][lr]){zr=!0;break}if(zr)return ne.splice(Ke,1),"continue";var Lr={};jt.neighbors.forEach(function(Fr){var $n=h["".concat(Et.id,"-").concat(Fr.id)];Lr["".concat(Et.id,"-").concat(Fr.id)]={start:p[Et.id].idx,end:p[Fr.id].idx,distance:$n}}),M=Qb(Lr,E,e,M);var Zr=[];Object.keys(Lr).forEach(function(Fr){if(Y[Fr]){Zr.push(Y[Fr]);return}var $n=M[Fr];Y[Fr]=Jb($n,B,o,s),Zr.push(Y[Fr])}),Zr=Zr.sort(function(Fr,$n){return $n-Fr});for(var mi=!1,lr=0;lr<Qt;lr++)if(Zr[lr]<ce[lr]){mi=!0;break}if(mi)return ne.splice(Ke,1),"continue"},Ce=X-1;Ce>=0;Ce--)ae(Ce)});var bt=[];ne==null||ne.forEach(function(z){for(var F=p[z.id].idx,k=I7(e.nodes,f[F],F,o,a),ue=k.neighbors,ce=ue.length,X=!1,ae=ce-1;ae>=0;ae--){if(ue.length+1<t.nodes.length){X=!0;return}var Ce=ue[ae],ke=Ce[o];if(!y[ke]||!y[ke].length){ue.splice(ae,1);continue}if(!Xe[ke]||!Xe[ke].length){ue.splice(ae,1);continue}var Ke="".concat(z.id,"-").concat(Ce.id),Et=h[Ke],jt=Xe[ke].length-1,kr=Xe[ke][jt];if(Et>kr){ue.splice(ae,1);continue}if(n){var Qt="".concat(Ce.id,"-").concat(z.id),zr=h[Qt];jt=vt[ke].length-1;var lr=vt[ke][jt];if(zr>lr){ue.splice(ae,1);continue}}var Lr=Y[Ke]?Y[Ke]:Bde(e,z,Ce,p,Et,E,B,o,s,Y,M),Zr="".concat(ee.id,"-").concat(ke),mi=Ve[Zr][Ve[Zr].length-1];if(Lr<mi){ue.splice(ae,1);continue}var Fr=A3(Le,ke,b,y),$n=Fr.minPatternNodeLabelDegree;if(Fr.minPatternNodeLabelInDegree,Fr.minPatternNodeLabelOutDegree,p[Ce.id].degree<$n){ue.splice(ae,1);continue}}X||bt.push({nodes:[z].concat(ue)})});var te=P0(t,ee.id,!1).length,H={};n?(Object.keys(te).forEach(function(z){var F=b[z].node[o];H[F]?H[F].push(te[z]):H[F]=[te[z]]}),Object.keys(H).forEach(function(z){H[z].sort(function(F,k){return F-k})})):H=Xe;for(var de=bt.length,Be=function(F){var k=bt[F],ue=k.nodes[0],ce={},X={};k.nodes.forEach(function(Zt,ln){X[Zt.id]={idx:ln,node:Zt,degree:0,inDegree:0,outDegree:0};var Ut=Zt[o];ce[Ut]?ce[Ut]++:ce[Ut]=1});var ae=[],Ce={};e.edges.forEach(function(Zt){X[Zt.source]&&X[Zt.target]&&(ae.push(Zt),Ce[Zt[s]]?Ce[Zt[s]]++:Ce[Zt[s]]=1,X[Zt.source].degree++,X[Zt.target].degree++,X[Zt.source].outDegree++,X[Zt.target].inDegree++)});for(var ke=Object.keys(x).length,Ke=!1,Et=0;Et<ke;Et++){var jt=Object.keys(x)[Et];if(!Ce[jt]||Ce[jt]<x[jt].length){Ke=!0;break}}if(Ke)return bt.splice(F,1),"continue";var kr=ae.length;if(kr<t.edges.length)return bt.splice(F,1),"break";for(var Qt=!1,zr=function(ln){var Ut=ae[ln],Mn=Ut[s],yi=x[Mn];if(!yi||!yi.length)return Ce[Mn]--,yi&&Ce[Mn]<yi.length?(Qt=!0,"break"):(ae.splice(ln,1),X[Ut.source].degree--,X[Ut.target].degree--,X[Ut.source].outDegree--,X[Ut.target].inDegree--,"continue");var Zl=X[Ut.source].node[o],Ql=X[Ut.target].node[o],us=!1;if(yi.forEach(function(Us){var Jl=b[Us.source].node,eu=b[Us.target].node;Jl[o]===Zl&&eu[o]===Ql&&(us=!0),!n&&Jl[o]===Ql&&eu[o]===Zl&&(us=!0)}),!us)return Ce[Mn]--,yi&&Ce[Mn]<yi.length?(Qt=!0,"break"):(ae.splice(ln,1),X[Ut.source].degree--,X[Ut.target].degree--,X[Ut.source].outDegree--,X[Ut.target].inDegree--,"continue")},Et=kr-1;Et>=0;Et--){var lr=zr(Et);if(lr==="break")break}if(Qt)return bt.splice(F,1),"continue";k.edges=ae;var Lr=P0(k,k.nodes[0].id,!1).length;if(Object.keys(Lr).reverse().forEach(function(Zt){if(!(Zt===k.nodes[0].id||Qt)){if(Lr[Zt]===1/0){var ln=X[Zt].node[o];if(ce[ln]--,ce[ln]<y[ln].length){Qt=!0;return}var Ut=k.nodes.indexOf(X[Zt].node);k.nodes.splice(Ut,1),X[Zt]=void 0;return}var Mn=p[Zt].node[o];if(!H[Mn]||!H[Mn].length||Lr[Zt]>H[Mn][H[Mn].length-1]){var ln=X[Zt].node[o];if(ce[ln]--,ce[ln]<y[ln].length){Qt=!0;return}var Ut=k.nodes.indexOf(X[Zt].node);k.nodes.splice(Ut,1),X[Zt]=void 0}}}),Qt)return bt.splice(F,1),"continue";for(var Zr=!0,mi=0;Zr&&!Qt;){Zr=!1;var Fr=n?X[ue.id].degree<b[ee.id].degree||X[ue.id].inDegree<b[ee.id].inDegree||X[ue.id].outDegree<b[ee.id].outDegree:X[ue.id].degree<b[ee.id].degree;if(Fr){Qt=!0;break}if(ce[ue[o]]<y[ue[o]].length){Qt=!0;break}for(var $n=k.nodes.length,to=$n-1;to>=0;to--){var Hn=k.nodes[to],js=X[Hn.id].degree,Mc=X[Hn.id].inDegree,Cc=X[Hn.id].outDegree,ui=Hn[o],ls=A3(Le,ui,b,y),ql=ls.minPatternNodeLabelDegree,Ac=ls.minPatternNodeLabelInDegree,Tc=ls.minPatternNodeLabelOutDegree,Oc=n?js<ql||Mc<Ac||Cc<Tc:js<ql;if(Oc){if(ce[Hn[o]]--,ce[Hn[o]]<y[Hn[o]].length){Qt=!0;break}k.nodes.splice(to,1),X[Hn.id]=void 0,Zr=!0}}if(Qt||!Zr&&mi!==0)break;kr=ae.length;for(var ro=kr-1;ro>=0;ro--){var zn=ae[ro];if(!X[zn.source]||!X[zn.target]){ae.splice(ro,1);var no=zn[s];if(Ce[no]--,X[zn.source]&&(X[zn.source].degree--,X[zn.source].outDegree--),X[zn.target]&&(X[zn.target].degree--,X[zn.target].inDegree--),x[no]&&Ce[no]<x[no].length){Qt=!0;break}Zr=!0}}mi++}if(Qt||Qt||k.nodes.length<t.nodes.length||ae.length<t.edges.length)return bt.splice(F,1),"continue"},Ie=de-1;Ie>=0;Ie--){var Pe=Be(Ie);if(Pe==="break")break}for(var Ye=bt.length,V=function(F){var k=bt[F],ue={};k.edges.forEach(function(ae){var Ce="".concat(ae.source,"-").concat(ae.target,"-").concat(ae.label);ue[Ce]?ue[Ce]++:ue[Ce]=1});for(var ce=function(Ce){var ke=bt[Ce],Ke={};ke.edges.forEach(function(jt){var kr="".concat(jt.source,"-").concat(jt.target,"-").concat(jt.label);Ke[kr]?Ke[kr]++:Ke[kr]=1});var Et=!0;Object.keys(Ke).length!==Object.keys(ue).length?Et=!1:Object.keys(ue).forEach(function(jt){Ke[jt]!==ue[jt]&&(Et=!1)}),Et&&bt.splice(Ce,1)},X=Ye-1;X>F;X--)ce(X);Ye=bt.length},Ie=0;Ie<=Ye-1;Ie++)V(Ie);return bt}}},sv=function(){function r(e){e===void 0&&(e=10),this.linkedList=new f7,this.maxStep=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}(),P7=cI;const Fde={getAdjMatrix:zh,breadthFirstSearch:h7,connectedComponent:uI,getDegree:Iu,getInDegree:v7,getOutDegree:p7,detectCycle:cI,detectDirectedCycle:P7,detectAllCycles:m7,detectAllDirectedCycle:dI,detectAllUndirectedCycle:hI,depthFirstSearch:fI,dijkstra:P0,findAllPath:x7,findShortestPath:b7,floydWarshall:D0,labelPropagation:w7,louvain:gI,iLouvain:E7,kCore:_7,kMeans:S7,cosineSimilarity:mI,nodesCosineSimilarity:M7,minimumSpanningTree:C7,pageRank:A7,getNeighbors:xo,Stack:sv,GADDI:L7},$de=Object.freeze(Object.defineProperty({__proto__:null,GADDI:L7,Stack:sv,breadthFirstSearch:h7,connectedComponent:uI,cosineSimilarity:mI,default:Fde,depthFirstSearch:fI,detectAllCycles:m7,detectAllDirectedCycle:dI,detectAllUndirectedCycle:hI,detectCycle:cI,detectDirectedCycle:P7,dijkstra:P0,findAllPath:x7,findShortestPath:b7,floydWarshall:D0,getAdjMatrix:zh,getDegree:Iu,getInDegree:v7,getNeighbors:xo,getOutDegree:p7,iLouvain:E7,kCore:_7,kMeans:S7,labelPropagation:w7,louvain:gI,minimumSpanningTree:C7,nodesCosineSimilarity:M7,pageRank:A7},Symbol.toStringTag,{value:"Module"}));var Jx=as,zde=function(e){return function(t,n){return t[e]-n[e]}},T3=function(e,t,n){return e>=t&&e<=n},KE=function(e,t,n,i){var a=1e-4,o={x:n.x-e.x,y:n.y-e.y},s={x:t.x-e.x,y:t.y-e.y},l={x:i.x-n.x,y:i.y-n.y},u=s.x*l.y-s.y*l.x,f=u*u,c=1/u,h=s.x*s.x+s.y*s.y,d=l.x*l.x+l.y*l.y;if(f>a*h*d){var v=(o.x*l.y-o.y*l.x)*c,p=(o.x*s.y-o.y*s.x)*c;return!T3(v,0,1)||!T3(p,0,1)?null:{x:e.x+v*s.x,y:e.y+v*s.y}}return null},D7=function(e,t){var n=e.x,i=e.y,a=e.width,o=e.height,s=n+a/2,l=i+o/2,u=[],f={x:s,y:l};u.push({x:n,y:i}),u.push({x:n+a,y:i}),u.push({x:n+a,y:i+o}),u.push({x:n,y:i+o}),u.push({x:n,y:i});for(var c=null,h=1;h<u.length&&(c=KE(u[h-1],u[h],f,t),!c);h++);return c},N7=function(e,t){var n=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=o-n,u=s-i;if(l*l+u*u<a*a)return null;var f=Math.atan(u/l);return{x:n+Math.abs(a*Math.cos(f))*Math.sign(l),y:i+Math.abs(a*Math.sin(f))*Math.sign(u)}},R7=function(e,t){var n=e.rx,i=e.ry,a=e.x,o=e.y,s=t.x-a,l=t.y-o,u=Math.atan2(l/i,s/n);return u<0&&(u+=2*Math.PI),{x:a+n*Math.cos(u),y:o+i*Math.sin(u)}},bv=function(e,t,n){n===void 0&&(n=1);var i=[e.x,e.y,n];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),XE(i,i,t),{x:i[0],y:i[1]}},B7=function(e,t,n){n===void 0&&(n=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var i=Yk([1,0,0,0,1,0,0,0,1],t);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,n];return XE(a,a,i),{x:a[0],y:a[1]}},vA=function(e,t,n){var i=e.x-t.x,a=e.y-t.y,o=e.x-n.x,s=e.y-n.y,l=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,u=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,f=a*o-i*s;return{x:-(s*l-a*u)/f,y:-(i*u-o*l)/f}},ew=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},Gde=function(e,t){var n=[];return e.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*t)}),n.push(a)}),n},jde=function(e){for(var t=[],n=e.length,i=0;i<n;i+=1){t[i]=[];for(var a=0;a<n;a+=1)i===a?t[i][a]=0:e[i][a]===0||!e[i][a]?t[i][a]=1/0:t[i][a]=e[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)t[i][a]>t[i][o]+t[o][a]&&(t[i][a]=t[i][o]+t[o][a]);return t},Ude=function(e,t){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,f=o[l],c=o[u];a[f][c]=1,t||(a[c][f]=1)}),a},F7=function(e,t){e.translate(t.x,t.y)},pA=function(e,t,n,i){i===void 0&&(i={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,l=t.y-o.minY;if(n){var u=s*a[0],f=l*a[4],c=0,h=0,d=0,v=0;e.animate(function(g){return d=u*g,v=f*g,a=Jx(a,[["t",d-c,v-h]]),c=d,h=v,{matrix:a}},i)}else{var p=Jx(a,[["t",s,l]]);e.setMatrix(p)}},Wde=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=t;Ft(t)||(i=[t,t]),Ft(t)&&t.length===1&&(i=[t[0],t[0]]),n=Jx(n,[["s",i[0],i[1]]]),e.setMatrix(n)},Vde=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=Jx(n,[["r",t]]),e.setMatrix(n)},Hde=function(e,t,n){for(var i=[],a=0;a<e;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[t[o.source]]+=1),o.target&&(i[t[o.target]]+=1)}),i};function Xde(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}var N0=function(e,t,n){var i=!1,a=e.length,o=1e-6;function s(c){return Math.abs(c)<o?0:c<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=e[l],f=e[(l+1)%a];if(Xde(u,f,[t,n]))return!0;s(u[1]-n)>0!=s(f[1]-n)>0&&s(t-(n-u[1])*(u[0]-f[0])/(u[1]-f[1])-u[0])<0&&(i=!i)}return i},$7=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Yde=function(e,t){var n=!1;return De(e,function(i){if(KE(i.from,i.to,t.from,t.to))return n=!0,!1}),n},z7=function(e,t){var n=function(h){var d=h.map(function(p){return p[0]}),v=h.map(function(p){return p[1]});return{minX:Math.min.apply(null,d),maxX:Math.max.apply(null,d),minY:Math.min.apply(null,v),maxY:Math.max.apply(null,v)}},i=function(h){for(var d=[],v=h.length,p=0;p<v-1;p++){var g=h[p],m=h[p+1];d.push({from:{x:g[0],y:g[1]},to:{x:m[0],y:m[1]}})}if(d.length>1){var b=h[0],y=h[v-1];d.push({from:{x:y[0],y:y[1]},to:{x:b[0],y:b[1]}})}return d};if(e.length<2||t.length<2)return!1;var a=n(e),o=n(t);if(!$7(a,o))return!1;var s=!1;if(De(t,function(c){if(N0(e,c[0],c[1]))return s=!0,!1}),s||(De(e,function(c){if(N0(t,c[0],c[1]))return s=!0,!1}),s))return!0;var l=i(e),u=i(t),f=!1;return De(u,function(c){if(Yde(l,c))return f=!0,!1}),f},Gh=function(){function r(e,t,n,i){this.x1=e,this.y1=t,this.x2=n,this.y2=i}return r.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:n,maxY:i,width:n-e,height:i-t};return a},r}(),yI=function(e,t){var n={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return n[t]},Kde=function(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),i=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},G7=function(e,t){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=0,o=[],s=0;s<4;s++){var l=yI(i,n[s]),u=l[0],f=l[1],c=l[2],h=l[3];o[s]=KE({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:f},{x:c,y:h}),o[s]&&(a+=1)}return[o,a]},bI=function(e,t){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=yI(i,n[s]),u=l[0],f=l[1],c=l[2],h=l[3],d=Kde(t,new Gh(u,f,c,h));d=Math.abs(d-.5),d>=0&&d<=1&&(o+=1,a=d<a?d:a)}return o===0?-1:a},j7=function(e){var t=0,n=0;if(e.length>0){for(var i=0,a=e;i<a.length;i++){var o=a[i];t+=o.x,n+=o.y}t/=e.length,n/=e.length}return{x:t,y:n}},tw=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},U7=function(e,t){var n=t.x1,i=t.y1,a=t.x2-n,o=t.y2-i,s=e.x-n,l=e.y-i,u=s*a+l*o,f;u<=0?f=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?f=0:f=u*u/(a*a+o*o));var c=s*s+l*l-f;return c<0&&(c=0),c},gA=function(e,t,n){return n===void 0&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},W7=function(e,t){var n=e.x<t.x,i=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(t.y+t.height-e.y,2);if(o&&!n&&!i)return Math.pow(e.y-t.y,2);if(n&&!a&&!o)return Math.pow(t.x-e.x,2);if(i&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var l=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),u=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return l*l+u*u},qde=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t.x,l=t.y,u=[a-n,o-i];if(lI(u,[0,0]))return NaN;var f=[-u[1],u[0]];Wf(f,f);var c=[s-n,l-i];return Math.abs(sI(c,f))},xI=function(e,t,n){return e+(t-e)*n},mA=function(e,t,n){for(var i=Math.min(e.length,t.length),a=new Array(i),o=0;o<i;o++)a[o]=xI(e[o],t[o],n);return a};const Zde=Object.freeze(Object.defineProperty({__proto__:null,Line:Gh,applyMatrix:bv,compare:zde,distance:ew,floydWarshall:jde,fractionToLine:bI,getAdjMatrix:Ude,getBBoxBoundLine:yI,getCircleCenterByPoints:vA,getCircleIntersectByPoint:N7,getDegree:Hde,getEllipseIntersectByPoint:R7,getLineIntersect:KE,getPointsCenter:j7,getRectIntersectByPoint:D7,intersectBBox:$7,invertMatrix:B7,isPointInPolygon:N0,isPointsOverlap:gA,isPolygonsIntersect:z7,itemIntersectByLine:G7,lerp:xI,lerpArray:mA,move:pA,pointLineDistance:qde,pointLineSquareDist:U7,pointRectSquareDist:W7,rotate:Vde,scale:Wde,scaleMatrix:Gde,squareDist:tw,translate:F7},Symbol.toStringTag,{value:"Module"}));var af="rgb(95, 149, 255)",Qde="rgb(255, 255, 255)",O3="rgb(0, 0, 0)",jS="rgb(247, 250, 255)",V7="rgb(239, 244, 255)",f1="rgb(253, 253, 253)",k3="rgb(250, 250, 250)",c1="rgb(224, 224, 224)",I3="rgb(234, 234, 234)",Jde="rgb(245, 245, 245)",eve="rgb(191, 213, 255)",L3="#4572d9",tve="rgb(223, 234, 255)",Ur={mainStroke:af,mainFill:V7,activeStroke:af,activeFill:jS,inactiveStroke:eve,inactiveFill:jS,selectedStroke:af,selectedFill:Qde,highlightStroke:L3,highlightFill:tve,disableStroke:c1,disableFill:k3,edgeMainStroke:c1,edgeActiveStroke:af,edgeInactiveStroke:I3,edgeSelectedStroke:af,edgeHighlightStroke:af,edgeDisableStroke:Jde,comboMainStroke:c1,comboMainFill:f1,comboActiveStroke:af,comboActiveFill:jS,comboInactiveStroke:c1,comboInactiveFill:f1,comboSelectedStroke:af,comboSelectedFill:f1,comboHighlightStroke:L3,comboHighlightFill:f1,comboDisableStroke:I3,comboDisableFill:k3};const It={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ur.mainStroke,fill:V7},size:20,color:Ur.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ur.activeFill,stroke:Ur.activeStroke}},nodeStateStyles:{active:{fill:Ur.activeFill,stroke:Ur.activeStroke,lineWidth:2,shadowColor:Ur.mainStroke,shadowBlur:10},selected:{fill:Ur.selectedFill,stroke:Ur.selectedStroke,lineWidth:4,shadowColor:Ur.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ur.highlightFill,stroke:Ur.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ur.inactiveFill,stroke:Ur.inactiveStroke,lineWidth:1},disable:{fill:Ur.disableFill,stroke:Ur.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:O3,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ur.edgeMainStroke,lineAppendWidth:2},color:Ur.edgeMainStroke},edgeStateStyles:{active:{stroke:Ur.edgeActiveStroke,lineWidth:1},selected:{stroke:Ur.edgeSelectedStroke,lineWidth:2,shadowColor:Ur.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ur.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ur.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ur.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:O3,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ur.comboMainFill,lineWidth:1,stroke:Ur.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ur.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ur.comboActiveStroke,lineWidth:1,fill:Ur.comboActiveFill},selected:{stroke:Ur.comboSelectedStroke,lineWidth:2,fill:Ur.comboSelectedFill,shadowColor:Ur.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ur.comboHighlightStroke,lineWidth:2,fill:Ur.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ur.comboInactiveStroke,fill:Ur.comboInactiveFill,lineWidth:1},disable:{stroke:Ur.comboDisableStroke,fill:Ur.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},rve={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var il=Math.PI,yA=Math.sin,bA=Math.cos,zi=yA(il/8),Gi=bA(il/8),rw=function(e,t){var n=e.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=bv(i,o),a=bv(a,o)}var s=i.x,l=i.y,u=a.x,f=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:f,width:u-s,height:f-l}},H7=function(e){var t=e.sourceNode||e.targetNode,n=t.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||It.defaultLoopPosition,f=[(o.minX+o.maxX)/2+i[6],(o.minY+o.maxY)/2+i[7]],c=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],d=o.height/2,v=o.width/2,p=d,g=d,m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,w=a.get("type"),E=Math.min(d/2,v/2),_=Math.min(d,v),S=s!=null&&s.pointPadding?Math.min(_,s==null?void 0:s.pointPadding):E;if(c[0]===h[0]&&c[1]===h[1]){switch(u){case"top":w==="circle"?(c=[f[0]-m,f[1]-b],h=[f[0]+y,f[1]-x]):(c=[f[0]-S,f[1]-d],h=[f[0]+S,f[1]-d]);break;case"top-right":p=d,g=v,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]+m,f[1]-b],h=[f[0]+x,f[1]-y]):(c=[f[0]+v-S,f[1]-d],h=[f[0]+v,f[1]-d+S]);break;case"right":p=v,g=v,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]+b,f[1]-m],h=[f[0]+x,f[1]+y]):(c=[f[0]+v,f[1]-S],h=[f[0]+v,f[1]+S]);break;case"bottom-right":p=v,g=d,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]+b,f[1]+m],h=[f[0]+y,f[1]+x]):(c=[f[0]+v,f[1]+d-S],h=[f[0]+v-S,f[1]+d]);break;case"bottom":p=d,g=d,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]+m,f[1]+b],h=[f[0]-y,f[1]+x]):(c=[f[0]-S,f[1]+d],h=[f[0]+S,f[1]+d]);break;case"bottom-left":p=d,g=v,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]-m,f[1]+b],h=[f[0]-x,f[1]+y]):(c=[f[0]-v,f[1]+d-S],h=[f[0]-v+S,f[1]+d]);break;case"left":p=v,g=v,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]-b,f[1]+m],h=[f[0]-x,f[1]-y]):(c=[f[0]-v,f[1]-S],h=[f[0]-v,f[1]+S]);break;case"top-left":p=v,g=d,w==="circle"?(m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]-b,f[1]-m],h=[f[0]-y,f[1]-x]):(c=[f[0]-v+S,f[1]-d],h=[f[0]-v,f[1]-d+S]);break;default:p=v,g=v,m=p*zi,b=p*Gi,y=g*zi,x=g*Gi,c=[f[0]-m,f[1]-b],h=[f[0]+y,f[1]-x]}if(s.clockwise===!1){var C=[c[0],c[1]];c=[h[0],h[1]],h=[C[0],C[1]]}}var M=[c[0]-f[0],c[1]-f[1]],T=(p+l)/p,A=(g+l)/g;s.clockwise===!1&&(T=(g+l)/g,A=(p+l)/p);var O=ha([0,0],M,T),L=[f[0]+O[0],f[1]+O[1]],N=[h[0]-f[0],h[1]-f[1]],P=ha([0,0],N,A),R=[f[0]+P[0],f[1]+P[1]];return e.startPoint={x:c[0],y:c[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:L[0],y:L[1]},{x:R[0],y:R[1]}],e},X7=function(e,t,n,i,a){var o=1e-4,s=[],l=e==null?void 0:e.getPoint(t);if(!l)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(t+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var f=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(f<0&&(f+=il*2),n&&(l.x+=bA(f)*n,l.y+=yA(f)*n),i){var c=f-il/2;f>1/2*il&&f<3*1/2*il&&(c-=il),l.x+=bA(c)*i,l.y+=yA(c)*i}var h={x:l.x,y:l.y,angle:f};return a?(f>.5*il&&f<1.5*il&&(f-=il),U({rotate:f},h)):h},nve=function r(e,t,n,i){if(i(e,t,n)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!r(e.children[a],e,a,i))return!1}return!0},ive=function r(e,t,n,i){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!r(e.children[a],e,a,i))return}return i(e,t,n)!==!1},fa=function(e,t){typeof t=="function"&&nve(e,null,-1,t)},al=function(e,t){typeof t=="function"&&ive(e,null,-1,t)},Y7=function(e,t){return t*(rve[e]||1)},K7=function(e,t){var n=0,i=new RegExp("[一-龥]+");return e.split("").forEach(function(a){i.test(a)?n+=t:n+=Y7(a,t)}),[n,t]},q7=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},xA=function(e,t){var n=[],i={},a={};e.forEach(function(l){a[l.id]=l}),e.forEach(function(l,u){var f=Tr(l);f.itemType="combo",f.children=void 0,f.parentId===f.id?(console.warn("The parentId for combo ".concat(f.id," can not be the same as the combo's id")),delete f.parentId):f.parentId&&!a[f.parentId]&&(console.warn("The parent combo for combo ".concat(f.id," does not exist!")),delete f.parentId);var c=i[f.id];if(c){if(f.children=c.children,i[f.id]=f,c=f,!c.parentId){n.push(c);return}var h=i[c.parentId];if(h)h.children?h.children.push(f):h.children=[f];else{var d={id:c.parentId,children:[c]};i[c.parentId]=d,i[f.id]=f}return}if(tt(l.parentId)){var v=i[l.parentId];if(v)v.children?v.children.push(f):v.children=[f],i[f.id]=f;else{var p={id:l.parentId,children:[f]};i[p.id]=p,i[f.id]=f}}else n.push(f),i[f.id]=f});var o={};(t||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var f={id:l.id,comboId:l.comboId};u.children?u.children.push(f):u.children=[f],f.itemType="node",i[l.id]=f}});var s=0;return n.forEach(function(l){l.depth=s+10,fa(l,function(u){var f,c=i[u.id].itemType;c==="node"?f=i[u.comboId]:f=i[u.parentId],f&&c==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),n},wA=function(e,t,n){var i,a=e,o,s={root:{children:e}},l=!1,u="root";(e||[]).forEach(function(v){if(!l){if(v.id===t){o=v,v.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0;return}fa(v,function(p){var g;return s[p.id]={children:(p==null?void 0:p.children)||[]},a=(g=s[p.parentId||p.comboId||"root"])===null||g===void 0?void 0:g.children,p&&(p.removed||t===p.id)&&a?(u=p.parentId||p.comboId||"root",o=p,p.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0,!1):!0})}}),a=(i=s[u])===null||i===void 0?void 0:i.children;var f=a?a.indexOf(o):-1;if(f>-1&&a.splice(f,1),l||(o={id:t,itemType:"node",comboId:n},s[t]={children:void 0}),t){var c=!1;if(n){var h=0;(e||[]).forEach(function(v){c||fa(v,function(p){return n===p.id?(c=!0,p.children?p.children.push(o):p.children=[o],h=p.depth,o.itemType==="node"?o.depth=h+2:o.depth=h+1,!1):!0})})}else(!n||!c)&&o.itemType!=="node"&&e.push(o);var d=o.depth;fa(o,function(v){return v.itemType==="node"?d+=2:d+=1,v.depth=d,!0})}return e},ex=function(e,t,n){var i={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=n==null?void 0:n.getModel(),o=a||{},s=o.x,l=o.y,u=o.fixSize,f=o.collapsed,c=o.fixCollapseSize,h=f?c:u,d=Ft(h)?h:[h,h],v=d[0],p=d[1],g=[v/2,p/2];return{minX:s-g[0],minY:l-g[1],maxX:s+g[0],maxY:l+g[1],x:s,y:l,width:v,height:p}}return e.forEach(function(m){var b=t.findById(m.id);if(!(!b||!b.isVisible())){b.set("bboxCanvasCache",void 0);var y=b.getCanvasBBox();y.x&&i.minX>y.minX&&(i.minX=y.minX),y.y&&i.minY>y.minY&&(i.minY=y.minY),y.x&&i.maxX<y.maxX&&(i.maxX=y.maxX),y.y&&i.maxY<y.maxY&&(i.maxY=y.maxY)}}),i.x=(i.minX+i.maxX)/2,i.y=(i.minY+i.maxY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2,(n==null?void 0:n.getKeyShape().get("type"))==="circle"&&(i.width=Math.hypot(i.height,i.width),i.height=i.width),Object.keys(i).forEach(function(m){(i[m]===1/0||i[m]===-1/0)&&(i[m]=void 0)}),i},ave=function(e){var t=Pt(e.x)||Pt(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||Pt(e.style.r)||Pt(e.style.width)||Pt(e.style.height)||Pt(e.style.rx)||Pt(e.style.ry)),t},tx=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];if(!(n==="img"&&!tt(i)))if(Hi(i)&&!Ft(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!tt(s)||(a[o]=Tr(s))}),t[n]=a}else t[n]=Tr(i)}),t},R0=function(e){var t=e.animateCfg,n=e.callback,i;if(!t)i={duration:500,callback:n};else if(i=Tr(t),t.callback){var a=t.callback;i.callback=function(){n(),a()}}else i.callback=n;return i};const ove=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:tx,getAnimateCfgWithCallback:R0,getBBox:rw,getComboBBox:ex,getLabelPosition:X7,getLetterWidth:Y7,getLoopCfgs:H7,getTextSize:K7,plainCombosToTrees:xA,reconstructTree:wA,shouldRefreshEdge:ave,traverseTree:fa,traverseTreeUp:al,truncateLabelByLength:q7},Symbol.toStringTag,{value:"Module"}));var P3=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,n=e.edges,i=e.combos,a=i===void 0?[]:i;if(!t&&!n){var o=!0;return fa(e,function(h){return tt(h.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(h){return!tt(h.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var l=(t||[]).map(function(h){return h.id}),u=a==null?void 0:a.map(function(h){return h.id}),f=So(So([],l,!0),u,!0),c=(n||[]).find(function(h){return!f.includes(h.source)||!f.includes(h.target)});return c?(console.warn("G6 Warning Tips: The source %c".concat(c.source,"%c or the target %c").concat(c.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},sve=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!tt(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},lve=function(){function r(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){var e=this.modes;De(e,function(t){De(t,function(n,i){tt(n)&&(t[i]={type:n})})})},r.prototype.setBehaviors=function(e){var t=this.graph,n=this.modes[e],i=[],a;De(n||[],function(o){var s=Xk.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),i.push(a)))}),this.currentBehaves=i},r.mergeBehaviors=function(e,t){return De(t,function(n){e.indexOf(n)<0&&(tt(n)&&(n={type:n}),e.push(n))}),e},r.filterBehaviors=function(e,t){var n=[];return e.forEach(function(i){var a="";tt(i)?a=i:a=i.type,t.indexOf(a)<0&&n.push(i)}),n},r.prototype.setMode=function(e){var t=this,n=t.modes,i=t.graph,a=e,o=n[a];o&&(i.emit("beforemodechange",{mode:e}),De(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:e}),this.mode=e)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(e,t,n){var i=this,a;if(Ft(e)?a=e:a=[e],Ft(t))return De(t,function(s){i.modes[s]?n?i.modes[s]=r.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=r.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=r.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=r.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},r.prototype.updateBehavior=function(e,t,n){tt(e)&&(e={type:e});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r}(),t0=`	
\v\f\r   ᠎             　\u2028\u2029`,uve=new RegExp("([a-z])["+t0+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t0+"]*,?["+t0+"]*)+)","ig"),fve=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t0+"]*,?["+t0+"]*","ig"),lv=function(r){if(!r)return null;if(Ft(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(uve,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(fve,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return r}),t},EA=function(r,e){for(var t=[],n=0,i=r.length;i-2*!e>n;n+=2){var a=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];e?n?i-4===n?a[3]={x:+r[0],y:+r[1]}:i-2===n&&(a[2]={x:+r[0],y:+r[1]},a[3]={x:+r[2],y:+r[3]}):a[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+r[n],y:+r[n+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},h1=function(r,e,t,n,i){var a=[];if(i===null&&n===null&&(n=t),r=+r,e=+e,t=+t,n=+n,i!==null){var o=Math.PI/180,s=r+t*Math.cos(-n*o),l=r+t*Math.cos(-i*o),u=e+t*Math.sin(-n*o),f=e+t*Math.sin(-i*o);a=[["M",s,u],["A",t,t,0,+(i-n>180),0,l,f]]}else a=[["M",r,e],["m",0,-n],["a",t,n,0,1,1,0,2*n],["a",t,n,0,1,1,0,-2*n],["z"]];return a},_A=function(r){if(r=lv(r),!r||!r.length)return[["M",0,0]];var e=[],t=0,n=0,i=0,a=0,o=0,s,l;r[0][0]==="M"&&(t=+r[0][1],n=+r[0][2],i=t,a=n,o++,e[0]=["M",t,n]);for(var u=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",f=void 0,c=void 0,h=o,d=r.length;h<d;h++){if(e.push(f=[]),c=r[h],s=c[0],s!==s.toUpperCase())switch(f[0]=s.toUpperCase(),f[0]){case"A":f[1]=c[1],f[2]=c[2],f[3]=c[3],f[4]=c[4],f[5]=c[5],f[6]=+c[6]+t,f[7]=+c[7]+n;break;case"V":f[1]=+c[1]+n;break;case"H":f[1]=+c[1]+t;break;case"R":l=[t,n].concat(c.slice(1));for(var v=2,p=l.length;v<p;v++)l[v]=+l[v]+t,l[++v]=+l[v]+n;e.pop(),e=e.concat(EA(l,u));break;case"O":e.pop(),l=h1(t,n,c[1],c[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(h1(t,n,c[1],c[2],c[3])),f=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+c[1]+t,a=+c[2]+n;break;default:for(var v=1,p=c.length;v<p;v++)f[v]=+c[v]+(v%2?t:n)}else if(s==="R")l=[t,n].concat(c.slice(1)),e.pop(),e=e.concat(EA(l,u)),f=["R"].concat(c.slice(-2));else if(s==="O")e.pop(),l=h1(t,n,c[1],c[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat(h1(t,n,c[1],c[2],c[3])),f=["U"].concat(e[e.length-1].slice(-2));else for(var g=0,m=c.length;g<m;g++)f[g]=c[g];if(s=s.toUpperCase(),s!=="O")switch(f[0]){case"Z":t=+i,n=+a;break;case"H":t=f[1];break;case"V":n=f[1];break;case"M":i=f[f.length-2],a=f[f.length-1];break;default:t=f[f.length-2],n=f[f.length-1]}}return e},d1=function(r,e,t,n){return[r,e,t,n,t,n]},D3=function(r,e,t,n,i,a){var o=.3333333333333333,s=2/3;return[o*r+s*t,o*e+s*n,o*i+s*t,o*a+s*n,i,a]},Z7=function(r,e,t,n,i,a,o,s,l,u){t===n&&(t+=1);var f=Math.PI*120/180,c=Math.PI/180*(+i||0),h=[],d,v,p,g,m,b=function(Fe,_e,Ve){var Xe=Fe*Math.cos(Ve)-_e*Math.sin(Ve),vt=Fe*Math.sin(Ve)+_e*Math.cos(Ve);return{x:Xe,y:vt}};if(u)v=u[0],p=u[1],g=u[2],m=u[3];else{d=b(r,e,-c),r=d.x,e=d.y,d=b(s,l,-c),s=d.x,l=d.y,r===s&&e===l&&(s+=1,l+=1);var y=(r-s)/2,x=(e-l)/2,w=y*y/(t*t)+x*x/(n*n);w>1&&(w=Math.sqrt(w),t=w*t,n=w*n);var E=t*t,_=n*n,S=(a===o?-1:1)*Math.sqrt(Math.abs((E*_-E*x*x-_*y*y)/(E*x*x+_*y*y)));g=S*t*x/n+(r+s)/2,m=S*-n*y/t+(e+l)/2,v=Math.asin(((e-m)/n).toFixed(9)),p=Math.asin(((l-m)/n).toFixed(9)),v=r<g?Math.PI-v:v,p=s<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),o&&v>p&&(v=v-Math.PI*2),!o&&p>v&&(p=p-Math.PI*2)}var C=p-v;if(Math.abs(C)>f){var M=p,T=s,A=l;p=v+f*(o&&p>v?1:-1),s=g+t*Math.cos(p),l=m+n*Math.sin(p),h=Z7(s,l,t,n,i,0,o,T,A,[p,M,g,m])}C=p-v;var O=Math.cos(v),L=Math.sin(v),N=Math.cos(p),P=Math.sin(p),R=Math.tan(C/4),G=4/3*t*R,D=4/3*n*R,B=[r,e],Y=[r+G*L,e-D*O],ee=[s+G*P,l-D*N],ne=[s,l];if(Y[0]=2*B[0]-Y[0],Y[1]=2*B[1]-Y[1],u)return[Y,ee,ne].concat(h);h=[Y,ee,ne].concat(h).join().split(",");for(var Q=[],ye=0,Le=h.length;ye<Le;ye++)Q[ye]=ye%2?b(h[ye-1],h[ye],c).y:b(h[ye],h[ye+1],c).x;return Q},SA=function(r,e){var t=_A(r),n=e&&_A(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",f,c=function(y,x,w){var E,_;if(!y)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(!(y[0]in{T:1,Q:1})&&(x.qx=x.qy=null),y[0]){case"M":x.X=y[1],x.Y=y[2];break;case"A":y=["C"].concat(Z7.apply(0,[x.x,x.y].concat(y.slice(1))));break;case"S":w==="C"||w==="S"?(E=x.x*2-x.bx,_=x.y*2-x.by):(E=x.x,_=x.y),y=["C",E,_].concat(y.slice(1));break;case"T":w==="Q"||w==="T"?(x.qx=x.x*2-x.qx,x.qy=x.y*2-x.qy):(x.qx=x.x,x.qy=x.y),y=["C"].concat(D3(x.x,x.y,x.qx,x.qy,y[1],y[2]));break;case"Q":x.qx=y[1],x.qy=y[2],y=["C"].concat(D3(x.x,x.y,y[1],y[2],y[3],y[4]));break;case"L":y=["C"].concat(d1(x.x,x.y,y[1],y[2]));break;case"H":y=["C"].concat(d1(x.x,x.y,y[1],x.y));break;case"V":y=["C"].concat(d1(x.x,x.y,x.x,y[1]));break;case"Z":y=["C"].concat(d1(x.x,x.y,x.X,x.Y));break}return y},h=function(y,x){if(y[x].length>7){y[x].shift();for(var w=y[x];w.length;)o[x]="A",n&&(s[x]="A"),y.splice(x++,0,["C"].concat(w.splice(0,6)));y.splice(x,1),f=Math.max(t.length,n&&n.length||0)}},d=function(y,x,w,E,_){y&&x&&y[_][0]==="M"&&x[_][0]!=="M"&&(x.splice(_,0,["M",E.x,E.y]),w.bx=0,w.by=0,w.x=y[_][1],w.y=y[_][2],f=Math.max(t.length,n&&n.length||0))};f=Math.max(t.length,n&&n.length||0);for(var v=0;v<f;v++){t[v]&&(l=t[v][0]),l!=="C"&&(o[v]=l,v&&(u=o[v-1])),t[v]=c(t[v],i,u),o[v]!=="A"&&l==="C"&&(o[v]="C"),h(t,v),n&&(n[v]&&(l=n[v][0]),l!=="C"&&(s[v]=l,v&&(u=s[v-1])),n[v]=c(n[v],a,u),s[v]!=="A"&&l==="C"&&(s[v]="C"),h(n,v)),d(t,n,i,a,v),d(n,t,a,i,v);var p=t[v],g=n&&n[v],m=p.length,b=n&&g.length;i.x=p[m-2],i.y=p[m-1],i.bx=parseFloat(p[m-4])||i.x,i.by=parseFloat(p[m-3])||i.y,a.bx=n&&(parseFloat(g[b-4])||a.x),a.by=n&&(parseFloat(g[b-3])||a.y),a.x=n&&g[b-2],a.y=n&&g[b-1]}return n?[t,n]:t},cve=/,?([a-z]),?/gi,Q7=function(r){return r.join(",").replace(cve,"$1")},N3=function(r,e,t,n,i){var a=-3*e+9*t-9*n+3*i,o=r*a+6*e-12*t+6*n;return r*o-3*e+3*t},R3=function(r,e,t,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,f=12,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,v=0;v<f;v++){var p=u*c[v]+u,g=N3(p,r,t,i,o),m=N3(p,e,n,a,s),b=g*g+m*m;d+=h[v]*Math.sqrt(b)}return u*d},hve=function(r,e,t,n,i,a,o,s){for(var l=[],u=[[],[]],f,c,h,d,v=0;v<2;++v){if(v===0?(c=6*r-12*t+6*i,f=-3*r+9*t-9*i+3*o,h=3*t-3*r):(c=6*e-12*n+6*a,f=-3*e+9*n-9*a+3*s,h=3*n-3*e),Math.abs(f)<1e-12){if(Math.abs(c)<1e-12)continue;d=-h/c,d>0&&d<1&&l.push(d);continue}var p=c*c-4*h*f,g=Math.sqrt(p);if(!(p<0)){var m=(-c+g)/(2*f);m>0&&m<1&&l.push(m);var b=(-c-g)/(2*f);b>0&&b<1&&l.push(b)}}for(var y=l.length,x=y,w;y--;)d=l[y],w=1-d,u[0][y]=w*w*w*r+3*w*w*d*t+3*w*d*d*i+d*d*d*o,u[1][y]=w*w*w*e+3*w*w*d*n+3*w*d*d*a+d*d*d*s;return u[0][x]=r,u[1][x]=e,u[0][x+1]=o,u[1][x+1]=s,u[0].length=u[1].length=x+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},dve=function(r,e,t,n,i,a,o,s){if(!(Math.max(r,t)<Math.min(i,o)||Math.min(r,t)>Math.max(i,o)||Math.max(e,n)<Math.min(a,s)||Math.min(e,n)>Math.max(a,s))){var l=(r*n-e*t)*(i-o)-(r-t)*(i*s-a*o),u=(r*n-e*t)*(a-s)-(e-n)*(i*s-a*o),f=(r-t)*(a-s)-(e-n)*(i-o);if(f){var c=l/f,h=u/f,d=+c.toFixed(2),v=+h.toFixed(2);if(!(d<+Math.min(r,t).toFixed(2)||d>+Math.max(r,t).toFixed(2)||d<+Math.min(i,o).toFixed(2)||d>+Math.max(i,o).toFixed(2)||v<+Math.min(e,n).toFixed(2)||v>+Math.max(e,n).toFixed(2)||v<+Math.min(a,s).toFixed(2)||v>+Math.max(a,s).toFixed(2)))return{x:c,y:h}}}},of=function(r,e,t){return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},J7=function(r,e,t,n,i){if(i)return[["M",+r+ +i,e],["l",t-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-t,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",r,e],["l",t,0],["l",0,n],["l",-t,0],["z"]];return a.parsePathArray=Q7,a},MA=function(r,e,t,n){return r===null&&(r=e=t=n=0),e===null&&(e=r.y,t=r.width,n=r.height,r=r.x),{x:r,y:e,width:t,w:t,height:n,h:n,x2:r+t,y2:e+n,cx:r+t/2,cy:e+n/2,r1:Math.min(t,n)/2,r2:Math.max(t,n)/2,r0:Math.sqrt(t*t+n*n)/2,path:J7(r,e,t,n),vb:[r,e,t,n].join(" ")}},vve=function(r,e){return r=MA(r),e=MA(e),of(e,r.x,r.y)||of(e,r.x2,r.y)||of(e,r.x,r.y2)||of(e,r.x2,r.y2)||of(r,e.x,e.y)||of(r,e.x2,e.y)||of(r,e.x,e.y2)||of(r,e.x2,e.y2)||(r.x<e.x2&&r.x>e.x||e.x<r.x2&&e.x>r.x)&&(r.y<e.y2&&r.y>e.y||e.y<r.y2&&e.y>r.y)},B3=function(r,e,t,n,i,a,o,s){Ft(r)||(r=[r,e,t,n,i,a,o,s]);var l=hve.apply(null,r);return MA(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},F3=function(r,e,t,n,i,a,o,s,l){var u=1-l,f=Math.pow(u,3),c=Math.pow(u,2),h=l*l,d=h*l,v=f*r+c*3*l*t+u*3*l*l*i+d*o,p=f*e+c*3*l*n+u*3*l*l*a+d*s,g=r+2*l*(t-r)+h*(i-2*t+r),m=e+2*l*(n-e)+h*(a-2*n+e),b=t+2*l*(i-t)+h*(o-2*i+t),y=n+2*l*(a-n)+h*(s-2*a+n),x=u*r+l*t,w=u*e+l*n,E=u*i+l*o,_=u*a+l*s,S=90-Math.atan2(g-b,m-y)*180/Math.PI;return{x:v,y:p,m:{x:g,y:m},n:{x:b,y},start:{x,y:w},end:{x:E,y:_},alpha:S}},pve=function(r,e,t){var n=B3(r),i=B3(e);if(!vve(n,i))return t?0:[];for(var a=R3.apply(0,r),o=R3.apply(0,e),s=~~(a/8),l=~~(o/8),u=[],f=[],c={},h=t?0:[],d=0;d<s+1;d++){var v=F3.apply(0,r.concat(d/s));u.push({x:v.x,y:v.y,t:d/s})}for(var d=0;d<l+1;d++){var v=F3.apply(0,e.concat(d/l));f.push({x:v.x,y:v.y,t:d/l})}for(var d=0;d<s;d++)for(var p=0;p<l;p++){var g=u[d],m=u[d+1],b=f[p],y=f[p+1],x=Math.abs(m.x-g.x)<.001?"y":"x",w=Math.abs(y.x-b.x)<.001?"y":"x",E=dve(g.x,g.y,m.x,m.y,b.x,b.y,y.x,y.y);if(E){if(c[E.x.toFixed(4)]===E.y.toFixed(4))continue;c[E.x.toFixed(4)]=E.y.toFixed(4);var _=g.t+Math.abs((E[x]-g[x])/(m[x]-g[x]))*(m.t-g.t),S=b.t+Math.abs((E[w]-b[w])/(y[w]-b[w]))*(y.t-b.t);_>=0&&_<=1&&S>=0&&S<=1&&(t?h+=1:h.push({x:E.x,y:E.y,t1:_,t2:S}))}}return h},gve=function(r,e,t){r=SA(r),e=SA(e);for(var n,i,a,o,s,l,u,f,c,h,d=t?0:[],v=0,p=r.length;v<p;v++){var g=r[v];if(g[0]==="M")n=s=g[1],i=l=g[2];else{g[0]==="C"?(c=[n,i].concat(g.slice(1)),n=c[6],i=c[7]):(c=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,b=e.length;m<b;m++){var y=e[m];if(y[0]==="M")a=u=y[1],o=f=y[2];else{y[0]==="C"?(h=[a,o].concat(y.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,u,f,u,f],a=u,o=f);var x=pve(c,h,t);if(t)d+=x;else{for(var w=0,E=x.length;w<E;w++)x[w].segment1=v,x[w].segment2=m,x[w].bez1=c,x[w].bez2=h;d=d.concat(x)}}}}}return d},mve=function(r,e){return gve(r,e)};function yve(r,e){var t=[],n=[];function i(a,o){if(a.length===1)t.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&t.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return r.length&&i(r,e),{left:t,right:n.reverse()}}function bve(r,e,t){var n=[[r[1],r[2]]];t=t||2;var i=[];e[0]==="A"?(n.push(e[6]),n.push(e[7])):e[0]==="C"?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var a=n,o=1/t,s=0;s<t-1;s++){var l=o/(1-o*s),u=yve(a,l);i.push(u.left),a=u.right}i.push(a);var f=i.map(function(c){var h=[];return c.length===4&&(h.push("C"),h=h.concat(c[2])),c.length>=3&&(c.length===3&&h.push("Q"),h=h.concat(c[1])),c.length===2&&h.push("L"),h=h.concat(c[c.length-1]),h});return f}var xve=function(r,e,t){if(t===1)return[[].concat(r)];var n=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")n=n.concat(bve(r,e,t));else{var i=[].concat(r);i[0]==="M"&&(i[0]="L");for(var a=0;a<=t-1;a++)n.push(i)}return n},wve=function(r,e){if(r.length===1)return r;var t=r.length-1,n=e.length-1,i=t/n,a=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-t;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,f,c){return c===t?u.concat(r[t]):u.concat(xve(r[c],r[c+1],f))},[]);return l.unshift(r[0]),(e[n]==="Z"||e[n]==="z")&&l.push("Z"),l},Eve=function(r,e){if(r.length!==e.length)return!1;var t=!0;return De(r,function(n,i){if(n!==e[i])return t=!1,!1}),t};function _ve(r,e,t){var n=null,i=t;return e<i&&(i=e,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var Sve=function(r,e){var t=r.length,n=e.length,i,a,o=0;if(t===0||n===0)return null;for(var s=[],l=0;l<=t;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=t;l++){i=r[l-1];for(var u=1;u<=n;u++){a=e[u-1],Eve(i,a)?o=0:o=1;var f=s[l-1][u].min+1,c=s[l][u-1].min+1,h=s[l-1][u-1].min+o;s[l][u]=_ve(f,c,h)}}return s},eW=function(r,e){var t=Sve(r,e),n=r.length,i=e.length,a=[],o=1,s=1;if(t[n][i].min!==n){for(var l=1;l<=n;l++){var u=t[l][l].min;s=l;for(var f=o;f<=i;f++)t[l][f].min<u&&(u=t[l][f].min,s=f);o=s,t[l][o].type&&a.push({index:l-1,type:t[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var c=i-n;if(n<i)for(var l=0;l<c;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function US(r,e,t){for(var n=[].concat(r),i,a=1/(t+1),o=tW(e)[0],s=1;s<=t;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function tW(r){var e=[];switch(r[0]){case"M":e.push([r[1],r[2]]);break;case"L":e.push([r[1],r[2]]);break;case"A":e.push([r[6],r[7]]);break;case"Q":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"T":e.push([r[1],r[2]]);break;case"C":e.push([r[5],r[6]]),e.push([r[1],r[2]]),e.push([r[3],r[4]]);break;case"S":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"H":e.push([r[1],r[1]]);break;case"V":e.push([r[1],r[1]]);break}return e}var CA=function(r,e){if(r.length<=1)return r;for(var t,n=0;n<e.length;n++)if(r[n][0]!==e[n][0])switch(t=tW(r[n]),e[n][0]){case"M":r[n]=["M"].concat(t[0]);break;case"L":r[n]=["L"].concat(t[0]);break;case"A":r[n]=[].concat(e[n]),r[n][6]=t[0][0],r[n][7]=t[0][1];break;case"Q":if(t.length<2)if(n>0)t=US(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["Q"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(n>0)t=US(t,r[n-1],2);else{r[n]=e[n];break}r[n]=["C"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(t.length<2)if(n>0)t=US(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["S"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=e[n]}return r};const Mve=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:EA,fillPath:wve,fillPathByDiff:eW,formatPath:CA,intersection:mve,parsePathArray:Q7,parsePathString:lv,pathToAbsolute:_A,pathToCurve:SA,rectPath:J7},Symbol.toStringTag,{value:"Module"}));var rW=function(){function r(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function nW(r,e){var t=r.indexOf(e);t!==-1&&r.splice(t,1)}var $3=typeof window<"u"&&typeof window.document<"u";function iW(r,e){if(r.isCanvas())return!0;for(var t=e.getParent(),n=!1;t;){if(t===r){n=!0;break}t=t.getParent()}return n}function AA(r){return r.cfg.visible&&r.cfg.capture}var Cve=function(r){nr(e,r);function e(t){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=$t(i,t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,n){this.cfg[t]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(J9),z3=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))},Ave=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),Tve=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),Ove=function(){function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return r}(),kve=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),Ive=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),Lve=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Pve=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,G3=3,Dve=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Lve]],j3=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function aW(r){return r?U3(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ive:typeof navigator<"u"?U3(navigator.userAgent):Bve()}function Nve(r){return r!==""&&Dve.reduce(function(e,t){var n=t[0],i=t[1];if(e)return e;var a=i.exec(r);return!!a&&[n,a]},!1)}function U3(r){var e=Nve(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new kve;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<G3&&(i=z3(z3([],i,!0),Fve(G3-i.length),!0)):i=[];var a=i.join("."),o=Rve(r),s=Pve.exec(r);return s&&s[1]?new Ove(t,a,o,s[1]):new Ave(t,a,o)}function Rve(r){for(var e=0,t=j3.length;e<t;e++){var n=j3[e],i=n[0],a=n[1],o=a.exec(r);if(o)return i}return null}function Bve(){var r=typeof process<"u"&&process.version;return r?new Tve(process.version.slice(1)):null}function Fve(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}function W3(r,e){var t=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],f=r[7],c=r[8],h=e[0],d=e[1],v=e[2],p=e[3],g=e[4],m=e[5],b=e[6],y=e[7],x=e[8];return t[0]=h*n+d*o+v*u,t[1]=h*i+d*s+v*f,t[2]=h*a+d*l+v*c,t[3]=p*n+g*o+m*u,t[4]=p*i+g*s+m*f,t[5]=p*a+g*l+m*c,t[6]=b*n+y*o+x*u,t[7]=b*i+y*s+x*f,t[8]=b*a+y*l+x*c,t}function dh(r,e){var t=[],n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function oW(r){var e=[],t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],f=r[8],c=f*o-s*u,h=-f*a+s*l,d=u*a-o*l,v=t*c+n*h+i*d;return v?(v=1/v,e[0]=c*v,e[1]=(-f*n+i*u)*v,e[2]=(s*n-i*o)*v,e[3]=h*v,e[4]=(f*t-i*l)*v,e[5]=(-s*t+i*a)*v,e[6]=d*v,e[7]=(-u*t+n*l)*v,e[8]=(o*t-n*a)*v,e):null}var ng=as,WS="matrix",$ve=["zIndex","capture","visible","type"],zve=["repeat"],Gve=":",jve="*";function Uve(r){for(var e=[],t=0;t<r.length;t++)Ft(r[t])?e.push([].concat(r[t])):e.push(r[t]);return e}function Wve(r,e){var t={},n=e.attrs;for(var i in r)t[i]=n[i];return t}function Vve(r,e){var t={},n=e.attr();return De(r,function(i,a){zve.indexOf(a)===-1&&!qf(n[a],i)&&(t[a]=i)}),t}function Hve(r,e){if(e.onFrame)return r;var t=e.startTime,n=e.delay,i=e.duration,a=Object.prototype.hasOwnProperty;return De(r,function(o){t+n<o.startTime+o.delay+o.duration&&i>o.delay&&De(e.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var sW=function(r){nr(e,r);function e(t){var n=r.call(this,t)||this;n.attrs={};var i=n.getDefaultAttrs();return $t(i,t.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(Hi(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,n){var i=this.getClip();return i&&!i.isHit(t,n)},e.prototype.setAttr=function(t,n){var i=this.attrs[t];i!==n&&(this.attrs[t]=n,this.onAttrChange(t,n,i))},e.prototype.onAttrChange=function(t,n,i){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var n=this.getParent();n?(nW(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(WS,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(WS)},e.prototype.setMatrix=function(t){this.attr(WS,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?t=W3(i,n):t=n||i,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var n=this.attr("matrix"),i=null;t&&n?i=W3(t,n):i=n||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var n=this.attr("matrix");return n?dh(n,t):t},e.prototype.invertFromMatrix=function(t){var n=this.attr("matrix");if(n){var i=oW(n);if(i)return dh(i,t)}return t},e.prototype.setClip=function(t){var n=this.getCanvas(),i=null;if(t){var a=this.getShapeBase(),o=Fv(t.type),s=a[o];s&&(i=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,n=this.attrs,i={};De(n,function(s,l){Ft(n[l])?i[l]=Uve(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return De($ve,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},r.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=t[0],s=t[1],l=t[2],u=l===void 0?"easeLinear":l,f=t[3],c=f===void 0?Ig:f,h=t[4],d=h===void 0?0:h,v,p,g,m,b;Ln(o)?(v=o,o={}):Hi(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),Hi(s)?(b=s,s=b.duration,u=b.easing||"easeLinear",d=b.delay||0,p=b.repeat||p||!1,c=b.callback||Ig,g=b.pauseCallback||Ig,m=b.resumeCallback||Ig):(Pt(c)&&(d=c,c=null),Ln(u)?(c=u,u="easeLinear"):u=u||"easeLinear");var y=Vve(o,this),x={fromAttrs:Wve(y,this),toAttrs:y,duration:s,easing:u,repeat:p,callback:c,pauseCallback:g,resumeCallback:m,delay:d,startTime:i.getTime(),id:Dl(),onFrame:v,pathFormatted:!1};a.length>0?a=Hve(a,x):i.addAnimator(this),a.push(x),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var n=this;t===void 0&&(t=!0);var i=this.get("animations");De(i,function(a){t&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),n=this.get("animations"),i=t.getTime();return De(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),n=t.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return De(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(t,n){var i=this,a=n.propagationPath;this.getEvents();var o;t==="mouseenter"?o=n.fromShape:t==="mouseleave"&&(o=n.toShape);for(var s=function(c){var h=a[c],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&o&&iW(h,o))return"break";Ft(d)?De(d,function(v){i.emitDelegateEvent(h,v,n)}):l.emitDelegateEvent(h,d,n)}},l=this,u=0;u<a.length;u++){var f=s(u);if(f==="break")break}},e.prototype.emitDelegateEvent=function(t,n,i){var a=this.getEvents(),o=n+Gve+i.type;(a[o]||a[jve])&&(i.name=o,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(o,i))},e.prototype.translate=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=this.getMatrix(),a=ng(i,[["t",t,n]]);return this.setMatrix(a),this},e.prototype.move=function(t,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-i,n-a),this},e.prototype.moveTo=function(t,n){return this.move(t,n)},e.prototype.scale=function(t,n){var i=this.getMatrix(),a=ng(i,[["s",t,n||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var n=this.getMatrix(),i=ng(n,[["r",t]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(t){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=ng(o,[["t",-i,-a],["r",t],["t",i,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,n,i){var a=this.getMatrix(),o=ng(a,[["t",-t,-n],["r",i],["t",t,n]]);return this.setMatrix(o),this},e}(Cve),V3={},TA="_INDEX";function lW(r,e){if(r.set("canvas",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){lW(n,e)})}}function uW(r,e){if(r.set("timeline",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){uW(n,e)})}}function Xve(r,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),nW(r.getChildren(),e)}function Yve(r){return function(e,t){var n=r(e,t);return n===0?e[TA]-t[TA]:n}}var fW=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?De(o,function(l){var u=l.getBBox(),f=u.minX,c=u.maxX,h=u.minY,d=u.maxY;f<t&&(t=f),c>n&&(n=c),h<i&&(i=h),d>a&&(a=d)}):(t=0,n=0,i=0,a=0);var s={x:t,y:i,minX:t,minY:i,maxX:n,maxY:a,width:n-t,height:a-i};return s},e.prototype.getCanvasBBox=function(){var t=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?De(o,function(l){var u=l.getCanvasBBox(),f=u.minX,c=u.maxX,h=u.minY,d=u.maxY;f<t&&(t=f),c>n&&(n=c),h<i&&(i=h),d>a&&(a=d)}):(t=0,n=0,i=0,a=0);var s={x:t,y:i,minX:t,minY:i,maxX:n,maxY:a,width:n-t,height:a-i};return s},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,n,i){if(r.prototype.onAttrChange.call(this,t,n,i),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(t){var n=this.getChildren();De(n,function(i){i.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],a=t[1];Hi(i)?a=i:a.type=i;var o=V3[a.type];o||(o=Fv(a.type),V3[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},e.prototype.addGroup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],a=t[1],o;if(Ln(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,n,i){if(!AA(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,n,i);else{var s=[t,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},e.prototype._findShape=function(t,n,i,a){for(var o=null,s=t.length-1;s>=0;s--){var l=t[s];if(AA(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},e.prototype.add=function(t){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&Xve(o,t,!1),t.set("parent",this),n&&lW(t,n),a&&uW(t,a),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var n=this.getTotalMatrix();n&&t.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();De(t,function(n,i){return n[TA]=i,n}),t.sort(Yve(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),n=t.length-1;n>=0;n--)t[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var n=this.getChildren();return n[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var n=this.getChildren();return n.indexOf(t)>-1},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0),this.contain(t)&&t.remove(n)},e.prototype.findAll=function(t){var n=[],i=this.getChildren();return De(i,function(a){t(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(t)))}),n},e.prototype.find=function(t){var n=null,i=this.getChildren();return De(i,function(a){if(t(a)?n=a:a.isGroup()&&(n=a.find(t)),n)return!1}),n},e.prototype.findById=function(t){return this.find(function(n){return n.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(n){return n.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(n){return n.get("name")===t})},e}(sW),$v=0,Pg=0,ig=0,cW=1e3,nw,Dg,iw=0,jh=0,qE=0,B0=typeof performance=="object"&&performance.now?performance:Date,hW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function dW(){return jh||(hW(Kve),jh=B0.now()+qE)}function Kve(){jh=0}function OA(){this._call=this._time=this._next=null}OA.prototype=vW.prototype={constructor:OA,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?dW():+t)+(e==null?0:+e),!this._next&&Dg!==this&&(Dg?Dg._next=this:nw=this,Dg=this),this._call=r,this._time=t,kA()},stop:function(){this._call&&(this._call=null,this._time=1/0,kA())}};function vW(r,e,t){var n=new OA;return n.restart(r,e,t),n}function qve(){dW(),++$v;for(var r=nw,e;r;)(e=jh-r._time)>=0&&r._call.call(null,e),r=r._next;--$v}function H3(){jh=(iw=B0.now())+qE,$v=Pg=0;try{qve()}finally{$v=0,Qve(),jh=0}}function Zve(){var r=B0.now(),e=r-iw;e>cW&&(qE-=e,iw=r)}function Qve(){for(var r,e=nw,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:nw=t);Dg=r,kA(n)}function kA(r){if(!$v){Pg&&(Pg=clearTimeout(Pg));var e=r-jh;e>24?(r<1/0&&(Pg=setTimeout(H3,r-B0.now()-qE)),ig&&(ig=clearInterval(ig))):(ig||(iw=B0.now(),ig=setInterval(Zve,cW)),$v=1,hW(H3))}}function wI(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function pW(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Pm(){}var F0=.7,aw=1/F0,xv="\\s*([+-]?\\d+)\\s*",$0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jve=/^#([0-9a-f]{3,8})$/,epe=new RegExp(`^rgb\\(${xv},${xv},${xv}\\)$`),tpe=new RegExp(`^rgb\\(${Cl},${Cl},${Cl}\\)$`),rpe=new RegExp(`^rgba\\(${xv},${xv},${xv},${$0}\\)$`),npe=new RegExp(`^rgba\\(${Cl},${Cl},${Cl},${$0}\\)$`),ipe=new RegExp(`^hsl\\(${$0},${Cl},${Cl}\\)$`),ape=new RegExp(`^hsla\\(${$0},${Cl},${Cl},${$0}\\)$`),X3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wI(Pm,z0,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Y3,formatHex:Y3,formatHex8:ope,formatHsl:spe,formatRgb:K3,toString:K3});function Y3(){return this.rgb().formatHex()}function ope(){return this.rgb().formatHex8()}function spe(){return gW(this).formatHsl()}function K3(){return this.rgb().formatRgb()}function z0(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=Jve.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?q3(e):t===3?new Ua(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?v1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?v1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=epe.exec(r))?new Ua(e[1],e[2],e[3],1):(e=tpe.exec(r))?new Ua(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rpe.exec(r))?v1(e[1],e[2],e[3],e[4]):(e=npe.exec(r))?v1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ipe.exec(r))?J3(e[1],e[2]/100,e[3]/100,1):(e=ape.exec(r))?J3(e[1],e[2]/100,e[3]/100,e[4]):X3.hasOwnProperty(r)?q3(X3[r]):r==="transparent"?new Ua(NaN,NaN,NaN,0):null}function q3(r){return new Ua(r>>16&255,r>>8&255,r&255,1)}function v1(r,e,t,n){return n<=0&&(r=e=t=NaN),new Ua(r,e,t,n)}function lpe(r){return r instanceof Pm||(r=z0(r)),r?(r=r.rgb(),new Ua(r.r,r.g,r.b,r.opacity)):new Ua}function IA(r,e,t,n){return arguments.length===1?lpe(r):new Ua(r,e,t,n??1)}function Ua(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}wI(Ua,IA,pW(Pm,{brighter(r){return r=r==null?aw:Math.pow(aw,r),new Ua(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?F0:Math.pow(F0,r),new Ua(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Ua(Mh(this.r),Mh(this.g),Mh(this.b),ow(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Z3,formatHex:Z3,formatHex8:upe,formatRgb:Q3,toString:Q3}));function Z3(){return`#${vh(this.r)}${vh(this.g)}${vh(this.b)}`}function upe(){return`#${vh(this.r)}${vh(this.g)}${vh(this.b)}${vh((isNaN(this.opacity)?1:this.opacity)*255)}`}function Q3(){const r=ow(this.opacity);return`${r===1?"rgb(":"rgba("}${Mh(this.r)}, ${Mh(this.g)}, ${Mh(this.b)}${r===1?")":`, ${r})`}`}function ow(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Mh(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function vh(r){return r=Mh(r),(r<16?"0":"")+r.toString(16)}function J3(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new ws(r,e,t,n)}function gW(r){if(r instanceof ws)return new ws(r.h,r.s,r.l,r.opacity);if(r instanceof Pm||(r=z0(r)),!r)return new ws;if(r instanceof ws)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(t-n)/s+(t<n)*6:t===a?o=(n-e)/s+2:o=(e-t)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ws(o,s,l,r.opacity)}function fpe(r,e,t,n){return arguments.length===1?gW(r):new ws(r,e,t,n??1)}function ws(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}wI(ws,fpe,pW(Pm,{brighter(r){return r=r==null?aw:Math.pow(aw,r),new ws(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?F0:Math.pow(F0,r),new ws(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Ua(VS(r>=240?r-240:r+120,i,n),VS(r,i,n),VS(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new ws(e5(this.h),p1(this.s),p1(this.l),ow(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=ow(this.opacity);return`${r===1?"hsl(":"hsla("}${e5(this.h)}, ${p1(this.s)*100}%, ${p1(this.l)*100}%${r===1?")":`, ${r})`}`}}));function e5(r){return r=(r||0)%360,r<0?r+360:r}function p1(r){return Math.max(0,Math.min(1,r||0))}function VS(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const EI=r=>()=>r;function cpe(r,e){return function(t){return r+t*e}}function hpe(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function dpe(r){return(r=+r)==1?mW:function(e,t){return t-e?hpe(e,t,r):EI(isNaN(e)?t:e)}}function mW(r,e){var t=e-r;return t?cpe(r,t):EI(isNaN(r)?e:r)}const t5=function r(e){var t=dpe(e);function n(i,a){var o=t((i=IA(i)).r,(a=IA(a)).r),s=t(i.g,a.g),l=t(i.b,a.b),u=mW(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return n.gamma=r,n}(1);function yW(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(a){for(i=0;i<t;++i)n[i]=r[i]*(1-a)+e[i]*a;return n}}function bW(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function vpe(r,e){return(bW(e)?yW:xW)(r,e)}function xW(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),a=new Array(t),o;for(o=0;o<n;++o)i[o]=sw(r[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function ppe(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function LA(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function gpe(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=sw(r[i],e[i]):n[i]=e[i];return function(a){for(i in t)n[i]=t[i](a);return n}}var PA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HS=new RegExp(PA.source,"g");function mpe(r){return function(){return r}}function ype(r){return function(e){return r(e)+""}}function bpe(r,e){var t=PA.lastIndex=HS.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(r=r+"",e=e+"";(n=PA.exec(r))&&(i=HS.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:LA(n,i)})),t=HS.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?ype(l[0].x):mpe(e):(e=l.length,function(u){for(var f=0,c;f<e;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}function sw(r,e){var t=typeof e,n;return e==null||t==="boolean"?EI(e):(t==="number"?LA:t==="string"?(n=z0(e))?(e=n,t5):bpe:e instanceof z0?t5:e instanceof Date?ppe:bW(e)?yW:Array.isArray(e)?xW:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gpe:LA)(r,e)}function xpe(r){return+r}function wpe(r){return r*r}function Epe(r){return r*(2-r)}function r5(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function _pe(r){return r*r*r}function Spe(r){return--r*r*r+1}function n5(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var _I=3,Mpe=function r(e){e=+e;function t(n){return Math.pow(n,e)}return t.exponent=r,t}(_I),Cpe=function r(e){e=+e;function t(n){return 1-Math.pow(1-n,e)}return t.exponent=r,t}(_I),i5=function r(e){e=+e;function t(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return t.exponent=r,t}(_I),wW=Math.PI,EW=wW/2;function Ape(r){return+r==1?1:1-Math.cos(r*EW)}function Tpe(r){return Math.sin(r*EW)}function a5(r){return(1-Math.cos(wW*r))/2}function Zf(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function Ope(r){return Zf(1-+r)}function kpe(r){return 1-Zf(r)}function o5(r){return((r*=2)<=1?Zf(1-r):2-Zf(r-1))/2}function Ipe(r){return 1-Math.sqrt(1-r*r)}function Lpe(r){return Math.sqrt(1- --r*r)}function s5(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var DA=4/11,Ppe=6/11,Dpe=8/11,Npe=3/4,Rpe=9/11,Bpe=10/11,Fpe=15/16,$pe=21/22,zpe=63/64,g1=1/DA/DA;function Gpe(r){return 1-G0(1-r)}function G0(r){return(r=+r)<DA?g1*r*r:r<Dpe?g1*(r-=Ppe)*r+Npe:r<Bpe?g1*(r-=Rpe)*r+Fpe:g1*(r-=$pe)*r+zpe}function jpe(r){return((r*=2)<=1?1-G0(1-r):G0(r-1)+1)/2}var SI=1.70158,Upe=function r(e){e=+e;function t(n){return(n=+n)*n*(e*(n-1)+n)}return t.overshoot=r,t}(SI),Wpe=function r(e){e=+e;function t(n){return--n*n*((n+1)*e+n)+1}return t.overshoot=r,t}(SI),l5=function r(e){e=+e;function t(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return t.overshoot=r,t}(SI),zv=2*Math.PI,MI=1,CI=.3,Vpe=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=zv);function i(a){return e*Zf(- --a)*Math.sin((n-a)/t)}return i.amplitude=function(a){return r(a,t*zv)},i.period=function(a){return r(e,a)},i}(MI,CI),u5=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=zv);function i(a){return 1-e*Zf(a=+a)*Math.sin((a+n)/t)}return i.amplitude=function(a){return r(a,t*zv)},i.period=function(a){return r(e,a)},i}(MI,CI),Hpe=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=zv);function i(a){return((a=a*2-1)<0?e*Zf(-a)*Math.sin((n-a)/t):2-e*Zf(a)*Math.sin((n+a)/t))/2}return i.amplitude=function(a){return r(a,t*zv)},i.period=function(a){return r(e,a)},i}(MI,CI);const Xpe=Object.freeze(Object.defineProperty({__proto__:null,easeBack:l5,easeBackIn:Upe,easeBackInOut:l5,easeBackOut:Wpe,easeBounce:G0,easeBounceIn:Gpe,easeBounceInOut:jpe,easeBounceOut:G0,easeCircle:s5,easeCircleIn:Ipe,easeCircleInOut:s5,easeCircleOut:Lpe,easeCubic:n5,easeCubicIn:_pe,easeCubicInOut:n5,easeCubicOut:Spe,easeElastic:u5,easeElasticIn:Vpe,easeElasticInOut:Hpe,easeElasticOut:u5,easeExp:o5,easeExpIn:Ope,easeExpInOut:o5,easeExpOut:kpe,easeLinear:xpe,easePoly:i5,easePolyIn:Mpe,easePolyInOut:i5,easePolyOut:Cpe,easeQuad:r5,easeQuadIn:wpe,easeQuadInOut:r5,easeQuadOut:Epe,easeSin:a5,easeSinIn:Ape,easeSinInOut:a5,easeSinOut:Tpe},Symbol.toStringTag,{value:"Module"}));var Ype={};function Kpe(r){return Ype[r.toLowerCase()]||Xpe[r]}var qpe=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},Zpe=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},f5=[1,0,0,0,1,0,0,0,1];function Qpe(r,e,t){var n={},i=e.fromAttrs,a=e.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!qf(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=lv(a[s]),u=lv(i[s]),u=eW(u,l),u=CA(u,l),e.fromAttrs.path=u,e.toAttrs.path=l):e.pathFormatted||(l=lv(a[s]),u=lv(i[s]),u=CA(u,l),e.fromAttrs.path=u,e.toAttrs.path=l,e.pathFormatted=!0),n[s]=[];for(var f=0;f<l.length;f++){for(var c=l[f],h=u[f],d=[],v=0;v<c.length;v++)Pt(c[v])&&h&&Pt(h[v])?(o=sw(h[v],c[v]),d.push(o(t))):d.push(c[v]);n[s].push(d)}}else if(s==="matrix"){var p=vpe(i[s]||f5,a[s]||f5),g=p(t);n[s]=g}else qpe(s)&&Zpe(a[s])?n[s]=a[s]:Ln(a[s])||(o=sw(i[s],a[s]),n[s]=o(t));r.attr(n)}}function Jpe(r,e,t){var n=e.startTime,i=e.delay;if(t<n+i||e._paused)return!1;var a,o=e.duration,s=e.easing,l=Kpe(s);if(t=t-n-e.delay,e.repeat)a=t%o/o,a=l(a);else if(a=t/o,a<1)a=l(a);else return e.onFrame?r.attr(e.onFrame(1)):r.attr(e.toAttrs),!0;if(e.onFrame){var u=e.onFrame(a);r.attr(u)}else Qpe(r,e,a);return!1}var ege=function(){function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return r.prototype.initTimer=function(){var e=this,t=!1,n,i,a;this.timer=vW(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(n=e.animators[s],n.destroyed){e.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],t=Jpe(n,a,o),t&&(i.splice(l,1),t=!1,a.callback&&a.callback())}i.length===0&&e.removeAnimator(s)}var u=e.canvas.get("autoDraw");u||e.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),tge=40,c5=0,h5=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function d5(r,e,t){t.name=e,t.target=r,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}function rge(r,e,t){if(t.bubbles){var n=void 0,i=!1;if(e==="mouseenter"?(n=t.fromShape,i=!0):e==="mouseleave"&&(i=!0,n=t.toShape),r.isCanvas()&&i)return;if(n&&iW(r,n)){t.bubbles=!1;return}t.name=e,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}}var nge=function(){function r(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;t._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=t.canvas,a=i.get("el");if(a!==n.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(n);t.dragging&&t._emitEvent("drag",n,o,t.draggingShape)}},this._onDocumentMouseUp=function(n){var i=t.canvas,a=i.get("el");if(a!==n.target&&t.dragging){var o=t._getPointInfo(n);t.draggingShape&&t._emitEvent("drop",n,o,null),t._emitEvent("dragend",n,o,t.draggingShape),t._afterDrag(t.draggingShape,o,n)}},this.canvas=e.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");De(h5,function(n){t.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");De(h5,function(n){t.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(e,t,n,i,a,o){var s=new rW(e,t);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},r.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),i=t.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),i=this._getShape(n,t),a=this["_on"+e],o=!1;if(a)a.call(this,n,i,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,n,null,null,i),i&&this._emitEvent(e,t,n,i,null,i),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,n,s,s,null),this._emitEvent(e,t,n,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(e,t,n){n.button===c5&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},r.prototype._emitMouseoverEvents=function(e,t,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,t,n,n,i),this._emitEvent("mouseleave",e,t,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,t,i,n,i),this._emitEvent("mouseenter",e,t,i,n,i)))},r.prototype._emitDragoverEvents=function(e,t,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,i),this._emitEvent("dragenter",e,t,i,n,i)),a||this._emitEvent("dragover",e,t,i)):n&&this._emitEvent("dragleave",e,t,n,n,i),a&&this._emitEvent("dragover",e,t,i)},r.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,n);i!==e&&this._emitMouseoverEvents(n,t,e,i),this.currentShape=i},r.prototype._onmouseup=function(e,t,n){if(n.button===c5){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(e,t,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,e,i,t,!0)},r.prototype._onmousemove=function(e,t,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,a,t,!1),this._emitEvent("drag",n,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,f=u-this.mousedownTimeStamp,c=s.clientX-e.clientX,h=s.clientY-e.clientY,d=c*c+h*h;f>120||d>tge?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t)}},r.prototype._emitEvent=function(e,t,n,i,a,o){var s=this._getEventObj(e,t,n,i,a,o);if(i){s.shape=i,d5(i,e,s);for(var l=i.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||rge(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;d5(u,e,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),v5="px",p5=aW(),ige=p5&&p5.name==="firefox",_W=function(r){nr(e,r);function e(t){var n=r.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");tt(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var n=this.get("container");n.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new nge({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new ege(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,n){var i=this.get("el");$3&&(i.style.width=t+v5,i.style.height=n+v5)},e.prototype.changeSize=function(t,n){this.setDOMSize(t,n),this.set("width",t),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var n=this.get("el");$3&&n&&(n.style.cursor=t)},e.prototype.getPointByEvent=function(t){var n=this.get("supportCSSTransform");if(n){if(ige&&!Lt(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!Lt(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var i=this.getClientByEvent(t),a=i.x,o=i.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var n=t;return t.touches&&(t.type==="touchend"?n=t.changedTouches[0]:n=t.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(t,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t-a.left,y:n-a.top}},e.prototype.getClientByPoint=function(t,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t+a.left,y:n+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},e}(fW),SW=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];t.add(a.clone())}return t},e}(fW),MW=function(r){nr(e,r);function e(t){return r.call(this,t)||this}return e.prototype._isInBBox=function(t,n){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=n&&i.maxY>=n},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){r.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),n=this.getTotalMatrix(),i=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(n){var l=dh(n,[t.minX,t.minY]),u=dh(n,[t.maxX,t.minY]),f=dh(n,[t.minX,t.maxY]),c=dh(n,[t.maxX,t.maxY]);i=Math.min(l[0],u[0],f[0],c[0]),o=Math.max(l[0],u[0],f[0],c[0]),a=Math.min(l[1],u[1],f[1],c[1]),s=Math.max(l[1],u[1],f[1],c[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,v=d===void 0?0:d,p=h.shadowOffsetX,g=p===void 0?0:p,m=h.shadowOffsetY,b=m===void 0?0:m,y=i-v+g,x=o+v+g,w=a-v+b,E=s+v+b;i=Math.min(i,y),o=Math.max(o,x),a=Math.min(a,w),s=Math.max(s,E)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},e}(sW),CW=new Map;function zl(r,e){CW.set(r,e)}function AW(r){return CW.get(r)}function TW(r){var e=r.attr(),t=e.x,n=e.y,i=e.width,a=e.height;return{x:t,y:n,width:i,height:a}}function OW(r){var e=r.attr(),t=e.x,n=e.y,i=e.r;return{x:t-i,y:n-i,width:i*2,height:i*2}}function pa(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function rx(r,e){return Math.abs(r-e)<.001}function Sp(r,e){var t=Pl(r),n=Pl(e),i=Ll(r),a=Ll(e);return{x:t,y:n,width:i-t,height:a-n}}function ZE(r){return(r+Math.PI*2)%(Math.PI*2)}const Vi={box:function(r,e,t,n){return Sp([r,t],[e,n])},length:function(r,e,t,n){return pa(r,e,t,n)},pointAt:function(r,e,t,n,i){return{x:(1-i)*r+i*t,y:(1-i)*e+i*n}},pointDistance:function(r,e,t,n,i,a){var o=(t-r)*(i-r)+(n-e)*(a-e);if(o<0)return pa(r,e,i,a);var s=(t-r)*(t-r)+(n-e)*(n-e);return o>s?pa(t,n,i,a):this.pointToLine(r,e,t,n,i,a)},pointToLine:function(r,e,t,n,i,a){var o=[t-r,n-e];if(lI(o,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-e)*(a-e));var s=[-o[1],o[0]];Wf(s,s);var l=[i-r,a-e];return Math.abs(sI(l,s))},tangentAngle:function(r,e,t,n){return Math.atan2(n-e,t-r)}};var age=1e-4;function kW(r,e,t,n,i,a){var o,s=1/0,l=[t,n],u=20;a&&a>200&&(u=a/10);for(var f=1/u,c=f/10,h=0;h<=u;h++){var d=h*f,v=[i.apply(null,r.concat([d])),i.apply(null,e.concat([d]))],p=pa(l[0],l[1],v[0],v[1]);p<s&&(o=d,s=p)}if(o===0)return{x:r[0],y:e[0]};if(o===1){var g=r.length;return{x:r[g-1],y:e[g-1]}}s=1/0;for(var h=0;h<32&&!(c<age);h++){var m=o-c,b=o+c,v=[i.apply(null,r.concat([m])),i.apply(null,e.concat([m]))],p=pa(l[0],l[1],v[0],v[1]);if(m>=0&&p<s)o=m,s=p;else{var y=[i.apply(null,r.concat([b])),i.apply(null,e.concat([b]))],x=pa(l[0],l[1],y[0],y[1]);b<=1&&x<s?(o=b,s=x):c*=.5}}return{x:i.apply(null,r.concat([o])),y:i.apply(null,e.concat([o]))}}function oge(r,e){for(var t=0,n=r.length,i=0;i<n;i++){var a=r[i],o=e[i],s=r[(i+1)%n],l=e[(i+1)%n];t+=pa(a,o,s,l)}return t/2}function Ef(r,e,t,n){var i=1-n;return i*i*r+2*n*i*e+n*n*t}function g5(r,e,t){var n=r+t-2*e;if(rx(n,0))return[.5];var i=(r-e)/n;return i<=1&&i>=0?[i]:[]}function m5(r,e,t,n){return 2*(1-n)*(e-r)+2*n*(t-e)}function IW(r,e,t,n,i,a,o){var s=Ef(r,t,i,o),l=Ef(e,n,a,o),u=Vi.pointAt(r,e,t,n,o),f=Vi.pointAt(t,n,i,a,o);return[[r,e,u.x,u.y,s,l],[s,l,f.x,f.y,i,a]]}function NA(r,e,t,n,i,a,o){if(o===0)return(pa(r,e,t,n)+pa(t,n,i,a)+pa(r,e,i,a))/2;var s=IW(r,e,t,n,i,a,.5),l=s[0],u=s[1];return l.push(o-1),u.push(o-1),NA.apply(null,l)+NA.apply(null,u)}const LW={box:function(r,e,t,n,i,a){var o=g5(r,t,i)[0],s=g5(e,n,a)[0],l=[r,i],u=[e,a];return o!==void 0&&l.push(Ef(r,t,i,o)),s!==void 0&&u.push(Ef(e,n,a,s)),Sp(l,u)},length:function(r,e,t,n,i,a){return NA(r,e,t,n,i,a,3)},nearestPoint:function(r,e,t,n,i,a,o,s){return kW([r,t,i],[e,n,a],o,s,Ef)},pointDistance:function(r,e,t,n,i,a,o,s){var l=this.nearestPoint(r,e,t,n,i,a,o,s);return pa(l.x,l.y,o,s)},interpolationAt:Ef,pointAt:function(r,e,t,n,i,a,o){return{x:Ef(r,t,i,o),y:Ef(e,n,a,o)}},divide:function(r,e,t,n,i,a,o){return IW(r,e,t,n,i,a,o)},tangentAngle:function(r,e,t,n,i,a,o){var s=m5(r,t,i,o),l=m5(e,n,a,o),u=Math.atan2(l,s);return ZE(u)}};function _f(r,e,t,n,i){var a=1-i;return a*a*a*r+3*e*i*a*a+3*t*i*i*a+n*i*i*i}function y5(r,e,t,n,i){var a=1-i;return 3*(a*a*(e-r)+2*a*i*(t-e)+i*i*(n-t))}function XS(r,e,t,n){var i=-3*r+9*e-9*t+3*n,a=6*r-12*e+6*t,o=3*e-3*r,s=[],l,u,f;if(rx(i,0))rx(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var c=a*a-4*i*o;rx(c,0)?s.push(-a/(2*i)):c>0&&(f=Math.sqrt(c),l=(-a+f)/(2*i),u=(-a-f)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function PW(r,e,t,n,i,a,o,s,l){var u=_f(r,t,i,o,l),f=_f(e,n,a,s,l),c=Vi.pointAt(r,e,t,n,l),h=Vi.pointAt(t,n,i,a,l),d=Vi.pointAt(i,a,o,s,l),v=Vi.pointAt(c.x,c.y,h.x,h.y,l),p=Vi.pointAt(h.x,h.y,d.x,d.y,l);return[[r,e,c.x,c.y,v.x,v.y,u,f],[u,f,p.x,p.y,d.x,d.y,o,s]]}function RA(r,e,t,n,i,a,o,s,l){if(l===0)return oge([r,t,i,o],[e,n,a,s]);var u=PW(r,e,t,n,i,a,o,s,.5),f=u[0],c=u[1];return f.push(l-1),c.push(l-1),RA.apply(null,f)+RA.apply(null,c)}const r0={extrema:XS,box:function(r,e,t,n,i,a,o,s){for(var l=[r,o],u=[e,s],f=XS(r,t,i,o),c=XS(e,n,a,s),h=0;h<f.length;h++)l.push(_f(r,t,i,o,f[h]));for(var h=0;h<c.length;h++)u.push(_f(e,n,a,s,c[h]));return Sp(l,u)},length:function(r,e,t,n,i,a,o,s){return RA(r,e,t,n,i,a,o,s,3)},nearestPoint:function(r,e,t,n,i,a,o,s,l,u,f){return kW([r,t,i,o],[e,n,a,s],l,u,_f,f)},pointDistance:function(r,e,t,n,i,a,o,s,l,u,f){var c=this.nearestPoint(r,e,t,n,i,a,o,s,l,u,f);return pa(c.x,c.y,l,u)},interpolationAt:_f,pointAt:function(r,e,t,n,i,a,o,s,l){return{x:_f(r,t,i,o,l),y:_f(e,n,a,s,l)}},divide:function(r,e,t,n,i,a,o,s,l){return PW(r,e,t,n,i,a,o,s,l)},tangentAngle:function(r,e,t,n,i,a,o,s,l){var u=y5(r,t,i,o,l),f=y5(e,n,a,s,l);return ZE(Math.atan2(f,u))}};function b5(r,e){var t=Math.abs(r);return e>0?t:t*-1}const sge={box:function(r,e,t,n){return{x:r-t,y:e-n,width:t*2,height:n*2}},length:function(r,e,t,n){return Math.PI*(3*(t+n)-Math.sqrt((3*t+n)*(t+3*n)))},nearestPoint:function(r,e,t,n,i,a){var o=t,s=n;if(o===0||s===0)return{x:r,y:e};for(var l=i-r,u=a-e,f=Math.abs(l),c=Math.abs(u),h=o*o,d=s*s,v=Math.PI/4,p,g,m=0;m<4;m++){p=o*Math.cos(v),g=s*Math.sin(v);var b=(h-d)*Math.pow(Math.cos(v),3)/o,y=(d-h)*Math.pow(Math.sin(v),3)/s,x=p-b,w=g-y,E=f-b,_=c-y,S=Math.hypot(w,x),C=Math.hypot(_,E),M=S*Math.asin((x*_-w*E)/(S*C)),T=M/Math.sqrt(h+d-p*p-g*g);v+=T,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:r+b5(p,l),y:e+b5(g,u)}},pointDistance:function(r,e,t,n,i,a){var o=this.nearestPoint(r,e,t,n,i,a);return pa(o.x,o.y,i,a)},pointAt:function(r,e,t,n,i){var a=2*Math.PI*i;return{x:r+t*Math.cos(a),y:e+n*Math.sin(a)}},tangentAngle:function(r,e,t,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-t*Math.sin(a));return ZE(o)}};function lge(r,e,t,n,i,a,o,s){return-1*t*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function uge(r,e,t,n,i,a,o,s){return-1*t*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function fge(r,e,t){return Math.atan(-e/r*Math.tan(t))}function cge(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function x5(r,e,t,n,i,a){return t*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function w5(r,e,t,n,i,a){return t*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function hge(r,e,t,n){var i=Math.atan2(n*r,t*e);return(i+Math.PI*2)%(Math.PI*2)}function E5(r,e,t){return{x:r*Math.cos(t),y:e*Math.sin(t)}}function _5(r,e,t){var n=Math.cos(t),i=Math.sin(t);return[r*n-e*i,r*i+e*n]}const dge={box:function(r,e,t,n,i,a,o){for(var s=fge(t,n,i),l=1/0,u=-1/0,f=[a,o],c=-Math.PI*2;c<=Math.PI*2;c+=Math.PI){var h=s+c;a<o?a<h&&h<o&&f.push(h):o<h&&h<a&&f.push(h)}for(var c=0;c<f.length;c++){var d=x5(r,e,t,n,i,f[c]);d<l&&(l=d),d>u&&(u=d)}for(var v=cge(t,n,i),p=1/0,g=-1/0,m=[a,o],c=-Math.PI*2;c<=Math.PI*2;c+=Math.PI){var b=v+c;a<o?a<b&&b<o&&m.push(b):o<b&&b<a&&m.push(b)}for(var c=0;c<m.length;c++){var y=w5(r,e,t,n,i,m[c]);y<p&&(p=y),y>g&&(g=y)}return{x:l,y:p,width:u-l,height:g-p}},length:function(r,e,t,n,i,a,o){},nearestPoint:function(r,e,t,n,i,a,o,s,l){var u=_5(s-r,l-e,-i),f=u[0],c=u[1],h=sge.nearestPoint(0,0,t,n,f,c),d=hge(t,n,h.x,h.y);d<a?h=E5(t,n,a):d>o&&(h=E5(t,n,o));var v=_5(h.x,h.y,i);return{x:v[0]+r,y:v[1]+e}},pointDistance:function(r,e,t,n,i,a,o,s,l){var u=this.nearestPoint(r,e,t,n,s,l);return pa(u.x,u.y,s,l)},pointAt:function(r,e,t,n,i,a,o,s){var l=(o-a)*s+a;return{x:x5(r,e,t,n,i,l),y:w5(r,e,t,n,i,l)}},tangentAngle:function(r,e,t,n,i,a,o,s){var l=(o-a)*s+a,u=lge(r,e,t,n,i,a,o,l),f=uge(r,e,t,n,i,a,o,l);return ZE(Math.atan2(f,u))}};function DW(r){for(var e=0,t=[],n=0;n<r.length-1;n++){var i=r[n],a=r[n+1],o=pa(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function vge(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],i=r[t+1];e+=pa(n[0],n[1],i[0],i[1])}return e}function pge(r,e){if(e>1||e<0||r.length<2)return null;var t=DW(r),n=t.segments,i=t.totalLength;if(i===0)return{x:r[0][0],y:r[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],u=l.from,f=l.to,c=l.length/i;if(e>=a&&e<=a+c){var h=(e-a)/c;o=Vi.pointAt(u[0],u[1],f[0],f[1],h);break}a+=c}return o}function gge(r,e){if(e>1||e<0||r.length<2)return 0;for(var t=DW(r),n=t.segments,i=t.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],u=l.from,f=l.to,c=l.length/i;if(e>=a&&e<=a+c){o=Math.atan2(f[1]-u[1],f[0]-u[0]);break}a+=c}return o}function mge(r,e,t){for(var n=1/0,i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],s=Vi.pointDistance(a[0],a[1],o[0],o[1],e,t);s<n&&(n=s)}return n}const NW={box:function(r){for(var e=[],t=[],n=0;n<r.length;n++){var i=r[n];e.push(i[0]),t.push(i[1])}return Sp(e,t)},length:function(r){return vge(r)},pointAt:function(r,e){return pge(r,e)},pointDistance:function(r,e,t){return mge(r,e,t)},tangentAngle:function(r,e){return gge(r,e)}};function S5(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function AI(r,e){var t=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return t&&(i=t.getCanvasBBox(),e=S5(e,i)),n&&(a=n.getCanvasBBox(),e=S5(e,a)),e}function yge(r){for(var e=r.attr(),t=e.points,n=[],i=[],a=0;a<t.length;a++){var o=t[a];n.push(o[0]),i.push(o[1])}var s=Sp(n,i),l=s.x,u=s.y,f=s.width,c=s.height,h={minX:l,minY:u,maxX:l+f,maxY:u+c};return h=AI(r,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function bge(r){for(var e=r.attr(),t=e.points,n=[],i=[],a=0;a<t.length;a++){var o=t[a];n.push(o[0]),i.push(o[1])}return Sp(n,i)}var YS=null;function RW(){if(!YS){var r=document.createElement("canvas");r.width=1,r.height=1,YS=r.getContext("2d")}return YS}function BW(r,e,t){var n=1;if(tt(r)&&(n=r.split(`
`).length),n>1){var i=xge(e,t);return e*n+i*(n-1)}return e}function xge(r,e){return e?e-r:r*.14}function wge(r,e){var t=RW(),n=0;if(Lt(r)||r==="")return n;if(t.save(),t.font=e,tt(r)&&r.includes(`
`)){var i=r.split(`
`);De(i,function(a){var o=t.measureText(a).width;n<o&&(n=o)})}else n=t.measureText(r).width;return t.restore(),n}function FW(r){var e=r.fontSize,t=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,e+"px",t].join(" ").trim()}function Ege(r){var e=r.attr(),t=e.x,n=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=FW(e));var l=wge(i,s),u;if(!l)u={x:t,y:n,width:0,height:0};else{var f=e.textAlign,c=e.textBaseline,h=BW(i,a,o),d={x:t,y:n-h};f&&(f==="end"||f==="right"?d.x-=l:f==="center"&&(d.x-=l/2)),c&&(c==="top"?d.y+=h:c==="middle"&&(d.y+=h/2)),u={x:d.x,y:d.y,width:l,height:h}}return u}var _ge=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Sge=/[^\s\,]+/ig;function Mge(r){var e=r||[];if(Ft(e))return e;if(tt(e))return e=e.match(_ge),De(e,function(t,n){if(t=t.match(Sge),t[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}De(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[n]=t}),e}function Cge(r,e,t,n){var i=[],a=!!n,o,s,l,u,f,c,h;if(a){l=n[0],u=n[1];for(var d=0,v=r.length;d<v;d+=1){var p=r[d];l=pf([0,0],l,p),u=gf([0,0],u,p)}}for(var d=0,g=r.length;d<g;d+=1){var p=r[d];if(d===0&&!t)h=p;else if(d===g-1&&!t)c=p,i.push(h),i.push(c);else{var m=[d?d-1:g-1,d-1][t?0:1];o=r[m],s=r[t?(d+1)%g:d+1];var b=[0,0];b=qb(b,s,o),b=ha(b,b,e);var y=Zx(p,o),x=Zx(p,s),w=y+x;w!==0&&(y/=w,x/=w);var E=ha([0,0],b,-y),_=ha([0,0],b,x);c=ji([0,0],p,E),f=ji([0,0],p,_),f=pf([0,0],f,gf([0,0],s,p)),f=gf([0,0],f,pf([0,0],s,p)),E=qb([0,0],f,p),E=ha([0,0],E,-y/x),c=ji([0,0],p,E),c=pf([0,0],c,gf([0,0],o,p)),c=gf([0,0],c,pf([0,0],o,p)),_=qb([0,0],p,c),_=ha([0,0],_,x/y),f=ji([0,0],p,_),a&&(c=gf([0,0],c,l),c=pf([0,0],c,u),f=gf([0,0],f,l),f=pf([0,0],f,u)),i.push(h),i.push(c),h=f}}return t&&i.push(i.shift()),i}function $W(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var n=!!e,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=Cge(i,.4,n,t),l=i.length,u=[],f,c,h,a=0;a<l-1;a+=1)f=s[a*2],c=s[a*2+1],h=i[a+1],u.push(["C",f[0],f[1],c[0],c[1],h[0],h[1]]);return n&&(f=s[l],c=s[l+1],h=i[0],u.push(["C",f[0],f[1],c[0],c[1],h[0],h[1]])),u}var n0=`	
\v\f\r   ᠎             　\u2028\u2029`,Age=new RegExp("([a-z])["+n0+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+n0+"]*,?["+n0+"]*)+)","ig"),Tge=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+n0+"]*,?["+n0+"]*","ig");function BA(r){if(!r)return null;if(Ft(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(Age,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Tge,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Oge=/[a-z]/;function M5(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function zW(r){var e=BA(r);if(!e||!e.length)return[["M",0,0]];for(var t=!1,n=0;n<e.length;n++){var i=e[n][0];if(Oge.test(i)||["V","H","T","S"].indexOf(i)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,l=0,u=0,f=0,c=e[0];(c[0]==="M"||c[0]==="m")&&(o=+c[1],s=+c[2],l=o,u=s,f++,a[0]=["M",o,s]);for(var n=f,h=e.length;n<h;n++){var d=e[n],v=a[n-1],p=[],i=d[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+d[6]+o,p[7]=+d[7]+s;break;case"V":p[1]=+d[1]+s;break;case"H":p[1]=+d[1]+o;break;case"M":l=+d[1]+o,u=+d[2]+s,p[1]=l,p[2]=u;break;default:for(var m=1,b=d.length;m<b;m++)p[m]=+d[m]+(m%2?o:s)}else p=e[n];switch(g){case"Z":o=+l,s=+u;break;case"H":o=p[1],p=["L",o,s];break;case"V":s=p[1],p=["L",o,s];break;case"T":o=p[1],s=p[2];var y=M5([v[1],v[2]],[v[3],v[4]]);p=["Q",y[0],y[1],o,s];break;case"S":o=p[p.length-2],s=p[p.length-1];var x=v.length,w=M5([v[x-4],v[x-3]],[v[x-2],v[x-1]]);p=["C",w[0],w[1],p[1],p[2],o,s];break;case"M":l=p[p.length-2],u=p[p.length-1];break;default:o=p[p.length-2],s=p[p.length-1]}a.push(p)}return a}function m1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function FA(r,e){return m1(r)*m1(e)?(r[0]*e[0]+r[1]*e[1])/(m1(r)*m1(e)):1}function C5(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(FA(r,e))}function $A(r,e){return r[0]===e[0]&&r[1]===e[1]}function kge(r,e){var t=e[1],n=e[2],i=WE(VE(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],l=r[1],u=e[6],f=e[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-f)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-f)/2,d=c*c/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var v=t*t*(h*h)+n*n*(c*c),p=v?Math.sqrt((t*t*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*t*h/n:0,m=t?p*-n*c/t:0,b=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,y=(l+f)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(c-g)/t,(h-m)/n],w=[(-1*c-g)/t,(-1*h-m)/n],E=C5([1,0],x),_=C5(x,w);return FA(x,w)<=-1&&(_=Math.PI),FA(x,w)>=1&&(_=0),o===0&&_>0&&(_=_-2*Math.PI),o===1&&_<0&&(_=_+2*Math.PI),{cx:b,cy:y,rx:$A(r,[u,f])?0:t,ry:$A(r,[u,f])?0:n,startAngle:E,endAngle:E+_,xRotation:i,arcFlag:a,sweepFlag:o}}function A5(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function GW(r){r=Mge(r);for(var e=[],t=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var l=r[s];n=r[s+1];var u=l[0],f={command:u,prePoint:t,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var c=kge(t,l);f.arcParams=c;break}if(u==="Z")t=i,n=r[a+1];else{var h=l.length;t=[l[h-2],l[h-1]]}n&&n[0]==="Z"&&(n=r[a],e[a]&&(e[a].prePoint=t)),f.currentPoint=t,e[a]&&$A(t,e[a].currentPoint)&&(e[a].prePoint=f.prePoint);var d=n?[n[n.length-2],n[n.length-1]]:null;f.nextPoint=d;var v=f.prePoint;if(["L","H","V"].includes(u))f.startTangent=[v[0]-t[0],v[1]-t[1]],f.endTangent=[t[0]-v[0],t[1]-v[1]];else if(u==="Q"){var p=[l[1],l[2]];f.startTangent=[v[0]-p[0],v[1]-p[1]],f.endTangent=[t[0]-p[0],t[1]-p[1]]}else if(u==="T"){var g=e[s-1],p=A5(g.currentPoint,v);g.command==="Q"?(f.command="Q",f.startTangent=[v[0]-p[0],v[1]-p[1]],f.endTangent=[t[0]-p[0],t[1]-p[1]]):(f.command="TL",f.startTangent=[v[0]-t[0],v[1]-t[1]],f.endTangent=[t[0]-v[0],t[1]-v[1]])}else if(u==="C"){var m=[l[1],l[2]],b=[l[3],l[4]];f.startTangent=[v[0]-m[0],v[1]-m[1]],f.endTangent=[t[0]-b[0],t[1]-b[1]],f.startTangent[0]===0&&f.startTangent[1]===0&&(f.startTangent=[m[0]-b[0],m[1]-b[1]]),f.endTangent[0]===0&&f.endTangent[1]===0&&(f.endTangent=[b[0]-m[0],b[1]-m[1]])}else if(u==="S"){var g=e[s-1],m=A5(g.currentPoint,v),b=[l[1],l[2]];g.command==="C"?(f.command="C",f.startTangent=[v[0]-m[0],v[1]-m[1]],f.endTangent=[t[0]-b[0],t[1]-b[1]]):(f.command="SQ",f.startTangent=[v[0]-b[0],v[1]-b[1]],f.endTangent=[t[0]-b[0],t[1]-b[1]])}else if(u==="A"){var y=.001,x=f.arcParams||{},w=x.cx,E=w===void 0?0:w,_=x.cy,S=_===void 0?0:_,C=x.rx,M=C===void 0?0:C,T=x.ry,A=T===void 0?0:T,O=x.sweepFlag,L=O===void 0?0:O,N=x.startAngle,P=N===void 0?0:N,R=x.endAngle,G=R===void 0?0:R;L===0&&(y*=-1);var D=M*Math.cos(P-y)+E,B=A*Math.sin(P-y)+S;f.startTangent=[D-i[0],B-i[1]];var Y=M*Math.cos(P+G+y)+E,ee=A*Math.sin(P+G-y)+S;f.endTangent=[v[0]-Y,v[1]-ee]}e.push(f)}return e}function Ige(r,e){for(var t=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,u=o.prePoint,f=void 0;switch(o.command){case"Q":f=LW.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":f=r0.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var c=o.arcParams;f=dge.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:t.push(s[0]),n.push(s[1]);break}f&&(o.box=f,t.push(f.x,f.x+f.width),n.push(f.y,f.y+f.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}t=t.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var h=Pl(t),d=Pl(n),v=Ll(t),p=Ll(n);if(i.length===0)return{x:h,y:d,width:v-h,height:p-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===h?(g=y1(o,e),h=h-g.xExtra):s[0]===v&&(g=y1(o,e),v=v+g.xExtra),s[1]===d?(g=y1(o,e),d=d-g.yExtra):s[1]===p&&(g=y1(o,e),p=p+g.yExtra)}return{x:h,y:d,width:v-h,height:p-d}}function y1(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||W9(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),f=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,f=f>Math.PI/2?Math.PI-f:f;var c={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(f-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return c}function Lge(r){var e=r.attr(),t=e.path,n=e.stroke,i=n?e.lineWidth:0,a=r.get("segments")||GW(t),o=Ige(a,i),s=o.x,l=o.y,u=o.width,f=o.height,c={minX:s,minY:l,maxX:s+u,maxY:l+f};return c=AI(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Pge(r){var e=r.attr(),t=e.x1,n=e.y1,i=e.x2,a=e.y2,o=Math.min(t,i),s=Math.max(t,i),l=Math.min(n,a),u=Math.max(n,a),f={minX:o,maxX:s,minY:l,maxY:u};return f=AI(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function Dge(r){var e=r.attr(),t=e.x,n=e.y,i=e.rx,a=e.ry;return{x:t-i,y:n-a,width:i*2,height:a*2}}zl("rect",TW);zl("image",TW);zl("circle",OW);zl("marker",OW);zl("polyline",yge);zl("polygon",bge);zl("text",Ege);zl("path",Lge);zl("line",Pge);zl("ellipse",Dge);var Nge=function(r){nr(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return e}(rW),zA=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},TI=function(e){if(Ft(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(Pt(e))return[e,e,e,e];if(tt(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},Rge=function(e){var t=new Nge(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Bge=function(e){if(!e)return!1;for(var t=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<t;i++)if(e[i]!==n[i])return!0;return!1},fl=function(e){return Number.isNaN(Number(e))},jW=function(e){for(var t=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],l=s.getBBox(),u=l.minX,f=l.minY,c=l.maxX,h=l.maxY;u<t&&(t=u),f<i&&(i=f),c>n&&(n=c),h>a&&(a=h)}var d=Math.floor(t),v=Math.floor(i),p=Math.ceil(n)-Math.floor(t),g=Math.ceil(a)-Math.floor(i);return{x:d,y:v,width:p,height:g,minX:t,minY:i,maxX:n,maxY:a}},Fge=function(e,t,n,i,a){t===void 0&&(t=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},f=[],c={},h=0;h<o;h++){var d=e[h],v=d.source,p=d.target,g="".concat(v,"-").concat(p);if(!f[h]){u[g]||(u[g]=[]),f[h]=!0,u[g].push(d);for(var m=0;m<o;m++)if(h!==m){var b=e[m],y=b.source,x=b.target;f[m]||(v===x&&p===y?(u[g].push(b),f[m]=!0,c["".concat(y,"|").concat(x,"|").concat(u[g].length-1)]=!0):v===y&&p===x&&(u[g].push(b),f[m]=!0))}}}for(var w in u)for(var E=u[w],_=E.length,S=0;S<_;S++){var C=E[S];if(C.source===C.target){a&&(C.type=a),C.loopCfg={position:l[S%8],dist:Math.floor(S/8)*20+50};continue}if(_===1&&i&&C.source!==C.target){C.type=i;continue}C.type=n;var M=(S%2===0?1:-1)*(c["".concat(C.source,"|").concat(C.target,"|").concat(S)]?-1:1);_%2===1?C.curveOffset=M*Math.ceil(S/2)*s:C.curveOffset=M*(Math.floor(S/2)*s+t)}return e};const $ge=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:jW,cloneEvent:Rge,formatPadding:TI,isNaN:fl,isViewportChanged:Bge,processParallelEdges:Fge,uniqueId:zA},Symbol.toStringTag,{value:"Module"}));var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function jl(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var vc={};const zge=jl(hde);Object.defineProperty(vc,"__esModule",{value:!0});var Qf=zge;function UW(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Qf.mat3.fromTranslation(n,t),Qf.mat3.multiply(r,n,e)}vc.leftTranslate=UW;function WW(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Qf.mat3.fromRotation(n,t),Qf.mat3.multiply(r,n,e)}vc.leftRotate=WW;function VW(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Qf.mat3.fromScaling(n,t),Qf.mat3.multiply(r,n,e)}vc.leftScale=VW;function Gge(r,e,t){return Qf.mat3.multiply(r,t,e)}function jge(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":UW(t,t,[a[1],a[2]]);break;case"s":VW(t,t,[a[1],a[2]]);break;case"r":WW(t,t,a[1]);break;case"m":Gge(t,t,a[1]);break}}return t}var T5=vc.transform=jge;function HW(r,e){return r[0]*e[1]-e[0]*r[1]}vc.direction=HW;function Uge(r,e,t){var n=Qf.vec2.angle(r,e),i=HW(r,e)>=0;return t?i?Math.PI*2-n:n:i?n:Math.PI*2-n}vc.angleTo=Uge;function Wge(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}vc.vertical=Wge;var Vge=function(){function r(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return r.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),i=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(i-e[0]-e[2])/2+e[0]}},r.prototype.fitCenter=function(e,t){var n=this.graph,i=n.get("group"),a,o=n.getNodes();if(o.length>n.get("optimizeThreshold")){var s=1/0,l=1/0,u=-1/0,f=-1/0;o.forEach(function(x){var w=x.getModel(),E=w.x,_=w.y;s>E&&(s=E),l>_&&(l=_),u<E&&(u=E),f<_&&(f=_)});var c=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=bv({x:s,y:l},c),d=h.x,v=h.y,p=bv({x:u,y:f},c),g=p.x,m=p.y;a={minX:d,maxX:g,minY:v,maxY:m,width:g-d,height:m-v,x:d,y:v}}else a=i.getCanvasBBox();if(!(a.width===0||a.height===0)){var b=this.getViewCenter(),y={x:a.x+a.width/2,y:a.y+a.height/2};n.translate(b.x-y.x,b.y-y.y,e,t)}},r.prototype.animatedFitView=function(e,t,n,i,a,o,s,l){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var f=[1,0,0,0,1,0,0,0,1],c=i.x+a.x-o.x-i.minX,h=i.y+a.y-o.y-i.minY;if(!(fl(c)||fl(h))){var d=T5(f,[["t",c,h]]);if(!l){var v=R0({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:d})}});e.animate(function(x){return{matrix:mA(t,d,x)}},v);return}var p=u.get("minZoom"),g=u.get("maxZoom"),m=s;p&&s<p?(m=p,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):g&&s>g&&(m=g,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var b=T5(d,[["t",-a.x,-a.y],["s",m,m],["t",a.x,a.y]]),y=R0({animateCfg:n,callback:function(){e.setMatrix(b),u.emit("viewportchange",{action:"translate",matrix:d}),u.emit("viewportchange",{action:"zoom",matrix:b})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(x){return{matrix:mA(t,b,x)}},y)}},r.prototype.fitView=function(e,t){var n=this.graph,i=this.getFormatPadding(),a=n.get("width"),o=n.get("height"),s=n.get("group"),l=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var u,f=n.getNodes();if(f.length>n.get("optimizeThreshold")){var c=1/0,h=1/0,d=-1/0,v=-1/0;f.forEach(function(E){var _=E.getModel(),S=_.x,C=_.y;c>S&&(c=S),h>C&&(h=C),d<S&&(d=S),v<C&&(v=C)}),u={minX:c,maxX:d,minY:h,maxY:v,width:d-c,height:v-h,x:c,y:h}}else u=s.getCanvasBBox();if(!(u.width===0||u.height===0)){var p=this.getViewCenter(),g={x:u.x+u.width/2,y:u.y+u.height/2},m=(a-i[1]-i[3])/u.width,b=(o-i[0]-i[2])/u.height,y=m;if(m>b&&(y=b),e)this.animatedFitView(s,l,t,u,p,g,y,!0);else{var x=p.x-g.x,w=p.y-g.y;if(fl(x)||fl(w))return;n.translate(x,w),n.zoom(y,p)||console.warn("zoom failed, ratio out of range, ratio: %f",y)}}},r.prototype.fitViewByRules=function(e,t,n){var i=e.onlyOutOfViewPort,a=i===void 0?!1:i,o=e.direction,s=o===void 0?"both":o,l=e.ratioRule,u=l===void 0?"min":l,f=this.graph,c=this.getFormatPadding(),h=f.get("width"),d=f.get("height"),v=f.get("group"),p=v.getMatrix()||[1,0,0,0,1,0,0,0,1];v.resetMatrix();var g,m=f.getNodes();if(m.length>f.get("optimizeThreshold")){var b=1/0,y=1/0,x=-1/0,w=-1/0;m.forEach(function(L){var N=L.getModel(),P=N.x,R=N.y;b>P&&(b=P),y>R&&(y=R),x<P&&(x=P),w<R&&(w=R)}),g={minX:b,maxX:x,minY:y,maxY:w,width:x-b,height:w-y,x:b,y}}else g=v.getCanvasBBox();if(!(g.width===0||g.height===0)){var E=this.getViewCenter(),_={x:g.x+g.width/2,y:g.y+g.height/2},S=(h-c[1]-c[3])/g.width,C=(d-c[0]-c[2])/g.height,M;if(s==="x"?M=S:s==="y"?M=C:M=u==="max"?Math.max(S,C):Math.min(S,C),a&&(M=M<1?M:1),t)this.animatedFitView(v,p,n,g,E,_,M,!0);else{var T=f.getZoom(),A=T*M,O=f.get("minZoom");A<O&&(A=O,console.warn("fitview failed, ratio out of range, ratio: %f",M,"graph minzoom has been used instead")),f.translate(E.x-_.x,E.y-_.y),f.zoomTo(A,E)}}},r.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return TI(e)},r.prototype.focusPoint=function(e,t,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var l=(o.x-e.x)*s[0],u=(o.y-e.y)*s[4],f=0,c=0,h=0,d=0;this.graph.get("canvas").animate(function(v){h=l*v,d=u*v,i.graph.translate(h-f,d-c),f=h,c=d},U({},n))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},r.prototype.getPointByCanvas=function(e,t){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=B7({x:e,y:t},n);return i},r.prototype.getPointByClient=function(e,t){var n=this.graph.get("canvas"),i=n.getPointByClient(e,t);return this.getPointByCanvas(i.x,i.y)},r.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(e,t),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},r.prototype.getCanvasByPoint=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),bv({x:e,y:t},n)},r.prototype.focus=function(e,t,n){if(tt(e)&&(e=this.graph.findById(e)),e){var i=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=e.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},t,n)}},r.prototype.focusItems=function(e,t,n,i){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),l=a.get("height"),u=a.get("group"),f=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var c={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=e;h<d.length;h++){var v=d[h],p=v.getBBox();p.minX<c.minX&&(c.minX=p.minX),p.minY<c.minY&&(c.minY=p.minY),p.maxX>c.maxX&&(c.maxX=p.maxX),p.maxY>c.maxY&&(c.maxY=p.maxY)}if(c.x=c.minX,c.y=c.minY,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,!(c.width===0||c.height===0)){var g=this.getViewCenter(),m={x:c.x+c.width/2,y:c.y+c.height/2},b=(s-o[1]-o[3])/c.width,y=(l-o[0]-o[2])/c.height,x=b;b>y&&(x=y),n?this.animatedFitView(u,f,i,c,g,m,x,t):(a.translate(g.x-m.x,g.y-m.y),t&&!a.zoom(x,g)&&console.warn("zoom failed, ratio out of range, ratio: %f",x))}}},r.prototype.changeSize=function(e,t){var n=this.graph;if(!Pt(e)||!Pt(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t});var i=n.get("canvas");i.changeSize(e,t);var a=n.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r}();function GA(r){"@babel/helpers - typeof";return GA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GA(r)}function O5(r){if(typeof r!="string")return r;var e=function(_){if(typeof _!="string")return _;try{return JSON.parse(_.trim())}catch{return _.trim()}},t=e(r);if(typeof t!="string")return t;for(var n=function(_){return _[_.length-1]},i=r.trim(),a=[],o=[],s=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];return _.some(function(C){return n(o)===C})},l=function(){return n(a)},u=null,f=0,c="";f<i.length;){var h=i[f],d=s('"',"'");if(!d&&!h.trim()){f+=1;continue}var v=i[f-1]==="\\",p=s("}"),g=s("]"),m=s(","),b=l();if(d)if(n(o)===h&&!v){o.pop();var y=e(c);b.push(y),u=y,c=""}else c+=h;else if(g&&h===",")c&&(b.push(e(c)),c="");else if(p&&h===":")o.push(","),c&&(b.push(c),c="");else if(m&&h===",")c&&(b.push(e(c)),c=""),o.pop();else if(h==="}"&&(p||m)){c&&(b.push(e(c)),c=""),m&&o.pop();for(var x={},w=1;w<b.length;w+=2)x[b[w-1]]=b[w];a.pop(),a.length&&n(a).push(x),o.pop(),u=x}else h==="]"&&g?(c&&(b.push(e(c)),c=""),a.pop(),a.length&&n(a).push(b),o.pop(),u=b):h==="{"?(a.push([]),o.push("}")):h==="["?(a.push([]),o.push("]")):h==='"'?o.push('"'):h==="'"?o.push("'"):c+=h;f+=1}return u||c}var Hge=function(e){return e.split("-").reduce(function(t,n){return t+n.charAt(0).toUpperCase()+n.slice(1)})},Xge=function(e){return function(t){for(var n=e.length,i=[],a=0,o="";a<n;)if(e[a]==="{"&&e[a+1]==="{")i.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(i.length){var s=i.pop();o=gu(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),i.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'.concat(l,'}"'):l}).join("")}};function XW(r,e){var t={},n=r.getAttributeNames&&r.getAttributeNames()||[],i=r.children&&Array.from(r.children).map(function(s){return XW(s,e)}),a={},o=r.tagName?r.tagName.toLowerCase():"group";return o==="text"&&(t.text=r.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var l=Hge(s),u=r.getAttribute(s);try{if(l==="style"||l==="attrs"){var f=O5(u);t=U(U({},t),f)}else a[l]=O5(u)}catch(c){if(l==="style")throw c;a[l]=u}}),a.attrs=t,e&&e.style&&a.name&&GA(e.style[a.name])==="object"&&(a.attrs=U(U({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=U(U({},a.attrs),e.style)),i.length&&(a.children=i),a}function Yge(r,e,t){var n=r.attrs,i=n===void 0?{}:n,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(r.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=K7(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,r.attrs=U({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function YW(r,e){var t;e===void 0&&(e={x:0,y:0});var n=U({x:0,y:0,width:0,height:0},e);if(!((t=r.children)===null||t===void 0)&&t.length){var i=r.attrs,a=i===void 0?{}:i,o=a.marginTop,s=U({},e);o&&(s.y+=o);for(var l=0;l<r.children.length;l++){r.children[l].attrs.key="".concat(a.key||"root"," -").concat(l," ");var u=YW(r.children[l],s);if(u.bbox){var f=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,f.width+f.x>n.width&&(n.width=f.width+f.x),f.height+f.y>n.height&&(n.height=f.height+f.y)}}}return r.bbox=Yge(r,e,n),r.attrs=U(U({},r.attrs),r.bbox),r}function KW(r,e){var t,n,i,a,o=(r||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&r&&(r.attrs.key=s),!r&&e)return{action:"delete",val:e,type:o,key:s};if(r&&!e)return{action:"add",val:r,type:o};if(!r&&!e)return{action:"same",type:o};var l=[];if(((t=r.children)===null||t===void 0?void 0:t.length)>0||((n=e.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((i=r.children)===null||i===void 0?void 0:i.length,(a=e.children)===null||a===void 0?void 0:a.length),f=e.children||[],c=r.children||[],h=0;h<u;h+=1)l.push(KW(c[h],f[h]));var d=Object.keys(e.attrs),v=Object.keys(r.attrs);return e.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:e,key:s,children:l}:d.filter(function(p){return p!=="children"}).some(function(p){return r.attrs[p]!==e.attrs[p]||!v.includes(p)})?{action:"change",val:r,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function k5(r){var e={},t=function(i){var a=typeof r=="function"?r(i):r,o=Xge(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=YW(XW(l,i));return s.remove(),u};return{draw:function(i,a){var o=t(i),s=a,l=function u(f){var c=f.attrs,h=c===void 0?{}:c,d=f.bbox,v=f.type,p=f.children,g=Mi(f,["attrs","bbox","type","children"]);if(f.type!=="group"){var m=a.addShape(f.type,U({attrs:h,origin:{bbox:d,type:v,children:p}},g));f.keyshape&&(s=m)}f.children&&f.children.forEach(function(b){return u(b)})};return l(o),e[i.id]=[o],s},update:function(i,a){e[i.id]||(e[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=t(i),u=e[i.id].pop(),f=KW(l,u),c=function v(p){var g;p.type!=="group"&&o.addShape(p.type,{attrs:p.attrs}),!((g=p.children)===null||g===void 0)&&g.length&&p.children.map(function(m){return v(m)})},h=function v(p){var g,m=s.find(function(b){return b.attrs.key===p.attrs.key});m&&o.removeChild(m),!((g=p.children)===null||g===void 0)&&g.length&&p.children.map(function(b){return v(b)})},d=function v(p){var g=p.key;if(p.type!=="group"){var m=s.find(function(y){return y.attrs.key===g});switch(p.action){case"change":if(m){var b=p.val.keyshape?a.getOriginStyle():{};m.attr(U(U({},b),p.val.attrs))}break;case"add":c(p.val);break;case"delete":h(p.val);break;case"restructure":h(p.formerTarget),c(p.nowTarget);break}}p.children&&p.children.forEach(function(y){return v(y)})};d(f),e[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var KS={};function I5(r){return KS[r]||(KS[r]=Fv(r)),KS[r]}var Kge={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,n=t[e]||t[t.defaultShapeType]||t["simple-circle"];return n},draw:function(e,t,n){var i=this.getShape(e);n.shapeMap={};var a=i.draw(t,n);return i.afterDraw&&i.afterDraw(t,n,a),a},baseUpdate:function(e,t,n,i){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,i),(o=s.update)===null||o===void 0||o.call(s,t,n,i)),s.afterUpdate&&s.afterUpdate(t,n)},setState:function(e,t,n,i){var a=this.getShape(e);a.setState(t,n,i)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var n=this.getShape(e);return n.getControlPoints(t)},getAnchorPoints:function(e,t){var n=this.getShape(e);return n.getAnchorPoints(t)}},qS={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,n=e.anchorPoints||t;return n}},vn=function(){function r(){}return r.registerFactory=function(e,t){var n=I5(e),i=Kge,a=U(U({},i),t);return r[n]=a,a.className=n,a},r.getFactory=function(e){var t=I5(e);return r[t]},r.registerNode=function(e,t,n){var i=r.Node,a;if(typeof t=="string"||typeof t=="function"){var o=k5(t);a=U(U({},i.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=k5(s);a=U(U(U({},i.getShape("single-node")),o),t)}else{i.getShape(n);var l=n?i.getShape(n):qS;a=U(U({},l),t)}return a.type=e,a.itemType="node",i[e]=a,a},r.registerEdge=function(e,t,n){var i=r.Edge,a=n?i.getShape(n):qS,o=U(U({},a),t);return o.type=e,o.itemType="edge",i[e]=o,o},r.registerCombo=function(e,t,n){var i=r.Combo,a=n?i.getShape(n):qS,o=U(U({},a),t);return o.type=e,o.itemType="combo",i[e]=o,o},r}();vn.registerFactory("node",{defaultShapeType:"circle"});vn.registerFactory("edge",{defaultShapeType:"line"});vn.registerFactory("combo",{defaultShapeType:"circle"});var ZS="bboxCache",QS="bboxCanvasCache",qW=function(){function r(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var n=this.get("model"),i=n.id,a=this.get("type");typeof i>"u"?i=zA(a):typeof i!="string"&&(i=String(i)),this.get("model").id=i,this.set("id",i);var o=e.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var f=this.get("styles")||n.stateStyles;f=dn({},u.stateStyles,f),this.set("styles",f)}}}return r.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=rw(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=rw(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),n=e.get("group"),i=e.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(i);var o=e.getShapeCfg(i),s=o.type,l=t.draw(s,o,n);l&&(e.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},r.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var d=this.get("originStyle");a&&!d[a]&&(d[a]={});for(var v=this.getCurrentStatesStyle(),p=function(m){var b=t[m],y=b.get("name"),x=b.attr();if(y&&y!==a){var w=v[y];d[y]||(d[y]={}),w?Object.keys(x).forEach(function(S){var C=x[S];C!==w[S]&&(d[y][S]=C)}):d[y]=b.get("type")!=="image"?Tr(x):i.getShapeStyleByName(y)}else{var E=b.attr(),_={};Object.keys(v).forEach(function(S){var C=v[S];(S===a||!Wi(C))&&(_[S]=C)}),Object.keys(E).forEach(function(S){var C=E[S];_[S]!==C&&(a?d[a][S]=C:d[S]=C)})}},s=0;s<t.length;s++)p(s);delete d.path,delete d.matrix,delete d.x,delete d.y,d[a]&&(delete d[a].x,delete d[a].y,delete d[a].matrix,delete d[a].path),i.set("originStyle",d)}else{for(var o={},s=0;s<t.length;s++){var l=t[s],u=l.get("type"),f=l.get("name");if(f&&f!==a)o[f]=u!=="image"?Tr(l.attr()):i.getShapeStyleByName(f),u==="text"&&o[f]&&(delete o[f].x,delete o[f].y,delete o[f].matrix);else{var c=i.getShapeStyleByName();if(delete c.path,delete c.matrix,!a)Object.assign(o,c);else if(f)o[a]=c;else{var h=zA("shape");l.set("name",h),e.shapeMap[h]=l,o[h]=u!=="image"?Tr(l.attr()):i.getShapeStyleByName(f)}}}i.set("originStyle",o)}},r.prototype.restoreStates=function(e,t){var n=this,i=n.get("states");De(i,function(a){e.setState(t,a,!0,n)})},r.prototype.init=function(){var e=vn.getFactory(this.get("type"));this.set("shapeFactory",e)},r.prototype.get=function(e){return this._cfg[e]},r.prototype.set=function(e,t){Wi(e)?this._cfg=U(U({},this._cfg),e):this._cfg[e]=t},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(ZS,null),this.set(QS,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(e){var t=this.get("group"),n;if(e?n=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):n=this.getKeyShape(),n){var i={};return De(n.attr(),function(a,o){(o!=="img"||tt(a))&&(i[o]=a)}),i}return{}},r.prototype.getShapeCfg=function(e,t){var n=this.get("styles");if(n){var i=e;return i.style=U(U({},n),e.style),i}return e},r.prototype.getStateStyle=function(e){var t=this.get("styles"),n=t&&t[e];return n},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var e=this,t={},n=e.getStates();return!n||!n.length?this.get("originStyle"):(De(e.getStates(),function(i){t=Object.assign(t,e.getStateStyle(i))}),t)},r.prototype.setState=function(e,t){var n=this.get("states"),i=this.get("shapeFactory"),a=e,o=e;tt(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=n;if(Im(t)){var l=n.indexOf(o);if(t){if(l>-1)return;n.push(a)}else l>-1&&n.splice(l,1)}else if(tt(t)){var u=n.filter(function(h){return h.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(h){return!h.includes(o)}),s.push(a),this.set("states",s)}if(i){var f=this.get("model"),c=f.type;i.setState(c,e,t,this)}},r.prototype.clearStates=function(e){var t=this,n=t.getStates(),i=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=n),tt(e)&&(e=[e]);var s=n.filter(function(l){return e.indexOf(l)===-1});t.set("states",s),e.forEach(function(l){i.setState(o,l,!1,t)})},r.prototype.setOptimize=function(e){this.optimize=e},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},r.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},r.prototype.getUpdateType=function(e){},r.prototype.update=function(e,t){t===void 0&&(t=void 0);var n=this.get("model");if(t==="move")this.updatePosition(e);else{var i=n.visible,a=e.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;$t(s,l),delete e.stateStyles}Object.assign(n,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(t.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(n,e);t.baseUpdate(i,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,i)},r.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,i=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(n)||isNaN(i))return!1;t.x=n,t.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),F7(a,{x:n,y:i}),this.clearCache(),!0)},r.prototype.getBBox=function(){var e=this.get(ZS);return e||(e=this.calculateBBox(),this.set(ZS,e)),e},r.prototype.getCanvasBBox=function(){var e=this.get(QS);return e||(e=this.calculateCanvasBBox(),this.set(QS,e)),e},r.prototype.toFront=function(){var e=this.get("group");e.toFront()},r.prototype.toBack=function(){var e=this.get("group");e.toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},r.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},r}(),b1={source:"start",target:"end"},Ys="Node",Ld="Point",qge="Anchor",ZW=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,n){var i=b1[t]+Ld,a=t+Ys,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),Wi(n)?(this.set(i,n),this.set(a,null)):n&&(n.addEdge(this),this.set(a,n),this.set(i,null))},e.prototype.getLinkPoint=function(t,n,i){var a=b1[t]+Ld,o=t+Ys,s=this.get(a);if(!s){var l=this.get(o),u=t+qge,f=this.getPrePoint(t,i),c=n[u];Lt(c)||(s=l.getLinkPointByAnchor(c)),s=s||l.getLinkPoint(f),Lt(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,n){if(n&&n.length){var i=t==="source"?0:n.length-1;return n[i]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var n=t+Ys,i=b1[t]+Ld,a=this.get(n);return a&&!a.destroyed?a.get("model"):this.get(i)},e.prototype.getControlPointsByCenter=function(t){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},e.prototype.getEndCenter=function(t){var n=t+Ys,i=b1[t]+Ld,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},e.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,n){var i=this,a=i.get("linkCenter"),o=n!=null&&n.includes("move")?t:r.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var s=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",t,s),o.endPoint=i.getLinkPoint("target",t,s)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),n=this.get("source".concat(Ys)),i=this.get("target".concat(Ys));return n?delete t["source".concat(Ys)]:t.source=this.get("start".concat(Ld)),i?delete t["target".concat(Ys)]:t.target=this.get("end".concat(Ld)),!tt(t.source)&&!Wi(t.source)&&(t.source=t.source.getID()),!tt(t.target)&&!Wi(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,n){n===void 0&&(n=void 0);var i=this.get("model"),a=i.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),l=this.get("target");if(!(!s||s.destroyed||!l||l.destroyed)){var u=this.get("styles");if(t.stateStyles){var f=t.stateStyles;$t(u,f),delete t.stateStyles}Object.assign(i,t),this.updateShape(n),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Ys)),n=this.get("target".concat(Ys));t&&!t.destroyed&&t.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},e}(qW),JS="anchorPointsCache",Zge="bboxCache",OI=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,n){for(var i=0,a=t[0],o=ew(t[0],n),s=0;s<t.length;s++){var l=t[s],u=ew(l,n);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("source")===t})},e.prototype.getNeighbors=function(t){var n=this,i=this.get("edges");if(t==="target"){var a=function(u){return u.getSource()===n};return i.filter(a).map(function(l){return l.getTarget()})}if(t==="source"){var o=function(u){return u.getTarget()===n};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return i.map(s)},e.prototype.getLinkPointByAnchor=function(t){var n=this.getAnchorPoints();return n[t]},e.prototype.getLinkPoint=function(t){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),f;switch(i){case"circle":f=N7({x:o,y:s,r:l.width/2},t);break;case"ellipse":f=R7({x:o,y:s,rx:l.width/2,ry:l.height/2},t);break;default:f=D7(l,t)}var c=f;return u.length&&(c||(c=t),c=this.getNearestPoint(u,c)),c||(c={x:o,y:s}),c},e.prototype.getAnchorPoints=function(){var t=this.get(JS);if(!t){t=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=n.getAnchorPoints(s,o)||[];De(l,function(u,f){var c={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:f};t.push(c)}),this.set(JS,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var n=this.getEdges(),i=n.indexOf(t);i>-1&&n.splice(i,1)},e.prototype.clearCache=function(){this.set(Zge,null),this.set(JS,null)},e.prototype.getUpdateType=function(t){var n,i,a,o,s;if(t){var l=!Lt(t.x),u=!Lt(t.y),f=Object.keys(t);if(f.length===1&&(l||u)||f.length===2&&l&&u)return"move";if(Pt(t.x)||Pt(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((n=t==null?void 0:t.style)===null||n===void 0)&&n.r||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var c=f.includes("label")||f.includes("labelCfg");return c?"style|label":"style"}},e.prototype.setState=function(t,n){var i=this;if(this.optimize){r.prototype.setState.call(this,t,n);return}this.runWithBBoxAffected(function(){return r.prototype.setState.call(i,t,n)})},e.prototype.clearStates=function(t){var n=this;if(this.optimize){r.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return r.prototype.clearStates.call(n,t)})},e.prototype.runWithBBoxAffected=function(t){var n=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(u){n.includes(u)&&(a[u]=i[u])}),t();for(var o=this.getKeyShape().attr(),s=0;s<n.length;s++){var l=n[s];if(o[l]!==a[l]){this.clearCache(),this.getEdges().forEach(function(u){return u.refresh()});break}}},e}(qW),L5="bboxCache",P5="bboxCanvasCache",x1="sizeCache",D5="anchorPointsCache",QW=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=t,o=Pt(t.size)?[t.size,t.size]:t.size,s=Pt(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,l=o||s||It.defaultCombo.size,u={r:(Math.max(i.width,i.height)||Math.max(l[0],l[1]))/2,width:i.width||l[0],height:i.height||l[1]};a.style=U(U(U({},n),t.style),u);var f=t.padding||It.defaultCombo.padding;return Pt(f)?(u.r+=f,u.width+=f*2,u.height+=f*2):(u.r=u.r+Math.max.apply(Math,f),u.width+=f[1]+f[3]||f[1]*2,u.height+=f[0]+f[2]||f[0]*2),this.set(x1,u),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),n=this.get("group"),i=this.get(L5)||{},a=i.x,o=i.x,s=this.get(x1),l=rw(t,n);if(l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2,s){s.width=Math.max(s.width,l.width),s.height=Math.max(s.height,l.height),this.set(x1,s);var u=t.get("type");u==="circle"?(l.width=s.r*2,l.height=s.r*2):(l.width=s.width,l.height=s.height),l.minX=l.centerX-l.width/2,l.minY=l.centerY-l.height/2,l.maxX=l.centerX+l.width/2,l.maxY=l.centerY+l.height/2}else l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2;return l.x=l.minX,l.y=l.minY,(l.x!==a||l.y!==o)&&this.set(D5,null),l}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var n=this,i=t.getType();switch(i){case"node":n.addNode(t);break;case"combo":n.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var n=this;return n.get("combos").push(t),!0},e.prototype.addNode=function(t){var n=this;return n.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var n=this,i=t.getType();switch(i){case"node":n.removeNode(t);break;case"combo":n.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var n=this.getCombos(),i=n.indexOf(t);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var n=this.getNodes(),i=n.indexOf(t);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(P5,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(L5,null),this.set(P5,null),this.set(D5,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),n=this.get("group");t&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(x1,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},e}(OI),w1="node",E1="edge",N5="vedge",ag="combo",Qge="default",R5="Mapper",nu="stateStyles",Jge=function(){function r(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=L0(function(n){var i=t.graph;if(!(!i||i.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var l=s.edge;if(!(!l||l.destroyed)){var u=l.getSource(),f=l.getTarget();!u||u.destroyed||!f||f.destroyed||l.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return r.prototype.addItem=function(e,t){var n=this.graph,i=e===N5?E1:e,a=n.get("".concat(i,"Group"))||n.get("group"),o=Fv(i),s=null,l=n.get(i+Fv(nu))||{},u=n.get(Qge+o);t[nu]&&(l=t[nu]),u&&De(u,function(E,_){Hi(E)&&!Ft(E)?t[_]=dn({},E,t[_]):Ft(E)?t[_]=t[_]||Tr(u[_]):t[_]=t[_]||u[_]});var f=n.get(i+R5);if(f){var c=f(t);c[nu]&&(l=c[nu],delete c[nu]),De(c,function(E,_){Hi(E)&&!Ft(E)?t[_]=dn({},t[_],E):t[_]=c[_]||t[_]})}if(n.emit("beforeadditem",{type:e,model:t}),e===E1||e===N5){var h=void 0,d=void 0;if(h=t.source,d=t.target,h&&tt(h)&&(h=n.findById(h)),d&&tt(d)&&(d=n.findById(d)),!h||!d){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}h.getType&&h.getType()==="combo"&&(t.isComboEdge=!0),d.getType&&d.getType()==="combo"&&(t.isComboEdge=!0),s=new ZW({model:t,source:h,target:d,styles:l,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(e===w1)s=new OI({model:t,styles:l,group:a.addGroup()});else if(e===ag){var v=t.children,p=ex(v,n),g=void 0,m=void 0;if(isNaN(p.x)?isNaN(t.x)&&(g=Math.random()*100):g=p.x,isNaN(p.y)?isNaN(t.y)&&(m=Math.random()*100):m=p.y,isNaN(t.x)||isNaN(t.y))t.x=g,t.y=m;else{var b=t.x-g,y=t.y-m;this.updateComboSucceeds(t.id,b,y,v)}var x=a.addGroup();x.setZIndex(t.depth),s=new QW({model:t,styles:l,animate:n.get("animate"),bbox:t.collapsed?ex([],n):p,group:x}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(p.width=Math.hypot(p.height,p.width),p.height=p.width,s.set("bbox",p),s.refresh());var w=s.getModel();(v||[]).forEach(function(E){var _=n.findById(E.id);s.addChild(_),E.depth=w.depth+2})}if(s)return s.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:t}),s},r.prototype.updateItem=function(e,t){var n=this,i,a,o=this.graph;if(tt(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var l=o.get(s+R5),u=e.getModel(),f=u.x,c=u.y,h=e.getUpdateType(t);if(l){var d=dn({},u,t),v=l(d),p=dn({},u,v,t);v[nu]&&(e.set("styles",p[nu]),delete p[nu]),De(p,function(M,T){t[T]=M})}else De(t,function(M,T){u[T]&&Hi(M)&&!Ft(M)&&(t[T]=U(U({},u[T]),t[T]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===E1){if(t.source){var g=t.source;tt(g)&&(g=o.findById(g)),e.setSource(g)}if(t.target){var m=t.target;tt(m)&&(m=o.findById(m)),e.setTarget(m)}e.update(t)}else if(s===w1){e.update(t,h);var b=e.getEdges();h==="move"?De(b,function(M){n.edgeToBeUpdateMap[M.getID()]={edge:M,updateType:h},n.throttleRefresh()}):h!=null&&h.includes("bbox")&&De(b,function(M){M.refresh(h)})}else if(s===ag){if(e.update(t,h),!isNaN(t.x)||!isNaN(t.y)){var y=t.x-f||0,x=t.y-c||0;this.updateComboSucceeds(u.id,y,x)}var w=e.getEdges(),E=(h==null?void 0:h.includes("bbox"))||h==="move";if(E&&s===ag){var _=e.get("shapeFactory"),S=u.type||"circle",C=u.animate===void 0||t.animate===void 0?(a=(i=_[S])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:u.animate||t.animate;C?setTimeout(function(){if(!(!e||e.destroyed)){var M=e.getKeyShape();!M||M.destroyed||De(w,function(T){T&&!T.destroyed&&T.refresh()})}},201):De(w,function(M){M.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},r.prototype.updateCombo=function(e,t,n){var i=this,a,o,s=this.graph;if(tt(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var l=e.getModel(),u=ex(t,s,e),f=u.x,c=u.y;e.set("bbox",u);var h=f,d=c;n?(h=isNaN(l.x)?f:l.x,d=isNaN(l.y)?c:l.y):(h=isNaN(f)?l.x:f,d=isNaN(c)?l.y:c),e.update({x:h,y:d});var v=e.get("shapeFactory"),p=l.type||"circle",g=l.animate===void 0?(o=(a=v[p])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:l.animate;g?setTimeout(function(){if(!(!e||e.destroyed)){var m=e.getKeyShape();!m||m.destroyed||(e.getShapeCfg(l),i.updateComboEdges(e))}},201):this.updateComboEdges(e)}},r.prototype.updateComboEdges=function(e){for(var t,n,i=e.getEdges()||[],a=0;a<i.length;a++){var o=i[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((n=o==null?void 0:o.getTarget())===null||n===void 0)&&n.destroyed)&&o.refresh()}},r.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var n=this.graph;tt(e)&&(e=n.findById(e));var i=e.getChildren();i.nodes.forEach(function(a){n.hideItem(a,t)}),i.combos.forEach(function(a){n.hideItem(a,t)})},r.prototype.updateComboSucceeds=function(e,t,n,i){var a=this;i===void 0&&(i=[]);var o=this.graph;if(!(!t&&!n)){var s=i;if(!(s!=null&&s.length)){var l=o.get("comboTrees");l==null||l.forEach(function(u){fa(u,function(f){return f.id===e?(s=f.children,!1):!0})})}s==null||s.forEach(function(u){var f=o.findById(u.id);if(f){var c=f.getModel();a.updateItem(u.id,{x:(c.x||0)+t,y:(c.y||0)+n})}})}},r.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var n=this.graph;tt(e)&&(e=n.findById(e));var i=e.getChildren(),a=new Set;i.nodes.forEach(function(o){n.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),i.combos.forEach(function(o){o.getModel().collapsed?o.show():n.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},r.prototype.removeItem=function(e){var t=this,n=this.graph;if(tt(e)&&(e=n.findById(e)),!(!e||e.destroyed)){var i=Tr(e.getModel()),a="";e.getType&&(a=e.getType()),n.emit("beforeremoveitem",{item:i,type:a});var o=n.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===E1){var l=n.get("v".concat(a,"s")),u=l.indexOf(e);u>-1&&l.splice(u,1)}var f=e.get("id"),c=n.get("itemMap");delete c[f];var h=n.get("comboTrees"),d=e.get("id");if(a===w1){var v=e.getModel().comboId;if(h&&v){var p=h,g=!1;h.forEach(function(E){g||fa(E,function(_){if(_.id===d&&p){var S=p.indexOf(_);return p.splice(S,1),g=!0,!1}return p=_.children,!0})})}for(var m=e.getEdges(),b=m.length-1;b>=0;b--)n.removeItem(m[b],!1);v&&n.updateCombo(v)}else if(a===ag){var y=e.getModel().parentId,x,w=!1;(h||[]).forEach(function(_){w||fa(_,function(S){return S.id===d?(x=S,w=!0,!1):!0})}),x.removed=!0,x&&x.children&&x.children.forEach(function(_){t.removeItem(_.id)});for(var m=e.getEdges(),b=m.length;b>=0;b--)n.removeItem(m[b],!1);y&&n.updateCombo(y)}e.destroy(),n.emit("afterremoveitem",{item:i,type:a})}},r.prototype.setItemState=function(e,t,n){var i=this.graph,a=t;tt(n)&&(a="".concat(t,":").concat(n)),!(e.hasState(a)===n&&n||tt(n)&&e.hasState(a))&&(i.emit("beforeitemstatechange",{item:e,state:a,enabled:n}),e.setState(t,n),i.autoPaint(),i.emit("afteritemstatechange",{item:e,state:a,enabled:n}))},r.prototype.priorityState=function(e,t){var n=this.graph,i=e;tt(e)&&(i=n.findById(e)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},r.prototype.clearItemStates=function(e,t){var n=this.graph;tt(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},r.prototype.refreshItem=function(e){var t=this.graph;tt(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},r.prototype.addCombos=function(e,t){var n=this,i=this.graph;(e||[]).forEach(function(o){al(o,function(s){var l;return t.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&n.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},r.prototype.changeItemVisibility=function(e,t){var n=this,i=this.graph;if(tt(e)&&(e=i.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===w1){var a=e.getEdges();De(a,function(f){t&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,t)})}else if(e.getType&&e.getType()===ag){var o=i.get("comboTrees"),s=e.get("id"),l=[],u=!1;(o||[]).forEach(function(c){u||!c.children||c.children.length===0||fa(c,function(h){return h.id===s?(l=h.children,u=!0,!1):!0})}),l&&(!t||t&&!e.getModel().collapsed)&&l.forEach(function(c){var h=i.findById(c.id);n.changeItemVisibility(h,t)});var a=e.getEdges();De(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,t)})}return i.emit("afteritemvisibilitychange",{item:e,visible:t}),e},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),e0e=function(){function r(e){this.graph=e,this.destroyed=!1}return r.prototype.updateState=function(e,t,n){var i=this.graph.get("states"),a=t;tt(n)&&(a="".concat(t,":").concat(n)),i[a]||(i[a]=[]),n?i[a].push(e):i[a]=i[a].filter(function(o){return o!==e}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},r.prototype.updateStates=function(e,t,n){var i=this.graph.get("states"),a=tt(t)?[t]:t;a.forEach(function(o){var s=o;i[s]||(i[s]=[]),tt(n)&&(s="".concat(o,":").concat(n)),n?i[s].push(e):i[s]=i[s].filter(function(l){return l!==e})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:t})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),t0e=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=t[i];return a===0&&(a="0"),a||""})},JW=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,i=e;n<i.length;n++){var a=i[n],o=a.x,s=a.y;t.push(o),t.push(s)}var l=$W(t);return l.unshift(["M",e[0].x,e[0].y]),l},lw=function(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y},o=[0,0];Wf(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},r0e=function(e,t){var n=e.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=t0e(a,s)}return t&&(i+="Z"),i},jA=function(e){var t=[];return e.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)t.push([n[a],n[a+1]]);else{var o=n.length;t.push([n[o-2],n[o-1]])}}),t},UA=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var t=e[0],n=e[1],i=e[e.length-1],a=e[e.length-2];e.unshift(i),e.unshift(a),e.push(t),e.push(n);for(var o=[],s=1;s<e.length-2;s+=1){var l=e[s-1].x,u=e[s-1].y,f=e[s].x,c=e[s].y,h=e[s+1].x,d=e[s+1].y,v=s!==e.length-2?e[s+2].x:h,p=s!==e.length-2?e[s+2].y:d,g=f+(h-l)/6,m=c+(d-u)/6,b=h-(v-f)/6,y=d-(p-c)/6;o.push(["C",g,m,b,y,h,d])}return o.unshift(["M",i.x,i.y]),o},B5=function(e,t){return ha([0,0],Wf([0,0],e),t)},F5=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},$5=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function WA(r,e){var t=function(c){var h=[c[0][0],c[0][1]-e],d=[c[0][0],c[0][1]+e];return"M ".concat(h," A ").concat(e,",").concat(e,",0,0,0,").concat(d," A ").concat(e,",").concat(e,",0,0,0,").concat(h)},n=function(c){var h=ha([0,0],F5(c[0],c[1]),e),d=ha([0,0],h,-1),v=ji([0,0],c[0],h),p=ji([0,0],c[1],h),g=ji([0,0],c[1],d),m=ji([0,0],c[0],d);return"M ".concat(v," L ").concat(p," A ").concat([e,e,"0,0,0",g].join(",")," L ").concat(m," A ").concat([e,e,"0,0,0",v].join(","))};if(!r||r.length<1)return"";if(r.length===1)return t(r);if(r.length===2)return n(r);for(var i=new Array(r.length),a=0;a<i.length;++a){var o=a===0?r[r.length-1]:r[a-1],s=r[a],l=ha([0,0],F5(o,s),e);i[a]=[ji([0,0],o,l),ji([0,0],s,l)]}var u="A ".concat([e,e,"0,0,0,"].join(","));return i=i.map(function(f,c){var h="";return c===0&&(h="M ".concat(i[i.length-1][1]," ")),h+="".concat(u+f[0]," L ").concat(f[1]),h}),i.join(" ")}function eV(r,e){var t=r.length,n=function(f){var c=[f[0][0],f[0][1]-e],h=[f[0][0],f[0][1]+e];return"M ".concat(c," A ").concat([e,e,"0,0,0",h].join(",")," A ").concat([e,e,"0,0,0",c].join(","))},i=function(f){var c=$5(f[0],f[1]),h=B5(c,e),d=ji([0,0],f[0],ha([0,0],h,-1)),v=ji([0,0],f[1],h),p=1.2*e,g=B5(Wf([0,0],c),p),m=ha([0,0],g,-1),b=ji([0,0],d,m),y=ji([0,0],v,m),x=ji([0,0],d,g);return"M ".concat(d," C ").concat([b,y,v].join(",")," S ").concat([x,d].join(",")," Z")};if(!r||t<1)return"";if(t===1)return n(r);if(t===2)return i(r);for(var a=r.map(function(u,f){var c=r[(f+1)%t];return{p:u,v:Wf([0,0],$5(u,c))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,l=Wf([0,0],ji([0,0],a[s].v,ha([0,0],a[o].v,-1)));a[o].p=ji([0,0],a[o].p,ha([0,0],l,e))}return a.map(function(u){var f=u.p;return{x:f[0],y:f[1]}})}var n0e=function(e,t){for(var n=[],i=0;i<5;i++){var a=Math.cos((18+72*i)/180*Math.PI)*e,o=Math.sin((18+72*i)/180*Math.PI)*e,s=Math.cos((54+72*i)/180*Math.PI)*t,l=Math.sin((54+72*i)/180*Math.PI)*t;i===0?n.push(["M",a,-o]):n.push(["L",a,-o]),n.push(["L",s,-l])}return n.push(["Z"]),n};const i0e=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:UA,getControlPoint:lw,getSpline:JW,getStarPath:n0e,paddedHull:eV,pathToPoints:jA,pointsToPolygon:r0e,roundedHull:WA},Symbol.toStringTag,{value:"Module"}));var z5=function(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)},G5=function(e){var t=e.map(function(c){return{x:c.getModel().x,y:c.getModel().y}});t.sort(function(c,h){return c.x===h.x?c.y-h.y:c.x-h.x});for(var n={},i=t.length-1;i>=0;i--){var a=t[i],o=a.x,s=a.y;n["".concat(o,"-").concat(s)]&&t.splice(i,1),n["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var l=[],i=0;i<t.length;i++){for(;l.length>=2&&z5(l[l.length-2],l[l.length-1],t[i])<=0;)l.pop();l.push(t[i])}for(var u=[],i=t.length-1;i>=0;i--){for(;u.length>=2&&z5(u[u.length-2],u[u.length-1],t[i])<=0;)u.pop();u.push(t[i])}u.pop(),l.pop();var f=l.concat(u);return f},a0e={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function o0e(r,e,t){var n=!1,i=function(l,u){return e.cells[l+u*e.width]},a=function(l,u){var f=0;return i(l-1,u-1)>=t&&(f+=1),i(l,u-1)>t&&(f+=2),i(l-1,u)>t&&(f+=4),i(l,u)>t&&(f+=8),f},o=function(l,u){for(var f=l,c=u,h,d,v=0;v<e.width*e.height;v++){if(h=f,d=c,r.findIndex(function(g){return g.x===f&&g.y===c})>-1){if(!(r[0].x!==f||r[0].y!==c))return!0}else r.push({x:f,y:c});var p=a(f,c);switch(p){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:f++;break;case 12:case 14:case 4:f--;break;case 6:h===0&&(d===-1?f-=1:f+=1);break;case 1:case 13:case 5:c--;break;case 9:h===1&&(d===0?c-=1:c+=1);break;case 10:case 8:case 11:c++;break;default:return console.warn("Marching squares invalid state: ".concat(p)),!0}}};this.march=function(){for(var s=0;s<e.width&&!n;s+=1)for(var l=0;l<e.height&&!n;l+=1)i(s,l)>t&&a(s,l)!==15&&(n=o(s,l));return n}}var s0e=function(e,t,n){var i=Math.ceil(e/n),a=Math.ceil(t/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},l0e=function(e,t,n){var i=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=tw(s,l),f=new Gh(s.x,s.y,l.x,l.y),c=n.reduce(function(h,d){return bI(d,f)>0?h+1:h},0);u*Math.pow(c+1,2)<a&&(i=o,a=u*Math.pow(c+1,2))}),i},tV=function(e,t){var n=Number.POSITIVE_INFINITY,i=null;return e.forEach(function(a){var o=bI(a,t);o>=0&&o<n&&(i=a,n=o)}),i},u0e=function(e,t,n,i){var a=[],o=[];o.push(e);for(var s=!0,l=0,u=function(d,v){var p=!1;return v.forEach(function(g){p||(gA(d,{x:g.x1,y:g.y1})||gA(d,{x:g.x2,y:g.y2}))&&(p=!0)}),p},f=function(d,v){for(var p=0,g=v;p<g.length;p++){var m=g[p],b=m.getBBox(),y=[[b.x,b.y],[b.x+b.width,b.y],[b.x,b.y+b.height],[b.x+b.width,b.y+b.height]];if(N0(y,d.x,d.y))return!0}return!1};s&&l<n;){s=!1;for(var c=function(){var d=o.pop(),v=tV(t,d);if(v){var p=G7(v,d),g=p[0],m=p[1];if(m===2){var b=function(x){for(var w=i,E=j5(v,w,g,x),_=u(E,o)||u(E,a),S=f(E,t);!_&&S&&w>=1;)w/=1.5,E=j5(v,w,g,x),_=u(E,o)||u(E,a),S=f(E,t);E&&!_&&(!x||!S)&&(o.push(new Gh(d.x1,d.y1,E.x,E.y)),o.push(new Gh(E.x,E.y,d.x2,d.y2)),s=!0)};b(!0),s||b(!1)}}s||a.push(d),l+=1};!s&&o.length;)c()}for(;o.length;)a.push(o.pop());return a};function f0e(r,e,t,n,i){var a=l0e(r,t,e);if(a===null)return[];var o=function(c){for(var h=[];c.length>0;){var d=c.pop();if(c.length===0){h.push(d);break}var v=c.pop(),p=new Gh(d.x1,d.y1,v.x2,v.y2),g=tV(e,p);g?(h.push(d),c.push(v)):c.push(p)}return h},s=new Gh(r.getModel().x,r.getModel().y,a.getModel().x,a.getModel().y),l=u0e(s,e,n,i),u=o(l);return u}var c0e=function(e,t,n){var i=Object.assign(a0e,n),a=j7(e.map(function(b){return{x:b.getModel().x,y:b.getModel().y}}));e=e.sort(function(b,y){return tw({x:b.getModel().x,y:b.getModel().y},a)-tw({x:y.getModel().x,y:y.getModel().y},a)});var o=[],s=[];e.forEach(function(b){var y=f0e(b,t,o,i.maxRoutingIterations,i.morphBuffer);y.forEach(function(x){s.push(x)}),o.push(b)});for(var l=h0e(e,s,i.nodeR0),u=s0e(l.width,l.height,i.pixelGroupSize),f=[],c=[],h=0;h<i.maxMarchingIterations;h++)if(d0e(e,t,s,l,u,i),f=[],c=[],!!new o0e(f,u,i.threshold).march()){var d=f.map(function(b){return{x:Math.round(b.x*i.pixelGroupSize+l.minX),y:Math.round(b.y*i.pixelGroupSize+l.minY)}});if(d){var v=d.length;if(i.skip>1)for(v=Math.floor(d.length/i.skip);v<3&&i.skip>1;)i.skip-=1,v=Math.floor(d.length/i.skip);for(var p=0,g=0;g<v;g+=1,p+=i.skip)c.push({x:d[p].x,y:d[p].y})}var m=function(){for(var y=0,x=e;y<x.length;y++){var w=x[y],E=c.map(function(_){return[_.x,_.y]});if(!N0(E,w.getBBox().centerX,w.getBBox().centerY))return!1}return!0};if(c&&m())return c;if(i.threshold*=.9,h<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&t.length>0)i.nonMemberInfluenceFactor*=.8;else break}return c};function h0e(r,e,t){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];r.forEach(function(l){i.push(l.getBBox())}),e.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-t,n.minY=(s.minY<n.minY?s.minY:n.minY)-t,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+t,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+t}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function d0e(r,e,t,n,i,a){function o(d,v){var p=Math.floor((d-v)/a.pixelGroupSize);return p<0?0:p}function s(d,v){return d*a.pixelGroupSize+v}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),f=function(v,p){var g=Math.min(o(v.minX,p+n.minX),i.width),m=Math.min(o(v.minY,p+n.minY),i.height),b=Math.min(o(v.maxX,-p+n.minX),i.width),y=Math.min(o(v.maxY,-p+n.minY),i.height);return[g,m,b,y]},c=function(v,p){for(var g=v.getBBox(),m=f(g,a.nodeR1),b=m[0],y=m[1],x=m[2],w=m[3],E=y;E<w;E+=1)for(var _=b;_<x;_+=1)if(!(p<0&&i[_+E*i.width]<=0)){var S=s(_,n.minX),C=s(E,n.minY),M=W7({x:S,y:C},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(M<Math.pow(a.nodeR1,2)){var T=Math.sqrt(M)-a.nodeR1;i.cells[_+E*i.width]+=p*T*T}}},h=function(v,p){for(var g=v.getBBox(),m=f(g,a.edgeR1),b=m[0],y=m[1],x=m[2],w=m[3],E=y;E<w;E+=1)for(var _=b;_<x;_+=1)if(!(p<0&&i.cells[_+E*i.width]<=0)){var S=s(_,n.minX),C=s(E,n.minY),M=U7({x:S,y:C},v);if(M<Math.pow(a.edgeR1,2)){var T=Math.sqrt(M)-a.edgeR1;i.cells[_+E*i.width]+=p*T*T}}};a.nodeInfluenceFactor&&r.forEach(function(d){c(d,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&t.forEach(function(d){h(d,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&e.forEach(function(d){c(d,a.negativeNodeInfluenceFactor/l)})}function j5(r,e,t,n){var i=r.getBBox(),a=t[0],o=t[1],s=t[2],l=t[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},f=i.height*i.width;function c(v,p){return i.width*((v.y-i.minY+(p.y-i.minY))*.5)}if(o){if(a)return n?u.topLeft:u.bottomRight;if(s)return n?u.bottomLeft:u.topRight;var h=c(o,l);return h<f*.5?o.y>l.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<l.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(l){if(a)return n?u.topRight:u.bottomLeft;if(s)return n?u.bottomRight:u.topLeft}var d=c(a,s);return d<f*.5?a.x>s.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:a.x<s.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var rV=function(){function r(e,t){this.cfg=dn(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return tt(n)?e.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return tt(n)?e.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(e,t){var n,i,a;switch(this.type){case"round-convex":n=G5(e),a=WA(n.map(function(o){return[o.x,o.y]}),this.padding),i=BA(a);break;case"smooth-convex":n=G5(e),n.length===2?(a=WA(n.map(function(o){return[o.x,o.y]}),this.padding),i=BA(a)):n.length>2&&(a=eV(n.map(function(o){return[o.x,o.y]}),this.padding),i=UA(a));break;case"bubble":n=c0e(e,t,this.cfg.bubbleCfg),i=n.length>=2&&UA(n);break}return i},r.prototype.render=function(){this.group.addShape("path",{attrs:U({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},r.prototype.addMember=function(e){if(e){tt(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(e){if(e){tt(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(e){if(e){tt(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.removeNonMember=function(e){if(e){tt(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(i){return tt(i)?n.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return tt(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr(U({},e))},r.prototype.updateCfg=function(e){var t=this;this.cfg=dn(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(n){return tt(n)?t.graph.findById(n):n})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return tt(n)?t.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(e){var t=this,n;tt(e)?n=this.graph.findById(e):n=e;var i,a=n.getKeyShape();if(n.get("type")==="path")i=jA(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=t.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),z7(i,jA(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r}(),og=as,v0e="node",nV=function(r){nr(e,r);function e(t){var n=r.call(this)||this;return n.sortCombos=Lm(function(){var i=n.get("comboSorted");if(!(!n||n.destroyed||i)){n.set("comboSorted",!0);var a=[],o={},s=n.get("comboTrees");(s||[]).forEach(function(u){fa(u,function(f){return a[f.depth]?a[f.depth].push(f.id):a[f.depth]=[f.id],o[f.id]=f.depth,!0})});var l=n.getEdges().concat(n.get("vedges"));(l||[]).forEach(function(u){var f=u.getModel(),c=o[f.source]||0,h=o[f.target]||0,d=Math.max(c,h);a[d]?a[d].push(f.id):a[d]=[f.id]}),a.forEach(function(u){if(!(!u||!u.length))for(var f=u.length-1;f>=0;f--){var c=n.findById(u[f]);c&&c.toFront()}})}},500,!1),n.cfg=dn(n.getDefaultCfg(),t),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new sv(n.cfg.maxStep),n.redoStack=new sv(n.cfg.maxStep)),n}return e.prototype.init=function(){this.initCanvas();var t=new Vge(this),n=new lve(this),i=new Jge(this),a=new e0e(this);this.set({viewController:t,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var n=t.get("el"),i=(n||{}).id,a=i===void 0?"g6":i,o=t.addGroup({id:"".concat(a,"-root"),className:It.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:It.edgeContainerClassName}),l=o.addGroup({id:"".concat(a,"-node"),className:It.nodeContainerClassName}),u=o.addGroup({id:"".concat(a,"-combo"),className:It.comboContainerClassName});u.toBack(),this.set({nodeGroup:l,edgeGroup:s,comboGroup:u})}var f=o.addGroup({id:"".concat(a,"-delegate"),className:It.delegateContainerClassName});this.set({delegateGroup:f}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,n){return Wi(t)?this.cfg=U(U({},this.cfg),t):this.cfg[t]=n,t==="enabledStack"&&n&&!this.undoStack&&!this.redoStack&&(this.undoStack=new sv(this.cfg.maxStep),this.redoStack=new sv(this.cfg.maxStep)),this},e.prototype.get=function(t){var n;return(n=this.cfg)===null||n===void 0?void 0:n[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,n){tt(t)&&(t=this.findById(t));var i=this.get("itemController");n||(n=t.get("states")),i.clearItemStates(t,n);var a=this.get("stateController");a.updateStates(t,n,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,n){var i,a=this.get("".concat(t,"s"));return De(a,function(o,s){if(n(o,s))return i=o,i}),i},e.prototype.findAll=function(t,n){var i=[];return De(this.get("".concat(t,"s")),function(a,o){n(a,o)&&i.push(a)}),i},e.prototype.findAllByState=function(t,n,i){return i?this.findAll(t,function(a){return a.hasState(n)&&i(a)}):this.findAll(t,function(a){return a.hasState(n)})},e.prototype.translate=function(t,n,i,a){var o=this,s=this.get("group"),l=Tr(s.getMatrix());if(l||(l=[1,0,0,0,1,0,0,0,1]),i){var u=R0({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});pA(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+n},i,u||{duration:500,easing:"easeCubic"})}else l=og(l,[["t",t,n]]),s.setMatrix(l),this.emit("viewportchange",{action:"translate",matrix:l}),this.autoPaint()},e.prototype.moveTo=function(t,n,i,a){var o=this.get("group");pA(o,{x:t,y:n},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,n,i,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");n?o.fitViewByRules(n,i,a):o.fitView(i,a),this.autoPaint()},e.prototype.fitCenter=function(t,n){var i=this.get("viewController");i.fitCenter(t,n),this.autoPaint()},e.prototype.addBehaviors=function(t,n){var i=this.get("modeController");return i.manipulateBehaviors(t,n,!0),this},e.prototype.removeBehaviors=function(t,n){var i=this.get("modeController");return i.manipulateBehaviors(t,n,!1),this},e.prototype.updateBehavior=function(t,n,i){var a=this.get("modeController");return a.updateBehavior(t,n,i),this},e.prototype.zoom=function(t,n,i,a){var o=this,s=this.get("group"),l=Tr(s.getMatrix())||[1,0,0,0,1,0,0,0,1],u=this.get("minZoom"),f=this.get("maxZoom"),c=this.getZoom()||1,h=c*t,d=t,v=!1;if(u&&h<u?(d=u/c,v=!0):f&&h>f&&(d=f/c,v=!0),n?l=og(l,[["t",-n.x,-n.y],["s",d,d],["t",n.x,n.y]]):l=og(l,[["s",d,d]]),i){var p=Tr(s.getMatrix());p||(p=[1,0,0,0,1,0,0,0,1]);var g=p[0],m=g*d,b=R0({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(y){if(y===1)p=l;else{var x=xI(g,m,y)/p[0];n?p=og(p,[["t",-n.x,-n.y],["s",x,x],["t",n.x,n.y]]):p=og(p,[["s",x,x]])}return{matrix:p}},b)}else s.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint();return!v},e.prototype.zoomTo=function(t,n,i,a){var o=t/this.getZoom();return this.zoom(o,n,i,a)},e.prototype.focusItem=function(t,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,n,i,a){var o=this.get("viewController");o.focusItems(t,n,i,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,n){var i=this.get("viewController");return i.getPointByClient(t,n)},e.prototype.getClientByPoint=function(t,n){var i=this.get("viewController");return i.getClientByPoint(t,n)},e.prototype.getPointByCanvas=function(t,n){var i=this.get("viewController");return i.getPointByCanvas(t,n)},e.prototype.getCanvasByPoint=function(t,n){var i=this.get("viewController");return i.getCanvasByPoint(t,n)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.hideItem=function(t,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.refreshItem=function(t){var n=this.get("itemController");n.refreshItem(t)},e.prototype.setAutoPaint=function(t){var n=this;n.set("autoPaint",t);var i=n.get("canvas");i.set("autoDraw",t)},e.prototype.remove=function(t,n){n===void 0&&(n=!0),this.removeItem(t,n)},e.prototype.removeItem=function(t,n){n===void 0&&(n=!0);var i=t;if(tt(t)&&(i=this.findById(t)),!i&&tt(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=U(U({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push(U(U({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var f=i.getModel();f.comboId&&this.updateComboTree(i,void 0,!1)}var c=this.get("itemController");if(c.removeItem(i),a==="combo"){var h=wA(this.get("comboTrees"));this.set("comboTrees",h)}}},e.prototype.innerAddItem=function(t,n,i){if(!sve(t,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c".concat(n.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),l=!1;if(o.forEach(function(v){l||al(v,function(p){if(n.parentId===p.id){l=!0;var g=U({id:n.id,depth:p.depth+2},n);p.children?p.children.push(g):p.children=[g],n.depth=g.depth,a=i.addItem(t,n)}var m=s[p.id];return l&&m&&m.getType&&m.getType()==="combo"&&i.updateCombo(m,p.children),!0})}),!l){var u=U({id:n.id,depth:0},n);n.depth=u.depth,o.push(u),a=i.addItem(t,n)}this.set("comboTrees",o),n.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&tt(n.comboId)&&o){var f=this.findById(n.comboId);f&&f.getType&&f.getType()!=="combo"&&console.warn("'".concat(n.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=i.addItem(t,n);var c=this.get("itemMap"),h=!1,d=!1;o.forEach(function(v){d||h||al(v,function(p){if(p.id===n.id)return d=!0,!1;if(n.comboId===p.id&&!d){h=!0;var g=Tr(n);g.itemType="node",p.children?p.children.push(g):p.children=[g],g.depth=p.depth+1}return h&&c[p.id].getType&&c[p.id].getType()==="combo"&&i.updateCombo(c[p.id],p.children),!0})})}else a=i.addItem(t,n);if(t==="node"&&n.comboId||t==="combo"&&n.parentId){var f=this.findById(n.comboId||n.parentId);f&&f.getType&&f.getType()==="combo"&&f.addChild(a)}return a},e.prototype.addItem=function(t,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),l=this.innerAddItem(t,n,s);if(l===!1||l===!0)return l;var u=this.get("combos");if(u&&u.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var f=U(U({},l.getModel()),{itemType:t}),c={};switch(t){case"node":c.nodes=[f];break;case"edge":c.edges=[f];break;case"combo":c.combos=[f];break}this.pushStack("add",{before:{},after:c})}return l},e.prototype.addItems=function(t,n,i){t===void 0&&(t=[]),n===void 0&&(n=!0),i===void 0&&(i=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!i);for(var o=this.get("itemController"),s=[],l=0;l<t.length;l++){var u=t[l];u.type!=="edge"&&u.type!=="vedge"?s.push(this.innerAddItem(u.type,u.model,o)):s.push(void 0)}for(var l=0;l<t.length;l++){var u=t[l];(u.type==="edge"||u.type==="vedge")&&(s[l]=this.innerAddItem(u.type,u.model,o))}if(i){var f=this.get("combos");f&&f.length>0&&this.sortCombos()}if(this.autoPaint(),n&&this.get("enabledStack")){for(var c={nodes:[],edges:[],combos:[]},l=0;l<t.length;l++){var h=t[l].type,d=s[l];if(d&&d!==!0){var v=U(U({},d.getModel()),{itemType:h});switch(h){case"node":c.nodes.push(v);break;case"edge":c.edges.push(v);break;case"combo":c.combos.push(v);break}}}this.pushStack("addItems",{before:{},after:c})}return s},e.prototype.add=function(t,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(t,n,i,a)},e.prototype.updateItem=function(t,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;tt(t)?s=this.findById(t):s=t;var l=i&&this.get("enabledStack"),u;l&&(u=Tr(s.getModel()));var f="";s.getType&&(f=s.getType());var c=So([],s.getStates(),!0);if(f==="combo"&&De(c,function(p){return a.setItemState(s,p,!1)}),o.updateItem(s,n),f==="combo"&&De(c,function(p){return a.setItemState(s,p,!0)}),l){var h={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},v=U({id:u.id},n);switch(f){case"node":h.nodes.push(u),d.nodes.push(v);break;case"edge":h.edges.push(u),d.edges.push(v);break;case"combo":h.combos.push(u),d.combos.push(v);break}this.pushStack("update",{before:h,after:d})}},e.prototype.update=function(t,n,i){i===void 0&&(i=!0),this.updateItem(t,n,i)},e.prototype.setItemState=function(t,n,i){tt(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,n,i);var o=this.get("stateController");o.updateState(t,n,i)},e.prototype.priorityState=function(t,n){var i=this.get("itemController");i.priorityState(t,n)},e.prototype.data=function(t){P3(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,l=n.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(g){return{type:"node",model:g}}),!1,!1),(u==null?void 0:u.length)!==0){var f=xA(u,a);this.set("comboTrees",f),t.addCombos(u)}t.addItems(s.map(function(g){return{type:"edge",model:g}}),!1,!1);var c=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var h=t.get("layoutController");if(h){if(h.layout(d),this.destroyed)return}else d();function d(){(t.get("comboTrees")||[]).forEach(function(g){al(g,function(m){var b=t.findById(m.id);return b.getType()==="combo"&&m.collapsed&&(t.collapseCombo(m.id,!1),t.updateCombo(b)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",c),setTimeout(function(){var g;(g=t.getCombos())===null||g===void 0||g.forEach(function(m){m.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var v=this.getNodes();v.forEach(function(g){g.toFront()})}else{var p=this.getEdges();p.forEach(function(g){g.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,n,i){var a=this,o,s=this.get("itemMap");De(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&t===v0e){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(t,l,!1);o&&n["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,n){var i=this,a;n===void 0&&(n=!0);var o=this,s=t||o.get("data");if(!P3(s))return this;this.emit("beforechangedata"),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(x){return o.clearItemStates(x)}),this.getEdges().map(function(x){return o.clearItemStates(x)});var l=this.get("canvas"),u=l.get("localRefresh");l.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var f=this.get("itemMap"),c={nodes:[],edges:[]},h=s.combos;if(h){var d=xA(h,s.nodes);this.set("comboTrees",d)}else this.set("comboTrees",[]);this.diffItems("node",c,s.nodes),De(f,function(x,w){f[w].getModel().depth=0,!(x.getType&&x.getType()==="edge")&&(x.getType&&x.getType()==="combo"?(delete f[w],x.destroy()):c.nodes.indexOf(x)<0&&(delete f[w],o.remove(x,!1)))});for(var v=this.getCombos(),p=v.length,g=p-1;g>=0;g--)v[g].destroyed&&v.splice(g,1);h&&(o.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",c,s.edges),De(f,function(x,w){x.getType&&(x.getType()==="node"||x.getType()==="combo")||c.edges.indexOf(x)<0&&(delete f[w],o.remove(x,!1))}),(this.get("comboTrees")||[]).forEach(function(x){al(x,function(w){var E=i.findById(w.id);return E.getType()==="combo"&&w.collapsed&&i.collapseCombo(w.id,!1),!0})}),this.set({nodes:c.nodes,edges:c.edges});var m=(this.get("layout")||{}).relayoutAtChangeData,b=m===void 0?!0:m,y=this.get("layoutController");return b&&y&&(y.changeData(function(){setTimeout(function(){var x;(x=o.getCombos())===null||x===void 0||x.forEach(function(w){w.set("animate",!0)})},0)}),o.get("animate")&&!y.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(x){return x.set("animate",!0)})):o.autoPaint()),setTimeout(function(){l.set("localRefresh",u)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,t)},e.prototype.createCombo=function(t,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",l;if(t){if(tt(t))s=t,l={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}l=t}var u=i&&this.get("enabledStack"),f={nodes:[],combos:[]};u&&n.forEach(function(m){var b=a.findById(m),y=b.getType();if(!(y!=="node"&&y!=="combo")){var x=b.getModel();f["".concat(y,"s")].push({id:m,parentId:y==="node"?x.comboId:x.parentId})}});var c=this.get("comboTrees"),h=new Set(n),d=new Map;c&&(c.forEach(function(m){al(m,function(b,y,x){if(h.has(b.id)){if(y){var w=a.findById(y.id),E=a.findById(b.id);y.children.splice(x,1),w.removeChild(E),o.updateCombo(w,y.children)}b.itemType==="combo"&&d.set(b.id,b)}return!0})}),c=c.filter(function(m){return!h.has(m.id)}),this.set("comboTrees",c));var v={nodes:[],combos:[]},p=n.map(function(m){var b=a.findById(m),y=b.getModel(),x="";b.getType&&(x=b.getType());var w=d.get(m)||{id:b.getID(),itemType:x};return x==="combo"?(w.parentId=s,y.parentId=s):x==="node"&&(w.comboId=s,y.comboId=s),u&&v["".concat(x,"s")].push({id:y.id,parentId:s}),w});l.children=p,this.addItem("combo",l,!1),this.set("comboSorted",!1),c&&(c.forEach(function(m){fa(m,function(b){return b.id===s?(b.itemType="combo",b.children=p,!1):!0})}),this.sortCombos()),u&&(v.combos.push(l),this.pushStack("createCombo",{before:f,after:v}));var g=this.findById(s);!g.getModel().parentId&&g.getChildren().combos.length&&this.updateComboTree(g,void 0,!1),setTimeout(function(){g.set("animate",!0)},0)}},e.prototype.uncombo=function(t,n){var i=this,a,o;n===void 0&&(n=!0);var s=this,l=t;if(tt(t)&&(l=this.findById(t)),!l||l.getType&&l.getType()!=="combo"){console.warn("The item is not a combo!");return}var u=l.getModel(),f=l.getModel().parentId,c=s.get("comboTrees");c||(c=[]);var h=this.get("itemMap"),d=l.get("id"),v,p=[],g=this.get("combos"),m=this.findById(f),b=n&&this.get("enabledStack"),y={};if(b&&(y=Tr(u),y.children=[]),c.forEach(function(_){v||al(_,function(S){var C;if(S.id===d){v=S;var M=l.getEdges().map(function(O){return O.getID()});M.forEach(function(O){i.removeItem(O,!1)});var T=g.indexOf(l);g.splice(T,1),delete h[d];var A=Tr(l.getModel());l.destroy(),i.emit("afterremoveitem",{item:A,type:"combo"})}if(f&&v&&S.id===f){m.removeCombo(l),p=S.children;var T=p.indexOf(v);return T!==-1&&p.splice(T,1),(C=v.children)===null||C===void 0||C.forEach(function(L){var N=i.findById(L.id),P=N.getModel();N.getType&&N.getType()==="combo"?(L.parentId=f,delete L.comboId,P.parentId=f,delete P.comboId):N.getType&&N.getType()==="node"&&(L.comboId=f,P.comboId=f),m.addChild(N),p.push(L)}),i.updateCombo(m),!1}return!0})}),!f&&v){var x=c.indexOf(v);c.splice(x,1),(a=v.children)===null||a===void 0||a.forEach(function(_){_.parentId=void 0;var S=i.findById(_.id).getModel();delete S.parentId,delete S.comboId,_.itemType!=="node"&&c.push(_)})}if(b){var w={nodes:[],combos:[]},E={nodes:[],combos:[]};(o=v.children)===null||o===void 0||o.forEach(function(_){var S=i.findById(_.id),C=S.getType();C!=="node"&&C!=="combo"||(w["".concat(C,"s")].push({id:_.id,parentId:d}),E["".concat(C,"s")].push({id:_.id,parentId:f}))}),w.combos.push(y),this.pushStack("uncombo",{before:w,after:E})}},e.prototype.updateCombos=function(t){var n=this;t===void 0&&(t=!1);var i=this,a=this.get("comboTrees"),o=i.get("itemController"),s=i.get("itemMap");(a||[]).forEach(function(l){al(l,function(u){var f;if(!u)return!0;var c=s[u.id];if(((f=c==null?void 0:c.getType)===null||f===void 0?void 0:f.call(c))==="combo"){var h=So([],c.getStates(),!0);De(h,function(d){return n.setItemState(c,d,!1)}),o.updateCombo(c,u.children,t),De(h,function(d){return n.setItemState(c,d,!0)})}return!0})}),i.sortCombos()},e.prototype.updateCombo=function(t){var n=this,i=this,a=t,o;if(tt(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(f){al(f,function(c){if(!c)return!0;var h=u[c.id];if(o===c.id&&h&&h.getType&&h.getType()==="combo"){var d=So([],h.getStates(),!0);De(d,function(v){h.getStateStyle(v)&&n.setItemState(h,v,!1)}),l.updateCombo(h,c.children),De(d,function(v){h.getStateStyle(v)&&n.setItemState(h,v,!0)}),o&&(o=c.parentId)}return!0})})},e.prototype.updateComboTree=function(t,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;tt(t)?o=a.findById(t):o=t;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var f=this.get("comboTrees"),c=!0,h;if((f||[]).forEach(function(b){h||fa(b,function(y){if(!h)return y.id===o.getID()&&(h=y),!0})}),fa(h,function(b){return b.id===n?(c=!1,!1):!0}),!c){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var d={},v={};u==="combo"?(d.combos=[{id:s.id,parentId:s.parentId}],v.combos=[{id:s.id,parentId:n}]):u==="node"&&(d.nodes=[{id:s.id,parentId:s.comboId}],v.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:d,after:v})}if(s.parentId||s.comboId){var p=this.findById(s.parentId||s.comboId);p&&p.removeChild(o)}if(u==="combo"?s.parentId=n:u==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(l){var g=this.findById(l);g&&g.removeChild(o)}var m=wA(this.get("comboTrees"),s.id,n);this.set("comboTrees",m),this.updateCombos()},e.prototype.save=function(){var t=[],n=[],i=[];return De(this.get("nodes"),function(a){t.push(a.getModel())}),De(this.get("edges"),function(a){n.push(a.getModel())}),De(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:t,edges:n,combos:i}},e.prototype.changeSize=function(t,n){var i=this.get("viewController");return i.changeSize(t,n),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var n=t.get("nodes"),i=t.get("edges"),a=t.get("edges");De(n,function(o){o.refresh()}),De(i,function(o){o.refresh()}),De(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if(tt(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var n=this;n.emit("beforeanimate");var i=n.get("animateCfg"),a=i.onFrame,o=t?n.getNodes().concat(n.getCombos()):n.getNodes(),s=o.map(function(u){var f=u.getModel();return{id:f.id,x:f.x,y:f.y}});n.stopAnimate();var l=n.get("canvas");n.animating=!0,setTimeout(function(){l.animate(function(u){De(s,function(f){var c=n.findById(f.id);if(!(!c||c.destroyed)){var h=c.get("originAttrs"),d=c.get("model"),v=c.getContainer().getMatrix();if(h==null&&(v&&(h={x:v[6],y:v[7]}),c.set("originAttrs",h||0)),a){var p=a(c,u,f,h||{x:0,y:0});c.set("model",Object.assign(d,p))}else h?(d.x=h.x+(f.x-h.x)*u,d.y=h.y+(f.y-h.y)*u):(d.x=f.x,d.y=f.y)}}),n.refreshPositions(t)},{duration:i.duration,easing:i.easing,callback:function(){De(o,function(f){f.set("originAttrs",null)}),i.callback&&i.callback(),n.emit("afteranimate"),n.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var n=this;n.emit("beforegraphrefreshposition");var i=n.get("nodes"),a=n.get("edges"),o=n.get("vedges"),s=n.get("combos"),l,u={},f=function(h){De(h,function(d){l=d.getModel();var v=d.get("originAttrs");if(!(v&&l.x===v.x&&l.y===v.y)){var p=d.updatePosition({x:l.x,y:l.y});u[l.id]=p,l.comboId&&(u[l.comboId]=u[l.comboId]||p),l.parentId&&(u[l.parentId]=u[l.parentId]||p)}})};f(s),f(i),s&&s.length!==0&&(t&&f(s),n.updateCombos()),De(a,function(c){var h=c.getSource().getModel(),d=c.getTarget();if(!Wi(d)){var v=d.getModel();(u[h.id]||u[v.id]||c.getModel().isComboEdge)&&c.refresh()}}),De(o,function(c){c.refresh()}),n.emit("aftergraphrefreshposition"),n.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),n=t.cfg.timeline;n&&n.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var n=this.get("modeController");return n.setMode(t),this},e.prototype.clear=function(t){var n;return t===void 0&&(t=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,n,i,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if(tt(t)&&(t={type:t}),n){var l=i;l||(n==="begin"?l={x:0,y:0}:l={x:this.getWidth()/2,y:this.getHeight()/2}),l=this.getPointByCanvas(l.x,l.y);var u=["force","gForce","fruchterman","force2"];u.includes(t.type)||!t.type&&u.includes(s==null?void 0:s.layoutType)?t.center=[l.x,l.y]:this.once("afterlayout",function(h){var d=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];l.x=l.x*d[0]+d[6],l.y=l.y*d[0]+d[7];var v=o.getGroup().getCanvasBBox(),p=v.minX,g=v.maxX,m=v.minY,b=v.maxY,y={x:(p+g)/2,y:(m+b)/2};n==="begin"&&(y.x=p,y.y=m),o.translate(l.x-y.x,l.y-y.y)})}var f=U({},this.get("layout")),c={};Object.assign(c,f,t),t.pipes&&!t.type?delete c.type:!t.pipes&&c.type&&delete c.pipes,this.set("layout",c),s&&(s.isLayoutTypeSame(c)&&c.gpuEnabled===f.gpuEnabled?s.updateLayoutCfg(c):s.changeLayout(c),a&&this.get("enabledStack")&&this.pushStack("layout",{before:f,after:c}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,n=this.get("layoutController"),i=this.get("layout");if(!(!i||!n)){if(i.workerEnabled){n.layout();return}!((t=n.layoutMethods)===null||t===void 0)&&t.length?n.relayout(!0):n.layout()}},e.prototype.collapseCombo=function(t,n){var i=this;if(n===void 0&&(n=!0),!this.destroyed){if(tt(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,n),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),f=!1;(u||[]).forEach(function(h){f||fa(h,function(d){if(f&&d.depth<=a.depth)return!1;if(a.id===d.id&&(f=!0),f){var v=i.findById(d.id);v&&v.getType&&v.getType()==="combo"&&(l=l.concat(v.getNodes()),l=l.concat(v.getCombos()))}return!0})});var c={};s.forEach(function(h){var d=h.getModel(),v=d.isVEdge,p=d.size,g=p===void 0?1:p;if(!(h.isVisible()&&!v)){var m=h.getSource(),b=h.getTarget(),y=null,x;if(m.getModel().id===a.id||l.includes(m)&&!l.includes(b)?(y=b,x=!1):(b.getModel().id===a.id||!l.includes(m)&&l.includes(b))&&(y=m,x=!0),y){if(v){i.removeItem(h,!1);return}for(var w=y.getModel();!y.isVisible();){var E=w.parentId,_=w.comboId,S=E||_;if(y=i.findById(S),!y||!S)return;w=y.getModel()}var C=w.id,M=x?{source:C,target:a.id,size:g,isVEdge:!0}:{source:a.id,target:C,size:g,isVEdge:!0},T="".concat(M.source,"-").concat(M.target);if(c[T]){c[T].size+=g;return}c[T]=M}}}),this.addItems(Object.values(c).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,n){var i=this;if(n===void 0&&(n=!0),tt(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,n),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),f=!1;(u||[]).forEach(function(h){f||fa(h,function(d){if(f&&d.depth<=a.depth)return!1;if(a.id===d.id&&(f=!0),f){var v=i.findById(d.id);v&&v.getType&&v.getType()==="combo"&&(l=l.concat(v.getNodes()),l=l.concat(v.getCombos()))}return!0})});var c={};s.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var d=h.getSource(),v=h.getTarget(),p=d.get("id"),g=v.get("id"),m=null,b;if(p===a.id||l.includes(d)&&!l.includes(v)?(m=v,b=!1):g===a.id||!l.includes(d)&&l.includes(v)?(m=d,b=!0):l.includes(d)&&l.includes(v)&&d.isVisible()&&v.isVisible()&&h.show(),m){var y=h.getModel(),x=y.isVEdge,w=y.size,E=w===void 0?1:w;if(x){i.removeItem(h,!1);return}for(var _=m.getModel();!m.isVisible();){var S=_.parentId,C=_.comboId,M=S||C;if(m=i.findById(M),!m||!M)return;_=m.getModel()}for(var T=_.id,A=b?v:d,O=A.getModel();!A.isVisible();){var L=O.parentId,N=O.comboId,P=L||N;if(A=i.findById(P),!A||!P)return;if(O.comboId===a.id||O.parentId===a.id)break;O=A.getModel()}var R=O.id;if(T){var G=b?{source:T,target:R,isVEdge:!0,size:E}:{source:R,target:T,isVEdge:!0,size:E},D="".concat(G.source,"-").concat(G.target);if(c[D]){c[D].size+=E;return}c[D]=G}}}}),this.addItems(Object.values(c).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,n){if(n===void 0&&(n=!0),tt(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var i=t.getModel(),a=this.findById(i.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=i.collapsed;s?this.expandCombo(t,n):this.collapseCombo(t,n),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,n){var i=t;return tt(t)&&(i=this.findById(t)),i.getNeighbors(n)},e.prototype.getNodeDegree=function(t,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=t;tt(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||i)&&(o=Iu(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(n){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,n,i){if(t===void 0&&(t="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");return}var a=n?Tr(n):{before:{},after:Tr(this.save())};i==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!t)&&(i=zh(this.save(),n),this.set("adjMatrix",i)),i},e.prototype.getShortestPathMatrix=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!t)&&(i=zh(this.save(),n),this.set("adjMatrix",i)),(!a||!t)&&(a=D0(this.save(),n),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,n,i){return r.prototype.on.call(this,t,n,i)},e.prototype.destroy=function(){var t,n,i,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(n=this.get("modeController"))===null||n===void 0||n.destroy(),(i=this.get("viewController"))===null||i===void 0||i.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[t.id])return console.warn("Existed hull id."),i[t.id];var a=n.addGroup({id:"".concat(t.id,"-container")}),o=new rV(this,U(U({},t),{group:a})),s=o.id;return i[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var n,i;tt(t)?i=this.getHullById(t):i=t,(n=this.get("hullMap"))===null||n===void 0||delete n[i.id],i.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(n){var i=t[n];i.destroy()}),this.set("hullMap",{}))},e}(J9);function VA(r){"@babel/helpers - typeof";return VA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VA(r)}var Pd=as,U5="-shape",eM="-label",_1=["startArrow","endArrow"],W5={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},p0e={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},S1={edge:p0e,node:W5,combo:W5},HA="-label-bg",kI={options:{labelCfg:{style:{fontFamily:It.windowFontFamily}},descriptionCfg:{style:{fontFamily:It.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:dn({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,t);if(n.set("className",this.itemType+U5),t.shapeMap[this.itemType+U5]=n,e.label){var i=this.drawLabel(e,t);i.set("className",this.itemType+eM),t.shapeMap[this.itemType+eM]=i}return n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,i=n||{},a=this.getLabelStyle(e,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var l=s.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":u=Pd(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=Pd(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=Pd(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=Pd(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=Pd(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var f=this.drawLabelBg(e,t,s),c=this.itemType+HA;f.set("classname",c),t.shapeMap[c]=f,s.toFront()}return s},drawLabelBg:function(e,t,n){var i=this.options.labelCfg,a=$t({},i,e.labelCfg),o=this.getLabelBgStyleByPosition(n,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,n){var i=this.getLabelStyleByPosition(e,t,n),a="".concat(this.itemType,"Label"),o=It[a]?It[a].style:null;return U(U(U({},o),i),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var i,a=t.getContainer(),o=t.getKeyShape(),s=$t({},o.attr(),e.style),l=function(c){var h,d=s[c];if(Wi(d)){var v=((i=a.shapeMap)===null||i===void 0?void 0:i[c])||a.find(function(p){return p.get("name")===c});v==null||v.attr(d)}else o.attr((h={},h[c]=d,h))};for(var u in s)l(u)},updateLabel:function(e,t,n){var i,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,l=s===void 0?{}:s,u=this.itemType+eM,f=o.shapeMap[u]||o.find(function(x){return x.get("className")===u}),c=this.itemType+HA,h=o.shapeMap[c]||o.find(function(x){return x.get("className")===c});if(f&&e.label===void 0&&(o.removeChild(f),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[c])),e.label||e.label==="")if(f){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(l=dn(l,e.labelCfg));var v=this.getLabelStyleByPosition(e,l,o),p=(i=e.labelCfg)===null||i===void 0?void 0:i.style,g=U(U({},v),p),m=g.rotate;if(delete g.rotate,!isNaN(m)&&m!==""){var b=[1,0,0,0,1,0,0,0,1];b=Pd(b,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=b,f.attr(g)}else((a=f.getMatrix())===null||a===void 0?void 0:a[4])!==1&&f.resetMatrix(),f.attr(g);if(!h)g.background&&(h=this.drawLabelBg(e,o,f),h.set("classname",c),o.shapeMap[c]=h,f.toFront());else if(g.background){var y=this.getLabelBgStyleByPosition(f,l);h.attr(y)}else o.removeChild(h)}else{var d=this.drawLabel(e,o);d.set("className",u),o.shapeMap[u]=d}},afterUpdate:function(e,t){},setState:function(e,t,n){var i,a,o,s=n.get("keyShape");if(!(!s||s.destroyed)){var l=n.getType(),u=Im(t)?e:"".concat(e,":").concat(t),f=this.getStateStyle(u,n),c=n.getStateStyle(u);if(!(!c&&!f)){var h=$t({},c||f),d=n.getContainer(),v={x:1,y:1,cx:1,cy:1,matrix:1};if(l==="combo"&&(v.r=1,v.width=1,v.height=1),t){var p=function(P){var R,G=h[P];if(Wi(G)&&!_1.includes(P)){var D=((o=d.shapeMap)===null||o===void 0?void 0:o[P])||d.find(function(B){return B.get("name")===P});D==null||D.attr(G)}else s.attr((R={},R[P]=G,R))};for(var g in h)p(g)}else{var m=tx(n.getCurrentStatesStyle()),b=n.getModel(),y=$t({},b.style,tx(n.getOriginStyle())),x=s.get("name"),w=s.attr(),E={};Object.keys(w).forEach(function(N){if(N!=="img"){var P=w[N];P&&VA(P)==="object"?E[N]=Tr(P):E[N]=P}});var _={},S=function(P){var R=h[P];if(Wi(R)&&!_1.includes(P)){var G=d.shapeMap[P]||d.find(function(Y){return Y.get("name")===P});if(G){var D=tx(G.attr());De(R,function(Y,ee){if(P===x&&E[ee]&&!v[ee]){delete E[ee];var ne=y[P][ee]||S1[l][ee];s.attr(ee,ne)}else if(D[ee]||D[ee]===0){delete D[ee];var Q=y[P][ee]||S1[l][ee];G.attr(ee,Q)}}),_[P]=D}}else if(E[P]&&!v[P]){delete E[P];var B=y[P]||(y[x]?y[x][P]:void 0)||S1[l][P];s.attr(P,B)}};for(var C in h)S(C);x?_[x]=E:$t(_,E);for(var g in m)if(!v[g]){var M=m[g];(!Wi(M)||_1.includes(g))&&(x?($t(y[x],(a={},a[g]=M,a)),delete y[g]):$t(y,(i={},i[g]=M,i)),delete m[g])}var T={};dn(T,y,_,m);var A=!1,O=function(P){var R,G,D=T[P];if(Wi(D)&&!_1.includes(P)){var B=d.shapeMap[P]||d.find(function(ee){return ee.get("name")===P});B&&((B.get("type")==="text"||B.get("labelRelated"))&&(delete D.x,delete D.y,delete D.matrix),P===x&&(l==="combo"&&(delete D.r,delete D.width,delete D.height),A=!0),B.attr(D))}else if(!A){var Y=D||S1[l][P];l==="combo"?x||s.attr((R={},R[P]=Y,R)):s.attr((G={},G[P]=Y,G))}};for(var L in T)O(L)}}}},getStateStyle:function(e,t){var n=t.getModel(),i=t.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=n.stateStyles?n.stateStyles[e]:o&&o[e];return i==="combo"?Tr(u):$t({},l,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,n,i=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return i}},g0e={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:It.nodeLabel.offset,getSize:function(e){var t,n=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||It.defaultNode.size;return Ft(n)&&n.length===1&&(n=[n[0],n[0]]),Ft(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,t){var n=t.maxLength,i=e.label;n&&(i=q7(i,n));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:i,textBaseline:"middle",textAlign:"center"};var o=t.offset;Lt(o)&&(o=this.offset);var s=this.getSize(e),l;switch(a){case"top":l={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":l={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:l={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return l.text=i,l},getLabelBgStyleByPosition:function(e,t){var n;if(!e)return{};var i=(n=t.style)===null||n===void 0?void 0:n.background;if(!i)return{};var a=e.getBBox(),o=TI(i.padding),s=a.width+o[1]+o[3],l=a.height+o[0]+o[2];return U(U({x:a.minX-o[3],y:a.minY-o[0]},i),{width:s,height:l})},drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e),a=t.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=t.shapeMap["link-point-left"]||t.find(function(T){return T.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(T){return T.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(T){return T.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(T){return T.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=n);var u=$t({},l,e.linkPoints),f=u.fill,c=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var v=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=v.left,g=v.right,m=v.top,b=v.bottom,y=this.getSize(e),x=y[0],w=y[1],E={r:d,fill:f,stroke:c,lineWidth:h};if(i)!p&&p!==void 0?(i.remove(),delete t.shapeMap["link-point-left"]):i.attr(U(U({},E),{x:-x/2,y:0}));else if(p){var _="link-point-left";t.shapeMap[_]=t.addShape("circle",{attrs:U(U({},E),{x:-x/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(a)!g&&g!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr(U(U({},E),{x:x/2,y:0}));else if(g){var S="link-point-right";t.shapeMap[S]=t.addShape("circle",{attrs:U(U({},E),{x:x/2,y:0}),className:S,name:S,isAnchorPoint:!0})}if(o)!m&&m!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr(U(U({},E),{x:0,y:-w/2}));else if(m){var C="link-point-top";t.shapeMap[C]=t.addShape("circle",{attrs:U(U({},E),{x:0,y:-w/2}),className:C,name:C,isAnchorPoint:!0})}if(s)!b&&b!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr(U(U({},E),{x:0,y:w/2}));else if(b){var M="link-point-bottom";t.shapeMap[M]=t.addShape("circle",{attrs:U(U({},E),{x:0,y:w/2}),className:M,name:M,isAnchorPoint:!0})}},updateShape:function(e,t,n,i,a){var o=t.get("keyShape");o.attr(U({},n)),this.updateLabel(e,t,a),i&&this.updateIcon(e,t)},updateIcon:function(e,t){var n=this,i=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,l=o.text,u=i.shapeMap["".concat(this.type,"-icon")]||i.find(function(m){return m.get("name")==="".concat(n.type,"-icon")});if(u)if(s||s===void 0){var f=$t({},u.attr(),a),c=f.width,h=c===void 0?20:c,d=f.height,v=d===void 0?20:d;(f.fontFamily==="iconfont"||f.hasOwnProperty("text"))&&(h=0,v=0),u.attr(U(U({},f),{x:-h/2,y:-v/2}))}else u.remove(),delete i.shapeMap["".concat(this.type,"-icon")];else if(s){var p="".concat(this.type,"-icon");if(l)i.shapeMap[p]=i.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:p,name:p});else{var h=a.width,v=a.height;i.shapeMap[p]=i.addShape("image",{attrs:U(U({},a),{x:-h/2,y:-v/2}),className:p,name:p})}var g=i.shapeMap["node-label"]||i.find(function(m){return m.get("name")==="node-label"});g&&g.toFront()}}},m0e=U(U({},kI),g0e);vn.registerNode("single-node",m0e);var M1="edge-shape";function y0e(r){var e=r;return r==="start"?e="end":r==="end"&&(e="start"),e}var b0e={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:It.defaultEdge.size,style:{x:0,y:0,stroke:It.defaultEdge.style.stroke,lineAppendWidth:It.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:It.edgeLabel.style.fill,fontSize:It.edgeLabel.style.fontSize,fontFamily:It.windowFontFamily}},stateStyles:U({},It.edgeStateStyles)},getPath:function(e){var t=[];return De(e,function(n,i){i===0?t.push(["M",n.x,n.y]):t.push(["L",n.x,n.y])}),t},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},i=$t({},t,n,e.style),a=e.size||It.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,l=this.getControlPoints(e),u=[o];l&&(u=u.concat(l)),u.push(s);var f=this.getPath(u),c=$t({},It.defaultEdge.style,{stroke:It.defaultEdge.color,lineWidth:a,path:f},i);return c},updateShapeStyle:function(e,t,n){var i,a=t.getContainer(),o=((i=t.getKeyShape)===null||i===void 0?void 0:i.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var l=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[l];f&&(c=c.concat(f)),c.push(u);var h=o.attr(),d=e.style||{};d.stroke===void 0&&(d.stroke=e.color);var v=e.sourceNode,p=e.targetNode,g={radius:d.radius};f||(g={source:v,target:p,offset:d.offset,radius:d.radius});var m=this.getPath(c,g),b={};n==="move"?b={path:m}:(h.endArrow&&d.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(e.style.startArrow={path:""}),b=U({},e.style),b.lineWidth===void 0&&(b.lineWidth=(Pt(s)?s:s==null?void 0:s[0])||h.lineWidth),b.path===void 0&&(b.path=m),b.stroke===void 0&&(b.stroke=h.stroke||e.color)),o&&o.attr(b)},getLabelStyleByPosition:function(e,t,n){var i=t.position||this.labelPosition,a={},o=n==null?void 0:n.shapeMap[M1],s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=t.refX||this.refX,u=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+l,a.y=e.startPoint.y+u,a.text=e.label,a;var f;Lt(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate;var c=X7(o,s,l,u,f);return a.x=c.x,a.y=c.y,a.rotate=c.rotate,a.textAlign=this._getTextAlign(i,c.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var n=e.getBBox(),i=t.style&&t.style.background;if(!i)return{};var a=i.padding,o=n.width+a[1]+a[3],s=n.height+a[0]+a[2],l=U(U({},i),{width:o,height:s,x:n.minX-a[3],y:n.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),u;return Lt(t.autoRotate)?u=this.labelAutoRotate:u=t.autoRotate,u&&(l.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),l},_getTextAlign:function(e,t){var n="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?n=e:n=y0e(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("path",{className:M1,name:M1,attrs:n});return t.shapeMap[M1]=i,i},drawLabel:function(e,t){var n=this.options.labelCfg,i=dn({},n,e.labelCfg),a=this.getLabelStyle(e,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(e,t,s,a,o),u=this.itemType+HA;l.set("classname",u),t.shapeMap[u]=l,s.toFront()}return s},drawLabelBg:function(e,t,n,i,a){var o=this.options.labelCfg,s=dn({},o,e.labelCfg),l=this.getLabelBgStyleByPosition(n,s),u=t.addShape("rect",{name:"text-bg-shape",attrs:l,labelRelated:!0});return t.shapeMap["text-bg-shape"]=u,u}},x0e=U(U({},kI),b0e);vn.registerEdge("single-edge",x0e);vn.registerEdge("line",{getControlPoints:function(){}},"single-edge");vn.registerEdge("spline",{getPath:function(e){var t=JW(e);return t}},"single-edge");vn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint,i={x:(t.x+n.x)/2,y:(t.y+n.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=vA(t,o,n),t.x<=n.x&&t.y>n.y?this.clockwise=a.x>o.x?0:1:t.x<=n.x&&t.y<n.y?this.clockwise=a.x>o.x?1:0:t.x>n.x&&t.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(n.x-t.x)/(n.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),Ft(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-t.x,y:n.y-t.y},l=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:e.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=vA(t,o,n)}var u=ew(t,a),f=[{x:u,y:u}];return f},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge");vn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var n=e.startPoint,i=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Ft(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),Ft(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=lw(n,i,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge");vn.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Pt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Pt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var n=e.startPoint,i=e.endPoint,a=lw(n,i,e.curvePosition[0],e.curveOffset[0]),o=lw(n,i,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge");vn.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Pt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Pt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Pt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");vn.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Pt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Pt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Pt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+i*this.curvePosition[0]+a[0],y:t.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},l=[o,s];return l}},"cubic");vn.registerEdge("loop",{getPathPoints:function(e){return H7(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var w0e={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:It.comboLabel.refX,refY:It.comboLabel.refY,options:{style:{stroke:It.defaultCombo.style.stroke,fill:It.defaultCombo.style.fill,lineWidth:It.defaultCombo.style.lineWidth},labelCfg:{style:{fill:It.comboLabel.style.fill,fontSize:It.comboLabel.style.fontSize,fontFamily:It.windowFontFamily}},stateStyles:U({},It.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=Tr(e.size||this.options.size||It.defaultCombo.size);return Ft(t)&&t.length===1&&(t=[t[0],t[0]]),Ft(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Ft(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;Lt(o)&&(o=this.refX),Lt(s)&&(s=this.refY);var l=this.getSize(e),u=Math.max(i.r,l[0]/2)||l[0]/2,f=u+a,c;switch(n){case"top":c={x:0,y:-f-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":c={x:0,y:f+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:-f+o,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:e.label,textAlign:"center"};break;default:c={x:f+o,y:0,textAlign:"right"};break}return c.text=e.label,c},drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e),a=t.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,n){var i=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),l=s.show,u=s.img,f=s.width,c=s.height,h=t.getContainer(),d=h.find(function(m){return m.get("name")==="combo-collapsed-substitute-icon"}),v=d&&!d.destroyed,p=t.get("keyShape");if(i&&l){if(v)d.show();else{var g={width:f||n.r*2||n.width,height:c||n.r*2||n.height};d=h.addShape("image",{attrs:U({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else v&&(d.hide(),p.show())},updateShape:function(e,t,n){var i=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,n),a.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&i.updateCollapsedIcon(e,t,n)}})):(a.attr(U({},n)),this.updateCollapsedIcon(e,t,n)),this.updateLabel(e,t)}},E0e=U(U({},kI),w0e);vn.registerCombo("single-combo",E0e);vn.registerCombo("circle",{options:{size:[It.defaultCombo.size[0],It.defaultCombo.size[0]],padding:Math.max.apply(Math,It.defaultCombo.padding),animate:!0,style:{stroke:It.defaultCombo.style.stroke,fill:It.defaultCombo.style.fill,lineWidth:It.defaultCombo.style.lineWidth},labelCfg:{style:{fill:It.comboLabel.style.fill,fontSize:It.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:U({},It.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);delete n.height,delete n.width;var i=t.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;Ft(n)&&(n=Math.max.apply(Math,n));var i={stroke:e.color},a=$t({},t,i,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=Pt(o)?o/2:o[0]/2;else{var l=this.getSize(e);!Pt(a.r)||isNaN(a.r)?s=l[0]/2||It.defaultCombo.style.r:s=Math.max(a.r,l[0]/2)||l[0]/2}a.r=s+n;var u=U({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},u},update:function(e,t){var n=this.getSize(e),i=e.padding||this.options.padding;Ft(i)&&(i=Math.max.apply(Math,i));var a=Tr(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=Pt(o)?o/2:o[0]/2:s=Math.max(a.r,n[0]/2)||n[0]/2,a.r=s+i;var l=t.get("sizeCache");l&&(l.r=a.r);var u={stroke:e.color},f=t.get("keyShape"),c=$t({},f.attr(),u,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,c,!0)}},"single-combo");vn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:It.defaultCombo.style.stroke,fill:It.defaultCombo.style.fill,lineWidth:It.defaultCombo.style.lineWidth},labelCfg:{style:{fill:It.comboLabel.style.fill,fontSize:It.comboLabel.style.fontSize,fontFamily:It.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:U({},It.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Pt(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;Lt(o)&&(o=this.refX),Lt(s)&&(s=this.refY);var l=-i.width/2-a[3],u=i.width/2+a[1],f=-i.height/2-a[0],c=i.height/2+a[2],h;switch(n){case"top":h={x:l+o,y:f+s,textBaseline:"top",textAlign:"left"};break;case"bottom":h={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;case"left":h={x:l+s,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":h={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;default:h={x:u+o,y:0,textAlign:"right"};break}return h.text=e.label,h},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;Pt(n)&&(n=[n,n,n,n]);var i={stroke:e.color},a=$t({},t,i,e.style),o=this.getSize(e),s,l,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?Pt(u)?(s=u,l=u):(s=u[0],l=u[1]):(!Pt(a.width)||isNaN(a.width)?s=o[0]||It.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!Pt(a.height)||isNaN(a.height)?l=o[1]||It.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var f=-s/2-n[3],c=-l/2-n[0];a.width=s+n[1]+n[3],a.height=l+n[0]+n[2];var h=U({x:f,y:c},a);return e.style?(e.style.width=s,e.style.height=l):e.style={width:s,height:l},h},update:function(e,t){var n=this.getSize(e),i=e.padding||this.options.padding;Pt(i)&&(i=[i,i,i,i]);var a=Tr(e.style),o,s,l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?Pt(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=t.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var f={stroke:e.color},c=t.get("keyShape"),h=$t({},c.attr(),f,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,h,!1)}},"single-combo");vn.registerNode("simple-circle",{options:{size:It.defaultNode.size,style:{x:0,y:0,stroke:It.defaultNode.style.stroke,fill:It.defaultNode.style.fill,lineWidth:It.defaultNode.style.lineWidth},labelCfg:{style:{fill:It.nodeLabel.style.fill,fontSize:It.nodeLabel.style.fontSize,fontFamily:It.windowFontFamily}},stateStyles:U({},It.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var n=this.getShapeStyle(e),i="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:i,draggable:!0});return t.shapeMap[i]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=dn({},t,n),a=this.getSize(e),o=a[0]/2,s=U({x:0,y:0,r:o},i);return s},update:function(e,t,n){var i=this.getSize(e),a={stroke:e.color,r:i[0]/2},o=t.get("keyShape"),s=dn({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,n)}},"single-node");vn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:It.defaultNode.style.stroke,fill:It.defaultNode.style.fill,lineWidth:It.defaultNode.style.lineWidth},labelCfg:{style:{fill:It.nodeLabel.style.fill,fontSize:It.nodeLabel.style.fontSize,fontFamily:It.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:U({},It.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=U({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t,n){t.getContainer();var i=(this.mergeStyle||this.getOptions(e)).style,a=this.getSize(e),o=t.get("keyShape");e.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=$t({},i,o.attr(),s);l=$t(l,e.style),this.updateShape(e,t,l,!1,n)}},"single-node");vn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:It.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e);delete i.fill;var a=t.addShape(n,{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var l=n.r;t.setClip({type:"circle",attrs:U({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=n.width,f=n.height,c=a-u/2,h=o-f/2;t.setClip({type:"rect",attrs:U({x:c,y:h,width:u,height:f},s)})}else if(i==="ellipse"){var d=n.rx,v=n.ry;t.setClip({type:"ellipse",attrs:U({x:a,y:o,rx:d,ry:v},s)})}else if(i==="polygon"){var p=n.points;t.setClip({type:"polygon",attrs:U({points:p},s)})}else if(i==="path"){var g=n.path;t.setClip({type:"path",attrs:U({path:g},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),n=t.style,i=t.img,a=this.getSize(e),o=a[0],s=a[1];n&&(o=n.width||a[0],s=n.height||a[1]);var l=U({x:-o/2,y:-s/2,width:o,height:s,img:i},n);return l},updateShapeStyle:function(e,t){var n=t.getContainer(),i="".concat(this.itemType,"-shape"),a=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");const iV={triangle:function(e,t,n){e===void 0&&(e=10),t===void 0&&(t=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2," L ").concat(i+t,",").concat(e/2," Z");return a},vee:function(e,t,n){e===void 0&&(e=15),t===void 0&&(t=20),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2,`
        L `).concat(i+2*t/3,",0 L ").concat(i+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var n=t*2,i="M ".concat(n,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return i},rect:function(e,t,n){e===void 0&&(e=10),t===void 0&&(t=10),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",").concat(-e/2,` 
        L `).concat(i+t,",").concat(-e/2,` 
        L `).concat(i+t,",").concat(e/2,` 
        L `).concat(i,",").concat(e/2," Z");return a},diamond:function(e,t,n){e===void 0&&(e=15),t===void 0&&(t=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,`,0 
        L `).concat(i+t/2,",").concat(-e/2,` 
        L `).concat(i+t,`,0 
        L `).concat(i+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,n,i,a,o){e===void 0&&(e=15),t===void 0&&(t=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+t+a,u="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(l,", -").concat(n/2,`
            L `).concat(l+i," -").concat(n/2,`
            L `).concat(l+i," ").concat(n/2,`
            L `).concat(l," ").concat(n/2,`
            Z`);return u}},aV={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,t+a],["L",e+i,t+a],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,t-a],["L",e+i,t-a],["L",e,t+n],["Z"]]}};var _0e=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const S0e=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:_0e},Symbol.toStringTag,{value:"Module"}));var oV=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const M0e=Object.freeze(Object.defineProperty({__proto__:null,isForce:oV},Symbol.toStringTag,{value:"Module"}));var C0e=as,aa=U(U(U(U(U(U(U({},$ge),ove),i0e),Zde),S0e),M0e),{transform:C0e,mat3:oU}),sV=function(){function r(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var n=e.pipes;return Array.isArray(n)?n.map(function(i){return(i==null?void 0:i.type)||""}):null},r.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),i=Array.isArray(t);return n&&i?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},r.prototype.refreshLayout=function(){var e=this,t=e.graph,n=e.layoutType,i=e.layoutCfg,a=i===void 0?{}:i;if(t){var o=a.animate,s=o===void 0&&(n==="force"||n==="force2"),l=oV(n)&&(o||s);t.get("animate")&&!l?t.positionsAnimate(n==="comboCombined"):t.refreshPositions(n==="comboCombined")}},r.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,n=Mi(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,!t&&this.layout()},r.prototype.changeData=function(e){this.layout(e)},r.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(n){var i,a=(i=n.getType)===null||i===void 0?void 0:i.call(n);a&&t.push(a),n.destroy()}),this.layoutMethods=[],t},r.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var e,t=[],n=[],i=[],a=[],o=[],s=[],l=[],u=this.graph.getNodes(),f=this.graph.getEdges(),c=this.graph.getCombos(),h=u.length,d=0;d<h;d++){var v=u[d];if(!(!v||v.destroyed)){var p=v.getModel();if(!v.isVisible()){n.push(p);continue}t.push(p)}}for(var g=f.length,d=0;d<g;d++){var m=f[d];if(!(!m||m.destroyed)){var p=m.getModel();if(!m.isVisible()){a.push(p);continue}p.isComboEdge?o.push(p):i.push(p)}}for(var b=c.length,d=0;d<b;d++){var y=c[d];if(!y.destroyed){var p=y.getModel();if(!y.isVisible()){l.push(p);continue}s.push(p)}}return{nodes:t,hiddenNodes:n,edges:i,hiddenEdges:a,combos:s,hiddenCombos:l,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(x){return x.getModel()})}},r.prototype.relayout=function(e){var t=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(!(!i||i.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var l=this.data.nodes;if(!l)return!1;s=this.initPositions(o.center,l)}i.emit("beforelayout"),a==null||a.forEach(function(u,f){var c=o[f]||o;s=s.then(function(){var h,d=t.execLayoutMethod(c,f);return f===a.length-1&&((h=o.onAllLayoutEnd)===null||h===void 0||h.call(o)),d})})}},r.prototype.filterLayoutData=function(e,t){var n=e.nodes,i=e.edges,a=Mi(e,["nodes","edges"]);if(!n)return e;var o,s;Ln(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var l=n.filter(o);if(Ln(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var u=l.reduce(function(f,c){return f[c.id]=!0,f},{});s=function(c){return u[c.source]&&u[c.target]}}return U({nodes:l,edges:i.filter(s)},a)},r.prototype.getLayoutBBox=function(e){var t=this.graph,n=Kx(t.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=jW(o);return s.size=[s.width,s.height],s}),a=Object.values(Kx(e,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),n=t.nodes;if(!(n[0].x===void 0||n[0].x===null||fl(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},r.prototype.initPositions=function(e,t){var n;return co(this,void 0,void 0,function(){var i,a,o;return ho(this,function(s){return i=this.graph,t!=null&&t.length?(a=t.filter(function(l){return fl(l.x)||fl(l.y)}),o=a?a.length:0,o?[2,(n=this.initWithPreset)===null||n===void 0?void 0:n.call(this,function(){},function(){var l=i.get("width")*.85,u=i.get("height")*.85,f=Math.ceil(Math.sqrt(o)*(l/u)),c=Math.ceil(o/f),h=l/(f-1),d=u/(c-1);(!isFinite(h)||!h)&&(h=0),(!isFinite(d)||!h)&&(d=0);for(var v=e[0]-l/2,p=e[1]-u/2,g=0;g<o;g++){var m=a[g];fl(+m.x)&&(m.x=g%f*h+v),fl(+m.y)&&(m.y=Math.floor(g/f)*d+p)}})]:[2]):[2,Promise.resolve()]})})},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r}(),lV=function(){function r(e){this.graph=e,this.destroyed=!1,this.initEvents()}return r}(),zu=vn.registerNode,uV=vn.registerEdge,A0e=vn.registerCombo,fV=Xk.registerBehavior,gt=It;It.version,vn.registerNode,vn.registerEdge,vn.registerCombo,Xk.registerBehavior;var II={},Dr={},QE={},Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});Jf.MESSAGE=Jf.ALGORITHM=void 0;var T0e={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};Jf.ALGORITHM=T0e;var O0e={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};Jf.MESSAGE=O0e;var JE={},cV={},ad={};Object.defineProperty(ad,"__esModule",{value:!0});ad.default=void 0;var k0e=function(e,t){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,f=o[l],c=o[u];!f&&f!==0||!c&&c!==0||(a[f][c]=1,t||(a[c][f]=1))}),a},I0e=k0e;ad.default=I0e;var e_={},t_={},Gv={};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.default=Gv.LinkedListNode=void 0;var L0e=function(e,t){return e===t},XA=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}();Gv.LinkedListNode=XA;var P0e=function(){function r(e){e===void 0&&(e=L0e),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new XA(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new XA(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),D0e=P0e;Gv.default=D0e;Object.defineProperty(t_,"__esModule",{value:!0});t_.default=void 0;var N0e=R0e(Gv);function R0e(r){return r&&r.__esModule?r:{default:r}}var B0e=function(){function r(){this.linkedList=new N0e.default}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}(),F0e=B0e;t_.default=F0e;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.uniqueId=vi.getOutEdgesNodeId=vi.getNeighbors=vi.getEdgesByNodeId=void 0;var $0e=function(e,t,n){t===void 0&&(t=[]);var i=t.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)};vi.getNeighbors=$0e;var z0e=function(e,t){return t.filter(function(n){return n.source===e})};vi.getOutEdgesNodeId=z0e;var G0e=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})};vi.getEdgesByNodeId=G0e;var j0e=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};vi.uniqueId=j0e;Object.defineProperty(e_,"__esModule",{value:!0});e_.default=void 0;var U0e=V0e(t_),W0e=vi;function V0e(r){return r&&r.__esModule?r:{default:r}}function H0e(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}var X0e=function(e,t,n,i){i===void 0&&(i=!0);var a=H0e(n),o=new U0e.default,s=e.edges,l=s===void 0?[]:s;o.enqueue(t);for(var u="",f=function(){var h=o.dequeue();a.enter({current:h,previous:u}),(0,W0e.getNeighbors)(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)f()},Y0e=X0e;e_.default=Y0e;var ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.default=K0e;ec.detectStrongConnectComponents=ec.detectConnectedComponents=void 0;var hV=vi,dV=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(v){l.push(v),s[v.id]=!0;for(var p=(0,hV.getNeighbors)(v.id,a),g=function(y){var x=p[y];if(!s[x]){var w=n.filter(function(E){return E.id===x});w.length>0&&d(w[0])}},m=0;m<p.length;++m)g(m)},f=0;f<n.length;f++){var c=n[f];if(!s[c.id]){u(c);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o};ec.detectConnectedComponents=dV;var vV=function(e){for(var t=e.nodes,n=t===void 0?[]:t,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},f=[],c=0,h=function g(m){l[m.id]=c,u[m.id]=c,c+=1,o.push(m),s[m.id]=!0;for(var b=(0,hV.getNeighbors)(m.id,a,"target").filter(function(_){return n.map(function(S){return S.id}).indexOf(_)>-1}),y=function(S){var C=b[S];if(!l[C]&&l[C]!==0){var M=n.filter(function(T){return T.id===C});M.length>0&&g(M[0]),u[m.id]=Math.min(u[m.id],u[C])}else s[C]&&(u[m.id]=Math.min(u[m.id],l[C]))},x=0;x<b.length;x++)y(x);if(u[m.id]===l[m.id]){for(var w=[];o.length>0;){var E=o.pop();if(s[E.id]=!1,w.push(E),E===m)break}w.length>0&&f.push(w)}},d=0,v=n;d<v.length;d++){var p=v[d];!l[p.id]&&l[p.id]!==0&&h(p)}return f};ec.detectStrongConnectComponents=vV;function K0e(r,e){return e?vV(r):dV(r)}var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.getOutDegree=Tu.getInDegree=Tu.default=void 0;var j0=function(e){var t={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},q0e=j0;Tu.default=q0e;var Z0e=function(e,t){var n=j0(e);return n[t]?j0(e)[t].inDegree:0};Tu.getInDegree=Z0e;var Q0e=function(e,t){var n=j0(e);return n[t]?j0(e)[t].outDegree:0};Tu.getOutDegree=Q0e;var gl={},r_={};Object.defineProperty(r_,"__esModule",{value:!0});r_.default=tme;var J0e=vi;function eme(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}function pV(r,e,t,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:t});var a=r.edges,o=a===void 0?[]:a;(0,J0e.getNeighbors)(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:t,current:e,next:s})&&pV(r,s,e,n,i)}),n.leave({current:e,previous:t})}function tme(r,e,t,n){n===void 0&&(n=!0),pV(r,e,"",eme(t),n)}function YA(r){"@babel/helpers - typeof";return YA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YA(r)}Object.defineProperty(gl,"__esModule",{value:!0});gl.detectAllUndirectedCycle=gl.detectAllDirectedCycle=gl.detectAllCycles=gl.default=void 0;var rme=ime(r_),gV=nme(ec),mV=vi;function yV(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(yV=function(i){return i?t:e})(r)}function nme(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||YA(r)!=="object"&&typeof r!="function")return{default:r};var t=yV(e);if(t&&t.has(r))return t.get(r);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)){var o=i?Object.getOwnPropertyDescriptor(r,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=r[a]}return n.default=r,t&&t.set(r,n),n}function ime(r){return r&&r.__esModule?r:{default:r}}var ame=function(e){var t=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(c){o[c.id]=c});for(var u={enter:function(h){var d=h.current,v=h.previous;if(s[d]){t={};for(var p=d,g=v;g!==d;)t[p]=g,p=g,g=a[g];t[p]=g}else s[d]=d,delete o[d],a[d]=v},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return t?!1:!l[d]}};Object.keys(o).length;){var f=Object.keys(o)[0];(0,rme.default)(e,f,u)}return t},bV=function(e,t,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=(0,gV.default)(e,!1),l=0,u=s;l<u.length;l++){var f=u[l];if(f.length)for(var c=f[0],h=c.id,d=[c],v=(i={},i[h]=c,i),p=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,b=(0,mV.getNeighbors)(m,e.edges),y=function(E){var _,S=b[E],C=e.nodes.find(function(N){return N.id===S});if(S===m)o.push((_={},_[S]=g,_));else if(!(S in p))v[S]=g,d.push(C),p[S]=new Set([g]);else if(!p[m].has(C)){for(var M=!0,T=[C,g],A=v[m];p[S].size&&!p[S].has(A)&&(T.push(A),A!==v[A.id]);)A=v[A.id];if(T.push(A),t&&n?(M=!1,T.findIndex(function(N){return t.indexOf(N.id)>-1})>-1&&(M=!0)):t&&!n&&T.findIndex(function(N){return t.indexOf(N.id)>-1})>-1&&(M=!1),M){for(var O={},L=1;L<T.length;L+=1)O[T[L-1].id]=T[L];T.length&&(O[T[T.length-1].id]=T[0]),o.push(O)}p[S].add(g)}},x=0;x<b.length;x+=1)y(x)}return o};gl.detectAllUndirectedCycle=bV;var xV=function(e,t,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},f=function(A){for(var O=[A];O.length>0;){var L=O.pop();a.has(L)&&(a.delete(L),o[L.id].forEach(function(N){O.push(N)}),o[L.id].clear())}},c=function T(A,O,L){var N=!1;if(t&&n===!1&&t.indexOf(A.id)>-1)return N;i.push(A),a.add(A);for(var P=L[A.id],R=0;R<P.length;R+=1){var G=l[P[R]];if(G===O){for(var D={},B=1;B<i.length;B+=1)D[i[B-1].id]=i[B];i.length&&(D[i[i.length-1].id]=i[0]),s.push(D),N=!0}else a.has(G)||T(G,O,L)&&(N=!0)}if(N)f(A);else for(var R=0;R<P.length;R+=1){var G=l[P[R]];o[G.id].has(A)||o[G.id].add(A)}return i.pop(),N},h=e.nodes,d=h===void 0?[]:h,v=0;v<d.length;v+=1){var p=d[v],g=p.id;u[g]=v,l[v]=p}if(t&&n)for(var m=function(A){var O=t[A];u[d[A].id]=u[O],u[O]=0,l[0]=d.find(function(L){return L.id===O}),l[u[d[A].id]]=d[A]},v=0;v<t.length;v++)m(v);for(var b=function(A){for(var O,L,N=1/0,P=0;P<A.length;P+=1)for(var R=A[P],G=0;G<R.length;G++){var D=u[R[G].id];D<N&&(N=D,L=P)}for(var B=A[L],Y=[],P=0;P<B.length;P+=1){var ee=B[P];Y[ee.id]=[];for(var ne=0,Q=(0,mV.getNeighbors)(ee.id,e.edges,"target").filter(function(Fe){return B.map(function(_e){return _e.id}).indexOf(Fe)>-1});ne<Q.length;ne++){var ye=Q[ne];ye===ee.id&&!(n===!1&&t.indexOf(ee.id)>-1)?s.push((O={},O[ee.id]=ee,O)):Y[ee.id].push(u[ye])}}return{component:B,adjList:Y,minIdx:N}},y=0;y<d.length;){var x=d.filter(function(T){return u[T.id]>=y}),w=(0,gV.detectStrongConnectComponents)({nodes:x,edges:e.edges}).filter(function(T){return T.length>1});if(w.length===0)break;var E=b(w),_=E.minIdx,S=E.adjList,C=E.component;if(C.length>1){C.forEach(function(T){o[T.id]=new Set});var M=l[_];if(t&&n&&t.indexOf(M.id)===-1)return s;c(M,M,S),y=_+1}else break}return s};gl.detectAllDirectedCycle=xV;var ome=function(e,t,n,i){return i===void 0&&(i=!0),t?xV(e,n,i):bV(e,n,i)};gl.detectAllCycles=ome;var sme=ame;gl.default=sme;var Mp={};const wV=jl(ese),Dm=jl(hle);Object.defineProperty(Mp,"__esModule",{value:!0});Mp.default=void 0;var V5=wV,lme=Dm,H5=vi,ume=function(e,t,n){for(var i=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=t[o])}return a},fme=function(e,t,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},f={},c={};o.forEach(function(b,y){var x=b.id;f[x]=1/0,x===t&&(f[x]=0)});for(var h=o.length,d=function(y){var x=ume(f,o,u),w=x.id;if(u[w]=!0,f[w]===1/0)return"continue";var E=[];n?E=(0,H5.getOutEdgesNodeId)(w,l):E=(0,H5.getEdgesByNodeId)(w,l),E.forEach(function(_){var S=_.target,C=_.source,M=S===w?C:S,T=i&&_[i]?_[i]:1;f[M]>f[x.id]+T?(f[M]=f[x.id]+T,c[M]=[x.id]):f[M]===f[x.id]+T&&c[M].push(x.id)})},v=0;v<h;v++)d();c[t]=[t];var p={};for(var g in f)f[g]!==1/0&&EV(t,g,c,p);var m={};for(var g in p)m[g]=p[g][0];return{length:f,path:m,allPath:p}},cme=fme;Mp.default=cme;function EV(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],a=0,o=t[e];a<o.length;a++){var s=o[a],l=EV(r,s,t,n);if(!l)return;for(var u=0,f=l;u<f.length;u++){var c=f[u];(0,lme.isArray)(c)?i.push((0,V5.__spreadArray)((0,V5.__spreadArray)([],c,!0),[e],!1)):i.push([c,e])}}return n[e]=i,n[e]}var jv={};Object.defineProperty(jv,"__esModule",{value:!0});jv.findShortestPath=jv.findAllPath=void 0;var hme=dme(Mp),C1=vi;function dme(r){return r&&r.__esModule?r:{default:r}}var vme=function(e,t,n,i,a){var o=(0,hme.default)(e,t,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}};jv.findShortestPath=vme;var pme=function(e,t,n,i){var a;if(t===n)return[[t]];var o=e.edges,s=o===void 0?[]:o,l=[t],u=(a={},a[t]=!0,a),f=[],c=[],h=i?(0,C1.getNeighbors)(t,s,"target"):(0,C1.getNeighbors)(t,s);for(f.push(h);l.length>0&&f.length>0;){var d=f[f.length-1];if(d.length){var v=d.shift();v&&(l.push(v),u[v]=!0,h=i?(0,C1.getNeighbors)(v,s,"target"):(0,C1.getNeighbors)(v,s),f.push(h.filter(function(m){return!u[m]})))}else{var p=l.pop();u[p]=!1,f.pop();continue}if(l[l.length-1]===n){var g=l.map(function(b){return b});c.push(g);var p=l.pop();u[p]=!1,f.pop()}}return c};jv.findAllPath=pme;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.default=void 0;var gme=mme(ad);function mme(r){return r&&r.__esModule?r:{default:r}}var yme=function(e,t){for(var n=(0,gme.default)(e,t),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},bme=yme;Nm.default=bme;var n_={};Object.defineProperty(n_,"__esModule",{value:!0});n_.default=void 0;var xme=Eme(ad),wme=vi;function Eme(r){return r&&r.__esModule?r:{default:r}}var _me=function(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},f={};o.forEach(function(y,x){var w=(0,wme.uniqueId)();y.clusterId=w,u[w]={id:w,nodes:[y]},f[y.id]={node:y,idx:x}});var c=(0,xme.default)(e,t),h={};c.forEach(function(y,x){var w=o[x].id;h[w]={},y.forEach(function(E,_){if(E){var S=o[_].id;h[w][S]=E}})});for(var d=0,v=function(){var x=!1;if(o.forEach(function(w){var E={};Object.keys(h[w.id]).forEach(function(L){var N=h[w.id][L],P=f[L].node,R=P.clusterId;E[R]||(E[R]=0),E[R]+=N});var _=-1/0,S=[];if(Object.keys(E).forEach(function(L){_<E[L]?(_=E[L],S=[L]):_===E[L]&&S.push(L)}),!(S.length===1&&S[0]===w.clusterId)){var C=S.indexOf(w.clusterId);if(C>=0&&S.splice(C,1),S&&S.length){x=!0;var M=u[w.clusterId],T=M.nodes.indexOf(w);M.nodes.splice(T,1);var A=Math.floor(Math.random()*S.length),O=u[S[A]];O.nodes.push(w),w.clusterId=O.id}}}),!x)return"break";d++};d<i;){var p=v();if(p==="break")break}Object.keys(u).forEach(function(y){var x=u[y];(!x.nodes||!x.nodes.length)&&delete u[y]});var g=[],m={};l.forEach(function(y){var x=y.source,w=y.target,E=y[n]||1,_=f[x].node.clusterId,S=f[w].node.clusterId,C="".concat(_,"---").concat(S);if(m[C])m[C].weight+=E,m[C].count++;else{var M={source:_,target:S,weight:E,count:1};m[C]=M,g.push(M)}});var b=[];return Object.keys(u).forEach(function(y){b.push(u[y])}),{clusters:b,clusterEdges:g}},Sme=_me;n_.default=Sme;var i_={},Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.default=void 0;var Mme=Dm,Cme=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(e){var t=[];if(e!==0)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=(0,Mme.clone)(this.arr);t.sort(function(o,s){return o-s});var n=t[t.length-1],i=t[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new r(e)},r.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r}(),Ame=Cme;Rm.default=Ame;var ml={},Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.secondReg=Uv.dateReg=void 0;var Tme=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;Uv.secondReg=Tme;var Ome=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;Uv.dateReg=Ome;Object.defineProperty(ml,"__esModule",{value:!0});ml.getPropertyWeight=ml.getAllSortProperties=ml.getAllProperties=ml.default=void 0;var X5=Uv,LI=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var n={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(X5.secondReg)&&!"".concat(a.properties[o]).match(X5.dateReg)&&isNaN(Number(a.properties[o]))){n.hasOwnProperty(o)&&delete n[o];return}n.hasOwnProperty(o)?n[o]+=1:n[o]=1})});var i=Object.keys(n).sort(function(a,o){return n[o]-n[a]});return i.length<t?i:i.slice(0,t)};ml.getAllSortProperties=LI;var kme=function(e,t){return t.map(function(n){return e.hasOwnProperty(n)?e[n]:0})},_V=function(e){for(var t=LI(e),n=[],i=0;i<e.length;i++)n[i]=kme(e[i].properties,t);return n};ml.getPropertyWeight=_V;var SV=function(e,t){t===void 0&&(t=void 0);var n=[];return e.forEach(function(i){t===void 0&&n.push(i),i[t]!==void 0&&n.push(i[t])}),n};ml.getAllProperties=SV;var Ime={getAllSortProperties:LI,getPropertyWeight:_V,getAllProperties:SV};ml.default=Ime;var yl={},Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.DistanceType=void 0;var KA;Bm.DistanceType=KA;(function(r){r.EuclideanDistance="euclideanDistance"})(KA||(Bm.DistanceType=KA={}));Object.defineProperty(yl,"__esModule",{value:!0});yl.oneHot=yl.getDistance=yl.getAllKeyValueMap=yl.default=void 0;var Y5=Dm,K5=Bm,q5=Lme(Rm);function Lme(r){return r&&r.__esModule?r:{default:r}}var PI=function(e,t,n){var i=[];t!=null&&t.length?i=t:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=(0,Y5.uniq)(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=(0,Y5.uniq)(s))}),a};yl.getAllKeyValueMap=PI;var MV=function(e,t,n){var i=PI(e,t,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var f=[];Object.keys(i).forEach(function(c){var h=l[c],d=i[c],v=d.findIndex(function(m){return h===m}),p=[];if(s)p.push(h);else for(var g=0;g<d.length;g++)g===v?p.push(1):p.push(0);f=f.concat(p)}),a[u]=f}),a};yl.oneHot=MV;var CV=function(e,t,n,i){n===void 0&&(n=K5.DistanceType.EuclideanDistance);var a=0;switch(n){case K5.DistanceType.EuclideanDistance:a=new q5.default(e).euclideanDistance(new q5.default(t));break}return a};yl.getDistance=CV;var Pme={getAllKeyValueMap:PI,oneHot:MV,getDistance:CV};yl.default=Pme;Object.defineProperty(i_,"__esModule",{value:!0});i_.default=void 0;var Dme=Dm,Nme=AV(ad),sg=AV(Rm),Rme=ml,Bme=yl;function AV(r){return r&&r.__esModule?r:{default:r}}var Z5=function(e,t,n,i){for(var a=t.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,f=0;f<a;f++){var c=e[f].clusterId;if(u===c){var h=t[l][f]||0,d=n[l]||0,v=n[f]||0;s+=h-d*v/o}}return s*=1/o,s},tM=function(e,t){e===void 0&&(e=[]);for(var n=e.length,i=new sg.default([]),a=0;a<n;a++)i=i.add(new sg.default(t[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new sg.default(t[a]),u=l.squareEuclideanDistance(o);s+=u}var f=[];e.forEach(function(){f.push([])});for(var a=0;a<n;a++){var l=new sg.default(t[a]);e[a].clusterInertial=0;for(var c=0;c<n;c++){if(a===c){f[a][c]=0;continue}var h=new sg.default(t[c]);f[a][c]=l.squareEuclideanDistance(h),e[a].clusterInertial+=f[a][c]}}for(var d=0,v=2*n*s,a=0;a<n;a++)for(var p=e[a].clusterId,c=0;c<n;c++){var g=e[c].clusterId;if(!(a===c||p!==g)){var m=e[a].clusterInertial*e[c].clusterInertial/Math.pow(v,2)-f[a][c]/v;d+=m}}return Number(d.toFixed(4))},Fme=function(e,t,n,i,a,o,s,l,u){t===void 0&&(t=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var f=e.nodes,c=f===void 0?[]:f,h=e.edges,d=h===void 0?[]:h,v=[];if(a){c.forEach(function(D,B){D.properties=D.properties||{},D.originIndex=B});var p=[];c.every(function(D){return D.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(c.map(function(D){return D.nodeType}))),c.forEach(function(D){D.properties.nodeType=p.findIndex(function(B){return B===D.nodeType})}));var g=(0,Rme.getAllProperties)(c,o);v=(0,Bme.oneHot)(g,s,l)}var m=1,b={},y={};c.forEach(function(D,B){var Y=String(m++);D.clusterId=Y,b[Y]={id:Y,nodes:[D]},y[D.id]={node:D,idx:B}});var x=(0,Nme.default)(e,t),w=[],E={},_=0;x.forEach(function(D,B){var Y=0,ee=c[B].id;E[ee]={},D.forEach(function(ne,Q){if(ne){Y+=ne;var ye=c[Q].id;E[ee][ye]=ne,_+=ne}}),w.push(Y)}),_/=2;for(var S=1/0,C=1/0,M=0,T=[],A={};;){a&&c.every(function(D){return D.hasOwnProperty("properties")})?S=Z5(c,x,w,_)+tM(c,v)*u:S=Z5(c,x,w,_),M===0&&(C=S,T=c,A=b);var O=S>0&&S>C&&S-C<i;if(S>C&&(T=c.map(function(D){return{node:D,clusterId:D.clusterId}}),A=(0,Dme.clone)(b),C=S),O||M>100)break;M++,Object.keys(b).forEach(function(D){var B=0;d.forEach(function(Y){var ee=Y.source,ne=Y.target,Q=y[ee].node.clusterId,ye=y[ne].node.clusterId;(Q===D&&ye!==D||ye===D&&Q!==D)&&(B=B+(Y[n]||1))}),b[D].sumTot=B}),c.forEach(function(D,B){var Y=b[D.clusterId],ee=0,ne,Q=w[B]/(2*_),ye=0,Le=Y.nodes;Le.forEach(function(de){var Be=y[de.id].idx;ye+=x[B][Be]||0});var Fe=ye-Y.sumTot*Q,_e=Le.filter(function(de){return de.id!==D.id});_e.forEach(function(de,Be){v[de.originIndex]});var Ve=tM(_e,v)*u,Xe=E[D.id];if(Object.keys(Xe).forEach(function(de){var Be=y[de].node,Ie=Be.clusterId;if(Ie!==D.clusterId){var Pe=b[Ie],Ye=Pe.nodes;if(!(!Ye||!Ye.length)){var V=0;Ye.forEach(function(ce){var X=y[ce.id].idx;V+=x[B][X]||0});var z=V-Pe.sumTot*Q,F=Ye.concat([D]);F.forEach(function(ce,X){v[ce.originIndex]});var k=tM(F,v)*u,ue=z-Fe;a&&(ue=z+k-(Fe+Ve)),ue>ee&&(ee=ue,ne=Pe)}}}),ee>0){ne.nodes.push(D);var vt=D.clusterId;D.clusterId=ne.id;var bt=Y.nodes.indexOf(D);Y.nodes.splice(bt,1);var te=0,H=0;d.forEach(function(de){var Be=de.source,Ie=de.target,Pe=y[Be].node.clusterId,Ye=y[Ie].node.clusterId;(Pe===ne.id&&Ye!==ne.id||Ye===ne.id&&Pe!==ne.id)&&(te=te+(de[n]||1)),(Pe===vt&&Ye!==vt||Ye===vt&&Pe!==vt)&&(H=H+(de[n]||1))}),ne.sumTot=te,Y.sumTot=H}})}var L={},N=0;Object.keys(A).forEach(function(D){var B=A[D];if(!B.nodes||!B.nodes.length){delete A[D];return}var Y=String(N+1);Y!==D&&(B.id=Y,B.nodes=B.nodes.map(function(ee){return{id:ee.id,clusterId:Y}}),A[Y]=B,L[D]=Y,delete A[D],N++)}),T.forEach(function(D){var B=D.node,Y=D.clusterId;B&&(B.clusterId=Y,B.clusterId&&L[B.clusterId]&&(B.clusterId=L[B.clusterId]))});var P=[],R={};d.forEach(function(D){var B=D.source,Y=D.target,ee=D[n]||1,ne=y[B].node.clusterId,Q=y[Y].node.clusterId;if(!(!ne||!Q)){var ye="".concat(ne,"---").concat(Q);if(R[ye])R[ye].weight+=ee,R[ye].count++;else{var Le={source:ne,target:Q,weight:ee,count:1};R[ye]=Le,P.push(Le)}}});var G=[];return Object.keys(A).forEach(function(D){G.push(A[D])}),{clusters:G,clusterEdges:P}},$me=Fme;i_.default=$me;var a_={},o_={};Object.defineProperty(o_,"__esModule",{value:!0});o_.default=void 0;var zme=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var i=n[t];this.parent[i]=i}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),i=this.find(t);n!==i&&(n<i?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}(),Gme=zme;o_.default=Gme;var s_={};Object.defineProperty(s_,"__esModule",{value:!0});s_.default=void 0;var jme=function(e,t){return e-t},Ume=function(){function r(e){e===void 0&&(e=jme),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},r}(),Wme=Ume;s_.default=Wme;Object.defineProperty(a_,"__esModule",{value:!0});a_.default=void 0;var Vme=TV(o_),Hme=TV(s_),rM=vi;function TV(r){return r&&r.__esModule?r:{default:r}}var Xme=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var f=function(g,m){return t?g.weight-m.weight:0},c=new Hme.default(f);for((0,rM.getEdgesByNodeId)(l.id,s).forEach(function(p){c.insert(p)});!c.isEmpty();){var h=c.delMin(),d=h.source,v=h.target;u.has(d)&&u.has(v)||(n.push(h),u.has(d)||(u.add(d),(0,rM.getEdgesByNodeId)(d,s).forEach(function(p){c.insert(p)})),u.has(v)||(u.add(v),(0,rM.getEdgesByNodeId)(v,s).forEach(function(p){c.insert(p)})))}return n},Q5=function(e,t){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});t&&l.sort(function(d,v){return d.weight-v.weight});for(var u=new Vme.default(a.map(function(d){return d.id}));l.length>0;){var f=l.shift(),c=f.source,h=f.target;u.connected(c,h)||(n.push(f),u.union(c,h))}return n},Yme=function(e,t,n){var i={prim:Xme,kruskal:Q5};return n?i[n](e,t):Q5(e,t)},Kme=Yme;a_.default=Kme;var l_={};Object.defineProperty(l_,"__esModule",{value:!0});l_.default=void 0;var qme=Qme(Tu),Zme=vi;function Qme(r){return r&&r.__esModule?r:{default:r}}var Jme=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,f=u===void 0?[]:u,c=l.length,h,d={},v={},p=0;p<c;++p){var g=l[p],m=g.id;d[m]=1/c,v[m]=1/c}for(var b=(0,qme.default)(e);o>0&&i>t;){a=0;for(var p=0;p<c;++p){var g=l[p],m=g.id;if(h=0,b[g.id].inDegree===0)d[m]=0;else{for(var y=(0,Zme.getNeighbors)(m,f,"source"),x=0;x<y.length;++x){var w=y[x],E=b[w].outDegree;E>0&&(h+=v[w]/E)}d[m]=n*h,a+=d[m]}}a=(1-a)/c,i=0;for(var p=0;p<c;++p){var g=l[p],m=g.id;h=d[m]+a,i+=Math.abs(h-v[m]),v[m]=h}o-=1}return v},eye=Jme;l_.default=eye;var u_={},f_={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.VACANT_NODE_LABEL=hi.VACANT_NODE_ID=hi.VACANT_GRAPH_ID=hi.VACANT_EDGE_LABEL=hi.VACANT_EDGE_ID=hi.Node=hi.Graph=hi.Edge=hi.AUTO_EDGE_ID=void 0;var OV=-1;hi.VACANT_EDGE_ID=OV;var U0=-1;hi.VACANT_NODE_ID=U0;var kV="-1";hi.VACANT_EDGE_LABEL=kV;var IV="-1";hi.VACANT_NODE_LABEL=IV;var tye=-1;hi.VACANT_GRAPH_ID=tye;var rye="-1";hi.AUTO_EDGE_ID=rye;var qA=function(){function r(e,t,n,i){e===void 0&&(e=OV),t===void 0&&(t=U0),n===void 0&&(n=U0),i===void 0&&(i=kV),this.id=e,this.from=t,this.to=n,this.label=i}return r}();hi.Edge=qA;var LV=function(){function r(e,t){e===void 0&&(e=U0),t===void 0&&(t=IV),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}();hi.Node=LV;var nye=function(){function r(e,t,n){e===void 0&&(e=U0),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new LV(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new qA(e,t,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new qA(e,n,t,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}();hi.Graph=nye;Object.defineProperty(f_,"__esModule",{value:!0});f_.default=void 0;var iye=Dm,Ga=hi,eh=function(){function r(e,t,n,i,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||Ga.VACANT_NODE_LABEL,edgeLabel:i||Ga.VACANT_EDGE_LABEL,nodeLabel2:a||Ga.VACANT_NODE_LABEL}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),J5=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var i=0;i<t;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,i,a){return this.dfsEdgeList.push(new eh(e,t,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){e===void 0&&(e=Ga.VACANT_GRAPH_ID),t===void 0&&(t=!1);var n=new Ga.Graph(e,!0,t);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,f=s.nodeLabel2;l!==Ga.VACANT_NODE_LABEL&&n.addNode(a,l),f!==Ga.VACANT_NODE_LABEL&&n.addNode(o,f),l!==Ga.VACANT_NODE_LABEL&&f!==l&&n.addEdge(void 0,a,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,n=t-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),A1=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},r.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},r}(),aye=function(){function r(e){var t=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,f=u===void 0?10:u,c=e.directed,h=c===void 0?!1:c,d=e.verbose,v=d===void 0?!1:d;this.graphs=t,this.dfsCode=new J5,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=f,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,i=[],a=e.nodeMap;return t.edges.forEach(function(o){(n.directed||t.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(e,t,n,i){if(!this.directed&&t===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var f=s[u];if(!(i.hasEdge(f)||f.to!==t.from)){if(this.directed){if(a[t.from].label<a[n.to].label||a[t.from].label===a[n.to].label&&t.label<=f.label)return f}else if(t.label<f.label||t.label===f.label&&a[t.to].label<=a[n.to].label)return f}}return null},r.prototype.findForwardPureEdges=function(e,t,n,i){for(var a=[],o=t.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var f=s[u],c=e.nodeMap[f.to];n<=c.label&&!i.hasNode(c)&&a.push(f)}return a},r.prototype.findForwardRmpathEdges=function(e,t,n,i){for(var a=[],o=e.nodeMap,s=o[t.to].label,l=o[t.from],u=l.edges,f=u.length,c=0;c<f;c++){var h=u[c],d=o[h.to].label;t.to===h.to||n>d||i.hasNode(o[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&a.push(h)}return a},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var n=this.directed,i=t.toGraph(Ga.VACANT_GRAPH_ID,n),a=i.nodeMap,o=new J5,s={};i.nodes.forEach(function(c){var h=e.findForwardRootEdges(i,c);h.forEach(function(d){var v=a[d.to],p="".concat(c.label,"-").concat(d.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:c.label,edgeLabel:d.label,nodeLabel2:v.label});var g={graphId:i.id,edge:d,preNode:null};s[p].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new eh(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function c(h){for(var d=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[d[0]].toNode,g={},m=!1,b=0,y=n?-1:0,x=function(R){if(m)return"break";h.forEach(function(G){var D=new A1(G),B=e.findBackwardEdge(i,D.edges[d[R]],D.edges[d[0]],D);B&&(g[B.label]||(g[B.label]={projected:[],edgeLabel:B.label}),g[B.label].projected.push({graphId:i.id,edge:g,preNode:G}),b=o.dfsEdgeList[d[R]].fromNode,m=!0)})},w=d.length-1;w>y;w--){var E=x(w);if(E==="break")break}if(m){var _=e.findMinLabel(g);o.dfsEdgeList.push(new eh(p,b,Ga.VACANT_NODE_LABEL,_.edgeLabel,Ga.VACANT_NODE_LABEL));var S=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[S]!==o.dfsEdgeList[S]?!1:c(g[_.edgeLabel].projected)}var C={};m=!1;var M=0;h.forEach(function(P){var R=new A1(P),G=e.findForwardPureEdges(i,R.edges[d[0]],v,R);G.length>0&&(m=!0,M=p,G.forEach(function(D){var B="".concat(D.label,"-").concat(a[D.to].label);C[B]||(C[B]={projected:[],edgeLabel:D.label,nodeLabel2:a[D.to].label}),C[B].projected.push({graphId:i.id,edge:D,preNode:P})}))});for(var T=d.length,A=function(R){if(m)return"break";var G=d[R];h.forEach(function(D){var B=new A1(D),Y=e.findForwardRmpathEdges(i,B.edges[G],v,B);Y.length>0&&(m=!0,M=o.dfsEdgeList[G].fromNode,Y.forEach(function(ee){var ne="".concat(ee.label,"-").concat(a[ee.to].label);C[ne]||(C[ne]={projected:[],edgeLabel:ee.label,nodeLabel2:a[ee.to].label}),C[ne].projected.push({graphId:i.id,edge:ee,preNode:D})}))})},w=0;w<T;w++){var O=A(w);if(O==="break")break}if(!m)return!0;var L=e.findMinLabel(C);o.dfsEdgeList.push(new eh(M,p+1,Ga.VACANT_NODE_LABEL,L.edgeLabel,L.nodeLabel2));var N=o.dfsEdgeList.length-1;return t.dfsEdgeList[N]!==o.dfsEdgeList[N]?!1:c(C["".concat(L.edgeLabel,"-").concat(L.nodeLabel2)].projected)},f="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[f].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,iye.clone)(e))}},r.prototype.subGraphMining=function(e){var t=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(f){for(var c=t.graphs[f.graphId],h=c.nodeMap,d=new A1(f),v=a.length-1;v>=0;v--){var p=t.findBackwardEdge(c,d.edges[a[v]],d.edges[a[0]],d);if(p){var g="".concat(t.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:f.graphId,edge:p,preNode:f})}}if(!(i>=t.maxNodeNum)){var m=t.findForwardPureEdges(c,d.edges[a[0]],s,d);m.forEach(function(y){var x="".concat(o,"-").concat(y.label,"-").concat(h[y.to].label);l[x]||(l[x]={projected:[],fromNodeId:o,edgeLabel:y.label,nodeLabel2:h[y.to].label}),l[x].projected.push({graphId:f.graphId,edge:y,preNode:f})});for(var b=function(x){var w=t.findForwardRmpathEdges(c,d.edges[a[x]],s,d);w.forEach(function(E){var _="".concat(t.dfsCode.dfsEdgeList[a[x]].fromNode,"-").concat(E.label,"-").concat(h[E.to].label);l[_]||(l[_]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[x]].fromNode,edgeLabel:E.label,nodeLabel2:h[E.to].label}),l[_].projected.push({graphId:f.graphId,edge:E,preNode:f})})},v=0;v<a.length;v++)b(v)}}),Object.keys(u).forEach(function(f){var c=u[f],h=c.toNodeId,d=c.edgeLabel;t.dfsCode.dfsEdgeList.push(new eh(o,h,"-1",d,"-1")),t.subGraphMining(u[f].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(f){var c=l[f],h=c.fromNodeId,d=c.edgeLabel,v=c.nodeLabel2;t.dfsCode.dfsEdgeList.push(new eh(h,o+1,Ga.VACANT_NODE_LABEL,d,v)),t.subGraphMining(l[f].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],f=u.nodeMap;u.nodes.forEach(function(c,h){var d=c.label,v="".concat(l,"-").concat(d);if(!s[v]){var p=a[d]||0;p++,a[d]=p}s[v]={graphKey:l,label:d},c.edges.forEach(function(g){var m=d,b=f[g.to].label;if(!t&&m>b){var y=b;b=m,m=y}var x=g.label,w="".concat(m,"-").concat(x,"-").concat(b);if(!o[w]){var E=o[w]||0;E++,o[w]=E}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:l}),i.push(f)}}),i},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(i){var a=t[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var f=o[u.to],c="".concat(s.label,"-").concat(u.label,"-").concat(f.label);n[c]||(n[c]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:f.label});var h={graphId:i,edge:u,preNode:null};n[c].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new eh(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},r}(),oye=function(e,t,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new Ga.Graph(s,!0,t),f={};l.nodes.forEach(function(c,h){u.addNode(h,c[n]),f[c.id]=h}),l.edges.forEach(function(c,h){var d=f[c.source],v=f[c.target];u.addEdge(-1,d,v,c[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},sye=function(e,t,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[t]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},eB="cluster",lye=function(e){var t=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?eB:a,s=e.edgeLabelProp,l=s===void 0?eB:s,u=oye(t,i,o,l),f=e.minSupport,c=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,v=e.top,p={graphs:u,minSupport:f,maxNodeNum:c,minNodeNum:h,top:v,verbose:d,directed:i},g=new aye(p);g.run();var m=sye(g.frequentSubgraphs,o,l);return m},uye=lye;f_.default=uye;Object.defineProperty(u_,"__esModule",{value:!0});u_.default=void 0;var tB=wV,rB=DI(Nm),fye=DI(f_),nB=DI(Mp),cye=vi;function DI(r){return r&&r.__esModule?r:{default:r}}var iB=function(e,t,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return t.forEach(function(s,l){a.push(PV(o,s,l,n,i))}),a},PV=function(e,t,n,i,a){var o=[n],s=[],l={};return t.forEach(function(u,f){if(u<=a&&n!==f){o.push(f),s.push(e[f]);var c=e[f][i];l[c]?(l[c].count++,l[c].dists.push(u)):l[c]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(f,c){return f-c})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},hye=function(e,t,n,i,a){var o=Math.ceil(n/t),s={},l=0;return i.forEach(function(u,f){for(var c=0,h=0,d=u.nodeIdxs,v=u.neighborNum-1;c<o;){for(var p=d[1+Math.floor(Math.random()*v)],g=0;(s["".concat(f,"-").concat(p)]||s["".concat(p,"-").concat(f)])&&(p=Math.floor(Math.random()*t),g++,!(g>2*t)););if(g<2*t&&(s["".concat(f,"-").concat(p)]={start:f,end:p,distance:a[f][p]},c++,l++,l>=n))return s;if(h++,h>2*t)break}if(c<o){var m=o-c;o=(o+m)/(t-f-1)}}),s},nx=function(e,t,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],f=(s=t[u.start])===null||s===void 0?void 0:s.nodeIdxs,c=(l=t[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!f||!c)){var h=new Set(c),d=f.filter(function(b){return h.has(b)});if(!(!d||!d.length)){for(var v={},p=d.length,g=0;g<p;g++){var m=a[d[g]];i[o].nodes.push(m),v[m.id]=!0}n.edges.forEach(function(b){v[b.source]&&v[b.target]&&i[o].edges.push(b)})}}}}),i},ix=function(e,t,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var f=s[u.source][n],c=s[u.target][n],h=t==null?void 0:t.nodes[0][n],d=t==null?void 0:t.nodes[1][n],v=t==null?void 0:t.edges[0][i];u[i]===v&&(f===h&&c===d||f===d&&c===h)&&l++}),l)},dye=function(e,t,n){for(var i=1/0,a=0,o=function(u){var f=e[u],c=Object.keys(f).sort(function(b,y){return f[b]-f[y]}),h=10,d=[];c.forEach(function(b,y){d[y%h]||(d[y%h]={graphs:[],totalCount:0,aveCount:0}),d[y%h].graphs.push(b),d[y%h].totalCount+=f[b]});var v=0,p=[];d.forEach(function(b){var y=b.totalCount/b.graphs.length;b.aveCount=y,p.push(y);var x=0,w=b.length;b.graphs.forEach(function(E,_){var S=f[E];b.graphs.forEach(function(C,M){_!==M&&(x+=Math.abs(S-f[C]))})}),x/=w*(w-1)/2,v+=x}),v/=d.length;var g=0;p.forEach(function(b,y){p.forEach(function(x,w){y!==w&&(g+=Math.abs(b-x))}),g/=p.length*(p.length-1)/2});var m=g-v;i<m&&(i=m,a=u)},s=0;s<t;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},aB=function(e,t){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},oB=function(e,t,n){var i={},a={};return e.forEach(function(o,s){i["".concat(cye.uniqueId)]={idx:s,edge:o};var l=o[t];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var f=n[o.target];f&&(f.degree++,f.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},sB=function(e,t,n){var i=t.length,a={};return t.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,f=l;f<i;f++)if(s!==f){var c=e[f].id,h=o[f];a["".concat(u,"-").concat(c)]=h,n||(a["".concat(c,"-").concat(u)]=h)}}),a},vye=function(e,t,n,i,a,o,s,l,u,f,c){var h,d="".concat(t.id,"-").concat(n.id);if(f&&f[d])return f[d];var v=c?c[d]:void 0;if(!v){var p=(h={},h[d]={start:i[t.id].idx,end:i[n.id].idx,distance:a},h);c=nx(p,o,e,c),v=c[d]}return ix(v,s,l,u)},lB=function(e,t,n,i){var a,o,s,l=(a=e[t])===null||a===void 0?void 0:a.degree,u=(o=e[t])===null||o===void 0?void 0:o.inDegree,f=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(l=1/0,u=1/0,f=1/0,i[t].forEach(function(c){var h=n[c.id].degree;l>h&&(l=h);var d=n[c.id].inDegree;u>d&&(u=d);var v=n[c.id].outDegree;f>v&&(f=v)}),e[t]={degree:l,inDegree:u,outDegree:f}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:f}},pye=function(e,t,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var f=(0,rB.default)(e,n),c=(0,rB.default)(t,n),h=sB(e.nodes,f,n),d=sB(t.nodes,c,n),v=aB(e.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,m=aB(t.nodes,o),b=m.nodeMap,y=m.nodeLabelMap;oB(e.edges,s,p);var x=oB(t.edges,s,b).edgeLabelMap,w=[];c==null||c.forEach(function(z){w=w.concat(z)}),a||(a=Math.max.apply(Math,(0,tB.__spreadArray)((0,tB.__spreadArray)([],w,!1),[2],!1))),i||(i=a);var E=iB(e,f,o,i),_=iB(t,c,o,i),S=Math.min(100,u*(u-1)/2),C=hye(i,u,S,E,f),M=nx(C,E,e),T=10,A=1,O=1,L=4,N={graphs:M,nodeLabelProp:o,edgeLabelProp:s,minSupport:A,minNodeNum:O,maxNodeNum:L,directed:n},P=(0,fye.default)(N).slice(0,T),R=P.length,G=[];P.forEach(function(z,F){G[F]={},Object.keys(M).forEach(function(k){var ue=M[k],ce=ix(ue,z,o,s);G[F][k]=ce})});var D=dye(G,R,P),B=D.structure,Y=D.structureCountMap,ee=t.nodes[0],ne=[],Q=(l=t.nodes[0])===null||l===void 0?void 0:l[o],ye=-1/0;t.nodes.forEach(function(z){var F=z[o],k=g[F];(k==null?void 0:k.length)>ye&&(ye=k.length,ne=k,Q=F,ee=z)});var Le={},Fe={},_e={},Ve={},Xe={},vt={};Object.keys(y).forEach(function(z,F){Xe[z]=[],n&&(vt[z]=[]);var k=y[z],ue={};k.forEach(function(ke){var Ke=d["".concat(ee.id,"-").concat(ke.id)];if(Ke&&Xe[z].push(Ke),ue["".concat(ee.id,"-").concat(ke.id)]={start:0,end:b[ke.id].idx,distance:Ke},n){var Et=d["".concat(ke.id,"-").concat(ee.id)];Et&&vt[z].push(Et)}}),Xe[z]=Xe[z].sort(function(ke,Ke){return ke-Ke}),n&&(vt[z]=vt[z].sort(function(ke,Ke){return ke-Ke})),Fe=nx(ue,_,t,Fe);var ce=[];if(Object.keys(ue).forEach(function(ke){if(_e[ke]){ce.push(_e[ke]);return}var Ke=Fe[ke];_e[ke]=ix(Ke,B,o,s),ce.push(_e[ke])}),ce=ce.sort(function(ke,Ke){return Ke-ke}),Ve["".concat(ee.id,"-").concat(z)]=ce,z!==Q)for(var X=(ne==null?void 0:ne.length)||0,ae=function(Ke){var Et=ne[Ke],jt=E[p[Et.id].idx],kr=jt.nodeLabelCountMap[z],Qt=y[z].length;if(!kr||kr.count<Qt)return ne.splice(Ke,1),"continue";for(var zr=!1,lr=0;lr<Qt;lr++)if(kr.dists[lr]>Xe[z][lr]){zr=!0;break}if(zr)return ne.splice(Ke,1),"continue";var Lr={};jt.neighbors.forEach(function(Fr){var $n=h["".concat(Et.id,"-").concat(Fr.id)];Lr["".concat(Et.id,"-").concat(Fr.id)]={start:p[Et.id].idx,end:p[Fr.id].idx,distance:$n}}),M=nx(Lr,E,e,M);var Zr=[];Object.keys(Lr).forEach(function(Fr){if(Y[Fr]){Zr.push(Y[Fr]);return}var $n=M[Fr];Y[Fr]=ix($n,B,o,s),Zr.push(Y[Fr])}),Zr=Zr.sort(function(Fr,$n){return $n-Fr});for(var mi=!1,lr=0;lr<Qt;lr++)if(Zr[lr]<ce[lr]){mi=!0;break}if(mi)return ne.splice(Ke,1),"continue"},Ce=X-1;Ce>=0;Ce--)ae(Ce)});var bt=[];ne==null||ne.forEach(function(z){for(var F=p[z.id].idx,k=PV(e.nodes,f[F],F,o,a),ue=k.neighbors,ce=ue.length,X=!1,ae=ce-1;ae>=0;ae--){if(ue.length+1<t.nodes.length){X=!0;return}var Ce=ue[ae],ke=Ce[o];if(!y[ke]||!y[ke].length){ue.splice(ae,1);continue}if(!Xe[ke]||!Xe[ke].length){ue.splice(ae,1);continue}var Ke="".concat(z.id,"-").concat(Ce.id),Et=h[Ke],jt=Xe[ke].length-1,kr=Xe[ke][jt];if(Et>kr){ue.splice(ae,1);continue}if(n){var Qt="".concat(Ce.id,"-").concat(z.id),zr=h[Qt];jt=vt[ke].length-1;var lr=vt[ke][jt];if(zr>lr){ue.splice(ae,1);continue}}var Lr=Y[Ke]?Y[Ke]:vye(e,z,Ce,p,Et,E,B,o,s,Y,M),Zr="".concat(ee.id,"-").concat(ke),mi=Ve[Zr][Ve[Zr].length-1];if(Lr<mi){ue.splice(ae,1);continue}var Fr=lB(Le,ke,b,y),$n=Fr.minPatternNodeLabelDegree;if(Fr.minPatternNodeLabelInDegree,Fr.minPatternNodeLabelOutDegree,p[Ce.id].degree<$n){ue.splice(ae,1);continue}}X||bt.push({nodes:[z].concat(ue)})});var te=(0,nB.default)(t,ee.id,!1).length,H={};n?(Object.keys(te).forEach(function(z){var F=b[z].node[o];H[F]?H[F].push(te[z]):H[F]=[te[z]]}),Object.keys(H).forEach(function(z){H[z].sort(function(F,k){return F-k})})):H=Xe;for(var de=bt.length,Be=function(F){var k=bt[F],ue=k.nodes[0],ce={},X={};k.nodes.forEach(function(Zt,ln){X[Zt.id]={idx:ln,node:Zt,degree:0,inDegree:0,outDegree:0};var Ut=Zt[o];ce[Ut]?ce[Ut]++:ce[Ut]=1});var ae=[],Ce={};e.edges.forEach(function(Zt){X[Zt.source]&&X[Zt.target]&&(ae.push(Zt),Ce[Zt[s]]?Ce[Zt[s]]++:Ce[Zt[s]]=1,X[Zt.source].degree++,X[Zt.target].degree++,X[Zt.source].outDegree++,X[Zt.target].inDegree++)});for(var ke=Object.keys(x).length,Ke=!1,Et=0;Et<ke;Et++){var jt=Object.keys(x)[Et];if(!Ce[jt]||Ce[jt]<x[jt].length){Ke=!0;break}}if(Ke)return bt.splice(F,1),"continue";var kr=ae.length;if(kr<t.edges.length)return bt.splice(F,1),"break";for(var Qt=!1,zr=function(ln){var Ut=ae[ln],Mn=Ut[s],yi=x[Mn];if(!yi||!yi.length)return Ce[Mn]--,yi&&Ce[Mn]<yi.length?(Qt=!0,"break"):(ae.splice(ln,1),X[Ut.source].degree--,X[Ut.target].degree--,X[Ut.source].outDegree--,X[Ut.target].inDegree--,"continue");var Zl=X[Ut.source].node[o],Ql=X[Ut.target].node[o],us=!1;if(yi.forEach(function(Us){var Jl=b[Us.source].node,eu=b[Us.target].node;Jl[o]===Zl&&eu[o]===Ql&&(us=!0),!n&&Jl[o]===Ql&&eu[o]===Zl&&(us=!0)}),!us)return Ce[Mn]--,yi&&Ce[Mn]<yi.length?(Qt=!0,"break"):(ae.splice(ln,1),X[Ut.source].degree--,X[Ut.target].degree--,X[Ut.source].outDegree--,X[Ut.target].inDegree--,"continue")},Et=kr-1;Et>=0;Et--){var lr=zr(Et);if(lr==="break")break}if(Qt)return bt.splice(F,1),"continue";k.edges=ae;var Lr=(0,nB.default)(k,k.nodes[0].id,!1).length;if(Object.keys(Lr).reverse().forEach(function(Zt){if(!(Zt===k.nodes[0].id||Qt)){if(Lr[Zt]===1/0){var ln=X[Zt].node[o];if(ce[ln]--,ce[ln]<y[ln].length){Qt=!0;return}var Ut=k.nodes.indexOf(X[Zt].node);k.nodes.splice(Ut,1),X[Zt]=void 0;return}var Mn=p[Zt].node[o];if(!H[Mn]||!H[Mn].length||Lr[Zt]>H[Mn][H[Mn].length-1]){var ln=X[Zt].node[o];if(ce[ln]--,ce[ln]<y[ln].length){Qt=!0;return}var Ut=k.nodes.indexOf(X[Zt].node);k.nodes.splice(Ut,1),X[Zt]=void 0}}}),Qt)return bt.splice(F,1),"continue";for(var Zr=!0,mi=0;Zr&&!Qt;){Zr=!1;var Fr=n?X[ue.id].degree<b[ee.id].degree||X[ue.id].inDegree<b[ee.id].inDegree||X[ue.id].outDegree<b[ee.id].outDegree:X[ue.id].degree<b[ee.id].degree;if(Fr){Qt=!0;break}if(ce[ue[o]]<y[ue[o]].length){Qt=!0;break}for(var $n=k.nodes.length,to=$n-1;to>=0;to--){var Hn=k.nodes[to],js=X[Hn.id].degree,Mc=X[Hn.id].inDegree,Cc=X[Hn.id].outDegree,ui=Hn[o],ls=lB(Le,ui,b,y),ql=ls.minPatternNodeLabelDegree,Ac=ls.minPatternNodeLabelInDegree,Tc=ls.minPatternNodeLabelOutDegree,Oc=n?js<ql||Mc<Ac||Cc<Tc:js<ql;if(Oc){if(ce[Hn[o]]--,ce[Hn[o]]<y[Hn[o]].length){Qt=!0;break}k.nodes.splice(to,1),X[Hn.id]=void 0,Zr=!0}}if(Qt||!Zr&&mi!==0)break;kr=ae.length;for(var ro=kr-1;ro>=0;ro--){var zn=ae[ro];if(!X[zn.source]||!X[zn.target]){ae.splice(ro,1);var no=zn[s];if(Ce[no]--,X[zn.source]&&(X[zn.source].degree--,X[zn.source].outDegree--),X[zn.target]&&(X[zn.target].degree--,X[zn.target].inDegree--),x[no]&&Ce[no]<x[no].length){Qt=!0;break}Zr=!0}}mi++}if(Qt||Qt||k.nodes.length<t.nodes.length||ae.length<t.edges.length)return bt.splice(F,1),"continue"},Ie=de-1;Ie>=0;Ie--){var Pe=Be(Ie);if(Pe==="break")break}for(var Ye=bt.length,V=function(F){var k=bt[F],ue={};k.edges.forEach(function(ae){var Ce="".concat(ae.source,"-").concat(ae.target,"-").concat(ae.label);ue[Ce]?ue[Ce]++:ue[Ce]=1});for(var ce=function(Ce){var ke=bt[Ce],Ke={};ke.edges.forEach(function(jt){var kr="".concat(jt.source,"-").concat(jt.target,"-").concat(jt.label);Ke[kr]?Ke[kr]++:Ke[kr]=1});var Et=!0;Object.keys(Ke).length!==Object.keys(ue).length?Et=!1:Object.keys(ue).forEach(function(jt){Ke[jt]!==ue[jt]&&(Et=!1)}),Et&&bt.splice(Ce,1)},X=Ye-1;X>F;X--)ce(X);Ye=bt.length},Ie=0;Ie<=Ye-1;Ie++)V(Ie);return bt}}},gye=pye;u_.default=gye;(function(r){function e(x){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},e(x)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"GADDI",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"breadthFirstSearch",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"depthFirstSearch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"detectCycle",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"findAllPath",{enumerable:!0,get:function(){return u.findAllPath}}),Object.defineProperty(r,"findShortestPath",{enumerable:!0,get:function(){return u.findShortestPath}}),Object.defineProperty(r,"floydWarshall",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"getAdjMatrix",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"getDegree",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"getInDegree",{enumerable:!0,get:function(){return a.getInDegree}}),Object.defineProperty(r,"getNeighbors",{enumerable:!0,get:function(){return g.getNeighbors}}),Object.defineProperty(r,"getOutDegree",{enumerable:!0,get:function(){return a.getOutDegree}}),Object.defineProperty(r,"labelPropagation",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"louvain",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"minimumSpanningTree",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"pageRank",{enumerable:!0,get:function(){return v.default}});var t=y(ad),n=y(e_),i=y(ec),a=b(Tu),o=y(gl),s=y(r_),l=y(Mp),u=jv,f=y(Nm),c=y(n_),h=y(i_),d=y(a_),v=y(l_),p=y(u_),g=vi;function m(x){if(typeof WeakMap!="function")return null;var w=new WeakMap,E=new WeakMap;return(m=function(S){return S?E:w})(x)}function b(x,w){if(!w&&x&&x.__esModule)return x;if(x===null||e(x)!=="object"&&typeof x!="function")return{default:x};var E=m(w);if(E&&E.has(x))return E.get(x);var _={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in x)if(C!=="default"&&Object.prototype.hasOwnProperty.call(x,C)){var M=S?Object.getOwnPropertyDescriptor(x,C):null;M&&(M.get||M.set)?Object.defineProperty(_,C,M):_[C]=x[C]}return _.default=x,E&&E.set(x,_),_}function y(x){return x&&x.__esModule?x:{default:x}}})(cV);function ZA(r){"@babel/helpers - typeof";return ZA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZA(r)}Object.defineProperty(JE,"__esModule",{value:!0});JE.default=void 0;var nM=mye(cV),uB=Jf;function DV(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(DV=function(i){return i?t:e})(r)}function mye(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||ZA(r)!=="object"&&typeof r!="function")return{default:r};var t=DV(e);if(t&&t.has(r))return t.get(r);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)){var o=i?Object.getOwnPropertyDescriptor(r,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=r[a]}return n.default=r,t&&t.set(r,n),n}var iM=typeof self<"u"?self:{};iM.onmessage=function(r){var e=r.data,t=e._algorithmType,n=e.data;if(t){if(typeof nM[t]=="function"){var i=nM[t].apply(nM,n);iM.postMessage({_algorithmType:uB.MESSAGE.SUCCESS,data:i});return}iM.postMessage({_algorithmType:uB.MESSAGE.FAILURE})}};var yye=null;JE.default=yye;Object.defineProperty(QE,"__esModule",{value:!0});QE.default=void 0;var bye=Jf,xye=wye(JE);function wye(r){return r&&r.__esModule?r:{default:r}}var Eye=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(i,a){var o=new xye.default;o.postMessage({_algorithmType:e,data:t}),o.onmessage=function(s){var l=s.data,u=l.data,f=l._algorithmType;bye.MESSAGE.SUCCESS===f?i(u):a(),o.terminate()}})}},_ye=Eye;QE.default=_ye;Object.defineProperty(Dr,"__esModule",{value:!0});Dr.pageRankAsync=Dr.minimumSpanningTreeAsync=Dr.louvainAsync=Dr.labelPropagationAsync=Dr.getOutDegreeAsync=Dr.getNeighborsAsync=Dr.getInDegreeAsync=Dr.getDegreeAsync=Dr.getAdjMatrixAsync=Dr.floydWarshallAsync=Dr.findShortestPathAsync=Dr.findAllPathAsync=Dr.dijkstraAsync=Dr.detectCycleAsync=Dr.detectAllUndirectedCycleAsync=Dr.detectAllDirectedCycleAsync=Dr.detectAllCyclesAsync=Dr.connectedComponentAsync=Dr.GADDIAsync=void 0;var Ni=Sye(QE),Ri=Jf;function Sye(r){return r&&r.__esModule?r:{default:r}}var Mye=function(e,t){return(0,Ni.default)(Ri.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])};Dr.getAdjMatrixAsync=Mye;var Cye=function(e,t){return(0,Ni.default)(Ri.ALGORITHM.connectedComponent).apply(void 0,[e,t])};Dr.connectedComponentAsync=Cye;var Aye=function(e){return(0,Ni.default)(Ri.ALGORITHM.getDegree)(e)};Dr.getDegreeAsync=Aye;var Tye=function(e,t){return(0,Ni.default)(Ri.ALGORITHM.getInDegree)(e,t)};Dr.getInDegreeAsync=Tye;var Oye=function(e,t){return(0,Ni.default)(Ri.ALGORITHM.getOutDegree)(e,t)};Dr.getOutDegreeAsync=Oye;var kye=function(e){return(0,Ni.default)(Ri.ALGORITHM.detectCycle)(e)};Dr.detectCycleAsync=kye;var Iye=function(e){return(0,Ni.default)(Ri.ALGORITHM.detectAllCycles)(e)};Dr.detectAllCyclesAsync=Iye;var Lye=function(e){return(0,Ni.default)(Ri.ALGORITHM.detectAllDirectedCycle)(e)};Dr.detectAllDirectedCycleAsync=Lye;var Pye=function(e){return(0,Ni.default)(Ri.ALGORITHM.detectAllUndirectedCycle)(e)};Dr.detectAllUndirectedCycleAsync=Pye;var Dye=function(e,t,n,i){return(0,Ni.default)(Ri.ALGORITHM.dijkstra).apply(void 0,[e,t,n,i])};Dr.dijkstraAsync=Dye;var Nye=function(e,t,n,i){return(0,Ni.default)(Ri.ALGORITHM.findAllPath).apply(void 0,[e,t,n,i])};Dr.findAllPathAsync=Nye;var Rye=function(e,t,n,i,a){return(0,Ni.default)(Ri.ALGORITHM.findShortestPath).apply(void 0,[e,t,n,i,a])};Dr.findShortestPathAsync=Rye;var Bye=function(e,t){return(0,Ni.default)(Ri.ALGORITHM.floydWarshall).apply(void 0,[e,t])};Dr.floydWarshallAsync=Bye;var Fye=function(e,t,n,i){return i===void 0&&(i=1e3),(0,Ni.default)(Ri.ALGORITHM.labelPropagation)(e,t,n,i)};Dr.labelPropagationAsync=Fye;var $ye=function(e,t,n,i){return(0,Ni.default)(Ri.ALGORITHM.louvain)(e,t,n,i)};Dr.louvainAsync=$ye;var zye=function(e,t,n){return(0,Ni.default)(Ri.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,n])};Dr.minimumSpanningTreeAsync=zye;var Gye=function(e,t,n){return(0,Ni.default)(Ri.ALGORITHM.pageRank).apply(void 0,[e,t,n])};Dr.pageRankAsync=Gye;var jye=function(e,t,n){return(0,Ni.default)(Ri.ALGORITHM.getNeighbors).apply(void 0,[e,t,n])};Dr.getNeighborsAsync=jye;var Uye=function(e,t,n,i,a,o,s){return n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),(0,Ni.default)(Ri.ALGORITHM.GADDI).apply(void 0,[e,t,n,i,a,o,s])};Dr.GADDIAsync=Uye;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"GADDIAsync",{enumerable:!0,get:function(){return e.GADDIAsync}}),Object.defineProperty(r,"connectedComponentAsync",{enumerable:!0,get:function(){return e.connectedComponentAsync}}),r.default=void 0,Object.defineProperty(r,"detectAllCyclesAsync",{enumerable:!0,get:function(){return e.detectAllCyclesAsync}}),Object.defineProperty(r,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllDirectedCycleAsync}}),Object.defineProperty(r,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllUndirectedCycleAsync}}),Object.defineProperty(r,"detectCycleAsync",{enumerable:!0,get:function(){return e.detectCycleAsync}}),r.detectDirectedCycleAsync=void 0,Object.defineProperty(r,"dijkstraAsync",{enumerable:!0,get:function(){return e.dijkstraAsync}}),Object.defineProperty(r,"findAllPathAsync",{enumerable:!0,get:function(){return e.findAllPathAsync}}),Object.defineProperty(r,"findShortestPathAsync",{enumerable:!0,get:function(){return e.findShortestPathAsync}}),Object.defineProperty(r,"floydWarshallAsync",{enumerable:!0,get:function(){return e.floydWarshallAsync}}),Object.defineProperty(r,"getAdjMatrixAsync",{enumerable:!0,get:function(){return e.getAdjMatrixAsync}}),Object.defineProperty(r,"getDegreeAsync",{enumerable:!0,get:function(){return e.getDegreeAsync}}),Object.defineProperty(r,"getInDegreeAsync",{enumerable:!0,get:function(){return e.getInDegreeAsync}}),Object.defineProperty(r,"getNeighborsAsync",{enumerable:!0,get:function(){return e.getNeighborsAsync}}),Object.defineProperty(r,"getOutDegreeAsync",{enumerable:!0,get:function(){return e.getOutDegreeAsync}}),Object.defineProperty(r,"labelPropagationAsync",{enumerable:!0,get:function(){return e.labelPropagationAsync}}),Object.defineProperty(r,"louvainAsync",{enumerable:!0,get:function(){return e.louvainAsync}}),Object.defineProperty(r,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return e.minimumSpanningTreeAsync}}),Object.defineProperty(r,"pageRankAsync",{enumerable:!0,get:function(){return e.pageRankAsync}});var e=Dr,t=e.detectCycleAsync;r.detectDirectedCycleAsync=t;var n={getAdjMatrixAsync:e.getAdjMatrixAsync,connectedComponentAsync:e.connectedComponentAsync,getDegreeAsync:e.getDegreeAsync,getInDegreeAsync:e.getInDegreeAsync,getOutDegreeAsync:e.getOutDegreeAsync,detectCycleAsync:e.detectCycleAsync,detectDirectedCycleAsync:t,detectAllCyclesAsync:e.detectAllCyclesAsync,detectAllDirectedCycleAsync:e.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:e.detectAllUndirectedCycleAsync,dijkstraAsync:e.dijkstraAsync,findAllPathAsync:e.findAllPathAsync,findShortestPathAsync:e.findShortestPathAsync,floydWarshallAsync:e.floydWarshallAsync,labelPropagationAsync:e.labelPropagationAsync,louvainAsync:e.louvainAsync,minimumSpanningTreeAsync:e.minimumSpanningTreeAsync,pageRankAsync:e.pageRankAsync,getNeighborsAsync:e.getNeighborsAsync,GADDIAsync:e.GADDIAsync};r.default=n})(II);const Wye=Gl(II),Vye=tie({__proto__:null,default:Wye},[II]);function Hye(){return window?window.devicePixelRatio:1}function NV(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function ph(r,e,t,n,i,a){return i>=r&&i<=r+t&&a>=e&&a<=e+n}function W0(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function Xye(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function fB(r,e){return r[0]===e[0]&&r[1]===e[1]}var Yye=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Kye=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,qye=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,RV=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function BV(r,e){var t=r.match(RV);De(t,function(n){var i=n.split(":");e.addColorStop(i[0],i[1])})}function Zye(r,e,t){var n=Yye.exec(t),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=e.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),f=u*u,c=(l.x-s.x+u*(l.y-s.y))/(f+1)+s.x,h=u*(l.x-s.x+u*(l.y-s.y))/(f+1)+s.y,d=r.createLinearGradient(s.x,s.y,c,h);return BV(a,d),d}function Qye(r,e,t){var n=Kye.exec(t),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(RV);return l[l.length-1].split(":")[1]}var u=e.getBBox(),f=u.maxX-u.minX,c=u.maxY-u.minY,h=Math.sqrt(f*f+c*c)/2,d=r.createRadialGradient(u.minX+f*i,u.minY+c*a,0,u.minX+f/2,u.minY+c/2,o*h);return BV(s,d),d}function Jye(r,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var n,i,a=qye.exec(t),o=a[1],s=a[2];function l(){n=r.createPattern(i,o),e.set("pattern",n),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function e1e(r,e,t){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return t;if(tt(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Zye(r,e,t);if(t[0]==="r")return Qye(r,e,t);if(t[0]==="p")return Jye(r,e,t)}return t}if(t instanceof CanvasPattern)return t}function t1e(r){var e=0,t=0,n=0,i=0;return Ft(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,[e,t,n,i]}function T1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function QA(r,e){return T1(r)*T1(e)?(r[0]*e[0]+r[1]*e[1])/(T1(r)*T1(e)):1}function cB(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(QA(r,e))}function hB(r,e){var t=e[1],n=e[2],i=WE(VE(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],l=r[1],u=e[6],f=e[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-f)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-f)/2,d=c*c/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var v=t*t*(h*h)+n*n*(c*c),p=v?Math.sqrt((t*t*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*t*h/n:0,m=t?p*-n*c/t:0,b=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,y=(l+f)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(c-g)/t,(h-m)/n],w=[(-1*c-g)/t,(-1*h-m)/n],E=cB([1,0],x),_=cB(x,w);return QA(x,w)<=-1&&(_=Math.PI),QA(x,w)>=1&&(_=0),o===0&&_>0&&(_=_-2*Math.PI),o===1&&_<0&&(_=_+2*Math.PI),{cx:b,cy:y,rx:fB(r,[u,f])?0:t,ry:fB(r,[u,f])?0:n,startAngle:E,endAngle:E+_,xRotation:i,arcFlag:a,sweepFlag:o}}var uw=Math.sin,fw=Math.cos,NI=Math.atan2,O1=Math.PI;function FV(r,e,t,n,i,a,o){var s=e.stroke,l=e.lineWidth,u=t-i,f=n-a,c=NI(f,u),h=new $I({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*fw(O1/6)+","+10*uw(O1/6)+" L0,0 L"+10*fw(O1/6)+",-"+10*uw(O1/6),stroke:s,lineWidth:l}});h.translate(i,a),h.rotateAtPoint(i,a,c),r.set(o?"startArrowShape":"endArrowShape",h)}function $V(r,e,t,n,i,a,o){var s=e.startArrow,l=e.endArrow,u=e.stroke,f=e.lineWidth,c=o?s:l,h=c.d,d=c.fill,v=c.stroke,p=c.lineWidth,g=Mi(c,["d","fill","stroke","lineWidth"]),m=t-i,b=n-a,y=NI(b,m);h&&(i=i-fw(y)*h,a=a-uw(y)*h);var x=new $I({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:U(U({},g),{stroke:v||u,lineWidth:p||f,fill:d})});x.translate(i,a),x.rotateAtPoint(i,a,y),r.set(o?"startArrowShape":"endArrowShape",x)}function Ch(r,e,t,n,i){var a=NI(n-e,t-r);return{dx:fw(a)*i,dy:uw(a)*i}}function RI(r,e,t,n,i,a){typeof e.startArrow=="object"?$V(r,e,t,n,i,a,!0):e.startArrow?FV(r,e,t,n,i,a,!0):r.set("startArrowShape",null)}function BI(r,e,t,n,i,a){typeof e.endArrow=="object"?$V(r,e,t,n,i,a,!1):e.endArrow?FV(r,e,t,n,i,a,!1):r.set("startArrowShape",null)}var dB={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Wv(r,e){var t=e.attr();for(var n in t){var i=t[n],a=dB[n]?dB[n]:n;a==="matrix"&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&r.setLineDash?Ft(i)&&r.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=e1e(r,e,i):a==="globalAlpha"&&(i=i*r.globalAlpha),r[a]=i)}}function JA(r,e,t){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(r,t):i.skipDraw()}}function r1e(r,e,t){var n=r.get("refreshElements");De(n,function(i){if(i!==r)for(var a=i.cfg.parent;a&&a!==r&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===r?FI(e):eT(e,t)}function eT(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&FI(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&eT(n.cfg.children,e);else{var i=n1e(n,e);n.cfg.refresh=i,i&&n.isGroup()&&eT(n.cfg.children,e)}}}function zV(r){for(var e=0;e<r.length;e++){var t=r[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&zV(t.cfg.children)}}function FI(r,e){for(var t=0;t<r.length;t++){var n=r[t];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&FI(n.get("children")))}}function n1e(r,e){var t=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&t&&W0(t,e);return n}function GV(r,e,t,n){var i=t.path,a=t.startArrow,o=t.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var f=0;f<i.length;f++){var c=i[f],h=c[0];if(f===0&&a&&a.d){var d=r.getStartTangent();u=Ch(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(f===i.length-2&&i[f+1][0]==="Z"&&o&&o.d){var v=i[f+1];if(v[0]==="Z"){var d=r.getEndTangent();u=Ch(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}}else if(f===i.length-1&&o&&o.d&&i[0]!=="Z"){var d=r.getEndTangent();u=Ch(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}var p=u.dx,g=u.dy;switch(h){case"M":e.moveTo(c[1]-p,c[2]-g),l=[c[1],c[2]];break;case"L":e.lineTo(c[1]-p,c[2]-g);break;case"Q":e.quadraticCurveTo(c[1],c[2],c[3]-p,c[4]-g);break;case"C":e.bezierCurveTo(c[1],c[2],c[3],c[4],c[5]-p,c[6]-g);break;case"A":{var m=void 0;n?(m=n[f],m||(m=hB(s,c),n[f]=m)):m=hB(s,c);var b=m.cx,y=m.cy,x=m.rx,w=m.ry,E=m.startAngle,_=m.endAngle,S=m.xRotation,C=m.sweepFlag;if(e.ellipse)e.ellipse(b,y,x,w,S,E,_,1-C);else{var M=x>w?x:w,T=x>w?1:x/w,A=x>w?w/x:1;e.translate(b,y),e.rotate(S),e.scale(T,A),e.arc(0,0,M,E,_,1-C),e.scale(1/T,1/A),e.rotate(-S),e.translate(-b,-y)}break}case"Z":e.closePath();break}if(h==="Z")s=l;else{var O=c.length;s=[c[O-2],c[O-1]]}}}}function jV(r,e){var t=r.get("canvas");t&&(e==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(t.refreshElement(r,e,t),t.get("autoDraw")&&t.draw())))}function i1e(r){var e;if(r.destroyed)e=r._cacheCanvasBBox;else{var t=r.get("cacheCanvasBBox"),n=t&&!!(t.width&&t.height),i=r.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?e=Xye(t,i):n?e=t:a&&(e=i)}return e}function a1e(r){if(!r.length)return null;var e=[],t=[],n=[],i=[];return De(r,function(a){var o=i1e(a);o&&(e.push(o.minX),t.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:Pl(e),minY:Pl(t),maxX:Ll(n),maxY:Ll(i)}}function o1e(r,e){return!r||!e||!W0(r,e)?null:{minX:Math.max(r.minX,e.minX),minY:Math.max(r.minY,e.minY),maxX:Math.min(r.maxX,e.maxX),maxY:Math.min(r.maxY,e.maxY)}}var UV=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){jV(this,t)},e.prototype.getShapeBase=function(){return bk},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,n){n&&(t.save(),Wv(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,n=[],i=[];De(t,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(n.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var a=null;if(n.length){var o=Pl(n),s=Ll(n),l=Pl(i),u=Ll(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var f=this.cfg.canvas;if(f){var c=f.getViewRange();this.set("isInView",W0(a,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(t.save(),Wv(t,this),this._applyClip(t,this.getClip()),JA(t,i,n),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(SW),Ns=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return bk},e.prototype.getGroupBase=function(){return UV},e.prototype.onCanvasChange=function(t){jV(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),n=this.getHitLineWidth(),i=AW(t),a=i(this),o=n/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,f=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:u,maxY:f}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,n){n&&(t.save(),Wv(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.draw=function(t,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!W0(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Wv(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var n=this.getCanvasBBox(),i=W0(n,t);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!Lt(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&i>0&&(!Lt(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,n,i,a,o)},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(MW),s1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,f=s.r,c=o/2,h=NV(l,u,t,n);return a&&i?h<=f+c:a?h<=f:i?h>=f-c&&h<=f+c:!1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.r;t.beginPath(),t.arc(i,a,o,0,Math.PI*2,!1),t.closePath()},e}(Ns);function k1(r,e,t,n){return r/(t*t)+e/(n*n)}var l1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=o/2,u=s.x,f=s.y,c=s.rx,h=s.ry,d=(t-u)*(t-u),v=(n-f)*(n-f);return a&&i?k1(d,v,c+l,h+l)<=1:a?k1(d,v,c,h)<=1:i?k1(d,v,c-l,h-l)>=1&&k1(d,v,c+l,h+l)<=1:!1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,f=o>s?s/o:1;t.save(),t.translate(i,a),t.scale(u,f),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},e}(Ns);function vB(r){return r instanceof HTMLElement&&tt(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var u1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var n=this,i=this.attrs;if(tt(t)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):vB(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t==="img"&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,u=n.sy,f=n.swidth,c=n.sheight,h=n.img;(h instanceof Image||vB(h))&&(!Lt(l)&&!Lt(u)&&!Lt(f)&&!Lt(c)?t.drawImage(h,l,u,f,c,i,a,o,s):t.drawImage(h,i,a,o,s))},e}(Ns);function kf(r,e,t,n,i,a,o){var s=Math.min(r,t),l=Math.max(r,t),u=Math.min(e,n),f=Math.max(e,n),c=i/2;return a>=s-c&&a<=l+c&&o>=u-c&&o<=f+c?Vi.pointToLine(r,e,t,n,a,o)<=i/2:!1}var f1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&RI(this,t,a,o,n,i),l&&BI(this,t,n,i,a,o)},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,f=s.x2,c=s.y2;return kf(l,u,f,c,o,t,n)},e.prototype.createPath=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,u=n.endArrow,f={dx:0,dy:0},c={dx:0,dy:0};l&&l.d&&(f=Ch(i,a,o,s,n.startArrow.d)),u&&u.d&&(c=Ch(i,a,o,s,n.endArrow.d)),t.beginPath(),t.moveTo(i+f.dx,a+f.dy),t.lineTo(o-c.dx,s-c.dy)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2;return Vi.length(n,i,a,o)},e.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Vi.pointAt(i,a,o,s,t)},e}(Ns),c1e={circle:function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},"triangle-down":function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}},h1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return Lt(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,a=t.symbol||"circle",o=this._getR(t),s,l;if(Ln(a))s=a,l=s(n,i,o),l=zW(l);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},e.prototype.createPath=function(t){var n=this._getPath(),i=this.get("paramsCache");GV(this,t,{path:n},i)},e.Symbols=c1e,e}(Ns);function WV(r,e,t){var n=RW();return r.createPath(n),n.isPointInPath(e,t)}var d1e=1e-6;function aM(r){return Math.abs(r)<d1e?0:r<0?-1:1}function v1e(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function VV(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(v1e(o,s,[e,t]))return!0;aM(o[1]-t)>0!=aM(s[1]-t)>0&&aM(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function Ng(r,e,t,n,i,a,o,s){var l=(Math.atan2(s-e,o-r)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var u={x:r+t*Math.cos(l),y:e+t*Math.sin(l)};return NV(u.x,u.y,o,s)<=a/2}var p1e=as;function g1e(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function m1e(r,e,t,n,i){for(var a=!1,o=e/2,s=0;s<r.length;s++){var l=r[s],u=l.currentPoint,f=l.params,c=l.prePoint,h=l.box;if(!(h&&!ph(h.x-o,h.y-o,h.width+e,h.height+e,t,n))){switch(l.command){case"L":case"Z":a=kf(c[0],c[1],u[0],u[1],e,t,n);break;case"Q":var d=LW.pointDistance(c[0],c[1],f[1],f[2],f[3],f[4],t,n);a=d<=e/2;break;case"C":var v=r0.pointDistance(c[0],c[1],f[1],f[2],f[3],f[4],f[5],f[6],t,n,i);a=v<=e/2;break;case"A":var p=l.arcParams,g=p.cx,m=p.cy,b=p.rx,y=p.ry,x=p.startAngle,w=p.endAngle,E=p.xRotation,_=[t,n,1],S=b>y?b:y,C=b>y?1:b/y,M=b>y?y/b:1,T=p1e(null,[["t",-g,-m],["r",-E],["s",1/C,1/M]]);XE(_,_,T),a=Ng(0,0,S,x,w,e,_[0],_[1]);break}if(a)break}}return a}function y1e(r){for(var e=r.length,t=[],n=[],i=[],a=0;a<e;a++){var o=r[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(t.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:t,polylines:n}}const I1=U({hasArc:g1e,extractPolygons:y1e,isPointInStroke:m1e},Mve);function pB(r,e,t){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=VV(a,e,t),n)break}return n}var $I=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t==="path"&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=zW(t);var n=I1.hasArc(t);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=GW(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),n=t.startArrow,i=t.endArrow;if(n){var a=this.getStartTangent();RI(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();BI(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var f=this.getTotalLength();u=I1.isPointInStroke(s,o,t,n,f)}if(!u&&a)if(l)u=WV(this,t,n);else{var c=this.attr("path"),h=I1.extractPolygons(c);u=pB(h.polygons,t,n)||pB(h.polylines,t,n)}return u},e.prototype.createPath=function(t){var n=this.attr(),i=this.get("paramsCache");GV(this,t,n,i)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return Lt(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;De(n,function(f,c){t>=f[0]&&t<=f[1]&&(i=(t-f[0])/(f[1]-f[0]),a=c)});var s=o[a];if(Lt(s)||Lt(a))return null;var l=s.length,u=o[a+1];return r0.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",I1.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,n=0,i=[],a,o,s,l,u=this.get("curve");if(u){if(De(u,function(f,c){s=u[c+1],l=f.length,s&&(t+=r0.length(f[l-2],f[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}De(u,function(f,c){s=u[c+1],l=f.length,s&&(a=[],a[0]=n/t,o=r0.length(f[l-2],f[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/t,i.push(a))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),n;if(t.length>1){var i=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var t=this.getSegments(),n=t.length,i;if(n>1){var a=t[n-2].currentPoint,o=t[n-1].currentPoint,s=t[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(Ns);function HV(r,e,t,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],l=r[o][1],u=r[o+1][0],f=r[o+1][1];if(kf(s,l,u,f,e,t,n))return!0}if(i){var c=r[0],h=r[a-1];if(kf(c[0],c[1],h[0],h[1],e,t,n))return!0}return!1}var b1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=HV(s,o,t,n,!0)),!l&&a&&(l=VV(s,t,n)),l},e.prototype.createPath=function(t){var n=this.attr(),i=n.points;if(!(i.length<2)){t.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(Ns),x1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],u=i[0][1],f=i[s-1][0],c=i[s-1][1];a&&RI(this,t,i[1][0],i[1][1],l,u),o&&BI(this,t,i[s-2][0],i[s-2][1],f,c)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return HV(s,o,t,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],f=i[s-1][0],c=i[s-1][1];if(a&&a.d){var h=Ch(l,u,i[1][0],i[1][1],a.d);l+=h.dx,u+=h.dy}if(o&&o.d){var h=Ch(i[s-2][0],i[s-2][1],f,c,o.d);f-=h.dx,c-=h.dy}t.beginPath(),t.moveTo(l,u);for(var d=0;d<s-1;d++){var v=i[d];t.lineTo(v[0],v[1])}t.lineTo(f,c)}},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return Lt(n)?(this.set("totalLength",NW.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return De(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),Vi.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;De(t,function(l,u){t[u+1]&&(o=[],o[0]=i/n,s=Vi.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(Ns);function w1e(r,e,t,n,i,a,o){var s=i/2;return ph(r-s,e-s,t,i,a,o)||ph(r+t-s,e-s,i,n,a,o)||ph(r+s,e+n-s,t,i,a,o)||ph(r-s,e+s,i,n,a,o)}function E1e(r,e,t,n,i,a,o,s){return kf(r+i,e,r+t-i,e,a,o,s)||kf(r+t,e+i,r+t,e+n-i,a,o,s)||kf(r+t-i,e+n,r+i,e+n,a,o,s)||kf(r,e+n-i,r,e+i,a,o,s)||Ng(r+t-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||Ng(r+t-i,e+n-i,i,0,.5*Math.PI,a,o,s)||Ng(r+i,e+n-i,i,.5*Math.PI,Math.PI,a,o,s)||Ng(r+i,e+i,i,Math.PI,1.5*Math.PI,a,o,s)}var _1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,f=s.width,c=s.height,h=s.radius;if(h){var v=!1;return i&&(v=E1e(l,u,f,c,h,o,t,n)),!v&&a&&(v=WV(this,t,n)),v}else{var d=o/2;if(a&&i)return ph(l-d,u-d,f+d,c+d,t,n);if(a)return ph(l,u,f,c,t,n);if(i)return w1e(l,u,f,c,o,t,n)}},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(t.beginPath(),l===0)t.rect(i,a,o,s);else{var u=t1e(l),f=u[0],c=u[1],h=u[2],d=u[3];t.moveTo(i+f,a),t.lineTo(i+o-c,a),c!==0&&t.arc(i+o-c,a+c,c,-Math.PI/2,0),t.lineTo(i+o,a+s-h),h!==0&&t.arc(i+o-h,a+s-h,h,0,Math.PI/2),t.lineTo(i+d,a+s),d!==0&&t.arc(i+d,a+s-d,d,Math.PI/2,Math.PI),t.lineTo(i,a+f),f!==0&&t.arc(i+f,a+f,f,Math.PI,Math.PI*1.5),t.closePath()}},e}(Ns),S1e=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=FW(t)},e.prototype._setText=function(t){var n=null;tt(t)&&t.indexOf(`
`)!==-1&&(n=t.split(`
`)),this.set("textArr",n)},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,n=t.lineHeight,i=t.fontSize*1;return n?n-i:i*.14},e.prototype._drawTextArr=function(t,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,f=this._getSpaceingY(),c=BW(a.text,a.fontSize,a.lineHeight),h;De(n,function(d,v){h=l+v*(f+u)-c+u,o==="middle"&&(h+=c-u-(c-u)/2),o==="top"&&(h+=c-u),Lt(d)||(i?t.fillText(d,s,h):t.strokeText(d,s,h))})},e.prototype._drawText=function(t,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,n);else{var l=i.text;Lt(l)||(n?t.fillText(l,a,o):t.strokeText(l,a,o))}},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!Lt(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!Lt(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(Ns);function M1e(r,e){if(e){var t=oW(e);return dh(t,r)}return r}function XV(r,e,t){var n=r.getTotalMatrix();if(n){var i=M1e([e,t,1],n),a=i[0],o=i[1];return[a,o]}return[e,t]}function gB(r,e,t){if(r.isCanvas&&r.isCanvas())return!0;if(!AA(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=XV(r,e,t),i=n[0],a=n[1];if(r.isClipped(i,a))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function YV(r,e,t){if(!gB(r,e,t))return null;for(var n=null,i=r.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=YV(s,e,t);else if(gB(s,e,t)){var l=s,u=XV(s,e,t),f=u[0],c=u[1];l.isInShape(f,c)&&(n=s)}if(n)break}return n}var Eu=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return bk},e.prototype.getGroupBase=function(){return UV},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Hye();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return this.set("context",n),t},e.prototype.setDOMSize=function(t,n){r.prototype.setDOMSize.call(this,t,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*n,o>1&&i.scale(o,o)},e.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(t,n){var i;return this.get("quickHit")?i=YV(this,t,n):i=r.prototype.getShape.call(this,t,n,null),i},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),n=this.getViewRange(),i;if(t.length&&t[0]===this)i=n;else if(i=a1e(t),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=o1e(i,n))}return i},e.prototype.refreshElement=function(t){var n=this.get("refreshElements");n.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(Y9(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),n=this.get("el"),i=this.getChildren();t.clearRect(0,0,n.width,n.height),Wv(t,this),JA(t,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),Wv(t,this),r1e(this,i,a),JA(t,i,a),t.restore()):n.length&&zV(n),De(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,n=this.get("drawFrame");n||(n=X9(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(_W),tT={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Kr={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function es(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function KV(r){var e=tT[r.type],t=r.getParent();if(!e)throw new Error("the type "+r.type+" is not supported by svg");var n=es(e);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(n)}return n}function qV(r,e){var t=r.get("el"),n=Q9(t.children).sort(e),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),t.appendChild(i)}function C1e(r,e){var t=r.parentNode,n=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[e],a=n.indexOf(r);if(i){if(a>e)t.insertBefore(r,i);else if(a<e){var o=n[e+1];o?t.insertBefore(r,o):t.appendChild(r)}}else t.appendChild(r)}function A1e(r,e){var t=r.cfg.el,n=r.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)t.removeAttribute("filter");else{var a=e.find("filter",i);a||(a=e.addShadow(i)),t.setAttribute("filter","url(#"+a+")")}}function Fm(r){var e=r.attr().matrix;if(e){for(var t=r.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);n=n.join(","),n.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function V0(r,e){var t=r.getClip(),n=r.get("el");if(!t)n.removeAttribute("clip-path");else if(t&&!n.hasAttribute("clip-path")){KV(t),t.createPath(e);var i=e.addClip(t);n.setAttribute("clip-path","url(#"+i+")")}}function ZV(r,e){e.forEach(function(t){t.draw(r)})}function QV(r,e){var t=r.get("canvas");if(t&&t.get("autoDraw")){var n=t.get("context"),i=r.getParent(),a=i?i.getChildren():[t],o=r.get("el");if(e==="remove"){var s=r.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")C1e(o,a.indexOf(r));else if(e==="sort"){var f=r.get("children");f&&f.length&&qV(r,function(c,h){return f.indexOf(c)-f.indexOf(h)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Fm(r):e==="clip"?V0(r,n):e==="attr"||e==="add"&&r.draw(n)}}var JV=function(r){nr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=es("g");this.set("el",t);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,t)}},e.prototype.onCanvasChange=function(t){QV(this,t)},e.prototype.getShapeBase=function(){return xk},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),V0(this,t),this.createPath(t),n.length&&ZV(t,n))},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");De(n||i,function(o,s){Kr[s]&&a.setAttribute(Kr[s],o)}),Fm(this)},e}(SW),os=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,t)}},e.prototype.getShapeBase=function(){return xk},e.prototype.getGroupBase=function(){return JV},e.prototype.onCanvasChange=function(t){QV(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),n=null;if(t)n=t.getBBox();else{var i=AW(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,u=this.getHitLineWidth(),f=u/2,c=a-f,h=o-f,d=a+s+f,v=o+l+f;return{x:c,y:h,minX:c,minY:h,maxX:d,maxY:v,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),n=t.fill,i=t.fillStyle;return(n||i||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),n=t.stroke,i=t.strokeStyle;return(n||i)&&this.canStroke},e.prototype.draw=function(t,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||KV(this),V0(this,t),this.createPath(t,n),this.shadow(t,n),this.strokeAndFill(t,n),this.transform(n))},e.prototype.createPath=function(t,n){},e.prototype.strokeAndFill=function(t,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,f=i.strokeOpacity,c=i.lineWidth,h=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(t,"fill",a):"fillStyle"in i&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),u&&h.setAttribute(Kr.fillOpacity,u)),this.canStroke&&c>0&&(n?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),f&&h.setAttribute(Kr.strokeOpacity,f),c&&h.setAttribute(Kr.lineWidth,c))},e.prototype._setColor=function(t,n,i){var a=this.get("el");if(!i){a.setAttribute(Kr[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=t.find("gradient",i);o||(o=t.addGradient(i)),a.setAttribute(Kr[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=t.find("pattern",i);o||(o=t.addPattern(i)),a.setAttribute(Kr[n],"url(#"+o+")")}else a.setAttribute(Kr[n],i)},e.prototype.shadow=function(t,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&A1e(this,t)},e.prototype.transform=function(t){var n=this.attr(),i=(t||n).matrix;i&&Fm(this)},e.prototype.isInShape=function(t,n){return this.isPointInPath(t,n)},e.prototype.isPointInPath=function(t,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,l=n+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var t=this.attrs,n=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?n+i:0},e}(MW),T1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");De(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Kr[s]&&a.setAttribute(Kr[s],o)})},e}(os),O1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");if(De(n||i,function(u,f){Kr[f]&&a.setAttribute(Kr[f],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},e}(os),k1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");De(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Kr[s]&&a.setAttribute(Kr[s],o)})},e}(os),I1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");De(n||a,function(s,l){l==="img"?i._setImage(a.img):Kr[l]&&o.setAttribute(Kr[l],s)})},e.prototype.setAttr=function(t,n){this.attrs[t]=n,t==="img"&&this._setImage(n)},e.prototype._setImage=function(t){var n=this.attr(),i=this.get("el");if(tt(t))i.setAttribute("href",t);else if(t instanceof window.Image)n.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&tt(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),n.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",a.toDataURL())}},e}(os),L1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");De(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=Hi(o)?t.addArrow(i,Kr[s]):t.getDefaultArrow(i,Kr[s]);a.setAttribute(Kr[s],"url(#"+l+")")}else a.removeAttribute(Kr[s]);else Kr[s]&&a.setAttribute(Kr[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2;return Vi.length(n,i,a,o)},e.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Vi.pointAt(i,a,o,s,t)},e}(os),L1={circle:function(r,e,t){return[["M",r,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["z"]]},triangleDown:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}};const mB={get:function(r){return L1[r]},register:function(r,e){L1[r]=e},remove:function(r){delete L1[r]},getAll:function(){return L1}};var P1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return Ft(t)?t.map(function(n){return n.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return Ln(o)?s=o:s=mB.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=mB,e}(os),D1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");De(n||a,function(s,l){if(l==="path"&&Ft(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=Hi(s)?t.addArrow(a,Kr[l]):t.getDefaultArrow(a,Kr[l]);o.setAttribute(Kr[l],"url(#"+u+")")}else o.removeAttribute(Kr[l]);else Kr[l]&&o.setAttribute(Kr[l],s)})},e.prototype._formatPath=function(t){var n=t.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(t*i):null;return a?{x:a.x,y:a.y}:null},e}(os),N1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");De(n||i,function(o,s){s==="points"&&Ft(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Kr[s]&&a.setAttribute(Kr[s],o)})},e}(os),R1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");De(n||i,function(o,s){s==="points"&&Ft(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Kr[s]&&a.setAttribute(Kr[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return Lt(n)?(this.set("totalLength",NW.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return De(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),Vi.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;De(t,function(l,u){t[u+1]&&(o=[],o[0]=i/n,s=Vi.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(os);function B1e(r){var e=0,t=0,n=0,i=0;return Ft(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var F1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];De(n||a,function(u,f){l.indexOf(f)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(f)===-1&&Kr[f]&&o.setAttribute(Kr[f],u)})},e.prototype._assembleRect=function(t){var n=t.x,i=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=B1e(s);Ft(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},e}(os),yB=.3,$1e={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},z1e={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},G1e={left:"left",start:"left",center:"middle",right:"end",end:"end"},j1e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return U(U({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),De(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?Fm(i):Kr[l]&&o.setAttribute(Kr[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=aW();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",z1e[i]||"alphabetic"):t.setAttribute("alignment-baseline",$1e[i]||"baseline"),t.setAttribute("text-anchor",G1e[a]||"left")},e.prototype._setText=function(t){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!t)n.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),u=l.length-1,f="";De(l,function(c,h){h===0?s==="alphabetic"?f+='<tspan x="'+a+'" dy="'+-u+'em">'+c+"</tspan>":s==="top"?f+='<tspan x="'+a+'" dy="0.9em">'+c+"</tspan>":s==="middle"?f+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+c+"</tspan>":s==="bottom"?f+='<tspan x="'+a+'" dy="-'+(u+yB)+'em">'+c+"</tspan>":s==="hanging"&&(f+='<tspan x="'+a+'" dy="'+(-(u-1)-yB)+'em">'+c+"</tspan>"):f+='<tspan x="'+a+'" dy="1em">'+c+"</tspan>"}),n.innerHTML=f}else n.innerHTML=t},e}(os),U1e=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,W1e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,V1e=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function eH(r){var e=r.match(V1e);if(!e)return"";var t="";return e.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),De(e,function(n){n=n.split(":"),t+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),t}function H1e(r,e){var t=U1e.exec(r),n=WE(VE(parseFloat(t[1])),Math.PI*2),i=t[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,f=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",u),e.setAttribute("y2",f),e.innerHTML=eH(i)}function X1e(r,e){var t=W1e.exec(r),n=parseFloat(t[1]),i=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=eH(o)}var Y1e=function(){function r(e){this.cfg={};var t=null,n=Dl("gradient_");return e.toLowerCase()[0]==="l"?(t=es("linearGradient"),H1e(e,t)):(t=es("radialGradient"),X1e(e,t)),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),K1e={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},q1e={x:"-40%",y:"-40%",width:"200%",height:"200%"},Z1e=function(){function r(e){this.type="filter",this.cfg={},this.type="filter";var t=es("filter");return De(q1e,function(n,i){t.setAttribute(i,n)}),this.el=t,this.id=Dl("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return r.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,i=this.cfg;return De(Object.keys(i),function(a){if(i[a]!==t[a])return n=!1,!1}),n},r.prototype.update=function(e,t){var n=this.cfg;return n[K1e[e]]=t,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(e,t){var n=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=n},r}(),bB=function(){function r(e,t){this.cfg={};var n=es("marker"),i=Dl("marker_");n.setAttribute("id",i);var a=es("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var n=this.el,i=this.cfg.path,a=this.cfg.d;Ft(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",i),n.appendChild(t),a&&n.setAttribute("refX",""+a/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},r}(),Q1e=function(){function r(e){this.type="clip",this.cfg={};var t=es("clipPath");this.el=t,this.id=Dl("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},r}(),J1e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ebe=function(){function r(e){this.cfg={};var t=es("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=es("image");t.appendChild(n);var i=Dl("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=e;var a=J1e.exec(e),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),tbe=function(){function r(e){var t=es("defs"),n=Dl("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return r.prototype.find=function(e,t){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(e,t)){i=n[a].id;break}return i},r.prototype.findById=function(e){for(var t=this.children,n=null,i=0;i<t.length;i++)if(t[i].id===e){n=t[i];break}return n},r.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},r.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new bB(e,t);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addGradient=function(e){var t=new Y1e(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addArrow=function(e,t){var n=new bB(e,t);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(e){var t=new Z1e(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addPattern=function(e){var t=new ebe(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addClip=function(e){var t=new Q1e(e);return this.el.appendChild(t.el),this.add(t),t.id},r}(),i0=function(r){nr(e,r);function e(t){return r.call(this,U(U({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return xk},e.prototype.getGroupBase=function(){return JV},e.prototype.getShape=function(t,n,i){var a=i.target||i.srcElement;if(!tT[a.tagName]){for(var o=a.parentNode;o&&!tT[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=es("svg"),n=new tbe(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",n),t},e.prototype.onCanvasChange=function(t){var n=this.get("context"),i=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&qV(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(t==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else t==="matrix"?Fm(this):t==="clip"?V0(this,n):t==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),n=this.getChildren();V0(this,t),n.length&&ZV(t,n)},e}(_W);function P1(r,e,t){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(e,t,!1),{remove:function(){r.removeEventListener(e,t,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+e,t),{remove:function(){r.detachEvent("on"+e,t)}}}}var Rg,oM,tH,rT;function rbe(){Rg=document.createElement("table"),oM=document.createElement("tr"),tH=/^\s*<(\w+|!)[^>]*>/,rT={tr:document.createElement("tbody"),tbody:Rg,thead:Rg,tfoot:Rg,td:oM,th:oM,"*":document.createElement("div")}}function _n(r){Rg||rbe();var e=tH.test(r)&&RegExp.$1;(!e||!(e in rT))&&(e="*");var t=rT[e];r=typeof r=="string"?r.replace(/(^\s*)|(\s*$)/g,""):r,t.innerHTML=""+r;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function Mr(r,e){if(r)for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t]);return r}var rH={exports:{}},nbe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},nH={exports:{}},ibe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},abe=ibe,obe=Array.prototype.concat,sbe=Array.prototype.slice,xB=nH.exports=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n];abe(a)?t=obe.call(t,sbe.call(a)):t.push(a)}return t};xB.wrap=function(r){return function(){return r(xB(arguments))}};var lbe=nH.exports,a0=nbe,$m=lbe,iH=Object.hasOwnProperty,aH=Object.create(null);for(var sM in a0)iH.call(a0,sM)&&(aH[a0[sM]]=sM);var wo=rH.exports={to:{},get:{}};wo.get=function(r){var e=r.substring(0,3).toLowerCase(),t,n;switch(e){case"hsl":t=wo.get.hsl(r),n="hsl";break;case"hwb":t=wo.get.hwb(r),n="hwb";break;default:t=wo.get.rgb(r),n="rgb";break}return t?{model:n,value:t}:null};wo.get.rgb=function(r){if(!r)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,o=[0,0,0,1],s,l,u;if(s=r.match(t)){for(u=s[2],s=s[1],l=0;l<3;l++){var f=l*2;o[l]=parseInt(s.slice(f,f+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(s=r.match(e)){for(s=s[1],u=s[3],l=0;l<3;l++)o[l]=parseInt(s[l]+s[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(s=r.match(n)){for(l=0;l<3;l++)o[l]=parseInt(s[l+1],0);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else if(s=r.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else return(s=r.match(a))?s[1]==="transparent"?[0,0,0,0]:iH.call(a0,s[1])?(o=a0[s[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Vf(o[l],0,255);return o[3]=Vf(o[3],0,1),o};wo.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=Vf(parseFloat(t[2]),0,100),o=Vf(parseFloat(t[3]),0,100),s=Vf(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};wo.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=Vf(parseFloat(t[2]),0,100),o=Vf(parseFloat(t[3]),0,100),s=Vf(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};wo.to.hex=function(){var r=$m(arguments);return"#"+D1(r[0])+D1(r[1])+D1(r[2])+(r[3]<1?D1(Math.round(r[3]*255)):"")};wo.to.rgb=function(){var r=$m(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};wo.to.rgb.percent=function(){var r=$m(arguments),e=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),n=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+e+"%, "+t+"%, "+n+"%)":"rgba("+e+"%, "+t+"%, "+n+"%, "+r[3]+")"};wo.to.hsl=function(){var r=$m(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};wo.to.hwb=function(){var r=$m(arguments),e="";return r.length>=4&&r[3]!==1&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"};wo.to.keyword=function(r){return aH[r.slice(0,3)]};function Vf(r,e,t){return Math.min(Math.max(e,r),t)}function D1(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}var ube=rH.exports,oH={exports:{}},fbe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ah=fbe,sH={};for(var lM in Ah)Ah.hasOwnProperty(lM)&&(sH[Ah[lM]]=lM);var Xt=oH.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var Na in Xt)if(Xt.hasOwnProperty(Na)){if(!("channels"in Xt[Na]))throw new Error("missing channels property: "+Na);if(!("labels"in Xt[Na]))throw new Error("missing channel labels property: "+Na);if(Xt[Na].labels.length!==Xt[Na].channels)throw new Error("channel and label counts mismatch: "+Na);var cbe=Xt[Na].channels,hbe=Xt[Na].labels;delete Xt[Na].channels,delete Xt[Na].labels,Object.defineProperty(Xt[Na],"channels",{value:cbe}),Object.defineProperty(Xt[Na],"labels",{value:hbe})}Xt.rgb.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),a=Math.max(e,t,n),o=a-i,s,l,u;return a===i?s=0:e===a?s=(t-n)/o:t===a?s=2+(n-e)/o:n===a&&(s=4+(e-t)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(i+a)/2,a===i?l=0:u<=.5?l=o/(a+i):l=o/(2-a-i),[s,l*100,u*100]};Xt.rgb.hsv=function(r){var e,t,n,i,a,o=r[0]/255,s=r[1]/255,l=r[2]/255,u=Math.max(o,s,l),f=u-Math.min(o,s,l),c=function(h){return(u-h)/6/f+1/2};return f===0?i=a=0:(a=f/u,e=c(o),t=c(s),n=c(l),o===u?i=n-t:s===u?i=1/3+e-n:l===u&&(i=2/3+t-e),i<0?i+=1:i>1&&(i-=1)),[i*360,a*100,u*100]};Xt.rgb.hwb=function(r){var e=r[0],t=r[1],n=r[2],i=Xt.rgb.hsl(r)[0],a=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[i,a*100,n*100]};Xt.rgb.cmyk=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i,a,o,s;return s=Math.min(1-e,1-t,1-n),i=(1-e-s)/(1-s)||0,a=(1-t-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,[i*100,a*100,o*100,s*100]};function dbe(r,e){return Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2)}Xt.rgb.keyword=function(r){var e=sH[r];if(e)return e;var t=1/0,n;for(var i in Ah)if(Ah.hasOwnProperty(i)){var a=Ah[i],o=dbe(r,a);o<t&&(t=o,n=i)}return n};Xt.keyword.rgb=function(r){return Ah[r]};Xt.rgb.xyz=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+t*.3576+n*.1805,a=e*.2126+t*.7152+n*.0722,o=e*.0193+t*.1192+n*.9505;return[i*100,a*100,o*100]};Xt.rgb.lab=function(r){var e=Xt.rgb.xyz(r),t=e[0],n=e[1],i=e[2],a,o,s;return t/=95.047,n/=100,i/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=116*n-16,o=500*(t-n),s=200*(n-i),[a,o,s]};Xt.hsl.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i,a,o,s,l;if(t===0)return l=n*255,[l,l,l];n<.5?a=n*(1+t):a=n+t-n*t,i=2*n-a,s=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(a-i)*6*o:2*o<1?l=a:3*o<2?l=i+(a-i)*(2/3-o)*6:l=i,s[u]=l*255;return s};Xt.hsl.hsv=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,i=t,a=Math.max(n,.01),o,s;return n*=2,t*=n<=1?n:2-n,i*=a<=1?a:2-a,s=(n+t)/2,o=n===0?2*i/(a+i):2*t/(n+t),[e,o*100,s*100]};Xt.hsv.rgb=function(r){var e=r[0]/60,t=r[1]/100,n=r[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*n*(1-t),s=255*n*(1-t*a),l=255*n*(1-t*(1-a));switch(n*=255,i){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}};Xt.hsv.hsl=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,i=Math.max(n,.01),a,o,s;return s=(2-t)*n,a=(2-t)*i,o=t*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};Xt.hwb.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i=t+n,a,o,s,l;i>1&&(t/=i,n/=i),a=Math.floor(6*e),o=1-n,s=6*e-a,a&1&&(s=1-s),l=t+s*(o-t);var u,f,c;switch(a){default:case 6:case 0:u=o,f=l,c=t;break;case 1:u=l,f=o,c=t;break;case 2:u=t,f=o,c=l;break;case 3:u=t,f=l,c=o;break;case 4:u=l,f=t,c=o;break;case 5:u=o,f=t,c=l;break}return[u*255,f*255,c*255]};Xt.cmyk.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,i=r[3]/100,a,o,s;return a=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,t*(1-i)+i),s=1-Math.min(1,n*(1-i)+i),[a*255,o*255,s*255]};Xt.xyz.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,i,a,o;return i=e*3.2406+t*-1.5372+n*-.4986,a=e*-.9689+t*1.8758+n*.0415,o=e*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[i*255,a*255,o*255]};Xt.xyz.lab=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;return e/=95.047,t/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*t-16,a=500*(e-t),o=200*(t-n),[i,a,o]};Xt.lab.xyz=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;a=(e+16)/116,i=t/500+a,o=a-n/200;var s=Math.pow(a,3),l=Math.pow(i,3),u=Math.pow(o,3);return a=s>.008856?s:(a-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,i*=95.047,a*=100,o*=108.883,[i,a,o]};Xt.lab.lch=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;return i=Math.atan2(n,t),a=i*360/2/Math.PI,a<0&&(a+=360),o=Math.sqrt(t*t+n*n),[e,o,a]};Xt.lch.lab=function(r){var e=r[0],t=r[1],n=r[2],i,a,o;return o=n/360*2*Math.PI,i=t*Math.cos(o),a=t*Math.sin(o),[e,i,a]};Xt.rgb.ansi16=function(r){var e=r[0],t=r[1],n=r[2],i=1 in arguments?arguments[1]:Xt.rgb.hsv(r)[2];if(i=Math.round(i/50),i===0)return 30;var a=30+(Math.round(n/255)<<2|Math.round(t/255)<<1|Math.round(e/255));return i===2&&(a+=60),a};Xt.hsv.ansi16=function(r){return Xt.rgb.ansi16(Xt.hsv.rgb(r),r[2])};Xt.rgb.ansi256=function(r){var e=r[0],t=r[1],n=r[2];if(e===t&&t===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5);return i};Xt.ansi16.rgb=function(r){var e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var t=(~~(r>50)+1)*.5,n=(e&1)*t*255,i=(e>>1&1)*t*255,a=(e>>2&1)*t*255;return[n,i,a]};Xt.ansi256.rgb=function(r){if(r>=232){var e=(r-232)*10+8;return[e,e,e]}r-=16;var t,n=Math.floor(r/36)/5*255,i=Math.floor((t=r%36)/6)/5*255,a=t%6/5*255;return[n,i,a]};Xt.rgb.hex=function(r){var e=((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255),t=e.toString(16).toUpperCase();return"000000".substring(t.length)+t};Xt.hex.rgb=function(r){var e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var t=e[0];e[0].length===3&&(t=t.split("").map(function(s){return s+s}).join(""));var n=parseInt(t,16),i=n>>16&255,a=n>>8&255,o=n&255;return[i,a,o]};Xt.rgb.hcg=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.max(Math.max(e,t),n),a=Math.min(Math.min(e,t),n),o=i-a,s,l;return o<1?s=a/(1-o):s=0,o<=0?l=0:i===e?l=(t-n)/o%6:i===t?l=2+(n-e)/o:l=4+(e-t)/o+4,l/=6,l%=1,[l*360,o*100,s*100]};Xt.hsl.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1,i=0;return t<.5?n=2*e*t:n=2*e*(1-t),n<1&&(i=(t-.5*n)/(1-n)),[r[0],n*100,i*100]};Xt.hsv.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=e*t,i=0;return n<1&&(i=(t-n)/(1-n)),[r[0],n*100,i*100]};Xt.hcg.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];var i=[0,0,0],a=e%1*6,o=a%1,s=1-o,l=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-t)*n,[(t*i[0]+l)*255,(t*i[1]+l)*255,(t*i[2]+l)*255]};Xt.hcg.hsv=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e),i=0;return n>0&&(i=e/n),[r[0],i*100,n*100]};Xt.hcg.hsl=function(r){var e=r[1]/100,t=r[2]/100,n=t*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[r[0],i*100,n*100]};Xt.hcg.hwb=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};Xt.hwb.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1-t,i=n-e,a=0;return i<1&&(a=(n-i)/(1-i)),[r[0],i*100,a*100]};Xt.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};Xt.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};Xt.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};Xt.gray.hsl=Xt.gray.hsv=function(r){return[0,0,r[0]]};Xt.gray.hwb=function(r){return[0,100,r[0]]};Xt.gray.cmyk=function(r){return[0,0,0,r[0]]};Xt.gray.lab=function(r){return[r[0],0,0]};Xt.gray.hex=function(r){var e=Math.round(r[0]/100*255)&255,t=(e<<16)+(e<<8)+e,n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};Xt.rgb.gray=function(r){var e=(r[0]+r[1]+r[2])/3;return[e/255*100]};var lH=oH.exports,cw=lH;function vbe(){for(var r={},e=Object.keys(cw),t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function pbe(r){var e=vbe(),t=[r];for(e[r].distance=0;t.length;)for(var n=t.pop(),i=Object.keys(cw[n]),a=i.length,o=0;o<a;o++){var s=i[o],l=e[s];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,t.unshift(s))}return e}function gbe(r,e){return function(t){return e(r(t))}}function mbe(r,e){for(var t=[e[r].parent,r],n=cw[e[r].parent][r],i=e[r].parent;e[i].parent;)t.unshift(e[i].parent),n=gbe(cw[e[i].parent][i],n),i=e[i].parent;return n.conversion=t,n}var ybe=function(r){for(var e=pbe(r),t={},n=Object.keys(e),i=n.length,a=0;a<i;a++){var o=n[a],s=e[o];s.parent!==null&&(t[o]=mbe(o,e))}return t},nT=lH,bbe=ybe,Kd={},xbe=Object.keys(nT);function wbe(r){var e=function(t){return t==null?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function Ebe(r){var e=function(t){if(t==null)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=r(t);if(typeof n=="object")for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in r&&(e.conversion=r.conversion),e}xbe.forEach(function(r){Kd[r]={},Object.defineProperty(Kd[r],"channels",{value:nT[r].channels}),Object.defineProperty(Kd[r],"labels",{value:nT[r].labels});var e=bbe(r),t=Object.keys(e);t.forEach(function(n){var i=e[n];Kd[r][n]=Ebe(i),Kd[r][n].raw=wbe(i)})});var _be=Kd,Bg=ube,go=_be,zI=[].slice,uH=["keyword","gray","hex"],iT={};Object.keys(go).forEach(function(r){iT[zI.call(go[r].labels).sort().join("")]=r});var hw={};function Qi(r,e){if(!(this instanceof Qi))return new Qi(r,e);if(e&&e in uH&&(e=null),e&&!(e in go))throw new Error("Unknown model: "+e);var t,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof Qi)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(typeof r=="string"){var i=Bg.get(r);if(i===null)throw new Error("Unable to parse color from string: "+r);this.model=i.model,n=go[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(r.length){this.model=e||"rgb",n=go[this.model].channels;var a=zI.call(r,0,n);this.color=aT(a,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(r);"alpha"in r&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);var s=o.sort().join("");if(!(s in iT))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=iT[s];var l=go[this.model].labels,u=[];for(t=0;t<l.length;t++)u.push(r[l[t]]);this.color=aT(u)}if(hw[this.model])for(n=go[this.model].channels,t=0;t<n;t++){var f=hw[this.model][t];f&&(this.color[t]=f(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Qi.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var e=this.model in Bg.to?this:this.rgb();e=e.round(typeof r=="number"?r:1);var t=e.valpha===1?e.color:e.color.concat(this.valpha);return Bg.to[e.model](t)},percentString:function(r){var e=this.rgb().round(typeof r=="number"?r:1),t=e.valpha===1?e.color:e.color.concat(this.valpha);return Bg.to.rgb.percent(t)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},e=go[this.model].channels,t=go[this.model].labels,n=0;n<e;n++)r[t[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new Qi(this.color.map(Mbe(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new Qi(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:qn("rgb",0,xi(255)),green:qn("rgb",1,xi(255)),blue:qn("rgb",2,xi(255)),hue:qn(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:qn("hsl",1,xi(100)),lightness:qn("hsl",2,xi(100)),saturationv:qn("hsv",1,xi(100)),value:qn("hsv",2,xi(100)),chroma:qn("hcg",1,xi(100)),gray:qn("hcg",2,xi(100)),white:qn("hwb",1,xi(100)),wblack:qn("hwb",2,xi(100)),cyan:qn("cmyk",0,xi(100)),magenta:qn("cmyk",1,xi(100)),yellow:qn("cmyk",2,xi(100)),black:qn("cmyk",3,xi(100)),x:qn("xyz",0,xi(100)),y:qn("xyz",1,xi(100)),z:qn("xyz",2,xi(100)),l:qn("lab",0,xi(100)),a:qn("lab",1),b:qn("lab",2),keyword:function(r){return arguments.length?new Qi(r):go[this.model].keyword(this.color)},hex:function(r){return arguments.length?new Qi(r):Bg.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity:function(){for(var r=this.rgb().color,e=[],t=0;t<r.length;t++){var n=r[t]/255;e[t]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(r){var e=this.luminosity(),t=r.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(r){var e=this.contrast(r);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var r=this.rgb().color,e=(r[0]*299+r[1]*587+r[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),e=0;e<3;e++)r.color[e]=255-r.color[e];return r},lighten:function(r){var e=this.hsl();return e.color[2]+=e.color[2]*r,e},darken:function(r){var e=this.hsl();return e.color[2]-=e.color[2]*r,e},saturate:function(r){var e=this.hsl();return e.color[1]+=e.color[1]*r,e},desaturate:function(r){var e=this.hsl();return e.color[1]-=e.color[1]*r,e},whiten:function(r){var e=this.hwb();return e.color[1]+=e.color[1]*r,e},blacken:function(r){var e=this.hwb();return e.color[2]+=e.color[2]*r,e},grayscale:function(){var r=this.rgb().color,e=r[0]*.3+r[1]*.59+r[2]*.11;return Qi.rgb(e,e,e)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var e=this.hsl(),t=e.color[0];return t=(t+r)%360,t=t<0?360+t:t,e.color[0]=t,e},mix:function(r,e){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);var t=r.rgb(),n=this.rgb(),i=e===void 0?.5:e,a=2*i-1,o=t.alpha()-n.alpha(),s=((a*o===-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return Qi.rgb(s*t.red()+l*n.red(),s*t.green()+l*n.green(),s*t.blue()+l*n.blue(),t.alpha()*i+n.alpha()*(1-i))}};Object.keys(go).forEach(function(r){if(uH.indexOf(r)===-1){var e=go[r].channels;Qi.prototype[r]=function(){if(this.model===r)return new Qi(this);if(arguments.length)return new Qi(arguments,r);var t=typeof arguments[e]=="number"?e:this.valpha;return new Qi(Cbe(go[this.model][r].raw(this.color)).concat(t),r)},Qi[r]=function(t){return typeof t=="number"&&(t=aT(zI.call(arguments),e)),new Qi(t,r)}}});function Sbe(r,e){return Number(r.toFixed(e))}function Mbe(r){return function(e){return Sbe(e,r)}}function qn(r,e,t){return r=Array.isArray(r)?r:[r],r.forEach(function(n){(hw[n]||(hw[n]=[]))[e]=t}),r=r[0],function(n){var i;return arguments.length?(t&&(n=t(n)),i=this[r](),i.color[e]=n,i):(i=this[r]().color[e],t&&(i=t(i)),i)}}function xi(r){return function(e){return Math.max(0,Math.min(r,e))}}function Cbe(r){return Array.isArray(r)?r:[r]}function aT(r,e){for(var t=0;t<e;t++)typeof r[t]!="number"&&(r[t]=0);return r}var Abe=Qi;const o0=Gl(Abe);function dw(r){"@babel/helpers - typeof";return dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dw(r)}var Tbe=/^\s+/,Obe=/\s+$/;function Yt(r,e){if(r=r||"",e=e||{},r instanceof Yt)return r;if(!(this instanceof Yt))return new Yt(r,e);var t=kbe(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Yt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,i,a,o,s;return t=e.r/255,n=e.g/255,i=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=fH(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=EB(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=EB(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=wB(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=wB(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return _B(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Dbe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Rn(this._r,255)*100)+"%",g:Math.round(Rn(this._g,255)*100)+"%",b:Math.round(Rn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Rn(this._r,255)*100)+"%, "+Math.round(Rn(this._g,255)*100)+"%, "+Math.round(Rn(this._b,255)*100)+"%)":"rgba("+Math.round(Rn(this._r,255)*100)+"%, "+Math.round(Rn(this._g,255)*100)+"%, "+Math.round(Rn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Hbe[_B(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+SB(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=Yt(e);n="#"+SB(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,a=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Yt(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Fbe,arguments)},brighten:function(){return this._applyModification($be,arguments)},darken:function(){return this._applyModification(zbe,arguments)},desaturate:function(){return this._applyModification(Nbe,arguments)},saturate:function(){return this._applyModification(Rbe,arguments)},greyscale:function(){return this._applyModification(Bbe,arguments)},spin:function(){return this._applyModification(Gbe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Wbe,arguments)},complement:function(){return this._applyCombination(jbe,arguments)},monochromatic:function(){return this._applyCombination(Vbe,arguments)},splitcomplement:function(){return this._applyCombination(Ube,arguments)},triad:function(){return this._applyCombination(MB,[3])},tetrad:function(){return this._applyCombination(MB,[4])}};Yt.fromRatio=function(r,e){if(dw(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?t[n]=r[n]:t[n]=Fg(r[n]));r=t}return Yt(r,e)};function kbe(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,a=null,o=!1,s=!1;return typeof r=="string"&&(r=qbe(r)),dw(r)=="object"&&(iu(r.r)&&iu(r.g)&&iu(r.b)?(e=Ibe(r.r,r.g,r.b),o=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):iu(r.h)&&iu(r.s)&&iu(r.v)?(n=Fg(r.s),i=Fg(r.v),e=Pbe(r.h,n,i),o=!0,s="hsv"):iu(r.h)&&iu(r.s)&&iu(r.l)&&(n=Fg(r.s),a=Fg(r.l),e=Lbe(r.h,n,a),o=!0,s="hsl"),r.hasOwnProperty("a")&&(t=r.a)),t=fH(t),{ok:o,format:r.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function Ibe(r,e,t){return{r:Rn(r,255)*255,g:Rn(e,255)*255,b:Rn(t,255)*255}}function wB(r,e,t){r=Rn(r,255),e=Rn(e,255),t=Rn(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a,o,s=(n+i)/2;if(n==i)a=o=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case r:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-r)/l+2;break;case t:a=(r-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function Lbe(r,e,t){var n,i,a;r=Rn(r,360),e=Rn(e,100),t=Rn(t,100);function o(u,f,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?u+(f-u)*6*c:c<1/2?f:c<2/3?u+(f-u)*(2/3-c)*6:u}if(e===0)n=i=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,l=2*t-s;n=o(l,s,r+1/3),i=o(l,s,r),a=o(l,s,r-1/3)}return{r:n*255,g:i*255,b:a*255}}function EB(r,e,t){r=Rn(r,255),e=Rn(e,255),t=Rn(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a,o,s=n,l=n-i;if(o=n===0?0:l/n,n==i)a=0;else{switch(n){case r:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-r)/l+2;break;case t:a=(r-e)/l+4;break}a/=6}return{h:a,s:o,v:s}}function Pbe(r,e,t){r=Rn(r,360)*6,e=Rn(e,100),t=Rn(t,100);var n=Math.floor(r),i=r-n,a=t*(1-e),o=t*(1-i*e),s=t*(1-(1-i)*e),l=n%6,u=[t,o,a,a,s,t][l],f=[s,t,t,o,a,a][l],c=[a,a,s,t,t,o][l];return{r:u*255,g:f*255,b:c*255}}function _B(r,e,t,n){var i=[_s(Math.round(r).toString(16)),_s(Math.round(e).toString(16)),_s(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Dbe(r,e,t,n,i){var a=[_s(Math.round(r).toString(16)),_s(Math.round(e).toString(16)),_s(Math.round(t).toString(16)),_s(cH(n))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function SB(r,e,t,n){var i=[_s(cH(n)),_s(Math.round(r).toString(16)),_s(Math.round(e).toString(16)),_s(Math.round(t).toString(16))];return i.join("")}Yt.equals=function(r,e){return!r||!e?!1:Yt(r).toRgbString()==Yt(e).toRgbString()};Yt.random=function(){return Yt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Nbe(r,e){e=e===0?0:e||10;var t=Yt(r).toHsl();return t.s-=e/100,t.s=c_(t.s),Yt(t)}function Rbe(r,e){e=e===0?0:e||10;var t=Yt(r).toHsl();return t.s+=e/100,t.s=c_(t.s),Yt(t)}function Bbe(r){return Yt(r).desaturate(100)}function Fbe(r,e){e=e===0?0:e||10;var t=Yt(r).toHsl();return t.l+=e/100,t.l=c_(t.l),Yt(t)}function $be(r,e){e=e===0?0:e||10;var t=Yt(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Yt(t)}function zbe(r,e){e=e===0?0:e||10;var t=Yt(r).toHsl();return t.l-=e/100,t.l=c_(t.l),Yt(t)}function Gbe(r,e){var t=Yt(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Yt(t)}function jbe(r){var e=Yt(r).toHsl();return e.h=(e.h+180)%360,Yt(e)}function MB(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Yt(r).toHsl(),n=[Yt(r)],i=360/e,a=1;a<e;a++)n.push(Yt({h:(t.h+a*i)%360,s:t.s,l:t.l}));return n}function Ube(r){var e=Yt(r).toHsl(),t=e.h;return[Yt(r),Yt({h:(t+72)%360,s:e.s,l:e.l}),Yt({h:(t+216)%360,s:e.s,l:e.l})]}function Wbe(r,e,t){e=e||6,t=t||30;var n=Yt(r).toHsl(),i=360/t,a=[Yt(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(Yt(n));return a}function Vbe(r,e){e=e||6;for(var t=Yt(r).toHsv(),n=t.h,i=t.s,a=t.v,o=[],s=1/e;e--;)o.push(Yt({h:n,s:i,v:a})),a=(a+s)%1;return o}Yt.mix=function(r,e,t){t=t===0?0:t||50;var n=Yt(r).toRgb(),i=Yt(e).toRgb(),a=t/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return Yt(o)};Yt.readability=function(r,e){var t=Yt(r),n=Yt(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};Yt.isReadable=function(r,e,t){var n=Yt.readability(r,e),i,a;switch(a=!1,i=Zbe(t),i.level+i.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};Yt.mostReadable=function(r,e,t){var n=null,i=0,a,o,s,l;t=t||{},o=t.includeFallbackColors,s=t.level,l=t.size;for(var u=0;u<e.length;u++)a=Yt.readability(r,e[u]),a>i&&(i=a,n=Yt(e[u]));return Yt.isReadable(r,n,{level:s,size:l})||!o?n:(t.includeFallbackColors=!1,Yt.mostReadable(r,["#fff","#000"],t))};var oT=Yt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Hbe=Yt.hexNames=Xbe(oT);function Xbe(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function fH(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function Rn(r,e){Ybe(r)&&(r="100%");var t=Kbe(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function c_(r){return Math.min(1,Math.max(0,r))}function lo(r){return parseInt(r,16)}function Ybe(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function Kbe(r){return typeof r=="string"&&r.indexOf("%")!=-1}function _s(r){return r.length==1?"0"+r:""+r}function Fg(r){return r<=1&&(r=r*100+"%"),r}function cH(r){return Math.round(parseFloat(r)*255).toString(16)}function CB(r){return lo(r)/255}var ps=function(){var r="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+r+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function iu(r){return!!ps.CSS_UNIT.exec(r)}function qbe(r){r=r.replace(Tbe,"").replace(Obe,"").toLowerCase();var e=!1;if(oT[r])r=oT[r],e=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=ps.rgb.exec(r))?{r:t[1],g:t[2],b:t[3]}:(t=ps.rgba.exec(r))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ps.hsl.exec(r))?{h:t[1],s:t[2],l:t[3]}:(t=ps.hsla.exec(r))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ps.hsv.exec(r))?{h:t[1],s:t[2],v:t[3]}:(t=ps.hsva.exec(r))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ps.hex8.exec(r))?{r:lo(t[1]),g:lo(t[2]),b:lo(t[3]),a:CB(t[4]),format:e?"name":"hex8"}:(t=ps.hex6.exec(r))?{r:lo(t[1]),g:lo(t[2]),b:lo(t[3]),format:e?"name":"hex"}:(t=ps.hex4.exec(r))?{r:lo(t[1]+""+t[1]),g:lo(t[2]+""+t[2]),b:lo(t[3]+""+t[3]),a:CB(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=ps.hex3.exec(r))?{r:lo(t[1]+""+t[1]),g:lo(t[2]+""+t[2]),b:lo(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Zbe(r){var e,t;return r=r||{level:"AA",size:"small"},e=(r.level||"AA").toUpperCase(),t=(r.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var N1=2,AB=.16,Qbe=.05,Jbe=.05,exe=.15,hH=5,dH=4,txe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function TB(r,e,t){var n;return Math.round(r.h)>=60&&Math.round(r.h)<=240?n=t?Math.round(r.h)-N1*e:Math.round(r.h)+N1*e:n=t?Math.round(r.h)+N1*e:Math.round(r.h)-N1*e,n<0?n+=360:n>=360&&(n-=360),n}function OB(r,e,t){if(r.h===0&&r.s===0)return r.s;var n;return t?n=r.s-AB*e:e===dH?n=r.s+AB:n=r.s+Qbe*e,n>1&&(n=1),t&&e===hH&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function kB(r,e,t){var n;return t?n=r.v+Jbe*e:n=r.v-exe*e,n>1&&(n=1),Number(n.toFixed(2))}function vw(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],n=Yt(r),i=hH;i>0;i-=1){var a=n.toHsv(),o=Yt({h:TB(a,i,!0),s:OB(a,i,!0),v:kB(a,i,!0)}).toHexString();t.push(o)}t.push(n.toHexString());for(var s=1;s<=dH;s+=1){var l=n.toHsv(),u=Yt({h:TB(l,s),s:OB(l,s),v:kB(l,s)}).toHexString();t.push(u)}return e.theme==="dark"?txe.map(function(f){var c=f.index,h=f.opacity,d=Yt.mix(e.backgroundColor||"#141414",t[c],h*100).toHexString();return d}):t}var uM={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},fM={},cM={};Object.keys(uM).forEach(function(r){fM[r]=vw(uM[r]),fM[r].primary=fM[r][5],cM[r]=vw(uM[r],{theme:"dark",backgroundColor:"#141414"}),cM[r].primary=cM[r][5]});var _i=function(e,t,n){var i=o0(e),a=o0(t);return o0([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},rxe=function(e,t,n){t===void 0&&(t="#fff"),n===void 0&&(n="rgb(150, 150, 150)");var i=_i(t,e,.05).rgb().toString(),a=_i(t,e,.1).rgb().toString(),o=_i(t,e,.2).rgb().toString(),s=_i(t,e,.4).rgb().toString(),l=_i(t,n,.02).rgb().toString(),u=_i(t,n,.05).rgb().toString(),f=_i(t,n,.1).rgb().toString(),c=_i(t,n,.2).rgb().toString(),h=_i(t,n,.3).rgb().toString(),d=vw(e,{theme:"default",backgroundColor:t}),v=o0(e).hex().toLowerCase(),p=d.indexOf(v),g=e;return p!==-1&&(g=d[p+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:t,highlightStroke:g,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:c,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:f,comboMainStroke:h,comboMainFill:l,comboActiveStroke:e,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:c,comboDisableFill:u}},nxe=function(e,t,n){t===void 0&&(t="#fff"),n===void 0&&(n="#777");var i=_i(t,e,.2).rgb().toString(),a=_i(t,e,.3).rgb().toString(),o=_i(t,e,.6).rgb().toString(),s=_i(t,e,.8).rgb().toString(),l=_i(t,n,.2).rgb().toString(),u=_i(t,n,.25).rgb().toString(),f=_i(t,n,.3).rgb().toString(),c=_i(t,n,.4).rgb().toString(),h=_i(t,n,.5).rgb().toString(),d=vw(e,{theme:"dark",backgroundColor:t}),v=o0(e).hex().toLowerCase(),p=d.indexOf(v),g=e;return p!==-1&&(g=d[p+1]),{mainStroke:s,mainFill:i,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:i,highlightStroke:e,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:f,comboMainStroke:c,comboMainFill:u,comboActiveStroke:e,comboActiveFill:l,comboInactiveStroke:c,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:c,comboDisableFill:l}},GI=function(e,t,n,i){return t===void 0&&(t="#fff"),n===void 0&&(n="default"),n==="default"?rxe(e,t,"rgb(150, 150, 150)"):nxe(e,t,"#777")},ixe=function(e,t,n,i){t===void 0&&(t="#fff"),n===void 0&&(n="default");var a=[];return e.forEach(function(o){a.push(GI(o,t,n))}),a};const axe=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:ixe,getColorsWithSubjectColor:GI,mixColor:_i},Symbol.toStringTag,{value:"Module"}));var oxe="rgb(95, 149, 255)",sxe="rgb(255, 255, 255)",IB="rgb(0, 0, 0)",$r=GI(oxe,sxe);const Th={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:$r.mainStroke,fill:$r.mainFill},size:20,color:$r.mainStroke,linkPoints:{size:8,lineWidth:1,fill:$r.activeFill,stroke:$r.activeStroke}},nodeStateStyles:{active:{fill:$r.activeFill,stroke:$r.activeStroke,lineWidth:2,shadowColor:$r.mainStroke,shadowBlur:10},selected:{fill:$r.selectedFill,stroke:$r.selectedStroke,lineWidth:4,shadowColor:$r.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:$r.highlightFill,stroke:$r.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:$r.inactiveFill,stroke:$r.inactiveStroke,lineWidth:1},disable:{fill:$r.disableFill,stroke:$r.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:IB,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:$r.edgeMainStroke,lineAppendWidth:2},color:$r.edgeMainStroke},edgeStateStyles:{active:{stroke:$r.edgeActiveStroke,lineWidth:1},selected:{stroke:$r.edgeSelectedStroke,lineWidth:2,shadowColor:$r.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$r.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:$r.edgeInactiveStroke,lineWidth:1},disable:{stroke:$r.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:IB,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:$r.comboMainFill,lineWidth:1,stroke:$r.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:$r.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:$r.comboActiveStroke,lineWidth:1,fill:$r.comboActiveFill},selected:{stroke:$r.comboSelectedStroke,lineWidth:2,fill:$r.comboSelectedFill,shadowColor:$r.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$r.comboHighlightStroke,lineWidth:2,fill:$r.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:$r.comboInactiveStroke,fill:$r.comboInactiveFill,lineWidth:1},disable:{stroke:$r.comboDisableStroke,fill:$r.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var lxe=function(e){var t=e.clone();return uxe(e,t),t},uxe=function r(e,t){var n;e.isGroup()&&t.isGroup()&&((n=e.get("children"))===null||n===void 0||n.forEach(function(s,l){var u=t.get("children")[l];r(s,u)}));var i=e.get("type"),a=t.get("type");if(!(i!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},fxe=aa.cloneEvent,cxe=aa.isViewportChanged,hxe=function(r){nr(e,r);function e(t){var n=r.call(this,t)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=t,n.destroyed=!1,n.initEvents(),n}return e.prototype.initEvents=function(){var t=this,n=t.graph,i=t.extendEvents,a=i===void 0?[]:i,o=n.get("canvas"),s=o.get("el"),l=hh(this,"onCanvasEvents"),u=hh(this,"onExtendEvents"),f=hh(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(P1(s,"wheel",f)),typeof window<"u"&&(a.push(P1(window,"keydown",u)),a.push(P1(window,"keyup",u)),a.push(P1(window,"focus",u))),this.resetHandler&&n.off("afterchangedata",this.resetHandler),this.resetHandler=hh(this,"resetStatus"),n.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,i=this.graph,a=i.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return n.mousedown=!1});break;case"click":if(!this.mousedown)return;break}t.canvasX=t.x,t.canvasY=t.y;var l={x:t.canvasX,y:t.canvasY},u=i.get("group"),f=u.getMatrix();if(f||(f=[1,0,0,0,1,0,0,0,1]),cxe(f)&&(l=i.getPointByClient(t.clientX,t.clientY)),t.x=l.x,t.y=l.y,t.currentTarget=i,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,i.emit(s,t),i.emit("canvas:".concat(s),t);return}var c=e.getItemRoot(o);if(!c){i.emit(s,t);return}var h=c.get("item");if(!h.destroyed){var d=h.getType();if(t.target=o,t.item=h,t.canvasX===t.x&&t.canvasY===t.y){var v=i.getCanvasByPoint(t.x,t.y);t.canvasX=v.x,t.canvasY=v.y}t.name&&!t.name.includes(":")?(i.emit("".concat(d,":").concat(s),t),i.emit(s,t)):t.name&&i.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,d)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){Lt(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=t.target===s?null:t.item;t=fxe(t),o&&o!==l&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),l&&o!==l&&(t.item=l,this.emitCustomEvent(n,"mouseenter",t),this.dragging&&this.emitCustomEvent(n,"dragenter",t)),this.preItem=l},e.prototype.emitCustomEvent=function(t,n,i){i.type=n,this.graph.emit("".concat(t,":").concat(n),i)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,n=t.graph,i=t.canvasHandler,a=t.extendEvents,o=n.get("canvas");o.off("*",i),De(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(lV),Or={},Ou={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.Base=void 0;var dxe=function(){function r(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return r.prototype.layout=function(e){return this.init(e),this.execute(!0)},r.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},r.prototype.execute=function(e){},r.prototype.executeWithWorker=function(){},r.prototype.getDefaultCfg=function(){return{}},r.prototype.updateCfg=function(e){e&&Object.assign(this,e)},r.prototype.getType=function(){return"base"},r.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},r}();ei.Base=dxe;var hM={},Vv={};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.camelize=Vv.isString=void 0;var vxe=function(r){return typeof r=="string"};Vv.isString=vxe;var pxe=function(r){var e=Object.create(null);return function(t){var n=e[t];return n||(e[t]=r(t))}},gxe=/-(\w)/g;Vv.camelize=pxe(function(r){return r.replace(gxe,function(e,t){return t?t.toUpperCase():""})});var zm={};Object.defineProperty(zm,"__esModule",{value:!0});zm.isArray=void 0;zm.isArray=Array.isArray;var h_={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.toNumber=r.isNaN=r.isNumber=void 0;var e=function(i){return typeof i=="number"};r.isNumber=e;var t=function(i){return Number.isNaN(Number(i))};r.isNaN=t;var n=function(i){var a=parseFloat(i);return(0,r.isNaN)(a)?i:a};r.toNumber=n})(h_);var d_={},jI={};(function(r){var e=Re&&Re.__assign||function(){return e=Object.assign||function(i){for(var a,o=1,s=arguments.length;o<s;o++){a=arguments[o];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.isObject=void 0;var t=function(i){return i!==null&&typeof i=="object"};r.isObject=t;var n=function(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var a=[];return i.forEach(function(s){a.push(s)}),a.map(function(s){return(0,r.clone)(s)})}if(typeof i=="object"&&Object.keys(i).length){var o=e({},i);return Object.keys(o).forEach(function(s){o[s]=(0,r.clone)(o[s])}),o}return i};r.clone=n})(jI);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getCoreNodeAndRelativeLeafNodes=r.getAvgNodePosition=r.getLayoutBBox=r.traverseTreeUp=r.scaleMatrix=r.getAdjMatrix=r.floydWarshall=r.getDegreeMap=r.getDegree=r.getEdgeTerminal=void 0;var e=zm,t=h_,n=jI,i=function(b,y){var x=b[y];return(0,n.isObject)(x)?x.cell:x};r.getEdgeTerminal=i;var a=function(b,y,x){for(var w=[],E=0;E<b;E++)w[E]={in:0,out:0,all:0};return x&&x.forEach(function(_){var S=(0,r.getEdgeTerminal)(_,"source"),C=(0,r.getEdgeTerminal)(_,"target");S&&w[y[S]]&&(w[y[S]].out+=1,w[y[S]].all+=1),C&&w[y[C]]&&(w[y[C]].in+=1,w[y[C]].all+=1)}),w};r.getDegree=a;var o=function(b,y){var x={};return b.forEach(function(w){x[w.id]={in:0,out:0,all:0}}),y&&y.forEach(function(w){var E=(0,r.getEdgeTerminal)(w,"source"),_=(0,r.getEdgeTerminal)(w,"target");E&&(x[E].out+=1,x[E].all+=1),_&&(x[_].in+=1,x[_].all+=1)}),x};r.getDegreeMap=o;var s=function(b){for(var y=[],x=b.length,w=0;w<x;w+=1){y[w]=[];for(var E=0;E<x;E+=1)w===E?y[w][E]=0:b[w][E]===0||!b[w][E]?y[w][E]=1/0:y[w][E]=b[w][E]}for(var _=0;_<x;_+=1)for(var w=0;w<x;w+=1)for(var E=0;E<x;E+=1)y[w][E]>y[w][_]+y[_][E]&&(y[w][E]=y[w][_]+y[_][E]);return y};r.floydWarshall=s;var l=function(b,y){var x=b.nodes,w=b.edges,E=[],_={};if(!x)throw new Error("invalid nodes data!");return x&&x.forEach(function(S,C){_[S.id]=C;var M=[];E.push(M)}),w==null||w.forEach(function(S){var C=(0,r.getEdgeTerminal)(S,"source"),M=(0,r.getEdgeTerminal)(S,"target"),T=_[C],A=_[M];T===void 0||A===void 0||(E[T][A]=1,y||(E[A][T]=1))}),E};r.getAdjMatrix=l;var u=function(b,y){var x=[];return b.forEach(function(w){var E=[];w.forEach(function(_){E.push(_*y)}),x.push(E)}),x};r.scaleMatrix=u;var f=function(b,y){if(b&&b.children){for(var x=b.children.length-1;x>=0;x--)if(!f(b.children[x],y))return}return!!y(b)},c=function(b,y){typeof y=="function"&&f(b,y)};r.traverseTreeUp=c;var h=function(b){var y=1/0,x=1/0,w=-1/0,E=-1/0;return b.forEach(function(_){var S=_.size;(0,e.isArray)(S)?S.length===1&&(S=[S[0],S[0]]):(0,t.isNumber)(S)?S=[S,S]:(S===void 0||isNaN(S))&&(S=[30,30]);var C=[S[0]/2,S[1]/2],M=_.x-C[0],T=_.x+C[0],A=_.y-C[1],O=_.y+C[1];y>M&&(y=M),x>A&&(x=A),w<T&&(w=T),E<O&&(E=O)}),{minX:y,minY:x,maxX:w,maxY:E}};r.getLayoutBBox=h;var d=function(b){var y={x:0,y:0};b.forEach(function(w){y.x+=w.x||0,y.y+=w.y||0});var x=b.length||1;return{x:y.x/x,y:y.y/x}};r.getAvgNodePosition=d;var v=function(b,y,x){var w,E;return b==="source"?((w=x==null?void 0:x.find(function(_){return _.target===y.id}))===null||w===void 0?void 0:w.source)||{}:((E=x==null?void 0:x.find(function(_){return _.source===y.id}))===null||E===void 0?void 0:E.target)||{}},p=function(b,y,x){var w=[];switch(b){case"source":w=x==null?void 0:x.filter(function(_){return _.source===y.id}).map(function(_){return _.target});break;case"target":w=x==null?void 0:x.filter(function(_){return _.target===y.id}).map(function(_){return _.source});break;case"both":w=x==null?void 0:x.filter(function(_){return _.source===y.id}).map(function(_){return _.target}).concat(x==null?void 0:x.filter(function(_){return _.target===y.id}).map(function(_){return _.source}));break}var E=new Set(w);return Array.from(E)},g=function(b,y,x,w,E){var _=x[y]||"",S=(w==null?void 0:w.filter(function(C){return C[y]===_}))||[];return b==="leaf"&&(S=S.filter(function(C){var M,T;return((M=E[C.id])===null||M===void 0?void 0:M.in)===0||((T=E[C.id])===null||T===void 0?void 0:T.out)===0})),S},m=function(b,y,x,w,E,_){var S=E[y.id],C=S.in,M=S.out,T=y,A=[];C===0?(T=v("source",y,x),A=p("both",T,x).map(function(L){return _[L]})):M===0&&(T=v("target",y,x),A=p("both",T,x).map(function(L){return _[L]})),A=A.filter(function(L){return E[L.id]&&(E[L.id].in===0||E[L.id].out===0)});var O=g(b,w,y,A,E);return{coreNode:T,relativeLeafNodes:A,sameTypeLeafNodes:O}};r.getCoreNodeAndRelativeLeafNodes=m})(d_);var dM={},LB;function mxe(){return LB||(LB=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFuncByUnknownType=r.getFunc=r.isFunction=void 0;var e=Vn(),t=h_,n=function(o){return typeof o=="function"};r.isFunction=n;var i=function(o,s,l){var u;return l?u=l:(0,t.isNumber)(o)?u=function(){return o}:u=function(){return s},u};r.getFunc=i;var a=function(o,s,l){return l===void 0&&(l=!0),!s&&s!==0?function(u){return u.size?(0,e.isArray)(u.size)?u.size[0]>u.size[1]?u.size[0]:u.size[1]:(0,e.isObject)(u.size)?u.size.width>u.size.height?u.size.width:u.size.height:u.size:o}:(0,r.isFunction)(s)?s:(0,t.isNumber)(s)?function(){return s}:(0,e.isArray)(s)?function(){if(l){var u=Math.max.apply(Math,s);return isNaN(u)?o:u}return s}:(0,e.isObject)(s)?function(){if(l){var u=Math.max(s.width,s.height);return isNaN(u)?o:u}return[s.width,s.height]}:function(){return o}};r.getFuncByUnknownType=a}(dM)),dM}var PB;function Vn(){return PB||(PB=1,function(r){var e=Re&&Re.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Re&&Re.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Vv,r),t(zm,r),t(h_,r),t(d_,r),t(jI,r),t(mxe(),r)}(hM)),hM}var yxe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ou,"__esModule",{value:!0});Ou.getLayoutByName=Ou.unRegisterLayout=Ou.registerLayout=void 0;var bxe=ei,xxe=Vn(),If=new Map,wxe=function(r,e){if(If.get(r)&&console.warn("The layout with the name ".concat(r," exists already, it will be overridden")),(0,xxe.isObject)(e)){var t=function(n){yxe(i,n);function i(a){var o=this,s;o=n.call(this)||this;var l=o,u={},f=Object.assign({},l.getDefaultCfg(),((s=e.getDefaultCfg)===null||s===void 0?void 0:s.call(e))||{});return Object.assign(u,f,e,a),Object.keys(u).forEach(function(c){var h=u[c];l[c]=h}),o}return i}(bxe.Base);If.set(r,t)}else If.set(r,e);return If.get(r)};Ou.registerLayout=wxe;var Exe=function(r){If.has(r)&&If.delete(r)};Ou.unRegisterLayout=Exe;var _xe=function(r){return If.has(r)?If.get(r):null};Ou.getLayoutByName=_xe;var vM={},Gm={},Sxe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Gm,"__esModule",{value:!0});Gm.GridLayout=void 0;var Dd=Vn(),Mxe=ei,Cxe=function(r){Sxe(e,r);function e(t){var n=r.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges,a=t.begin,o=n.length;if(o===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i};if(o===1)return n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i};var s=t.sortBy,l=t.width,u=t.height,f=t.condense,c=t.preventOverlapPadding,h=t.preventOverlap,d=t.nodeSpacing,v=t.nodeSize,p=[];n.forEach(function(A){p.push(A)});var g={};if(p.forEach(function(A,O){g[A.id]=O}),(s==="degree"||!(0,Dd.isString)(s)||p[0][s]===void 0)&&(s="degree",(0,Dd.isNaN)(n[0].degree))){var m=(0,Dd.getDegree)(p.length,g,i);p.forEach(function(A,O){A.degree=m[O].all})}p.sort(function(A,O){return O[s]-A[s]}),!l&&typeof window<"u"&&(l=window.innerWidth),!u&&typeof window<"u"&&(u=window.innerHeight);var b=t.rows,y=t.cols!=null?t.cols:t.columns;if(t.cells=o,b!=null&&y!=null?(t.rows=b,t.cols=y):b!=null&&y==null?(t.rows=b,t.cols=Math.ceil(t.cells/t.rows)):b==null&&y!=null?(t.cols=y,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){var x=t.small(),w=t.large();(x-1)*w>=t.cells?t.small(x-1):(w-1)*x>=t.cells&&t.large(w-1)}else for(;t.cols*t.rows<t.cells;){var x=t.small(),w=t.large();(w+1)*x>=t.cells?t.large(w+1):t.small(x+1)}if(t.cellWidth=l/t.cols,t.cellHeight=u/t.rows,f&&(t.cellWidth=0,t.cellHeight=0),h||d){var E=(0,Dd.getFuncByUnknownType)(10,d),_=(0,Dd.getFuncByUnknownType)(30,v,!1);p.forEach(function(A){(!A.x||!A.y)&&(A.x=0,A.y=0);var O=_(A)||30,L,N;(0,Dd.isArray)(O)?(L=O[0],N=O[1]):(L=O,N=O);var P=E!==void 0?E(A):c,R=L+P,G=N+P;t.cellWidth=Math.max(t.cellWidth,R),t.cellHeight=Math.max(t.cellHeight,G)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var S=0;S<p.length;S++){var C=p[S],M=void 0;if(t.position&&(M=t.position(C)),M&&(M.row!==void 0||M.col!==void 0)){var T={row:M.row,col:M.col};if(T.col===void 0)for(T.col=0;t.used(T.row,T.col);)T.col++;else if(T.row===void 0)for(T.row=0;t.used(T.row,T.col);)T.row++;t.id2manPos[C.id]=T,t.use(T.row,T.col)}t.getPos(C)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:i,nodes:p}},e.prototype.small=function(t){var n=this,i,a=n.rows||5,o=n.cols||5;if(t==null)i=Math.min(a,o);else{var s=Math.min(a,o);s===n.rows?n.rows=t:n.cols=t}return i},e.prototype.large=function(t){var n=this,i,a=n.rows||5,o=n.cols||5;if(t==null)i=Math.max(a,o);else{var s=Math.max(a,o);s===n.rows?n.rows=t:n.cols=t}return i},e.prototype.used=function(t,n){var i=this;return i.cellUsed["c-".concat(t,"-").concat(n)]||!1},e.prototype.use=function(t,n){var i=this;i.cellUsed["c-".concat(t,"-").concat(n)]=!0},e.prototype.moveToNextCell=function(){var t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)},e.prototype.getPos=function(t){var n=this,i=n.begin,a=n.cellWidth,o=n.cellHeight,s,l,u=n.id2manPos[t.id];if(u)s=u.col*a+a/2+i[0],l=u.row*o+o/2+i[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();s=n.col*a+a/2+i[0],l=n.row*o+o/2+i[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=s,t.y=l},e.prototype.getType=function(){return"grid"},e}(Mxe.Base);Gm.GridLayout=Cxe;var jm={},Axe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(jm,"__esModule",{value:!0});jm.RandomLayout=void 0;var Txe=ei,Oxe=function(r){Axe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,n=t.nodes,i=.9,a=t.center;return!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),n&&n.forEach(function(o){o.x=(Math.random()-.5)*i*t.width+a[0],o.y=(Math.random()-.5)*i*t.height+a[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(Txe.Base);jm.RandomLayout=Oxe;var Um={},kxe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Um,"__esModule",{value:!0});Um.GForceLayout=void 0;var Ixe=ei,sa=Vn(),pM=function(r,e){var t;return r?(0,sa.isNumber)(r)?t=function(n){return r}:t=r:t=function(n){return e||1},t},Lxe=function(r){kxe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,n,i=this,a=i.nodes;if(i.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(i.timeInterval),!a||a.length===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var o=i.center;if(a.length===1){a[0].x=o[0],a[0].y=o[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var s={},l={};a.forEach(function(v,p){(0,sa.isNumber)(v.x)||(v.x=Math.random()*i.width),(0,sa.isNumber)(v.y)||(v.y=Math.random()*i.height),s[v.id]=v,l[v.id]=p}),i.nodeMap=s,i.nodeIdxMap=l,i.linkDistance=pM(i.linkDistance,1),i.nodeStrength=pM(i.nodeStrength,1),i.edgeStrength=pM(i.edgeStrength,1);var u=i.nodeSize,f;if(i.preventOverlap){var c=i.nodeSpacing,h;(0,sa.isNumber)(c)?h=function(){return c}:(0,sa.isFunction)(c)?h=c:h=function(){return 0},u?(0,sa.isArray)(u)?f=function(v){return Math.max(u[0],u[1])+h(v)}:f=function(v){return u+h(v)}:f=function(v){return v.size?(0,sa.isArray)(v.size)?Math.max(v.size[0],v.size[1])+h(v):(0,sa.isObject)(v.size)?Math.max(v.size.width,v.size.height)+h(v):v.size+h(v):10+h(v)}}i.nodeSize=f;var d=i.edges;i.degrees=(0,sa.getDegree)(a.length,i.nodeIdxMap,d),i.getMass||(i.getMass=function(v){var p=v.mass||i.degrees[i.nodeIdxMap[v.id]].all||1;return p}),i.run()},e.prototype.run=function(){var t,n=this,i=n.maxIteration,a=n.nodes,o=n.workerEnabled,s=n.minMovement,l=n.animate;if(a)if(o||!l){for(var u=0;u<i;u++){var f=n.runOneStep(u);if(n.reachMoveThreshold(a,f,s))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window>"u")return;var c=0;this.timeInterval=window.setInterval(function(){var h,d;if(a){var v=n.runOneStep(c)||[];n.reachMoveThreshold(a,v,s)&&((h=n.onLayoutEnd)===null||h===void 0||h.call(n),window.clearInterval(n.timeInterval)),c++,c>=i&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))}},0)}},e.prototype.reachMoveThreshold=function(t,n,i){var a=0;return t.forEach(function(o,s){var l=o.x-n[s].x,u=o.y-n[s].y;a+=Math.sqrt(l*l+u*u)}),a/=t.length,a<i},e.prototype.runOneStep=function(t){var n,i=this,a=i.nodes,o=i.edges,s=[],l=[];if(a){a.forEach(function(c,h){s[2*h]=0,s[2*h+1]=0,l[2*h]=0,l[2*h+1]=0}),i.calRepulsive(s,a),o&&i.calAttractive(s,o),i.calGravity(s,a);var u=Math.max(.02,i.interval-t*.002);i.updateVelocity(s,l,u,a);var f=[];return a.forEach(function(c){f.push({x:c.x,y:c.y})}),i.updatePosition(l,u,a),(n=i.tick)===null||n===void 0||n.call(i),f}},e.prototype.calRepulsive=function(t,n){var i=this,a=i.getMass,o=i.factor,s=i.coulombDisScale,l=i.preventOverlap,u=i.collideStrength,f=u===void 0?1:u,c=i.nodeStrength,h=i.nodeSize;n.forEach(function(d,v){var p=a?a(d):1;n.forEach(function(g,m){if(!(v>=m)){var b=d.x-g.x,y=d.y-g.y;b===0&&y===0&&(b=Math.random()*.01,y=Math.random()*.01);var x=b*b+y*y,w=Math.sqrt(x),E=(w+.1)*s,_=b/w,S=y/w,C=(c(d)+c(g))*.5*o/(E*E),M=a?a(g):1;if(t[2*v]+=_*C,t[2*v+1]+=S*C,t[2*m]-=_*C,t[2*m+1]-=S*C,l&&(h(d)+h(g))/2>w){var T=f*(c(d)+c(g))*.5/x;t[2*v]+=_*T/p,t[2*v+1]+=S*T/p,t[2*m]-=_*T/M,t[2*m+1]-=S*T/M}}})})},e.prototype.calAttractive=function(t,n){var i=this,a=i.nodeMap,o=i.nodeIdxMap,s=i.linkDistance,l=i.edgeStrength,u=i.nodeSize,f=i.getMass;n.forEach(function(c,h){var d=(0,sa.getEdgeTerminal)(c,"source"),v=(0,sa.getEdgeTerminal)(c,"target"),p=a[d],g=a[v],m=g.x-p.x,b=g.y-p.y;m===0&&b===0&&(m=Math.random()*.01,b=Math.random()*.01);var y=Math.sqrt(m*m+b*b),x=m/y,w=b/y,E=s(c,p,g)||1+(u(p)+u(g)||0)/2,_=E-y,S=_*l(c),C=o[d],M=o[v],T=f?f(p):1,A=f?f(g):1;t[2*C]-=x*S/T,t[2*C+1]-=w*S/T,t[2*M]+=x*S/A,t[2*M+1]+=w*S/A})},e.prototype.calGravity=function(t,n){for(var i=this,a=i.center,o=i.gravity,s=i.degrees,l=n.length,u=0;u<l;u++){var f=n[u],c=f.x-a[0],h=f.y-a[1],d=o;if(i.getCenter){var v=i.getCenter(f,s[u].all);v&&(0,sa.isNumber)(v[0])&&(0,sa.isNumber)(v[1])&&(0,sa.isNumber)(v[2])&&(c=f.x-v[0],h=f.y-v[1],d=v[2])}d&&(t[2*u]-=d*c,t[2*u+1]-=d*h)}},e.prototype.updateVelocity=function(t,n,i,a){var o=this,s=i*o.damping;a.forEach(function(l,u){var f=t[2*u]*s||.01,c=t[2*u+1]*s||.01,h=Math.sqrt(f*f+c*c);if(h>o.maxSpeed){var d=o.maxSpeed/h;f=d*f,c=d*c}n[2*u]=f,n[2*u+1]=c})},e.prototype.updatePosition=function(t,n,i){i.forEach(function(a,o){if((0,sa.isNumber)(a.fx)&&(0,sa.isNumber)(a.fy)){a.x=a.fx,a.y=a.fy;return}var s=t[2*o]*n,l=t[2*o+1]*n;a.x+=s,a.y+=l})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(Ixe.Base);Um.GForceLayout=Lxe;var Wm={},v_={};function Pxe(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return vH(this.cover(e,t),e,t,r)}function vH(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,a=r._root,o={data:n},s=r._x0,l=r._y0,u=r._x1,f=r._y1,c,h,d,v,p,g,m,b;if(!a)return r._root=o,r;for(;a.length;)if((p=e>=(c=(s+u)/2))?s=c:u=c,(g=t>=(h=(l+f)/2))?l=h:f=h,i=a,!(a=a[m=g<<1|p]))return i[m]=o,r;if(d=+r._x.call(null,a.data),v=+r._y.call(null,a.data),e===d&&t===v)return o.next=a,i?i[m]=o:r._root=o,r;do i=i?i[m]=new Array(4):r._root=new Array(4),(p=e>=(c=(s+u)/2))?s=c:u=c,(g=t>=(h=(l+f)/2))?l=h:f=h;while((m=g<<1|p)===(b=(v>=h)<<1|d>=c));return i[b]=a,i[m]=o,r}function Dxe(r){var e,t,n=r.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,f=-1/0,c=-1/0;for(t=0;t<n;++t)isNaN(i=+this._x.call(null,e=r[t]))||isNaN(a=+this._y.call(null,e))||(o[t]=i,s[t]=a,i<l&&(l=i),i>f&&(f=i),a<u&&(u=a),a>c&&(c=a));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),t=0;t<n;++t)vH(this,o[t],s[t],r[t]);return this}function Nxe(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,a=(n=Math.floor(e))+1;else{for(var o=i-t||1,s=this._root,l,u;t>r||r>=i||n>e||e>=a;)switch(u=(e<n)<<1|r<t,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=t+o,a=n+o;break;case 1:t=i-o,a=n+o;break;case 2:i=t+o,n=a-o;break;case 3:t=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=n,this._x1=i,this._y1=a,this}function Rxe(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function Bxe(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Aa(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function Fxe(r,e,t){var n,i=this._x0,a=this._y0,o,s,l,u,f=this._x1,c=this._y1,h=[],d=this._root,v,p;for(d&&h.push(new Aa(d,i,a,f,c)),t==null?t=1/0:(i=r-t,a=e-t,f=r+t,c=e+t,t*=t);v=h.pop();)if(!(!(d=v.node)||(o=v.x0)>f||(s=v.y0)>c||(l=v.x1)<i||(u=v.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new Aa(d[3],g,m,l,u),new Aa(d[2],o,m,g,u),new Aa(d[1],g,s,l,m),new Aa(d[0],o,s,g,m)),(p=(e>=m)<<1|r>=g)&&(v=h[h.length-1],h[h.length-1]=h[h.length-1-p],h[h.length-1-p]=v)}else{var b=r-+this._x.call(null,d.data),y=e-+this._y.call(null,d.data),x=b*b+y*y;if(x<t){var w=Math.sqrt(t=x);i=r-w,a=e-w,f=r+w,c=e+w,n=d.data}}return n}function $xe(r){if(isNaN(f=+this._x.call(null,r))||isNaN(c=+this._y.call(null,r)))return this;var e,t=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,f,c,h,d,v,p,g,m;if(!t)return this;if(t.length)for(;;){if((v=f>=(h=(o+l)/2))?o=h:l=h,(p=c>=(d=(s+u)/2))?s=d:u=d,e=t,!(t=t[g=p<<1|v]))return this;if(!t.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[m]=t:this._root=t),this):(this._root=a,this)}function zxe(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function Gxe(){return this._root}function jxe(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function Uxe(r){var e=[],t,n=this._root,i,a,o,s,l;for(n&&e.push(new Aa(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(n=t.node,a=t.x0,o=t.y0,s=t.x1,l=t.y1)&&n.length){var u=(a+s)/2,f=(o+l)/2;(i=n[3])&&e.push(new Aa(i,u,f,s,l)),(i=n[2])&&e.push(new Aa(i,a,f,u,l)),(i=n[1])&&e.push(new Aa(i,u,o,s,f)),(i=n[0])&&e.push(new Aa(i,a,o,u,f))}return this}function Wxe(r){var e=[],t=[],n;for(this._root&&e.push(new Aa(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,f=(o+l)/2,c=(s+u)/2;(a=i[0])&&e.push(new Aa(a,o,s,f,c)),(a=i[1])&&e.push(new Aa(a,f,s,l,c)),(a=i[2])&&e.push(new Aa(a,o,c,f,u)),(a=i[3])&&e.push(new Aa(a,f,c,l,u))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Vxe(r){return r[0]}function Hxe(r){return arguments.length?(this._x=r,this):this._x}function Xxe(r){return r[1]}function Yxe(r){return arguments.length?(this._y=r,this):this._y}function p_(r,e,t){var n=new UI(e??Vxe,t??Xxe,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function UI(r,e,t,n,i,a){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function DB(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Pa=p_.prototype=UI.prototype;Pa.copy=function(){var r=new UI(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=DB(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=DB(n));return r};Pa.add=Pxe;Pa.addAll=Dxe;Pa.cover=Nxe;Pa.data=Rxe;Pa.extent=Bxe;Pa.find=Fxe;Pa.remove=$xe;Pa.removeAll=zxe;Pa.root=Gxe;Pa.size=jxe;Pa.visit=Uxe;Pa.visitAfter=Wxe;Pa.x=Hxe;Pa.y=Yxe;const Kxe=Object.freeze(Object.defineProperty({__proto__:null,quadtree:p_},Symbol.toStringTag,{value:"Module"})),qxe=jl(Kxe);Object.defineProperty(v_,"__esModule",{value:!0});v_.forceNBody=void 0;var Zxe=qxe,Qxe=.81,NB=.1;function Jxe(r,e,t,n,i){var a=t/n,o=r.map(function(l,u){var f=e[l.id],c=f.data,h=f.x,d=f.y,v=f.size,p=c.layout.force.nodeStrength;return{x:h,y:d,size:v,index:u,vx:0,vy:0,weight:a*p}}),s=(0,Zxe.quadtree)(o,function(l){return l.x},function(l){return l.y}).visitAfter(ewe);return o.forEach(function(l){rwe(l,s)}),o.map(function(l,u){var f=e[r[u].id],c=f.data.layout.force.mass,h=c===void 0?1:c;i[2*u]=l.vx/h,i[2*u+1]=l.vy/h}),i}v_.forceNBody=Jxe;function ewe(r){var e=0,t=0,n=0;if(r.length){for(var i=0;i<4;i++){var a=r[i];a&&a.weight&&(e+=a.weight,t+=a.x*a.weight,n+=a.y*a.weight)}r.x=t/e,r.y=n/e,r.weight=e}else{var a=r;r.x=a.data.x,r.y=a.data.y,r.weight=a.data.weight}}var twe=function(r,e,t,n,i,a){var o=a.x-r.x||NB,s=a.y-r.y||NB,l=n-e,u=o*o+s*s,f=Math.sqrt(u)*u;if(l*l*Qxe<u){var c=r.weight/f;return a.vx+=o*c,a.vy+=s*c,!0}if(r.length)return!1;if(r.data!==a){var c=r.data.weight/f;a.vx+=o*c,a.vy+=s*c}};function rwe(r,e){e.visit(function(t,n,i,a,o){return twe(t,n,i,a,o,r)})}var nwe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ms=Re&&Re.__assign||function(){return ms=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ms.apply(this,arguments)};Object.defineProperty(Wm,"__esModule",{value:!0});Wm.Force2Layout=void 0;var iwe=ei,wi=Vn(),awe=v_,gM=function(r,e){var t;return r?(0,wi.isNumber)(r)?t=function(n){return r}:t=r:t=function(n){return e||1},t},owe=function(r){nwe(e,r);function e(t){var n=r.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(a){return{x:n.width/2,y:n.height/2}}};var i=t.getMass;return n.propsGetMass=i,n.updateCfg(t),n}return e.prototype.getCentripetalOptions=function(){var t=this,n=t.leafCluster,i=t.clustering,a=t.nodeClusterBy,o=t.nodes,s=t.nodeMap,l=t.clusterNodeStrength,u=function(y){return typeof l=="function"?l(y):l},f={},c;if(n){c=this.getSameTypeLeafMap()||{};var h=Array.from(new Set(o==null?void 0:o.map(function(y){return y[a]})))||[];f={single:100,leaf:function(y,x,w){var E=c[y.id]||{},_=E.relativeLeafNodes,S=E.sameTypeLeafNodes;return(S==null?void 0:S.length)===(_==null?void 0:_.length)||(h==null?void 0:h.length)===1?1:u(y)},others:1,center:function(y,x,w){var E,_=(((E=y.data)===null||E===void 0?void 0:E.layout)||{}).degree;if(!_)return{x:100,y:100};var S;if(_===1){var C=(c[y.id]||{}).sameTypeLeafNodes,M=C===void 0?[]:C;M.length===1?S=void 0:M.length>1&&(S=(0,wi.getAvgNodePosition)(M))}else S=void 0;return{x:S==null?void 0:S.x,y:S==null?void 0:S.y}}}}if(i){c||(c=this.getSameTypeLeafMap());var d=Array.from(new Set(o.map(function(y,x){return y[a]}))).filter(function(y){return y!==void 0}),v={};d.forEach(function(y){var x=o.filter(function(w){return w[a]===y}).map(function(w){return s[w.id]});v[y]=(0,wi.getAvgNodePosition)(x)}),f={single:function(y){return u(y)},leaf:function(y){return u(y)},others:function(y){return u(y)},center:function(y,x,w){var E=v[y[a]];return{x:E==null?void 0:E.x,y:E==null?void 0:E.y}}}}this.centripetalOptions=ms(ms({},this.centripetalOptions),f);var p=this.centripetalOptions,g=p.leaf,m=p.single,b=p.others;g&&typeof g!="function"&&(this.centripetalOptions.leaf=function(){return g}),m&&typeof m!="function"&&(this.centripetalOptions.single=function(){return m}),b&&typeof b!="function"&&(this.centripetalOptions.others=function(){return b})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var n=t.nodes,i=t.edges,a=t.defSpringLen;if(t.judgingDistance=0,!n||n.length===0){t.onLayoutEnd([]);return}!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd([ms({},n[0])]);return}t.degreesMap=(0,wi.getDegreeMap)(n,i),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(d){var v=1;(0,wi.isNumber)(d.mass)&&(v=d.mass);var p=t.degreesMap[d.id].all;return!p||p<5?v:p*5*v};var s=t.nodeSize,l;if(t.preventOverlap){var u=t.nodeSpacing,f;(0,wi.isNumber)(u)?f=function(){return u}:(0,wi.isFunction)(u)?f=u:f=function(){return 0},s?(0,wi.isArray)(s)?l=function(d){return Math.max(s[0],s[1])+f(d)}:l=function(d){return s+f(d)}:l=function(d){return d.size?(0,wi.isArray)(d.size)?Math.max(d.size[0],d.size[1])+f(d):(0,wi.isObject)(d.size)?Math.max(d.size.width,d.size.height)+f(d):d.size+f(d):10+f(d)}}t.nodeSize=l,t.linkDistance=gM(t.linkDistance,1),t.nodeStrength=gM(t.nodeStrength,1),t.edgeStrength=gM(t.edgeStrength,1);var c={},h={};n.forEach(function(d,v){(0,wi.isNumber)(d.x)||(d.x=Math.random()*t.width),(0,wi.isNumber)(d.y)||(d.y=Math.random()*t.height);var p=t.degreesMap[d.id];c[d.id]=ms(ms({},d),{data:ms(ms({},d.data),{size:t.nodeSize(d)||30,layout:{inDegree:p.in,outDegree:p.out,degree:p.all,tDegree:p.in,sDegree:p.out,force:{mass:t.getMass(d),nodeStrength:t.nodeStrength(d,i)}}})}),h[d.id]=v}),t.nodeMap=c,t.nodeIdxMap=h,t.edgeInfos=[],i==null||i.forEach(function(d){var v=c[d.source],p=c[d.target];!v||!p?elf.edgeInfos.push({}):t.edgeInfos.push({edgeStrength:t.edgeStrength(d),linkDistance:a?a(ms(ms({},d),{source:v,target:p}),v,p):t.linkDistance(d,v,p)||1+(s(v)+s(v)||0)/2})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()},e.prototype.run=function(){var t=this,n=t.maxIteration,i=t.nodes,a=t.edges,o=t.workerEnabled,s=t.minMovement,l=t.animate,u=t.nodeMap,f=t.height;if(t.currentMinY=0,t.currentMaxY=f,!!i){var c=[];if(i.forEach(function(m,b){c[2*b]=0,c[2*b+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var h={};a.forEach(function(m){var b=m.source,y=m.target;h[b]=h[b]||[],h[b].push(m),h[y]=h[y]||[],h[y].push(m)}),this.relatedEdges=h}var d=n,v=!l;if(o||v){for(var p=0;(t.judgingDistance>s||p<1)&&p<d;p++)t.runOneStep(p,c);t.onLayoutEnd(Object.values(u))}else{if(typeof window>"u")return;var g=0;this.timeInterval=window.setInterval(function(){i&&(t.runOneStep(g,c),g++,(g>=d||t.judgingDistance<s)&&(t.onLayoutEnd(Object.values(u)),window.clearInterval(t.timeInterval)))},0)}}},e.prototype.runOneStep=function(t,n){var i,a=this,o=a.nodes,s=a.edges;a.nodeMap;var l=a.monitor,u=[];if(o!=null&&o.length){a.calRepulsive(u),s&&a.calAttractive(u),a.calGravity(u),a.attractToSide(u);var f=a.interval;if(a.updateVelocity(u,n,f),a.updatePosition(n,f),(i=a.tick)===null||i===void 0||i.call(a),l){var c=this.calTotalEnergy(u);l({energy:c,nodes:o,edges:s,iterations:t})}}},e.prototype.calTotalEnergy=function(t){var n=this,i=n.nodes,a=n.nodeMap;if(!(i!=null&&i.length))return 0;var o=0;return i.forEach(function(s,l){var u=t[2*l],f=t[2*l+1],c=u*u+f*f,h=a[s.id].data.layout.force.mass,d=h===void 0?1:h;o+=d*c*.5}),o},e.prototype.calRepulsive=function(t){var n=this,i=n.nodes,a=n.nodeMap,o=n.factor,s=n.coulombDisScale;n.nodeSize,(0,awe.forceNBody)(i,a,o,s*s,t)},e.prototype.calAttractive=function(t){var n=this,i=n.edges,a=n.nodeMap,o=n.nodeIdxMap,s=n.edgeInfos;n.nodeSize,i.forEach(function(l,u){var f=(0,wi.getEdgeTerminal)(l,"source"),c=(0,wi.getEdgeTerminal)(l,"target"),h=a[f],d=a[c];if(!(!h||!d)){var v=d.x-h.x,p=d.y-h.y;!v&&!p&&(v=Math.random()*.01,p=Math.random()*.01);var g=Math.sqrt(v*v+p*p),m=v/g,b=p/g,y=s[u]||{},x=y.linkDistance,w=x===void 0?200:x,E=y.edgeStrength,_=E===void 0?200:E,S=w-g,C=S*_,M=h.data.layout.force.mass||1,T=d.data.layout.force.mass||1,A=1/M,O=1/T,L=m*C,N=b*C,P=2*o[f],R=2*o[c];t[P]-=L*A,t[P+1]-=N*A,t[R]+=L*O,t[R+1]+=N*O}})},e.prototype.calGravity=function(t){var n,i=this,a=i.nodes,o=i.edges,s=o===void 0?[]:o,l=i.nodeMap,u=i.width,f=i.height,c=i.center,h=i.gravity,d=i.degreesMap,v=i.centripetalOptions;if(a)for(var p=a.length,g=0;g<p;g++){var m=2*g,b=l[a[g].id],y=b.data.layout.force.mass,x=y===void 0?1:y,w=0,E=0,_=h,S=d[b.id],C=S.in,M=S.out,T=S.all,A=(n=i.getCenter)===null||n===void 0?void 0:n.call(i,b,T);if(A){var O=A[0],L=A[1],N=A[2];w=b.x-O,E=b.y-L,_=N}else w=b.x-c[0],E=b.y-c[1];if(_&&(t[m]-=_*w/x,t[m+1]-=_*E/x),v){var P=v.leaf,R=v.single,G=v.others,D=v.center,B=(D==null?void 0:D(b,a,s,u,f))||{x:0,y:0,centerStrength:0},Y=B.x,ee=B.y,ne=B.centerStrength;if(!(0,wi.isNumber)(Y)||!(0,wi.isNumber)(ee))continue;var Q=(b.x-Y)/x,ye=(b.y-ee)/x;if(ne&&(t[m]-=ne*Q,t[m+1]-=ne*ye),T===0){var Le=R(b);if(!Le)continue;t[m]-=Le*Q,t[m+1]-=Le*ye;continue}if(C===0||M===0){var Fe=P(b,a,s);if(!Fe)continue;t[m]-=Fe*Q,t[m+1]-=Fe*ye;continue}var _e=G(b);if(!_e)continue;t[m]-=_e*Q,t[m+1]-=_e*ye}}},e.prototype.attractToSide=function(t){var n=this,i=n.defSideCoe;n.height;var a=n.nodes,o=n.relatedEdges,s=n.currentMinY,l=s===void 0?0:s,u=n.currentMaxY,f=u===void 0?this.height:u;!i||typeof i!="function"||!(a!=null&&a.length)||a.forEach(function(c,h){var d=i(c,o[c.id]||[]);if(d!==0){var v=d<0?l:f,p=Math.abs(d);t[2*h+1]-=p*(c.y-v)}})},e.prototype.updateVelocity=function(t,n,i){var a=this,o=a.nodes,s=a.damping,l=a.maxSpeed;o!=null&&o.length&&o.forEach(function(u,f){var c=(n[2*f]+t[2*f]*i)*s||.01,h=(n[2*f+1]+t[2*f+1]*i)*s||.01,d=Math.sqrt(c*c+h*h);if(d>l){var v=l/d;c=v*c,h=v*h}n[2*f]=c,n[2*f+1]=h})},e.prototype.updatePosition=function(t,n){var i=this,a=i.nodes,o=i.distanceThresholdMode,s=i.nodeMap;if(!(a!=null&&a.length)){this.judgingDistance=0;return}var l=0;o==="max"?i.judgingDistance=-1/0:o==="min"&&(i.judgingDistance=1/0);var u=1/0,f=-1/0;a.forEach(function(c,h){var d=s[c.id];if((0,wi.isNumber)(c.fx)&&(0,wi.isNumber)(c.fy)){c.x=c.fx,c.y=c.fy,d.x=c.x,d.y=c.y;return}var v=t[2*h]*n,p=t[2*h+1]*n;c.x+=v,c.y+=p,d.x=c.x,d.y=c.y,c.y<u&&(u=c.y),c.y>f&&(f=c.y);var g=Math.sqrt(v*v+p*p);switch(o){case"max":i.judgingDistance<g&&(i.judgingDistance=g);break;case"min":i.judgingDistance>g&&(i.judgingDistance=g);break;default:l=l+g;break}}),this.currentMinY=u,this.currentMaxY=f,(!o||o==="mean")&&(i.judgingDistance=l/a.length)},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,n=t.nodeClusterBy,i=t.nodes,a=t.edges,o=t.nodeMap,s=t.degreesMap;if(i!=null&&i.length){var l={};return i.forEach(function(u,f){var c=s[u.id].all;c===1&&(l[u.id]=(0,wi.getCoreNodeAndRelativeLeafNodes)("leaf",u,a,n,s,o))}),l}},e}(iwe.Base);Wm.Force2Layout=owe;var WI={},g_={};function swe(r,e){var t,n=1;r==null&&(r=0),e==null&&(e=0);function i(){var a,o=t.length,s,l=0,u=0;for(a=0;a<o;++a)s=t[a],l+=s.x,u+=s.y;for(l=(l/o-r)*n,u=(u/o-e)*n,a=0;a<o;++a)s=t[a],s.x-=l,s.y-=u}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(r=+a,i):r},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function Ii(r){return function(){return r}}function Lf(r){return(r()-.5)*1e-6}function lwe(r){return r.x+r.vx}function uwe(r){return r.y+r.vy}function fwe(r){var e,t,n,i=1,a=1;typeof r!="function"&&(r=Ii(r==null?1:+r));function o(){for(var u,f=e.length,c,h,d,v,p,g,m=0;m<a;++m)for(c=p_(e,lwe,uwe).visitAfter(s),u=0;u<f;++u)h=e[u],p=t[h.index],g=p*p,d=h.x+h.vx,v=h.y+h.vy,c.visit(b);function b(y,x,w,E,_){var S=y.data,C=y.r,M=p+C;if(S){if(S.index>h.index){var T=d-S.x-S.vx,A=v-S.y-S.vy,O=T*T+A*A;O<M*M&&(T===0&&(T=Lf(n),O+=T*T),A===0&&(A=Lf(n),O+=A*A),O=(M-(O=Math.sqrt(O)))/O*i,h.vx+=(T*=O)*(M=(C*=C)/(g+C)),h.vy+=(A*=O)*M,S.vx-=T*(M=1-M),S.vy-=A*M)}return}return x>d+M||E<d-M||w>v+M||_<v-M}}function s(u){if(u.data)return u.r=t[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(e){var u,f=e.length,c;for(t=new Array(f),u=0;u<f;++u)c=e[u],t[c.index]=+r(c,u,e)}}return o.initialize=function(u,f){e=u,n=f,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Ii(+u),l(),o):r},o}function cwe(r){return r.index}function RB(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}function hwe(r){var e=cwe,t=c,n,i=Ii(30),a,o,s,l,u,f=1;r==null&&(r=[]);function c(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function h(g){for(var m=0,b=r.length;m<f;++m)for(var y=0,x,w,E,_,S,C,M;y<b;++y)x=r[y],w=x.source,E=x.target,_=E.x+E.vx-w.x-w.vx||Lf(u),S=E.y+E.vy-w.y-w.vy||Lf(u),C=Math.sqrt(_*_+S*S),C=(C-a[y])/C*g*n[y],_*=C,S*=C,E.vx-=_*(M=l[y]),E.vy-=S*M,w.vx+=_*(M=1-M),w.vy+=S*M}function d(){if(o){var g,m=o.length,b=r.length,y=new Map(o.map((w,E)=>[e(w,E,o),w])),x;for(g=0,s=new Array(m);g<b;++g)x=r[g],x.index=g,typeof x.source!="object"&&(x.source=RB(y,x.source)),typeof x.target!="object"&&(x.target=RB(y,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(g=0,l=new Array(b);g<b;++g)x=r[g],l[g]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);n=new Array(b),v(),a=new Array(b),p()}}function v(){if(o)for(var g=0,m=r.length;g<m;++g)n[g]=+t(r[g],g,r)}function p(){if(o)for(var g=0,m=r.length;g<m;++g)a[g]=+i(r[g],g,r)}return h.initialize=function(g,m){o=g,u=m,d()},h.links=function(g){return arguments.length?(r=g,d(),h):r},h.id=function(g){return arguments.length?(e=g,h):e},h.iterations=function(g){return arguments.length?(f=+g,h):f},h.strength=function(g){return arguments.length?(t=typeof g=="function"?g:Ii(+g),v(),h):t},h.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ii(+g),p(),h):i},h}var dwe={value:()=>{}};function pH(){for(var r=0,e=arguments.length,t={},n;r<e;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new ax(t)}function ax(r){this._=r}function vwe(r,e){return r.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}ax.prototype=pH.prototype={constructor:ax,on:function(r,e){var t=this._,n=vwe(r+"",t),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(r=n[a]).type)&&(i=pwe(t[i],r.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(r=n[a]).type)t[i]=BB(t[i],r.name,e);else if(e==null)for(i in t)t[i]=BB(t[i],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new ax(r)},call:function(r,e){if((i=arguments.length-2)>0)for(var t=new Array(i),n=0,i,a;n<i;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,i=a.length;n<i;++n)a[n].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(e,t)}};function pwe(r,e){for(var t=0,n=r.length,i;t<n;++t)if((i=r[t]).name===e)return i.value}function BB(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=dwe,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}var Hv=0,$g=0,lg=0,gH=1e3,pw,zg,gw=0,Uh=0,m_=0,H0=typeof performance=="object"&&performance.now?performance:Date,mH=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function yH(){return Uh||(mH(gwe),Uh=H0.now()+m_)}function gwe(){Uh=0}function sT(){this._call=this._time=this._next=null}sT.prototype=bH.prototype={constructor:sT,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?yH():+t)+(e==null?0:+e),!this._next&&zg!==this&&(zg?zg._next=this:pw=this,zg=this),this._call=r,this._time=t,lT()},stop:function(){this._call&&(this._call=null,this._time=1/0,lT())}};function bH(r,e,t){var n=new sT;return n.restart(r,e,t),n}function mwe(){yH(),++Hv;for(var r=pw,e;r;)(e=Uh-r._time)>=0&&r._call.call(null,e),r=r._next;--Hv}function FB(){Uh=(gw=H0.now())+m_,Hv=$g=0;try{mwe()}finally{Hv=0,bwe(),Uh=0}}function ywe(){var r=H0.now(),e=r-gw;e>gH&&(m_-=e,gw=r)}function bwe(){for(var r,e=pw,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:pw=t);zg=r,lT(n)}function lT(r){if(!Hv){$g&&($g=clearTimeout($g));var e=r-Uh;e>24?(r<1/0&&($g=setTimeout(FB,r-H0.now()-m_)),lg&&(lg=clearInterval(lg))):(lg||(gw=H0.now(),lg=setInterval(ywe,gH)),Hv=1,mH(FB))}}const xwe=1664525,wwe=1013904223,$B=4294967296;function Ewe(){let r=1;return()=>(r=(xwe*r+wwe)%$B)/$B}function _we(r){return r.x}function Swe(r){return r.y}var Mwe=10,Cwe=Math.PI*(3-Math.sqrt(5));function Awe(r){var e,t=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,s=new Map,l=bH(c),u=pH("tick","end"),f=Ewe();r==null&&(r=[]);function c(){h(),u.call("tick",e),t<n&&(l.stop(),u.call("end",e))}function h(p){var g,m=r.length,b;p===void 0&&(p=1);for(var y=0;y<p;++y)for(t+=(a-t)*i,s.forEach(function(x){x(t)}),g=0;g<m;++g)b=r[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return e}function d(){for(var p=0,g=r.length,m;p<g;++p){if(m=r[p],m.index=p,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var b=Mwe*Math.sqrt(.5+p),y=p*Cwe;m.x=b*Math.cos(y),m.y=b*Math.sin(y)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function v(p){return p.initialize&&p.initialize(r,f),p}return d(),e={tick:h,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(p){return arguments.length?(r=p,d(),s.forEach(v),e):r},alpha:function(p){return arguments.length?(t=+p,e):t},alphaMin:function(p){return arguments.length?(n=+p,e):n},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(a=+p,e):a},velocityDecay:function(p){return arguments.length?(o=1-p,e):1-o},randomSource:function(p){return arguments.length?(f=p,s.forEach(v),e):f},force:function(p,g){return arguments.length>1?(g==null?s.delete(p):s.set(p,v(g)),e):s.get(p)},find:function(p,g,m){var b=0,y=r.length,x,w,E,_,S;for(m==null?m=1/0:m*=m,b=0;b<y;++b)_=r[b],x=p-_.x,w=g-_.y,E=x*x+w*w,E<m&&(S=_,m=E);return S},on:function(p,g){return arguments.length>1?(u.on(p,g),e):u.on(p)}}}function Twe(){var r,e,t,n,i=Ii(-30),a,o=1,s=1/0,l=.81;function u(d){var v,p=r.length,g=p_(r,_we,Swe).visitAfter(c);for(n=d,v=0;v<p;++v)e=r[v],g.visit(h)}function f(){if(r){var d,v=r.length,p;for(a=new Array(v),d=0;d<v;++d)p=r[d],a[p.index]=+i(p,d,r)}}function c(d){var v=0,p,g,m=0,b,y,x;if(d.length){for(b=y=x=0;x<4;++x)(p=d[x])&&(g=Math.abs(p.value))&&(v+=p.value,m+=g,b+=g*p.x,y+=g*p.y);d.x=b/m,d.y=y/m}else{p=d,p.x=p.data.x,p.y=p.data.y;do v+=a[p.data.index];while(p=p.next)}d.value=v}function h(d,v,p,g){if(!d.value)return!0;var m=d.x-e.x,b=d.y-e.y,y=g-v,x=m*m+b*b;if(y*y/l<x)return x<s&&(m===0&&(m=Lf(t),x+=m*m),b===0&&(b=Lf(t),x+=b*b),x<o&&(x=Math.sqrt(o*x)),e.vx+=m*d.value*n/x,e.vy+=b*d.value*n/x),!0;if(d.length||x>=s)return;(d.data!==e||d.next)&&(m===0&&(m=Lf(t),x+=m*m),b===0&&(b=Lf(t),x+=b*b),x<o&&(x=Math.sqrt(o*x)));do d.data!==e&&(y=a[d.data.index]*n/x,e.vx+=m*y,e.vy+=b*y);while(d=d.next)}return u.initialize=function(d,v){r=d,t=v,f()},u.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Ii(+d),f(),u):i},u.distanceMin=function(d){return arguments.length?(o=d*d,u):Math.sqrt(o)},u.distanceMax=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function Owe(r,e,t){var n,i=Ii(.1),a,o;typeof r!="function"&&(r=Ii(+r)),e==null&&(e=0),t==null&&(t=0);function s(u){for(var f=0,c=n.length;f<c;++f){var h=n[f],d=h.x-e||1e-6,v=h.y-t||1e-6,p=Math.sqrt(d*d+v*v),g=(o[f]-p)*a[f]*u/p;h.vx+=d*g,h.vy+=v*g}}function l(){if(n){var u,f=n.length;for(a=new Array(f),o=new Array(f),u=0;u<f;++u)o[u]=+r(n[u],u,n),a[u]=isNaN(o[u])?0:+i(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:Ii(+u),l(),s):i},s.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Ii(+u),l(),s):r},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(t=+u,s):t},s}function kwe(r){var e=Ii(.1),t,n,i;typeof r!="function"&&(r=Ii(r==null?0:+r));function a(s){for(var l=0,u=t.length,f;l<u;++l)f=t[l],f.vx+=(i[l]-f.x)*n[l]*s}function o(){if(t){var s,l=t.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Ii(+s),o(),a):e},a.x=function(s){return arguments.length?(r=typeof s=="function"?s:Ii(+s),o(),a):r},a}function Iwe(r){var e=Ii(.1),t,n,i;typeof r!="function"&&(r=Ii(r==null?0:+r));function a(s){for(var l=0,u=t.length,f;l<u;++l)f=t[l],f.vy+=(i[l]-f.y)*n[l]*s}function o(){if(t){var s,l=t.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Ii(+s),o(),a):e},a.y=function(s){return arguments.length?(r=typeof s=="function"?s:Ii(+s),o(),a):r},a}const Lwe=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:swe,forceCollide:fwe,forceLink:hwe,forceManyBody:Twe,forceRadial:Owe,forceSimulation:Awe,forceX:kwe,forceY:Iwe},Symbol.toStringTag,{value:"Module"})),VI=jl(Lwe);var HI={},Pwe=Re&&Re.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Dwe=Re&&Re.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Nwe=Re&&Re.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Pwe(e,r,t);return Dwe(e,r),e};Object.defineProperty(HI,"__esModule",{value:!0});var Nd=Nwe(VI),R1=Vn();function Rwe(){function r(Q){return function(){return Q}}var e=function(Q){return Q.cluster},t=r(1),n=r(-1),i=r(100),a=r(.1),o=[0,0],s=[],l={},u=[],f=100,c=100,h={none:{x:0,y:0}},d=[],v,p="force",g=!0,m=.1;function b(Q){if(!g)return b;v.tick(),S();for(var ye=0,Le=s.length,Fe=void 0,_e=Q*m;ye<Le;++ye)Fe=s[ye],Fe.vx+=(h[e(Fe)].x-Fe.x)*_e,Fe.vy+=(h[e(Fe)].y-Fe.y)*_e}function y(){s&&x()}function x(){if(!(!s||!s.length)){if(e(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Q=w();v=Nd.forceSimulation(Q.nodes).force("x",Nd.forceX(f).strength(.1)).force("y",Nd.forceY(c).strength(.1)).force("collide",Nd.forceCollide(function(ye){return ye.r}).iterations(4)).force("charge",Nd.forceManyBody().strength(n)).force("links",Nd.forceLink(Q.nodes.length?Q.links:[]).distance(i).strength(a)),d=v.nodes(),S()}}function w(){var Q=[],ye=[],Le={},Fe=[],_e={},Ve=[];return _e=E(s),Ve=_(u),Fe=Object.keys(_e),Fe.forEach(function(Xe,vt){var bt=_e[Xe];Q.push({id:Xe,size:bt.count,r:Math.sqrt(bt.sumforceNodeSize/Math.PI)}),Le[Xe]=vt}),Ve.forEach(function(Xe){var vt=(0,R1.getEdgeTerminal)(Xe,"source"),bt=(0,R1.getEdgeTerminal)(Xe,"target"),te=Le[vt],H=Le[bt];te!==void 0&&H!==void 0&&ye.push({source:te,target:H,count:Xe.count})}),{nodes:Q,links:ye}}function E(Q){var ye={};return Q.forEach(function(Le){var Fe=e(Le);ye[Fe]||(ye[Fe]={count:0,sumforceNodeSize:0})}),Q.forEach(function(Le){var Fe=e(Le),_e=t(Le),Ve=ye[Fe];Ve.count=Ve.count+1,Ve.sumforceNodeSize=Ve.sumforceNodeSize+Math.PI*(_e*_e)*1.3,ye[Fe]=Ve}),ye}function _(Q){var ye={},Le=[];Q.forEach(function(_e){var Ve=C(_e),Xe=0;ye[Ve]!==void 0&&(Xe=ye[Ve]),Xe+=1,ye[Ve]=Xe});var Fe=Object.entries(ye);return Fe.forEach(function(_e){var Ve=_e[0],Xe=_e[1],vt=Ve.split("~")[0],bt=Ve.split("~")[1];vt!==void 0&&bt!==void 0&&Le.push({source:vt,target:bt,count:Xe})}),Le}function S(){return h={none:{x:0,y:0}},d.forEach(function(Q){h[Q.id]={x:Q.x-o[0],y:Q.y-o[1]}}),h}function C(Q){var ye=(0,R1.getEdgeTerminal)(Q,"source"),Le=(0,R1.getEdgeTerminal)(Q,"target"),Fe=e(l[ye]),_e=e(l[Le]);return Fe<=_e?"".concat(Fe,"~").concat(_e):"".concat(_e,"~").concat(Fe)}function M(Q){l={},Q.forEach(function(ye){l[ye.id]=ye})}function T(Q){return arguments.length?(p=Q,y(),b):p}function A(Q){return arguments.length?typeof Q=="string"?(e=function(ye){return ye[Q]},b):(e=Q,b):e}function O(Q){return arguments.length?(g=Q,b):g}function L(Q){return arguments.length?(m=Q,b):m}function N(Q){return arguments.length?(f=Q,b):f}function P(Q){return arguments.length?(c=Q,b):c}function R(Q){return arguments.length?(M(Q||[]),s=Q||[],b):s}function G(Q){return arguments.length?(u=Q||[],y(),b):u}function D(Q){return arguments.length?(typeof Q=="function"?t=Q:t=r(+Q),y(),b):t}function B(Q){return arguments.length?(typeof Q=="function"?n=Q:n=r(+Q),y(),b):n}function Y(Q){return arguments.length?(typeof Q=="function"?i=Q:i=r(+Q),y(),b):i}function ee(Q){return arguments.length?(typeof Q=="function"?a=Q:a=r(+Q),y(),b):a}function ne(Q){return arguments.length?(o=Q,b):o}return b.initialize=function(Q){s=Q,y()},b.template=T,b.groupBy=A,b.enableGrouping=O,b.strength=L,b.centerX=N,b.centerY=P,b.nodes=R,b.links=G,b.forceNodeSize=D,b.nodeSize=b.forceNodeSize,b.forceCharge=B,b.forceLinkDistance=Y,b.forceLinkStrength=ee,b.offset=ne,b.getFocis=S,b}HI.default=Rwe;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.FORCE_LAYOUT_TYPE_MAP=Lu.LAYOUT_MESSAGE=void 0;Lu.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};Lu.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var Bwe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fwe=Re&&Re.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),$we=Re&&Re.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),zwe=Re&&Re.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Fwe(e,r,t);return $we(e,r),e},Gwe=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(g_,"__esModule",{value:!0});g_.ForceLayout=void 0;var Rd=zwe(VI),jwe=Gwe(HI),Wc=Vn(),Uwe=ei,Wwe=Lu,Vwe=function(r){Bwe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,t&&n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){var n=this;n.nodes=t.nodes||[];var i=t.edges||[];n.edges=i.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(l){s.indexOf(l)>-1||(o[l]=a[l])}),o}),n.ticking=!1},e.prototype.execute=function(t){var n=this,i=n.nodes,a=n.edges;if(!n.ticking){var o=n.forceSimulation,s=n.alphaMin,l=n.alphaDecay,u=n.alpha;if(o){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(i),n.clusterForce.links(a)),o.nodes(i),a&&n.edgeForce)n.edgeForce.links(a);else if(a&&!n.edgeForce){var h=Rd.forceLink().id(function(g){return g.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}}n.preventOverlap&&n.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var f=Rd.forceManyBody();if(n.nodeStrength&&f.strength(n.nodeStrength),o=Rd.forceSimulation().nodes(i),n.clustering){var c=(0,jwe.default)();c.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),a&&c.links(a),i&&c.nodes(i),c.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=c,o.force("group",c)}if(o.force("center",Rd.forceCenter(n.center[0],n.center[1])).force("charge",f).alpha(u).alphaDecay(l).alphaMin(s),n.preventOverlap&&n.overlapProcess(o),a){var h=Rd.forceLink().id(function(p){return p.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}if(n.workerEnabled&&!Xwe()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)o.on("tick",function(){n.tick()}).on("end",function(){n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{o.stop();for(var d=Hwe(o),v=1;v<=d;v++)o.tick(),postMessage({nodes:i,currentTick:v,totalTicks:d,type:Wwe.LAYOUT_MESSAGE.TICK},void 0);n.ticking=!1}n.forceSimulation=o,n.ticking=!0}catch(p){n.ticking=!1,console.warn(p)}}},e.prototype.overlapProcess=function(t){var n=this,i=n.nodeSize,a=n.nodeSpacing,o,s,l=n.collideStrength;if((0,Wc.isNumber)(a)?s=function(){return a}:(0,Wc.isFunction)(a)?s=a:s=function(){return 0},!i)o=function(h){if(h.size){if((0,Wc.isArray)(h.size)){var d=h.size[0]>h.size[1]?h.size[0]:h.size[1];return d/2+s(h)}if((0,Wc.isObject)(h.size)){var d=h.size.width>h.size.height?h.size.width:h.size.height;return d/2+s(h)}return h.size/2+s(h)}return 10+s(h)};else if((0,Wc.isFunction)(i))o=function(h){var d=i(h);return d+s(h)};else if((0,Wc.isArray)(i)){var u=i[0]>i[1]?i[0]:i[1],f=u/2;o=function(h){return f+s(h)}}else if((0,Wc.isNumber)(i)){var c=i/2;o=function(h){return c+s(h)}}else o=function(){return 10};t.force("collisionForce",Rd.forceCollide(o).strength(l))},e.prototype.updateCfg=function(t){var n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)},e.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},e}(Uwe.Base);g_.ForceLayout=Vwe;function Hwe(r){var e=r.alphaMin(),t=r.alphaTarget(),n=r.alpha(),i=Math.log((e-t)/(n-t))/Math.log(1-r.alphaDecay()),a=Math.ceil(i);return a}function Xwe(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}(function(r){var e=Re&&Re.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Re&&Re.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(g_,r)})(WI);var Vm={},Ywe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vm,"__esModule",{value:!0});Vm.CircularLayout=void 0;var Kwe=ei,bl=Vn();function qwe(r,e,t,n){r.forEach(function(i,a){r[a].children=[],r[a].parent=[]}),n?e.forEach(function(i){var a=(0,bl.getEdgeTerminal)(i,"source"),o=(0,bl.getEdgeTerminal)(i,"target"),s=0;a&&(s=t[a]);var l=0;o&&(l=t[o]);var u=r[s].children,f=r[l].parent;u.push(r[l].id),f.push(r[s].id)}):e.forEach(function(i){var a=(0,bl.getEdgeTerminal)(i,"source"),o=(0,bl.getEdgeTerminal)(i,"target"),s=0;a&&(s=t[a]);var l=0;o&&(l=t[o]);var u=r[s].children,f=r[l].children;u.push(r[l].id),f.push(r[s].id)})}function Zwe(r,e,t){for(var n=t.length,i=0;i<n;i++){var a=(0,bl.getEdgeTerminal)(t[i],"source"),o=(0,bl.getEdgeTerminal)(t[i],"target");if(r.id===a&&e.id===o||e.id===a&&r.id===o)return!0}return!1}function Qwe(r,e){var t=r.degree,n=e.degree;return t<n?-1:t>n?1:0}var Jwe=function(r){Ywe(e,r);function e(t){var n=r.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,n=this,i=n.nodes,a=n.edges,o=i.length;if(o===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window<"u"&&(n.width=window.innerWidth),!n.height&&typeof window<"u"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(o===1){i[0].x=s[0],i[0].y=s[1],n.onLayoutEnd&&n.onLayoutEnd();return}var l=n.radius,u=n.startRadius,f=n.endRadius,c=n.divisions,h=n.startAngle,d=n.endAngle,v=n.angleRatio,p=n.ordering,g=n.clockwise,m=n.nodeSpacing,b=n.nodeSize,y=(d-h)/o,x={};i.forEach(function(P,R){x[P.id]=R}),n.nodeMap=x;var w=(0,bl.getDegree)(i.length,x,a);if(n.degrees=w,m){var E=(0,bl.getFuncByUnknownType)(10,m),_=(0,bl.getFuncByUnknownType)(10,b),S=-1/0;i.forEach(function(P){var R=_(P);S<R&&(S=R)});var C=0;i.forEach(function(P,R){R===0?C+=S||10:C+=(E(P)||0)+(S||10)}),l=C/(2*Math.PI)}else!l&&!u&&!f?l=n.height>n.width?n.width/2:n.height/2:!u&&f?u=f:u&&!f&&(f=u);var M=y*v,T=[];p==="topology"?T=n.topologyOrdering():p==="topology-directed"?T=n.topologyOrdering(!0):p==="degree"?T=n.degreeOrdering():T=i;for(var A=Math.ceil(o/c),O=0;O<o;++O){var L=l;!L&&u!==null&&f!==null&&(L=u+O*(f-u)/(o-1)),L||(L=10+O*100/(o-1));var N=h+O%A*M+2*Math.PI/c*Math.floor(O/A);g||(N=d-O%A*M-2*Math.PI/c*Math.floor(O/A)),T[O].x=s[0]+Math.cos(N)*L,T[O].y=s[1]+Math.sin(N)*L,T[O].weight=w[O].all}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:T,edges:this.edges}},e.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var n=this,i=n.degrees,a=n.edges,o=n.nodes,s=(0,bl.clone)(o),l=n.nodeMap,u=[s[0]],f=[o[0]],c=[],h=o.length;c[0]=!0,qwe(s,a,l,t);var d=0;return s.forEach(function(v,p){if(p!==0)if((p===h-1||i[p].all!==i[p+1].all||Zwe(u[d],v,a))&&!c[p])u.push(v),f.push(o[l[v.id]]),c[p]=!0,d++;else{for(var g=u[d].children,m=!1,b=0;b<g.length;b++){var y=l[g[b]];if(i[y].all===i[p].all&&!c[y]){u.push(s[y]),f.push(o[l[s[y].id]]),c[y]=!0,m=!0;break}}for(var x=0;!m&&(c[x]||(u.push(s[x]),f.push(o[l[s[x].id]]),c[x]=!0,m=!0),x++,x!==h););}}),f},e.prototype.degreeOrdering=function(){var t=this,n=t.nodes,i=[],a=t.degrees;return n.forEach(function(o,s){o.degree=a[s].all,i.push(o)}),i.sort(Qwe),i},e.prototype.getType=function(){return"circular"},e}(Kwe.Base);Vm.CircularLayout=Jwe;var Cp={},XI={},YI={},KI={},qI={},ZI={};Object.defineProperty(ZI,"__esModule",{value:!0});var eEe=function(r,e){if(r!=="next"&&r!=="prev")return e},zB=function(r){r.prev.next=r.next,r.next.prev=r.prev,delete r.next,delete r.prev},tEe=function(){function r(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return r.prototype.dequeue=function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return zB(t),t},r.prototype.enqueue=function(e){var t=this.shortcut;e.prev&&e.next&&zB(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t},r.prototype.toString=function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,eEe)),n=n==null?void 0:n.prev;return"[".concat(e.join(", "),"]")},r}();ZI.default=tEe;var wv;(function(r){r.DEFAULT_EDGE_NAME="\0",r.GRAPH_NODE="\0",r.EDGE_KEY_DELIM=""})(wv||(wv={}));function GB(r,e){var t=r.get(e)||0;r.set(e,t+1)}function jB(r,e){var t=r.get(e);t!==void 0&&(t=t-1,t>0?r.set(e,t):r.delete(e))}function xH(r,e,t,n){var i=String(e),a=String(t);if(!r&&i>a){var o=i;i=a,a=o}return i+wv.EDGE_KEY_DELIM+a+wv.EDGE_KEY_DELIM+(n===void 0?wv.DEFAULT_EDGE_NAME:n)}function UB(r,e,t,n){var i=String(e),a=String(t),o={v:e,w:t};if(!r&&i>a){var s=o.v;o.v=o.w,o.w=s}return n!==void 0&&(o.name=n),o}function mM(r,e){return xH(r,e.v,e.w,e.name)}function WB(r){return typeof r=="function"}var rEe=function(e){return e.nodes().map(function(t){var n=e.node(t),i=e.parent(t),a={id:t,value:n,parent:i};return a.value===void 0&&delete a.value,a.parent===void 0&&delete a.parent,a})},nEe=function(e){return e.edges().map(function(t){var n=e.edge(t),i={v:t.v,w:t.w,value:n,name:t.name};return i.name===void 0&&delete i.name,i.value===void 0&&delete i.value,i})},iEe=function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:rEe(e),edges:nEe(e),value:e.graph()};return t.value===void 0&&delete t.value,t},aEe=function(e){var t=new od(e.options);return e.value!==void 0&&t.setGraph(e.value),e.nodes.forEach(function(n){t.setNode(n.id,n.value),n.parent&&t.setParent(n.id,n.parent)}),e.edges.forEach(function(n){t.setEdge(n.v,n.w,n.value,n.name)}),t};function VB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function HB(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VB(Object(t),!0).forEach(function(n){oEe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):VB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function oEe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sEe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function XB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function lEe(r,e,t){return e&&XB(r.prototype,e),t&&XB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var uEe={compound:!1,multigraph:!1,directed:!0},od=function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sEe(this,r),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=wv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(i){return e.label=i,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(i){return WB(i)?e.defaultNodeLabelFn=i:e.defaultNodeLabelFn=function(){return i},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(i){return e.nodesLabelMap.get(i)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.inEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.sinks=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.outEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.setNodes=function(i,a){return i.map(function(o){return e.setNode(o,a)}),e},this.hasNode=function(i){return e.nodesLabelMap.has(i)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(i){if(e.isCompound()){var a,o=(a=e.parentMap)===null||a===void 0?void 0:a.get(i);if(o!==e.GRAPH_NODE)return o}},this.removeFromParentsChildList=function(i){var a=e.parentMap.get(i);e.childrenMap.get(a).delete(i)},this.setParent=function(i,a){var o,s;e.checkCompound();for(var l=a===void 0?e.GRAPH_NODE:a,u=e.parent(l);u;){if(i===u)throw new Error("Setting "+a+" as parent of "+i+" would create a cycle");u=e.parent(u)}a&&e.setNode(a),e.setNode(i),e.removeFromParentsChildList(i),(o=e.parentMap)===null||o===void 0||o.set(i,l);var f=e.childrenMap.get(l);return f.set(i,!0),(s=e.childrenMap)===null||s===void 0||s.set(l,f),e},this.children=function(i){var a=i===void 0?e.GRAPH_NODE:i;if(e.isCompound()){var o,s=(o=e.childrenMap)===null||o===void 0?void 0:o.get(a);return s?Array.from(s.keys()):void 0}if(a===e.GRAPH_NODE)return e.nodes();if(i&&e.hasNode(i))return[]},this.predecessors=function(i){var a=e.predecessorsMap.get(i);return a?Array.from(a.keys()):void 0},this.successors=function(i){var a=e.successorsMap.get(i);return a?Array.from(a.keys()):void 0},this.neighbors=function(i){var a;if(e.hasNode(i))return Array.from(new Set((a=e.predecessors(i))===null||a===void 0?void 0:a.concat(e.successors(i))))},this.isLeaf=function(i){var a;if(e.isDirected()){var o;return!(!((o=e.successors(i))===null||o===void 0)&&o.length)}return!(!((a=e.neighbors(i))===null||a===void 0)&&a.length)},this.filterNodes=function(i){var a=e.directed,o=e.multigraph,s=e.compound,l=new r({directed:a,multigraph:o,compound:s});if(l.setGraph(e.graph()),e.nodes().forEach(function(f){i(f)&&l.setNode(f,e.node(f))}),e.edges().forEach(function(f){l.hasNode(f.v)&&l.hasNode(f.w)&&l.setEdgeObj(f,e.edge(f))}),s){var u=function(c){for(var h=e.parent(c);h!==void 0&&!l.hasNode(h);)h=e.parent(h);return h};l.nodes().forEach(function(f){l.setParent(f,u(f))})}return l},this.setDefaultEdgeLabel=function(i){return WB(i)?e.defaultEdgeLabelFn=i:e.defaultEdgeLabelFn=function(){return i},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(i,a){return e.setEdge(i.v,i.w,a,i.name)},this.setPath=function(i,a){return i.reduce(function(o,s){return e.setEdge(o,s,a),s}),e},this.edgeFromArgs=function(i,a,o){return e.edge({v:i,w:a,name:o})},this.edge=function(i){return e.edgesLabelsMap.get(mM(e.isDirected(),i))},this.hasEdge=function(i,a,o){return e.edgesLabelsMap.has(mM(e.isDirected(),{v:i,w:a,name:o}))},this.removeEdgeObj=function(i){var a=i.v,o=i.w,s=i.name;return e.removeEdge(a,o,s)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(i,a){var o=e.inEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.v===a})},this.outEdges=function(i,a){var o=e.outEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.w===a})},this.nodeEdges=function(i,a){var o;if(e.hasNode(i))return(o=e.inEdges(i,a))===null||o===void 0?void 0:o.concat(e.outEdges(i,a))},this.toJSON=function(){return iEe(e)},this.nodeInDegree=function(i){var a=e.inEdgesMap.get(i);return a?a.size:0},this.nodeOutDegree=function(i){var a=e.outEdgesMap.get(i);return a?a.size:0},this.nodeDegree=function(i){return e.nodeInDegree(i)+e.nodeOutDegree(i)},this.source=function(i){return i.v},this.target=function(i){return i.w};var n=HB(HB({},uEe),t);this.compound=n.compound,this.directed=n.directed,this.multigraph=n.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return lEe(r,[{key:"setNode",value:function(t,n){var i=this.nodesLabelMap,a=this.defaultNodeLabelFn,o=this.isCompound,s=this.parentMap,l=this.childrenMap,u=this.inEdgesMap,f=this.outEdgesMap,c=this.predecessorsMap,h=this.successorsMap;if(i.has(t))return n!==void 0&&i.set(t,n),this;if(i.set(t,n||a(t)),o()){var d;s==null||s.set(t,this.GRAPH_NODE),l==null||l.set(t,new Map),l!=null&&l.has(this.GRAPH_NODE)||l==null||l.set(this.GRAPH_NODE,new Map),l==null||(d=l.get(this.GRAPH_NODE))===null||d===void 0||d.set(t,!0)}return[u,f,c,h].forEach(function(v){return v.set(t,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(t){var n=this;if(this.hasNode(t)){var i=function(g){n.removeEdge(g.v,g.w,g.name)},a=this.inEdgesMap,o=this.outEdgesMap,s=this.predecessorsMap,l=this.successorsMap,u=this.nodesLabelMap;if(this.isCompound()){var f,c,h;this.removeFromParentsChildList(t),(f=this.parentMap)===null||f===void 0||f.delete(t),(c=this.children(t))===null||c===void 0||c.forEach(function(p){return n.setParent(p)}),(h=this.childrenMap)===null||h===void 0||h.delete(t)}var d=a.get(t),v=o.get(t);Array.from(d.values()).forEach(function(p){return i(p)}),Array.from(v.values()).forEach(function(p){return i(p)}),u.delete(t),a.delete(t),o.delete(t),s.delete(t),l.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,n,i,a){var o,s,l=UB(this.isDirected(),t,n,a),u=mM(this.isDirected(),l),f=l.v,c=l.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,i),this;if(a!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(c),this.edgesLabelsMap.set(u,i||this.defaultEdgeLabelFn(f,c,a)),Object.freeze(l),this.edgesMap.set(u,l);var h=this.predecessorsMap.get(c),d=this.successorsMap.get(f);return GB(h,f),GB(d,c),(o=this.inEdgesMap.get(c))===null||o===void 0||o.set(u,l),(s=this.outEdgesMap.get(f))===null||s===void 0||s.set(u,l),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,n,i){var a=xH(this.isDirected(),t,n,i),o=this.edgesMap.get(a);if(o){var s=UB(this.isDirected(),t,n,i),l=s.v,u=s.w;this.edgesLabelsMap.delete(a),this.edgesMap.delete(a);var f=this.predecessorsMap.get(u),c=this.successorsMap.get(l);jB(f,l),jB(c,u),this.inEdgesMap.get(u).delete(a),this.outEdgesMap.get(l).delete(a),this.edgeCountNum-=1}return this}}]),r}();od.fromJSON=aEe;function uT(r){"@babel/helpers - typeof";return uT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uT(r)}function fEe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function YB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function cEe(r,e,t){return e&&YB(r.prototype,e),t&&YB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function gh(){return typeof Reflect<"u"&&Reflect.get?gh=Reflect.get:gh=function(e,t,n){var i=hEe(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},gh.apply(this,arguments)}function hEe(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=Su(r),r!==null););return r}function dEe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&fT(r,e)}function fT(r,e){return fT=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fT(r,e)}function vEe(r){var e=mEe();return function(){var n=Su(r),i;if(e){var a=Su(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return pEe(this,i)}}function pEe(r,e){if(e&&(uT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gEe(r)}function gEe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function mEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Su(r){return Su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Su(r)}var yEe=function(r){dEe(t,r);var e=vEe(t);function t(){var n;fEe(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a)),n.eventPool={},n}return cEe(t,[{key:"appendEvent",value:function(i,a){this.eventPool[i]||(this.eventPool[i]=[]),this.eventPool[i].push(a)}},{key:"removeEvent",value:function(i,a){if(this.eventPool[i]){var o=this.eventPool[i].indexOf(a);o>-1&&this.eventPool[i].splice(o,1)}}},{key:"emitEvent",value:function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];this.eventPool[i]&&this.eventPool[i].forEach(function(l){l.apply(void 0,o)})}},{key:"setNode",value:function(i,a){return gh(Su(t.prototype),"setNode",this).call(this,i,a),this.emitEvent("nodeAdd",i,a),this}},{key:"removeNode",value:function(i){return gh(Su(t.prototype),"removeNode",this).call(this,i),this.emitEvent("nodeRemove",i),this}},{key:"setEdge",value:function(i,a,o,s){return gh(Su(t.prototype),"setEdge",this).call(this,i,a,o,s),this.emitEvent("edgeAdd",i,a,o,s),this}},{key:"removeEdge",value:function(i,a,o){return gh(Su(t.prototype),"removeEdge",this).call(this,i,a,o),this.emitEvent("edgeRemove",i,a,o),this}}]),t}(od);function KB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function bEe(r,e,t){return e&&KB(r.prototype,e),t&&KB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function xEe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var wH=bEe(function r(){var e=this;xEe(this,r),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(t){return t.key})},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var n=e.keyIndice.get(t);if(n!==void 0)return e.arr[n].priority},this.swap=function(t,n){var i=e.arr,a=e.keyIndice,o=[i[t],i[n]],s=o[0],l=o[1];i[t]=l,i[n]=s,a.set(s.key,n),a.set(l.key,t)},this.innerDecrease=function(t){for(var n=e.arr,i=n[t].priority,a,o=t;o!==0;){var s;if(a=o>>1,((s=n[a])===null||s===void 0?void 0:s.priority)<i)break;e.swap(o,a),o=a}},this.heapify=function(t){var n=e.arr,i=t<<1,a=i+1,o=t;i<n.length&&(o=n[i].priority<n[o].priority?i:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==t&&(e.swap(t,o),e.heapify(o)))},this.min=function(){if(e.size()===0)throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var i=e.keyIndice,a=e.arr;if(!i.has(t)){var o=a.length;return i.set(t,o),a.push({key:t,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var i=e.keyIndice.get(t);if(n>e.arr[i].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[i].priority," New: ").concat(n));e.arr[i].priority=n,e.innerDecrease(i)}}),wEe=function(e,t){var n=new od,i=new Map,a=new wH,o;function s(f){var c=f.v===o?f.w:f.v,h=a.priority(c);if(h!==void 0){var d=t(f);d<h&&(i.set(c,o),a.decrease(c,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(f){a.add(f,Number.POSITIVE_INFINITY),n.setNode(f)}),a.decrease(e.nodes()[0],0);for(var l=!1;a.size()>0;){var u;if(o=a.removeMin(),i.has(o))n.setEdge(o,i.get(o));else{if(l)throw new Error("Input graph is not connected: "+e.graph());l=!0}(u=e.nodeEdges(o))===null||u===void 0||u.forEach(s)}return n},EEe=function(e){var t=new Set,n=[],i=e.nodes();return i.forEach(function(a){for(var o=[],s=[a];s.length>0;){var l=s.pop();if(!t.has(l)){var u,f;t.add(l),o.push(l),(u=e.successors(l))===null||u===void 0||u.forEach(function(c){return s.push(c)}),(f=e.predecessors(l))===null||f===void 0||f.forEach(function(c){return s.push(c)})}}o.length&&n.push(o)}),n},_Ee=function r(e,t,n,i,a,o){i.includes(t)||(i.push(t),n||o.push(t),a(t).forEach(function(s){return r(e,s,n,i,a,o)}),n&&o.push(t))},QI=function(e,t,n){var i=Array.isArray(t)?t:[t],a=function(u){return e.isDirected()?e.successors(u):e.neighbors(u)},o=[],s=[];return i.forEach(function(l){if(e.hasNode(l))_Ee(e,l,n==="post",s,a,o);else throw new Error("Graph does not have node: "+l)}),o};function SEe(r,e){return TEe(r)||AEe(r,e)||CEe(r,e)||MEe()}function MEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CEe(r,e){if(r){if(typeof r=="string")return qB(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qB(r,e)}}function qB(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function AEe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function TEe(r){if(Array.isArray(r))return r}var OEe=function(){return 1},EH=function(e,t,n,i){return kEe(e,t,n||OEe,i||function(a){return e.outEdges(a)})},kEe=function(e,t,n,i){var a=new Map,o=new wH,s,l,u=function(h){var d=h.v!==s?h.v:h.w,v=a.get(d),p=n(h),g=l.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+p);g<v.distance&&(v.distance=g,v.predecessor=s,o.decrease(d,g))};for(e.nodes().forEach(function(c){var h=c===t?0:Number.POSITIVE_INFINITY;a.set(c,{distance:h}),o.add(c,h)});o.size()>0&&(s=o.removeMin(),l=a.get(s),!(l&&l.distance===Number.POSITIVE_INFINITY));)i(s).forEach(u);var f={};return Array.from(a.entries()).forEach(function(c){var h=SEe(c,2),d=h[0],v=h[1];return f[String(d)]=v,f}),f},IEe=function(e,t,n){var i={};return e.nodes().forEach(function(a){return i[String(a)]=EH(e,a,t,n),i}),i},_H=function(e){var t=0,n=[],i=new Map,a=[];function o(s){var l,u={onStack:!0,lowlink:t,index:t};if(i.set(s,u),t+=1,n.push(s),(l=e.successors(s))===null||l===void 0||l.forEach(function(d){var v;if(i.has(d)){if(!((v=i.get(d))===null||v===void 0)&&v.onStack){var g=i.get(d);u.lowlink=Math.min(u.lowlink,g.index)}}else{o(d);var p=i.get(d);u.lowlink=Math.min(u.lowlink,p.lowlink)}}),u.lowlink===u.index){var f=[],c;do{c=n.pop();var h=i.get(c);h.onStack=!1,f.push(c)}while(s!==c);a.push(f)}}return e.nodes().forEach(function(s){i.has(s)||o(s)}),a},LEe=function(e){return _H(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})};function cT(r){"@babel/helpers - typeof";return cT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cT(r)}function ZB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function PEe(r,e,t){return e&&ZB(r.prototype,e),t&&ZB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function DEe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function NEe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&X0(r,e)}function REe(r){var e=SH();return function(){var n=Y0(r),i;if(e){var a=Y0(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return BEe(this,i)}}function BEe(r,e){if(e&&(cT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FEe(r)}function FEe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hT(r){var e=typeof Map=="function"?new Map:void 0;return hT=function(n){if(n===null||!$Ee(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return ox(n,arguments,Y0(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),X0(i,n)},hT(r)}function ox(r,e,t){return SH()?ox=Reflect.construct:ox=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&X0(u,o.prototype),u},ox.apply(null,arguments)}function SH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $Ee(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function X0(r,e){return X0=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},X0(r,e)}function Y0(r){return Y0=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Y0(r)}var dT=function(r){NEe(t,r);var e=REe(t);function t(){return DEe(this,t),e.apply(this,arguments)}return PEe(t)}(hT(Error));function MH(r){var e=new Set,t=new Set,n=[];function i(a){if(t.has(a))throw new dT;if(!e.has(a)){var o;t.add(a),e.add(a),(o=r.predecessors(a))===null||o===void 0||o.forEach(i),t.delete(a),n.push(a)}}if(r.sinks().forEach(i),e.size!==r.nodeCount())throw new dT;return n}var zEe=function(e){try{MH(e)}catch(t){if(t instanceof dT)return!1;throw t}return!0},GEe=function(e,t){return QI(e,t,"post")},jEe=function(e,t){return QI(e,t,"pre")},UEe=function(){return 1};function WEe(r,e,t){return VEe(r,e||UEe,t||function(n){return r.outEdges(n)})}function VEe(r,e,t){var n={},i=r.nodes();return i.forEach(function(a){var o=String(a);n[o]={},n[o][o]={distance:0},i.forEach(function(s){a!==s&&(n[o][String(s)]={distance:Number.POSITIVE_INFINITY})}),t(a).forEach(function(s){var l=s.v===a?s.w:s.v,u=e(s);n[o][String(l)]={distance:u,predecessor:a}})}),i.forEach(function(a){var o=String(a),s=n[o];i.forEach(function(l){var u=String(l),f=n[u];i.forEach(function(c){var h=String(c),d=f[o],v=s[h],p=f[h],g=d.distance+v.distance;g<p.distance&&(p.distance=g,p.predecessor=v.predecessor)})})}),n}const HEe=Object.freeze(Object.defineProperty({__proto__:null,components:EEe,dfs:QI,dijkstra:EH,dijkstraAll:IEe,findCycles:LEe,floydWarshall:WEe,isAcyclic:zEe,postorder:GEe,preorder:jEe,prim:wEe,tarjan:_H,topsort:MH},Symbol.toStringTag,{value:"Module"}));var XEe=function(e,t){for(var n=e.nodes(),i=0;i<n.length;i++){var a=n[i];if(t.hasNode(a))return!0}return!1},CH=function(e,t){for(var n=e.edges(),i=0;i<n.length;i++){var a=n[i];if(t.hasEdge(a.v,a.w,a.name))return!0}return!1},AH=function(e,t){var n=e.nodes(),i=n.filter(function(a){return t.hasNode(a)});return i},TH=function(e,t){var n=e.edges(),i=n.filter(function(a){return t.hasEdge(a.v,a.w,a.name)});return i},OH=function(e,t){return e.isCompound()===t.isCompound()&&e.isDirected()===t.isDirected()&&e.isMultigraph()===t.isMultigraph()},y_=function(e,t){var n=AH(e,t);return n.length===e.nodes().length},JI=function(e,t){var n=TH(e,t);return n.length===e.edges().length},YEe=function(e,t){return OH(e,t)&&e.nodeCount()===t.nodeCount()&&y_(e,t)&&e.edgeCount()===t.edgeCount()&&JI(e,t)},KEe=function(e,t){return y_(e,t)&&JI(e,t)};function qEe(r,e){return e_e(r)||JEe(r,e)||QEe(r,e)||ZEe()}function ZEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QEe(r,e){if(r){if(typeof r=="string")return QB(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QB(r,e)}}function QB(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function JEe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function e_e(r){if(Array.isArray(r))return r}function t_e(r){return r instanceof od}function mw(r){if(r.isMultigraph())return!1;for(var e=r.edges(),t=new Map,n=0;n<e.length;n++){var i=e[n];if(i.v===i.w)return!1;var a=[i.v,i.w].sort(),o=qEe(a,2),s=o[0],l=o[1],u="".concat(s,"-").concat(l);if(t.has(u))return!1;t.set(u,!0)}return!0}function r_e(r){return r.nodes().length===0}function n_e(r){for(var e=r.edges(),t=0;t<e.length;t++){var n=e[t];if(n.v===n.w)return!0}return!1}const i_e=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop:n_e,isGraph:t_e,isNullGraph:r_e,isSimpleGraph:mw},Symbol.toStringTag,{value:"Module"}));var a_e=function(e,t){if(!mw(e)||!mw(t)||!y_(e,t)||CH(e,t))return!1;var n=e.nodeCount();return e.edgeCount()+t.edgeCount()===n*(n-1)/2};const o_e=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:JI,containAllSameNodes:y_,containSameEdges:CH,containSameNodes:XEe,getSameEdges:TH,getSameNodes:AH,isGraphComplement:a_e,isGraphContainsAnother:KEe,isGraphOptionSame:OH,isGraphSame:YEe},Symbol.toStringTag,{value:"Module"}));var s_e=function(e){if(!mw(e))return null;for(var t=e.nodeCount(),n=new od({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),i=e.nodes(),a=0;a<t;a++){var o=i[a];n.setNode(o,e.node(o));for(var s=a+1;s<t;s++){var l=i[s];e.hasEdge(o,l)||n.setEdge(o,l)}}return n};const l_e=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:s_e},Symbol.toStringTag,{value:"Module"})),u_e=Object.freeze(Object.defineProperty({__proto__:null,Graph:od,GraphWithEvent:yEe,algorithm:HEe,comparision:o_e,essence:i_e,generate:l_e},Symbol.toStringTag,{value:"Module"})),b_=jl(u_e);var kH=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),f_e=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qI,"__esModule",{value:!0});var c_e=f_e(ZI),h_e=b_,d_e=function(r){kH(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(c_e.default),v_e=function(r){kH(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(h_e.Graph),p_e=function(){return 1},g_e=function(r,e){var t;if(r.nodeCount()<=1)return[];var n=y_e(r,e||p_e),i=m_e(n.graph,n.buckets,n.zeroIdx);return(t=i.map(function(a){return r.outEdges(a.v,a.w)}))===null||t===void 0?void 0:t.flat()},m_e=function(r,e,t){for(var n=[],i=e[e.length-1],a=e[0],o;r.nodeCount();){for(;o=a.dequeue();)yM(r,e,t,o);for(;o=i.dequeue();)yM(r,e,t,o);if(r.nodeCount()){for(var s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){n=n.concat(yM(r,e,t,o,!0));break}}}return n},yM=function(r,e,t,n,i){var a,o,s=[];return(a=r.inEdges(n.v))===null||a===void 0||a.forEach(function(l){var u=r.edge(l),f=r.node(l.v);i&&s.push({v:l.v,w:l.w,in:0,out:0}),f.out===void 0&&(f.out=0),f.out-=u,vT(e,t,f)}),(o=r.outEdges(n.v))===null||o===void 0||o.forEach(function(l){var u=r.edge(l),f=l.w,c=r.node(f);c.in===void 0&&(c.in=0),c.in-=u,vT(e,t,c)}),r.removeNode(n.v),i?s:void 0},y_e=function(r,e){var t=new v_e,n=0,i=0;r.nodes().forEach(function(u){t.setNode(u,{v:u,in:0,out:0})}),r.edges().forEach(function(u){var f=t.edge(u)||0,c=(e==null?void 0:e(u))||1,h=f+c;t.setEdge(u.v,u.w,h),i=Math.max(i,t.node(u.v).out+=c),n=Math.max(n,t.node(u.w).in+=c)});for(var a=[],o=i+n+3,s=0;s<o;s++)a.push(new d_e);var l=n+1;return t.nodes().forEach(function(u){vT(a,l,t.node(u))}),{buckets:a,zeroIdx:l,graph:t}},vT=function(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)};qI.default=g_e;var b_e=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(KI,"__esModule",{value:!0});var x_e=b_e(qI),w_e=function(r){var e=function(n){return function(i){var a;return((a=n.edge(i))===null||a===void 0?void 0:a.weight)||1}},t=r.graph().acyclicer==="greedy"?(0,x_e.default)(r,e(r)):E_e(r);t==null||t.forEach(function(n){var i=r.edge(n);r.removeEdgeObj(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,"rev-".concat(Math.random()))})},E_e=function(r){var e=[],t={},n={},i=function(a){var o;n[a]||(n[a]=!0,t[a]=!0,(o=r.outEdges(a))===null||o===void 0||o.forEach(function(s){t[s.w]?e.push(s):i(s.w)}),delete t[a])};return r.nodes().forEach(i),e},__e=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t.reversed){r.removeEdgeObj(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})};KI.default={run:w_e,undo:__e};var eL={},Ao={},Gu={},S_e=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Graph=void 0;var M_e=b_,C_e=function(r){S_e(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(M_e.Graph);Gu.Graph=C_e;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.minBy=r.notime=r.time=r.partition=r.maxRank=r.addBorderNode=r.removeEmptyRanks=r.normalizeRanks=r.buildLayerMatrix=r.intersectRect=r.predecessorWeights=r.successorWeights=r.zipObject=r.asNonCompoundGraph=r.simplify=r.addDummyNode=void 0;var e=Vn(),t=Gu,n=function(x,w){return Number(x)-Number(w)},i=function(x,w,E,_){var S;do S="".concat(_).concat(Math.random());while(x.hasNode(S));return E.dummy=w,x.setNode(S,E),S};r.addDummyNode=i;var a=function(x){var w=new t.Graph().setGraph(x.graph());return x.nodes().forEach(function(E){w.setNode(E,x.node(E))}),x.edges().forEach(function(E){var _=w.edgeFromArgs(E.v,E.w)||{weight:0,minlen:1},S=x.edge(E);w.setEdge(E.v,E.w,{weight:_.weight+S.weight,minlen:Math.max(_.minlen,S.minlen)})}),w};r.simplify=a;var o=function(x){var w=new t.Graph({multigraph:x.isMultigraph()}).setGraph(x.graph());return x.nodes().forEach(function(E){var _;!((_=x.children(E))===null||_===void 0)&&_.length||w.setNode(E,x.node(E))}),x.edges().forEach(function(E){w.setEdgeObj(E,x.edge(E))}),w};r.asNonCompoundGraph=o;var s=function(x,w){return x==null?void 0:x.reduce(function(E,_,S){return E[_]=w[S],E},{})};r.zipObject=s;var l=function(x){var w={};return x.nodes().forEach(function(E){var _,S={};(_=x.outEdges(E))===null||_===void 0||_.forEach(function(C){var M;S[C.w]=(S[C.w]||0)+(((M=x.edge(C))===null||M===void 0?void 0:M.weight)||0)}),w[E]=S}),w};r.successorWeights=l;var u=function(x){var w=x.nodes(),E=w.map(function(_){var S,C={};return(S=x.inEdges(_))===null||S===void 0||S.forEach(function(M){C[M.v]=(C[M.v]||0)+x.edge(M).weight}),C});return(0,r.zipObject)(w,E)};r.predecessorWeights=u;var f=function(x,w){var E=Number(x.x),_=Number(x.y),S=Number(w.x)-E,C=Number(w.y)-_,M=Number(x.width)/2,T=Number(x.height)/2;if(!S&&!C)return{x:0,y:0};var A,O;return Math.abs(C)*M>Math.abs(S)*T?(C<0&&(T=-T),A=T*S/C,O=T):(S<0&&(M=-M),A=M,O=M*C/S),{x:E+A,y:_+O}};r.intersectRect=f;var c=function(x){for(var w=[],E=(0,r.maxRank)(x)+1,_=0;_<E;_++)w.push([]);x.nodes().forEach(function(S){var C=x.node(S);if(C){var M=C.rank;M!==void 0&&w[M]&&w[M].push(S)}});for(var _=0;_<E;_++)w[_]=w[_].sort(function(C,M){var T,A;return n((T=x.node(C))===null||T===void 0?void 0:T.order,(A=x.node(M))===null||A===void 0?void 0:A.order)});return w};r.buildLayerMatrix=c;var h=function(x){var w=x.nodes().filter(function(_){var S;return((S=x.node(_))===null||S===void 0?void 0:S.rank)!==void 0}).map(function(_){return x.node(_).rank}),E=Math.min.apply(Math,w);x.nodes().forEach(function(_){var S=x.node(_);S.hasOwnProperty("rank")&&E!==1/0&&(S.rank-=E)})};r.normalizeRanks=h;var d=function(x){var w=x.nodes(),E=w.filter(function(O){var L;return((L=x.node(O))===null||L===void 0?void 0:L.rank)!==void 0}).map(function(O){return x.node(O).rank}),_=Math.min.apply(Math,E),S=[];w.forEach(function(O){var L,N=(((L=x.node(O))===null||L===void 0?void 0:L.rank)||0)-_;S[N]||(S[N]=[]),S[N].push(O)});for(var C=0,M=x.graph().nodeRankFactor||0,T=0;T<S.length;T++){var A=S[T];A===void 0?T%M!==0&&(C-=1):C&&(A==null||A.forEach(function(O){var L=x.node(O);L&&(L.rank=L.rank||0,L.rank+=C)}))}};r.removeEmptyRanks=d;var v=function(x,w,E,_){var S={width:0,height:0};return(0,e.isNumber)(E)&&(0,e.isNumber)(_)&&(S.rank=E,S.order=_),(0,r.addDummyNode)(x,"border",S,w)};r.addBorderNode=v;var p=function(x){var w;return x.nodes().forEach(function(E){var _,S=(_=x.node(E))===null||_===void 0?void 0:_.rank;S!==void 0&&(w===void 0||S>w)&&(w=S)}),w||(w=0),w};r.maxRank=p;var g=function(x,w){var E={lhs:[],rhs:[]};return x==null||x.forEach(function(_){w(_)?E.lhs.push(_):E.rhs.push(_)}),E};r.partition=g;var m=function(x,w){var E=Date.now();try{return w()}finally{console.log("".concat(x," time: ").concat(Date.now()-E,"ms"))}};r.time=m;var b=function(x,w){return w()};r.notime=b;var y=function(x,w){return x.reduce(function(E,_){var S=w(E),C=w(_);return S>C?_:E})};r.minBy=y})(Ao);Object.defineProperty(eL,"__esModule",{value:!0});var A_e=Ao,T_e=function(r){r.graph().dummyChains=[],r.edges().forEach(function(e){return O_e(r,e)})},O_e=function(r,e){var t=e.v,n=r.node(t).rank,i=e.w,a=r.node(i).rank,o=e.name,s=r.edge(e),l=s.labelRank;if(a!==n+1){r.removeEdgeObj(e);var u=r.graph(),f,c,h;for(h=0,++n;n<a;++h,++n)s.points=[],c={edgeLabel:s,width:0,height:0,edgeObj:e,rank:n},f=(0,A_e.addDummyNode)(r,"edge",c,"_d"),n===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),r.setEdge(t,f,{weight:s.weight},o),h===0&&(u.dummyChains||(u.dummyChains=[]),u.dummyChains.push(f)),t=f;r.setEdge(t,i,{weight:s.weight},o)}},k_e=function(r){var e;(e=r.graph().dummyChains)===null||e===void 0||e.forEach(function(t){var n=r.node(t),i=n.edgeLabel,a;n.edgeObj&&r.setEdgeObj(n.edgeObj,i);for(var o=t;n.dummy;)a=r.successors(o)[0],r.removeNode(o),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),o=a,n=r.node(o)})};eL.default={run:T_e,undo:k_e};var tL={},Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.slack=Ts.longestPathWithLayer=Ts.longestPath=void 0;var IH=function(r){var e,t={},n=function(i){var a,o=r.node(i);if(!o)return 0;if(t[i])return o.rank;t[i]=!0;var s;return(a=r.outEdges(i))===null||a===void 0||a.forEach(function(l){var u=n(l.w),f=r.edge(l).minlen,c=u-f;c&&(s===void 0||c<s)&&(s=c)}),s||(s=0),o.rank=s,s};(e=r.sources())===null||e===void 0||e.forEach(function(i){return n(i)})};Ts.longestPath=IH;var LH=function(r){var e,t={},n,i=function(s){var l,u=r.node(s);if(!u)return 0;if(t[s])return u.rank;t[s]=!0;var f;return(l=r.outEdges(s))===null||l===void 0||l.forEach(function(c){var h=i(c.w),d=r.edge(c).minlen,v=h-d;v&&(f===void 0||v<f)&&(f=v)}),f||(f=0),(n===void 0||f<n)&&(n=f),u.rank=f,f};(e=r.sources())===null||e===void 0||e.forEach(function(s){r.node(s)&&i(s)}),n===void 0&&(n=0);var a={},o=function(s,l){var u,f=r.node(s),c=isNaN(f.layer)?l:f.layer;(f.rank===void 0||f.rank<c)&&(f.rank=c),!a[s]&&(a[s]=!0,(u=r.outEdges(s))===null||u===void 0||u.map(function(h){o(h.w,c+r.edge(h).minlen)}))};r.nodes().forEach(function(s){var l=r.node(s);l&&(isNaN(l.layer)?l.rank-=n:o(s,l.layer))})};Ts.longestPathWithLayer=LH;var PH=function(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen};Ts.slack=PH;Ts.default={longestPath:IH,longestPathWithLayer:LH,slack:PH};var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.feasibleTreeWithLayer=tc.feasibleTree=void 0;var Wh=Ts,I_e=Ao,DH=Gu,NH=function(r){var e=new DH.Graph({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var i,a;L_e(e,r)<n;)i=BH(e,r),a=e.hasNode(i.v)?(0,Wh.slack)(r,i):-(0,Wh.slack)(r,i),FH(e,r,a);return e};tc.feasibleTree=NH;var L_e=function(r,e){var t=function(n){e.nodeEdges(n).forEach(function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&!(0,Wh.slack)(e,i)&&(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})};return r.nodes().forEach(t),r.nodeCount()},RH=function(r){var e=new DH.Graph({directed:!1}),t=r.nodes()[0],n=r.nodes().filter(function(o){return!!r.node(o)}).length;e.setNode(t,{});for(var i,a;P_e(e,r)<n;)i=BH(e,r),a=e.hasNode(i.v)?(0,Wh.slack)(r,i):-(0,Wh.slack)(r,i),FH(e,r,a);return e};tc.feasibleTreeWithLayer=RH;var P_e=function(r,e){var t=function(n){var i;(i=e.nodeEdges(n))===null||i===void 0||i.forEach(function(a){var o=a.v,s=n===o?a.w:o;!r.hasNode(s)&&(e.node(s).layer!==void 0||!(0,Wh.slack)(e,a))&&(r.setNode(s,{}),r.setEdge(n,s,{}),t(s))})};return r.nodes().forEach(t),r.nodeCount()},BH=function(r,e){return(0,I_e.minBy)(e.edges(),function(t){return r.hasNode(t.v)!==r.hasNode(t.w)?(0,Wh.slack)(e,t):1/0})},FH=function(r,e,t){r.nodes().forEach(function(n){e.node(n).rank||(e.node(n).rank=0),e.node(n).rank+=t})};tc.default={feasibleTree:NH,feasibleTreeWithLayer:RH};var $H={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.exchangeEdges=r.enterEdge=r.leaveEdge=r.initLowLimValues=r.calcCutValue=r.initCutValues=void 0;var e=tc,t=Ts,n=Ao,i=b_,a=i.algorithm.preorder,o=i.algorithm.postorder,s=function(y){var x=(0,n.simplify)(y);(0,t.longestPath)(x);var w=(0,e.feasibleTree)(x);(0,r.initLowLimValues)(w),(0,r.initCutValues)(w,x);for(var E,_;E=(0,r.leaveEdge)(w);)_=(0,r.enterEdge)(w,x,E),(0,r.exchangeEdges)(w,x,E,_)},l=function(y,x){var w=o(y,y.nodes());w=w==null?void 0:w.slice(0,(w==null?void 0:w.length)-1),w==null||w.forEach(function(E){u(y,x,E)})};r.initCutValues=l;var u=function(y,x,w){var E=y.node(w),_=E.parent;y.edgeFromArgs(w,_).cutvalue=(0,r.calcCutValue)(y,x,w)},f=function(y,x,w){var E,_=y.node(w),S=_.parent,C=!0,M=x.edgeFromArgs(w,S),T=0;return M||(C=!1,M=x.edgeFromArgs(S,w)),T=M.weight,(E=x.nodeEdges(w))===null||E===void 0||E.forEach(function(A){var O=A.v===w,L=O?A.w:A.v;if(L!==S){var N=O===C,P=x.edge(A).weight;if(T+=N?P:-P,m(y,w,L)){var R=y.edgeFromArgs(w,L).cutvalue;T+=N?-R:R}}}),T};r.calcCutValue=f;var c=function(y,x){x===void 0&&(x=y.nodes()[0]),h(y,{},1,x)};r.initLowLimValues=c;var h=function(y,x,w,E,_){var S,C=w,M=w,T=y.node(E);return x[E]=!0,(S=y.neighbors(E))===null||S===void 0||S.forEach(function(A){x[A]||(M=h(y,x,M,A,E))}),T.low=C,T.lim=M++,_?T.parent=_:delete T.parent,M},d=function(y){return y.edges().find(function(x){return y.edge(x).cutvalue<0})};r.leaveEdge=d;var v=function(y,x,w){var E=w.v,_=w.w;x.hasEdge(E,_)||(E=w.w,_=w.v);var S=y.node(E),C=y.node(_),M=S,T=!1;S.lim>C.lim&&(M=C,T=!0);var A=x.edges().filter(function(O){return T===b(y,y.node(O.v),M)&&T!==b(y,y.node(O.w),M)});return(0,n.minBy)(A,function(O){return(0,t.slack)(x,O)})};r.enterEdge=v;var p=function(y,x,w,E){var _=w.v,S=w.w;y.removeEdge(_,S),y.setEdge(E.v,E.w,{}),(0,r.initLowLimValues)(y),(0,r.initCutValues)(y,x),g(y,x)};r.exchangeEdges=p;var g=function(y,x){var w=y.nodes().find(function(_){var S;return!(!((S=x.node(_))===null||S===void 0)&&S.parent)}),E=a(y,w);E=E==null?void 0:E.slice(1),E==null||E.forEach(function(_){var S=y.node(_).parent,C=x.edgeFromArgs(_,S),M=!1;C||(C=x.edgeFromArgs(S,_),M=!0),x.node(_).rank=x.node(S).rank+(M?C.minlen:-C.minlen)})},m=function(y,x,w){return y.hasEdge(x,w)},b=function(y,x,w){return w.low<=x.lim&&x.lim<=w.lim};r.default=s})($H);var D_e=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tL,"__esModule",{value:!0});var zH=Ts,N_e=tc,R_e=D_e($H),B_e=function(r){switch(r.graph().ranker){case"network-simplex":$_e(r);break;case"tight-tree":JB(r);break;case"longest-path":F_e(r);break;default:JB(r)}},F_e=zH.longestPath,JB=function(r){(0,zH.longestPathWithLayer)(r),(0,N_e.feasibleTreeWithLayer)(r)},$_e=function(r){(0,R_e.default)(r)};tL.default=B_e;var rL={};Object.defineProperty(rL,"__esModule",{value:!0});var z_e=function(r){var e,t={},n=0,i=function(a){var o,s=n;(o=r.children(a))===null||o===void 0||o.forEach(i),t[a]={low:s,lim:n++}};return(e=r.children())===null||e===void 0||e.forEach(i),t},G_e=function(r,e,t,n){var i=[],a=[],o=Math.min(e[t].low,e[n].low),s=Math.max(e[t].lim,e[n].lim),l,u;l=t;do l=r.parent(l),i.push(l);while(l&&(e[l].low>o||s>e[l].lim));for(u=l,l=n;l&&l!==u;)a.push(l),l=r.parent(l);return{lca:u,path:i.concat(a.reverse())}},j_e=function(r){var e,t=z_e(r);(e=r.graph().dummyChains)===null||e===void 0||e.forEach(function(n){var i,a,o=n,s=r.node(o),l=s.edgeObj;if(l)for(var u=G_e(r,t,l.v,l.w),f=u.path,c=u.lca,h=0,d=f[h],v=!0;o!==l.w;){if(s=r.node(o),v){for(;d!==c&&((i=r.node(d))===null||i===void 0?void 0:i.maxRank)<s.rank;)h++,d=f[h];d===c&&(v=!1)}if(!v){for(;h<f.length-1&&((a=r.node(f[h+1]))===null||a===void 0?void 0:a.minRank)<=s.rank;)h++;d=f[h]}r.setParent(o,d),o=r.successors(o)[0]}})};rL.default=j_e;var nL={};Object.defineProperty(nL,"__esModule",{value:!0});var pT=Ao,U_e=function(r){var e,t=(0,pT.addDummyNode)(r,"root",{},"_root"),n=W_e(r),i=Math.max.apply(Math,Object.values(n));Math.abs(i)===1/0&&(i=1);var a=i-1,o=2*a+1;r.graph().nestingRoot=t,r.edges().forEach(function(l){r.edge(l).minlen*=o});var s=V_e(r)+1;(e=r.children())===null||e===void 0||e.forEach(function(l){GH(r,t,o,s,a,n,l)}),r.graph().nodeRankFactor=o},GH=function(r,e,t,n,i,a,o){var s=r.children(o);if(!(s!=null&&s.length)){o!==e&&r.setEdge(e,o,{weight:0,minlen:t});return}var l=(0,pT.addBorderNode)(r,"_bt"),u=(0,pT.addBorderNode)(r,"_bb"),f=r.node(o);r.setParent(l,o),f.borderTop=l,r.setParent(u,o),f.borderBottom=u,s==null||s.forEach(function(c){GH(r,e,t,n,i,a,c);var h=r.node(c),d=h.borderTop?h.borderTop:c,v=h.borderBottom?h.borderBottom:c,p=h.borderTop?n:2*n,g=d!==v?1:i-a[o]+1;r.setEdge(l,d,{minlen:g,weight:p,nestingEdge:!0}),r.setEdge(v,u,{minlen:g,weight:p,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,l,{weight:0,minlen:i+a[o]})},W_e=function(r){var e,t={},n=function(i,a){var o=r.children(i);o==null||o.forEach(function(s){return n(s,a+1)}),t[i]=a};return(e=r.children())===null||e===void 0||e.forEach(function(i){return n(i,1)}),t},V_e=function(r){var e=0;return r.edges().forEach(function(t){e+=r.edge(t).weight}),e},H_e=function(r){var e=r.graph();e.nestingRoot&&r.removeNode(e.nestingRoot),delete e.nestingRoot,r.edges().forEach(function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdgeObj(t)})};nL.default={run:U_e,cleanup:H_e};var iL={};Object.defineProperty(iL,"__esModule",{value:!0});var X_e=Ao,Y_e=function(r){var e,t=function(n){var i=r.children(n),a=r.node(n);if(i!=null&&i.length&&i.forEach(function(l){return t(l)}),a.hasOwnProperty("minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,s=a.maxRank+1;o<s;o+=1)e4(r,"borderLeft","_bl",n,a,o),e4(r,"borderRight","_br",n,a,o)}};(e=r.children())===null||e===void 0||e.forEach(function(n){return t(n)})},e4=function(r,e,t,n,i,a){var o={rank:a,borderType:e,width:0,height:0},s=i[e][a-1],l=(0,X_e.addDummyNode)(r,"border",o,t);i[e][a]=l,r.setParent(l,n),s&&r.setEdge(s,l,{weight:1})};iL.default=Y_e;var aL={};Object.defineProperty(aL,"__esModule",{value:!0});var K_e=function(r){var e,t=(e=r.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(t==="lr"||t==="rl")&&jH(r)},q_e=function(r){var e,t=(e=r.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(t==="bt"||t==="rl")&&Z_e(r),(t==="lr"||t==="rl")&&(Q_e(r),jH(r))},jH=function(r){r.nodes().forEach(function(e){t4(r.node(e))}),r.edges().forEach(function(e){t4(r.edge(e))})},t4=function(r){var e=r.width;r.width=r.height,r.height=e},Z_e=function(r){r.nodes().forEach(function(e){bM(r.node(e))}),r.edges().forEach(function(e){var t,n=r.edge(e);(t=n.points)===null||t===void 0||t.forEach(function(i){return bM(i)}),n.hasOwnProperty("y")&&bM(n)})},bM=function(r){r!=null&&r.y&&(r.y=-r.y)},Q_e=function(r){r.nodes().forEach(function(e){xM(r.node(e))}),r.edges().forEach(function(e){var t,n=r.edge(e);(t=n.points)===null||t===void 0||t.forEach(function(i){return xM(i)}),n.hasOwnProperty("x")&&xM(n)})},xM=function(r){var e=r.x;r.x=r.y,r.y=e};aL.default={adjust:K_e,undo:q_e};var oL={},sL={};function UH(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]}function wM(r){var e=Math.round(r).toString(16);return e.length===1?"0"+e:e}function WH(r){return"#"+wM(r[0])+wM(r[1])+wM(r[2])}var Za=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},J_e=function(r,e){return Za(r)?r.indexOf(e)>-1:!1};const yw=J_e;var VH=function(r,e){if(!Za(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},e2e=function(r,e){return e===void 0&&(e=[]),VH(r,function(t){return!yw(e,t)})};const t2e=e2e,To=function(r){return typeof r=="function"};var pc=function(r){return r==null},r2e={}.toString,Ul=function(r,e){return r2e.call(r)==="[object "+e+"]"};const li=function(r){return Array.isArray?Array.isArray(r):Ul(r,"Array")},x_=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function Xv(r,e){if(r){var t;if(li(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(x_(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var n2e=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return Xv(r,function(t,n){To(r)&&n==="prototype"||e.push(n)}),e};const HH=n2e;function XH(r,e){var t=HH(e),n=t.length;if(pc(r))return!n;for(var i=0;i<n;i+=1){var a=t[i];if(e[a]!==r[a]||!(a in r))return!1}return!0}var i2e=function(r){return typeof r=="object"&&r!==null};const bw=i2e;var a2e=function(r){if(!bw(r)||!Ul(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};const Yv=a2e;function o2e(r,e){if(!li(r))return null;var t;if(To(e)&&(t=e),Yv(e)&&(t=function(i){return XH(i,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function s2e(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var l2e=function(r,e){for(var t=null,n=0;n<r.length;n++){var i=r[n],a=i[e];if(!pc(a)){li(a)?t=a[0]:t=a;break}}return t};const u2e=l2e;var f2e=function(r){if(!li(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};const c2e=f2e;var YH=function(r,e){if(e===void 0&&(e=[]),!li(r))e.push(r);else for(var t=0;t<r.length;t+=1)YH(r[t],e);return e};const h2e=YH,KH=function(r){if(li(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},qH=function(r){if(li(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var d2e=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(li(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var i=KH(e),a=qH(e);return{min:a,max:i}};const v2e=d2e;var ZH=Array.prototype,p2e=ZH.splice,g2e=ZH.indexOf,m2e=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=g2e.call(r,i))>-1;)p2e.call(r,a,1);return r};const y2e=m2e;var b2e=Array.prototype.splice,x2e=function(e,t){if(!Za(e))return[];for(var n=e?t.length:0,i=n-1;n--;){var a=void 0,o=t[n];(n===i||o!==a)&&(a=o,b2e.call(e,o,1))}return e};const QH=x2e;var w2e=function(r,e,t){if(!li(r)&&!Yv(r))return r;var n=t;return Xv(r,function(i,a){n=e(n,i,a)}),n};const JH=w2e;var E2e=function(r,e){var t=[];if(!Za(r))return t;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];e(o,n,r)&&(t.push(o),i.push(n))}return QH(r,i),t};const _2e=E2e,rc=function(r){return Ul(r,"String")};function S2e(r,e){var t;if(To(e))t=function(i,a){return e(i)-e(a)};else{var n=[];rc(e)?n.push(e):li(e)&&(n=e),t=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(t),r}function eX(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var M2e=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return eX([].concat.apply([],r))};const C2e=M2e,A2e=function(r,e){for(var t=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[e];if(!pc(o)){li(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(t.push(l),n[l]=!0)}}}return t};function T2e(r){if(Za(r))return r[0]}function O2e(r){if(Za(r)){var e=r;return e[e.length-1]}}function k2e(r,e){return li(r)||rc(r)?r[0]===e:!1}function I2e(r,e){return li(r)||rc(r)?r[r.length-1]===e:!1}var L2e=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0};const P2e=L2e;var D2e=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1};const N2e=D2e;var R2e=Object.prototype.hasOwnProperty;function tX(r,e){if(!e||!li(r))return{};for(var t={},n=To(e)?e:function(s){return s[e]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),R2e.call(t,i)?t[i].push(o):t[i]=[o]}return t}function rX(r,e){if(!e)return{0:r};if(!To(e)){var t=li(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=t.length;a<o;a++)i+=n[t[a]]&&n[t[a]].toString();return i}}return tX(r,e)}const B2e=function(r,e){if(!e)return[r];var t=rX(r,e),n=[];for(var i in t)n.push(t[i]);return n};function F2e(r,e){return r["_wrap_"+e]}function $2e(r,e){if(r["_wrap_"+e])return r["_wrap_"+e];var t=function(n){r[e](n)};return r["_wrap_"+e]=t,t}var r4={};function z2e(r){var e=r4[r];if(!e){for(var t=r.toString(16),n=t.length;n<6;n++)t="0"+t;e="#"+t,r4[r]=e}return e}function G2e(r){var e=0,t=0,n=0,i=0;return li(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var j2e=function(r,e,t){return r<e?e:r>t?t:r};const U2e=j2e;var W2e=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var i=t.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))};const V2e=W2e;var ju=function(r){return Ul(r,"Number")},H2e=function(r){return ju(r)&&r%1!==0};const X2e=H2e;var Y2e=function(r){return ju(r)&&r%2===0};const K2e=Y2e;var q2e=Number.isInteger?Number.isInteger:function(r){return ju(r)&&r%1===0};const Z2e=q2e;var Q2e=function(r){return ju(r)&&r<0};const J2e=Q2e;var eSe=1e-5;function tSe(r,e,t){return t===void 0&&(t=eSe),Math.abs(r-e)<t}var rSe=function(r){return ju(r)&&r%2!==0};const nSe=rSe;var iSe=function(r){return ju(r)&&r>0};const aSe=iSe,oSe=function(r,e){if(li(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=To(e)?e(a):a[e];o>n&&(t=a,n=o)}return t}},sSe=function(r,e){if(li(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],o=To(e)?e(a):a[e];o<n&&(t=a,n=o)}return t}};var lSe=function(r,e){return(r%e+e)%e};const uSe=lSe;var fSe=180/Math.PI,cSe=function(r){return fSe*r};const hSe=cSe,dSe=parseInt;var vSe=Math.PI/180,pSe=function(r){return vSe*r};const gSe=pSe,n4=function(r,e){return r.hasOwnProperty(e)};var nX=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return Xv(r,function(t,n){To(r)&&n==="prototype"||e.push(t)}),e};const mSe=function(r,e){return yw(nX(r),e)},Hm=function(r){return pc(r)?"":r.toString()};var ySe=function(r){return Hm(r).toLowerCase()};const bSe=ySe;var xSe=function(r){var e=Hm(r);return e.charAt(0).toLowerCase()+e.substring(1)};const wSe=xSe;function ESe(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var _Se=function(r){return Hm(r).toUpperCase()};const SSe=_Se;var MSe=function(r){var e=Hm(r);return e.charAt(0).toUpperCase()+e.substring(1)};const CSe=MSe;var ASe={}.toString,TSe=function(r){return ASe.call(r).replace(/^\[object /,"").replace(/]$/,"")};const iX=TSe;var OSe=function(r){return Ul(r,"Arguments")};const kSe=OSe;var ISe=function(r){return Ul(r,"Boolean")};const LSe=ISe;var PSe=function(r){return Ul(r,"Date")};const DSe=PSe;var NSe=function(r){return Ul(r,"Error")};const RSe=NSe;function BSe(r){return ju(r)&&isFinite(r)}var FSe=function(r){return r===null};const $Se=FSe;var zSe=Object.prototype,GSe=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||zSe;return r===t};const aX=GSe;var jSe=function(r){return Ul(r,"RegExp")};const USe=jSe;var WSe=function(r){return r===void 0};const VSe=WSe;var HSe=function(r){return r instanceof Element||r instanceof Document};const XSe=HSe;function YSe(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function KSe(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function EM(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function Ev(r,e,t,n){return e&&EM(r,e),t&&EM(r,t),n&&EM(r,n),r}var qSe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r[0],n=1;n<r.length;n++){var i=r[n];To(i)&&(i=i.prototype),Ev(t.prototype,i)}};const ZSe=qSe;var gT=function(r){if(typeof r!="object"||r===null)return r;var e;if(li(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=gT(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=gT(r[i]):e[i]=r[i]}return e};const QSe=gT;function JSe(r,e,t){var n;return function(){var i=this,a=arguments,o=function(){n=null,t||r.apply(i,a)},s=t&&!n;clearTimeout(n),n=setTimeout(o,e),s&&r.apply(i,a)}}function eMe(r){var e,t,n,i=r||1;function a(s,l){++e>i&&(n=t,o(1),++e),t[s]=l}function o(s){e=0,t=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return t[s]!==void 0||n[s]!==void 0},get:function(s){var l=t[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){t[s]!==void 0?t[s]=l:a(s,l)}}}const oX=function(r,e,t){if(t===void 0&&(t=128),!To(r))throw new TypeError("Expected a function");var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=r.apply(this,i);return s.set(o,l),l};return n.cache=eMe(t),n};var tMe=5;function rMe(r,e){if(Object.hasOwn)return Object.hasOwn(r,e);if(r==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(r),e)}function sX(r,e,t,n){t=t||0,n=n||tMe;for(var i in e)if(rMe(e,i)){var a=e[i];a!==null&&Yv(a)?(Yv(r[i])||(r[i]={}),t<n?sX(r[i],a,t+1,n):r[i]=e[i]):li(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var nMe=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)sX(r,e[n]);return r};const iMe=nMe;var aMe=function(r,e,t,n){To(e)||(t=e,e=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,r);return r.prototype=Ev(a,r.prototype),r.superclass=i(e.prototype,e),Ev(a,t),Ev(r,n),r};const oMe=aMe;var sMe=function(r,e){if(!Za(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,i=0;i<r.length;i++)if(r[i]===e){n=i;break}return n};const lMe=sMe;var uMe=Object.prototype.hasOwnProperty;function fMe(r){if(pc(r))return!0;if(Za(r))return!r.length;var e=iX(r);if(e==="Map"||e==="Set")return!r.size;if(aX(r))return!Object.keys(r).length;for(var t in r)if(uMe.call(r,t))return!1;return!0}var mT=function(r,e){if(r===e)return!0;if(!r||!e||rc(r)||rc(e))return!1;if(Za(r)||Za(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=mT(r[n],e[n]),!!t);n++);return t}if(bw(r)||bw(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=mT(r[i[n]],e[i[n]]),!!t);n++);return t}return!1};const lX=mT,cMe=function(r,e,t){return To(t)?!!t(r,e):lX(r,e)};var hMe=function(r,e){if(!Za(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];t.push(e(i,n))}return t};const dMe=hMe;var vMe=function(r){return r};const pMe=function(r,e){e===void 0&&(e=vMe);var t={};return x_(r)&&!pc(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},gMe=function(r,e,t){for(var n=0,i=rc(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r},mMe=function(r,e,t){var n=r,i=rc(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(x_(n[a])||(n[a]=ju(i[o+1])?[]:{}),n=n[a]):n[a]=t}),r};var yMe=Object.prototype.hasOwnProperty;const bMe=function(r,e){if(r===null||!Yv(r))return{};var t={};return Xv(e,function(n){yMe.call(r,n)&&(t[n]=r[n])}),t},xMe=function(r,e){return JH(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},wMe=function(r,e,t){var n,i,a,o,s=0;t||(t={});var l=function(){s=t.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},u=function(){var f=Date.now();!s&&t.leading===!1&&(s=f);var c=e-(f-s);return i=this,a=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),s=f,o=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(l,c)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},EMe=function(r){return Za(r)?Array.prototype.slice.call(r):[]};var B1={};const _Me=function(r){return r=r||"g",B1[r]?B1[r]+=1:B1[r]=1,r+B1[r]},SMe=function(){},MMe=function(r){return r};function CMe(r){return pc(r)?0:Za(r)?r.length:Object.keys(r).length}var AMe=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}();const TMe=AMe;var OMe=/rgba?\(([\s.,0-9]+)\)/;function kMe(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r}var F1;function IMe(r){if(r[0]==="#"&&r.length===7)return r;F1||(F1=kMe()),F1.style.color=r;var e=document.defaultView.getComputedStyle(F1,"").getPropertyValue("color"),t=OMe.exec(e),n=t[1].split(/\s*,\s*/).map(function(i){return Number(i)});return e=WH(n),e}var uX=oX(IMe,function(r){return r},256);function _M(r,e,t,n){return r[n]+(e[n]-r[n])*t}function LMe(r,e){var t=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=r.length-1,i=Math.floor(n*t),a=n*t-i,o=r[i],s=i===n?o:r[i+1];return WH([_M(o,s,a,0),_M(o,s,a,1),_M(o,s,a,2)])}function PMe(r){var e=typeof r=="string"?r.split("-"):r,t=e.map(function(n){return UH(n.indexOf("#")===-1?uX(n):n)});return function(n){return LMe(t,n)}}var DMe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,NMe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,RMe=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function BMe(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)}function FMe(r){if(BMe(r)){var e,t=void 0;if(r[0]==="l"){var n=DMe.exec(r),i=+n[1]+90;t=n[2],e="linear-gradient("+i+"deg, "}else if(r[0]==="r"){e="radial-gradient(";var n=NMe.exec(r);t=n[4]}var a=t.match(RMe);return a.forEach(function(o,s){var l=o.split(":");e+=l[1]+" "+Number(l[0])*100+"%",s!==a.length-1&&(e+=", ")}),e+=")",e}return r}function $Me(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Kk(n,t),$l(r,n,e)}function zMe(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return qk(n,t),$l(r,n,e)}function GMe(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Zk(n,t),$l(r,n,e)}function jMe(r,e,t){return $l(r,t,e)}function UMe(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":$Me(t,t,[a[1],a[2]]);break;case"s":GMe(t,t,[a[1],a[2]]);break;case"r":zMe(t,t,a[1]);break;case"m":jMe(t,t,a[1]);break}}return t}function fX(r,e){return r[0]*e[1]-e[0]*r[1]}function WMe(r,e,t){var n=u7(r,e),i=fX(r,e)>=0;return t?i?Math.PI*2-n:n:i?n:Math.PI*2-n}function VMe(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}function HMe(r,e){if(e==="off")return[].concat(r);var t=typeof e=="number"&&e>=1?Math.pow(10,e):1;return r.map(function(n){var i=n.slice(1).map(Number).map(function(a){return e?Math.round(a*t)/t:Math.round(a)});return[n[0]].concat(i)})}function XMe(r,e){return e===void 0&&(e="off"),HMe(r,e).map(function(t){return t[0]+t.slice(1).join(" ")}).join("")}var cX={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function YMe(r,e,t){if(r[t].length>7){r[t].shift();for(var n=r[t],i=t;n.length;)e[t]="A",r.splice(i+=1,0,["C"].concat(n.splice(0,6)));r.splice(t,1)}}var s0={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function hX(r){return Array.isArray(r)&&r.every(function(e){var t=e[0].toLowerCase();return s0[t]===e.length-1&&"achlmqstvz".includes(t)})}function dX(r){return hX(r)&&r.every(function(e){var t=e[0];return t===t.toUpperCase()})}function vX(r){return dX(r)&&r.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}function i4(r){for(var e=r.pathValue[r.segmentStart],t=e.toLowerCase(),n=r.data;n.length>=s0[t]&&(t==="m"&&n.length>2?(r.segments.push([e].concat(n.splice(0,2))),t="l",e=e==="m"?"l":"L"):r.segments.push([e].concat(n.splice(0,s0[t]))),!!s0[t]););}function KMe(r){var e=r.index,t=r.pathValue,n=t.charCodeAt(e);if(n===48){r.param=0,r.index+=1;return}if(n===49){r.param=1,r.index+=1;return}r.err='[path-util]: invalid Arc flag "'+t[e]+'", expecting 0 or 1 at index '+e}function qMe(r){return r>=48&&r<=57||r===43||r===45||r===46}function Bd(r){return r>=48&&r<=57}function ZMe(r){var e=r.max,t=r.pathValue,n=r.index,i=n,a=!1,o=!1,s=!1,l=!1,u;if(i>=e){r.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(u=t.charCodeAt(i),(u===43||u===45)&&(i+=1,u=t.charCodeAt(i)),!Bd(u)&&u!==46){r.err="[path-util]: Invalid path value at index "+i+', "'+t[i]+'" is not a number';return}if(u!==46){if(a=u===48,i+=1,u=t.charCodeAt(i),a&&i<e&&u&&Bd(u)){r.err="[path-util]: Invalid path value at index "+n+', "'+t[n]+'" illegal number';return}for(;i<e&&Bd(t.charCodeAt(i));)i+=1,o=!0;u=t.charCodeAt(i)}if(u===46){for(l=!0,i+=1;Bd(t.charCodeAt(i));)i+=1,s=!0;u=t.charCodeAt(i)}if(u===101||u===69){if(l&&!o&&!s){r.err="[path-util]: Invalid path value at index "+i+', "'+t[i]+'" invalid float exponent';return}if(i+=1,u=t.charCodeAt(i),(u===43||u===45)&&(i+=1),i<e&&Bd(t.charCodeAt(i)))for(;i<e&&Bd(t.charCodeAt(i));)i+=1;else{r.err="[path-util]: Invalid path value at index "+i+', "'+t[i]+'" invalid integer exponent';return}}r.index=i,r.param=+r.pathValue.slice(n,i)}function QMe(r){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&e.includes(r)}function sx(r){for(var e=r.pathValue,t=r.max;r.index<t&&QMe(e.charCodeAt(r.index));)r.index+=1}function JMe(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function eCe(r){return(r|32)===97}function tCe(r){var e=r.max,t=r.pathValue,n=r.index,i=t.charCodeAt(n),a=s0[t[n].toLowerCase()];if(r.segmentStart=n,!JMe(i)){r.err='[path-util]: Invalid path value "'+t[n]+'" is not a path command';return}if(r.index+=1,sx(r),r.data=[],!a){i4(r);return}for(;;){for(var o=a;o>0;o-=1){if(eCe(i)&&(o===3||o===4)?KMe(r):ZMe(r),r.err.length)return;r.data.push(r.param),sx(r),r.index<e&&t.charCodeAt(r.index)===44&&(r.index+=1,sx(r))}if(r.index>=r.max||!qMe(t.charCodeAt(r.index)))break}i4(r)}var rCe=function(){function r(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return r}();function lL(r){if(hX(r))return[].concat(r);var e=new rCe(r);for(sx(e);e.index<e.max&&!e.err.length;)tCe(e);return e.err?e.err:e.segments}function pX(r){if(dX(r))return[].concat(r);var e=lL(r),t=0,n=0,i=0,a=0;return e.map(function(o){var s=o.slice(1).map(Number),l=o[0],u=l.toUpperCase();if(l==="M")return t=s[0],n=s[1],i=t,a=n,["M",t,n];var f;if(l!==u)switch(u){case"A":f=[u,s[0],s[1],s[2],s[3],s[4],s[5]+t,s[6]+n];break;case"V":f=[u,s[0]+n];break;case"H":f=[u,s[0]+t];break;default:{var c=s.map(function(d,v){return d+(v%2?n:t)});f=[u].concat(c)}}else f=[u].concat(s);var h=f.length;switch(u){case"Z":t=i,n=a;break;case"H":t=f[1];break;case"V":n=f[1];break;default:t=f[h-2],n=f[h-1],u==="M"&&(i=t,a=n)}return f})}function nCe(r,e){var t=r[0],n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=r.slice(1).map(Number),l=r;if("TQ".includes(t)||(e.qx=null,e.qy=null),t==="H")l=["L",r[1],i];else if(t==="V")l=["L",n,r[1]];else if(t==="S"){var u=n*2-a,f=i*2-o;e.x1=u,e.y1=f,l=["C",u,f].concat(s)}else if(t==="T"){var c=n*2-e.qx,h=i*2-e.qy;e.qx=c,e.qy=h,l=["Q",c,h].concat(s)}else if(t==="Q"){var d=s[0],v=s[1];e.qx=d,e.qy=v}return l}function w_(r){if(vX(r))return[].concat(r);for(var e=pX(r),t=U({},cX),n=0;n<e.length;n+=1){e[n]=nCe(e[n],t);var i=e[n],a=i.length;t.x1=+i[a-2],t.y1=+i[a-1],t.x2=+i[a-4]||t.x1,t.y2=+i[a-3]||t.y1}return e}function iCe(r){return vX(r)&&r.every(function(e){var t=e[0];return"MC".includes(t)})}function $1(r,e,t){var n=r*Math.cos(t)-e*Math.sin(t),i=r*Math.sin(t)+e*Math.cos(t);return{x:n,y:i}}function uL(r,e,t,n,i,a,o,s,l,u){var f=r,c=e,h=t,d=n,v=s,p=l,g=Math.PI*120/180,m=Math.PI/180*(+i||0),b=[],y,x,w,E,_;if(u)x=u[0],w=u[1],E=u[2],_=u[3];else{y=$1(f,c,-m),f=y.x,c=y.y,y=$1(v,p,-m),v=y.x,p=y.y;var S=(f-v)/2,C=(c-p)/2,M=S*S/(h*h)+C*C/(d*d);M>1&&(M=Math.sqrt(M),h*=M,d*=M);var T=h*h,A=d*d,O=(a===o?-1:1)*Math.sqrt(Math.abs((T*A-T*C*C-A*S*S)/(T*C*C+A*S*S)));E=O*h*C/d+(f+v)/2,_=O*-d*S/h+(c+p)/2,x=Math.asin(((c-_)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((p-_)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),x=f<E?Math.PI-x:x,w=v<E?Math.PI-w:w,x<0&&(x=Math.PI*2+x),w<0&&(w=Math.PI*2+w),o&&x>w&&(x-=Math.PI*2),!o&&w>x&&(w-=Math.PI*2)}var L=w-x;if(Math.abs(L)>g){var N=w,P=v,R=p;w=x+g*(o&&w>x?1:-1),v=E+h*Math.cos(w),p=_+d*Math.sin(w),b=uL(v,p,h,d,i,0,o,P,R,[w,N,E,_])}L=w-x;var G=Math.cos(x),D=Math.sin(x),B=Math.cos(w),Y=Math.sin(w),ee=Math.tan(L/4),ne=4/3*h*ee,Q=4/3*d*ee,ye=[f,c],Le=[f+ne*D,c-Q*G],Fe=[v+ne*Y,p-Q*B],_e=[v,p];if(Le[0]=2*ye[0]-Le[0],Le[1]=2*ye[1]-Le[1],u)return Le.concat(Fe,_e,b);b=Le.concat(Fe,_e,b);for(var Ve=[],Xe=0,vt=b.length;Xe<vt;Xe+=1)Ve[Xe]=Xe%2?$1(b[Xe-1],b[Xe],m).y:$1(b[Xe],b[Xe+1],m).x;return Ve}function aCe(r,e,t,n,i,a){var o=.3333333333333333,s=2/3;return[o*r+s*t,o*e+s*n,o*i+s*t,o*a+s*n,i,a]}function Sf(r,e,t){var n=r[0],i=r[1],a=e[0],o=e[1];return[n+(a-n)*t,i+(o-i)*t]}var a4=function(r,e,t,n){var i=.5,a=Sf([r,e],[t,n],i);return So(So([],a,!0),[t,n,t,n],!1)};function oCe(r,e){var t=r[0],n=r.slice(1).map(Number),i=n[0],a=n[1],o,s=e.x1,l=e.y1,u=e.x,f=e.y;switch("TQ".includes(t)||(e.qx=null,e.qy=null),t){case"M":return e.x=i,e.y=a,r;case"A":return o=[s,l].concat(n),["C"].concat(uL(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=i,e.qy=a,o=[s,l].concat(n),["C"].concat(aCe(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(a4(s,l,i,a));case"Z":return s===u&&l===f?["C",s,l,u,f,u,f]:["C"].concat(a4(s,l,u,f))}return r}function gX(r,e){if(e===void 0&&(e=!1),iCe(r)){var t=[].concat(r);return e?[t,[]]:t}for(var n=w_(r),i=U({},cX),a=[],o="",s=n.length,l,u,f=[],c=0;c<s;c+=1){n[c]&&(o=n[c][0]),a[c]=o;var h=oCe(n[c],i);n[c]=h,YMe(n,a,c),s=n.length,o==="Z"&&f.push(c),l=n[c],u=l.length,i.x1=+l[u-2],i.y1=+l[u-1],i.x2=+l[u-4]||i.x1,i.y2=+l[u-3]||i.y1}return e?[n,f]:n}function sCe(r){return r.map(function(e){return Array.isArray(e)?[].concat(e):e})}function lCe(r){var e=r.slice(1).map(function(t,n,i){return n?i[n-1].slice(-2).concat(t.slice(1)):r[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(n,i){return t[t.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function Ap(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}function yT(r,e,t,n,i){var a=Ap([r,e],[t,n]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:r,y:e};else if(i>=a)o={x:t,y:n};else{var s=Sf([r,e],[t,n],i/a),l=s[0],u=s[1];o={x:l,y:u}}return{length:a,point:o,min:{x:Math.min(r,t),y:Math.min(e,n)},max:{x:Math.max(r,t),y:Math.max(e,n)}}}function o4(r,e){var t=r.x,n=r.y,i=e.x,a=e.y,o=t*i+n*a,s=Math.sqrt((Math.pow(t,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),l=t*a-n*i<0?-1:1,u=l*Math.acos(o/s);return u}function uCe(r,e,t,n,i,a,o,s,l,u){var f=Math.abs,c=Math.sin,h=Math.cos,d=Math.sqrt,v=Math.PI,p=f(t),g=f(n),m=(i%360+360)%360,b=m*(v/180);if(r===s&&e===l)return{x:r,y:e};if(p===0||g===0)return yT(r,e,s,l,u).point;var y=(r-s)/2,x=(e-l)/2,w={x:h(b)*y+c(b)*x,y:-c(b)*y+h(b)*x},E=Math.pow(w.x,2)/Math.pow(p,2)+Math.pow(w.y,2)/Math.pow(g,2);E>1&&(p*=d(E),g*=d(E));var _=Math.pow(p,2)*Math.pow(g,2)-Math.pow(p,2)*Math.pow(w.y,2)-Math.pow(g,2)*Math.pow(w.x,2),S=Math.pow(p,2)*Math.pow(w.y,2)+Math.pow(g,2)*Math.pow(w.x,2),C=_/S;C=C<0?0:C;var M=(a!==o?1:-1)*d(C),T={x:M*(p*w.y/g),y:M*(-(g*w.x)/p)},A={x:h(b)*T.x-c(b)*T.y+(r+s)/2,y:c(b)*T.x+h(b)*T.y+(e+l)/2},O={x:(w.x-T.x)/p,y:(w.y-T.y)/g},L=o4({x:1,y:0},O),N={x:(-w.x-T.x)/p,y:(-w.y-T.y)/g},P=o4(O,N);!o&&P>0?P-=2*v:o&&P<0&&(P+=2*v),P%=2*v;var R=L+P*u,G=p*h(R),D=g*c(R),B={x:h(b)*G-c(b)*D+A.x,y:c(b)*G+h(b)*D+A.y};return B}function fCe(r,e,t,n,i,a,o,s,l,u,f){var c,h=f.bbox,d=h===void 0?!0:h,v=f.length,p=v===void 0?!0:v,g=f.sampleSize,m=g===void 0?30:g,b=typeof u=="number",y=r,x=e,w=0,E=[y,x,w],_=[y,x],S=0,C={x:0,y:0},M=[{x:y,y:x}];b&&u<=0&&(C={x:y,y:x});for(var T=0;T<=m;T+=1){if(S=T/m,c=uCe(r,e,t,n,i,a,o,s,l,S),y=c.x,x=c.y,d&&M.push({x:y,y:x}),p&&(w+=Ap(_,[y,x])),_=[y,x],b&&w>=u&&u>E[2]){var A=(w-u)/(w-E[2]);C={x:_[0]*(1-A)+E[0]*A,y:_[1]*(1-A)+E[1]*A}}E=[y,x,w]}return b&&u>=w&&(C={x:s,y:l}),{length:w,point:C,min:{x:Math.min.apply(null,M.map(function(O){return O.x})),y:Math.min.apply(null,M.map(function(O){return O.y}))},max:{x:Math.max.apply(null,M.map(function(O){return O.x})),y:Math.max.apply(null,M.map(function(O){return O.y}))}}}function cCe(r,e,t,n,i,a,o,s,l){var u=1-l;return{x:Math.pow(u,3)*r+3*Math.pow(u,2)*l*t+3*u*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*a+Math.pow(l,3)*s}}function mX(r,e,t,n,i,a,o,s,l,u){var f,c=u.bbox,h=c===void 0?!0:c,d=u.length,v=d===void 0?!0:d,p=u.sampleSize,g=p===void 0?10:p,m=typeof l=="number",b=r,y=e,x=0,w=[b,y,x],E=[b,y],_=0,S={x:0,y:0},C=[{x:b,y}];m&&l<=0&&(S={x:b,y});for(var M=0;M<=g;M+=1){if(_=M/g,f=cCe(r,e,t,n,i,a,o,s,_),b=f.x,y=f.y,h&&C.push({x:b,y}),v&&(x+=Ap(E,[b,y])),E=[b,y],m&&x>=l&&l>w[2]){var T=(x-l)/(x-w[2]);S={x:E[0]*(1-T)+w[0]*T,y:E[1]*(1-T)+w[1]*T}}w=[b,y,x]}return m&&l>=x&&(S={x:o,y:s}),{length:x,point:S,min:{x:Math.min.apply(null,C.map(function(A){return A.x})),y:Math.min.apply(null,C.map(function(A){return A.y}))},max:{x:Math.max.apply(null,C.map(function(A){return A.x})),y:Math.max.apply(null,C.map(function(A){return A.y}))}}}function hCe(r,e,t,n,i,a,o){var s=1-o;return{x:Math.pow(s,2)*r+2*s*o*t+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*n+Math.pow(o,2)*a}}function dCe(r,e,t,n,i,a,o,s){var l,u=s.bbox,f=u===void 0?!0:u,c=s.length,h=c===void 0?!0:c,d=s.sampleSize,v=d===void 0?10:d,p=typeof o=="number",g=r,m=e,b=0,y=[g,m,b],x=[g,m],w=0,E={x:0,y:0},_=[{x:g,y:m}];p&&o<=0&&(E={x:g,y:m});for(var S=0;S<=v;S+=1){if(w=S/v,l=hCe(r,e,t,n,i,a,w),g=l.x,m=l.y,f&&_.push({x:g,y:m}),h&&(b+=Ap(x,[g,m])),x=[g,m],p&&b>=o&&o>y[2]){var C=(b-o)/(b-y[2]);E={x:x[0]*(1-C)+y[0]*C,y:x[1]*(1-C)+y[1]*C}}y=[g,m,b]}return p&&o>=b&&(E={x:i,y:a}),{length:b,point:E,min:{x:Math.min.apply(null,_.map(function(M){return M.x})),y:Math.min.apply(null,_.map(function(M){return M.y}))},max:{x:Math.max.apply(null,_.map(function(M){return M.x})),y:Math.max.apply(null,_.map(function(M){return M.y}))}}}function E_(r,e,t){for(var n,i,a,o,s,l,u=w_(r),f=typeof e=="number",c,h=[],d,v=0,p=0,g=0,m=0,b,y=[],x=[],w=0,E={x:0,y:0},_=E,S=E,C=E,M=0,T=0,A=u.length;T<A;T+=1)b=u[T],d=b[0],c=d==="M",h=c?h:[v,p].concat(b.slice(1)),c?(g=b[1],m=b[2],E={x:g,y:m},_=E,w=0,f&&e<.001&&(C=E)):d==="L"?(n=yT(h[0],h[1],h[2],h[3],(e||0)-M),w=n.length,E=n.min,_=n.max,S=n.point):d==="A"?(i=fCe(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-M,t||{}),w=i.length,E=i.min,_=i.max,S=i.point):d==="C"?(a=mX(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-M,t||{}),w=a.length,E=a.min,_=a.max,S=a.point):d==="Q"?(o=dCe(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-M,t||{}),w=o.length,E=o.min,_=o.max,S=o.point):d==="Z"&&(h=[v,p,g,m],s=yT(h[0],h[1],h[2],h[3],(e||0)-M),w=s.length,E=s.min,_=s.max,S=s.point),f&&M<e&&M+w>=e&&(C=S),x.push(_),y.push(E),M+=w,l=d!=="Z"?b.slice(-2):[g,m],v=l[0],p=l[1];return f&&e>=M&&(C={x:v,y:p}),{length:M,point:C,min:{x:Math.min.apply(null,y.map(function(O){return O.x})),y:Math.min.apply(null,y.map(function(O){return O.y}))},max:{x:Math.max.apply(null,x.map(function(O){return O.x})),y:Math.max.apply(null,x.map(function(O){return O.y}))}}}function vCe(r,e){if(!r)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=E_(r,void 0,U(U({},e),{length:!1})),n=t.min,i=n.x,a=n.y,o=t.max,s=o.x,l=o.y,u=s-i,f=l-a;return{width:u,height:f,x:i,y:a,x2:s,y2:l,cx:i+u/2,cy:a+f/2,cz:Math.max(u,f)+Math.min(u,f)/2}}function l0(r,e){return E_(r,void 0,U(U({},e),{bbox:!1,length:!0})).length}function pCe(r,e){if(!r)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=E_(r,void 0,U(U({},e),{bbox:!0,length:!0})),n=t.length,i=t.min,a=i.x,o=i.y,s=t.max,l=s.x,u=s.y,f=l-a,c=u-o;return{length:n,width:f,height:c,x:a,y:o,x2:l,y2:u,cx:a+f/2,cy:o+c/2,cz:Math.max(f,c)+Math.min(f,c)/2}}function gCe(r){var e=r.length,t=e-1;return r.map(function(n,i){return r.map(function(a,o){var s=i+o,l;return o===0||r[s]&&r[s][0]==="M"?(l=r[s],["M"].concat(l.slice(-2))):(s>=e&&(s-=t),r[s])})})}function mCe(r,e){var t=r.length-1,n=[],i=0,a=0,o=gCe(r);return o.forEach(function(s,l){r.slice(1).forEach(function(u,f){a+=Ap(r[(l+f)%t].slice(-2),e[f%t].slice(-2))}),n[l]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),o[i]}function yCe(r,e,t,n,i,a,o,s){return 3*((s-e)*(t+i)-(o-r)*(n+a)+n*(r-i)-t*(e-a)+s*(i+r/3)-o*(a+e/3))/20}function yX(r){var e=0,t=0,n=0;return gX(r).map(function(i){var a;switch(i[0]){case"M":return e=i[1],t=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],u=o[2],f=o[3],c=o[4],h=o[5];return n=yCe(e,t,s,l,u,f,c,h),a=i.slice(-2),e=a[0],t=a[1],n}}).reduce(function(i,a){return i+a},0)}function bCe(r){return yX(r)>=0}function lx(r,e,t){return E_(r,e,U(U({},t),{bbox:!1,length:!0})).point}function xCe(r,e){var t=lL(r);if(typeof t=="string")throw TypeError(t);var n=t.slice(),i=l0(n),a=n.length-1,o=0,s=0,l=t[0],u=l.slice(-2),f=u[0],c=u[1],h={x:f,y:c};if(a<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:h,lengthAtSegment:o};if(e>=i)return n=t.slice(0,-1),o=l0(n),s=i-o,{segment:t[a],index:a,length:s,lengthAtSegment:o};for(var d=[];a>0;)l=n[a],n=n.slice(0,-1),o=l0(n),s=i-o,i=o,d.push({segment:l,index:a,length:s,lengthAtSegment:o}),a-=1;return d.find(function(v){var p=v.lengthAtSegment;return p<=e})}function wCe(r,e){for(var t=lL(r),n=w_(t),i=l0(t),a=function(w){var E=w.x-e.x,_=w.y-e.y;return E*E+_*_},o=8,s,l=0,u,f=0,c=1/0,h=0;h<=i;h+=o)s=lx(n,h),l=a(s),l<c&&(u=s,f=h,c=l);o/=2;for(var d,v,p=0,g=0,m=0,b=0;o>.5;)p=f-o,d=lx(n,p),m=a(d),g=f+o,v=lx(n,g),b=a(v),p>=0&&m<c?(u=d,f=p,c=m):g<=i&&b<c?(u=v,f=g,c=b):o/=2;var y=xCe(t,f),x=Math.sqrt(c);return{closest:u,distance:x,segment:y}}function ECe(r,e){var t=wCe(r,e).distance;return Math.abs(t)<.001}function _Ce(r,e){e===void 0&&(e=.5);var t=r.slice(0,2),n=r.slice(2,4),i=r.slice(4,6),a=r.slice(6,8),o=Sf(t,n,e),s=Sf(n,i,e),l=Sf(i,a,e),u=Sf(o,s,e),f=Sf(s,l,e),c=Sf(u,f,e);return[["C"].concat(o,u,c),["C"].concat(f,l,a)]}function s4(r){return r.map(function(e,t,n){var i=t&&n[t-1].slice(-2).concat(e.slice(1)),a=t?mX(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return t?o=a?_Ce(i):[e,e]:o=[e],{s:e,ss:o,l:a}})}function bX(r,e,t){var n=s4(r),i=s4(e),a=n.length,o=i.length,s=n.filter(function(g){return g.l}).length,l=i.filter(function(g){return g.l}).length,u=n.filter(function(g){return g.l}).reduce(function(g,m){var b=m.l;return g+b},0)/s||0,f=i.filter(function(g){return g.l}).reduce(function(g,m){var b=m.l;return g+b},0)/l||0,c=t||Math.max(a,o),h=[u,f],d=[c-a,c-o],v=0,p=[n,i].map(function(g,m){return g.l===c?g.map(function(b){return b.s}):g.map(function(b,y){return v=y&&d[m]&&b.l>=h[m],d[m]-=v?1:0,v?b.ss:[b.s]}).flat()});return p[0].length===p[1].length?p:bX(p[0],p[1],c)}var SCe=1e-6;function SM(r){return Math.abs(r)<SCe?0:r<0?-1:1}function MCe(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function bT(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(MCe(o,s,[e,t]))return!0;SM(o[1]-t)>0!=SM(s[1]-t)>0&&SM(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}var l4=function(r,e,t){return r>=e&&r<=t};function CCe(r,e,t,n){var i=.001,a={x:t.x-r.x,y:t.y-r.y},o={x:e.x-r.x,y:e.y-r.y},s={x:n.x-t.x,y:n.y-t.y},l=o.x*s.y-o.y*s.x,u=l*l,f=o.x*o.x+o.y*o.y,c=s.x*s.x+s.y*s.y,h=null;if(u>i*f*c){var d=(a.x*s.y-a.y*s.x)/l,v=(a.x*o.y-a.y*o.x)/l;l4(d,0,1)&&l4(v,0,1)&&(h={x:r.x+d*o.x,y:r.y+d*o.y})}return h}function u4(r){for(var e=[],t=r.length,n=0;n<t-1;n++){var i=r[n],a=r[n+1];e.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=r[0],s=r[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function ACe(r,e){var t=!1;return r.forEach(function(n){if(CCe(n.from,n.to,e.from,e.to))return t=!0,!1}),t}function f4(r){var e=r.map(function(n){return n[0]}),t=r.map(function(n){return n[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function TCe(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function OCe(r,e){if(r.length<2||e.length<2)return!1;var t=f4(r),n=f4(e);if(!TCe(t,n))return!1;var i=!1;if(e.forEach(function(l){if(bT(r,l[0],l[1]))return i=!0,!1}),i||(r.forEach(function(l){if(bT(e,l[0],l[1]))return i=!0,!1}),i))return!0;var a=u4(r),o=u4(e),s=!1;return o.forEach(function(l){if(ACe(a,l))return s=!0,!1}),s}function kCe(r){var e=document.createElement("div");e.innerHTML=r;var t=e.childNodes[0];return t&&e.contains(t)&&e.removeChild(t),t}function ICe(r,e){if(r)return Object.keys(e).forEach(function(t){r.style[t]=e[t]}),r}const LCe=Object.freeze(Object.defineProperty({__proto__:null,Cache:TMe,angleTo:WMe,arcToCubic:uL,assign:Ev,augment:ZSe,clamp:U2e,clearAnimationFrame:KSe,clone:QSe,clonePath:sCe,contains:yw,createDOM:kCe,debounce:JSe,deepMix:iMe,difference:t2e,direction:fX,distanceSquareRoot:Ap,each:Xv,endsWith:I2e,equalizeSegments:bX,every:P2e,extend:oMe,filter:VH,find:o2e,findIndex:s2e,firstValue:u2e,fixedBase:V2e,flatten:c2e,flattenDeep:h2e,forIn:Xv,get:gMe,getDrawDirection:bCe,getPathArea:yX,getPathBBox:vCe,getPathBBoxTotalLength:pCe,getPointAtLength:lx,getRange:v2e,getRotatedCurve:mCe,getTotalLength:l0,getType:iX,getWrapBehavior:F2e,gradient:PMe,group:B2e,groupBy:tX,groupToMap:rX,has:n4,hasKey:n4,hasValue:mSe,head:T2e,identity:MMe,includes:yw,indexOf:lMe,isArguments:kSe,isArray:li,isArrayLike:Za,isBoolean:LSe,isDate:DSe,isDecimal:X2e,isElement:XSe,isEmpty:fMe,isEqual:lX,isEqualWith:cMe,isError:RSe,isEven:K2e,isFinite:BSe,isFunction:To,isInteger:Z2e,isMatch:XH,isNegative:J2e,isNil:pc,isNull:$Se,isNumber:ju,isNumberEqual:tSe,isObject:x_,isObjectLike:bw,isOdd:nSe,isPlainObject:Yv,isPointInPolygon:bT,isPointInStroke:ECe,isPolygonsIntersect:OCe,isPositive:aSe,isPrototype:aX,isRegExp:USe,isString:rc,isType:Ul,isUndefined:VSe,keys:HH,last:O2e,lowerCase:bSe,lowerFirst:wSe,map:dMe,mapValues:pMe,max:KH,maxBy:oSe,memoize:oX,min:qH,minBy:sSe,mix:Ev,mod:uSe,modifyCSS:ICe,noop:SMe,normalizePath:w_,number2color:z2e,omit:xMe,parseRadius:G2e,path2Absolute:pX,path2Curve:gX,path2String:XMe,pick:bMe,pull:y2e,pullAt:QH,reduce:JH,remove:_2e,requestAnimationFrame:YSe,reverseCurve:lCe,rgb2arr:UH,set:mMe,size:CMe,some:N2e,sortBy:S2e,startsWith:k2e,substitute:ESe,throttle:wMe,toArray:EMe,toCSSGradient:FMe,toDegree:hSe,toInteger:dSe,toRGB:uX,toRadian:gSe,toString:Hm,transform:UMe,union:C2e,uniq:eX,uniqueId:_Me,upperCase:SSe,upperFirst:CSe,values:nX,valuesOfKey:A2e,vertical:VMe,wrapBehavior:$2e},Symbol.toStringTag,{value:"Module"})),xX=jl(LCe);Object.defineProperty(sL,"__esModule",{value:!0});var PCe=xX,DCe=function(r){for(var e={},t=r.nodes().filter(function(c){var h;return!(!((h=r.children(c))===null||h===void 0)&&h.length)}),n=t.map(function(c){return r.node(c).rank}),i=(0,PCe.max)(n),a=[],o=0;o<i+1;o++)a.push([]);var s=function(c){var h;if(!e.hasOwnProperty(c)){e[c]=!0;var d=r.node(c);isNaN(d.rank)||a[d.rank].push(c),(h=r.successors(c))===null||h===void 0||h.forEach(function(v){return s(v)})}},l=t.sort(function(c,h){return r.node(c).rank-r.node(h).rank}),u=l.filter(function(c){return r.node(c).fixorder!==void 0}),f=u.sort(function(c,h){return r.node(c).fixorder-r.node(h).fixorder});return f==null||f.forEach(function(c){isNaN(r.node(c).rank)||a[r.node(c).rank].push(c),e[c]=!0}),l==null||l.forEach(s),a};sL.default=DCe;var fL={};Object.defineProperty(fL,"__esModule",{value:!0});var NCe=Ao,RCe=function(r,e,t){for(var n=(0,NCe.zipObject)(t,t.map(function(f,c){return c})),i=e.map(function(f){var c,h=(c=r.outEdges(f))===null||c===void 0?void 0:c.map(function(d){return{pos:n[d.w]||0,weight:r.edge(d).weight}});return h==null?void 0:h.sort(function(d,v){return d.pos-v.pos})}),a=i.flat().filter(function(f){return f!==void 0}),o=1;o<t.length;)o<<=1;var s=2*o-1;o-=1;var l=Array(s).fill(0,0,s),u=0;return a==null||a.forEach(function(f){if(f){var c=f.pos+o;l[c]+=f.weight;for(var h=0;c>0;)c%2&&(h+=l[c+1]),c=c-1>>1,l[c]+=f.weight;u+=f.weight*h}}),u},BCe=function(r,e){for(var t=0,n=1;n<(e==null?void 0:e.length);n+=1)t+=RCe(r,e[n-1],e[n]);return t};fL.default=BCe;var cL={};Object.defineProperty(cL,"__esModule",{value:!0});var FCe=Gu,$Ce=function(r,e,t){var n=zCe(r),i=new FCe.Graph({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return r.nodes().forEach(function(a){var o,s=r.node(a),l=r.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,l||n),(o=r[t](a))===null||o===void 0||o.forEach(function(u){var f=u.v===a?u.w:u.v,c=i.edgeFromArgs(f,a),h=c!==void 0?c.weight:0;i.setEdge(f,a,{weight:r.edge(u).weight+h})}),s.hasOwnProperty("minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i},zCe=function(r){for(var e;r.hasNode(e="_root".concat(Math.random())););return e};cL.default=$Ce;var hL={};Object.defineProperty(hL,"__esModule",{value:!0});var GCe=function(r,e,t){var n={},i;t==null||t.forEach(function(a){for(var o=r.parent(a),s,l;o;){if(s=r.parent(o),s?(l=n[s],n[s]=o):(l=i,i=o),l&&l!==o){e.setEdge(l,o);return}o=s}})};hL.default=GCe;var dL={},vL={};Object.defineProperty(vL,"__esModule",{value:!0});var jCe=function(r,e){return e.map(function(t){var n=r.inEdges(t);if(!(n!=null&&n.length))return{v:t};{var i={sum:0,weight:0};return n==null||n.forEach(function(a){var o=r.edge(a),s=r.node(a.v);i.sum+=o.weight*s.order,i.weight+=o.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}})};vL.default=jCe;var pL={};Object.defineProperty(pL,"__esModule",{value:!0});var UCe=function(r,e){var t,n,i,a={};r==null||r.forEach(function(s,l){a[s.v]={i:l,indegree:0,in:[],out:[],vs:[s.v]};var u=a[s.v];s.barycenter!==void 0&&(u.barycenter=s.barycenter,u.weight=s.weight)}),(t=e.edges())===null||t===void 0||t.forEach(function(s){var l=a[s.v],u=a[s.w];l!==void 0&&u!==void 0&&(u.indegree++,l.out.push(a[s.w]))});var o=(i=(n=Object.values(a)).filter)===null||i===void 0?void 0:i.call(n,function(s){return!s.indegree});return WCe(o)},WCe=function(r){for(var e,t,n=[],i=function(u){return function(f){f.merged||(f.barycenter===void 0||u.barycenter===void 0||f.barycenter>=u.barycenter)&&VCe(u,f)}},a=function(u){return function(f){f.in.push(u),--f.indegree===0&&r.push(f)}},o=function(){var u=r.pop();n.push(u),(e=u.in.reverse())===null||e===void 0||e.forEach(function(f){return i(u)(f)}),(t=u.out)===null||t===void 0||t.forEach(function(f){return a(u)(f)})};r!=null&&r.length;)o();var s=n.filter(function(u){return!u.merged}),l=["vs","i","barycenter","weight"];return s.map(function(u){var f={};return l==null||l.forEach(function(c){u[c]!==void 0&&(f[c]=u[c])}),f})},VCe=function(r,e){var t,n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),r.vs=(t=e.vs)===null||t===void 0?void 0:t.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(e.i,r.i),e.merged=!0};pL.default=UCe;var gL={};Object.defineProperty(gL,"__esModule",{value:!0});var HCe=Ao,XCe=function(r,e,t,n){var i=(0,HCe.partition)(r,function(h){var d=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return n?!d&&h.hasOwnProperty("barycenter"):d||h.hasOwnProperty("barycenter")}),a=i.lhs,o=i.rhs.sort(function(h,d){return-h.i- -d.i}),s=[],l=0,u=0,f=0;a==null||a.sort(YCe(!!e,!!t)),f=c4(s,o,f),a==null||a.forEach(function(h){var d;f+=(d=h.vs)===null||d===void 0?void 0:d.length,s.push(h.vs),l+=h.barycenter*h.weight,u+=h.weight,f=c4(s,o,f)});var c={vs:s.flat()};return u&&(c.barycenter=l/u,c.weight=u),c},c4=function(r,e,t){for(var n=t,i;e.length&&(i=e[e.length-1]).i<=n;)e.pop(),r==null||r.push(i.vs),n++;return n},YCe=function(r,e){return function(t,n){if(t.fixorder!==void 0&&n.fixorder!==void 0)return t.fixorder-n.fixorder;if(t.barycenter<n.barycenter)return-1;if(t.barycenter>n.barycenter)return 1;if(e&&t.order!==void 0&&n.order!==void 0){if(t.order<n.order)return-1;if(t.order>n.order)return 1}return r?n.i-t.i:t.i-n.i}};gL.default=XCe;var mL=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(dL,"__esModule",{value:!0});var KCe=mL(vL),qCe=mL(pL),ZCe=mL(gL),wX=function(r,e,t,n,i,a){var o,s,l,u,f=r.children(e),c=r.node(e),h=c?c.borderLeft:void 0,d=c?c.borderRight:void 0,v={};h&&(f=f==null?void 0:f.filter(function(x){return x!==h&&x!==d}));var p=(0,KCe.default)(r,f||[]);p==null||p.forEach(function(x){var w;if(!((w=r.children(x.v))===null||w===void 0)&&w.length){var E=wX(r,x.v,t,n,a);v[x.v]=E,E.hasOwnProperty("barycenter")&&JCe(x,E)}});var g=(0,qCe.default)(p,t);QCe(g,v),(o=g.filter(function(x){return x.vs.length>0}))===null||o===void 0||o.forEach(function(x){var w=r.node(x.vs[0]);w&&(x.fixorder=w.fixorder,x.order=w.order)});var m=(0,ZCe.default)(g,n,i,a);if(h&&(m.vs=[h,m.vs,d].flat(),!((s=r.predecessors(h))===null||s===void 0)&&s.length)){var b=r.node(((l=r.predecessors(h))===null||l===void 0?void 0:l[0])||""),y=r.node(((u=r.predecessors(d))===null||u===void 0?void 0:u[0])||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+b.order+y.order)/(m.weight+2),m.weight+=2}return m},QCe=function(r,e){r==null||r.forEach(function(t){var n,i=(n=t.vs)===null||n===void 0?void 0:n.map(function(a){return e[a]?e[a].vs:a});t.vs=i.flat()})},JCe=function(r,e){r.barycenter!==void 0?(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight):(r.barycenter=e.barycenter,r.weight=e.weight)};dL.default=wX;var Xm=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oL,"__esModule",{value:!0});var h4=Xm(sL),d4=Xm(fL),eAe=Xm(cL),tAe=Xm(hL),rAe=Xm(dL),v4=Vn(),nAe=Gu,MM=Ao,iAe=function(r,e){for(var t=(0,MM.maxRank)(r),n=[],i=[],a=1;a<t+1;a++)n.push(a);for(var a=t-1;a>-1;a--)i.push(a);var o=p4(r,n,"inEdges"),s=p4(r,i,"outEdges"),l=(0,h4.default)(r);CM(r,l);for(var u=Number.POSITIVE_INFINITY,f,a=0,c=0;c<4;++a,++c){g4(a%2?o:s,a%4>=2,!1,e),l=(0,MM.buildLayerMatrix)(r);var h=(0,d4.default)(r,l);h<u&&(c=0,f=(0,v4.clone)(l),u=h)}l=(0,h4.default)(r),CM(r,l);for(var a=0,c=0;c<4;++a,++c){g4(a%2?o:s,a%4>=2,!0,e),l=(0,MM.buildLayerMatrix)(r);var h=(0,d4.default)(r,l);h<u&&(c=0,f=(0,v4.clone)(l),u=h)}CM(r,f)},p4=function(r,e,t){return e.map(function(n){return(0,eAe.default)(r,n,t)})},g4=function(r,e,t,n){var i=new nAe.Graph;r==null||r.forEach(function(a){for(var o,s=a.graph().root,l=(0,rAe.default)(a,s,i,e,t,n),u=0;u<((o=l.vs)===null||o===void 0?void 0:o.length);u++){var f=a.node(l.vs[u]);f&&(f.order=u)}(0,tAe.default)(a,i,l.vs)})},CM=function(r,e){e==null||e.forEach(function(t){t==null||t.forEach(function(n,i){r.node(n).order=i})})};oL.default=iAe;var yL={},EX={};(function(r){var e=Re&&Re.__extends||function(){var x=function(w,E){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(_[C]=S[C])},x(w,E)};return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");x(w,E);function _(){this.constructor=w}w.prototype=E===null?Object.create(E):(_.prototype=E.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.width=r.sep=r.positionX=r.balance=r.alignCoordinates=r.findSmallestWidthAlignment=r.buildBlockGraph=r.horizontalCompaction=r.verticalAlignment=r.hasConflict=r.addConflict=r.findOtherInnerSegmentNode=r.findType2Conflicts=r.findType1Conflicts=void 0;var t=b_,n=xX,i=Ao,a=function(x){e(w,x);function w(){return x!==null&&x.apply(this,arguments)||this}return w}(t.Graph),o=function(x,w){var E={},_=function(S,C){var M=0,T=0,A=S.length,O=C==null?void 0:C[(C==null?void 0:C.length)-1];return C==null||C.forEach(function(L,N){var P,R=(0,r.findOtherInnerSegmentNode)(x,L),G=R?x.node(R).order:A;(R||L===O)&&((P=C.slice(T,N+1))===null||P===void 0||P.forEach(function(D){var B;(B=x.predecessors(D))===null||B===void 0||B.forEach(function(Y){var ee,ne=x.node(Y),Q=ne.order;(Q<M||G<Q)&&!(ne.dummy&&(!((ee=x.node(D))===null||ee===void 0)&&ee.dummy))&&(0,r.addConflict)(E,Y,D)})}),T=N+1,M=G)}),C};return w!=null&&w.length&&w.reduce(_),E};r.findType1Conflicts=o;var s=function(x,w){var E={};function _(T,A,O,L,N){for(var P,R,G,D=A;D<O;D++)G=T[D],!((P=x.node(G))===null||P===void 0)&&P.dummy&&((R=x.predecessors(G))===null||R===void 0||R.forEach(function(B){var Y=x.node(B);Y.dummy&&(Y.order<L||Y.order>N)&&(0,r.addConflict)(E,B,G)}))}function S(T){return JSON.stringify(T.slice(1))}function C(T,A){var O=S(T);A.get(O)||(_.apply(void 0,T),A.set(O,!0))}var M=function(T,A){var O=-1,L,N=0,P=new Map;return A==null||A.forEach(function(R,G){var D;if(((D=x.node(R))===null||D===void 0?void 0:D.dummy)==="border"){var B=x.predecessors(R)||[];B.length&&(L=x.node(B[0]).order,C([A,N,G,O,L],P),N=G,O=L)}C([A,N,A.length,L,T.length],P)}),A};return w!=null&&w.length&&w.reduce(M),E};r.findType2Conflicts=s;var l=function(x,w){var E,_;if(!((E=x.node(w))===null||E===void 0)&&E.dummy)return(_=x.predecessors(w))===null||_===void 0?void 0:_.find(function(S){return x.node(S).dummy})};r.findOtherInnerSegmentNode=l;var u=function(x,w,E){var _=w,S=E;if(_>S){var C=_;_=S,S=C}var M=x[_];M||(x[_]=M={}),M[S]=!0};r.addConflict=u;var f=function(x,w,E){var _=w,S=E;if(_>S){var C=w;_=S,S=C}return!!x[_]};r.hasConflict=f;var c=function(x,w,E,_){var S={},C={},M={};return w==null||w.forEach(function(T){T==null||T.forEach(function(A,O){S[A]=A,C[A]=A,M[A]=O})}),w==null||w.forEach(function(T){var A=-1;T==null||T.forEach(function(O){var L=_(O);if(L.length){L=L.sort(function(D,B){return M[D]-M[B]});for(var N=(L.length-1)/2,P=Math.floor(N),R=Math.ceil(N);P<=R;++P){var G=L[P];C[O]===O&&A<M[G]&&!(0,r.hasConflict)(E,O,G)&&(C[G]=O,C[O]=S[O]=S[G],A=M[G])}}})}),{root:S,align:C}};r.verticalAlignment=c;var h=function(x,w,E,_,S){var C,M={},T=(0,r.buildBlockGraph)(x,w,E,S),A=S?"borderLeft":"borderRight",O=function(P,R){for(var G=T.nodes(),D=G.pop(),B={};D;)B[D]?P(D):(B[D]=!0,G.push(D),G=G.concat(R(D))),D=G.pop()},L=function(P){M[P]=(T.inEdges(P)||[]).reduce(function(R,G){return Math.max(R,(M[G.v]||0)+T.edge(G))},0)},N=function(P){var R=(T.outEdges(P)||[]).reduce(function(D,B){return Math.min(D,(M[B.w]||0)-T.edge(B))},Number.POSITIVE_INFINITY),G=x.node(P);R!==Number.POSITIVE_INFINITY&&G.borderType!==A&&(M[P]=Math.max(M[P],R))};return O(L,T.predecessors.bind(T)),O(N,T.successors.bind(T)),(C=Object.values(_))===null||C===void 0||C.forEach(function(P){M[P]=M[E[P]]}),M};r.horizontalCompaction=h;var d=function(x,w,E,_){var S=new a,C=x.graph(),M=(0,r.sep)(C.nodesep,C.edgesep,_);return w==null||w.forEach(function(T){var A;T==null||T.forEach(function(O){var L=E[O];if(S.setNode(L),A){var N=E[A],P=S.edgeFromArgs(N,L);S.setEdge(N,L,Math.max(M(x,O,A),P||0))}A=O})}),S};r.buildBlockGraph=d;var v=function(x,w){return(0,i.minBy)(Object.values(w),function(E){var _,S=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;return(_=Object.keys(E))===null||_===void 0||_.forEach(function(M){var T=E[M],A=(0,r.width)(x,M)/2;S=Math.max(T+A,S),C=Math.min(T-A,C)}),S-C})};r.findSmallestWidthAlignment=v;function p(x,w){var E=Object.values(w),_=(0,n.min)(E),S=(0,n.max)(E);["u","d"].forEach(function(C){["l","r"].forEach(function(M){var T=C+M,A=x[T],O;if(A!==w){var L=Object.values(A);O=M==="l"?_-(0,n.min)(L):S-(0,n.max)(L),O&&(x[T]={},Object.keys(A).forEach(function(N){x[T][N]=A[N]+O}))}})})}r.alignCoordinates=p;var g=function(x,w){var E={};return Object.keys(x.ul).forEach(function(_){if(w)E[_]=x[w.toLowerCase()][_];else{var S=Object.values(x).map(function(C){return C[_]});E[_]=(S[0]+S[1])/2}}),E};r.balance=g;var m=function(x){var w=(0,i.buildLayerMatrix)(x),E=Object.assign((0,r.findType1Conflicts)(x,w),(0,r.findType2Conflicts)(x,w)),_={},S;["u","d"].forEach(function(M){S=M==="u"?w:Object.values(w).reverse(),["l","r"].forEach(function(T){T==="r"&&(S=S.map(function(N){return Object.values(N).reverse()}));var A=(M==="u"?x.predecessors:x.successors).bind(x),O=(0,r.verticalAlignment)(x,S,E,A),L=(0,r.horizontalCompaction)(x,S,O.root,O.align,T==="r");T==="r"&&Object.keys(L).forEach(function(N){L[N]=-L[N]}),_[M+T]=L})});var C=(0,r.findSmallestWidthAlignment)(x,_);return p(_,C),(0,r.balance)(_,x.graph().align)};r.positionX=m;var b=function(x,w,E){return function(_,S,C){var M=_.node(S),T=_.node(C),A=0,O;if(A+=M.width/2,M.hasOwnProperty("labelpos"))switch((M.labelpos||"").toLowerCase()){case"l":O=-M.width/2;break;case"r":O=M.width/2;break}if(O&&(A+=E?O:-O),O=0,A+=(M.dummy?w:x)/2,A+=(T.dummy?w:x)/2,A+=T.width/2,T.labelpos)switch((T.labelpos||"").toLowerCase()){case"l":O=T.width/2;break;case"r":O=-T.width/2;break}return O&&(A+=E?O:-O),O=0,A}};r.sep=b;var y=function(x,w){return x.node(w).width||0};r.width=y})(EX);var m4=Re&&Re.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(yL,"__esModule",{value:!0});var bL=Ao,Vc=EX,aAe=function(r){var e=(0,bL.buildLayerMatrix)(r),t=r.graph().ranksep,n=0;e==null||e.forEach(function(i){var a=i.map(function(s){return r.node(s).height}),o=Math.max.apply(Math,m4(m4([],a,!1),[0],!1));i==null||i.forEach(function(s){r.node(s).y=n+o/2}),n+=o+t})},oAe=function(r){var e=(0,bL.buildLayerMatrix)(r),t=Object.assign((0,Vc.findType1Conflicts)(r,e),(0,Vc.findType2Conflicts)(r,e)),n={},i=[];["u","d"].forEach(function(o){i=o==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(s){s==="r"&&(i=i.map(function(c){return Object.values(c).reverse()}));var l=(o==="u"?r.predecessors:r.successors).bind(r),u=(0,Vc.verticalAlignment)(r,i,t,l),f=(0,Vc.horizontalCompaction)(r,i,u.root,u.align,s==="r");s==="r"&&Object.keys(f).forEach(function(c){return f[c]=-f[c]}),n[o+s]=f})});var a=(0,Vc.findSmallestWidthAlignment)(r,n);return a&&(0,Vc.alignCoordinates)(n,a),(0,Vc.balance)(n,r.graph().align)},sAe=function(r){var e,t=(0,bL.asNonCompoundGraph)(r);aAe(t);var n=oAe(t);(e=Object.keys(n))===null||e===void 0||e.forEach(function(i){t.node(i).x=n[i]})};yL.default=sAe;var xL={};Object.defineProperty(xL,"__esModule",{value:!0});var lAe=function(r,e){for(var t=r.nodes().filter(function(s){var l;return!(!((l=r.children(s))===null||l===void 0)&&l.length)}),n=t.map(function(s){return r.node(s).rank}),i=Math.max.apply(Math,n),a=[],o=0;o<i+1;o++)a[o]=[];e==null||e.forEach(function(s){var l=r.node(s);!l||l!=null&&l.dummy||isNaN(l.rank)||(l.fixorder=a[l.rank].length,a[l.rank].push(s))})};xL.default=lAe;var xw=Re&&Re.__assign||function(){return xw=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},xw.apply(this,arguments)},Wl=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(YI,"__esModule",{value:!0});var y4=Wl(KI),b4=Wl(eL),uAe=Wl(tL),Al=Ao,fAe=Wl(rL),x4=Wl(nL),cAe=Wl(iL),w4=Wl(aL),hAe=Wl(oL),dAe=Wl(yL),vAe=Wl(xL),pAe=Gu,gAe=function(r,e){var t=e&&e.debugTiming?Al.time:Al.notime;t("layout",function(){e&&!e.keepNodeOrder&&e.prevGraph&&t("  inheritOrder",function(){yAe(r,e.prevGraph)});var n=t("  buildLayoutGraph",function(){return CAe(r)});e&&e.edgeLabelSpace===!1||t("  makeSpaceForEdgeLabels",function(){AAe(n)});try{t("  runLayout",function(){mAe(n,t,e)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}throw i}t("  updateInputGraph",function(){bAe(r,n)})})},mAe=function(r,e,t){e("    removeSelfEdges",function(){RAe(r)}),e("    acyclic",function(){y4.default.run(r)}),e("    nestingGraph.run",function(){x4.default.run(r)}),e("    rank",function(){(0,uAe.default)((0,Al.asNonCompoundGraph)(r))}),e("    injectEdgeLabelProxies",function(){TAe(r)}),e("    removeEmptyRanks",function(){(0,Al.removeEmptyRanks)(r)}),e("    nestingGraph.cleanup",function(){x4.default.cleanup(r)}),e("    normalizeRanks",function(){(0,Al.normalizeRanks)(r)}),e("    assignRankMinMax",function(){OAe(r)}),e("    removeEdgeLabelProxies",function(){kAe(r)}),e("    normalize.run",function(){b4.default.run(r)}),e("    parentDummyChains",function(){(0,fAe.default)(r)}),e("    addBorderSegments",function(){(0,cAe.default)(r)}),t&&t.keepNodeOrder&&e("    initDataOrder",function(){(0,vAe.default)(r,t.nodeOrder)}),e("    order",function(){(0,hAe.default)(r,t==null?void 0:t.keepNodeOrder)}),e("    insertSelfEdges",function(){BAe(r)}),e("    adjustCoordinateSystem",function(){w4.default.adjust(r)}),e("    position",function(){(0,dAe.default)(r)}),e("    positionSelfEdges",function(){FAe(r)}),e("    removeBorderNodes",function(){NAe(r)}),e("    normalize.undo",function(){b4.default.undo(r)}),e("    fixupEdgeLabelCoords",function(){PAe(r)}),e("    undoCoordinateSystem",function(){w4.default.undo(r)}),e("    translateGraph",function(){IAe(r)}),e("    assignNodeIntersects",function(){LAe(r)}),e("    reversePoints",function(){DAe(r)}),e("    acyclic.undo",function(){y4.default.undo(r)})},yAe=function(r,e){r.nodes().forEach(function(t){var n=r.node(t),i=e.node(t);i!==void 0?(n.fixorder=i._order,delete i._order):delete n.fixorder})},bAe=function(r,e){r.nodes().forEach(function(t){var n,i=r.node(t);if(i){var a=e.node(t);i.x=a.x,i.y=a.y,i._order=a.order,i._rank=a.rank,!((n=e.children(t))===null||n===void 0)&&n.length&&(i.width=a.width,i.height=a.height)}}),r.edges().forEach(function(t){var n=r.edge(t),i=e.edge(t);n.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height},xAe=["nodesep","edgesep","ranksep","marginx","marginy"],wAe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},AM=["acyclicer","ranker","rankdir","align"],EAe=["width","height","layer","fixorder"],_Ae={width:0,height:0},SAe=["minlen","weight","width","height","labeloffset"],MAe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},TM=["labelpos"],CAe=function(r){var e=new pAe.Graph({multigraph:!0,compound:!0}),t=kM(r.graph()),n={};return AM==null||AM.forEach(function(i){t[i]!==void 0&&(n[i]=t[i])}),e.setGraph(Object.assign({},wAe,OM(t,xAe),n)),r.nodes().forEach(function(i){var a=kM(r.node(i)),o=xw(xw({},_Ae),a),s=OM(o,EAe);e.setNode(i,s),e.setParent(i,r.parent(i))}),r.edges().forEach(function(i){var a=kM(r.edge(i)),o={};TM==null||TM.forEach(function(s){a[s]!==void 0&&(o[s]=a[s])}),e.setEdgeObj(i,Object.assign({},MAe,OM(a,SAe),o))}),e},AAe=function(r){var e=r.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,r.nodes().forEach(function(t){var n=r.node(t);isNaN(n.layer)||n.layer||(n.layer=0)}),r.edges().forEach(function(t){var n,i=r.edge(t);i.minlen*=2,((n=i.labelpos)===null||n===void 0?void 0:n.toLowerCase())!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})},TAe=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),i=r.node(e.w),a={e,rank:(i.rank-n.rank)/2+n.rank};(0,Al.addDummyNode)(r,"edge-proxy",a,"_ep")}})},OAe=function(r){var e=0;r.nodes().forEach(function(t){var n,i,a=r.node(t);a.borderTop&&(a.minRank=(n=r.node(a.borderTop))===null||n===void 0?void 0:n.rank,a.maxRank=(i=r.node(a.borderBottom))===null||i===void 0?void 0:i.rank,e=Math.max(e,a.maxRank||-1/0))}),r.graph().maxRank=e},kAe=function(r){r.nodes().forEach(function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})},IAe=function(r){var e,t=0,n,i=0,a=r.graph(),o=a.marginx||0,s=a.marginy||0,l=function(u){if(u){var f=u.x,c=u.y,h=u.width,d=u.height;!isNaN(f)&&!isNaN(h)&&(e===void 0&&(e=f-h/2),e=Math.min(e,f-h/2),t=Math.max(t,f+h/2)),!isNaN(c)&&!isNaN(d)&&(n===void 0&&(n=c-d/2),n=Math.min(n,c-d/2),i=Math.max(i,c+d/2))}};r.nodes().forEach(function(u){l(r.node(u))}),r.edges().forEach(function(u){var f=r.edge(u);f!=null&&f.hasOwnProperty("x")&&l(f)}),e-=o,n-=s,r.nodes().forEach(function(u){var f=r.node(u);f&&(f.x-=e,f.y-=n)}),r.edges().forEach(function(u){var f,c=r.edge(u);(f=c.points)===null||f===void 0||f.forEach(function(h){h.x-=e,h.y-=n}),c.hasOwnProperty("x")&&(c.x-=e),c.hasOwnProperty("y")&&(c.y-=n)}),a.width=t-e+o,a.height=i-n+s},LAe=function(r){r.edges().forEach(function(e){var t=r.edge(e),n=r.node(e.v),i=r.node(e.w),a,o;t.points?(a=t.points[0],o=t.points[t.points.length-1]):(t.points=[],a=i,o=n),t.points.unshift((0,Al.intersectRect)(n,a)),t.points.push((0,Al.intersectRect)(i,o))})},PAe=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t!=null&&t.hasOwnProperty("x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})},DAe=function(r){r.edges().forEach(function(e){var t,n=r.edge(e);n.reversed&&((t=n.points)===null||t===void 0||t.reverse())})},NAe=function(r){r.nodes().forEach(function(e){var t,n,i;if(!((t=r.children(e))===null||t===void 0)&&t.length){var a=r.node(e),o=r.node(a.borderTop),s=r.node(a.borderBottom),l=r.node(a.borderLeft[((n=a.borderLeft)===null||n===void 0?void 0:n.length)-1]),u=r.node(a.borderRight[((i=a.borderRight)===null||i===void 0?void 0:i.length)-1]);a.width=Math.abs((u==null?void 0:u.x)-(l==null?void 0:l.x))||10,a.height=Math.abs((s==null?void 0:s.y)-(o==null?void 0:o.y))||10,a.x=((l==null?void 0:l.x)||0)+a.width/2,a.y=((o==null?void 0:o.y)||0)+a.height/2}}),r.nodes().forEach(function(e){var t;((t=r.node(e))===null||t===void 0?void 0:t.dummy)==="border"&&r.removeNode(e)})},RAe=function(r){r.edges().forEach(function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdgeObj(e)}})},BAe=function(r){var e=(0,Al.buildLayerMatrix)(r);e==null||e.forEach(function(t){var n=0;t==null||t.forEach(function(i,a){var o,s=r.node(i);s.order=a+n,(o=s.selfEdges)===null||o===void 0||o.forEach(function(l){(0,Al.addDummyNode)(r,"selfedge",{width:l.label.width,height:l.label.height,rank:s.rank,order:a+ ++n,e:l.e,label:l.label},"_se")}),delete s.selfEdges})})},FAe=function(r){r.nodes().forEach(function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),i=n.x+n.width/2,a=n.y,o=t.x-i,s=n.height/2;r.setEdgeObj(t.e,t.label),r.removeNode(e),t.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],t.label.x=t.x,t.label.y=t.y}})},OM=function(r,e){var t={};return e==null||e.forEach(function(n){r[n]!==void 0&&(t[n]=+r[n])}),t},kM=function(r){r===void 0&&(r={});var e={};return Object.keys(r).forEach(function(t){e[t.toLowerCase()]=r[t]}),e};YI.default=gAe;var $Ae=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(XI,"__esModule",{value:!0});var zAe=$Ae(YI),E4=Ao;XI.default={layout:zAe.default,util:{time:E4.time,notime:E4.notime}};var GAe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jAe=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.DagreLayout=void 0;var UAe=jAe(XI),ao=Vn(),WAe=ei,_4=Gu,VAe=function(r){GAe(e,r);function e(t){var n=r.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(i){var a=n,o=a.nodes,s=o.find(function(u){return u.id===i});if(s){var l=s.layout!==!1;return l}return!0},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t=this,n,i,a,o,s=this,l=s.nodes,u=s.nodeSize,f=s.rankdir,c=s.combos,h=s.begin,d=s.radial,v=s.comboEdges,p=v===void 0?[]:v,g=s.vedges,m=g===void 0?[]:g;if(l){var b=s.edges||[],y=new _4.Graph({multigraph:!0,compound:!0});s.nodeMap={};var x={};l.forEach(function(F){s.nodeMap[F.id]=F,F.comboId&&(x[F.comboId]=x[F.comboId]||[],x[F.comboId].push(F.id))});var w=[],E={};!((n=s.nodeOrder)===null||n===void 0)&&n.length?(s.nodeOrder.forEach(function(F){E[F]=!0,w.push(s.nodeMap[F])}),l.forEach(function(F){E[F.id]||w.push(F)})):w=l;var _;u?(0,ao.isArray)(u)?_=function(){return u}:_=function(){return[u,u]}:_=function(F){return F.size?(0,ao.isArray)(F.size)?F.size:(0,ao.isObject)(F.size)?[F.size.width||40,F.size.height||40]:[F.size,F.size]:[40,40]};var S=(0,ao.getFunc)(s.ranksep,50,s.ranksepFunc),C=(0,ao.getFunc)(s.nodesep,50,s.nodesepFunc),M=C,T=S;(f==="LR"||f==="RL")&&(M=S,T=C),y.setDefaultEdgeLabel(function(){return{}}),y.setGraph(s);var A={};this.sortByCombo&&c&&c.forEach(function(F){if(A[F.id]=F,F.collapsed){var k=_(F),ue=T(F),ce=M(F),X=k[0]+2*ce,ae=k[1]+2*ue;y.setNode(F.id,{width:X,height:ae})}F.parentId&&(A[F.parentId]||y.setNode(F.parentId,{}),y.setParent(F.id,F.parentId))}),w.filter(function(F){return F.layout!==!1}).forEach(function(F){var k=_(F),ue=T(F),ce=M(F),X=k[0]+2*ce,ae=k[1]+2*ue,Ce=F.layer;(0,ao.isNumber)(Ce)?y.setNode(F.id,{width:X,height:ae,layer:Ce}):y.setNode(F.id,{width:X,height:ae}),t.sortByCombo&&F.comboId&&(A[F.comboId]||(A[F.comboId]={id:F.comboId},y.setNode(F.comboId,{})),y.setParent(F.id,F.comboId))}),b.forEach(function(F){var k=(0,ao.getEdgeTerminal)(F,"source"),ue=(0,ao.getEdgeTerminal)(F,"target");t.layoutNode(k)&&t.layoutNode(ue)&&y.setEdge(k,ue,{weight:F.weight||1})}),(i=p==null?void 0:p.concat(m||[]))===null||i===void 0||i.forEach(function(F){var k,ue,ce=F.source,X=F.target,ae=!((k=A[ce])===null||k===void 0)&&k.collapsed?[ce]:x[ce]||[ce],Ce=!((ue=A[X])===null||ue===void 0)&&ue.collapsed?[X]:x[X]||[X];ae.forEach(function(ke){Ce.forEach(function(Ke){y.setEdge(ke,Ke,{weight:F.weight||1})})})});var O=void 0;!((a=s.preset)===null||a===void 0)&&a.nodes&&(O=new _4.Graph({multigraph:!0,compound:!0}),s.preset.nodes.forEach(function(F){O==null||O.setNode(F.id,F)})),UAe.default.layout(y,{prevGraph:O,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});var L=[0,0];if(h){var N=1/0,P=1/0;y.nodes().forEach(function(F){var k=y.node(F);N>k.x&&(N=k.x),P>k.y&&(P=k.y)}),y.edges().forEach(function(F){var k,ue=y.edge(F);(k=ue.points)===null||k===void 0||k.forEach(function(ce){N>ce.x&&(N=ce.x),P>ce.y&&(P=ce.y)})}),L[0]=h[0]-N,L[1]=h[1]-P}var R=f==="LR"||f==="RL";if(d){var G=this,D=G.focusNode,B=G.ranksep,Y=G.getRadialPos,ee=(0,ao.isString)(D)?D:D==null?void 0:D.id,ne=ee?(o=y.node(ee))===null||o===void 0?void 0:o._rank:0,Q=[],ye=R?"y":"x",Le=R?"height":"width",Fe=1/0,_e=-1/0;y.nodes().forEach(function(F){var k=y.node(F);if(s.nodeMap[F]){var ue=C(s.nodeMap[F]);if(ne===0)Q[k._rank]||(Q[k._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Q[k._rank].nodes.push(F),Q[k._rank].totalWidth+=ue*2+k[Le],Q[k._rank].maxSize<Math.max(k.width,k.height)&&(Q[k._rank].maxSize=Math.max(k.width,k.height));else{var ce=k._rank-ne;if(ce===0)Q[ce]||(Q[ce]={nodes:[],totalWidth:0,maxSize:-1/0}),Q[ce].nodes.push(F),Q[ce].totalWidth+=ue*2+k[Le],Q[ce].maxSize<Math.max(k.width,k.height)&&(Q[ce].maxSize=Math.max(k.width,k.height));else{var X=Math.abs(ce);Q[X]||(Q[X]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Q[X].totalWidth+=ue*2+k[Le],Q[X].maxSize<Math.max(k.width,k.height)&&(Q[X].maxSize=Math.max(k.width,k.height)),ce<0?Q[X].left.push(F):Q[X].right.push(F)}}var ae=k[ye]-k[Le]/2-ue,Ce=k[ye]+k[Le]/2+ue;ae<Fe&&(Fe=ae),Ce>_e&&(_e=Ce)}});var Ve=B||50,Xe={},vt=(_e-Fe)/.9,bt=[(Fe+_e-vt)*.5,(Fe+_e+vt)*.5],te=function(F,k,ue,ce){ue===void 0&&(ue=-1/0),ce===void 0&&(ce=[0,1]);var X=ue;return F.forEach(function(ae){var Ce=y.node(ae);Xe[ae]=k;var ke=Y(Ce[ye],bt,vt,k,ce),Ke=ke.x,Et=ke.y;if(s.nodeMap[ae]){s.nodeMap[ae].x=Ke+L[0],s.nodeMap[ae].y=Et+L[1],s.nodeMap[ae]._order=Ce._order;var jt=S(s.nodeMap[ae]);X<jt&&(X=jt)}}),X},H=!0,de=0;Q.forEach(function(F){var k,ue,ce,X,ae,Ce,ke;if(!(!(!((k=F==null?void 0:F.nodes)===null||k===void 0)&&k.length)&&!(!((ue=F==null?void 0:F.left)===null||ue===void 0)&&ue.length)&&!(!((ce=F==null?void 0:F.right)===null||ce===void 0)&&ce.length))){if(H&&F.nodes.length===1){var Ke=F.nodes[0];if(!s.nodeMap[Ke])return;s.nodeMap[Ke].x=L[0],s.nodeMap[Ke].y=L[1],Xe[F.nodes[0]]=0,Ve=S(s.nodeMap[Ke]),H=!1;return}Ve=Math.max(Ve,F.totalWidth/(2*Math.PI));var Et=-1/0;if(ne===0||!((X=F.nodes)===null||X===void 0)&&X.length)Et=te(F.nodes,Ve,Et,[0,1]);else{var jt=((ae=F.left)===null||ae===void 0?void 0:ae.length)/(((Ce=F.left)===null||Ce===void 0?void 0:Ce.length)+((ke=F.right)===null||ke===void 0?void 0:ke.length));Et=te(F.left,Ve,Et,[0,jt]),Et=te(F.right,Ve,Et,[jt+.05,1])}Ve+=Et,H=!1,de-F.maxSize}}),y.edges().forEach(function(F){var k,ue,ce,X=y.edge(F),ae=b.findIndex(function(zr){var lr=(0,ao.getEdgeTerminal)(zr,"source"),Lr=(0,ao.getEdgeTerminal)(zr,"target");return lr===F.v&&Lr===F.w});if(!(ae<=-1)&&s.edgeLabelSpace&&s.controlPoints&&b[ae].type!=="loop"){var Ce=ye==="x"?"y":"x",ke=(k=X==null?void 0:X.points)===null||k===void 0?void 0:k.slice(1,X.points.length-1),Ke=[],Et=(ue=y.node(F.v))===null||ue===void 0?void 0:ue[Ce],jt=Et-((ce=y.node(F.w))===null||ce===void 0?void 0:ce[Ce]),kr=Xe[F.v],Qt=kr-Xe[F.w];ke==null||ke.forEach(function(zr){var lr=(zr[Ce]-Et)/jt*Qt+kr,Lr=Y(zr[ye],bt,vt,lr);Ke.push({x:Lr.x+L[0],y:Lr.y+L[1]})}),b[ae].controlPoints=Ke}})}else{var Be=new Set,Ie=f==="BT"||f==="RL",Pe=Ie?function(F,k){return k-F}:function(F,k){return F-k};y.nodes().forEach(function(F){var k=y.node(F);if(k){var ue=t.nodeMap[F];ue||(ue=c==null?void 0:c.find(function(ce){return ce.id===F})),ue&&(ue.x=k.x+L[0],ue.y=k.y+L[1],ue._order=k._order,Be.add(R?ue.x:ue.y))}});var Ye=Array.from(Be).sort(Pe),V=R?function(F,k){return F.x!==k.x}:function(F,k){return F.y!==k.y},z=R?function(F,k,ue){var ce=Math.max(k.y,ue.y),X=Math.min(k.y,ue.y);return F.filter(function(ae){return ae.y<=ce&&ae.y>=X})}:function(F,k,ue){var ce=Math.max(k.x,ue.x),X=Math.min(k.x,ue.x);return F.filter(function(ae){return ae.x<=ce&&ae.x>=X})};y.edges().forEach(function(F){var k,ue=y.edge(F),ce=b.findIndex(function(Ce){var ke=(0,ao.getEdgeTerminal)(Ce,"source"),Ke=(0,ao.getEdgeTerminal)(Ce,"target");return ke===F.v&&Ke===F.w});if(!(ce<=-1)&&s.edgeLabelSpace&&s.controlPoints&&b[ce].type!=="loop"){(k=ue==null?void 0:ue.points)===null||k===void 0||k.forEach(function(Ce){Ce.x+=L[0],Ce.y+=L[1]});var X=s.nodeMap[F.v],ae=s.nodeMap[F.w];b[ce].controlPoints=HAe(ue==null?void 0:ue.points,X,ae,Ye,R,V,z)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:l,edges:b}}},e.prototype.getRadialPos=function(t,n,i,a,o){o===void 0&&(o=[0,1]);var s=(t-n[0])/i;s=s*(o[1]-o[0])+o[0];var l=s*2*Math.PI;return{x:Math.cos(l)*a,y:Math.sin(l)*a}},e.prototype.getType=function(){return"dagre"},e}(WAe.Base);Cp.DagreLayout=VAe;var HAe=function(r,e,t,n,i,a,o){var s=(r==null?void 0:r.slice(1,r.length-1))||[];if(e&&t){var l=e.x,u=e.y,f=t.x,c=t.y;if(i&&(l=e.y,u=e.x,f=t.y,c=t.x),c!==u&&l!==f){var h=n.indexOf(u),d=n[h+1];if(d){var v=s[0],p=i?{x:(u+d)/2,y:(v==null?void 0:v.y)||f}:{x:(v==null?void 0:v.x)||f,y:(u+d)/2};(!v||a(v,p))&&s.unshift(p)}var g=n.indexOf(c),m=Math.abs(g-h);if(m===1)s=o(s,e,t),s.length||s.push(i?{x:(u+c)/2,y:l}:{x:l,y:(u+c)/2});else if(m>1){var b=n[g-1];if(b){var y=s[s.length-1],x=i?{x:(c+b)/2,y:(y==null?void 0:y.y)||f}:{x:(y==null?void 0:y.x)||l,y:(c+b)/2};(!y||a(y,x))&&s.push(x)}}}}return s},Ym={};const ww={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function xT(r={},e=ww){var t,n,i,a;const o=JSON.parse(JSON.stringify(e)),s=((t=r==null?void 0:r.graph)===null||t===void 0?void 0:t.meta)||{},l=((n=r==null?void 0:r.subScene)===null||n===void 0?void 0:n.meta)||{},u=((i=r==null?void 0:r.nodeSize)===null||i===void 0?void 0:i.meta)||{},f=((a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.node)||{},c=o.nodeSize.bridge;return{graph:{meta:Object.assign(o.graph.meta,s)},subScene:{meta:Object.assign(o.subScene.meta,l)},nodeSize:{meta:Object.assign(o.nodeSize.meta,u),node:Object.assign(o.nodeSize.node,f),bridge:c}}}function _X(r){return`◬${r}◬`}const Kv=_X("ROOT"),SX=_X("BRIDGE_GRAPH");var ja,Vh,qv,wT;(function(r){r[r.META=0]="META",r[r.NODE=1]="NODE",r[r.BRIDGE=2]="BRIDGE"})(ja||(ja={})),function(r){r[r.INCLUDE=0]="INCLUDE",r[r.EXCLUDE=1]="EXCLUDE",r[r.UNSPECIFIED=2]="UNSPECIFIED"}(Vh||(Vh={})),function(r){r[r.META=0]="META",r[r.CORE=1]="CORE",r[r.BRIDGE=2]="BRIDGE"}(qv||(qv={})),function(r){r[r.META=0]="META",r[r.OP=1]="OP",r[r.SERIES=2]="SERIES"}(wT||(wT={}));var z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wL(r,e){return r(e={exports:{}},e.exports),e.exports}var XAe=function(){this.__data__=[],this.size=0},Tp=function(r,e){return r===e||r!=r&&e!=e},__=function(r,e){for(var t=r.length;t--;)if(Tp(r[t][0],e))return t;return-1},YAe=Array.prototype.splice,KAe=function(r){var e=this.__data__,t=__(e,r);return!(t<0)&&(t==e.length-1?e.pop():YAe.call(e,t,1),--this.size,!0)},qAe=function(r){var e=this.__data__,t=__(e,r);return t<0?void 0:e[t][1]},ZAe=function(r){return __(this.__data__,r)>-1},QAe=function(r,e){var t=this.__data__,n=__(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this};function qd(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}qd.prototype.clear=XAe,qd.prototype.delete=KAe,qd.prototype.get=qAe,qd.prototype.has=ZAe,qd.prototype.set=QAe;var S_=qd,JAe=function(){this.__data__=new S_,this.size=0},eTe=function(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t},tTe=function(r){return this.__data__.get(r)},rTe=function(r){return this.__data__.has(r)},MX=typeof z1=="object"&&z1&&z1.Object===Object&&z1,nTe=typeof self=="object"&&self&&self.Object===Object&&self,Rs=MX||nTe||Function("return this")(),ts=Rs.Symbol,CX=Object.prototype,iTe=CX.hasOwnProperty,aTe=CX.toString,ug=ts?ts.toStringTag:void 0,oTe=function(r){var e=iTe.call(r,ug),t=r[ug];try{r[ug]=void 0;var n=!0}catch{}var i=aTe.call(r);return n&&(e?r[ug]=t:delete r[ug]),i},sTe=Object.prototype.toString,lTe=function(r){return sTe.call(r)},S4=ts?ts.toStringTag:void 0,gc=function(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":S4&&S4 in Object(r)?oTe(r):lTe(r)},Qa=function(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")},M4,Km=function(r){if(!Qa(r))return!1;var e=gc(r);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},IM=Rs["__core-js_shared__"],C4=(M4=/[^.]+$/.exec(IM&&IM.keys&&IM.keys.IE_PROTO||""))?"Symbol(src)_1."+M4:"",uTe=function(r){return!!C4&&C4 in r},fTe=Function.prototype.toString,sd=function(r){if(r!=null){try{return fTe.call(r)}catch{}try{return r+""}catch{}}return""},cTe=/^\[object .+?Constructor\]$/,hTe=Function.prototype,dTe=Object.prototype,vTe=hTe.toString,pTe=dTe.hasOwnProperty,gTe=RegExp("^"+vTe.call(pTe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mTe=function(r){return!(!Qa(r)||uTe(r))&&(Km(r)?gTe:cTe).test(sd(r))},yTe=function(r,e){return r==null?void 0:r[e]},ld=function(r,e){var t=yTe(r,e);return mTe(t)?t:void 0},K0=ld(Rs,"Map"),q0=ld(Object,"create"),bTe=function(){this.__data__=q0?q0(null):{},this.size=0},xTe=function(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e},wTe=Object.prototype.hasOwnProperty,ETe=function(r){var e=this.__data__;if(q0){var t=e[r];return t==="__lodash_hash_undefined__"?void 0:t}return wTe.call(e,r)?e[r]:void 0},_Te=Object.prototype.hasOwnProperty,STe=function(r){var e=this.__data__;return q0?e[r]!==void 0:_Te.call(e,r)},MTe=function(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=q0&&e===void 0?"__lodash_hash_undefined__":e,this};function Zd(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Zd.prototype.clear=bTe,Zd.prototype.delete=xTe,Zd.prototype.get=ETe,Zd.prototype.has=STe,Zd.prototype.set=MTe;var A4=Zd,CTe=function(){this.size=0,this.__data__={hash:new A4,map:new(K0||S_),string:new A4}},ATe=function(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null},M_=function(r,e){var t=r.__data__;return ATe(e)?t[typeof e=="string"?"string":"hash"]:t.map},TTe=function(r){var e=M_(this,r).delete(r);return this.size-=e?1:0,e},OTe=function(r){return M_(this,r).get(r)},kTe=function(r){return M_(this,r).has(r)},ITe=function(r,e){var t=M_(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this};function Qd(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Qd.prototype.clear=CTe,Qd.prototype.delete=TTe,Qd.prototype.get=OTe,Qd.prototype.has=kTe,Qd.prototype.set=ITe;var C_=Qd,LTe=function(r,e){var t=this.__data__;if(t instanceof S_){var n=t.__data__;if(!K0||n.length<199)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new C_(n)}return t.set(r,e),this.size=t.size,this};function Jd(r){var e=this.__data__=new S_(r);this.size=e.size}Jd.prototype.clear=JAe,Jd.prototype.delete=eTe,Jd.prototype.get=tTe,Jd.prototype.has=rTe,Jd.prototype.set=LTe;var _v=Jd,EL=function(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r},Ew=function(){try{var r=ld(Object,"defineProperty");return r({},"",{}),r}catch{}}(),A_=function(r,e,t){e=="__proto__"&&Ew?Ew(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t},PTe=Object.prototype.hasOwnProperty,T_=function(r,e,t){var n=r[e];PTe.call(r,e)&&Tp(n,t)&&(t!==void 0||e in r)||A_(r,e,t)},qm=function(r,e,t,n){var i=!t;t||(t={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=n?n(t[s],r[s],s,t,r):void 0;l===void 0&&(l=r[s]),i?A_(t,s,l):T_(t,s,l)}return t},DTe=function(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n},Os=function(r){return r!=null&&typeof r=="object"},T4=function(r){return Os(r)&&gc(r)=="[object Arguments]"},AX=Object.prototype,NTe=AX.hasOwnProperty,RTe=AX.propertyIsEnumerable,Zv=T4(function(){return arguments}())?T4:function(r){return Os(r)&&NTe.call(r,"callee")&&!RTe.call(r,"callee")},Jn=Array.isArray,BTe=function(){return!1},Hh=wL(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,i=n&&n.exports===t?Rs.Buffer:void 0,a=(i?i.isBuffer:void 0)||BTe;r.exports=a}),FTe=/^(?:0|[1-9]\d*)$/,O_=function(r,e){var t=typeof r;return!!(e=e??9007199254740991)&&(t=="number"||t!="symbol"&&FTe.test(r))&&r>-1&&r%1==0&&r<e},_L=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991},Cn={};Cn["[object Float32Array]"]=Cn["[object Float64Array]"]=Cn["[object Int8Array]"]=Cn["[object Int16Array]"]=Cn["[object Int32Array]"]=Cn["[object Uint8Array]"]=Cn["[object Uint8ClampedArray]"]=Cn["[object Uint16Array]"]=Cn["[object Uint32Array]"]=!0,Cn["[object Arguments]"]=Cn["[object Array]"]=Cn["[object ArrayBuffer]"]=Cn["[object Boolean]"]=Cn["[object DataView]"]=Cn["[object Date]"]=Cn["[object Error]"]=Cn["[object Function]"]=Cn["[object Map]"]=Cn["[object Number]"]=Cn["[object Object]"]=Cn["[object RegExp]"]=Cn["[object Set]"]=Cn["[object String]"]=Cn["[object WeakMap]"]=!1;var $Te=function(r){return Os(r)&&_L(r.length)&&!!Cn[gc(r)]},k_=function(r){return function(e){return r(e)}},Qv=wL(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,i=n&&n.exports===t&&MX.process,a=function(){try{var o=n&&n.require&&n.require("util").types;return o||i&&i.binding&&i.binding("util")}catch{}}();r.exports=a}),O4=Qv&&Qv.isTypedArray,Zm=O4?k_(O4):$Te,zTe=Object.prototype.hasOwnProperty,TX=function(r,e){var t=Jn(r),n=!t&&Zv(r),i=!t&&!n&&Hh(r),a=!t&&!n&&!i&&Zm(r),o=t||n||i||a,s=o?DTe(r.length,String):[],l=s.length;for(var u in r)!e&&!zTe.call(r,u)||o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||O_(u,l))||s.push(u);return s},GTe=Object.prototype,I_=function(r){var e=r&&r.constructor;return r===(typeof e=="function"&&e.prototype||GTe)},OX=function(r,e){return function(t){return r(e(t))}},jTe=OX(Object.keys,Object),UTe=Object.prototype.hasOwnProperty,SL=function(r){if(!I_(r))return jTe(r);var e=[];for(var t in Object(r))UTe.call(r,t)&&t!="constructor"&&e.push(t);return e},Uu=function(r){return r!=null&&_L(r.length)&&!Km(r)},mc=function(r){return Uu(r)?TX(r):SL(r)},WTe=function(r,e){return r&&qm(e,mc(e),r)},VTe=function(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e},HTe=Object.prototype.hasOwnProperty,XTe=function(r){if(!Qa(r))return VTe(r);var e=I_(r),t=[];for(var n in r)(n!="constructor"||!e&&HTe.call(r,n))&&t.push(n);return t},ud=function(r){return Uu(r)?TX(r,!0):XTe(r)},YTe=function(r,e){return r&&qm(e,ud(e),r)},kX=wL(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,i=n&&n.exports===t?Rs.Buffer:void 0,a=i?i.allocUnsafe:void 0;r.exports=function(o,s){if(s)return o.slice();var l=o.length,u=a?a(l):new o.constructor(l);return o.copy(u),u}}),IX=function(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e},LX=function(r,e){for(var t=-1,n=r==null?0:r.length,i=0,a=[];++t<n;){var o=r[t];e(o,t,r)&&(a[i++]=o)}return a},PX=function(){return[]},KTe=Object.prototype.propertyIsEnumerable,k4=Object.getOwnPropertySymbols,ML=k4?function(r){return r==null?[]:(r=Object(r),LX(k4(r),function(e){return KTe.call(r,e)}))}:PX,qTe=function(r,e){return qm(r,ML(r),e)},CL=function(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r},L_=OX(Object.getPrototypeOf,Object),DX=Object.getOwnPropertySymbols?function(r){for(var e=[];r;)CL(e,ML(r)),r=L_(r);return e}:PX,ZTe=function(r,e){return qm(r,DX(r),e)},NX=function(r,e,t){var n=e(r);return Jn(r)?n:CL(n,t(r))},ET=function(r){return NX(r,mc,ML)},QTe=function(r){return NX(r,ud,DX)},_T=ld(Rs,"DataView"),ST=ld(Rs,"Promise"),Sv=ld(Rs,"Set"),MT=ld(Rs,"WeakMap"),JTe=sd(_T),eOe=sd(K0),tOe=sd(ST),rOe=sd(Sv),nOe=sd(MT),th=gc;(_T&&th(new _T(new ArrayBuffer(1)))!="[object DataView]"||K0&&th(new K0)!="[object Map]"||ST&&th(ST.resolve())!="[object Promise]"||Sv&&th(new Sv)!="[object Set]"||MT&&th(new MT)!="[object WeakMap]")&&(th=function(r){var e=gc(r),t=e=="[object Object]"?r.constructor:void 0,n=t?sd(t):"";if(n)switch(n){case JTe:return"[object DataView]";case eOe:return"[object Map]";case tOe:return"[object Promise]";case rOe:return"[object Set]";case nOe:return"[object WeakMap]"}return e});var Xh=th,iOe=Object.prototype.hasOwnProperty,aOe=function(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&iOe.call(r,"index")&&(t.index=r.index,t.input=r.input),t},_w=Rs.Uint8Array,AL=function(r){var e=new r.constructor(r.byteLength);return new _w(e).set(new _w(r)),e},oOe=function(r,e){var t=e?AL(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)},sOe=/\w*$/,lOe=function(r){var e=new r.constructor(r.source,sOe.exec(r));return e.lastIndex=r.lastIndex,e},I4=ts?ts.prototype:void 0,L4=I4?I4.valueOf:void 0,uOe=function(r){return L4?Object(L4.call(r)):{}},RX=function(r,e){var t=e?AL(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)},fOe=function(r,e,t){var n=r.constructor;switch(e){case"[object ArrayBuffer]":return AL(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return oOe(r,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return RX(r,t);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return lOe(r);case"[object Set]":return new n;case"[object Symbol]":return uOe(r)}},P4=Object.create,BX=function(){function r(){}return function(e){if(!Qa(e))return{};if(P4)return P4(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),FX=function(r){return typeof r.constructor!="function"||I_(r)?{}:BX(L_(r))},cOe=function(r){return Os(r)&&Xh(r)=="[object Map]"},D4=Qv&&Qv.isMap,hOe=D4?k_(D4):cOe,dOe=function(r){return Os(r)&&Xh(r)=="[object Set]"},N4=Qv&&Qv.isSet,vOe=N4?k_(N4):dOe,bn={};bn["[object Arguments]"]=bn["[object Array]"]=bn["[object ArrayBuffer]"]=bn["[object DataView]"]=bn["[object Boolean]"]=bn["[object Date]"]=bn["[object Float32Array]"]=bn["[object Float64Array]"]=bn["[object Int8Array]"]=bn["[object Int16Array]"]=bn["[object Int32Array]"]=bn["[object Map]"]=bn["[object Number]"]=bn["[object Object]"]=bn["[object RegExp]"]=bn["[object Set]"]=bn["[object String]"]=bn["[object Symbol]"]=bn["[object Uint8Array]"]=bn["[object Uint8ClampedArray]"]=bn["[object Uint16Array]"]=bn["[object Uint32Array]"]=!0,bn["[object Error]"]=bn["[object Function]"]=bn["[object WeakMap]"]=!1;var $X=function r(e,t,n,i,a,o){var s,l=1&t,u=2&t,f=4&t;if(n&&(s=a?n(e,i,a,o):n(e)),s!==void 0)return s;if(!Qa(e))return e;var c=Jn(e);if(c){if(s=aOe(e),!l)return IX(e,s)}else{var h=Xh(e),d=h=="[object Function]"||h=="[object GeneratorFunction]";if(Hh(e))return kX(e,l);if(h=="[object Object]"||h=="[object Arguments]"||d&&!a){if(s=u||d?{}:FX(e),!l)return u?ZTe(e,YTe(s,e)):qTe(e,WTe(s,e))}else{if(!bn[h])return a?e:{};s=fOe(e,h,l)}}o||(o=new _v);var v=o.get(e);if(v)return v;o.set(e,s),vOe(e)?e.forEach(function(g){s.add(r(g,t,n,g,e,o))}):hOe(e)&&e.forEach(function(g,m){s.set(m,r(g,t,n,m,e,o))});var p=c?void 0:(f?u?QTe:ET:u?ud:mc)(e);return EL(p||e,function(g,m){p&&(g=e[m=g]),T_(s,m,r(g,t,n,m,e,o))}),s},pOe=function(r){return $X(r,4)},TL=function(r){return function(){return r}},OL=function(r){return function(e,t,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[r?s:++i];if(t(a[l],l,a)===!1)break}return e}}(),kL=function(r,e){return r&&OL(r,e,mc)},P_=function(r,e){return function(t,n){if(t==null)return t;if(!Uu(t))return r(t,n);for(var i=t.length,a=e?i:-1,o=Object(t);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return t}}(kL),fd=function(r){return r},zX=function(r){return typeof r=="function"?r:fd},GX=function(r,e){return(Jn(r)?EL:P_)(r,zX(e))},jX=GX,gOe=function(r,e){var t=[];return P_(r,function(n,i,a){e(n,i,a)&&t.push(n)}),t},mOe=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},yOe=function(r){return this.__data__.has(r)};function ux(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new C_;++e<t;)this.add(r[e])}ux.prototype.add=ux.prototype.push=mOe,ux.prototype.has=yOe;var UX=ux,bOe=function(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1},WX=function(r,e){return r.has(e)},VX=function(r,e,t,n,i,a){var o=1&t,s=r.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(r),f=a.get(e);if(u&&f)return u==e&&f==r;var c=-1,h=!0,d=2&t?new UX:void 0;for(a.set(r,e),a.set(e,r);++c<s;){var v=r[c],p=e[c];if(n)var g=o?n(p,v,c,e,r,a):n(v,p,c,r,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!bOe(e,function(m,b){if(!WX(d,b)&&(v===m||i(v,m,t,n,a)))return d.push(b)})){h=!1;break}}else if(v!==p&&!i(v,p,t,n,a)){h=!1;break}}return a.delete(r),a.delete(e),h},xOe=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t},IL=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t},R4=ts?ts.prototype:void 0,LM=R4?R4.valueOf:void 0,wOe=function(r,e,t,n,i,a,o){switch(t){case"[object DataView]":if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=e.byteLength||!a(new _w(r),new _w(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Tp(+r,+e);case"[object Error]":return r.name==e.name&&r.message==e.message;case"[object RegExp]":case"[object String]":return r==e+"";case"[object Map]":var s=xOe;case"[object Set]":var l=1&n;if(s||(s=IL),r.size!=e.size&&!l)return!1;var u=o.get(r);if(u)return u==e;n|=2,o.set(r,e);var f=VX(s(r),s(e),n,i,a,o);return o.delete(r),f;case"[object Symbol]":if(LM)return LM.call(r)==LM.call(e)}return!1},EOe=Object.prototype.hasOwnProperty,_Oe=function(r,e,t,n,i,a){var o=1&t,s=ET(r),l=s.length;if(l!=ET(e).length&&!o)return!1;for(var u=l;u--;){var f=s[u];if(!(o?f in e:EOe.call(e,f)))return!1}var c=a.get(r),h=a.get(e);if(c&&h)return c==e&&h==r;var d=!0;a.set(r,e),a.set(e,r);for(var v=o;++u<l;){var p=r[f=s[u]],g=e[f];if(n)var m=o?n(g,p,f,e,r,a):n(p,g,f,r,e,a);if(!(m===void 0?p===g||i(p,g,t,n,a):m)){d=!1;break}v||(v=f=="constructor")}if(d&&!v){var b=r.constructor,y=e.constructor;b==y||!("constructor"in r)||!("constructor"in e)||typeof b=="function"&&b instanceof b&&typeof y=="function"&&y instanceof y||(d=!1)}return a.delete(r),a.delete(e),d},B4=Object.prototype.hasOwnProperty,SOe=function(r,e,t,n,i,a){var o=Jn(r),s=Jn(e),l=o?"[object Array]":Xh(r),u=s?"[object Array]":Xh(e),f=(l=l=="[object Arguments]"?"[object Object]":l)=="[object Object]",c=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",h=l==u;if(h&&Hh(r)){if(!Hh(e))return!1;o=!0,f=!1}if(h&&!f)return a||(a=new _v),o||Zm(r)?VX(r,e,t,n,i,a):wOe(r,e,l,t,n,i,a);if(!(1&t)){var d=f&&B4.call(r,"__wrapped__"),v=c&&B4.call(e,"__wrapped__");if(d||v){var p=d?r.value():r,g=v?e.value():e;return a||(a=new _v),i(p,g,t,n,a)}}return!!h&&(a||(a=new _v),_Oe(r,e,t,n,i,a))},HX=function r(e,t,n,i,a){return e===t||(e==null||t==null||!Os(e)&&!Os(t)?e!=e&&t!=t:SOe(e,t,n,i,r,a))},MOe=function(r,e,t,n){var i=t.length,a=i,o=!n;if(r==null)return!a;for(r=Object(r);i--;){var s=t[i];if(o&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++i<a;){var l=(s=t[i])[0],u=r[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in r))return!1}else{var c=new _v;if(n)var h=n(u,f,l,r,e,c);if(!(h===void 0?HX(f,u,3,n,c):h))return!1}}return!0},XX=function(r){return r==r&&!Qa(r)},COe=function(r){for(var e=mc(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,XX(i)]}return e},YX=function(r,e){return function(t){return t!=null&&t[r]===e&&(e!==void 0||r in Object(t))}},AOe=function(r){var e=COe(r);return e.length==1&&e[0][2]?YX(e[0][0],e[0][1]):function(t){return t===r||MOe(t,r,e)}},Yh=function(r){return typeof r=="symbol"||Os(r)&&gc(r)=="[object Symbol]"},TOe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,OOe=/^\w*$/,LL=function(r,e){if(Jn(r))return!1;var t=typeof r;return!(t!="number"&&t!="symbol"&&t!="boolean"&&r!=null&&!Yh(r))||OOe.test(r)||!TOe.test(r)||e!=null&&r in Object(e)};function PL(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(PL.Cache||C_),t}PL.Cache=C_;var kOe=PL,IOe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,LOe=/\\(\\)?/g,POe=function(r){var e=kOe(r,function(n){return t.size===500&&t.clear(),n}),t=e.cache;return e}(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(IOe,function(t,n,i,a){e.push(i?a.replace(LOe,"$1"):n||t)}),e}),Mv=function(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i},F4=ts?ts.prototype:void 0,$4=F4?F4.toString:void 0,DOe=function r(e){if(typeof e=="string")return e;if(Jn(e))return Mv(e,r)+"";if(Yh(e))return $4?$4.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},KX=function(r){return r==null?"":DOe(r)},D_=function(r,e){return Jn(r)?r:LL(r,e)?[r]:POe(KX(r))},Qm=function(r){if(typeof r=="string"||Yh(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e},N_=function(r,e){for(var t=0,n=(e=D_(e,r)).length;r!=null&&t<n;)r=r[Qm(e[t++])];return t&&t==n?r:void 0},NOe=function(r,e,t){var n=r==null?void 0:N_(r,e);return n===void 0?t:n},ROe=function(r,e){return r!=null&&e in Object(r)},qX=function(r,e,t){for(var n=-1,i=(e=D_(e,r)).length,a=!1;++n<i;){var o=Qm(e[n]);if(!(a=r!=null&&t(r,o)))break;r=r[o]}return a||++n!=i?a:!!(i=r==null?0:r.length)&&_L(i)&&O_(o,i)&&(Jn(r)||Zv(r))},ZX=function(r,e){return r!=null&&qX(r,e,ROe)},BOe=function(r,e){return LL(r)&&XX(e)?YX(Qm(r),e):function(t){var n=NOe(t,r);return n===void 0&&n===e?ZX(t,r):HX(e,n,3)}},QX=function(r){return function(e){return e==null?void 0:e[r]}},FOe=function(r){return function(e){return N_(e,r)}},$Oe=function(r){return LL(r)?QX(Qm(r)):FOe(r)},Wu=function(r){return typeof r=="function"?r:r==null?fd:typeof r=="object"?Jn(r)?BOe(r[0],r[1]):AOe(r):$Oe(r)},JX=function(r,e){return(Jn(r)?LX:gOe)(r,Wu(e))},zOe=Object.prototype.hasOwnProperty,GOe=function(r,e){return r!=null&&zOe.call(r,e)},eY=function(r,e){return r!=null&&qX(r,e,GOe)},jOe=Object.prototype.hasOwnProperty,UOe=function(r){if(r==null)return!0;if(Uu(r)&&(Jn(r)||typeof r=="string"||typeof r.splice=="function"||Hh(r)||Zm(r)||Zv(r)))return!r.length;var e=Xh(r);if(e=="[object Map]"||e=="[object Set]")return!r.size;if(I_(r))return!SL(r).length;for(var t in r)if(jOe.call(r,t))return!1;return!0},tY=function(r){return r===void 0},rY=function(r,e){var t=-1,n=Uu(r)?Array(r.length):[];return P_(r,function(i,a,o){n[++t]=e(i,a,o)}),n},nY=function(r,e){return(Jn(r)?Mv:rY)(r,Wu(e))},WOe=function(r,e,t,n){var i=-1,a=r==null?0:r.length;for(n&&a&&(t=r[++i]);++i<a;)t=e(t,r[i],i,r);return t},VOe=function(r,e,t,n,i){return i(r,function(a,o,s){t=n?(n=!1,a):e(t,a,o,s)}),t},iY=function(r,e,t){var n=Jn(r)?WOe:VOe,i=arguments.length<3;return n(r,Wu(e),t,i,P_)},HOe=function(r){return typeof r=="string"||!Jn(r)&&Os(r)&&gc(r)=="[object String]"},XOe=QX("length"),YOe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),KOe=function(r){return YOe.test(r)},qOe="[\\ud800-\\udfff]",CT="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",AT="\\ud83c[\\udffb-\\udfff]",aY="[^\\ud800-\\udfff]",oY="(?:\\ud83c[\\udde6-\\uddff]){2}",sY="[\\ud800-\\udbff][\\udc00-\\udfff]",z4="(?:"+CT+"|"+AT+")?",ZOe="[\\ufe0e\\ufe0f]?"+z4+("(?:\\u200d(?:"+[aY,oY,sY].join("|")+")[\\ufe0e\\ufe0f]?"+z4+")*"),QOe="(?:"+[aY+CT+"?",CT,oY,sY,qOe].join("|")+")",G4=RegExp(AT+"(?="+AT+")|"+QOe+ZOe,"g"),JOe=function(r){for(var e=G4.lastIndex=0;G4.test(r);)++e;return e},eke=function(r){return KOe(r)?JOe(r):XOe(r)},tke=function(r){if(r==null)return 0;if(Uu(r))return HOe(r)?eke(r):r.length;var e=Xh(r);return e=="[object Map]"||e=="[object Set]"?r.size:SL(r).length},rke=function(r,e,t){var n=Jn(r),i=n||Hh(r)||Zm(r);if(e=Wu(e),t==null){var a=r&&r.constructor;t=i?n?new a:[]:Qa(r)&&Km(a)?BX(L_(r)):{}}return(i?EL:kL)(r,function(o,s,l){return e(t,o,s,l)}),t},j4=ts?ts.isConcatSpreadable:void 0,nke=function(r){return Jn(r)||Zv(r)||!!(j4&&r&&r[j4])},DL=function r(e,t,n,i,a){var o=-1,s=e.length;for(n||(n=nke),a||(a=[]);++o<s;){var l=e[o];t>0&&n(l)?t>1?r(l,t-1,n,i,a):CL(a,l):i||(a[a.length]=l)}return a},ike=function(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)},U4=Math.max,lY=function(r,e,t){return e=U4(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,a=U4(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=t(o),ike(r,this,s)}},ake=Ew?function(r,e){return Ew(r,"toString",{configurable:!0,enumerable:!1,value:TL(e),writable:!0})}:fd,oke=Date.now,uY=function(r){var e=0,t=0;return function(){var n=oke(),i=16-(n-t);if(t=n,i>0){if(++e>=800)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}(ake),R_=function(r,e){return uY(lY(r,e,fd),r+"")},fY=function(r,e,t,n){for(var i=r.length,a=t+(n?1:-1);n?a--:++a<i;)if(e(r[a],a,r))return a;return-1},ske=function(r){return r!=r},lke=function(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1},uke=function(r,e,t){return e==e?lke(r,e,t):fY(r,ske,t)},fke=function(r,e){return!!(r!=null&&r.length)&&uke(r,e,0)>-1},cke=function(r,e,t){for(var n=-1,i=r==null?0:r.length;++n<i;)if(t(e,r[n]))return!0;return!1},hke=function(){},dke=Sv&&1/IL(new Sv([,-0]))[1]==1/0?function(r){return new Sv(r)}:hke,vke=function(r,e,t){var n=-1,i=fke,a=r.length,o=!0,s=[],l=s;if(t)o=!1,i=cke;else if(a>=200){var u=e?null:dke(r);if(u)return IL(u);o=!1,i=WX,l=new UX}else l=e?[]:s;e:for(;++n<a;){var f=r[n],c=e?e(f):f;if(f=t||f!==0?f:0,o&&c==c){for(var h=l.length;h--;)if(l[h]===c)continue e;e&&l.push(c),s.push(f)}else i(l,c,t)||(l!==s&&l.push(c),s.push(f))}return s},cY=function(r){return Os(r)&&Uu(r)},pke=R_(function(r){return vke(DL(r,1,cY,!0))}),gke=function(r,e){return Mv(e,function(t){return r[t]})},Sw,hY=function(r){return r==null?[]:gke(r,mc(r))};try{Sw={clone:pOe,constant:TL,each:jX,filter:JX,has:eY,isArray:Jn,isEmpty:UOe,isFunction:Km,isUndefined:tY,keys:mc,map:nY,reduce:iY,size:tke,transform:rke,union:pke,values:hY}}catch{}Sw||(Sw=window._);var At=Sw,NL=Wr;function Wr(r){this._isDirected=!At.has(r,"directed")||r.directed,this._isMultigraph=!!At.has(r,"multigraph")&&r.multigraph,this._isCompound=!!At.has(r,"compound")&&r.compound,this._label=void 0,this._defaultNodeLabelFn=At.constant(void 0),this._defaultEdgeLabelFn=At.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function W4(r,e){r[e]?r[e]++:r[e]=1}function V4(r,e){--r[e]||delete r[e]}function Gg(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var o=i;i=a,a=o}return i+""+a+""+(At.isUndefined(n)?"\0":n)}function mke(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function PM(r,e){return Gg(r,e.v,e.w,e.name)}Wr.prototype._nodeCount=0,Wr.prototype._edgeCount=0,Wr.prototype.isDirected=function(){return this._isDirected},Wr.prototype.isMultigraph=function(){return this._isMultigraph},Wr.prototype.isCompound=function(){return this._isCompound},Wr.prototype.setGraph=function(r){return this._label=r,this},Wr.prototype.graph=function(){return this._label},Wr.prototype.setDefaultNodeLabel=function(r){return At.isFunction(r)||(r=At.constant(r)),this._defaultNodeLabelFn=r,this},Wr.prototype.nodeCount=function(){return this._nodeCount},Wr.prototype.nodes=function(){return At.keys(this._nodes)},Wr.prototype.sources=function(){var r=this;return At.filter(this.nodes(),function(e){return At.isEmpty(r._in[e])})},Wr.prototype.sinks=function(){var r=this;return At.filter(this.nodes(),function(e){return At.isEmpty(r._out[e])})},Wr.prototype.setNodes=function(r,e){var t=arguments,n=this;return At.each(r,function(i){t.length>1?n.setNode(i,e):n.setNode(i)}),this},Wr.prototype.setNode=function(r,e){return At.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=e),this):(this._nodes[r]=arguments.length>1?e:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]="\0",this._children[r]={},this._children["\0"][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)},Wr.prototype.node=function(r){return this._nodes[r]},Wr.prototype.hasNode=function(r){return At.has(this._nodes,r)},Wr.prototype.removeNode=function(r){var e=this;if(At.has(this._nodes,r)){var t=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],At.each(this.children(r),function(n){e.setParent(n)}),delete this._children[r]),At.each(At.keys(this._in[r]),t),delete this._in[r],delete this._preds[r],At.each(At.keys(this._out[r]),t),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this},Wr.prototype.setParent=function(r,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(At.isUndefined(e))e="\0";else{for(var t=e+="";!At.isUndefined(t);t=this.parent(t))if(t===r)throw new Error("Setting "+e+" as parent of "+r+" would create a cycle");this.setNode(e)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=e,this._children[e][r]=!0,this},Wr.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]},Wr.prototype.parent=function(r){if(this._isCompound){var e=this._parent[r];if(e!=="\0")return e}},Wr.prototype.children=function(r){if(At.isUndefined(r)&&(r="\0"),this._isCompound){var e=this._children[r];if(e)return At.keys(e)}else{if(r==="\0")return this.nodes();if(this.hasNode(r))return[]}},Wr.prototype.predecessors=function(r){var e=this._preds[r];if(e)return At.keys(e)},Wr.prototype.successors=function(r){var e=this._sucs[r];if(e)return At.keys(e)},Wr.prototype.neighbors=function(r){var e=this.predecessors(r);if(e)return At.union(e,this.successors(r))},Wr.prototype.isLeaf=function(r){return(this.isDirected()?this.successors(r):this.neighbors(r)).length===0},Wr.prototype.filterNodes=function(r){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var t=this;At.each(this._nodes,function(a,o){r(o)&&e.setNode(o,a)}),At.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,t.edge(a))});var n={};function i(a){var o=t.parent(a);return o===void 0||e.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&At.each(e.nodes(),function(a){e.setParent(a,i(a))}),e},Wr.prototype.setDefaultEdgeLabel=function(r){return At.isFunction(r)||(r=At.constant(r)),this._defaultEdgeLabelFn=r,this},Wr.prototype.edgeCount=function(){return this._edgeCount},Wr.prototype.edges=function(){return At.values(this._edgeObjs)},Wr.prototype.setPath=function(r,e){var t=this,n=arguments;return At.reduce(r,function(i,a){return n.length>1?t.setEdge(i,a,e):t.setEdge(i,a),a}),this},Wr.prototype.setEdge=function(){var r,e,t,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(r=a.v,e=a.w,t=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=a,e=arguments[1],t=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,e=""+e,At.isUndefined(t)||(t=""+t);var o=Gg(this._isDirected,r,e,t);if(At.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!At.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(e),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(r,e,t);var s=mke(this._isDirected,r,e,t);return r=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,W4(this._preds[e],r),W4(this._sucs[r],e),this._in[e][o]=s,this._out[r][o]=s,this._edgeCount++,this},Wr.prototype.edge=function(r,e,t){var n=arguments.length===1?PM(this._isDirected,arguments[0]):Gg(this._isDirected,r,e,t);return this._edgeLabels[n]},Wr.prototype.hasEdge=function(r,e,t){var n=arguments.length===1?PM(this._isDirected,arguments[0]):Gg(this._isDirected,r,e,t);return At.has(this._edgeLabels,n)},Wr.prototype.removeEdge=function(r,e,t){var n=arguments.length===1?PM(this._isDirected,arguments[0]):Gg(this._isDirected,r,e,t),i=this._edgeObjs[n];return i&&(r=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],V4(this._preds[e],r),V4(this._sucs[r],e),delete this._in[e][n],delete this._out[r][n],this._edgeCount--),this},Wr.prototype.inEdges=function(r,e){var t=this._in[r];if(t){var n=At.values(t);return e?At.filter(n,function(i){return i.v===e}):n}},Wr.prototype.outEdges=function(r,e){var t=this._out[r];if(t){var n=At.values(t);return e?At.filter(n,function(i){return i.w===e}):n}},Wr.prototype.nodeEdges=function(r,e){var t=this.inEdges(r,e);if(t)return t.concat(this.outEdges(r,e))};var H4={Graph:NL,version:"2.1.8"},yke={write:function(r){var e={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:bke(r),edges:xke(r)};return At.isUndefined(r.graph())||(e.value=At.clone(r.graph())),e},read:function(r){var e=new NL(r.options).setGraph(r.value);return At.each(r.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),At.each(r.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};function bke(r){return At.map(r.nodes(),function(e){var t=r.node(e),n=r.parent(e),i={v:e};return At.isUndefined(t)||(i.value=t),At.isUndefined(n)||(i.parent=n),i})}function xke(r){return At.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return At.isUndefined(e.name)||(n.name=e.name),At.isUndefined(t)||(n.value=t),n})}var wke=function(r){var e,t={},n=[];function i(a){At.has(t,a)||(t[a]=!0,e.push(a),At.each(r.successors(a),i),At.each(r.predecessors(a),i))}return At.each(r.nodes(),function(a){e=[],i(a),e.length&&n.push(e)}),n},dY=Ro;function Ro(){this._arr=[],this._keyIndices={}}Ro.prototype.size=function(){return this._arr.length},Ro.prototype.keys=function(){return this._arr.map(function(r){return r.key})},Ro.prototype.has=function(r){return At.has(this._keyIndices,r)},Ro.prototype.priority=function(r){var e=this._keyIndices[r];if(e!==void 0)return this._arr[e].priority},Ro.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Ro.prototype.add=function(r,e){var t=this._keyIndices;if(r=String(r),!At.has(t,r)){var n=this._arr,i=n.length;return t[r]=i,n.push({key:r,priority:e}),this._decrease(i),!0}return!1},Ro.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},Ro.prototype.decrease=function(r,e){var t=this._keyIndices[r];if(e>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[t].priority+" New: "+e);this._arr[t].priority=e,this._decrease(t)},Ro.prototype._heapify=function(r){var e=this._arr,t=2*r,n=t+1,i=r;t<e.length&&(i=e[t].priority<e[i].priority?t:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))},Ro.prototype._decrease=function(r){for(var e,t=this._arr,n=t[r].priority;r!==0&&!(t[e=r>>1].priority<n);)this._swap(r,e),r=e},Ro.prototype._swap=function(r,e){var t=this._arr,n=this._keyIndices,i=t[r],a=t[e];t[r]=a,t[e]=i,n[a.key]=r,n[i.key]=e};var vY=function(r,e,t,n){return function(i,a,o,s){var l,u,f={},c=new dY,h=function(d){var v=d.v!==l?d.v:d.w,p=f[v],g=o(d),m=u.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+g);m<p.distance&&(p.distance=m,p.predecessor=l,c.decrease(v,m))};for(i.nodes().forEach(function(d){var v=d===a?0:Number.POSITIVE_INFINITY;f[d]={distance:v},c.add(d,v)});c.size()>0&&(l=c.removeMin(),(u=f[l]).distance!==Number.POSITIVE_INFINITY);)s(l).forEach(h);return f}(r,String(e),t||Eke,n||function(i){return r.outEdges(i)})},Eke=At.constant(1),_ke=function(r,e,t){return At.transform(r.nodes(),function(n,i){n[i]=vY(r,i,e,t)},{})},pY=function(r){var e=0,t=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:e,index:e++};if(t.push(o),r.successors(o).forEach(function(f){At.has(n,f)?n[f].onStack&&(s.lowlink=Math.min(s.lowlink,n[f].index)):(a(f),s.lowlink=Math.min(s.lowlink,n[f].lowlink))}),s.lowlink===s.index){var l,u=[];do l=t.pop(),n[l].onStack=!1,u.push(l);while(o!==l);i.push(u)}}return r.nodes().forEach(function(o){At.has(n,o)||a(o)}),i},Ske=function(r){return At.filter(pY(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})},Mke=function(r,e,t){return function(n,i,a){var o={},s=n.nodes();return s.forEach(function(l){o[l]={},o[l][l]={distance:0},s.forEach(function(u){l!==u&&(o[l][u]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(u){var f=u.v===l?u.w:u.v,c=i(u);o[l][f]={distance:c,predecessor:l}})}),s.forEach(function(l){var u=o[l];s.forEach(function(f){var c=o[f];s.forEach(function(h){var d=c[l],v=u[h],p=c[h],g=d.distance+v.distance;g<p.distance&&(p.distance=g,p.predecessor=v.predecessor)})})}),o}(r,e||Cke,t||function(n){return r.outEdges(n)})},Cke=At.constant(1),DM=gY;function gY(r){var e={},t={},n=[];if(At.each(r.sinks(),function i(a){if(At.has(t,a))throw new Mw;At.has(e,a)||(t[a]=!0,e[a]=!0,At.each(r.predecessors(a),i),delete t[a],n.push(a))}),At.size(e)!==r.nodeCount())throw new Mw;return n}function Mw(){}gY.CycleException=Mw,Mw.prototype=new Error;var X4=function(r,e,t){At.isArray(e)||(e=[e]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],a={};return At.each(e,function(o){if(!r.hasNode(o))throw new Error("Graph does not have node: "+o);mY(r,o,t==="post",a,n,i)}),i};function mY(r,e,t,n,i,a){At.has(n,e)||(n[e]=!0,t||a.push(e),At.each(i(e),function(o){mY(r,o,t,n,i,a)}),t&&a.push(e))}var Cw,Ake={Graph:H4.Graph,json:yke,alg:{components:wke,dijkstra:vY,dijkstraAll:_ke,findCycles:Ske,floydWarshall:Mke,isAcyclic:function(r){try{DM(r)}catch(e){if(e instanceof DM.CycleException)return!1;throw e}return!0},postorder:function(r,e){return X4(r,e,"post")},preorder:function(r,e){return X4(r,e,"pre")},prim:function(r,e){var t,n=new NL,i={},a=new dY;function o(l){var u=l.v===t?l.w:l.v,f=a.priority(u);if(f!==void 0){var c=e(l);c<f&&(i[u]=t,a.decrease(u,c))}}if(r.nodeCount()===0)return n;At.each(r.nodes(),function(l){a.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),a.decrease(r.nodes()[0],0);for(var s=!1;a.size()>0;){if(t=a.removeMin(),At.has(i,t))n.setEdge(t,i[t]);else{if(s)throw new Error("Input graph is not connected: "+r);s=!0}r.nodeEdges(t).forEach(o)}return n},tarjan:pY,topsort:DM},version:H4.version};try{Cw=Ake}catch{}Cw||(Cw=window.graphlib);var Bs=Cw,Tke=function(r){return $X(r,5)},Z0=function(r,e,t){if(!Qa(t))return!1;var n=typeof e;return!!(n=="number"?Uu(t)&&O_(e,t.length):n=="string"&&e in t)&&Tp(t[e],r)},yY=Object.prototype,Oke=yY.hasOwnProperty,kke=R_(function(r,e){r=Object(r);var t=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Z0(e[0],e[1],i)&&(n=1);++t<n;)for(var a=e[t],o=ud(a),s=-1,l=o.length;++s<l;){var u=o[s],f=r[u];(f===void 0||Tp(f,yY[u])&&!Oke.call(r,u))&&(r[u]=a[u])}return r}),Ike=function(r){return function(e,t,n){var i=Object(e);if(!Uu(e)){var a=Wu(t);e=mc(e),t=function(s){return a(i[s],s,i)}}var o=r(e,t,n);return o>-1?i[a?e[o]:o]:void 0}},Lke=/^\s+|\s+$/g,Pke=/^[-+]0x[0-9a-f]+$/i,Dke=/^0b[01]+$/i,Nke=/^0o[0-7]+$/i,Rke=parseInt,Bke=function(r){if(typeof r=="number")return r;if(Yh(r))return NaN;if(Qa(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Qa(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Lke,"");var t=Dke.test(r);return t||Nke.test(r)?Rke(r.slice(2),t?2:8):Pke.test(r)?NaN:+r},fx=function(r){return r?(r=Bke(r))===1/0||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:r===0?r:0},Fke=function(r){var e=fx(r),t=e%1;return e==e?t?e-t:e:0},$ke=Math.max,zke=Ike(function(r,e,t){var n=r==null?0:r.length;if(!n)return-1;var i=t==null?0:Fke(t);return i<0&&(i=$ke(n+i,0)),fY(r,Wu(e),i)}),bY=function(r){return r!=null&&r.length?DL(r,1):[]},Gke=function(r,e){return r==null?r:OL(r,zX(e),ud)},jke=function(r){var e=r==null?0:r.length;return e?r[e-1]:void 0},Uke=function(r,e){var t={};return e=Wu(e),kL(r,function(n,i,a){A_(t,i,e(n,i,a))}),t},RL=function(r,e,t){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=e(a);if(o!=null&&(s===void 0?o==o&&!Yh(o):t(o,s)))var s=o,l=a}return l},Wke=function(r,e){return r>e},Vke=function(r){return r&&r.length?RL(r,fd,Wke):void 0},TT=function(r,e,t){(t!==void 0&&!Tp(r[e],t)||t===void 0&&!(e in r))&&A_(r,e,t)},Hke=Function.prototype,Xke=Object.prototype,xY=Hke.toString,Yke=Xke.hasOwnProperty,Kke=xY.call(Object),qke=function(r){if(!Os(r)||gc(r)!="[object Object]")return!1;var e=L_(r);if(e===null)return!0;var t=Yke.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&xY.call(t)==Kke},OT=function(r,e){if((e!=="constructor"||typeof r[e]!="function")&&e!="__proto__")return r[e]},Zke=function(r){return qm(r,ud(r))},Qke=function(r,e,t,n,i,a,o){var s=OT(r,t),l=OT(e,t),u=o.get(l);if(u)TT(r,t,u);else{var f=a?a(s,l,t+"",r,e,o):void 0,c=f===void 0;if(c){var h=Jn(l),d=!h&&Hh(l),v=!h&&!d&&Zm(l);f=l,h||d||v?Jn(s)?f=s:cY(s)?f=IX(s):d?(c=!1,f=kX(l,!0)):v?(c=!1,f=RX(l,!0)):f=[]:qke(l)||Zv(l)?(f=s,Zv(s)?f=Zke(s):Qa(s)&&!Km(s)||(f=FX(l))):c=!1}c&&(o.set(l,f),i(f,l,n,a,o),o.delete(l)),TT(r,t,f)}},Jke=function r(e,t,n,i,a){e!==t&&OL(t,function(o,s){if(a||(a=new _v),Qa(o))Qke(e,t,s,n,r,i,a);else{var l=i?i(OT(e,s),o,s+"",e,t,a):void 0;l===void 0&&(l=o),TT(e,s,l)}},ud)},eIe=function(r){return R_(function(e,t){var n=-1,i=t.length,a=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,o&&Z0(t[0],t[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=t[n];s&&r(e,s,n,a)}return e})}(function(r,e,t){Jke(r,e,t)}),wY=function(r,e){return r<e},tIe=function(r){return r&&r.length?RL(r,fd,wY):void 0},rIe=function(r,e){return r&&r.length?RL(r,Wu(e),wY):void 0},nIe=function(){return Rs.Date.now()},iIe=function(r,e,t,n){if(!Qa(r))return r;for(var i=-1,a=(e=D_(e,r)).length,o=a-1,s=r;s!=null&&++i<a;){var l=Qm(e[i]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var f=s[l];(u=n?n(f,l,s):void 0)===void 0&&(u=Qa(f)?f:O_(e[i+1])?[]:{})}T_(s,l,u),s=s[l]}return r},aIe=function(r,e,t){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=N_(r,o);t(s,o)&&iIe(a,D_(o,r),s)}return a},oIe=function(r,e){return aIe(r,e,function(t,n){return ZX(r,n)})},sIe=function(r){return uY(lY(r,void 0,bY),r+"")}(function(r,e){return r==null?{}:oIe(r,e)}),lIe=Math.ceil,uIe=Math.max,fIe=function(r,e,t,n){for(var i=-1,a=uIe(lIe((e-r)/(t||1)),0),o=Array(a);a--;)o[n?a:++i]=r,r+=t;return o},cIe=function(r){return function(e,t,n){return n&&typeof n!="number"&&Z0(e,t,n)&&(t=n=void 0),e=fx(e),t===void 0?(t=e,e=0):t=fx(t),n=n===void 0?e<t?1:-1:fx(n),fIe(e,t,n,r)}}(),hIe=function(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r},dIe=function(r,e){if(r!==e){var t=r!==void 0,n=r===null,i=r==r,a=Yh(r),o=e!==void 0,s=e===null,l=e==e,u=Yh(e);if(!s&&!u&&!a&&r>e||a&&o&&l&&!s&&!u||n&&o&&l||!t&&l||!i)return 1;if(!n&&!a&&!u&&r<e||u&&t&&i&&!n&&!a||s&&t&&i||!o&&i||!l)return-1}return 0},vIe=function(r,e,t){for(var n=-1,i=r.criteria,a=e.criteria,o=i.length,s=t.length;++n<o;){var l=dIe(i[n],a[n]);if(l)return n>=s?l:l*(t[n]=="desc"?-1:1)}return r.index-e.index},pIe=function(r,e,t){e=e.length?Mv(e,function(a){return Jn(a)?function(o){return N_(o,a.length===1?a[0]:a)}:a}):[fd];var n=-1;e=Mv(e,k_(Wu));var i=rY(r,function(a,o,s){return{criteria:Mv(e,function(l){return l(a)}),index:++n,value:a}});return hIe(i,function(a,o){return vIe(a,o,t)})},gIe=R_(function(r,e){if(r==null)return[];var t=e.length;return t>1&&Z0(r,e[0],e[1])?e=[]:t>2&&Z0(e[0],e[1],e[2])&&(e=[e[0]]),pIe(r,DL(e,1),[])}),mIe=0,yIe=function(r){var e=++mIe;return KX(r)+e},bIe=function(r,e,t){for(var n=-1,i=r.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;t(o,r[n],s)}return o},Aw,xIe=function(r,e){return bIe(r||[],e||[],T_)};try{Aw={cloneDeep:Tke,constant:TL,defaults:kke,each:jX,filter:JX,find:zke,flatten:bY,forEach:GX,forIn:Gke,has:eY,isUndefined:tY,last:jke,map:nY,mapValues:Uke,max:Vke,merge:eIe,min:tIe,minBy:rIe,now:nIe,pick:sIe,range:cIe,reduce:iY,sortBy:gIe,uniqueId:yIe,values:hY,zipObject:xIe}}catch{}Aw||(Aw=window._);var se=Aw,wIe=cx;function cx(){var r={};r._next=r._prev=r,this._sentinel=r}function Y4(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function EIe(r,e){if(r!=="_next"&&r!=="_prev")return e}cx.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return Y4(e),e},cx.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&Y4(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e},cx.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,EIe)),t=t._prev;return"["+r.join(", ")+"]"};var _Ie=Bs.Graph,SIe=function(r,e){if(r.nodeCount()<=1)return[];var t=function(i,a){var o=new _Ie,s=0,l=0;se.forEach(i.nodes(),function(c){o.setNode(c,{v:c,in:0,out:0})}),se.forEach(i.edges(),function(c){var h=o.edge(c.v,c.w)||0,d=a(c),v=h+d;o.setEdge(c.v,c.w,v),l=Math.max(l,o.node(c.v).out+=d),s=Math.max(s,o.node(c.w).in+=d)});var u=se.range(l+s+3).map(function(){return new wIe}),f=s+1;return se.forEach(o.nodes(),function(c){kT(u,f,o.node(c))}),{graph:o,buckets:u,zeroIdx:f}}(r,e||MIe),n=function(i,a,o){for(var s,l=[],u=a[a.length-1],f=a[0];i.nodeCount();){for(;s=f.dequeue();)NM(i,a,o,s);for(;s=u.dequeue();)NM(i,a,o,s);if(i.nodeCount()){for(var c=a.length-2;c>0;--c)if(s=a[c].dequeue()){l=l.concat(NM(i,a,o,s,!0));break}}}return l}(t.graph,t.buckets,t.zeroIdx);return se.flatten(se.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)},MIe=se.constant(1);function NM(r,e,t,n,i){var a=i?[]:void 0;return se.forEach(r.inEdges(n.v),function(o){var s=r.edge(o),l=r.node(o.v);i&&a.push({v:o.v,w:o.w}),l.out-=s,kT(e,t,l)}),se.forEach(r.outEdges(n.v),function(o){var s=r.edge(o),l=o.w,u=r.node(l);u.in-=s,kT(e,t,u)}),r.removeNode(n.v),a}function kT(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var K4={run:function(r){var e=r.graph().acyclicer==="greedy"?SIe(r,function(t){return function(n){return t.edge(n).weight}}(r)):function(t){var n=[],i={},a={};function o(s){se.has(a,s)||(a[s]=!0,i[s]=!0,se.forEach(t.outEdges(s),function(l){se.has(i,l.w)?n.push(l):o(l.w)}),delete i[s])}return se.forEach(t.nodes(),o),n}(r);se.forEach(e,function(t){var n=r.edge(t);r.removeEdge(t),n.forwardName=t.name,n.reversed=!0,r.setEdge(t.w,t.v,n,se.uniqueId("rev"))})},undo:function(r){se.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}},q4=Bs.Graph,Xi={addDummyNode:Z4,simplify:function(r){var e=new q4().setGraph(r.graph());return se.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),se.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},i=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e},asNonCompoundGraph:function(r){var e=new q4({multigraph:r.isMultigraph()}).setGraph(r.graph());return se.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),se.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e},successorWeights:function(r){var e=se.map(r.nodes(),function(t){var n={};return se.forEach(r.outEdges(t),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return se.zipObject(r.nodes(),e)},predecessorWeights:function(r){var e=se.map(r.nodes(),function(t){var n={};return se.forEach(r.inEdges(t),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return se.zipObject(r.nodes(),e)},intersectRect:function(r,e){var t,n,i=r.x,a=r.y,o=e.x-i,s=e.y-a,l=r.width/2,u=r.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(o)*u?(s<0&&(u=-u),t=u*o/s,n=u):(o<0&&(l=-l),t=l,n=l*s/o),{x:i+t,y:a+n}},buildLayerMatrix:function(r){var e=se.map(se.range(Q4(r)+1),function(){return[]});return se.forEach(r.nodes(),function(t){var n=r.node(t),i=n.rank;se.isUndefined(i)||(e[i][n.order]=t)}),e},normalizeRanks:function(r){var e=se.min(se.map(r.nodes(),function(t){return r.node(t).rank}));se.forEach(r.nodes(),function(t){var n=r.node(t);se.has(n,"rank")&&(n.rank-=e)})},removeEmptyRanks:function(r){var e=se.min(se.map(r.nodes(),function(a){return r.node(a).rank})),t=[];se.forEach(r.nodes(),function(a){var o=r.node(a).rank-e;t[o]||(t[o]=[]),t[o].push(a)});var n=0,i=r.graph().nodeRankFactor;se.forEach(t,function(a,o){se.isUndefined(a)&&o%i!=0?--n:n&&se.forEach(a,function(s){r.node(s).rank+=n})})},addBorderNode:function(r,e,t,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),Z4(r,"border",i,e)},maxRank:Q4,partition:function(r,e){var t={lhs:[],rhs:[]};return se.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t},time:function(r,e){var t=se.now();try{return e()}finally{console.log(r+" time: "+(se.now()-t)+"ms")}},notime:function(r,e){return e()}};function Z4(r,e,t,n){var i;do i=se.uniqueId(n);while(r.hasNode(i));return t.dummy=e,r.setNode(i,t),i}function Q4(r){return se.max(se.map(r.nodes(),function(e){var t=r.node(e).rank;if(!se.isUndefined(t))return t}))}var J4={run:function(r){r.graph().dummyChains=[],se.forEach(r.edges(),function(e){(function(t,n){var i,a,o,s=n.v,l=t.node(s).rank,u=n.w,f=t.node(u).rank,c=n.name,h=t.edge(n),d=h.labelRank;if(f!==l+1){for(t.removeEdge(n),o=0,++l;l<f;++o,++l)h.points=[],a={width:0,height:0,edgeLabel:h,edgeObj:n,rank:l},i=Xi.addDummyNode(t,"edge",a,"_d"),l===d&&(a.width=h.width,a.height=h.height,a.dummy="edge-label",a.labelpos=h.labelpos),t.setEdge(s,i,{weight:h.weight},c),o===0&&t.graph().dummyChains.push(i),s=i;t.setEdge(s,u,{weight:h.weight},c)}})(r,e)})},undo:function(r){se.forEach(r.graph().dummyChains,function(e){var t,n=r.node(e),i=n.edgeLabel;for(r.setEdge(n.edgeObj,i);n.dummy;)t=r.successors(e)[0],r.removeNode(e),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),e=t,n=r.node(e)})}},EY=function(r){var e={};se.forEach(r.sources(),function t(n){var i=r.node(n);if(se.has(e,n))return i.rank;e[n]=!0;var a=se.min(se.map(r.outEdges(n),function(o){return t(o.w)-r.edge(o).minlen}));return a!==Number.POSITIVE_INFINITY&&a!=null||(a=0),i.rank=a})},_Y=function(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen},CIe=Bs.Graph,Tw=_Y,SY=function(r){var e,t,n=new CIe({directed:!1}),i=r.nodes()[0],a=r.nodeCount();for(n.setNode(i,{});AIe(n,r)<a;)e=TIe(n,r),t=n.hasNode(e.v)?Tw(r,e):-Tw(r,e),OIe(n,r,t);return n};function AIe(r,e){return se.forEach(r.nodes(),function t(n){se.forEach(e.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;r.hasNode(o)||Tw(e,i)||(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})}),r.nodeCount()}function TIe(r,e){return se.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return Tw(e,t)})}function OIe(r,e,t){se.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var kIe=_Y,IIe=EY,LIe=Bs.alg.preorder,PIe=Bs.alg.postorder,DIe=Xi.simplify,NIe=rh;function rh(r){r=DIe(r),IIe(r);var e,t=SY(r);for(FL(t),BL(t,r);e=AY(t);)OY(t,r,e,TY(t,r,e))}function BL(r,e){var t=PIe(r,r.nodes());t=t.slice(0,t.length-1),se.forEach(t,function(n){(function(i,a,o){var s=i.node(o).parent;i.edge(o,s).cutvalue=MY(i,a,o)})(r,e,n)})}function MY(r,e,t){var n=r.node(t).parent,i=!0,a=e.edge(t,n),o=0;return a||(i=!1,a=e.edge(n,t)),o=a.weight,se.forEach(e.nodeEdges(t),function(s){var l,u,f=s.v===t,c=f?s.w:s.v;if(c!==n){var h=f===i,d=e.edge(s).weight;if(o+=h?d:-d,l=t,u=c,r.hasEdge(l,u)){var v=r.edge(t,c).cutvalue;o+=h?-v:v}}}),o}function FL(r,e){arguments.length<2&&(e=r.nodes()[0]),CY(r,{},1,e)}function CY(r,e,t,n,i){var a=t,o=r.node(n);return e[n]=!0,se.forEach(r.neighbors(n),function(s){se.has(e,s)||(t=CY(r,e,t,s,n))}),o.low=a,o.lim=t++,i?o.parent=i:delete o.parent,t}function AY(r){return se.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function TY(r,e,t){var n=t.v,i=t.w;e.hasEdge(n,i)||(n=t.w,i=t.v);var a=r.node(n),o=r.node(i),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=se.filter(e.edges(),function(f){return l===eF(r,r.node(f.v),s)&&l!==eF(r,r.node(f.w),s)});return se.minBy(u,function(f){return kIe(e,f)})}function OY(r,e,t,n){var i=t.v,a=t.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),FL(r),BL(r,e),function(o,s){var l=se.find(o.nodes(),function(f){return!s.node(f).parent}),u=LIe(o,l);u=u.slice(1),se.forEach(u,function(f){var c=o.node(f).parent,h=s.edge(f,c),d=!1;h||(h=s.edge(c,f),d=!0),s.node(f).rank=s.node(c).rank+(d?h.minlen:-h.minlen)})}(r,e)}function eF(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}rh.initLowLimValues=FL,rh.initCutValues=BL,rh.calcCutValue=MY,rh.leaveEdge=AY,rh.enterEdge=TY,rh.exchangeEdges=OY;var kY=EY,RIe=function(r){switch(r.graph().ranker){case"network-simplex":tF(r);break;case"tight-tree":(function(e){kY(e),SY(e)})(r);break;case"longest-path":BIe(r);break;default:tF(r)}},BIe=kY;function tF(r){NIe(r)}var FIe=function(r){var e=function(t){var n={},i=0;function a(o){var s=i;se.forEach(t.children(o),a),n[o]={low:s,lim:i++}}return se.forEach(t.children(),a),n}(r);se.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),i=n.edgeObj,a=function(c,h,d,v){var p,g,m=[],b=[],y=Math.min(h[d].low,h[v].low),x=Math.max(h[d].lim,h[v].lim);p=d;do p=c.parent(p),m.push(p);while(p&&(h[p].low>y||x>h[p].lim));for(g=p,p=v;(p=c.parent(p))!==g;)b.push(p);return{path:m.concat(b.reverse()),lca:g}}(r,e,i.v,i.w),o=a.path,s=a.lca,l=0,u=o[l],f=!0;t!==i.w;){if(n=r.node(t),f){for(;(u=o[l])!==s&&r.node(u).maxRank<n.rank;)l++;u===s&&(f=!1)}if(!f){for(;l<o.length-1&&r.node(u=o[l+1]).minRank<=n.rank;)l++;u=o[l]}r.setParent(t,u),t=r.successors(t)[0]}})},rF={run:function(r){var e=Xi.addDummyNode(r,"root",{},"_root"),t=function(o){var s={};function l(u,f){var c=o.children(u);c&&c.length&&se.forEach(c,function(h){l(h,f+1)}),s[u]=f}return se.forEach(o.children(),function(u){l(u,1)}),s}(r),n=se.max(se.values(t))-1,i=2*n+1;r.graph().nestingRoot=e,se.forEach(r.edges(),function(o){r.edge(o).minlen*=i});var a=function(o){return se.reduce(o.edges(),function(s,l){return s+o.edge(l).weight},0)}(r)+1;se.forEach(r.children(),function(o){IY(r,e,i,a,n,t,o)}),r.graph().nodeRankFactor=i},cleanup:function(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,se.forEach(r.edges(),function(t){r.edge(t).nestingEdge&&r.removeEdge(t)})}};function IY(r,e,t,n,i,a,o){var s=r.children(o);if(s.length){var l=Xi.addBorderNode(r,"_bt"),u=Xi.addBorderNode(r,"_bb"),f=r.node(o);r.setParent(l,o),f.borderTop=l,r.setParent(u,o),f.borderBottom=u,se.forEach(s,function(c){IY(r,e,t,n,i,a,c);var h=r.node(c),d=h.borderTop?h.borderTop:c,v=h.borderBottom?h.borderBottom:c,p=h.borderTop?n:2*n,g=d!==v?1:i-a[o]+1;r.setEdge(l,d,{weight:p,minlen:g,nestingEdge:!0}),r.setEdge(v,u,{weight:p,minlen:g,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,l,{weight:0,minlen:i+a[o]})}else o!==e&&r.setEdge(e,o,{weight:0,minlen:t})}var $Ie=function(r){se.forEach(r.children(),function e(t){var n=r.children(t),i=r.node(t);if(n.length&&se.forEach(n,e),se.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)nF(r,"borderLeft","_bl",t,i,a),nF(r,"borderRight","_br",t,i,a)}})};function nF(r,e,t,n,i,a){var o={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],l=Xi.addDummyNode(r,"border",o,t);i[e][a]=l,r.setParent(l,n),s&&r.setEdge(s,l,{weight:1})}var iF={adjust:function(r){var e=r.graph().rankdir.toLowerCase();e!=="lr"&&e!=="rl"||aF(r)},undo:function(r){var e=r.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||function(t){se.forEach(t.nodes(),function(n){RM(t.node(n))}),se.forEach(t.edges(),function(n){var i=t.edge(n);se.forEach(i.points,RM),se.has(i,"y")&&RM(i)})}(r),e!=="lr"&&e!=="rl"||(function(t){se.forEach(t.nodes(),function(n){BM(t.node(n))}),se.forEach(t.edges(),function(n){var i=t.edge(n);se.forEach(i.points,BM),se.has(i,"x")&&BM(i)})}(r),aF(r))}};function aF(r){se.forEach(r.nodes(),function(e){oF(r.node(e))}),se.forEach(r.edges(),function(e){oF(r.edge(e))})}function oF(r){var e=r.width;r.width=r.height,r.height=e}function RM(r){r.y=-r.y}function BM(r){var e=r.x;r.x=r.y,r.y=e}var zIe=function(r){var e={},t=se.filter(r.nodes(),function(s){return!r.children(s).length}),n=se.max(se.map(t,function(s){return r.node(s).rank})),i=se.map(se.range(n+1),function(){return[]});function a(s){if(!se.has(e,s)){e[s]=!0;var l=r.node(s);i[l.rank].push(s),se.forEach(r.successors(s),a)}}var o=se.sortBy(t,function(s){return r.node(s).rank});return se.forEach(o,a),i},GIe=function(r,e){for(var t=0,n=1;n<e.length;++n)t+=jIe(r,e[n-1],e[n]);return t};function jIe(r,e,t){for(var n=se.zipObject(t,se.map(t,function(u,f){return f})),i=se.flatten(se.map(e,function(u){return se.sortBy(se.map(r.outEdges(u),function(f){return{pos:n[f.w],weight:r.edge(f).weight}}),"pos")}),!0),a=1;a<t.length;)a<<=1;var o=2*a-1;a-=1;var s=se.map(new Array(o),function(){return 0}),l=0;return se.forEach(i.forEach(function(u){var f=u.pos+a;s[f]+=u.weight;for(var c=0;f>0;)f%2&&(c+=s[f+1]),s[f=f-1>>1]+=u.weight;l+=u.weight*c})),l}var UIe=function(r,e){return se.map(e,function(t){var n=r.inEdges(t);if(n.length){var i=se.reduce(n,function(a,o){var s=r.edge(o),l=r.node(o.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}})},WIe=function(r,e){var t={};return se.forEach(r,function(n,i){var a=t[n.v]={indegree:0,in:[],out:[],vs:[n.v],i};se.isUndefined(n.barycenter)||(a.barycenter=n.barycenter,a.weight=n.weight)}),se.forEach(e.edges(),function(n){var i=t[n.v],a=t[n.w];se.isUndefined(i)||se.isUndefined(a)||(a.indegree++,i.out.push(t[n.w]))}),function(n){var i=[];function a(l){return function(u){u.merged||(se.isUndefined(u.barycenter)||se.isUndefined(l.barycenter)||u.barycenter>=l.barycenter)&&function(f,c){var h=0,d=0;f.weight&&(h+=f.barycenter*f.weight,d+=f.weight),c.weight&&(h+=c.barycenter*c.weight,d+=c.weight),f.vs=c.vs.concat(f.vs),f.barycenter=h/d,f.weight=d,f.i=Math.min(c.i,f.i),c.merged=!0}(l,u)}}function o(l){return function(u){u.in.push(l),--u.indegree==0&&n.push(u)}}for(;n.length;){var s=n.pop();i.push(s),se.forEach(s.in.reverse(),a(s)),se.forEach(s.out,o(s))}return se.map(se.filter(i,function(l){return!l.merged}),function(l){return se.pick(l,["vs","i","barycenter","weight"])})}(se.filter(t,function(n){return!n.indegree}))},VIe=function(r,e){var t=Xi.partition(r,function(c){return se.has(c,"barycenter")}),n=t.lhs,i=se.sortBy(t.rhs,function(c){return-c.i}),a=[],o=0,s=0,l=0;n.sort((u=!!e,function(c,h){return c.barycenter<h.barycenter?-1:c.barycenter>h.barycenter?1:u?h.i-c.i:c.i-h.i})),l=sF(a,i,l),se.forEach(n,function(c){l+=c.vs.length,a.push(c.vs),o+=c.barycenter*c.weight,s+=c.weight,l=sF(a,i,l)});var u,f={vs:se.flatten(a,!0)};return s&&(f.barycenter=o/s,f.weight=s),f};function sF(r,e,t){for(var n;e.length&&(n=se.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}var HIe=function r(e,t,n,i){var a=e.children(t),o=e.node(t),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,u={};s&&(a=se.filter(a,function(p){return p!==s&&p!==l}));var f=UIe(e,a);se.forEach(f,function(p){if(e.children(p.v).length){var g=r(e,p.v,n,i);u[p.v]=g,se.has(g,"barycenter")&&(m=p,b=g,se.isUndefined(m.barycenter)?(m.barycenter=b.barycenter,m.weight=b.weight):(m.barycenter=(m.barycenter*m.weight+b.barycenter*b.weight)/(m.weight+b.weight),m.weight+=b.weight))}var m,b});var c=WIe(f,n);(function(p,g){se.forEach(p,function(m){m.vs=se.flatten(m.vs.map(function(b){return g[b]?g[b].vs:b}),!0)})})(c,u);var h=VIe(c,i);if(s&&(h.vs=se.flatten([s,h.vs,l],!0),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),v=e.node(e.predecessors(l)[0]);se.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+v.order)/(h.weight+2),h.weight+=2}return h},XIe=Bs.Graph,YIe=function(r,e,t){var n=function(a){for(var o;a.hasNode(o=se.uniqueId("_root")););return o}(r),i=new XIe({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return se.forEach(r.nodes(),function(a){var o=r.node(a),s=r.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),se.forEach(r[t](a),function(l){var u=l.v===a?l.w:l.v,f=i.edge(u,a),c=se.isUndefined(f)?0:f.weight;i.setEdge(u,a,{weight:r.edge(l).weight+c})}),se.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i},KIe=function(r,e,t){var n,i={};se.forEach(t,function(a){for(var o,s,l=r.parent(a);l;){if((o=r.parent(l))?(s=i[o],i[o]=l):(s=n,n=l),s&&s!==l)return void e.setEdge(s,l);l=o}})},qIe=Bs.Graph,ZIe=function(r){var e=Xi.maxRank(r),t=lF(r,se.range(1,e+1),"inEdges"),n=lF(r,se.range(e-1,-1,-1),"outEdges"),i=zIe(r);uF(r,i);for(var a,o=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){QIe(s%2?t:n,s%4>=2),i=Xi.buildLayerMatrix(r);var u=GIe(r,i);u<o&&(l=0,a=se.cloneDeep(i),o=u)}uF(r,a)};function lF(r,e,t){return se.map(e,function(n){return YIe(r,n,t)})}function QIe(r,e){var t=new qIe;se.forEach(r,function(n){var i=n.graph().root,a=HIe(n,i,t,e);se.forEach(a.vs,function(o,s){n.node(o).order=s}),KIe(n,t,a.vs)})}function uF(r,e){se.forEach(e,function(t){se.forEach(t,function(n,i){r.node(n).order=i})})}var JIe=Bs.Graph,eLe=function(r){var e,t=Xi.buildLayerMatrix(r),n=se.merge(tLe(r,t),rLe(r,t)),i={};se.forEach(["u","d"],function(o){e=o==="u"?t:se.values(t).reverse(),se.forEach(["l","r"],function(s){s==="r"&&(e=se.map(e,function(c){return se.values(c).reverse()}));var l=(o==="u"?r.predecessors:r.successors).bind(r),u=iLe(r,e,n,l),f=aLe(r,e,u.root,u.align,s==="r");s==="r"&&(f=se.mapValues(f,function(c){return-c})),i[o+s]=f})});var a=oLe(r,i);return sLe(i,a),lLe(i,r.graph().align)};function tLe(r,e){var t={};return se.reduce(e,function(n,i){var a=0,o=0,s=n.length,l=se.last(i);return se.forEach(i,function(u,f){var c=function(d,v){if(d.node(v).dummy)return se.find(d.predecessors(v),function(p){return d.node(p).dummy})}(r,u),h=c?r.node(c).order:s;(c||u===l)&&(se.forEach(i.slice(o,f+1),function(d){se.forEach(r.predecessors(d),function(v){var p=r.node(v),g=p.order;!(g<a||h<g)||p.dummy&&r.node(d).dummy||LY(t,v,d)})}),o=f+1,a=h)}),i}),t}function rLe(r,e){var t={};function n(i,a,o,s,l){var u;se.forEach(se.range(a,o),function(f){u=i[f],r.node(u).dummy&&se.forEach(r.predecessors(u),function(c){var h=r.node(c);h.dummy&&(h.order<s||h.order>l)&&LY(t,c,u)})})}return se.reduce(e,function(i,a){var o,s=-1,l=0;return se.forEach(a,function(u,f){if(r.node(u).dummy==="border"){var c=r.predecessors(u);c.length&&(o=r.node(c[0]).order,n(a,l,f,s,o),l=f,s=o)}n(a,l,a.length,o,i.length)}),a}),t}function LY(r,e,t){if(e>t){var n=e;e=t,t=n}var i=r[e];i||(r[e]=i={}),i[t]=!0}function nLe(r,e,t){if(e>t){var n=e;e=t,t=n}return se.has(r[e],t)}function iLe(r,e,t,n){var i={},a={},o={};return se.forEach(e,function(s){se.forEach(s,function(l,u){i[l]=l,a[l]=l,o[l]=u})}),se.forEach(e,function(s){var l=-1;se.forEach(s,function(u){var f=n(u);if(f.length)for(var c=((f=se.sortBy(f,function(p){return o[p]})).length-1)/2,h=Math.floor(c),d=Math.ceil(c);h<=d;++h){var v=f[h];a[u]===u&&l<o[v]&&!nLe(t,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=o[v])}})}),{root:i,align:a}}function aLe(r,e,t,n,i){var a={},o=function(u,f,c,h){var d=new JIe,v=u.graph(),p=function(g,m,b){return function(y,x,w){var E,_=y.node(x),S=y.node(w),C=0;if(C+=_.width/2,se.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":E=-_.width/2;break;case"r":E=_.width/2}if(E&&(C+=b?E:-E),E=0,C+=(_.dummy?m:g)/2,C+=(S.dummy?m:g)/2,C+=S.width/2,se.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":E=S.width/2;break;case"r":E=-S.width/2}return E&&(C+=b?E:-E),E=0,C}}(v.nodesep,v.edgesep,h);return se.forEach(f,function(g){var m;se.forEach(g,function(b){var y=c[b];if(d.setNode(y),m){var x=c[m],w=d.edge(x,y);d.setEdge(x,y,Math.max(p(u,b,m),w||0))}m=b})}),d}(r,e,t,i),s=i?"borderLeft":"borderRight";function l(u,f){for(var c=o.nodes(),h=c.pop(),d={};h;)d[h]?u(h):(d[h]=!0,c.push(h),c=c.concat(f(h))),h=c.pop()}return l(function(u){a[u]=o.inEdges(u).reduce(function(f,c){return Math.max(f,a[c.v]+o.edge(c))},0)},o.predecessors.bind(o)),l(function(u){var f=o.outEdges(u).reduce(function(h,d){return Math.min(h,a[d.w]-o.edge(d))},Number.POSITIVE_INFINITY),c=r.node(u);f!==Number.POSITIVE_INFINITY&&c.borderType!==s&&(a[u]=Math.max(a[u],f))},o.successors.bind(o)),se.forEach(n,function(u){a[u]=a[t[u]]}),a}function oLe(r,e){return se.minBy(se.values(e),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return se.forIn(t,function(a,o){var s=function(l,u){return l.node(u).width}(r,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function sLe(r,e){var t=se.values(e),n=se.min(t),i=se.max(t);se.forEach(["u","d"],function(a){se.forEach(["l","r"],function(o){var s,l=a+o,u=r[l];if(u!==e){var f=se.values(u);(s=o==="l"?n-se.min(f):i-se.max(f))&&(r[l]=se.mapValues(u,function(c){return c+s}))}})})}function lLe(r,e){return se.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var i=se.sortBy(se.map(r,n));return(i[1]+i[2])/2})}var uLe=eLe,fLe=function(r){(function(e){var t=Xi.buildLayerMatrix(e),n=e.graph().ranksep,i=0;se.forEach(t,function(a){var o=se.max(se.map(a,function(s){return e.node(s).height}));se.forEach(a,function(s){e.node(s).y=i+o/2}),i+=o+n})})(r=Xi.asNonCompoundGraph(r)),se.forEach(uLe(r),function(e,t){r.node(t).x=e})},cLe=Xi.normalizeRanks,hLe=Xi.removeEmptyRanks,sf=Xi,dLe=Bs.Graph,vLe=function(r,e){var t=e&&e.debugTiming?sf.time:sf.notime;t("layout",function(){var n=t("  buildLayoutGraph",function(){return function(i){var a=new dLe({multigraph:!0,compound:!0}),o=$M(i.graph());return a.setGraph(se.merge({},gLe,FM(o,pLe),se.pick(o,mLe))),se.forEach(i.nodes(),function(s){var l=$M(i.node(s));a.setNode(s,se.defaults(FM(l,yLe),bLe)),a.setParent(s,i.parent(s))}),se.forEach(i.edges(),function(s){var l=$M(i.edge(s));a.setEdge(s,se.merge({},wLe,FM(l,xLe),se.pick(l,ELe)))}),a}(r)});t("  runLayout",function(){(function(i,a){a("    makeSpaceForEdgeLabels",function(){(function(o){var s=o.graph();s.ranksep/=2,se.forEach(o.edges(),function(l){var u=o.edge(l);u.minlen*=2,u.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?u.width+=u.labeloffset:u.height+=u.labeloffset)})})(i)}),a("    removeSelfEdges",function(){(function(o){se.forEach(o.edges(),function(s){if(s.v===s.w){var l=o.node(s.v);l.selfEdges||(l.selfEdges=[]),l.selfEdges.push({e:s,label:o.edge(s)}),o.removeEdge(s)}})})(i)}),a("    acyclic",function(){K4.run(i)}),a("    nestingGraph.run",function(){rF.run(i)}),a("    rank",function(){RIe(sf.asNonCompoundGraph(i))}),a("    injectEdgeLabelProxies",function(){(function(o){se.forEach(o.edges(),function(s){var l=o.edge(s);if(l.width&&l.height){var u=o.node(s.v),f={rank:(o.node(s.w).rank-u.rank)/2+u.rank,e:s};sf.addDummyNode(o,"edge-proxy",f,"_ep")}})})(i)}),a("    removeEmptyRanks",function(){hLe(i)}),a("    nestingGraph.cleanup",function(){rF.cleanup(i)}),a("    normalizeRanks",function(){cLe(i)}),a("    assignRankMinMax",function(){(function(o){var s=0;se.forEach(o.nodes(),function(l){var u=o.node(l);u.borderTop&&(u.minRank=o.node(u.borderTop).rank,u.maxRank=o.node(u.borderBottom).rank,s=se.max(s,u.maxRank))}),o.graph().maxRank=s})(i)}),a("    removeEdgeLabelProxies",function(){(function(o){se.forEach(o.nodes(),function(s){var l=o.node(s);l.dummy==="edge-proxy"&&(o.edge(l.e).labelRank=l.rank,o.removeNode(s))})})(i)}),a("    normalize.run",function(){J4.run(i)}),a("    parentDummyChains",function(){FIe(i)}),a("    addBorderSegments",function(){$Ie(i)}),a("    order",function(){ZIe(i)}),a("    insertSelfEdges",function(){(function(o){var s=sf.buildLayerMatrix(o);se.forEach(s,function(l){var u=0;se.forEach(l,function(f,c){var h=o.node(f);h.order=c+u,se.forEach(h.selfEdges,function(d){sf.addDummyNode(o,"selfedge",{width:d.label.width,height:d.label.height,rank:h.rank,order:c+ ++u,e:d.e,label:d.label},"_se")}),delete h.selfEdges})})})(i)}),a("    adjustCoordinateSystem",function(){iF.adjust(i)}),a("    position",function(){fLe(i)}),a("    positionSelfEdges",function(){(function(o){se.forEach(o.nodes(),function(s){var l=o.node(s);if(l.dummy==="selfedge"){var u=o.node(l.e.v),f=u.x+u.width/2,c=u.y,h=l.x-f,d=u.height/2;o.setEdge(l.e,l.label),o.removeNode(s),l.label.points=[{x:f+2*h/3,y:c-d},{x:f+5*h/6,y:c-d},{x:f+h,y:c},{x:f+5*h/6,y:c+d},{x:f+2*h/3,y:c+d}],l.label.x=l.x,l.label.y=l.y}})})(i)}),a("    removeBorderNodes",function(){(function(o){se.forEach(o.nodes(),function(s){if(o.children(s).length){var l=o.node(s),u=o.node(l.borderTop),f=o.node(l.borderBottom),c=o.node(se.last(l.borderLeft)),h=o.node(se.last(l.borderRight));l.width=Math.abs(h.x-c.x),l.height=Math.abs(f.y-u.y),l.x=c.x+l.width/2,l.y=u.y+l.height/2}}),se.forEach(o.nodes(),function(s){o.node(s).dummy==="border"&&o.removeNode(s)})})(i)}),a("    normalize.undo",function(){J4.undo(i)}),a("    fixupEdgeLabelCoords",function(){(function(o){se.forEach(o.edges(),function(s){var l=o.edge(s);if(se.has(l,"x"))switch(l.labelpos!=="l"&&l.labelpos!=="r"||(l.width-=l.labeloffset),l.labelpos){case"l":l.x-=l.width/2+l.labeloffset;break;case"r":l.x+=l.width/2+l.labeloffset}})})(i)}),a("    undoCoordinateSystem",function(){iF.undo(i)}),a("    translateGraph",function(){(function(o){var s=Number.POSITIVE_INFINITY,l=0,u=Number.POSITIVE_INFINITY,f=0,c=o.graph(),h=c.marginx||0,d=c.marginy||0;function v(p){var g=p.x,m=p.y,b=p.width,y=p.height;s=Math.min(s,g-b/2),l=Math.max(l,g+b/2),u=Math.min(u,m-y/2),f=Math.max(f,m+y/2)}se.forEach(o.nodes(),function(p){v(o.node(p))}),se.forEach(o.edges(),function(p){var g=o.edge(p);se.has(g,"x")&&v(g)}),s-=h,u-=d,se.forEach(o.nodes(),function(p){var g=o.node(p);g.x-=s,g.y-=u}),se.forEach(o.edges(),function(p){var g=o.edge(p);se.forEach(g.points,function(m){m.x-=s,m.y-=u}),se.has(g,"x")&&(g.x-=s),se.has(g,"y")&&(g.y-=u)}),c.width=l-s+h,c.height=f-u+d})(i)}),a("    assignNodeIntersects",function(){(function(o){se.forEach(o.edges(),function(s){var l,u,f=o.edge(s),c=o.node(s.v),h=o.node(s.w);f.points?(l=f.points[0],u=f.points[f.points.length-1]):(f.points=[],l=h,u=c),f.points.unshift(sf.intersectRect(c,l)),f.points.push(sf.intersectRect(h,u))})})(i)}),a("    reversePoints",function(){(function(o){se.forEach(o.edges(),function(s){var l=o.edge(s);l.reversed&&l.points.reverse()})})(i)}),a("    acyclic.undo",function(){K4.undo(i)})})(n,t)}),t("  updateInputGraph",function(){(function(i,a){se.forEach(i.nodes(),function(o){var s=i.node(o),l=a.node(o);s&&(s.x=l.x,s.y=l.y,a.children(o).length&&(s.width=l.width,s.height=l.height))}),se.forEach(i.edges(),function(o){var s=i.edge(o),l=a.edge(o);s.points=l.points,se.has(l,"x")&&(s.x=l.x,s.y=l.y)}),i.graph().width=a.graph().width,i.graph().height=a.graph().height})(r,n)})})},pLe=["nodesep","edgesep","ranksep","marginx","marginy"],gLe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},mLe=["acyclicer","ranker","rankdir","align"],yLe=["width","height"],bLe={width:0,height:0},xLe=["minlen","weight","width","height","labeloffset"],wLe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ELe=["labelpos"];function FM(r,e){return se.mapValues(se.pick(r,e),Number)}function $M(r){var e={};return se.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var _Le=Bs.Graph,PY={graphlib:Bs,layout:vLe,debug:{debugOrdering:function(r){var e=Xi.buildLayerMatrix(r),t=new _Le({compound:!0,multigraph:!0}).setGraph({});return se.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),se.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),se.forEach(e,function(n,i){var a="layer"+i;t.setNode(a,{rank:"same"}),se.reduce(n,function(o,s){return t.setEdge(o,s,{style:"invis"}),s})}),t}},util:{time:Xi.time,notime:Xi.notime},version:"0.8.5"},SLe=PY.graphlib,MLe=PY.layout;class CLe{constructor(e){this.cardinality=1,this.include=Vh.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=ja.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class ALe{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function TLe(r){const e=new ALe;return r.nodes.map(t=>new CLe(t)).forEach(t=>{e.nodes[t.name]=t,t.inputs.forEach(n=>{(function(i,a,o){o.name!==a.name&&i.edges.push(Object.assign(Object.assign({},o.attr),{v:o.name,w:a.name}))})(e,t,n)})}),e}class OLe{constructor(e,t={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Vh.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=ja.META,this.path=[],this.name=e,this.metaGraph=$L(e,qv.META,t)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(e=>this.metaGraph.node(e))}leaves(){let e,t=[],n=[this];for(;n.length;){let i=n.shift();i.isGroupNode?(e=i.metaGraph,e.nodes().forEach(a=>n.push(e.node(a)))):t.push(i.name)}return t}}class kLe{constructor(e,t){this.v=e,this.w=t,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,t){this.baseEdgeList.push(e)}}function DY(r,e={}){return new OLe(r,e)}function NY(r,e){return new kLe(r,e)}function $L(r,e,t){const n=t||{},i=new SLe.Graph(n);return i.setGraph({name:r,rankdir:n.rankdir,type:e,align:n.align}),i}class ILe{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=DY(Kv,this.graphOptions),this.index[Kv]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,t){this.index[e]=t}getBridgeGraph(e){const t=this.index[e];if(!t)throw Error("Could not find node in hierarchy: "+e);if(!("metaGraph"in t))return null;const n=t;if(n.bridgeGraph)return n.bridgeGraph;const i=$L(SX,qv.BRIDGE,this.graphOptions);if(n.bridgeGraph=i,!t.parentNode||!("metaGraph"in t.parentNode))return i;const a=t.parentNode;return[a.metaGraph,this.getBridgeGraph(a.name)].forEach(o=>{o.edges().filter(s=>s.v===e||s.w===e).forEach(s=>{const l=s.w===e;o.edge(s).baseEdgeList.forEach(u=>{const[f,c]=l?[u.w,s.v]:[u.v,s.w],h=this.getChildName(e,f),d={v:l?c:h,w:l?h:c};let v=i.edge(d);v||(v=NY(d.v,d.w),v.inbound=l,i.setEdge(d.v,d.w,v)),v.addBaseEdge(u,this)})})}),i}getChildName(e,t){let n=this.index[t];for(;n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+t)}getPredecessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!0)}getSuccessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!1)}getOneWayEdges(e,t){const n=[];if(!e.parentNode||!e.parentNode.isGroupNode)return n;const i=e.parentNode,a=i.metaGraph,o=this.getBridgeGraph(i.name);return fF(a,e,t,n),fF(o,e,t,n),n}}function LLe(r,e){const{rankDirection:t,align:n}=e,i=new ILe({rankdir:t,align:n});return function(a,o){Object.keys(o.nodes).forEach(s=>{const l=o.nodes[s],u=l.path;let f=a.root;f.depth=Math.max(u.length,f.depth);for(let c=0;c<u.length&&(f.depth=Math.max(f.depth,u.length-c),f.cardinality+=l.cardinality,c!==u.length-1);c++){const h=u[c];let d=a.node(h);d||(d=DY(h,a.graphOptions),d.path=l.path.slice(0,c+1),d.parentNode=f,a.setNode(h,d),f.metaGraph.setNode(h,d)),f=d}a.setNode(l.name,l),l.parentNode=f,f.metaGraph.setNode(l.name,l)})}(i,r),function(a,o){const s=a.getNodeMap();let l=[],u=[];const f=(c,h)=>{let d=0;for(;c;)h[d++]=c.name,c=c.parentNode;return d-1};o.edges.forEach(c=>{l=[],u=[];let h=f(o.nodes[c.v],l),d=f(o.nodes[c.w],u);for(;l[h]===u[d];)if(h--,d--,h<0||d<0)throw Error("No difference found between ancestor paths.");const v=s[l[h+1]],p=l[h],g=u[d];let m=v.metaGraph.edge(p,g);m||(m=NY(p,g),v.metaGraph.setEdge(p,g,m)),m.addBaseEdge(c,a)})}(i,r),i}function fF(r,e,t,n){(t?r.inEdges(e.name):r.outEdges(e.name)).forEach(i=>{const a=r.edge(i);n.push(a)})}class PLe{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new hF(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const t=this.index[e];if(t.node.type!==ja.META)return;const n=t,i=n.node.metaGraph,a=n.coreGraph;i.nodes().forEach(f=>{const c=this.getOrCreateRenderNodeByName(f);a.setNode(f,c)}),i.edges().forEach(f=>{const c=i.edge(f),h=new cF(c);a.setEdge(f.v,f.w,h)});const o=n.node.parentNode;if(!o)return;const s=this.getRenderNodeByName(o.name),l=(f,...c)=>c.concat([f?"IN":"OUT"]).join("~~"),u=this.hierarchy.getBridgeGraph(e);u.edges().forEach(f=>{const c=u.edge(f),h=!!i.node(f.w),[d,v]=h?[f.w,f.v]:[f.v,f.w],p=w=>{const E=h?{v:w,w:e}:{v:e,w};return s.coreGraph.edge(E)};let g=p(v);g||(g=p(l(h,v,o.name)));const m=l(h,e),b=l(h,v,e);let y=a.node(b);if(!y){let w=a.node(m);if(!w){const _={name:m,type:ja.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Vh.UNSPECIFIED,inbound:h,attr:{}};w=new hx(_),this.index[m]=w,a.setNode(m,w)}const E={name:b,type:ja.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Vh.UNSPECIFIED,inbound:h,attr:{}};y=new hx(E),this.index[b]=y,a.setNode(b,y),a.setParent(b,m),w.node.cardinality++}const x=new cF(c);x.adjoiningMetaEdge=g,h?a.setEdge(b,d,x):a.setEdge(d,b,x)})}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const t=this.getNodeByName(e);return t?(this.index[e]=t.isGroupNode?new hF(t,this.hierarchy.graphOptions):new hx(t),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class hx{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class cF{constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class hF extends hx{constructor(e,t){super(e);const n=e.metaGraph.graph();t.compound=!0,this.coreGraph=$L(n.name,qv.CORE,t)}}function RY(r,e){r.node.isGroupNode&&function(t,n){const i=xT(n);t.coreGraph.nodes().map(a=>t.coreGraph.node(a)).forEach(a=>{var o,s,l,u,f,c;const{height:h,width:d}=a;switch(a.node.type){case ja.NODE:Object.assign(a,i.nodeSize.node),a.height=h||i.nodeSize.node.height,a.width=d||i.nodeSize.node.width;break;case ja.BRIDGE:Object.assign(a,i.nodeSize.bridge);break;case ja.META:a.expanded?RY(a,n):(Object.assign(a,i.nodeSize.meta),a.height=i.nodeSize.meta.height,a.width=i.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+a.node.type)}if(!a.expanded){const v=a.attr;(function(p,g=!1){if(p.coreBox.width=p.width,p.coreBox.height=p.height,!g){const m=`${p.displayName}`.length,b=3;p.width=Math.max(p.coreBox.width,m*b)}})(a,n&&(a.node.type===0&&!!(!((s=(o=n==null?void 0:n.nodeSize)===null||o===void 0?void 0:o.meta)===null||s===void 0)&&s.width)||a.node.type===1&&(!!(!((u=(l=n==null?void 0:n.nodeSize)===null||l===void 0?void 0:l.node)===null||u===void 0)&&u.width)||!!v.width)||a.node.type===2&&!!(!((c=(f=n==null?void 0:n.nodeSize)===null||f===void 0?void 0:f.bridge)===null||c===void 0)&&c.width)))}})}(r,e),r.node.type===ja.META&&function(t,n){const i=xT(n),a=i.subScene.meta;Object.assign(t,a);const{nodeSep:o,rankSep:s,edgeSep:l,align:u}=i.graph.meta,f={nodesep:o,ranksep:s,edgesep:l,align:u};Object.assign(t.coreBox,function(d,v){const{ranksep:p,nodesep:g,edgesep:m,align:b}=v;Object.assign(d.graph(),{ranksep:p,nodesep:g,edgesep:m,align:b});const y=[];if(d.nodes().forEach(S=>{d.node(S).node.type!==ja.BRIDGE&&y.push(S)}),!y.length)return{width:0,height:0};MLe(d);let x=1/0,w=1/0,E=-1/0,_=-1/0;return y.forEach(S=>{const C=d.node(S),M=.5*C.width,T=C.x-M,A=C.x+M;x=T<x?T:x,E=A>E?A:E;const O=.5*C.height,L=C.y-O,N=C.y+O;w=L<w?L:w,_=N>_?N:_}),d.edges().forEach(S=>{const C=d.edge(S),M=d.node(C.metaEdge.v),T=d.node(C.metaEdge.w);if(C.points.length===3&&function(L){let N=dF(L[0],L[1]);for(let P=1;P<L.length-1;P++){const R=dF(L[P],L[P+1]);if(Math.abs(R-N)>1)return!1;N=R}return!0}(C.points)){if(M!=null){const L=M.expanded?M.x:IT(M);C.points[0].x=L}if(T!=null){const L=T.expanded?T.x:IT(T);C.points[2].x=L}C.points=[C.points[0],C.points[1]]}const A=C.points[C.points.length-2];T!=null&&(C.points[C.points.length-1]=vF(A,T));const O=C.points[1];M!=null&&(C.points[0]=vF(O,M)),C.points.forEach(L=>{x=L.x<x?L.x:x,E=L.x>E?L.x:E,w=L.y<w?L.y:w,_=L.y>_?L.y:_})}),d.nodes().forEach(S=>{const C=d.node(S);C.x-=x,C.y-=w}),d.edges().forEach(S=>{d.edge(S).points.forEach(C=>{C.x-=x,C.y-=w})}),{width:E-x,height:_-w}}(t.coreGraph,f));let c=0;t.coreGraph.nodeCount()>0&&c++;const h=c<=1?0:c;t.coreBox.width+=h+h,t.coreBox.height=a.labelHeight+t.coreBox.height,t.width=t.coreBox.width+a.paddingLeft+a.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(r,e)}function dF(r,e){const t=e.x-r.x,n=e.y-r.y;return 180*Math.atan(n/t)/Math.PI}function IT(r){return r.expanded?r.x:r.x-r.width/2+0+r.coreBox.width/2}function vF(r,e){const t=e.expanded?e.x:IT(e),n=e.y,i=r.x-t,a=r.y-n;let o,s,l=e.expanded?e.width:e.coreBox.width,u=e.expanded?e.height:e.coreBox.height;return Math.abs(a)*l/2>Math.abs(i)*u/2?(a<0&&(u=-u),o=a===0?0:u/2*i/a,s=u/2):(i<0&&(l=-l),o=l/2,s=i===0?0:l/2*a/i),{x:t+o,y:n+s}}function DLe(r,e,t){var n,i,a,o;const s=r.nodes.filter((c,h,d)=>d.findIndex(v=>v.id===c.id)!==h).map(c=>c.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const l=function(c){const h={nodes:[]},d=c.compound,v=Object.keys(d||{}),p=new Map,g=(b,y=[])=>{if(p.has(b))return p.get(b);for(let x=0;x<v.length;x++){let w=v[x];if(d&&d[w].indexOf(b)!==-1)return y.unshift(w),g(w,y)}return y.length===0&&p.set(b,y),y},m=b=>c.edges.filter(y=>y.w===b).map(y=>({name:y.v}));return c.nodes.forEach(b=>{const y=b.id,x=[...g(y),y];let w=m(y);h.nodes.push({name:y,path:x,inputs:w,width:b.width,height:b.height,attr:Object.assign({},b)})}),h}(r),u=function(c,h){const d=(p,g)=>{for(let m of g.values())if(m.includes(p))return!0;return!1},v=(p,g=[])=>{if(Object.keys(p).length===0)return[...new Set(g)];const m=new Map(Object.keys(p).map(y=>[y,p[y]])),b={};for(let[y,x]of m)d(y,m)?b[y]=x:g=g.concat(y,x);return v(b,g)};return v(c).filter(p=>h.includes(p))}(r.compound||{},(e==null?void 0:e.expanded)||[]),f=function(c,h){return function(d){return new PLe(d)}(LLe(TLe(c),h))}(l,{rankDirection:((i=(n=t==null?void 0:t.graph)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.rankDir)||(e==null?void 0:e.rankDirection)||ww.graph.meta.rankDir,align:((o=(a=t==null?void 0:t.graph)===null||a===void 0?void 0:a.meta)===null||o===void 0?void 0:o.align)||ww.graph.meta.align});return function(c,h){h.forEach(d=>{const v=c.getRenderInfoNodes().find(m=>m.displayName===d);let p=v&&v.node&&v.node.name||"";const g=c.getRenderNodeByName(p);if(!g)throw new Error(`No nodes found: ${p}`);g.expanded=!0,c.buildSubHierarchy(p)})}(f,u),RY(f.root,t),BY(f.root)}function NLe(r,e=!1){const t=JSON.parse(JSON.stringify(r)),n={nodes:[t],edges:[...t.edges]};return t.nodes.forEach(function i(a){(a.type===0||a.type===1)&&n.nodes.push(a),a.type===0&&(n.edges=n.edges.concat(a.edges)),Array.isArray(a.nodes)&&a.nodes.forEach(i)}),e&&n.nodes.forEach(i=>{const a=n.nodes.find(o=>o.id===i.parentNodeName);if(a){const o=a.x-a.width/2+a.paddingLeft,s=a.y-a.height/2+a.labelHeight+a.paddingTop;a.id!==Kv&&(i.x+=o,i.y+=s),i.type===0&&i.edges.forEach(l=>{l.points.forEach(u=>{u.x+=i.x-i.width/2+i.paddingLeft,u.y+=i.y-i.height/2+i.labelHeight+i.paddingTop})})}}),n}function RLe(r,e,t,n){var i,a;let o=[];const s=((i=t.find(c=>c.id===r))===null||i===void 0?void 0:i.path)||[],l=((a=t.find(c=>c.id===e))===null||a===void 0?void 0:a.path)||[],u=[Kv,...s].slice(0,s.length).reverse(),f=[Kv,...l].slice(0,l.length);return u.forEach(c=>{const h=t.find(d=>d.id===c);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(v=>v.v===((n==null?void 0:n.v)||r)&&v.w===((n==null?void 0:n.w)||e))))}),f.filter(c=>!u.includes(c)).forEach(c=>{const h=t.find(d=>d.id===c);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(v=>v.v===((n==null?void 0:n.v)||r)&&v.w===((n==null?void 0:n.w)||e))))}),o}function BY(r){const e=r.coreGraph.nodes().map(n=>r.coreGraph.node(n));return Object.assign(Object.assign({},pF(r)),{expanded:r.expanded,nodes:r.expanded?(t=e,t.map(n=>n.node.type===ja.META?BY(n):pF(n))):[],edges:r.expanded?BLe(r):[]});var t}function pF(r){return{id:r.node.name,name:r.node.name,type:r.node.type,cardinality:r.node.cardinality,attr:r.attr,parentNodeName:r.node.parentNode?r.node.parentNode.name:null,coreBox:Object.assign({},r.coreBox),x:r.x,y:r.y,width:r.width,height:r.height,radius:r.radius,labelHeight:r.labelHeight,labelOffset:r.labelOffset,outboxWidth:r.outboxWidth,paddingLeft:r.paddingLeft,paddingTop:r.paddingTop,paddingRight:r.paddingRight,paddingBottom:r.paddingBottom,path:r.node.path}}function BLe(r){return r.coreGraph.edges().map(e=>({renderInfoEdge:r.coreGraph.edge(e),edge:e})).filter(({renderInfoEdge:e})=>e.metaEdge).map(({edge:e,renderInfoEdge:t})=>{const n=function(i,a){const o=a.points.map(s=>Object.assign({},s));if(a.adjoiningMetaEdge){const s=a.adjoiningMetaEdge.points,l=a.metaEdge.inbound,u=l?s[s.length-1]:s[0],f=o[l?0:o.length-1],c=i.x-i.width/2,h=i.y-i.height/2,d=u.x-c,v=u.y-h,p=-i.paddingLeft,g=-(i.paddingTop+i.labelHeight);f.x=d+p,f.y=v+g}return o}(r,t);return{adjoiningEdge:t.adjoiningMetaEdge?{w:t.adjoiningMetaEdge.metaEdge.w,v:t.adjoiningMetaEdge.metaEdge.v}:null,inbound:t.metaEdge.inbound,w:e.w,v:e.v,points:n,weight:t.weight,baseEdgeList:t.metaEdge.baseEdgeList,parentNodeName:r.node.name}})}const FLe=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:SX,get GraphType(){return qv},get HierarchyNodeType(){return wT},get InclusionType(){return Vh},LAYOUT_CONFIG:ww,get NodeType(){return ja},ROOT_NAME:Kv,buildGraph:DLe,flatGraph:NLe,getEdges:RLe,mergeConfig:xT},Symbol.toStringTag,{value:"Module"})),$Le=jl(FLe);var zLe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ys=Re&&Re.__assign||function(){return ys=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ys.apply(this,arguments)},Fd=Re&&Re.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.DagreCompoundLayout=void 0;var GLe=ei,Po=$Le,G1=Vn(),jLe=function(r){zLe(e,r);function e(t){var n=r.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var n=t.hiddenNodes||[],i=t.hiddenEdges||[],a=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(i)),this.combos=(t.combos||[]).concat(a.map(function(o){return ys(ys({},o),{collapsed:!0})}))},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges;if(n){var a=t.getLayoutConfig(),o=a.graphDef,s=a.graphOption,l=a.graphSettings,u=(0,Po.buildGraph)(o,s,l),f=(0,Po.flatGraph)(u,!0);return this.updatePosition(f),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}}},e.prototype.getNodePath=function(t){var n=this,i=n.nodes,a=n.combos,o=i.find(function(l){return l.id===t}),s=function(l,u){u===void 0&&(u=[]);var f=a.find(function(c){return c.id===l});return f?(u.unshift(l),f.parentId?s(f.parentId,u):u):u};return o&&o.comboId?s(o.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,n,i,a=this,o=a.nodes,s=a.edges,l=a.combos,u=a.nodeSize,f=a.rankdir,c=a.align,h=a.edgesep,d=a.nodesep,v=a.ranksep,p=a.settings,g=(l||[]).reduce(function(P,R){var G=o.filter(function(B){return B.comboId===R.id}).map(function(B){return B.id}),D=(l||[]).filter(function(B){return B.parentId===R.id}).map(function(B){return B.id});return(G.length||D.length)&&(P[R.id]=Fd(Fd([],G,!0),D,!0)),P},{}),m;u?(0,G1.isArray)(u)?m=function(){return u}:m=function(){return[u,u]}:m=function(P){return P&&P.size?(0,G1.isArray)(P.size)?P.size:(0,G1.isObject)(P.size)?[P.size.width||40,P.size.height||40]:[P.size,P.size]:[40,40]};var b=function(P){return P&&P.size?(0,G1.isArray)(P.size)?P.size:[P.size,P.size]:[80,40]},y=b(l==null?void 0:l[0]),x=y[0],w=y[1],E=(n=(t=a.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,_=((i=l.find(function(P){return!P.collapsed}))===null||i===void 0?void 0:i.padding)||[20,20,20,20],S=_[0],C=_[1],M=_[2],T=_[3],A={compound:g,nodes:Fd([],(o||[]).map(function(P){var R=m(P),G=R[0],D=R[1];return ys(ys({},P),{width:G,height:D})}),!0),edges:Fd([],(s||[]).map(function(P){return ys(ys({},P),{v:P.source,w:P.target})}),!0)},O={expanded:(l||[]).filter(function(P){return!P.collapsed}).map(function(P){return P.id})},L={graph:{meta:{align:c,rankDir:f,nodeSep:d,edgeSep:h,rankSep:v}},subScene:{meta:{paddingTop:S||(E==null?void 0:E.paddingTop)||20,paddingRight:C||(E==null?void 0:E.paddingRight)||20,paddingBottom:M||(E==null?void 0:E.paddingBottom)||20,paddingLeft:T||(E==null?void 0:E.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:x,height:w}}},N=(0,Po.mergeConfig)(p,ys({},(0,Po.mergeConfig)(L,Po.LAYOUT_CONFIG)));return a.graphSettings=N,{graphDef:A,graphOption:O,graphSettings:N}},e.prototype.updatePosition=function(t){var n=t.nodes,i=t.edges;this.updateNodePosition(n,i),this.updateEdgePosition(n,i)},e.prototype.getBegin=function(t,n){var i=this,a=i.begin,o=[0,0];if(a){var s=1/0,l=1/0;t.forEach(function(u){s>u.x&&(s=u.x),l>u.y&&(l=u.y)}),n.forEach(function(u){u.points.forEach(function(f){s>f.x&&(s=f.x),l>f.y&&(l=f.y)})}),o[0]=a[0]-s,o[1]=a[1]-l}return o},e.prototype.updateNodePosition=function(t,n){var i=this,a=i.combos,o=i.nodes,s=i.edges,l=i.anchorPoint,u=i.graphSettings,f=this.getBegin(t,n);t.forEach(function(c){var h,d=c.x,v=c.y,p=c.id,g=c.type,m=c.coreBox;if(g===Po.HierarchyNodeType.META&&p!==Po.ROOT_NAME){var b=a.findIndex(function(_){return _.id===p}),y=(h=u==null?void 0:u.subScene)===null||h===void 0?void 0:h.meta;a[b].offsetX=d+f[0],a[b].offsetY=v+f[1],a[b].fixSize=[m.width,m.height],a[b].fixCollapseSize=[m.width,m.height],c.expanded?a[b].padding=[y==null?void 0:y.paddingTop,y==null?void 0:y.paddingRight,y==null?void 0:y.paddingBottom,y==null?void 0:y.paddingLeft]:a[b].padding=[0,0,0,0]}else if(g===Po.HierarchyNodeType.OP){var b=o.findIndex(function(S){return S.id===p});if(o[b].x=d+f[0],o[b].y=v+f[1],l){var x=[],w=n.filter(function(S){return S.v===p}),E=n.filter(function(S){return S.w===p});w.length>0&&w.forEach(function(S){var C=S.points[0],M=(C.x-d)/c.width+.5,T=(C.y-v)/c.height+.5;x.push([M,T]),S.baseEdgeList.forEach(function(A){var O=s.find(function(L){return L.source===A.v&&L.target===A.w});O&&(O.sourceAnchor=x.length-1)})}),E.length>0&&E.forEach(function(S){var C=S.points[S.points.length-1],M=(C.x-d)/c.width+.5,T=(C.y-v)/c.height+.5;x.push([M,T]),S.baseEdgeList.forEach(function(A){var O=s.find(function(L){return L.source===A.v&&L.target===A.w});O&&(O.targetAnchor=x.length-1)})}),o[b].anchorPoints=x.length>0?x:o[b].anchorPoints||[]}}})},e.prototype.updateEdgePosition=function(t,n){var i=this,a=i.combos,o=i.edges,s=i.controlPoints,l=this.getBegin(t,n);s&&(a.forEach(function(u){u.inEdges=[],u.outEdges=[]}),o.forEach(function(u){var f,c,h,d,v=t.find(function(_){return _.id===u.source}),p=t.find(function(_){return _.id===u.target}),g=[],m=[];if(v&&p)m=(0,Po.getEdges)(v==null?void 0:v.id,p==null?void 0:p.id,t);else if(!v||!p){var b=i.getNodePath(u.source),y=i.getNodePath(u.target),x=b.reverse().slice(v?0:1).find(function(_){return t.find(function(S){return S.id===_})}),w=y.reverse().slice(p?0:1).find(function(_){return t.find(function(S){return S.id===_})});v=t.find(function(_){return _.id===x}),p=t.find(function(_){return _.id===w}),m=(0,Po.getEdges)(v==null?void 0:v.id,p==null?void 0:p.id,t,{v:u.source,w:u.target})}if(g=m.reduce(function(_,S){return Fd(Fd([],_,!0),S.points.map(function(C){return ys(ys({},C),{x:C.x+l[0],y:C.y+l[1]})}),!0)},[]),g=g.slice(1,-1),u.controlPoints=g,(p==null?void 0:p.type)===Po.NodeType.META){var E=a.findIndex(function(_){return _.id===(p==null?void 0:p.id)});if(!a[E]||!((f=a[E].inEdges)===null||f===void 0)&&f.some(function(_){return _.source===v.id&&_.target===p.id}))return;(c=a[E].inEdges)===null||c===void 0||c.push({source:v.id,target:p.id,controlPoints:g})}if((v==null?void 0:v.type)===Po.NodeType.META){var E=a.findIndex(function(S){return S.id===(v==null?void 0:v.id)});if(!a[E]||!((h=a[E].outEdges)===null||h===void 0)&&h.some(function(S){return S.source===v.id&&S.target===p.id}))return;(d=a[E].outEdges)===null||d===void 0||d.push({source:v.id,target:p.id,controlPoints:g})}}))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every(function(n){return n.layoutOrder!==void 0})||t.forEach(function(n,i){n.layoutOrder=i}),t.sort(function(n,i){return n.layoutOrder-i.layoutOrder})},e}(GLe.Base);Ym.DagreCompoundLayout=jLe;var zL={},B_={},GL={};const ULe=Object.prototype.toString;function Ow(r){const e=ULe.call(r);return e.endsWith("Array]")&&!e.includes("Big")}function WLe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ow(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]>o&&(o=r[s]);return o}function VLe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ow(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]<o&&(o=r[s]);return o}function gF(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ow(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!Ow(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(r.length);var n=VLe(r),i=WLe(r);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?n:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-n),f=0;f<r.length;f++)t[f]=(r[f]-n)*u+o;return t}const j1=" ".repeat(2),FY=" ".repeat(4);function HLe(){return $Y(this)}function $Y(r,e={}){const{maxRows:t=15,maxColumns:n=10,maxNumSize:i=8}=e;return`${r.constructor.name} {
${j1}[
${FY}${XLe(r,t,n,i)}
${j1}]
${j1}rows: ${r.rows}
${j1}columns: ${r.columns}
}`}function XLe(r,e,t,n){const{rows:i,columns:a}=r,o=Math.min(i,e),s=Math.min(a,t),l=[];for(let u=0;u<o;u++){let f=[];for(let c=0;c<s;c++)f.push(YLe(r.get(u,c),n));l.push(`${f.join(" ")}`)}return s!==a&&(l[l.length-1]+=` ... ${a-t} more columns`),o!==i&&l.push(`... ${i-e} more rows`),l.join(`
${FY}`)}function YLe(r,e){const t=String(r);if(t.length<=e)return t.padEnd(e," ");const n=r.toPrecision(e-2);if(n.length<=e)return n;const i=r.toExponential(e-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,e-o.length)+o}function KLe(r,e){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},r.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},r.add=function(n,i){return new e(n).add(i)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},r.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},r.sub=function(n,i){return new e(n).sub(i)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},r.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},r.mul=function(n,i){return new e(n).mul(i)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},r.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},r.div=function(n,i){return new e(n).div(i)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},r.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},r.mod=function(n,i){return new e(n).mod(i)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},r.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},r.and=function(n,i){return new e(n).and(i)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},r.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},r.or=function(n,i){return new e(n).or(i)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},r.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},r.xor=function(n,i){return new e(n).xor(i)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},r.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},r.leftShift=function(n,i){return new e(n).leftShift(i)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},r.signPropagatingRightShift=function(n,i){return new e(n).signPropagatingRightShift(i)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},r.rightShift=function(n,i){return new e(n).rightShift(i)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},r.not=function(n){return new e(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},r.abs=function(n){return new e(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},r.acos=function(n){return new e(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},r.acosh=function(n){return new e(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},r.asin=function(n){return new e(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},r.asinh=function(n){return new e(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},r.atan=function(n){return new e(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},r.atanh=function(n){return new e(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},r.cbrt=function(n){return new e(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},r.ceil=function(n){return new e(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},r.clz32=function(n){return new e(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},r.cos=function(n){return new e(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},r.cosh=function(n){return new e(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},r.exp=function(n){return new e(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},r.expm1=function(n){return new e(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},r.floor=function(n){return new e(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},r.fround=function(n){return new e(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},r.log=function(n){return new e(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},r.log1p=function(n){return new e(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},r.log10=function(n){return new e(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},r.log2=function(n){return new e(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},r.round=function(n){return new e(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},r.sign=function(n){return new e(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},r.sin=function(n){return new e(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},r.sinh=function(n){return new e(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},r.sqrt=function(n){return new e(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},r.tan=function(n){return new e(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},r.tanh=function(n){return new e(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},r.trunc=function(n){return new e(n).trunc()},r.pow=function(n,i){return new e(n).pow(i)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n));return this},r.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n.get(i,a)));return this}}function Fo(r,e,t){let n=t?r.rows:r.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function $o(r,e,t){let n=t?r.columns:r.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function ev(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function tv(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function zY(r,e,t){return{row:GY(r,e),column:jY(r,t)}}function GY(r,e){if(typeof e!="object")throw new TypeError("unexpected type for row indices");if(e.some(n=>n<0||n>=r.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function jY(r,e){if(typeof e!="object")throw new TypeError("unexpected type for column indices");if(e.some(n=>n<0||n>=r.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function LT(r,e,t,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(U1("startRow",e),U1("endRow",t),U1("startColumn",n),U1("endColumn",i),e>t||n>i||e<0||e>=r.rows||t<0||t>=r.rows||n<0||n>=r.columns||i<0||i>=r.columns)throw new RangeError("Submatrix indices are out of range")}function F_(r,e=0){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function U1(r,e){if(typeof e!="number")throw new TypeError(`${r} must be a number`)}function qLe(r){let e=F_(r.rows);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]+=r.get(t,n);return e}function ZLe(r){let e=F_(r.columns);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]+=r.get(t,n);return e}function QLe(r){let e=0;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e+=r.get(t,n);return e}function JLe(r){let e=F_(r.rows,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]*=r.get(t,n);return e}function ePe(r){let e=F_(r.columns,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]*=r.get(t,n);return e}function tPe(r){let e=1;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e*=r.get(t,n);return e}function rPe(r,e,t){const n=r.rows,i=r.columns,a=[];for(let o=0;o<n;o++){let s=0,l=0,u=0;for(let f=0;f<i;f++)u=r.get(o,f)-t[o],s+=u,l+=u*u;e?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function nPe(r,e,t){const n=r.rows,i=r.columns,a=[];for(let o=0;o<i;o++){let s=0,l=0,u=0;for(let f=0;f<n;f++)u=r.get(f,o)-t[o],s+=u,l+=u*u;e?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function iPe(r,e,t){const n=r.rows,i=r.columns,a=n*i;let o=0,s=0,l=0;for(let u=0;u<n;u++)for(let f=0;f<i;f++)l=r.get(u,f)-t,o+=l,s+=l*l;return e?(s-o*o/a)/(a-1):(s-o*o/a)/a}function aPe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[t])}function oPe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[n])}function sPe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e)}function lPe(r){const e=[];for(let t=0;t<r.rows;t++){let n=0;for(let i=0;i<r.columns;i++)n+=Math.pow(r.get(t,i),2)/(r.columns-1);e.push(Math.sqrt(n))}return e}function uPe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[t])}function fPe(r){const e=[];for(let t=0;t<r.columns;t++){let n=0;for(let i=0;i<r.rows;i++)n+=Math.pow(r.get(i,t),2)/(r.rows-1);e.push(Math.sqrt(n))}return e}function cPe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[n])}function hPe(r){const e=r.size-1;let t=0;for(let n=0;n<r.columns;n++)for(let i=0;i<r.rows;i++)t+=Math.pow(r.get(i,n),2)/e;return Math.sqrt(t)}function dPe(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e)}class Ir{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Nt(e,t);for(let o=0;o<e;o++)for(let s=0;s<t;s++)a.set(o,s,n[o*t+s]);return a}static rowVector(e){let t=new Nt(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new Nt(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new Nt(e,t)}static ones(e,t){return new Nt(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new Nt(e,t);for(let o=0;o<e;o++)for(let s=0;s<t;s++)a.set(o,s,i());return a}static randInt(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let s=a-i,l=new Nt(e,t);for(let u=0;u<e;u++)for(let f=0;f<t;f++){let c=i+Math.round(o()*s);l.set(u,f,c)}return l}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let i=Math.min(e,t),a=this.zeros(e,t);for(let o=0;o<i;o++)a.set(o,o,n);return a}static diag(e,t,n){let i=e.length;t===void 0&&(t=i),n===void 0&&(n=t);let a=Math.min(i,t,n),o=this.zeros(t,n);for(let s=0;s<a;s++)o.set(s,s,e[s]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,i=e.columns,a=new Nt(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.min(e.get(o,s),t.get(o,s)));return a}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,i=e.columns,a=new this(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.max(e.get(o,s),t.get(o,s)));return a}static checkMatrix(e){return Ir.isMatrix(e)?e:new Nt(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let e=0,t=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(a=!0,n=t):(i=!1,a=!0);e++}return i}isReducedEchelonForm(){let e=0,t=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(a=!0,n=t):(i=!1,a=!0);for(let o=t+1;o<this.rows;o++)this.get(e,o)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let i=t;for(let a=t;a<e.rows;a++)e.get(a,n)>e.get(i,n)&&(i=a);if(e.get(i,n)===0)n++;else{e.swapRows(t,i);let a=e.get(t,n);for(let o=n;o<e.columns;o++)e.set(t,o,e.get(t,o)/a);for(let o=t+1;o<e.rows;o++){let s=e.get(o,n)/e.get(t,n);e.set(o,n,0);for(let l=n+1;l<e.columns;l++)e.set(o,l,e.get(o,l)-e.get(t,l)*s)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,i=n-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let a=0,o=!1;for(;a<n&&o===!1;)e.get(i,a)===1?o=!0:a++;for(let s=0;s<i;s++){let l=e.get(s,a);for(let u=a;u<t;u++){let f=e.get(s,u)-l*e.get(i,u);e.set(s,u,f)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Nt(this.rows*t,this.columns*n);for(let a=0;a<t;a++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*a,this.columns*o);return i}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){Fo(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return Nt.rowVector(this.getRow(e))}setRow(e,t){Fo(this,e),t=ev(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){Fo(this,e),Fo(this,t);for(let n=0;n<this.columns;n++){let i=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,i)}return this}getColumn(e){$o(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return Nt.columnVector(this.getColumn(e))}setColumn(e,t){$o(this,e),t=tv(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){$o(this,e),$o(this,t);for(let n=0;n<this.rows;n++){let i=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,i)}return this}addRowVector(e){e=ev(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=ev(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=ev(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=ev(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=tv(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=tv(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=tv(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=tv(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){Fo(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){$o(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(){let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxIndex(){let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}min(){let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minIndex(){let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),t[0]=n,t[1]=i);return t}maxRow(e){Fo(this,e);let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){Fo(this,e);let t=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>t&&(t=this.get(e,i),n[1]=i);return n}minRow(e){Fo(this,e);let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){Fo(this,e);let t=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<t&&(t=this.get(e,i),n[1]=i);return n}maxColumn(e){$o(this,e);let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){$o(this,e);let t=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>t&&(t=this.get(i,e),n[0]=i);return n}minColumn(e){$o(this,e);let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){$o(this,e);let t=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<t&&(t=this.get(i,e),n[0]=i);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){let t=0;if(e==="max")return this.max();if(e==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)t=t+this.get(n,i)*this.get(n,i);return Math.sqrt(t)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){Ir.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<t.length;i++)n+=t[i]*e[i];return n}mmul(e){e=Nt.checkMatrix(e);let t=this.rows,n=this.columns,i=e.columns,a=new Nt(t,i),o=new Float64Array(n);for(let s=0;s<i;s++){for(let l=0;l<n;l++)o[l]=e.get(l,s);for(let l=0;l<t;l++){let u=0;for(let f=0;f<n;f++)u+=this.get(l,f)*o[f];a.set(l,s,u)}}return a}strassen2x2(e){e=Nt.checkMatrix(e);let t=new Nt(2,2);const n=this.get(0,0),i=e.get(0,0),a=this.get(0,1),o=e.get(0,1),s=this.get(1,0),l=e.get(1,0),u=this.get(1,1),f=e.get(1,1),c=(n+u)*(i+f),h=(s+u)*i,d=n*(o-f),v=u*(l-i),p=(n+a)*f,g=(s-n)*(i+o),m=(a-u)*(l+f),b=c+v-p+m,y=d+p,x=h+v,w=c-h+d+g;return t.set(0,0,b),t.set(0,1,y),t.set(1,0,x),t.set(1,1,w),t}strassen3x3(e){e=Nt.checkMatrix(e);let t=new Nt(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),o=this.get(1,0),s=this.get(1,1),l=this.get(1,2),u=this.get(2,0),f=this.get(2,1),c=this.get(2,2),h=e.get(0,0),d=e.get(0,1),v=e.get(0,2),p=e.get(1,0),g=e.get(1,1),m=e.get(1,2),b=e.get(2,0),y=e.get(2,1),x=e.get(2,2),w=(n+i+a-o-s-f-c)*g,E=(n-o)*(-d+g),_=s*(-h+d+p-g-m-b+x),S=(-n+o+s)*(h-d+g),C=(o+s)*(-h+d),M=n*h,T=(-n+u+f)*(h-v+m),A=(-n+u)*(v-m),O=(u+f)*(-h+v),L=(n+i+a-s-l-u-f)*m,N=f*(-h+v+p-g-m-b+y),P=(-a+f+c)*(g+b-y),R=(a-c)*(g-y),G=a*b,D=(f+c)*(-b+y),B=(-a+s+l)*(m+b-x),Y=(a-l)*(m-x),ee=(s+l)*(-b+x),ne=i*p,Q=l*y,ye=o*v,Le=u*d,Fe=c*x,_e=M+G+ne,Ve=w+S+C+M+P+G+D,Xe=M+T+O+L+G+B+ee,vt=E+_+S+M+G+B+Y,bt=E+S+C+M+Q,te=G+B+Y+ee+ye,H=M+T+A+N+P+R+G,de=P+R+G+D+Le,Be=M+T+A+O+Fe;return t.set(0,0,_e),t.set(0,1,Ve),t.set(0,2,Xe),t.set(1,0,vt),t.set(1,1,bt),t.set(1,2,te),t.set(2,0,H),t.set(2,1,de),t.set(2,2,Be),t}mmulStrassen(e){e=Nt.checkMatrix(e);let t=this.clone(),n=t.rows,i=t.columns,a=e.rows,o=e.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(c,h,d){let v=c.rows,p=c.columns;if(v===h&&p===d)return c;{let g=Ir.zeros(h,d);return g=g.setSubMatrix(c,0,0),g}}let l=Math.max(n,a),u=Math.max(i,o);t=s(t,l,u),e=s(e,l,u);function f(c,h,d,v){if(d<=512||v<=512)return c.mmul(h);d%2===1&&v%2===1?(c=s(c,d+1,v+1),h=s(h,d+1,v+1)):d%2===1?(c=s(c,d+1,v),h=s(h,d+1,v)):v%2===1&&(c=s(c,d,v+1),h=s(h,d,v+1));let p=parseInt(c.rows/2,10),g=parseInt(c.columns/2,10),m=c.subMatrix(0,p-1,0,g-1),b=h.subMatrix(0,p-1,0,g-1),y=c.subMatrix(0,p-1,g,c.columns-1),x=h.subMatrix(0,p-1,g,h.columns-1),w=c.subMatrix(p,c.rows-1,0,g-1),E=h.subMatrix(p,h.rows-1,0,g-1),_=c.subMatrix(p,c.rows-1,g,c.columns-1),S=h.subMatrix(p,h.rows-1,g,h.columns-1),C=f(Ir.add(m,_),Ir.add(b,S),p,g),M=f(Ir.add(w,_),b,p,g),T=f(m,Ir.sub(x,S),p,g),A=f(_,Ir.sub(E,b),p,g),O=f(Ir.add(m,y),S,p,g),L=f(Ir.sub(w,m),Ir.add(b,x),p,g),N=f(Ir.sub(y,_),Ir.add(E,S),p,g),P=Ir.add(C,A);P.sub(O),P.add(N);let R=Ir.add(T,O),G=Ir.add(M,A),D=Ir.sub(C,M);D.add(T),D.add(L);let B=Ir.zeros(2*P.rows,2*P.columns);return B=B.setSubMatrix(P,0,0),B=B.setSubMatrix(R,P.rows,0),B=B.setSubMatrix(G,0,P.columns),B=B.setSubMatrix(D,P.rows,P.columns),B.subMatrix(0,d-1,0,v-1)}return f(t,e,l,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let i=new Nt(this.rows,this.columns);for(let a=0;a<this.rows;a++){const o=this.getRow(a);gF(o,{min:t,max:n,output:o}),i.setRow(a,o)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let i=new Nt(this.rows,this.columns);for(let a=0;a<this.columns;a++){const o=this.getColumn(a);gF(o,{min:t,max:n,output:o}),i.setColumn(a,o)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let i=this.get(t,n),a=this.get(t,this.columns-1-n);this.set(t,n,a),this.set(t,this.columns-1-n,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let i=this.get(n,t),a=this.get(this.rows-1-n,t);this.set(n,t,a),this.set(this.rows-1-n,t,i)}return this}kroneckerProduct(e){e=Nt.checkMatrix(e);let t=this.rows,n=this.columns,i=e.rows,a=e.columns,o=new Nt(t*i,n*a);for(let s=0;s<t;s++)for(let l=0;l<n;l++)for(let u=0;u<i;u++)for(let f=0;f<a;f++)o.set(i*s+u,a*l+f,this.get(s,l)*e.get(u,f));return o}transpose(){let e=new Nt(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=mF){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=mF){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,i){LT(this,e,t,n,i);let a=new Nt(t-e+1,i-n+1);for(let o=e;o<=t;o++)for(let s=n;s<=i;s++)a.set(o-e,s-n,this.get(o,s));return a}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Nt(e.length,n-t+1);for(let a=0;a<e.length;a++)for(let o=t;o<=n;o++){if(e[a]<0||e[a]>=this.rows)throw new RangeError(`Row index out of range: ${e[a]}`);i.set(a,o-t,this.get(e[a],o))}return i}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Nt(n-t+1,e.length);for(let a=0;a<e.length;a++)for(let o=t;o<=n;o++){if(e[a]<0||e[a]>=this.columns)throw new RangeError(`Column index out of range: ${e[a]}`);i.set(o-t,a,this.get(o,e[a]))}return i}setSubMatrix(e,t,n){e=Nt.checkMatrix(e);let i=t+e.rows-1,a=n+e.columns-1;LT(this,t,i,n,a);for(let o=0;o<e.rows;o++)for(let s=0;s<e.columns;s++)this.set(t+o,n+s,e.get(o,s));return this}selection(e,t){let n=zY(this,e,t),i=new Nt(e.length,t.length);for(let a=0;a<n.row.length;a++){let o=n.row[a];for(let s=0;s<n.column.length;s++){let l=n.column[s];i.set(a,s,this.get(o,l))}}return i}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){let e=new Nt(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}sum(e){switch(e){case"row":return qLe(this);case"column":return ZLe(this);case void 0:return QLe(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return JLe(this);case"column":return ePe(this);case void 0:return tPe(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)t[n]/=this.columns;return t}case"column":{for(let n=0;n<this.columns;n++)t[n]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(e)}=t;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return rPe(this,n,i)}case"column":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return nPe(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return iPe(this,n,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":{if(!Array.isArray(n))throw new TypeError("center must be an array");return aPe(this,n),this}case"column":{if(!Array.isArray(n))throw new TypeError("center must be an array");return oPe(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return sPe(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":{if(n===void 0)n=lPe(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return uPe(this,n),this}case"column":{if(n===void 0)n=fPe(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return cPe(this,n),this}case void 0:{if(n===void 0)n=hPe(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return dPe(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return $Y(this,e)}}Ir.prototype.klass="Matrix";typeof Symbol<"u"&&(Ir.prototype[Symbol.for("nodejs.util.inspect.custom")]=HLe);function mF(r,e){return r-e}Ir.random=Ir.rand;Ir.randomInt=Ir.randInt;Ir.diagonal=Ir.diag;Ir.prototype.diagonal=Ir.prototype.diag;Ir.identity=Ir.eye;Ir.prototype.negate=Ir.prototype.neg;Ir.prototype.tensorProduct=Ir.prototype.kroneckerProduct;class Nt extends Ir{constructor(e,t){if(super(),Nt.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>0)if(this.data=[],Number.isInteger(t)&&t>0)for(let n=0;n<e;n++)this.data.push(new Float64Array(t));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){const n=e;if(e=n.length,t=n[0].length,typeof t!="number"||t===0)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<e;i++){if(n[i].length!==t)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=e,this.columns=t,this}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){if(Fo(this,e),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),Fo(this,e,!0),t=Float64Array.from(ev(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){if($o(this,e),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let i=0;i<e;i++)n[i]=this.data[t][i];for(let i=e+1;i<this.columns;i++)n[i-1]=this.data[t][i];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){typeof t>"u"&&(t=e,e=this.columns),$o(this,e,!0),t=tv(this,t);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let a=0;for(;a<e;a++)i[a]=this.data[n][a];for(i[a++]=t[n];a<this.columns+1;a++)i[a]=this.data[n][a-1];this.data[n]=i}return this.columns+=1,this}}KLe(Ir,Nt);class Vu extends Ir{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}class vPe extends Vu{constructor(e,t){$o(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class pPe extends Vu{constructor(e,t){t=jY(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class gPe extends Vu{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class mPe extends Vu{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class yPe extends Vu{constructor(e,t){Fo(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}}class bPe extends Vu{constructor(e,t){t=GY(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class dx extends Vu{constructor(e,t,n){let i=zY(e,t,n);super(e,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class xPe extends Vu{constructor(e,t,n,i,a){LT(e,t,n,i,a),super(e,n-t+1,a-i+1),this.startRow=t,this.startColumn=i}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class wPe extends Vu{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}}class UY extends Ir{constructor(e,t={}){const{rows:n=1}=t;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let i=this._calculateIndex(e,t);return this.data[i]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}}class Co extends Ir{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}function EPe(r,e){if(Array.isArray(r))return r[0]&&Array.isArray(r[0])?new Co(r):new UY(r,e);throw new Error("the argument is not an array")}class kw{constructor(e){e=Co.checkMatrix(e);let t=e.clone(),n=t.rows,i=t.columns,a=new Float64Array(n),o=1,s,l,u,f,c,h,d,v,p;for(s=0;s<n;s++)a[s]=s;for(v=new Float64Array(n),l=0;l<i;l++){for(s=0;s<n;s++)v[s]=t.get(s,l);for(s=0;s<n;s++){for(p=Math.min(s,l),c=0,u=0;u<p;u++)c+=t.get(s,u)*v[u];v[s]-=c,t.set(s,l,v[s])}for(f=l,s=l+1;s<n;s++)Math.abs(v[s])>Math.abs(v[f])&&(f=s);if(f!==l){for(u=0;u<i;u++)h=t.get(f,u),t.set(f,u,t.get(l,u)),t.set(l,u,h);d=a[f],a[f]=a[l],a[l]=d,o=-o}if(l<n&&t.get(l,l)!==0)for(s=l+1;s<n;s++)t.set(s,l,t.get(s,l)/t.get(l,l))}this.LU=t,this.pivotVector=a,this.pivotSign=o}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=Nt.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),o=t.columns,s,l,u;for(u=0;u<o;u++)for(s=u+1;s<o;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*t.get(s,u));for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/t.get(u,u));for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*t.get(s,u))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let i=0;i<n;i++)t*=e.get(i,i);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,i=new Nt(t,n);for(let a=0;a<t;a++)for(let o=0;o<n;o++)a>o?i.set(a,o,e.get(a,o)):a===o?i.set(a,o,1):i.set(a,o,0);return i}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,i=new Nt(t,n);for(let a=0;a<t;a++)for(let o=0;o<n;o++)a<=o?i.set(a,o,e.get(a,o)):i.set(a,o,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function bu(r,e){let t=0;return Math.abs(r)>Math.abs(e)?(t=e/r,Math.abs(r)*Math.sqrt(1+t*t)):e!==0?(t=r/e,Math.abs(e)*Math.sqrt(1+t*t)):0}class PT{constructor(e){e=Co.checkMatrix(e);let t=e.clone(),n=e.rows,i=e.columns,a=new Float64Array(i),o,s,l,u;for(l=0;l<i;l++){let f=0;for(o=l;o<n;o++)f=bu(f,t.get(o,l));if(f!==0){for(t.get(l,l)<0&&(f=-f),o=l;o<n;o++)t.set(o,l,t.get(o,l)/f);for(t.set(l,l,t.get(l,l)+1),s=l+1;s<i;s++){for(u=0,o=l;o<n;o++)u+=t.get(o,l)*t.get(o,s);for(u=-u/t.get(l,l),o=l;o<n;o++)t.set(o,s,t.get(o,s)+u*t.get(o,l))}}a[l]=-f}this.QR=t,this.Rdiag=a}solve(e){e=Nt.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,a=e.clone(),o=t.columns,s,l,u,f;for(u=0;u<o;u++)for(l=0;l<i;l++){for(f=0,s=u;s<n;s++)f+=t.get(s,u)*a.get(s,l);for(f=-f/t.get(u,u),s=u;s<n;s++)a.set(s,l,a.get(s,l)+f*t.get(s,u))}for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/this.Rdiag[u]);for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*t.get(s,u))}return a.subMatrix(0,o-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new Nt(t,t),i,a;for(i=0;i<t;i++)for(a=0;a<t;a++)i<a?n.set(i,a,e.get(i,a)):i===a?n.set(i,a,this.Rdiag[i]):n.set(i,a,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,i=new Nt(t,n),a,o,s,l;for(s=n-1;s>=0;s--){for(a=0;a<t;a++)i.set(a,s,0);for(i.set(s,s,1),o=s;o<n;o++)if(e.get(s,s)!==0){for(l=0,a=s;a<t;a++)l+=e.get(a,s)*i.get(a,o);for(l=-l/e.get(s,s),a=s;a<t;a++)i.set(a,o,i.get(a,o)+l*e.get(a,s))}}return i}}class Jv{constructor(e,t={}){e=Co.checkMatrix(e);let n=e.rows,i=e.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=t;let l=!!a,u=!!o,f=!1,c;if(n<i)if(!s)c=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{c=e.transpose(),n=c.rows,i=c.columns,f=!0;let M=l;l=u,u=M}else c=e.clone();let h=Math.min(n,i),d=Math.min(n+1,i),v=new Float64Array(d),p=new Nt(n,h),g=new Nt(i,i),m=new Float64Array(i),b=new Float64Array(n),y=new Float64Array(d);for(let M=0;M<d;M++)y[M]=M;let x=Math.min(n-1,i),w=Math.max(0,Math.min(i-2,n)),E=Math.max(x,w);for(let M=0;M<E;M++){if(M<x){v[M]=0;for(let T=M;T<n;T++)v[M]=bu(v[M],c.get(T,M));if(v[M]!==0){c.get(M,M)<0&&(v[M]=-v[M]);for(let T=M;T<n;T++)c.set(T,M,c.get(T,M)/v[M]);c.set(M,M,c.get(M,M)+1)}v[M]=-v[M]}for(let T=M+1;T<i;T++){if(M<x&&v[M]!==0){let A=0;for(let O=M;O<n;O++)A+=c.get(O,M)*c.get(O,T);A=-A/c.get(M,M);for(let O=M;O<n;O++)c.set(O,T,c.get(O,T)+A*c.get(O,M))}m[T]=c.get(M,T)}if(l&&M<x)for(let T=M;T<n;T++)p.set(T,M,c.get(T,M));if(M<w){m[M]=0;for(let T=M+1;T<i;T++)m[M]=bu(m[M],m[T]);if(m[M]!==0){m[M+1]<0&&(m[M]=0-m[M]);for(let T=M+1;T<i;T++)m[T]/=m[M];m[M+1]+=1}if(m[M]=-m[M],M+1<n&&m[M]!==0){for(let T=M+1;T<n;T++)b[T]=0;for(let T=M+1;T<n;T++)for(let A=M+1;A<i;A++)b[T]+=m[A]*c.get(T,A);for(let T=M+1;T<i;T++){let A=-m[T]/m[M+1];for(let O=M+1;O<n;O++)c.set(O,T,c.get(O,T)+A*b[O])}}if(u)for(let T=M+1;T<i;T++)g.set(T,M,m[T])}}let _=Math.min(i,n+1);if(x<i&&(v[x]=c.get(x,x)),n<_&&(v[_-1]=0),w+1<_&&(m[w]=c.get(w,_-1)),m[_-1]=0,l){for(let M=x;M<h;M++){for(let T=0;T<n;T++)p.set(T,M,0);p.set(M,M,1)}for(let M=x-1;M>=0;M--)if(v[M]!==0){for(let T=M+1;T<h;T++){let A=0;for(let O=M;O<n;O++)A+=p.get(O,M)*p.get(O,T);A=-A/p.get(M,M);for(let O=M;O<n;O++)p.set(O,T,p.get(O,T)+A*p.get(O,M))}for(let T=M;T<n;T++)p.set(T,M,-p.get(T,M));p.set(M,M,1+p.get(M,M));for(let T=0;T<M-1;T++)p.set(T,M,0)}else{for(let T=0;T<n;T++)p.set(T,M,0);p.set(M,M,1)}}if(u)for(let M=i-1;M>=0;M--){if(M<w&&m[M]!==0)for(let T=M+1;T<i;T++){let A=0;for(let O=M+1;O<i;O++)A+=g.get(O,M)*g.get(O,T);A=-A/g.get(M+1,M);for(let O=M+1;O<i;O++)g.set(O,T,g.get(O,T)+A*g.get(O,M))}for(let T=0;T<i;T++)g.set(T,M,0);g.set(M,M,1)}let S=_-1,C=Number.EPSILON;for(;_>0;){let M,T;for(M=_-2;M>=-1&&M!==-1;M--){const A=Number.MIN_VALUE+C*Math.abs(v[M]+Math.abs(v[M+1]));if(Math.abs(m[M])<=A||Number.isNaN(m[M])){m[M]=0;break}}if(M===_-2)T=4;else{let A;for(A=_-1;A>=M&&A!==M;A--){let O=(A!==_?Math.abs(m[A]):0)+(A!==M+1?Math.abs(m[A-1]):0);if(Math.abs(v[A])<=C*O){v[A]=0;break}}A===M?T=3:A===_-1?T=1:(T=2,M=A)}switch(M++,T){case 1:{let A=m[_-2];m[_-2]=0;for(let O=_-2;O>=M;O--){let L=bu(v[O],A),N=v[O]/L,P=A/L;if(v[O]=L,O!==M&&(A=-P*m[O-1],m[O-1]=N*m[O-1]),u)for(let R=0;R<i;R++)L=N*g.get(R,O)+P*g.get(R,_-1),g.set(R,_-1,-P*g.get(R,O)+N*g.get(R,_-1)),g.set(R,O,L)}break}case 2:{let A=m[M-1];m[M-1]=0;for(let O=M;O<_;O++){let L=bu(v[O],A),N=v[O]/L,P=A/L;if(v[O]=L,A=-P*m[O],m[O]=N*m[O],l)for(let R=0;R<n;R++)L=N*p.get(R,O)+P*p.get(R,M-1),p.set(R,M-1,-P*p.get(R,O)+N*p.get(R,M-1)),p.set(R,O,L)}break}case 3:{const A=Math.max(Math.abs(v[_-1]),Math.abs(v[_-2]),Math.abs(m[_-2]),Math.abs(v[M]),Math.abs(m[M])),O=v[_-1]/A,L=v[_-2]/A,N=m[_-2]/A,P=v[M]/A,R=m[M]/A,G=((L+O)*(L-O)+N*N)/2,D=O*N*(O*N);let B=0;(G!==0||D!==0)&&(G<0?B=0-Math.sqrt(G*G+D):B=Math.sqrt(G*G+D),B=D/(G+B));let Y=(P+O)*(P-O)+B,ee=P*R;for(let ne=M;ne<_-1;ne++){let Q=bu(Y,ee);Q===0&&(Q=Number.MIN_VALUE);let ye=Y/Q,Le=ee/Q;if(ne!==M&&(m[ne-1]=Q),Y=ye*v[ne]+Le*m[ne],m[ne]=ye*m[ne]-Le*v[ne],ee=Le*v[ne+1],v[ne+1]=ye*v[ne+1],u)for(let Fe=0;Fe<i;Fe++)Q=ye*g.get(Fe,ne)+Le*g.get(Fe,ne+1),g.set(Fe,ne+1,-Le*g.get(Fe,ne)+ye*g.get(Fe,ne+1)),g.set(Fe,ne,Q);if(Q=bu(Y,ee),Q===0&&(Q=Number.MIN_VALUE),ye=Y/Q,Le=ee/Q,v[ne]=Q,Y=ye*m[ne]+Le*v[ne+1],v[ne+1]=-Le*m[ne]+ye*v[ne+1],ee=Le*m[ne+1],m[ne+1]=ye*m[ne+1],l&&ne<n-1)for(let Fe=0;Fe<n;Fe++)Q=ye*p.get(Fe,ne)+Le*p.get(Fe,ne+1),p.set(Fe,ne+1,-Le*p.get(Fe,ne)+ye*p.get(Fe,ne+1)),p.set(Fe,ne,Q)}m[_-2]=Y;break}case 4:{if(v[M]<=0&&(v[M]=v[M]<0?-v[M]:0,u))for(let A=0;A<=S;A++)g.set(A,M,-g.get(A,M));for(;M<S&&!(v[M]>=v[M+1]);){let A=v[M];if(v[M]=v[M+1],v[M+1]=A,u&&M<i-1)for(let O=0;O<i;O++)A=g.get(O,M+1),g.set(O,M+1,g.get(O,M)),g.set(O,M,A);if(l&&M<n-1)for(let O=0;O<n;O++)A=p.get(O,M+1),p.set(O,M+1,p.get(O,M)),p.set(O,M,A);M++}_--;break}}}if(f){let M=g;g=p,p=M}this.m=n,this.n=i,this.s=v,this.U=p,this.V=g}solve(e){let t=e,n=this.threshold,i=this.s.length,a=Nt.zeros(i,i);for(let h=0;h<i;h++)Math.abs(this.s[h])<=n?a.set(h,h,0):a.set(h,h,1/this.s[h]);let o=this.U,s=this.rightSingularVectors,l=s.mmul(a),u=s.rows,f=o.rows,c=Nt.zeros(u,f);for(let h=0;h<u;h++)for(let d=0;d<f;d++){let v=0;for(let p=0;p<i;p++)v+=l.get(h,p)*o.get(d,p);c.set(h,d,v)}return c.mmul(t)}solveForDiagonal(e){return this.solve(Nt.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,i=e.columns,a=new Nt(n,this.s.length);for(let f=0;f<n;f++)for(let c=0;c<i;c++)Math.abs(this.s[c])>t&&a.set(f,c,e.get(f,c)/this.s[c]);let o=this.U,s=o.rows,l=o.columns,u=new Nt(n,s);for(let f=0;f<n;f++)for(let c=0;c<s;c++){let h=0;for(let d=0;d<l;d++)h+=a.get(f,d)*o.get(c,d);u.set(f,c,h)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Nt.diag(this.s)}}function _Pe(r,e=!1){return r=Co.checkMatrix(r),e?new Jv(r).inverse():WY(r,Nt.eye(r.rows))}function WY(r,e,t=!1){return r=Co.checkMatrix(r),e=Co.checkMatrix(e),t?new Jv(r).solve(e):r.isSquare()?new kw(r).solve(e):new PT(r).solve(e)}function vx(r){if(r=Nt.checkMatrix(r),r.isSquare()){let e,t,n,i;if(r.columns===2)return e=r.get(0,0),t=r.get(0,1),n=r.get(1,0),i=r.get(1,1),e*i-t*n;if(r.columns===3){let a,o,s;return a=new dx(r,[1,2],[1,2]),o=new dx(r,[1,2],[0,2]),s=new dx(r,[1,2],[0,1]),e=r.get(0,0),t=r.get(0,1),n=r.get(0,2),e*vx(a)-t*vx(o)+n*vx(s)}else return new kw(r).determinant}else throw Error("determinant can only be calculated for a square matrix")}function SPe(r,e){let t=[];for(let n=0;n<r;n++)n!==e&&t.push(n);return t}function MPe(r,e,t,n=1e-9,i=1e-9){if(r>i)return new Array(e.rows+1).fill(0);{let a=e.addRow(t,[0]);for(let o=0;o<a.rows;o++)Math.abs(a.get(o,0))<n&&a.set(o,0,0);return a.to1DArray()}}function CPe(r,e={}){const{thresholdValue:t=1e-9,thresholdError:n=1e-9}=e;r=Nt.checkMatrix(r);let i=r.rows,a=new Nt(i,i);for(let o=0;o<i;o++){let s=Nt.columnVector(r.getRow(o)),l=r.subMatrixRow(SPe(i,o)).transpose(),f=new Jv(l).solve(s),c=Nt.sub(s,l.mmul(f)).abs().max();a.setRow(o,MPe(c,f,o,t,n))}return a}function APe(r,e=Number.EPSILON){r=Nt.checkMatrix(r);let t=new Jv(r,{autoTranspose:!0}),n=t.leftSingularVectors,i=t.rightSingularVectors,a=t.diagonal;for(let o=0;o<a.length;o++)Math.abs(a[o])>e?a[o]=1/a[o]:a[o]=0;return i.mmul(Nt.diag(a).mmul(n.transpose()))}function TPe(r,e=r,t={}){r=new Nt(r);let n=!1;if(typeof e=="object"&&!Nt.isMatrix(e)&&!Array.isArray(e)?(t=e,e=r,n=!0):e=new Nt(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=t;i&&(r=r.center("column"),n||(e=e.center("column")));const a=r.transpose().mmul(e);for(let o=0;o<a.rows;o++)for(let s=0;s<a.columns;s++)a.set(o,s,a.get(o,s)*(1/(r.rows-1)));return a}function OPe(r,e=r,t={}){r=new Nt(r);let n=!1;if(typeof e=="object"&&!Nt.isMatrix(e)&&!Array.isArray(e)?(t=e,e=r,n=!0):e=new Nt(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:a=!0}=t;i&&(r.center("column"),n||e.center("column")),a&&(r.scale("column"),n||e.scale("column"));const o=r.standardDeviation("column",{unbiased:!0}),s=n?o:e.standardDeviation("column",{unbiased:!0}),l=r.transpose().mmul(e);for(let u=0;u<l.rows;u++)for(let f=0;f<l.columns;f++)l.set(u,f,l.get(u,f)*(1/(o[u]*s[f]))*(1/(r.rows-1)));return l}class yF{constructor(e,t={}){const{assumeSymmetric:n=!1}=t;if(e=Co.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");let i=e.columns,a=new Nt(i,i),o=new Float64Array(i),s=new Float64Array(i),l=e,u,f,c=!1;if(n?c=!0:c=e.isSymmetric(),c){for(u=0;u<i;u++)for(f=0;f<i;f++)a.set(u,f,l.get(u,f));kPe(i,s,o,a),IPe(i,s,o,a)}else{let h=new Nt(i,i),d=new Float64Array(i);for(f=0;f<i;f++)for(u=0;u<i;u++)h.set(u,f,l.get(u,f));LPe(i,h,d,a),PPe(i,s,o,a,h)}this.n=i,this.e=s,this.d=o,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,i=new Nt(e,e),a,o;for(a=0;a<e;a++){for(o=0;o<e;o++)i.set(a,o,0);i.set(a,a,n[a]),t[a]>0?i.set(a,a+1,t[a]):t[a]<0&&i.set(a,a-1,t[a])}return i}}function kPe(r,e,t,n){let i,a,o,s,l,u,f,c;for(l=0;l<r;l++)t[l]=n.get(r-1,l);for(s=r-1;s>0;s--){for(c=0,o=0,u=0;u<s;u++)c=c+Math.abs(t[u]);if(c===0)for(e[s]=t[s-1],l=0;l<s;l++)t[l]=n.get(s-1,l),n.set(s,l,0),n.set(l,s,0);else{for(u=0;u<s;u++)t[u]/=c,o+=t[u]*t[u];for(i=t[s-1],a=Math.sqrt(o),i>0&&(a=-a),e[s]=c*a,o=o-i*a,t[s-1]=i-a,l=0;l<s;l++)e[l]=0;for(l=0;l<s;l++){for(i=t[l],n.set(l,s,i),a=e[l]+n.get(l,l)*i,u=l+1;u<=s-1;u++)a+=n.get(u,l)*t[u],e[u]+=n.get(u,l)*i;e[l]=a}for(i=0,l=0;l<s;l++)e[l]/=o,i+=e[l]*t[l];for(f=i/(o+o),l=0;l<s;l++)e[l]-=f*t[l];for(l=0;l<s;l++){for(i=t[l],a=e[l],u=l;u<=s-1;u++)n.set(u,l,n.get(u,l)-(i*e[u]+a*t[u]));t[l]=n.get(s-1,l),n.set(s,l,0)}}t[s]=o}for(s=0;s<r-1;s++){if(n.set(r-1,s,n.get(s,s)),n.set(s,s,1),o=t[s+1],o!==0){for(u=0;u<=s;u++)t[u]=n.get(u,s+1)/o;for(l=0;l<=s;l++){for(a=0,u=0;u<=s;u++)a+=n.get(u,s+1)*n.get(u,l);for(u=0;u<=s;u++)n.set(u,l,n.get(u,l)-a*t[u])}}for(u=0;u<=s;u++)n.set(u,s+1,0)}for(l=0;l<r;l++)t[l]=n.get(r-1,l),n.set(r-1,l,0);n.set(r-1,r-1,1),e[0]=0}function IPe(r,e,t,n){let i,a,o,s,l,u,f,c,h,d,v,p,g,m,b,y;for(o=1;o<r;o++)e[o-1]=e[o];e[r-1]=0;let x=0,w=0,E=Number.EPSILON;for(u=0;u<r;u++){for(w=Math.max(w,Math.abs(t[u])+Math.abs(e[u])),f=u;f<r&&!(Math.abs(e[f])<=E*w);)f++;if(f>u)do{for(i=t[u],c=(t[u+1]-i)/(2*e[u]),h=bu(c,1),c<0&&(h=-h),t[u]=e[u]/(c+h),t[u+1]=e[u]*(c+h),d=t[u+1],a=i-t[u],o=u+2;o<r;o++)t[o]-=a;for(x=x+a,c=t[f],v=1,p=v,g=v,m=e[u+1],b=0,y=0,o=f-1;o>=u;o--)for(g=p,p=v,y=b,i=v*e[o],a=v*c,h=bu(c,e[o]),e[o+1]=b*h,b=e[o]/h,v=c/h,c=v*t[o]-b*i,t[o+1]=a+b*(v*i+b*t[o]),l=0;l<r;l++)a=n.get(l,o+1),n.set(l,o+1,b*n.get(l,o)+v*a),n.set(l,o,v*n.get(l,o)-b*a);c=-b*y*g*m*e[u]/d,e[u]=b*c,t[u]=v*c}while(Math.abs(e[u])>E*w);t[u]=t[u]+x,e[u]=0}for(o=0;o<r-1;o++){for(l=o,c=t[o],s=o+1;s<r;s++)t[s]<c&&(l=s,c=t[s]);if(l!==o)for(t[l]=t[o],t[o]=c,s=0;s<r;s++)c=n.get(s,o),n.set(s,o,n.get(s,l)),n.set(s,l,c)}}function LPe(r,e,t,n){let i=0,a=r-1,o,s,l,u,f,c,h;for(c=i+1;c<=a-1;c++){for(h=0,u=c;u<=a;u++)h=h+Math.abs(e.get(u,c-1));if(h!==0){for(l=0,u=a;u>=c;u--)t[u]=e.get(u,c-1)/h,l+=t[u]*t[u];for(s=Math.sqrt(l),t[c]>0&&(s=-s),l=l-t[c]*s,t[c]=t[c]-s,f=c;f<r;f++){for(o=0,u=a;u>=c;u--)o+=t[u]*e.get(u,f);for(o=o/l,u=c;u<=a;u++)e.set(u,f,e.get(u,f)-o*t[u])}for(u=0;u<=a;u++){for(o=0,f=a;f>=c;f--)o+=t[f]*e.get(u,f);for(o=o/l,f=c;f<=a;f++)e.set(u,f,e.get(u,f)-o*t[f])}t[c]=h*t[c],e.set(c,c-1,h*s)}}for(u=0;u<r;u++)for(f=0;f<r;f++)n.set(u,f,u===f?1:0);for(c=a-1;c>=i+1;c--)if(e.get(c,c-1)!==0){for(u=c+1;u<=a;u++)t[u]=e.get(u,c-1);for(f=c;f<=a;f++){for(s=0,u=c;u<=a;u++)s+=t[u]*n.get(u,f);for(s=s/t[c]/e.get(c,c-1),u=c;u<=a;u++)n.set(u,f,n.get(u,f)+s*t[u])}}}function PPe(r,e,t,n,i){let a=r-1,o=0,s=r-1,l=Number.EPSILON,u=0,f=0,c=0,h=0,d=0,v=0,p=0,g=0,m,b,y,x,w,E,_,S,C,M,T,A,O,L,N;for(m=0;m<r;m++)for((m<o||m>s)&&(t[m]=i.get(m,m),e[m]=0),b=Math.max(m-1,0);b<r;b++)f=f+Math.abs(i.get(m,b));for(;a>=o;){for(x=a;x>o&&(v=Math.abs(i.get(x-1,x-1))+Math.abs(i.get(x,x)),v===0&&(v=f),!(Math.abs(i.get(x,x-1))<l*v));)x--;if(x===a)i.set(a,a,i.get(a,a)+u),t[a]=i.get(a,a),e[a]=0,a--,g=0;else if(x===a-1){if(_=i.get(a,a-1)*i.get(a-1,a),c=(i.get(a-1,a-1)-i.get(a,a))/2,h=c*c+_,p=Math.sqrt(Math.abs(h)),i.set(a,a,i.get(a,a)+u),i.set(a-1,a-1,i.get(a-1,a-1)+u),S=i.get(a,a),h>=0){for(p=c>=0?c+p:c-p,t[a-1]=S+p,t[a]=t[a-1],p!==0&&(t[a]=S-_/p),e[a-1]=0,e[a]=0,S=i.get(a,a-1),v=Math.abs(S)+Math.abs(p),c=S/v,h=p/v,d=Math.sqrt(c*c+h*h),c=c/d,h=h/d,b=a-1;b<r;b++)p=i.get(a-1,b),i.set(a-1,b,h*p+c*i.get(a,b)),i.set(a,b,h*i.get(a,b)-c*p);for(m=0;m<=a;m++)p=i.get(m,a-1),i.set(m,a-1,h*p+c*i.get(m,a)),i.set(m,a,h*i.get(m,a)-c*p);for(m=o;m<=s;m++)p=n.get(m,a-1),n.set(m,a-1,h*p+c*n.get(m,a)),n.set(m,a,h*n.get(m,a)-c*p)}else t[a-1]=S+c,t[a]=S+c,e[a-1]=p,e[a]=-p;a=a-2,g=0}else{if(S=i.get(a,a),C=0,_=0,x<a&&(C=i.get(a-1,a-1),_=i.get(a,a-1)*i.get(a-1,a)),g===10){for(u+=S,m=o;m<=a;m++)i.set(m,m,i.get(m,m)-S);v=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),S=C=.75*v,_=-.4375*v*v}if(g===30&&(v=(C-S)/2,v=v*v+_,v>0)){for(v=Math.sqrt(v),C<S&&(v=-v),v=S-_/((C-S)/2+v),m=o;m<=a;m++)i.set(m,m,i.get(m,m)-v);u+=v,S=C=_=.964}for(g=g+1,w=a-2;w>=x&&(p=i.get(w,w),d=S-p,v=C-p,c=(d*v-_)/i.get(w+1,w)+i.get(w,w+1),h=i.get(w+1,w+1)-p-d-v,d=i.get(w+2,w+1),v=Math.abs(c)+Math.abs(h)+Math.abs(d),c=c/v,h=h/v,d=d/v,!(w===x||Math.abs(i.get(w,w-1))*(Math.abs(h)+Math.abs(d))<l*(Math.abs(c)*(Math.abs(i.get(w-1,w-1))+Math.abs(p)+Math.abs(i.get(w+1,w+1))))));)w--;for(m=w+2;m<=a;m++)i.set(m,m-2,0),m>w+2&&i.set(m,m-3,0);for(y=w;y<=a-1&&(L=y!==a-1,y!==w&&(c=i.get(y,y-1),h=i.get(y+1,y-1),d=L?i.get(y+2,y-1):0,S=Math.abs(c)+Math.abs(h)+Math.abs(d),S!==0&&(c=c/S,h=h/S,d=d/S)),S!==0);y++)if(v=Math.sqrt(c*c+h*h+d*d),c<0&&(v=-v),v!==0){for(y!==w?i.set(y,y-1,-v*S):x!==w&&i.set(y,y-1,-i.get(y,y-1)),c=c+v,S=c/v,C=h/v,p=d/v,h=h/c,d=d/c,b=y;b<r;b++)c=i.get(y,b)+h*i.get(y+1,b),L&&(c=c+d*i.get(y+2,b),i.set(y+2,b,i.get(y+2,b)-c*p)),i.set(y,b,i.get(y,b)-c*S),i.set(y+1,b,i.get(y+1,b)-c*C);for(m=0;m<=Math.min(a,y+3);m++)c=S*i.get(m,y)+C*i.get(m,y+1),L&&(c=c+p*i.get(m,y+2),i.set(m,y+2,i.get(m,y+2)-c*d)),i.set(m,y,i.get(m,y)-c),i.set(m,y+1,i.get(m,y+1)-c*h);for(m=o;m<=s;m++)c=S*n.get(m,y)+C*n.get(m,y+1),L&&(c=c+p*n.get(m,y+2),n.set(m,y+2,n.get(m,y+2)-c*d)),n.set(m,y,n.get(m,y)-c),n.set(m,y+1,n.get(m,y+1)-c*h)}}}if(f!==0){for(a=r-1;a>=0;a--)if(c=t[a],h=e[a],h===0)for(x=a,i.set(a,a,1),m=a-1;m>=0;m--){for(_=i.get(m,m)-c,d=0,b=x;b<=a;b++)d=d+i.get(m,b)*i.get(b,a);if(e[m]<0)p=_,v=d;else if(x=m,e[m]===0?i.set(m,a,_!==0?-d/_:-d/(l*f)):(S=i.get(m,m+1),C=i.get(m+1,m),h=(t[m]-c)*(t[m]-c)+e[m]*e[m],E=(S*v-p*d)/h,i.set(m,a,E),i.set(m+1,a,Math.abs(S)>Math.abs(p)?(-d-_*E)/S:(-v-C*E)/p)),E=Math.abs(i.get(m,a)),l*E*E>1)for(b=m;b<=a;b++)i.set(b,a,i.get(b,a)/E)}else if(h<0)for(x=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,h/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-c)/i.get(a,a-1))):(N=W1(0,-i.get(a-1,a),i.get(a-1,a-1)-c,h),i.set(a-1,a-1,N[0]),i.set(a-1,a,N[1])),i.set(a,a-1,0),i.set(a,a,1),m=a-2;m>=0;m--){for(M=0,T=0,b=x;b<=a;b++)M=M+i.get(m,b)*i.get(b,a-1),T=T+i.get(m,b)*i.get(b,a);if(_=i.get(m,m)-c,e[m]<0)p=_,d=M,v=T;else if(x=m,e[m]===0?(N=W1(-M,-T,_,h),i.set(m,a-1,N[0]),i.set(m,a,N[1])):(S=i.get(m,m+1),C=i.get(m+1,m),A=(t[m]-c)*(t[m]-c)+e[m]*e[m]-h*h,O=(t[m]-c)*2*h,A===0&&O===0&&(A=l*f*(Math.abs(_)+Math.abs(h)+Math.abs(S)+Math.abs(C)+Math.abs(p))),N=W1(S*d-p*M+h*T,S*v-p*T-h*M,A,O),i.set(m,a-1,N[0]),i.set(m,a,N[1]),Math.abs(S)>Math.abs(p)+Math.abs(h)?(i.set(m+1,a-1,(-M-_*i.get(m,a-1)+h*i.get(m,a))/S),i.set(m+1,a,(-T-_*i.get(m,a)-h*i.get(m,a-1))/S)):(N=W1(-d-C*i.get(m,a-1),-v-C*i.get(m,a),p,h),i.set(m+1,a-1,N[0]),i.set(m+1,a,N[1]))),E=Math.max(Math.abs(i.get(m,a-1)),Math.abs(i.get(m,a))),l*E*E>1)for(b=m;b<=a;b++)i.set(b,a-1,i.get(b,a-1)/E),i.set(b,a,i.get(b,a)/E)}for(m=0;m<r;m++)if(m<o||m>s)for(b=m;b<r;b++)n.set(m,b,i.get(m,b));for(b=r-1;b>=o;b--)for(m=o;m<=s;m++){for(p=0,y=o;y<=Math.min(b,s);y++)p=p+n.get(m,y)*i.get(y,b);n.set(m,b,p)}}}function W1(r,e,t,n){let i,a;return Math.abs(t)>Math.abs(n)?(i=n/t,a=t+i*n,[(r+i*e)/a,(e-i*r)/a]):(i=t/n,a=n+i*t,[(i*r+e)/a,(i*e-r)/a])}class bF{constructor(e){if(e=Co.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,n=t.rows,i=new Nt(n,n),a=!0,o,s,l;for(s=0;s<n;s++){let u=0;for(l=0;l<s;l++){let f=0;for(o=0;o<l;o++)f+=i.get(l,o)*i.get(s,o);f=(t.get(s,l)-f)/i.get(l,l),i.set(s,l,f),u=u+f*f}for(u=t.get(s,s)-u,a&=u>0,i.set(s,s,Math.sqrt(Math.max(u,0))),l=s+1;l<n;l++)i.set(s,l,0)}this.L=i,this.positiveDefinite=!!a}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=Co.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,a=e.clone(),o,s,l;for(l=0;l<n;l++)for(s=0;s<i;s++){for(o=0;o<l;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*t.get(l,o));a.set(l,s,a.get(l,s)/t.get(l,l))}for(l=n-1;l>=0;l--)for(s=0;s<i;s++){for(o=l+1;o<n;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*t.get(o,l));a.set(l,s,a.get(l,s)/t.get(l,l))}return a}get lowerTriangularMatrix(){return this.L}}class xF{constructor(e,t={}){e=Co.checkMatrix(e);let{Y:n}=t;const{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=t;let s;if(n){if(Array.isArray(n)&&typeof n[0]=="number"?n=Nt.columnVector(n):n=Co.checkMatrix(n),!n.isColumnVector()||n.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");s=n}else s=e.getColumnVector(0);let l=1,u,f,c,h;for(let d=0;d<a&&l>o;d++)c=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),c=c.div(c.norm()),u=e.mmul(c).div(c.transpose().mmul(c).get(0,0)),d>0&&(l=u.clone().sub(h).pow(2).sum()),h=u.clone(),n?(f=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),f=f.div(f.norm()),s=n.mmul(f).div(f.transpose().mmul(f).get(0,0))):s=u;if(n){let d=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));d=d.div(d.norm());let v=e.clone().sub(u.clone().mmul(d.transpose())),p=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),g=n.clone().sub(u.clone().mulS(p.get(0,0)).mmul(f.transpose()));this.t=u,this.p=d.transpose(),this.w=c.transpose(),this.q=f,this.u=s,this.s=u.transpose().mmul(u),this.xResidual=v,this.yResidual=g,this.betas=p}else this.w=c.transpose(),this.s=u.transpose().mmul(u).sqrt(),i?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(c.transpose()))}}const DPe=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:Ir,CHO:bF,CholeskyDecomposition:bF,EVD:yF,EigenvalueDecomposition:yF,LU:kw,LuDecomposition:kw,Matrix:Nt,MatrixColumnSelectionView:pPe,MatrixColumnView:vPe,MatrixFlipColumnView:gPe,MatrixFlipRowView:mPe,MatrixRowSelectionView:bPe,MatrixRowView:yPe,MatrixSelectionView:dx,MatrixSubView:xPe,MatrixTransposeView:wPe,NIPALS:xF,Nipals:xF,QR:PT,QrDecomposition:PT,SVD:Jv,SingularValueDecomposition:Jv,WrapperMatrix1D:UY,WrapperMatrix2D:Co,correlation:OPe,covariance:TPe,default:Nt,determinant:vx,inverse:_Pe,linearDependencies:CPe,pseudoInverse:APe,solve:WY,wrap:EPe},Symbol.toStringTag,{value:"Module"})),VY=jl(DPe);Object.defineProperty(GL,"__esModule",{value:!0});var fg=VY,NPe=function(){function r(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return r.prototype.layout=function(){var e=this,t=e.dimension,n=e.distances,i=e.linkDistance;try{var a=fg.Matrix.mul(fg.Matrix.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new fg.SingularValueDecomposition(a),f=fg.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(p){return fg.Matrix.mul([p],[f]).toJSON()[0].splice(0,t)})}catch{for(var c=[],h=0;h<n.length;h++){var d=Math.random()*i,v=Math.random()*i;c.push([d,v])}return c}},r}();GL.default=NPe;var jL={};Object.defineProperty(jL,"__esModule",{value:!0});var RPe=800,BPe=function(){function r(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return r.prototype.layout=function(){var e=this,t=e.positions,n=[],i=e.iterations,a=e.width/10;e.maxDisplace=a,e.disp=n;for(var o=0;o<i;o++)t.forEach(function(s,l){n[l]={x:0,y:0}}),e.getRepulsion(),e.updatePositions();return t},r.prototype.getRepulsion=function(){var e=this,t=e.positions,n=e.nodes,i=e.disp,a=e.k,o=e.radii||[];t.forEach(function(s,l){i[l]={x:0,y:0},t.forEach(function(u,f){if(l!==f&&o[l]===o[f]){var c=s[0]-u[0],h=s[1]-u[1],d=Math.sqrt(c*c+h*h);if(d===0){d=1;var v=l>f?1:-1;c=.01*v,h=.01*v}if(d<e.nodeSizeFunc(n[l])/2+e.nodeSizeFunc(n[f])/2){var p=a*a/d;i[l].x+=c/d*p,i[l].y+=h/d*p}}})})},r.prototype.updatePositions=function(){var e=this,t=e.positions,n=e.disp,i=e.speed,a=e.strictRadial,o=e.focusID,s=e.maxDisplace||e.width/10;a&&n.forEach(function(u,f){var c=t[f][0]-t[o][0],h=t[f][1]-t[o][1],d=Math.sqrt(c*c+h*h),v=h/d,p=-c/d,g=Math.sqrt(u.x*u.x+u.y*u.y),m=Math.acos((v*u.x+p*u.y)/g);m>Math.PI/2&&(m-=Math.PI/2,v*=-1,p*=-1);var b=Math.cos(m)*g;u.x=v*b,u.y=p*b});var l=e.radii;t.forEach(function(u,f){if(f!==o){var c=Math.sqrt(n[f].x*n[f].x+n[f].y*n[f].y);if(c>0&&f!==o){var h=Math.min(s*(i/RPe),c);if(u[0]+=n[f].x/c*h,u[1]+=n[f].y/c*h,a){var d=u[0]-t[o][0],v=u[1]-t[o][1],p=Math.sqrt(d*d+v*v);d=d/p*l[f],v=v/p*l[f],u[0]=t[o][0]+d,u[1]=t[o][1]+v}}}})},r}();jL.default=BPe;var FPe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HY=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B_,"__esModule",{value:!0});B_.RadialLayout=void 0;var Do=Vn(),$Pe=ei,zPe=HY(GL),GPe=HY(jL);function jPe(r){for(var e=r.length,t=r[0].length,n=[],i=0;i<e;i++){for(var a=[],o=0;o<t;o++)r[i][o]!==0?a.push(1/(r[i][o]*r[i][o])):a.push(0);n.push(a)}return n}function UPe(r,e){var t=-1;return r.forEach(function(n,i){n.id===e&&(t=i)}),t}function wF(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}var WPe=function(r){FPe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var a=t.center;if(n.length===1){n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}var o=t.linkDistance,s=null;if((0,Do.isString)(t.focusNode)){for(var l=!1,u=0;u<n.length;u++)n[u].id===t.focusNode&&(s=n[u],t.focusNode=s,l=!0,u=n.length);l||(s=null)}else s=t.focusNode;s||(s=n[0],t.focusNode=s);var f=UPe(n,s.id);f<0&&(f=0),t.focusIndex=f;var c=(0,Do.getAdjMatrix)({nodes:n,edges:i},!1),h=(0,Do.floydWarshall)(c),d=t.maxToFocus(h,f);t.handleInfinity(h,f,d+1),t.distances=h;var v=h[f],p=t.width||500,g=t.height||500,m=p-a[0]>a[0]?a[0]:p-a[0],b=g-a[1]>a[1]?a[1]:g-a[1];m===0&&(m=p/2),b===0&&(b=g/2);var y=b>m?m:b,x=Math.max.apply(Math,v),w=[];v.forEach(function(G,D){t.unitRadius||(t.unitRadius=y/x),w[D]=G*t.unitRadius}),t.radii=w;var E=t.eIdealDisMatrix();t.eIdealDistances=E;var _=jPe(E);t.weights=_;var S=new zPe.default({linkDistance:o,distances:E}),C=S.layout();C.forEach(function(G){(0,Do.isNaN)(G[0])&&(G[0]=Math.random()*o),(0,Do.isNaN)(G[1])&&(G[1]=Math.random()*o)}),t.positions=C,C.forEach(function(G,D){n[D].x=G[0]+a[0],n[D].y=G[1]+a[1]}),C.forEach(function(G){G[0]-=C[f][0],G[1]-=C[f][1]}),t.run();var M=t.preventOverlap,T=t.nodeSize,A,O=t.strictRadial;if(M){var L=t.nodeSpacing,N;(0,Do.isNumber)(L)?N=function(){return L}:(0,Do.isFunction)(L)?N=L:N=function(){return 0},T?(0,Do.isArray)(T)?A=function(G){var D=T[0]>T[1]?T[0]:T[1];return D+N(G)}:A=function(G){return T+N(G)}:A=function(G){if(G.size){if((0,Do.isArray)(G.size)){var D=G.size[0]>G.size[1]?G.size[0]:G.size[1];return D+N(G)}if((0,Do.isObject)(G.size)){var D=G.size.width>G.size.height?G.size.width:G.size.height;return D+N(G)}return G.size+N(G)}return 10+N(G)};var P={nodes:n,nodeSizeFunc:A,adjMatrix:c,positions:C,radii:w,height:g,width:p,strictRadial:O,focusID:f,iterations:t.maxPreventOverlapIteration||200,k:C.length/4.5},R=new GPe.default(P);C=R.layout()}return C.forEach(function(G,D){n[D].x=G[0]+a[0],n[D].y=G[1]+a[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}},e.prototype.run=function(){for(var t=this,n=t.maxIteration,i=t.positions||[],a=t.weights||[],o=t.eIdealDistances||[],s=t.radii||[],l=0;l<=n;l++){var u=l/n;t.oneIteration(u,i,s,o,a)}},e.prototype.oneIteration=function(t,n,i,a,o){var s=this,l=1-t,u=s.focusIndex;n.forEach(function(f,c){var h=wF(f,[0,0]),d=h===0?0:1/h;if(c!==u){var v=0,p=0,g=0;n.forEach(function(b,y){if(c!==y){var x=wF(f,b),w=x===0?0:1/x,E=a[y][c];g+=o[c][y],v+=o[c][y]*(b[0]+E*(f[0]-b[0])*w),p+=o[c][y]*(b[1]+E*(f[1]-b[1])*w)}});var m=i[c]===0?0:1/i[c];g*=l,g+=t*m*m,v*=l,v+=t*m*f[0]*d,f[0]=v/g,p*=l,p+=t*m*f[1]*d,f[1]=p/g}})},e.prototype.eIdealDisMatrix=function(){var t=this,n=t.nodes;if(!n)return[];var i=t.distances,a=t.linkDistance,o=t.radii||[],s=t.unitRadius||50,l=[];return i&&i.forEach(function(u,f){var c=[];u.forEach(function(h,d){if(f===d)c.push(0);else if(o[f]===o[d])if(t.sortBy==="data")c.push(h*(Math.abs(f-d)*t.sortStrength)/(o[f]/s));else if(t.sortBy){var v=n[f][t.sortBy]||0,p=n[d][t.sortBy]||0;(0,Do.isString)(v)&&(v=v.charCodeAt(0)),(0,Do.isString)(p)&&(p=p.charCodeAt(0)),c.push(h*(Math.abs(v-p)*t.sortStrength)/(o[f]/s))}else c.push(h*a/(o[f]/s));else{var g=(a+s)/2;c.push(h*g)}}),l.push(c)}),l},e.prototype.handleInfinity=function(t,n,i){for(var a=t.length,o=0;o<a;o++)if(t[n][o]===1/0){t[n][o]=i,t[o][n]=i;for(var s=0;s<a;s++)t[o][s]!==1/0&&t[n][s]===1/0&&(t[n][s]=i+t[o][s],t[s][n]=i+t[o][s])}for(var o=0;o<a;o++)if(o!==n){for(var s=0;s<a;s++)if(t[o][s]===1/0){var l=Math.abs(t[n][o]-t[n][s]);l=l===0?1:l,t[o][s]=l}}},e.prototype.maxToFocus=function(t,n){for(var i=0,a=0;a<t[n].length;a++)t[n][a]!==1/0&&(i=t[n][a]>i?t[n][a]:i);return i},e.prototype.getType=function(){return"radial"},e}($Pe.Base);B_.RadialLayout=WPe;(function(r){var e=Re&&Re.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Re&&Re.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(B_,r)})(zL);var Jm={},VPe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jm,"__esModule",{value:!0});Jm.ConcentricLayout=void 0;var Ks=Vn(),HPe=ei,XPe=function(r){VPe(e,r);function e(t){var n=r.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=3/2*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,n,i=this,a=i.nodes,o=i.edges,s=a.length;if(s===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var l=i.center;if(s===1){a[0].x=l[0],a[0].y=l[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var u=i.nodeSize,f=i.nodeSpacing,c=[],h,d=0;(0,Ks.isArray)(u)?h=Math.max(u[0],u[1]):h=u,(0,Ks.isArray)(f)?d=Math.max(f[0],f[1]):(0,Ks.isNumber)(f)&&(d=f),a.forEach(function(O){c.push(O);var L=h;(0,Ks.isArray)(O.size)?L=Math.max(O.size[0],O.size[1]):(0,Ks.isNumber)(O.size)?L=O.size:(0,Ks.isObject)(O.size)&&(L=Math.max(O.size.width,O.size.height)),h=Math.max(h,L),(0,Ks.isFunction)(f)&&(d=Math.max(f(O),d))}),i.clockwise=i.counterclockwise!==void 0?!i.counterclockwise:i.clockwise;var v={},p={};if(c.forEach(function(O,L){v[O.id]=O,p[O.id]=L}),(i.sortBy==="degree"||!(0,Ks.isString)(i.sortBy)||c[0][i.sortBy]===void 0)&&(i.sortBy="degree",!(0,Ks.isNumber)(a[0].degree))){var g=(0,Ks.getDegree)(a.length,p,o);c.forEach(function(O,L){O.degree=g[L].all})}c.sort(function(O,L){return L[i.sortBy]-O[i.sortBy]}),i.maxValueNode=c[0],i.maxLevelDiff=i.maxLevelDiff||i.maxValueNode[i.sortBy]/4;var m=[[]],b=m[0];c.forEach(function(O){if(b.length>0){var L=Math.abs(b[0][i.sortBy]-O[i.sortBy]);i.maxLevelDiff&&L>=i.maxLevelDiff&&(b=[],m.push(b))}b.push(O)});var y=h+(d||i.minNodeSpacing);if(!i.preventOverlap){var x=m.length>0&&m[0].length>1,w=Math.min(i.width,i.height)/2-y,E=w/(m.length+(x?1:0));y=Math.min(y,E)}var _=0;if(m.forEach(function(O){var L=i.sweep;L===void 0&&(L=2*Math.PI-2*Math.PI/O.length);var N=O.dTheta=L/Math.max(1,O.length-1);if(O.length>1&&i.preventOverlap){var P=Math.cos(N)-Math.cos(0),R=Math.sin(N)-Math.sin(0),G=Math.sqrt(y*y/(P*P+R*R));_=Math.max(G,_)}O.r=_,_+=y}),i.equidistant){for(var S=0,C=0,M=0;M<m.length;M++){var T=m[M],A=T.r-C;S=Math.max(S,A)}C=0,m.forEach(function(O,L){L===0&&(C=O.r),O.r=C,C+=S})}return m.forEach(function(O){var L=O.dTheta,N=O.r;O.forEach(function(P,R){var G=i.startAngle+(i.clockwise?1:-1)*L*R;P.x=l[0]+N*Math.cos(G),P.y=l[1]+N*Math.sin(G)})}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:o}},e.prototype.getType=function(){return"concentric"},e}(HPe.Base);Jm.ConcentricLayout=XPe;var ey={},YPe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ey,"__esModule",{value:!0});ey.MDSLayout=void 0;var cg=VY,zM=Vn(),KPe=ei,qPe=function(r){YPe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges,a=i===void 0?[]:i,o=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}var s=t.linkDistance,l=(0,zM.getAdjMatrix)({nodes:n,edges:a},!1),u=(0,zM.floydWarshall)(l);t.handleInfinity(u);var f=(0,zM.scaleMatrix)(u,s);t.scaledDistances=f;var c=t.runMDS();return t.positions=c,c.forEach(function(h,d){n[d].x=h[0]+o[0],n[d].y=h[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:a}},e.prototype.runMDS=function(){var t=this,n=2,i=t.scaledDistances,a=cg.Matrix.mul(cg.Matrix.pow(i,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new cg.SingularValueDecomposition(a),f=cg.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(c){return cg.Matrix.mul([c],[f]).toJSON()[0].splice(0,n)})},e.prototype.handleInfinity=function(t){var n=-999999;t.forEach(function(i){i.forEach(function(a){a!==1/0&&n<a&&(n=a)})}),t.forEach(function(i,a){i.forEach(function(o,s){o===1/0&&(t[a][s]=n)})})},e.prototype.getType=function(){return"mds"},e}(KPe.Base);ey.MDSLayout=qPe;var ty={},ZPe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ty,"__esModule",{value:!0});ty.FruchtermanLayout=void 0;var QPe=ei,Zn=Vn(),JPe=800,eDe=function(r){ZPe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t=this,n,i,a=this,o=a.nodes;if(a.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(a.timeInterval),!o||o.length===0){(n=a.onLayoutEnd)===null||n===void 0||n.call(a);return}!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var s=a.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],(i=a.onLayoutEnd)===null||i===void 0||i.call(a);return}var l={},u={};return o.forEach(function(f,c){(0,Zn.isNumber)(f.x)||(f.x=Math.random()*t.width),(0,Zn.isNumber)(f.y)||(f.y=Math.random()*t.height),l[f.id]=f,u[f.id]=c}),a.nodeMap=l,a.nodeIdxMap=u,a.run()},e.prototype.run=function(){var t,n=this,i=n.nodes;if(i){var a=n.edges,o=n.maxIteration,s=n.workerEnabled,l=n.clustering,u=n.animate,f={};if(l&&i.forEach(function(d){f[d.cluster]===void 0&&(f[d.cluster]={name:d.cluster,cx:0,cy:0,count:0})}),s||!u){for(var c=0;c<o;c++)n.runOneStep(f);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window>"u")return;var h=0;this.timeInterval=window.setInterval(function(){var d;n.runOneStep(f),h++,h>=o&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:i,edges:a}}},e.prototype.runOneStep=function(t){var n,i=this,a=i.nodes;if(a){var o=i.edges,s=i.center,l=i.gravity,u=i.speed,f=i.clustering,c=i.height*i.width,h=Math.sqrt(c)/10,d=c/(a.length+1),v=Math.sqrt(d),p=[];if(a.forEach(function(b,y){p[y]={x:0,y:0}}),i.applyCalculate(a,o,p,v,d),f){for(var g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;a.forEach(function(b){var y=t[b.cluster];(0,Zn.isNumber)(b.x)&&(y.cx+=b.x),(0,Zn.isNumber)(b.y)&&(y.cy+=b.y),y.count++});for(var g in t)t[g].cx/=t[g].count,t[g].cy/=t[g].count;var m=i.clusterGravity||l;a.forEach(function(b,y){if(!(!(0,Zn.isNumber)(b.x)||!(0,Zn.isNumber)(b.y))){var x=t[b.cluster],w=Math.sqrt((b.x-x.cx)*(b.x-x.cx)+(b.y-x.cy)*(b.y-x.cy)),E=v*m;p[y].x-=E*(b.x-x.cx)/w,p[y].y-=E*(b.y-x.cy)/w}})}a.forEach(function(b,y){if(!(!(0,Zn.isNumber)(b.x)||!(0,Zn.isNumber)(b.y))){var x=.01*v*l;p[y].x-=x*(b.x-s[0]),p[y].y-=x*(b.y-s[1])}}),a.forEach(function(b,y){if((0,Zn.isNumber)(b.fx)&&(0,Zn.isNumber)(b.fy)){b.x=b.fx,b.y=b.fy;return}if(!(!(0,Zn.isNumber)(b.x)||!(0,Zn.isNumber)(b.y))){var x=Math.sqrt(p[y].x*p[y].x+p[y].y*p[y].y);if(x>0){var w=Math.min(h*(u/JPe),x);b.x+=p[y].x/x*w,b.y+=p[y].y/x*w}}}),(n=i.tick)===null||n===void 0||n.call(i)}},e.prototype.applyCalculate=function(t,n,i,a,o){var s=this;s.calRepulsive(t,i,o),n&&s.calAttractive(n,i,a)},e.prototype.calRepulsive=function(t,n,i){t.forEach(function(a,o){n[o]={x:0,y:0},t.forEach(function(s,l){if(o!==l&&!(!(0,Zn.isNumber)(a.x)||!(0,Zn.isNumber)(s.x)||!(0,Zn.isNumber)(a.y)||!(0,Zn.isNumber)(s.y))){var u=a.x-s.x,f=a.y-s.y,c=u*u+f*f;if(c===0){c=1;var h=o>l?1:-1;u=.01*h,f=.01*h}var d=i/c;n[o].x+=u*d,n[o].y+=f*d}})})},e.prototype.calAttractive=function(t,n,i){var a=this;t.forEach(function(o){var s=(0,Zn.getEdgeTerminal)(o,"source"),l=(0,Zn.getEdgeTerminal)(o,"target");if(!(!s||!l)){var u=a.nodeIdxMap[s],f=a.nodeIdxMap[l];if(u!==f){var c=a.nodeMap[s],h=a.nodeMap[l];if(!(!(0,Zn.isNumber)(h.x)||!(0,Zn.isNumber)(c.x)||!(0,Zn.isNumber)(h.y)||!(0,Zn.isNumber)(c.y))){var d=h.x-c.x,v=h.y-c.y,p=Math.sqrt(d*d+v*v),g=p*p/i;n[f].x-=d/p*g,n[f].y-=v/p*g,n[u].x+=d/p*g,n[u].y+=v/p*g}}}})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(QPe.Base);ty.FruchtermanLayout=eDe;var ry={};function EF(r,e,t,n,i,a,o){try{var s=r[a](o),l=s.value}catch(u){t(u);return}s.done?e(l):Promise.resolve(l).then(n,i)}function Pf(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function o(l){EF(a,n,i,o,s,"next",l)}function s(l){EF(a,n,i,o,s,"throw",l)}o(void 0)})}}function ep(r){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(r)}function tDe(r,e){if(ep(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(ep(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function XY(r){var e=tDe(r,"string");return ep(e)==="symbol"?e:String(e)}function mt(r,e,t){return e=XY(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Fs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _F(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,XY(n.key),n)}}function $s(r,e,t){return e&&_F(r.prototype,e),t&&_F(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var rDe=typeof Re=="object"&&Re&&Re.Object===Object&&Re,YY=rDe,nDe=YY,iDe=typeof self=="object"&&self&&self.Object===Object&&self,aDe=nDe||iDe||Function("return this")(),oDe=aDe,sDe=oDe,lDe=sDe.Symbol,KY=lDe,SF=KY,qY=Object.prototype,uDe=qY.hasOwnProperty,fDe=qY.toString,hg=SF?SF.toStringTag:void 0;function cDe(r){var e=uDe.call(r,hg),t=r[hg];try{r[hg]=void 0;var n=!0}catch{}var i=fDe.call(r);return n&&(e?r[hg]=t:delete r[hg]),i}var hDe=cDe,dDe=Object.prototype,vDe=dDe.toString;function pDe(r){return vDe.call(r)}var gDe=pDe,MF=KY,mDe=hDe,yDe=gDe,bDe="[object Null]",xDe="[object Undefined]",CF=MF?MF.toStringTag:void 0;function wDe(r){return r==null?r===void 0?xDe:bDe:CF&&CF in Object(r)?mDe(r):yDe(r)}var UL=wDe,EDe=9007199254740991;function _De(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=EDe}var SDe=_De;function MDe(r){return r!=null&&typeof r=="object"}var WL=MDe,CDe=UL,ADe=SDe,TDe=WL,ODe="[object Arguments]",kDe="[object Array]",IDe="[object Boolean]",LDe="[object Date]",PDe="[object Error]",DDe="[object Function]",NDe="[object Map]",RDe="[object Number]",BDe="[object Object]",FDe="[object RegExp]",$De="[object Set]",zDe="[object String]",GDe="[object WeakMap]",jDe="[object ArrayBuffer]",UDe="[object DataView]",WDe="[object Float32Array]",VDe="[object Float64Array]",HDe="[object Int8Array]",XDe="[object Int16Array]",YDe="[object Int32Array]",KDe="[object Uint8Array]",qDe="[object Uint8ClampedArray]",ZDe="[object Uint16Array]",QDe="[object Uint32Array]",An={};An[WDe]=An[VDe]=An[HDe]=An[XDe]=An[YDe]=An[KDe]=An[qDe]=An[ZDe]=An[QDe]=!0;An[ODe]=An[kDe]=An[jDe]=An[IDe]=An[UDe]=An[LDe]=An[PDe]=An[DDe]=An[NDe]=An[RDe]=An[BDe]=An[FDe]=An[$De]=An[zDe]=An[GDe]=!1;function JDe(r){return TDe(r)&&ADe(r.length)&&!!An[CDe(r)]}var eNe=JDe;function tNe(r){return function(e){return r(e)}}var rNe=tNe,Iw={exports:{}};Iw.exports;(function(r,e){var t=YY,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,o=a&&t.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();r.exports=s})(Iw,Iw.exports);var nNe=Iw.exports,iNe=eNe,aNe=rNe,AF=nNe,TF=AF&&AF.isTypedArray,oNe=TF?aNe(TF):iNe,sNe=oNe;const Lw=Gl(sNe);var lNe=UL,uNe=WL,fNe="[object Number]";function cNe(r){return typeof r=="number"||uNe(r)&&lNe(r)==fNe}var hNe=cNe;const dNe=Gl(hNe);var vNe=Array.isArray,pNe=vNe;const gNe=Gl(pNe);var ZY={exports:{}},QY={exports:{}};(function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(QY);var mNe=QY.exports;(function(r){var e=mNe.default;function t(){r.exports=t=function(){return i},r.exports.__esModule=!0,r.exports.default=r.exports;var n,i={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(D,B,Y){D[B]=Y.value},l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",f=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function h(D,B,Y){return Object.defineProperty(D,B,{value:Y,enumerable:!0,configurable:!0,writable:!0}),D[B]}try{h({},"")}catch{h=function(Y,ee,ne){return Y[ee]=ne}}function d(D,B,Y,ee){var ne=B&&B.prototype instanceof x?B:x,Q=Object.create(ne.prototype),ye=new R(ee||[]);return s(Q,"_invoke",{value:O(D,Y,ye)}),Q}function v(D,B,Y){try{return{type:"normal",arg:D.call(B,Y)}}catch(ee){return{type:"throw",arg:ee}}}i.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",b="completed",y={};function x(){}function w(){}function E(){}var _={};h(_,u,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(G([])));C&&C!==a&&o.call(C,u)&&(_=C);var M=E.prototype=x.prototype=Object.create(_);function T(D){["next","throw","return"].forEach(function(B){h(D,B,function(Y){return this._invoke(B,Y)})})}function A(D,B){function Y(ne,Q,ye,Le){var Fe=v(D[ne],D,Q);if(Fe.type!=="throw"){var _e=Fe.arg,Ve=_e.value;return Ve&&e(Ve)=="object"&&o.call(Ve,"__await")?B.resolve(Ve.__await).then(function(Xe){Y("next",Xe,ye,Le)},function(Xe){Y("throw",Xe,ye,Le)}):B.resolve(Ve).then(function(Xe){_e.value=Xe,ye(_e)},function(Xe){return Y("throw",Xe,ye,Le)})}Le(Fe.arg)}var ee;s(this,"_invoke",{value:function(Q,ye){function Le(){return new B(function(Fe,_e){Y(Q,ye,Fe,_e)})}return ee=ee?ee.then(Le,Le):Le()}})}function O(D,B,Y){var ee=p;return function(ne,Q){if(ee===m)throw new Error("Generator is already running");if(ee===b){if(ne==="throw")throw Q;return{value:n,done:!0}}for(Y.method=ne,Y.arg=Q;;){var ye=Y.delegate;if(ye){var Le=L(ye,Y);if(Le){if(Le===y)continue;return Le}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(ee===p)throw ee=b,Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);ee=m;var Fe=v(D,B,Y);if(Fe.type==="normal"){if(ee=Y.done?b:g,Fe.arg===y)continue;return{value:Fe.arg,done:Y.done}}Fe.type==="throw"&&(ee=b,Y.method="throw",Y.arg=Fe.arg)}}}function L(D,B){var Y=B.method,ee=D.iterator[Y];if(ee===n)return B.delegate=null,Y==="throw"&&D.iterator.return&&(B.method="return",B.arg=n,L(D,B),B.method==="throw")||Y!=="return"&&(B.method="throw",B.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),y;var ne=v(ee,D.iterator,B.arg);if(ne.type==="throw")return B.method="throw",B.arg=ne.arg,B.delegate=null,y;var Q=ne.arg;return Q?Q.done?(B[D.resultName]=Q.value,B.next=D.nextLoc,B.method!=="return"&&(B.method="next",B.arg=n),B.delegate=null,y):Q:(B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,y)}function N(D){var B={tryLoc:D[0]};1 in D&&(B.catchLoc=D[1]),2 in D&&(B.finallyLoc=D[2],B.afterLoc=D[3]),this.tryEntries.push(B)}function P(D){var B=D.completion||{};B.type="normal",delete B.arg,D.completion=B}function R(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(N,this),this.reset(!0)}function G(D){if(D||D===""){var B=D[u];if(B)return B.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var Y=-1,ee=function ne(){for(;++Y<D.length;)if(o.call(D,Y))return ne.value=D[Y],ne.done=!1,ne;return ne.value=n,ne.done=!0,ne};return ee.next=ee}}throw new TypeError(e(D)+" is not iterable")}return w.prototype=E,s(M,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:w,configurable:!0}),w.displayName=h(E,c,"GeneratorFunction"),i.isGeneratorFunction=function(D){var B=typeof D=="function"&&D.constructor;return!!B&&(B===w||(B.displayName||B.name)==="GeneratorFunction")},i.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,E):(D.__proto__=E,h(D,c,"GeneratorFunction")),D.prototype=Object.create(M),D},i.awrap=function(D){return{__await:D}},T(A.prototype),h(A.prototype,f,function(){return this}),i.AsyncIterator=A,i.async=function(D,B,Y,ee,ne){ne===void 0&&(ne=Promise);var Q=new A(d(D,B,Y,ee),ne);return i.isGeneratorFunction(B)?Q:Q.next().then(function(ye){return ye.done?ye.value:Q.next()})},T(M),h(M,c,"Generator"),h(M,u,function(){return this}),h(M,"toString",function(){return"[object Generator]"}),i.keys=function(D){var B=Object(D),Y=[];for(var ee in B)Y.push(ee);return Y.reverse(),function ne(){for(;Y.length;){var Q=Y.pop();if(Q in B)return ne.value=Q,ne.done=!1,ne}return ne.done=!0,ne}},i.values=G,R.prototype={constructor:R,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!B)for(var Y in this)Y.charAt(0)==="t"&&o.call(this,Y)&&!isNaN(+Y.slice(1))&&(this[Y]=n)},stop:function(){this.done=!0;var B=this.tryEntries[0].completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var Y=this;function ee(_e,Ve){return ye.type="throw",ye.arg=B,Y.next=_e,Ve&&(Y.method="next",Y.arg=n),!!Ve}for(var ne=this.tryEntries.length-1;ne>=0;--ne){var Q=this.tryEntries[ne],ye=Q.completion;if(Q.tryLoc==="root")return ee("end");if(Q.tryLoc<=this.prev){var Le=o.call(Q,"catchLoc"),Fe=o.call(Q,"finallyLoc");if(Le&&Fe){if(this.prev<Q.catchLoc)return ee(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return ee(Q.finallyLoc)}else if(Le){if(this.prev<Q.catchLoc)return ee(Q.catchLoc,!0)}else{if(!Fe)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return ee(Q.finallyLoc)}}}},abrupt:function(B,Y){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var ne=this.tryEntries[ee];if(ne.tryLoc<=this.prev&&o.call(ne,"finallyLoc")&&this.prev<ne.finallyLoc){var Q=ne;break}}Q&&(B==="break"||B==="continue")&&Q.tryLoc<=Y&&Y<=Q.finallyLoc&&(Q=null);var ye=Q?Q.completion:{};return ye.type=B,ye.arg=Y,Q?(this.method="next",this.next=Q.finallyLoc,y):this.complete(ye)},complete:function(B,Y){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&Y&&(this.next=Y),y},finish:function(B){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var ee=this.tryEntries[Y];if(ee.finallyLoc===B)return this.complete(ee.completion,ee.afterLoc),P(ee),y}},catch:function(B){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var ee=this.tryEntries[Y];if(ee.tryLoc===B){var ne=ee.completion;if(ne.type==="throw"){var Q=ne.arg;P(ee)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(B,Y,ee){return this.delegate={iterator:G(B),resultName:Y,nextLoc:ee},this.method==="next"&&(this.arg=n),y}},i}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(ZY);var yNe=ZY.exports,px=yNe(),bNe=px;try{regeneratorRuntime=px}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=px:Function("r","regeneratorRuntime = r")(px)}const la=Gl(bNe);var xNe=1;function JY(){return xNe++}var Qe;(function(r){r[r.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",r[r.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",r[r.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.SRC_COLOR=768]="SRC_COLOR",r[r.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",r[r.SRC_ALPHA=770]="SRC_ALPHA",r[r.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",r[r.DST_ALPHA=772]="DST_ALPHA",r[r.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",r[r.DST_COLOR=774]="DST_COLOR",r[r.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",r[r.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",r[r.FUNC_ADD=32774]="FUNC_ADD",r[r.BLEND_EQUATION=32777]="BLEND_EQUATION",r[r.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",r[r.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",r[r.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",r[r.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",r[r.MAX_EXT=32776]="MAX_EXT",r[r.MIN_EXT=32775]="MIN_EXT",r[r.BLEND_DST_RGB=32968]="BLEND_DST_RGB",r[r.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",r[r.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",r[r.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",r[r.CONSTANT_COLOR=32769]="CONSTANT_COLOR",r[r.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",r[r.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",r[r.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",r[r.BLEND_COLOR=32773]="BLEND_COLOR",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",r[r.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",r[r.STREAM_DRAW=35040]="STREAM_DRAW",r[r.STATIC_DRAW=35044]="STATIC_DRAW",r[r.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",r[r.BUFFER_SIZE=34660]="BUFFER_SIZE",r[r.BUFFER_USAGE=34661]="BUFFER_USAGE",r[r.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",r[r.FRONT=1028]="FRONT",r[r.BACK=1029]="BACK",r[r.FRONT_AND_BACK=1032]="FRONT_AND_BACK",r[r.CULL_FACE=2884]="CULL_FACE",r[r.BLEND=3042]="BLEND",r[r.DITHER=3024]="DITHER",r[r.STENCIL_TEST=2960]="STENCIL_TEST",r[r.DEPTH_TEST=2929]="DEPTH_TEST",r[r.SCISSOR_TEST=3089]="SCISSOR_TEST",r[r.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",r[r.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",r[r.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",r[r.NO_ERROR=0]="NO_ERROR",r[r.INVALID_ENUM=1280]="INVALID_ENUM",r[r.INVALID_VALUE=1281]="INVALID_VALUE",r[r.INVALID_OPERATION=1282]="INVALID_OPERATION",r[r.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",r[r.CW=2304]="CW",r[r.CCW=2305]="CCW",r[r.LINE_WIDTH=2849]="LINE_WIDTH",r[r.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",r[r.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",r[r.CULL_FACE_MODE=2885]="CULL_FACE_MODE",r[r.FRONT_FACE=2886]="FRONT_FACE",r[r.DEPTH_RANGE=2928]="DEPTH_RANGE",r[r.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",r[r.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",r[r.DEPTH_FUNC=2932]="DEPTH_FUNC",r[r.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",r[r.STENCIL_FUNC=2962]="STENCIL_FUNC",r[r.STENCIL_FAIL=2964]="STENCIL_FAIL",r[r.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",r[r.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",r[r.STENCIL_REF=2967]="STENCIL_REF",r[r.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",r[r.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",r[r.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",r[r.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",r[r.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",r[r.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",r[r.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",r[r.VIEWPORT=2978]="VIEWPORT",r[r.SCISSOR_BOX=3088]="SCISSOR_BOX",r[r.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",r[r.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",r[r.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",r[r.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",r[r.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",r[r.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",r[r.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",r[r.RED_BITS=3410]="RED_BITS",r[r.GREEN_BITS=3411]="GREEN_BITS",r[r.BLUE_BITS=3412]="BLUE_BITS",r[r.ALPHA_BITS=3413]="ALPHA_BITS",r[r.DEPTH_BITS=3414]="DEPTH_BITS",r[r.STENCIL_BITS=3415]="STENCIL_BITS",r[r.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",r[r.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",r[r.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",r[r.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",r[r.SAMPLES=32937]="SAMPLES",r[r.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",r[r.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",r[r.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",r[r.DONT_CARE=4352]="DONT_CARE",r[r.FASTEST=4353]="FASTEST",r[r.NICEST=4354]="NICEST",r[r.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.INT=5124]="INT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.ALPHA=6406]="ALPHA",r[r.RGB=6407]="RGB",r[r.RGBA=6408]="RGBA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",r[r.VERTEX_SHADER=35633]="VERTEX_SHADER",r[r.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",r[r.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",r[r.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",r[r.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",r[r.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",r[r.SHADER_TYPE=35663]="SHADER_TYPE",r[r.DELETE_STATUS=35712]="DELETE_STATUS",r[r.LINK_STATUS=35714]="LINK_STATUS",r[r.VALIDATE_STATUS=35715]="VALIDATE_STATUS",r[r.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",r[r.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",r[r.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",r[r.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",r[r.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",r[r.NEVER=512]="NEVER",r[r.LESS=513]="LESS",r[r.EQUAL=514]="EQUAL",r[r.LEQUAL=515]="LEQUAL",r[r.GREATER=516]="GREATER",r[r.NOTEQUAL=517]="NOTEQUAL",r[r.GEQUAL=518]="GEQUAL",r[r.ALWAYS=519]="ALWAYS",r[r.KEEP=7680]="KEEP",r[r.REPLACE=7681]="REPLACE",r[r.INCR=7682]="INCR",r[r.DECR=7683]="DECR",r[r.INVERT=5386]="INVERT",r[r.INCR_WRAP=34055]="INCR_WRAP",r[r.DECR_WRAP=34056]="DECR_WRAP",r[r.VENDOR=7936]="VENDOR",r[r.RENDERER=7937]="RENDERER",r[r.VERSION=7938]="VERSION",r[r.NEAREST=9728]="NEAREST",r[r.LINEAR=9729]="LINEAR",r[r.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",r[r.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",r[r.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",r[r.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",r[r.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",r[r.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",r[r.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",r[r.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE=5890]="TEXTURE",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r[r.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",r[r.TEXTURE0=33984]="TEXTURE0",r[r.TEXTURE1=33985]="TEXTURE1",r[r.TEXTURE2=33986]="TEXTURE2",r[r.TEXTURE3=33987]="TEXTURE3",r[r.TEXTURE4=33988]="TEXTURE4",r[r.TEXTURE5=33989]="TEXTURE5",r[r.TEXTURE6=33990]="TEXTURE6",r[r.TEXTURE7=33991]="TEXTURE7",r[r.TEXTURE8=33992]="TEXTURE8",r[r.TEXTURE9=33993]="TEXTURE9",r[r.TEXTURE10=33994]="TEXTURE10",r[r.TEXTURE11=33995]="TEXTURE11",r[r.TEXTURE12=33996]="TEXTURE12",r[r.TEXTURE13=33997]="TEXTURE13",r[r.TEXTURE14=33998]="TEXTURE14",r[r.TEXTURE15=33999]="TEXTURE15",r[r.TEXTURE16=34e3]="TEXTURE16",r[r.TEXTURE17=34001]="TEXTURE17",r[r.TEXTURE18=34002]="TEXTURE18",r[r.TEXTURE19=34003]="TEXTURE19",r[r.TEXTURE20=34004]="TEXTURE20",r[r.TEXTURE21=34005]="TEXTURE21",r[r.TEXTURE22=34006]="TEXTURE22",r[r.TEXTURE23=34007]="TEXTURE23",r[r.TEXTURE24=34008]="TEXTURE24",r[r.TEXTURE25=34009]="TEXTURE25",r[r.TEXTURE26=34010]="TEXTURE26",r[r.TEXTURE27=34011]="TEXTURE27",r[r.TEXTURE28=34012]="TEXTURE28",r[r.TEXTURE29=34013]="TEXTURE29",r[r.TEXTURE30=34014]="TEXTURE30",r[r.TEXTURE31=34015]="TEXTURE31",r[r.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",r[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r[r.FLOAT_VEC2=35664]="FLOAT_VEC2",r[r.FLOAT_VEC3=35665]="FLOAT_VEC3",r[r.FLOAT_VEC4=35666]="FLOAT_VEC4",r[r.INT_VEC2=35667]="INT_VEC2",r[r.INT_VEC3=35668]="INT_VEC3",r[r.INT_VEC4=35669]="INT_VEC4",r[r.BOOL=35670]="BOOL",r[r.BOOL_VEC2=35671]="BOOL_VEC2",r[r.BOOL_VEC3=35672]="BOOL_VEC3",r[r.BOOL_VEC4=35673]="BOOL_VEC4",r[r.FLOAT_MAT2=35674]="FLOAT_MAT2",r[r.FLOAT_MAT3=35675]="FLOAT_MAT3",r[r.FLOAT_MAT4=35676]="FLOAT_MAT4",r[r.SAMPLER_2D=35678]="SAMPLER_2D",r[r.SAMPLER_CUBE=35680]="SAMPLER_CUBE",r[r.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",r[r.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",r[r.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",r[r.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",r[r.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",r[r.COMPILE_STATUS=35713]="COMPILE_STATUS",r[r.LOW_FLOAT=36336]="LOW_FLOAT",r[r.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",r[r.HIGH_FLOAT=36338]="HIGH_FLOAT",r[r.LOW_INT=36339]="LOW_INT",r[r.MEDIUM_INT=36340]="MEDIUM_INT",r[r.HIGH_INT=36341]="HIGH_INT",r[r.FRAMEBUFFER=36160]="FRAMEBUFFER",r[r.RENDERBUFFER=36161]="RENDERBUFFER",r[r.RGBA4=32854]="RGBA4",r[r.RGB5_A1=32855]="RGB5_A1",r[r.RGB565=36194]="RGB565",r[r.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",r[r.STENCIL_INDEX=6401]="STENCIL_INDEX",r[r.STENCIL_INDEX8=36168]="STENCIL_INDEX8",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r[r.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",r[r.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",r[r.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",r[r.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",r[r.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",r[r.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",r[r.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",r[r.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",r[r.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",r[r.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",r[r.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",r[r.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",r[r.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",r[r.NONE=0]="NONE",r[r.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",r[r.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",r[r.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",r[r.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",r[r.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",r[r.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",r[r.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",r[r.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",r[r.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",r[r.COPY_SRC=1]="COPY_SRC",r[r.COPY_DST=2]="COPY_DST",r[r.SAMPLED=4]="SAMPLED",r[r.STORAGE=8]="STORAGE",r[r.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Qe||(Qe={}));var wNe=function(){function r(){Fs(this,r),this.config=void 0}return $s(r,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),r}(),Q0;(function(r){r.Void="Void",r.Boolean="Boolean",r.Float="Float",r.Uint32="Uint32",r.Int32="Int32",r.Vector="Vector",r.Vector2Float="vec2<f32>",r.Vector3Float="vec3<f32>",r.Vector4Float="vec4<f32>",r.Vector2Boolean="vec2<bool>",r.Vector3Boolean="vec3<bool>",r.Vector4Boolean="vec4<bool>",r.Vector2Uint="vec2<u32>",r.Vector3Uint="vec3<u32>",r.Vector4Uint="vec4<u32>",r.Vector2Int="vec2<i32>",r.Vector3Int="vec3<i32>",r.Vector4Int="vec4<i32>",r.Matrix="Matrix",r.Matrix3x3Float="mat3x3<f32>",r.Matrix4x4Float="mat4x4<i32>",r.Struct="Struct",r.FloatArray="Float[]",r.Vector4FloatArray="vec4<f32>[]"})(Q0||(Q0={}));var OF;(function(r){r.Program="Program",r.Identifier="Identifier",r.VariableDeclaration="VariableDeclaration",r.BlockStatement="BlockStatement",r.ReturnStatement="ReturnStatement",r.FunctionDeclaration="FunctionDeclaration",r.VariableDeclarator="VariableDeclarator",r.AssignmentExpression="AssignmentExpression",r.LogicalExpression="LogicalExpression",r.BinaryExpression="BinaryExpression",r.ArrayExpression="ArrayExpression",r.UnaryExpression="UnaryExpression",r.UpdateExpression="UpdateExpression",r.FunctionExpression="FunctionExpression",r.MemberExpression="MemberExpression",r.ConditionalExpression="ConditionalExpression",r.ExpressionStatement="ExpressionStatement",r.CallExpression="CallExpression",r.NumThreadStatement="NumThreadStatement",r.StorageStatement="StorageStatement",r.DoWhileStatement="DoWhileStatement",r.WhileStatement="WhileStatement",r.ForStatement="ForStatement",r.BreakStatement="BreakStatement",r.ContinueStatement="ContinueStatement",r.IfStatement="IfStatement",r.ImportedFunctionStatement="ImportedFunctionStatement"})(OF||(OF={}));var tp;(function(r){r.Input="Input",r.Output="Output",r.Uniform="Uniform",r.Workgroup="Workgroup",r.UniformConstant="UniformConstant",r.Image="Image",r.StorageBuffer="StorageBuffer",r.Private="Private",r.Function="Function"})(tp||(tp={}));var u0;(function(r){r.GLSL100="GLSL100",r.GLSL450="GLSL450",r.WGSL="WGSL"})(u0||(u0={}));var ENe="__DefineValuePlaceholder__";function _Ne(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function kF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function IF(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kF(Object(t),!0).forEach(function(n){mt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var eK=function(){function r(e,t){Fs(this,r),this.engine=e,this.configService=t,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return $s(r,[{key:"init",value:function(){var t=this.configService.get(),n=t.canvas,i=t.engineOptions;this.initPromise=this.engine.init(IF({canvas:n||_Ne(),antialiasing:!1},i))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,n){var i=this;if(typeof t=="string"){var a=dNe(n)||Lw(n)||gNe(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===t});if(o)return o.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===t});s&&(a?(s.data=n,s.isReferer=!1,s.storageClass===tp.Uniform?this.model&&this.model.updateUniform(t,n):this.model&&this.model.updateBuffer(t,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(t).forEach(function(l){i.setBinding(l,t[l])});return this}},{key:"execute",value:function(){var e=Pf(la.mark(function n(){var i=this,a,o,s=arguments;return la.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(f){var c=f.isReferer;return c}).forEach(function(f){var c=f.data,h=f.name;i.model.confirmInput(c.model,h)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getOutput",value:function(){var e=Pf(la.mark(function n(){return la.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"compile",value:function(){var e=Pf(la.mark(function n(){var i,a,o;return la.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=IF({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?u0.WGSL:u0.GLSL450:u0.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var f="".concat(ENe).concat(u.name);o=o.replace(f,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===tp.StorageBuffer){var f=1;u.type===Q0.FloatArray?f=1:u.type===Q0.Vector4FloatArray&&(f=4),u.data=new Float32Array(i.output.length*f).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()}]),r}(),tK={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(Re,function(){var t=function(I){return I instanceof Uint8Array||I instanceof Uint16Array||I instanceof Uint32Array||I instanceof Int8Array||I instanceof Int16Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof Float64Array||I instanceof Uint8ClampedArray},n=function(I,W){for(var re=Object.keys(W),Ee=0;Ee<re.length;++Ee)I[re[Ee]]=W[re[Ee]];return I},i=`
`;function a(I){return typeof atob<"u"?atob(I):"base64:"+I}function o(I){var W=new Error("(regl) "+I);throw console.error(W),W}function s(I,W){I||o(W)}function l(I){return I?": "+I:""}function u(I,W,re){I in W||o("unknown parameter ("+I+")"+l(re)+". possible values: "+Object.keys(W).join())}function f(I,W){t(I)||o("invalid parameter type"+l(W)+". must be a typed array")}function c(I,W){switch(W){case"number":return typeof I=="number";case"object":return typeof I=="object";case"string":return typeof I=="string";case"boolean":return typeof I=="boolean";case"function":return typeof I=="function";case"undefined":return typeof I>"u";case"symbol":return typeof I=="symbol"}}function h(I,W,re){c(I,W)||o("invalid parameter type"+l(re)+". expected "+W+", got "+typeof I)}function d(I,W){I>=0&&(I|0)===I||o("invalid parameter type, ("+I+")"+l(W)+". must be a nonnegative integer")}function v(I,W,re){W.indexOf(I)<0&&o("invalid value"+l(re)+". must be one of: "+W)}var p=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(I){Object.keys(I).forEach(function(W){p.indexOf(W)<0&&o('invalid regl constructor argument "'+W+'". must be one of '+p)})}function m(I,W){for(I=I+"";I.length<W;)I=" "+I;return I}function b(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(I,W){this.number=I,this.line=W,this.errors=[]}function x(I,W,re){this.file=I,this.line=W,this.message=re}function w(){var I=new Error,W=(I.stack||I).toString(),re=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(W);if(re)return re[1];var Ee=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(W);return Ee?Ee[1]:"unknown"}function E(){var I=new Error,W=(I.stack||I).toString(),re=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(W);if(re)return re[1];var Ee=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(W);return Ee?Ee[1]:"unknown"}function _(I,W){var re=I.split(`
`),Ee=1,$e=0,we={unknown:new b,0:new b};we.unknown.name=we[0].name=W||w(),we.unknown.lines.push(new y(0,""));for(var Ae=0;Ae<re.length;++Ae){var qe=re[Ae],Je=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(qe);if(Je)switch(Je[1]){case"line":var it=/(\d+)(\s+\d+)?/.exec(Je[2]);it&&(Ee=it[1]|0,it[2]&&($e=it[2]|0,$e in we||(we[$e]=new b)));break;case"define":var et=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Je[2]);et&&(we[$e].name=et[1]?a(et[2]):et[2]);break}we[$e].lines.push(new y(Ee++,qe))}return Object.keys(we).forEach(function(st){var ht=we[st];ht.lines.forEach(function(Ze){ht.index[Ze.number]=Ze})}),we}function S(I){var W=[];return I.split(`
`).forEach(function(re){if(!(re.length<5)){var Ee=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(re);Ee?W.push(new x(Ee[1]|0,Ee[2]|0,Ee[3].trim())):re.length>0&&W.push(new x("unknown",0,re))}}),W}function C(I,W){W.forEach(function(re){var Ee=I[re.file];if(Ee){var $e=Ee.index[re.line];if($e){$e.errors.push(re),Ee.hasErrors=!0;return}}I.unknown.hasErrors=!0,I.unknown.lines[0].errors.push(re)})}function M(I,W,re,Ee,$e){if(!I.getShaderParameter(W,I.COMPILE_STATUS)){var we=I.getShaderInfoLog(W),Ae=Ee===I.FRAGMENT_SHADER?"fragment":"vertex";R(re,"string",Ae+" shader source must be a string",$e);var qe=_(re,$e),Je=S(we);C(qe,Je),Object.keys(qe).forEach(function(it){var et=qe[it];if(!et.hasErrors)return;var st=[""],ht=[""];function Ze(lt,ge){st.push(lt),ht.push(ge||"")}Ze("file number "+it+": "+et.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),et.lines.forEach(function(lt){if(lt.errors.length>0){Ze(m(lt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ze(lt.line+i,"color:red; background-color:yellow; font-weight:bold");var ge=0;lt.errors.forEach(function(Te){var nt=Te.message,pt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(nt);if(pt){var je=pt[1];switch(nt=pt[2],je){case"assign":je="=";break}ge=Math.max(lt.line.indexOf(je,ge),0)}else ge=0;Ze(m("| ",6)),Ze(m("^^^",ge+3)+i,"font-weight:bold"),Ze(m("| ",6)),Ze(nt+i,"font-weight:bold")}),Ze(m("| ",6)+i)}else Ze(m(lt.number,4)+"|  "),Ze(lt.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(ht[0]=st.join("%c"),console.log.apply(console,ht)):console.log(st.join(""))}),s.raise("Error compiling "+Ae+" shader, "+qe[0].name)}}function T(I,W,re,Ee,$e){if(!I.getProgramParameter(W,I.LINK_STATUS)){var we=I.getProgramInfoLog(W),Ae=_(re,$e),qe=_(Ee,$e),Je='Error linking program with vertex shader, "'+qe[0].name+'", and fragment shader "'+Ae[0].name+'"';typeof document<"u"?console.log("%c"+Je+i+"%c"+we,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Je+i+we),s.raise(Je)}}function A(I){I._commandRef=w()}function O(I,W,re,Ee){A(I);function $e(Je){return Je?Ee.id(Je):0}I._fragId=$e(I.static.frag),I._vertId=$e(I.static.vert);function we(Je,it){Object.keys(it).forEach(function(et){Je[Ee.id(et)]=!0})}var Ae=I._uniformSet={};we(Ae,W.static),we(Ae,W.dynamic);var qe=I._attributeSet={};we(qe,re.static),we(qe,re.dynamic),I._hasCount="count"in I.static||"count"in I.dynamic||"elements"in I.static||"elements"in I.dynamic}function L(I,W){var re=E();o(I+" in command "+(W||w())+(re==="unknown"?"":" called from "+re))}function N(I,W,re){I||L(W,re||w())}function P(I,W,re,Ee){I in W||L("unknown parameter ("+I+")"+l(re)+". possible values: "+Object.keys(W).join(),Ee||w())}function R(I,W,re,Ee){c(I,W)||L("invalid parameter type"+l(re)+". expected "+W+", got "+typeof I,Ee||w())}function G(I){I()}function D(I,W,re){I.texture?v(I.texture._texture.internalformat,W,"unsupported texture format for attachment"):v(I.renderbuffer._renderbuffer.format,re,"unsupported renderbuffer format for attachment")}var B=33071,Y=9728,ee=9984,ne=9985,Q=9986,ye=9987,Le=5120,Fe=5121,_e=5122,Ve=5123,Xe=5124,vt=5125,bt=5126,te=32819,H=32820,de=33635,Be=34042,Ie=36193,Pe={};Pe[Le]=Pe[Fe]=1,Pe[_e]=Pe[Ve]=Pe[Ie]=Pe[de]=Pe[te]=Pe[H]=2,Pe[Xe]=Pe[vt]=Pe[bt]=Pe[Be]=4;function Ye(I,W){return I===H||I===te||I===de?2:I===Be?4:Pe[I]*W}function V(I){return!(I&I-1)&&!!I}function z(I,W,re){var Ee,$e=W.width,we=W.height,Ae=W.channels;s($e>0&&$e<=re.maxTextureSize&&we>0&&we<=re.maxTextureSize,"invalid texture shape"),(I.wrapS!==B||I.wrapT!==B)&&s(V($e)&&V(we),"incompatible wrap mode for texture, both width and height must be power of 2"),W.mipmask===1?$e!==1&&we!==1&&s(I.minFilter!==ee&&I.minFilter!==Q&&I.minFilter!==ne&&I.minFilter!==ye,"min filter requires mipmap"):(s(V($e)&&V(we),"texture must be a square power of 2 to support mipmapping"),s(W.mipmask===($e<<1)-1,"missing or incomplete mipmap data")),W.type===bt&&(re.extensions.indexOf("oes_texture_float_linear")<0&&s(I.minFilter===Y&&I.magFilter===Y,"filter not supported, must enable oes_texture_float_linear"),s(!I.genMipmaps,"mipmap generation not supported with float textures"));var qe=W.images;for(Ee=0;Ee<16;++Ee)if(qe[Ee]){var Je=$e>>Ee,it=we>>Ee;s(W.mipmask&1<<Ee,"missing mipmap data");var et=qe[Ee];if(s(et.width===Je&&et.height===it,"invalid shape for mip images"),s(et.format===W.format&&et.internalformat===W.internalformat&&et.type===W.type,"incompatible type for mip image"),!et.compressed)if(et.data){var st=Math.ceil(Ye(et.type,Ae)*Je/et.unpackAlignment)*et.unpackAlignment;s(et.data.byteLength===st*it,"invalid data for image, buffer size is inconsistent with image format")}else et.element||et.copy}else I.genMipmaps||s((W.mipmask&1<<Ee)===0,"extra mipmap data");W.compressed&&s(!I.genMipmaps,"mipmap generation for compressed images not supported")}function F(I,W,re,Ee){var $e=I.width,we=I.height,Ae=I.channels;s($e>0&&$e<=Ee.maxTextureSize&&we>0&&we<=Ee.maxTextureSize,"invalid texture shape"),s($e===we,"cube map must be square"),s(W.wrapS===B&&W.wrapT===B,"wrap mode not supported by cube map");for(var qe=0;qe<re.length;++qe){var Je=re[qe];s(Je.width===$e&&Je.height===we,"inconsistent cube map face shape"),W.genMipmaps&&(s(!Je.compressed,"can not generate mipmap for compressed textures"),s(Je.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var it=Je.images,et=0;et<16;++et){var st=it[et];if(st){var ht=$e>>et,Ze=we>>et;s(Je.mipmask&1<<et,"missing mipmap data"),s(st.width===ht&&st.height===Ze,"invalid shape for mip images"),s(st.format===I.format&&st.internalformat===I.internalformat&&st.type===I.type,"incompatible type for mip image"),st.compressed||(st.data?s(st.data.byteLength===ht*Ze*Math.max(Ye(st.type,Ae),st.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):st.element||st.copy)}}}}var k=n(s,{optional:G,raise:o,commandRaise:L,command:N,parameter:u,commandParameter:P,constructor:g,type:h,commandType:R,isTypedArray:f,nni:d,oneOf:v,shaderError:M,linkError:T,callSite:E,saveCommandRef:A,saveDrawInfo:O,framebufferFormat:D,guessCommand:w,texture2D:z,textureCube:F}),ue=0,ce=0,X=5,ae=6;function Ce(I,W){this.id=ue++,this.type=I,this.data=W}function ke(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ke(I){if(I.length===0)return[];var W=I.charAt(0),re=I.charAt(I.length-1);if(I.length>1&&W===re&&(W==='"'||W==="'"))return['"'+ke(I.substr(1,I.length-2))+'"'];var Ee=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);if(Ee)return Ke(I.substr(0,Ee.index)).concat(Ke(Ee[1])).concat(Ke(I.substr(Ee.index+Ee[0].length)));var $e=I.split(".");if($e.length===1)return['"'+ke(I)+'"'];for(var we=[],Ae=0;Ae<$e.length;++Ae)we=we.concat(Ke($e[Ae]));return we}function Et(I){return"["+Ke(I).join("][")+"]"}function jt(I,W){return new Ce(I,Et(W+""))}function kr(I){return typeof I=="function"&&!I._reglType||I instanceof Ce}function Qt(I,W){if(typeof I=="function")return new Ce(ce,I);if(typeof I=="number"||typeof I=="boolean")return new Ce(X,I);if(Array.isArray(I))return new Ce(ae,I.map((re,Ee)=>Qt(re,W+"["+Ee+"]")));if(I instanceof Ce)return I;k(!1,"invalid option type in uniform "+W)}var zr={DynamicVariable:Ce,define:jt,isDynamic:kr,unbox:Qt,accessor:Et},lr={next:typeof requestAnimationFrame=="function"?function(I){return requestAnimationFrame(I)}:function(I){return setTimeout(I,16)},cancel:typeof cancelAnimationFrame=="function"?function(I){return cancelAnimationFrame(I)}:clearTimeout},Lr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Zr(){var I={"":0},W=[""];return{id:function(re){var Ee=I[re];return Ee||(Ee=I[re]=W.length,W.push(re),Ee)},str:function(re){return W[re]}}}function mi(I,W,re){var Ee=document.createElement("canvas");n(Ee.style,{border:0,margin:0,padding:0,top:0,left:0}),I.appendChild(Ee),I===document.body&&(Ee.style.position="absolute",n(I.style,{margin:0,padding:0}));function $e(){var qe=window.innerWidth,Je=window.innerHeight;if(I!==document.body){var it=I.getBoundingClientRect();qe=it.right-it.left,Je=it.bottom-it.top}Ee.width=re*qe,Ee.height=re*Je,n(Ee.style,{width:qe+"px",height:Je+"px"})}var we;I!==document.body&&typeof ResizeObserver=="function"?(we=new ResizeObserver(function(){setTimeout($e)}),we.observe(I)):window.addEventListener("resize",$e,!1);function Ae(){we?we.disconnect():window.removeEventListener("resize",$e),I.removeChild(Ee)}return $e(),{canvas:Ee,onDestroy:Ae}}function Fr(I,W){function re(Ee){try{return I.getContext(Ee,W)}catch{return null}}return re("webgl")||re("experimental-webgl")||re("webgl-experimental")}function $n(I){return typeof I.nodeName=="string"&&typeof I.appendChild=="function"&&typeof I.getBoundingClientRect=="function"}function to(I){return typeof I.drawArrays=="function"||typeof I.drawElements=="function"}function Hn(I){return typeof I=="string"?I.split():(k(Array.isArray(I),"invalid extension array"),I)}function js(I){return typeof I=="string"?(k(typeof document<"u","not supported outside of DOM"),document.querySelector(I)):I}function Mc(I){var W=I||{},re,Ee,$e,we,Ae={},qe=[],Je=[],it=typeof window>"u"?1:window.devicePixelRatio,et=!1,st=function(lt){lt&&k.raise(lt)},ht=function(){};if(typeof W=="string"?(k(typeof document<"u","selector queries only supported in DOM enviroments"),re=document.querySelector(W),k(re,"invalid query string for element")):typeof W=="object"?$n(W)?re=W:to(W)?(we=W,$e=we.canvas):(k.constructor(W),"gl"in W?we=W.gl:"canvas"in W?$e=js(W.canvas):"container"in W&&(Ee=js(W.container)),"attributes"in W&&(Ae=W.attributes,k.type(Ae,"object","invalid context attributes")),"extensions"in W&&(qe=Hn(W.extensions)),"optionalExtensions"in W&&(Je=Hn(W.optionalExtensions)),"onDone"in W&&(k.type(W.onDone,"function","invalid or missing onDone callback"),st=W.onDone),"profile"in W&&(et=!!W.profile),"pixelRatio"in W&&(it=+W.pixelRatio,k(it>0,"invalid pixel ratio"))):k.raise("invalid arguments to regl"),re&&(re.nodeName.toLowerCase()==="canvas"?$e=re:Ee=re),!we){if(!$e){k(typeof document<"u","must manually specify webgl context outside of DOM environments");var Ze=mi(Ee||document.body,st,it);if(!Ze)return null;$e=Ze.canvas,ht=Ze.onDestroy}Ae.premultipliedAlpha===void 0&&(Ae.premultipliedAlpha=!0),we=Fr($e,Ae)}return we?{gl:we,canvas:$e,container:Ee,extensions:qe,optionalExtensions:Je,pixelRatio:it,profile:et,onDone:st,onDestroy:ht}:(ht(),st("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Cc(I,W){var re={};function Ee(Ae){k.type(Ae,"string","extension name must be string");var qe=Ae.toLowerCase(),Je;try{Je=re[qe]=I.getExtension(qe)}catch{}return!!Je}for(var $e=0;$e<W.extensions.length;++$e){var we=W.extensions[$e];if(!Ee(we))return W.onDestroy(),W.onDone('"'+we+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return W.optionalExtensions.forEach(Ee),{extensions:re,restore:function(){Object.keys(re).forEach(function(Ae){if(re[Ae]&&!Ee(Ae))throw new Error("(regl): error restoring extension "+Ae)})}}}function ui(I,W){for(var re=Array(I),Ee=0;Ee<I;++Ee)re[Ee]=W(Ee);return re}var ls=5120,ql=5121,Ac=5122,Tc=5123,Oc=5124,ro=5125,zn=5126;function no(I){for(var W=16;W<=1<<28;W*=16)if(I<=W)return W;return 0}function Zt(I){var W,re;return W=(I>65535)<<4,I>>>=W,re=(I>255)<<3,I>>>=re,W|=re,re=(I>15)<<2,I>>>=re,W|=re,re=(I>3)<<1,I>>>=re,W|=re,W|I>>1}function ln(){var I=ui(8,function(){return[]});function W(we){var Ae=no(we),qe=I[Zt(Ae)>>2];return qe.length>0?qe.pop():new ArrayBuffer(Ae)}function re(we){I[Zt(we.byteLength)>>2].push(we)}function Ee(we,Ae){var qe=null;switch(we){case ls:qe=new Int8Array(W(Ae),0,Ae);break;case ql:qe=new Uint8Array(W(Ae),0,Ae);break;case Ac:qe=new Int16Array(W(2*Ae),0,Ae);break;case Tc:qe=new Uint16Array(W(2*Ae),0,Ae);break;case Oc:qe=new Int32Array(W(4*Ae),0,Ae);break;case ro:qe=new Uint32Array(W(4*Ae),0,Ae);break;case zn:qe=new Float32Array(W(4*Ae),0,Ae);break;default:return null}return qe.length!==Ae?qe.subarray(0,Ae):qe}function $e(we){re(we.buffer)}return{alloc:W,free:re,allocType:Ee,freeType:$e}}var Ut=ln();Ut.zero=ln();var Mn=3408,yi=3410,Zl=3411,Ql=3412,us=3413,Us=3414,Jl=3415,eu=33901,w2=33902,E2=3379,_2=3386,S2=34921,M2=36347,C2=36348,A2=35661,T2=35660,O2=34930,k2=36349,I2=34076,L2=34024,Ate=7936,Tte=7937,Ote=7938,kte=35724,Ite=34047,Lte=36063,Pte=34852,Sy=3553,ID=34067,Dte=34069,Nte=33984,Fp=6408,P2=5126,LD=5121,D2=36160,Rte=36053,Bte=36064,Fte=16384,$te=function(I,W){var re=1;W.ext_texture_filter_anisotropic&&(re=I.getParameter(Ite));var Ee=1,$e=1;W.webgl_draw_buffers&&(Ee=I.getParameter(Pte),$e=I.getParameter(Lte));var we=!!W.oes_texture_float;if(we){var Ae=I.createTexture();I.bindTexture(Sy,Ae),I.texImage2D(Sy,0,Fp,1,1,0,Fp,P2,null);var qe=I.createFramebuffer();if(I.bindFramebuffer(D2,qe),I.framebufferTexture2D(D2,Bte,Sy,Ae,0),I.bindTexture(Sy,null),I.checkFramebufferStatus(D2)!==Rte)we=!1;else{I.viewport(0,0,1,1),I.clearColor(1,0,0,1),I.clear(Fte);var Je=Ut.allocType(P2,4);I.readPixels(0,0,1,1,Fp,P2,Je),I.getError()?we=!1:(I.deleteFramebuffer(qe),I.deleteTexture(Ae),we=Je[0]===1),Ut.freeType(Je)}}var it=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),et=!0;if(!it){var st=I.createTexture(),ht=Ut.allocType(LD,36);I.activeTexture(Nte),I.bindTexture(ID,st),I.texImage2D(Dte,0,Fp,3,3,0,Fp,LD,ht),Ut.freeType(ht),I.bindTexture(ID,null),I.deleteTexture(st),et=!I.getError()}return{colorBits:[I.getParameter(yi),I.getParameter(Zl),I.getParameter(Ql),I.getParameter(us)],depthBits:I.getParameter(Us),stencilBits:I.getParameter(Jl),subpixelBits:I.getParameter(Mn),extensions:Object.keys(W).filter(function(Ze){return!!W[Ze]}),maxAnisotropic:re,maxDrawbuffers:Ee,maxColorAttachments:$e,pointSizeDims:I.getParameter(eu),lineWidthDims:I.getParameter(w2),maxViewportDims:I.getParameter(_2),maxCombinedTextureUnits:I.getParameter(A2),maxCubeMapSize:I.getParameter(I2),maxRenderbufferSize:I.getParameter(L2),maxTextureUnits:I.getParameter(O2),maxTextureSize:I.getParameter(E2),maxAttributes:I.getParameter(S2),maxVertexUniforms:I.getParameter(M2),maxVertexTextureUnits:I.getParameter(T2),maxVaryingVectors:I.getParameter(C2),maxFragmentUniforms:I.getParameter(k2),glsl:I.getParameter(kte),renderer:I.getParameter(Tte),vendor:I.getParameter(Ate),version:I.getParameter(Ote),readFloat:we,npotTextureCube:et}};function fs(I){return!!I&&typeof I=="object"&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&typeof I.offset=="number"&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||t(I.data))}var io=function(I){return Object.keys(I).map(function(W){return I[W]})},My={shape:Ute,flatten:jte};function zte(I,W,re){for(var Ee=0;Ee<W;++Ee)re[Ee]=I[Ee]}function Gte(I,W,re,Ee){for(var $e=0,we=0;we<W;++we)for(var Ae=I[we],qe=0;qe<re;++qe)Ee[$e++]=Ae[qe]}function PD(I,W,re,Ee,$e,we){for(var Ae=we,qe=0;qe<W;++qe)for(var Je=I[qe],it=0;it<re;++it)for(var et=Je[it],st=0;st<Ee;++st)$e[Ae++]=et[st]}function DD(I,W,re,Ee,$e){for(var we=1,Ae=re+1;Ae<W.length;++Ae)we*=W[Ae];var qe=W[re];if(W.length-re===4){var Je=W[re+1],it=W[re+2],et=W[re+3];for(Ae=0;Ae<qe;++Ae)PD(I[Ae],Je,it,et,Ee,$e),$e+=we}else for(Ae=0;Ae<qe;++Ae)DD(I[Ae],W,re+1,Ee,$e),$e+=we}function jte(I,W,re,Ee){var $e=1;if(W.length)for(var we=0;we<W.length;++we)$e*=W[we];else $e=0;var Ae=Ee||Ut.allocType(re,$e);switch(W.length){case 0:break;case 1:zte(I,W[0],Ae);break;case 2:Gte(I,W[0],W[1],Ae);break;case 3:PD(I,W[0],W[1],W[2],Ae,0);break;default:DD(I,W,0,Ae,0)}return Ae}function Ute(I){for(var W=[],re=I;re.length;re=re[0])W.push(re.length);return W}var N2={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Wte=5120,Vte=5122,Hte=5124,Xte=5121,Yte=5123,Kte=5125,qte=5126,Zte=5126,kc={int8:Wte,int16:Vte,int32:Hte,uint8:Xte,uint16:Yte,uint32:Kte,float:qte,float32:Zte},Qte=35048,Jte=35040,Cy={dynamic:Qte,stream:Jte,static:35044},R2=My.flatten,ND=My.shape,RD=35044,ere=35040,B2=5121,F2=5126,Zu=[];Zu[5120]=1,Zu[5122]=2,Zu[5124]=4,Zu[5121]=1,Zu[5123]=2,Zu[5125]=4,Zu[5126]=4;function Ay(I){return N2[Object.prototype.toString.call(I)]|0}function BD(I,W){for(var re=0;re<W.length;++re)I[re]=W[re]}function FD(I,W,re,Ee,$e,we,Ae){for(var qe=0,Je=0;Je<re;++Je)for(var it=0;it<Ee;++it)I[qe++]=W[$e*Je+we*it+Ae]}function tre(I,W,re,Ee){var $e=0,we={};function Ae(ge){this.id=$e++,this.buffer=I.createBuffer(),this.type=ge,this.usage=RD,this.byteLength=0,this.dimension=1,this.dtype=B2,this.persistentData=null,re.profile&&(this.stats={size:0})}Ae.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)},Ae.prototype.destroy=function(){ht(this)};var qe=[];function Je(ge,Te){var nt=qe.pop();return nt||(nt=new Ae(ge)),nt.bind(),st(nt,Te,ere,0,1,!1),nt}function it(ge){qe.push(ge)}function et(ge,Te,nt){ge.byteLength=Te.byteLength,I.bufferData(ge.type,Te,nt)}function st(ge,Te,nt,pt,je,wt){var He;if(ge.usage=nt,Array.isArray(Te)){if(ge.dtype=pt||F2,Te.length>0){var ut;if(Array.isArray(Te[0])){He=ND(Te);for(var We=1,ft=1;ft<He.length;++ft)We*=He[ft];ge.dimension=We,ut=R2(Te,He,ge.dtype),et(ge,ut,nt),wt?ge.persistentData=ut:Ut.freeType(ut)}else if(typeof Te[0]=="number"){ge.dimension=je;var Bt=Ut.allocType(ge.dtype,Te.length);BD(Bt,Te),et(ge,Bt,nt),wt?ge.persistentData=Bt:Ut.freeType(Bt)}else t(Te[0])?(ge.dimension=Te[0].length,ge.dtype=pt||Ay(Te[0])||F2,ut=R2(Te,[Te.length,Te[0].length],ge.dtype),et(ge,ut,nt),wt?ge.persistentData=ut:Ut.freeType(ut)):k.raise("invalid buffer data")}}else if(t(Te))ge.dtype=pt||Ay(Te),ge.dimension=je,et(ge,Te,nt),wt&&(ge.persistentData=new Uint8Array(new Uint8Array(Te.buffer)));else if(fs(Te)){He=Te.shape;var tr=Te.stride,dt=Te.offset,ot=0,Ge=0,Kt=0,ur=0;He.length===1?(ot=He[0],Ge=1,Kt=tr[0],ur=0):He.length===2?(ot=He[0],Ge=He[1],Kt=tr[0],ur=tr[1]):k.raise("invalid shape"),ge.dtype=pt||Ay(Te.data)||F2,ge.dimension=Ge;var St=Ut.allocType(ge.dtype,ot*Ge);FD(St,Te.data,ot,Ge,Kt,ur,dt),et(ge,St,nt),wt?ge.persistentData=St:Ut.freeType(St)}else Te instanceof ArrayBuffer?(ge.dtype=B2,ge.dimension=je,et(ge,Te,nt),wt&&(ge.persistentData=new Uint8Array(new Uint8Array(Te)))):k.raise("invalid buffer data")}function ht(ge){W.bufferCount--,Ee(ge);var Te=ge.buffer;k(Te,"buffer must not be deleted already"),I.deleteBuffer(Te),ge.buffer=null,delete we[ge.id]}function Ze(ge,Te,nt,pt){W.bufferCount++;var je=new Ae(Te);we[je.id]=je;function wt(We){var ft=RD,Bt=null,tr=0,dt=0,ot=1;return Array.isArray(We)||t(We)||fs(We)||We instanceof ArrayBuffer?Bt=We:typeof We=="number"?tr=We|0:We&&(k.type(We,"object","buffer arguments must be an object, a number or an array"),"data"in We&&(k(Bt===null||Array.isArray(Bt)||t(Bt)||fs(Bt),"invalid data for buffer"),Bt=We.data),"usage"in We&&(k.parameter(We.usage,Cy,"invalid buffer usage"),ft=Cy[We.usage]),"type"in We&&(k.parameter(We.type,kc,"invalid buffer type"),dt=kc[We.type]),"dimension"in We&&(k.type(We.dimension,"number","invalid dimension"),ot=We.dimension|0),"length"in We&&(k.nni(tr,"buffer length must be a nonnegative integer"),tr=We.length|0)),je.bind(),Bt?st(je,Bt,ft,dt,ot,pt):(tr&&I.bufferData(je.type,tr,ft),je.dtype=dt||B2,je.usage=ft,je.dimension=ot,je.byteLength=tr),re.profile&&(je.stats.size=je.byteLength*Zu[je.dtype]),wt}function He(We,ft){k(ft+We.byteLength<=je.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+We.byteLength+" starting from offset "+ft+" to a buffer of size "+je.byteLength),I.bufferSubData(je.type,ft,We)}function ut(We,ft){var Bt=(ft||0)|0,tr;if(je.bind(),t(We)||We instanceof ArrayBuffer)He(We,Bt);else if(Array.isArray(We)){if(We.length>0)if(typeof We[0]=="number"){var dt=Ut.allocType(je.dtype,We.length);BD(dt,We),He(dt,Bt),Ut.freeType(dt)}else if(Array.isArray(We[0])||t(We[0])){tr=ND(We);var ot=R2(We,tr,je.dtype);He(ot,Bt),Ut.freeType(ot)}else k.raise("invalid buffer data")}else if(fs(We)){tr=We.shape;var Ge=We.stride,Kt=0,ur=0,St=0,yr=0;tr.length===1?(Kt=tr[0],ur=1,St=Ge[0],yr=0):tr.length===2?(Kt=tr[0],ur=tr[1],St=Ge[0],yr=Ge[1]):k.raise("invalid shape");var rr=Array.isArray(We.data)?je.dtype:Ay(We.data),vr=Ut.allocType(rr,Kt*ur);FD(vr,We.data,Kt,ur,St,yr,We.offset),He(vr,Bt),Ut.freeType(vr)}else k.raise("invalid data for buffer subdata");return wt}return nt||wt(ge),wt._reglType="buffer",wt._buffer=je,wt.subdata=ut,re.profile&&(wt.stats=je.stats),wt.destroy=function(){ht(je)},wt}function lt(){io(we).forEach(function(ge){ge.buffer=I.createBuffer(),I.bindBuffer(ge.type,ge.buffer),I.bufferData(ge.type,ge.persistentData||ge.byteLength,ge.usage)})}return re.profile&&(W.getTotalBufferSize=function(){var ge=0;return Object.keys(we).forEach(function(Te){ge+=we[Te].stats.size}),ge}),{create:Ze,createStream:Je,destroyStream:it,clear:function(){io(we).forEach(ht),qe.forEach(ht)},getBuffer:function(ge){return ge&&ge._buffer instanceof Ae?ge._buffer:null},restore:lt,_initBuffer:st}}var rre=0,nre=0,ire=1,are=1,ore=4,sre=4,pd={points:rre,point:nre,lines:ire,line:are,triangles:ore,triangle:sre,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},lre=0,ure=1,$p=4,fre=5120,gd=5121,$D=5122,md=5123,zD=5124,Ic=5125,$2=34963,cre=35040,hre=35044;function dre(I,W,re,Ee){var $e={},we=0,Ae={uint8:gd,uint16:md};W.oes_element_index_uint&&(Ae.uint32=Ic);function qe(lt){this.id=we++,$e[this.id]=this,this.buffer=lt,this.primType=$p,this.vertCount=0,this.type=0}qe.prototype.bind=function(){this.buffer.bind()};var Je=[];function it(lt){var ge=Je.pop();return ge||(ge=new qe(re.create(null,$2,!0,!1)._buffer)),st(ge,lt,cre,-1,-1,0,0),ge}function et(lt){Je.push(lt)}function st(lt,ge,Te,nt,pt,je,wt){lt.buffer.bind();var He;if(ge){var ut=wt;!wt&&(!t(ge)||fs(ge)&&!t(ge.data))&&(ut=W.oes_element_index_uint?Ic:md),re._initBuffer(lt.buffer,ge,Te,ut,3)}else I.bufferData($2,je,Te),lt.buffer.dtype=He||gd,lt.buffer.usage=Te,lt.buffer.dimension=3,lt.buffer.byteLength=je;if(He=wt,!wt){switch(lt.buffer.dtype){case gd:case fre:He=gd;break;case md:case $D:He=md;break;case Ic:case zD:He=Ic;break;default:k.raise("unsupported type for element array")}lt.buffer.dtype=He}lt.type=He,k(He!==Ic||!!W.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var We=pt;We<0&&(We=lt.buffer.byteLength,He===md?We>>=1:He===Ic&&(We>>=2)),lt.vertCount=We;var ft=nt;if(nt<0){ft=$p;var Bt=lt.buffer.dimension;Bt===1&&(ft=lre),Bt===2&&(ft=ure),Bt===3&&(ft=$p)}lt.primType=ft}function ht(lt){Ee.elementsCount--,k(lt.buffer!==null,"must not double destroy elements"),delete $e[lt.id],lt.buffer.destroy(),lt.buffer=null}function Ze(lt,ge){var Te=re.create(null,$2,!0),nt=new qe(Te._buffer);Ee.elementsCount++;function pt(je){if(!je)Te(),nt.primType=$p,nt.vertCount=0,nt.type=gd;else if(typeof je=="number")Te(je),nt.primType=$p,nt.vertCount=je|0,nt.type=gd;else{var wt=null,He=hre,ut=-1,We=-1,ft=0,Bt=0;Array.isArray(je)||t(je)||fs(je)?wt=je:(k.type(je,"object","invalid arguments for elements"),"data"in je&&(wt=je.data,k(Array.isArray(wt)||t(wt)||fs(wt),"invalid data for element buffer")),"usage"in je&&(k.parameter(je.usage,Cy,"invalid element buffer usage"),He=Cy[je.usage]),"primitive"in je&&(k.parameter(je.primitive,pd,"invalid element buffer primitive"),ut=pd[je.primitive]),"count"in je&&(k(typeof je.count=="number"&&je.count>=0,"invalid vertex count for elements"),We=je.count|0),"type"in je&&(k.parameter(je.type,Ae,"invalid buffer type"),Bt=Ae[je.type]),"length"in je?ft=je.length|0:(ft=We,Bt===md||Bt===$D?ft*=2:(Bt===Ic||Bt===zD)&&(ft*=4))),st(nt,wt,He,ut,We,ft,Bt)}return pt}return pt(lt),pt._reglType="elements",pt._elements=nt,pt.subdata=function(je,wt){return Te.subdata(je,wt),pt},pt.destroy=function(){ht(nt)},pt}return{create:Ze,createStream:it,destroyStream:et,getElements:function(lt){return typeof lt=="function"&&lt._elements instanceof qe?lt._elements:null},clear:function(){io($e).forEach(ht)}}}var GD=new Float32Array(1),vre=new Uint32Array(GD.buffer),pre=5123;function jD(I){for(var W=Ut.allocType(pre,I.length),re=0;re<I.length;++re)if(isNaN(I[re]))W[re]=65535;else if(I[re]===1/0)W[re]=31744;else if(I[re]===-1/0)W[re]=64512;else{GD[0]=I[re];var Ee=vre[0],$e=Ee>>>31<<15,we=(Ee<<1>>>24)-127,Ae=Ee>>13&1023;if(we<-24)W[re]=$e;else if(we<-14){var qe=-14-we;W[re]=$e+(Ae+1024>>qe)}else we>15?W[re]=$e+31744:W[re]=$e+(we+15<<10)+Ae}return W}function Gn(I){return Array.isArray(I)||t(I)}var UD=function(I){return!(I&I-1)&&!!I},gre=34467,Ws=3553,z2=34067,Ty=34069,Lc=6408,G2=6406,Oy=6407,zp=6409,ky=6410,WD=32854,j2=32855,VD=36194,mre=32819,yre=32820,bre=33635,xre=34042,U2=6402,Iy=34041,W2=35904,V2=35906,yd=36193,H2=33776,X2=33777,Y2=33778,K2=33779,HD=35986,XD=35987,YD=34798,KD=35840,qD=35841,ZD=35842,QD=35843,JD=36196,bd=5121,q2=5123,Z2=5125,Gp=5126,wre=10242,Ere=10243,_re=10497,Q2=33071,Sre=33648,Mre=10240,Cre=10241,J2=9728,Are=9729,eS=9984,eN=9985,tN=9986,tS=9987,Tre=33170,Ly=4352,Ore=4353,kre=4354,Ire=34046,Lre=3317,Pre=37440,Dre=37441,Nre=37443,rN=37444,jp=33984,Rre=[eS,tN,eN,tS],Py=[0,zp,ky,Oy,Lc],ko={};ko[zp]=ko[G2]=ko[U2]=1,ko[Iy]=ko[ky]=2,ko[Oy]=ko[W2]=3,ko[Lc]=ko[V2]=4;function xd(I){return"[object "+I+"]"}var nN=xd("HTMLCanvasElement"),iN=xd("OffscreenCanvas"),aN=xd("CanvasRenderingContext2D"),oN=xd("ImageBitmap"),sN=xd("HTMLImageElement"),lN=xd("HTMLVideoElement"),Bre=Object.keys(N2).concat([nN,iN,aN,oN,sN,lN]),wd=[];wd[bd]=1,wd[Gp]=4,wd[yd]=2,wd[q2]=2,wd[Z2]=4;var Bi=[];Bi[WD]=2,Bi[j2]=2,Bi[VD]=2,Bi[Iy]=4,Bi[H2]=.5,Bi[X2]=.5,Bi[Y2]=1,Bi[K2]=1,Bi[HD]=.5,Bi[XD]=1,Bi[YD]=1,Bi[KD]=.5,Bi[qD]=.25,Bi[ZD]=.5,Bi[QD]=.25,Bi[JD]=.5;function uN(I){return Array.isArray(I)&&(I.length===0||typeof I[0]=="number")}function fN(I){if(!Array.isArray(I))return!1;var W=I.length;return!(W===0||!Gn(I[0]))}function Pc(I){return Object.prototype.toString.call(I)}function cN(I){return Pc(I)===nN}function hN(I){return Pc(I)===iN}function Fre(I){return Pc(I)===aN}function $re(I){return Pc(I)===oN}function zre(I){return Pc(I)===sN}function Gre(I){return Pc(I)===lN}function rS(I){if(!I)return!1;var W=Pc(I);return Bre.indexOf(W)>=0?!0:uN(I)||fN(I)||fs(I)}function dN(I){return N2[Object.prototype.toString.call(I)]|0}function jre(I,W){var re=W.length;switch(I.type){case bd:case q2:case Z2:case Gp:var Ee=Ut.allocType(I.type,re);Ee.set(W),I.data=Ee;break;case yd:I.data=jD(W);break;default:k.raise("unsupported texture type, must specify a typed array")}}function vN(I,W){return Ut.allocType(I.type===yd?Gp:I.type,W)}function pN(I,W){I.type===yd?(I.data=jD(W),Ut.freeType(W)):I.data=W}function Ure(I,W,re,Ee,$e,we){for(var Ae=I.width,qe=I.height,Je=I.channels,it=Ae*qe*Je,et=vN(I,it),st=0,ht=0;ht<qe;++ht)for(var Ze=0;Ze<Ae;++Ze)for(var lt=0;lt<Je;++lt)et[st++]=W[re*Ze+Ee*ht+$e*lt+we];pN(I,et)}function Dy(I,W,re,Ee,$e,we){var Ae;if(typeof Bi[I]<"u"?Ae=Bi[I]:Ae=ko[I]*wd[W],we&&(Ae*=6),$e){for(var qe=0,Je=re;Je>=1;)qe+=Ae*Je*Je,Je/=2;return qe}else return Ae*re*Ee}function Wre(I,W,re,Ee,$e,we,Ae){var qe={"don't care":Ly,"dont care":Ly,nice:kre,fast:Ore},Je={repeat:_re,clamp:Q2,mirror:Sre},it={nearest:J2,linear:Are},et=n({mipmap:tS,"nearest mipmap nearest":eS,"linear mipmap nearest":eN,"nearest mipmap linear":tN,"linear mipmap linear":tS},it),st={none:0,browser:rN},ht={uint8:bd,rgba4:mre,rgb565:bre,"rgb5 a1":yre},Ze={alpha:G2,luminance:zp,"luminance alpha":ky,rgb:Oy,rgba:Lc,rgba4:WD,"rgb5 a1":j2,rgb565:VD},lt={};W.ext_srgb&&(Ze.srgb=W2,Ze.srgba=V2),W.oes_texture_float&&(ht.float32=ht.float=Gp),W.oes_texture_half_float&&(ht.float16=ht["half float"]=yd),W.webgl_depth_texture&&(n(Ze,{depth:U2,"depth stencil":Iy}),n(ht,{uint16:q2,uint32:Z2,"depth stencil":xre})),W.webgl_compressed_texture_s3tc&&n(lt,{"rgb s3tc dxt1":H2,"rgba s3tc dxt1":X2,"rgba s3tc dxt3":Y2,"rgba s3tc dxt5":K2}),W.webgl_compressed_texture_atc&&n(lt,{"rgb atc":HD,"rgba atc explicit alpha":XD,"rgba atc interpolated alpha":YD}),W.webgl_compressed_texture_pvrtc&&n(lt,{"rgb pvrtc 4bppv1":KD,"rgb pvrtc 2bppv1":qD,"rgba pvrtc 4bppv1":ZD,"rgba pvrtc 2bppv1":QD}),W.webgl_compressed_texture_etc1&&(lt["rgb etc1"]=JD);var ge=Array.prototype.slice.call(I.getParameter(gre));Object.keys(lt).forEach(function(J){var Se=lt[J];ge.indexOf(Se)>=0&&(Ze[J]=Se)});var Te=Object.keys(Ze);re.textureFormats=Te;var nt=[];Object.keys(Ze).forEach(function(J){var Se=Ze[J];nt[Se]=J});var pt=[];Object.keys(ht).forEach(function(J){var Se=ht[J];pt[Se]=J});var je=[];Object.keys(it).forEach(function(J){var Se=it[J];je[Se]=J});var wt=[];Object.keys(et).forEach(function(J){var Se=et[J];wt[Se]=J});var He=[];Object.keys(Je).forEach(function(J){var Se=Je[J];He[Se]=J});var ut=Te.reduce(function(J,Se){var xe=Ze[Se];return xe===zp||xe===G2||xe===zp||xe===ky||xe===U2||xe===Iy||W.ext_srgb&&(xe===W2||xe===V2)?J[xe]=xe:xe===j2||Se.indexOf("rgba")>=0?J[xe]=Lc:J[xe]=Oy,J},{});function We(){this.internalformat=Lc,this.format=Lc,this.type=bd,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=rN,this.width=0,this.height=0,this.channels=0}function ft(J,Se){J.internalformat=Se.internalformat,J.format=Se.format,J.type=Se.type,J.compressed=Se.compressed,J.premultiplyAlpha=Se.premultiplyAlpha,J.flipY=Se.flipY,J.unpackAlignment=Se.unpackAlignment,J.colorSpace=Se.colorSpace,J.width=Se.width,J.height=Se.height,J.channels=Se.channels}function Bt(J,Se){if(!(typeof Se!="object"||!Se)){if("premultiplyAlpha"in Se&&(k.type(Se.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),J.premultiplyAlpha=Se.premultiplyAlpha),"flipY"in Se&&(k.type(Se.flipY,"boolean","invalid texture flip"),J.flipY=Se.flipY),"alignment"in Se&&(k.oneOf(Se.alignment,[1,2,4,8],"invalid texture unpack alignment"),J.unpackAlignment=Se.alignment),"colorSpace"in Se&&(k.parameter(Se.colorSpace,st,"invalid colorSpace"),J.colorSpace=st[Se.colorSpace]),"type"in Se){var xe=Se.type;k(W.oes_texture_float||!(xe==="float"||xe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),k(W.oes_texture_half_float||!(xe==="half float"||xe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),k(W.webgl_depth_texture||!(xe==="uint16"||xe==="uint32"||xe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(xe,ht,"invalid texture type"),J.type=ht[xe]}var _t=J.width,br=J.height,q=J.channels,j=!1;"shape"in Se?(k(Array.isArray(Se.shape)&&Se.shape.length>=2,"shape must be an array"),_t=Se.shape[0],br=Se.shape[1],Se.shape.length===3&&(q=Se.shape[2],k(q>0&&q<=4,"invalid number of channels"),j=!0),k(_t>=0&&_t<=re.maxTextureSize,"invalid width"),k(br>=0&&br<=re.maxTextureSize,"invalid height")):("radius"in Se&&(_t=br=Se.radius,k(_t>=0&&_t<=re.maxTextureSize,"invalid radius")),"width"in Se&&(_t=Se.width,k(_t>=0&&_t<=re.maxTextureSize,"invalid width")),"height"in Se&&(br=Se.height,k(br>=0&&br<=re.maxTextureSize,"invalid height")),"channels"in Se&&(q=Se.channels,k(q>0&&q<=4,"invalid number of channels"),j=!0)),J.width=_t|0,J.height=br|0,J.channels=q|0;var oe=!1;if("format"in Se){var pe=Se.format;k(W.webgl_depth_texture||!(pe==="depth"||pe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(pe,Ze,"invalid texture format");var me=J.internalformat=Ze[pe];J.format=ut[me],pe in ht&&("type"in Se||(J.type=ht[pe])),pe in lt&&(J.compressed=!0),oe=!0}!j&&oe?J.channels=ko[J.format]:j&&!oe?J.channels!==Py[J.format]&&(J.format=J.internalformat=Py[J.channels]):oe&&j&&k(J.channels===ko[J.format],"number of channels inconsistent with specified format")}}function tr(J){I.pixelStorei(Pre,J.flipY),I.pixelStorei(Dre,J.premultiplyAlpha),I.pixelStorei(Nre,J.colorSpace),I.pixelStorei(Lre,J.unpackAlignment)}function dt(){We.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ot(J,Se){var xe=null;if(rS(Se)?xe=Se:Se&&(k.type(Se,"object","invalid pixel data type"),Bt(J,Se),"x"in Se&&(J.xOffset=Se.x|0),"y"in Se&&(J.yOffset=Se.y|0),rS(Se.data)&&(xe=Se.data)),k(!J.compressed||xe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Se.copy){k(!xe,"can not specify copy and data field for the same texture");var _t=$e.viewportWidth,br=$e.viewportHeight;J.width=J.width||_t-J.xOffset,J.height=J.height||br-J.yOffset,J.needsCopy=!0,k(J.xOffset>=0&&J.xOffset<_t&&J.yOffset>=0&&J.yOffset<br&&J.width>0&&J.width<=_t&&J.height>0&&J.height<=br,"copy texture read out of bounds")}else if(!xe)J.width=J.width||1,J.height=J.height||1,J.channels=J.channels||4;else if(t(xe))J.channels=J.channels||4,J.data=xe,!("type"in Se)&&J.type===bd&&(J.type=dN(xe));else if(uN(xe))J.channels=J.channels||4,jre(J,xe),J.alignment=1,J.needsFree=!0;else if(fs(xe)){var q=xe.data;!Array.isArray(q)&&J.type===bd&&(J.type=dN(q));var j=xe.shape,oe=xe.stride,pe,me,fe,le,he,Z;j.length===3?(fe=j[2],Z=oe[2]):(k(j.length===2,"invalid ndarray pixel data, must be 2 or 3D"),fe=1,Z=1),pe=j[0],me=j[1],le=oe[0],he=oe[1],J.alignment=1,J.width=pe,J.height=me,J.channels=fe,J.format=J.internalformat=Py[fe],J.needsFree=!0,Ure(J,q,le,he,Z,xe.offset)}else if(cN(xe)||hN(xe)||Fre(xe))cN(xe)||hN(xe)?J.element=xe:J.element=xe.canvas,J.width=J.element.width,J.height=J.element.height,J.channels=4;else if($re(xe))J.element=xe,J.width=xe.width,J.height=xe.height,J.channels=4;else if(zre(xe))J.element=xe,J.width=xe.naturalWidth,J.height=xe.naturalHeight,J.channels=4;else if(Gre(xe))J.element=xe,J.width=xe.videoWidth,J.height=xe.videoHeight,J.channels=4;else if(fN(xe)){var ie=J.width||xe[0].length,K=J.height||xe.length,ve=J.channels;Gn(xe[0][0])?ve=ve||xe[0][0].length:ve=ve||1;for(var be=My.shape(xe),Ne=1,ze=0;ze<be.length;++ze)Ne*=be[ze];var Oe=vN(J,Ne);My.flatten(xe,be,"",Oe),pN(J,Oe),J.alignment=1,J.width=ie,J.height=K,J.channels=ve,J.format=J.internalformat=Py[ve],J.needsFree=!0}J.type===Gp?k(re.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):J.type===yd&&k(re.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ge(J,Se,xe){var _t=J.element,br=J.data,q=J.internalformat,j=J.format,oe=J.type,pe=J.width,me=J.height;tr(J),_t?I.texImage2D(Se,xe,j,j,oe,_t):J.compressed?I.compressedTexImage2D(Se,xe,q,pe,me,0,br):J.needsCopy?(Ee(),I.copyTexImage2D(Se,xe,j,J.xOffset,J.yOffset,pe,me,0)):I.texImage2D(Se,xe,j,pe,me,0,j,oe,br||null)}function Kt(J,Se,xe,_t,br){var q=J.element,j=J.data,oe=J.internalformat,pe=J.format,me=J.type,fe=J.width,le=J.height;tr(J),q?I.texSubImage2D(Se,br,xe,_t,pe,me,q):J.compressed?I.compressedTexSubImage2D(Se,br,xe,_t,oe,fe,le,j):J.needsCopy?(Ee(),I.copyTexSubImage2D(Se,br,xe,_t,J.xOffset,J.yOffset,fe,le)):I.texSubImage2D(Se,br,xe,_t,fe,le,pe,me,j)}var ur=[];function St(){return ur.pop()||new dt}function yr(J){J.needsFree&&Ut.freeType(J.data),dt.call(J),ur.push(J)}function rr(){We.call(this),this.genMipmaps=!1,this.mipmapHint=Ly,this.mipmask=0,this.images=Array(16)}function vr(J,Se,xe){var _t=J.images[0]=St();J.mipmask=1,_t.width=J.width=Se,_t.height=J.height=xe,_t.channels=J.channels=4}function Gr(J,Se){var xe=null;if(rS(Se))xe=J.images[0]=St(),ft(xe,J),ot(xe,Se),J.mipmask=1;else if(Bt(J,Se),Array.isArray(Se.mipmap))for(var _t=Se.mipmap,br=0;br<_t.length;++br)xe=J.images[br]=St(),ft(xe,J),xe.width>>=br,xe.height>>=br,ot(xe,_t[br]),J.mipmask|=1<<br;else xe=J.images[0]=St(),ft(xe,J),ot(xe,Se),J.mipmask=1;ft(J,J.images[0]),J.compressed&&(J.internalformat===H2||J.internalformat===X2||J.internalformat===Y2||J.internalformat===K2)&&k(J.width%4===0&&J.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Yn(J,Se){for(var xe=J.images,_t=0;_t<xe.length;++_t){if(!xe[_t])return;Ge(xe[_t],Se,_t)}}var fi=[];function Sr(){var J=fi.pop()||new rr;We.call(J),J.mipmask=0;for(var Se=0;Se<16;++Se)J.images[Se]=null;return J}function ti(J){for(var Se=J.images,xe=0;xe<Se.length;++xe)Se[xe]&&yr(Se[xe]),Se[xe]=null;fi.push(J)}function cn(){this.minFilter=J2,this.magFilter=J2,this.wrapS=Q2,this.wrapT=Q2,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ly}function Kn(J,Se){if("min"in Se){var xe=Se.min;k.parameter(xe,et),J.minFilter=et[xe],Rre.indexOf(J.minFilter)>=0&&!("faces"in Se)&&(J.genMipmaps=!0)}if("mag"in Se){var _t=Se.mag;k.parameter(_t,it),J.magFilter=it[_t]}var br=J.wrapS,q=J.wrapT;if("wrap"in Se){var j=Se.wrap;typeof j=="string"?(k.parameter(j,Je),br=q=Je[j]):Array.isArray(j)&&(k.parameter(j[0],Je),k.parameter(j[1],Je),br=Je[j[0]],q=Je[j[1]])}else{if("wrapS"in Se){var oe=Se.wrapS;k.parameter(oe,Je),br=Je[oe]}if("wrapT"in Se){var pe=Se.wrapT;k.parameter(pe,Je),q=Je[pe]}}if(J.wrapS=br,J.wrapT=q,"anisotropic"in Se){var me=Se.anisotropic;k(typeof me=="number"&&me>=1&&me<=re.maxAnisotropic,"aniso samples must be between 1 and "),J.anisotropic=Se.anisotropic}if("mipmap"in Se){var fe=!1;switch(typeof Se.mipmap){case"string":k.parameter(Se.mipmap,qe,"invalid mipmap hint"),J.mipmapHint=qe[Se.mipmap],J.genMipmaps=!0,fe=!0;break;case"boolean":fe=J.genMipmaps=Se.mipmap;break;case"object":k(Array.isArray(Se.mipmap),"invalid mipmap type"),J.genMipmaps=!1,fe=!0;break;default:k.raise("invalid mipmap type")}fe&&!("min"in Se)&&(J.minFilter=eS)}}function ri(J,Se){I.texParameteri(Se,Cre,J.minFilter),I.texParameteri(Se,Mre,J.magFilter),I.texParameteri(Se,wre,J.wrapS),I.texParameteri(Se,Ere,J.wrapT),W.ext_texture_filter_anisotropic&&I.texParameteri(Se,Ire,J.anisotropic),J.genMipmaps&&(I.hint(Tre,J.mipmapHint),I.generateMipmap(Se))}var ni=0,bi={},Fi=re.maxTextureUnits,jn=Array(Fi).map(function(){return null});function fr(J){We.call(this),this.mipmask=0,this.internalformat=Lc,this.id=ni++,this.refCount=1,this.target=J,this.texture=I.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new cn,Ae.profile&&(this.stats={size:0})}function $i(J){I.activeTexture(jp),I.bindTexture(J.target,J.texture)}function Qr(){var J=jn[0];J?I.bindTexture(J.target,J.texture):I.bindTexture(Ws,null)}function Wt(J){var Se=J.texture;k(Se,"must not double destroy texture");var xe=J.unit,_t=J.target;xe>=0&&(I.activeTexture(jp+xe),I.bindTexture(_t,null),jn[xe]=null),I.deleteTexture(Se),J.texture=null,J.params=null,J.pixels=null,J.refCount=0,delete bi[J.id],we.textureCount--}n(fr.prototype,{bind:function(){var J=this;J.bindCount+=1;var Se=J.unit;if(Se<0){for(var xe=0;xe<Fi;++xe){var _t=jn[xe];if(_t){if(_t.bindCount>0)continue;_t.unit=-1}jn[xe]=J,Se=xe;break}Se>=Fi&&k.raise("insufficient number of texture units"),Ae.profile&&we.maxTextureUnits<Se+1&&(we.maxTextureUnits=Se+1),J.unit=Se,I.activeTexture(jp+Se),I.bindTexture(J.target,J.texture)}return Se},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Wt(this)}});function wr(J,Se){var xe=new fr(Ws);bi[xe.id]=xe,we.textureCount++;function _t(j,oe){var pe=xe.texInfo;cn.call(pe);var me=Sr();return typeof j=="number"?typeof oe=="number"?vr(me,j|0,oe|0):vr(me,j|0,j|0):j?(k.type(j,"object","invalid arguments to regl.texture"),Kn(pe,j),Gr(me,j)):vr(me,1,1),pe.genMipmaps&&(me.mipmask=(me.width<<1)-1),xe.mipmask=me.mipmask,ft(xe,me),k.texture2D(pe,me,re),xe.internalformat=me.internalformat,_t.width=me.width,_t.height=me.height,$i(xe),Yn(me,Ws),ri(pe,Ws),Qr(),ti(me),Ae.profile&&(xe.stats.size=Dy(xe.internalformat,xe.type,me.width,me.height,pe.genMipmaps,!1)),_t.format=nt[xe.internalformat],_t.type=pt[xe.type],_t.mag=je[pe.magFilter],_t.min=wt[pe.minFilter],_t.wrapS=He[pe.wrapS],_t.wrapT=He[pe.wrapT],_t}function br(j,oe,pe,me){k(!!j,"must specify image data");var fe=oe|0,le=pe|0,he=me|0,Z=St();return ft(Z,xe),Z.width=0,Z.height=0,ot(Z,j),Z.width=Z.width||(xe.width>>he)-fe,Z.height=Z.height||(xe.height>>he)-le,k(xe.type===Z.type&&xe.format===Z.format&&xe.internalformat===Z.internalformat,"incompatible format for texture.subimage"),k(fe>=0&&le>=0&&fe+Z.width<=xe.width&&le+Z.height<=xe.height,"texture.subimage write out of bounds"),k(xe.mipmask&1<<he,"missing mipmap data"),k(Z.data||Z.element||Z.needsCopy,"missing image data"),$i(xe),Kt(Z,Ws,fe,le,he),Qr(),yr(Z),_t}function q(j,oe){var pe=j|0,me=oe|0||pe;if(pe===xe.width&&me===xe.height)return _t;_t.width=xe.width=pe,_t.height=xe.height=me,$i(xe);for(var fe=0;xe.mipmask>>fe;++fe){var le=pe>>fe,he=me>>fe;if(!le||!he)break;I.texImage2D(Ws,fe,xe.format,le,he,0,xe.format,xe.type,null)}return Qr(),Ae.profile&&(xe.stats.size=Dy(xe.internalformat,xe.type,pe,me,!1,!1)),_t}return _t(J,Se),_t.subimage=br,_t.resize=q,_t._reglType="texture2d",_t._texture=xe,Ae.profile&&(_t.stats=xe.stats),_t.destroy=function(){xe.decRef()},_t}function Pr(J,Se,xe,_t,br,q){var j=new fr(z2);bi[j.id]=j,we.cubeCount++;var oe=new Array(6);function pe(le,he,Z,ie,K,ve){var be,Ne=j.texInfo;for(cn.call(Ne),be=0;be<6;++be)oe[be]=Sr();if(typeof le=="number"||!le){var ze=le|0||1;for(be=0;be<6;++be)vr(oe[be],ze,ze)}else if(typeof le=="object")if(he)Gr(oe[0],le),Gr(oe[1],he),Gr(oe[2],Z),Gr(oe[3],ie),Gr(oe[4],K),Gr(oe[5],ve);else if(Kn(Ne,le),Bt(j,le),"faces"in le){var Oe=le.faces;for(k(Array.isArray(Oe)&&Oe.length===6,"cube faces must be a length 6 array"),be=0;be<6;++be)k(typeof Oe[be]=="object"&&!!Oe[be],"invalid input for cube map face"),ft(oe[be],j),Gr(oe[be],Oe[be])}else for(be=0;be<6;++be)Gr(oe[be],le);else k.raise("invalid arguments to cube map");for(ft(j,oe[0]),re.npotTextureCube||k(UD(j.width)&&UD(j.height),"your browser does not support non power or two texture dimensions"),Ne.genMipmaps?j.mipmask=(oe[0].width<<1)-1:j.mipmask=oe[0].mipmask,k.textureCube(j,Ne,oe,re),j.internalformat=oe[0].internalformat,pe.width=oe[0].width,pe.height=oe[0].height,$i(j),be=0;be<6;++be)Yn(oe[be],Ty+be);for(ri(Ne,z2),Qr(),Ae.profile&&(j.stats.size=Dy(j.internalformat,j.type,pe.width,pe.height,Ne.genMipmaps,!0)),pe.format=nt[j.internalformat],pe.type=pt[j.type],pe.mag=je[Ne.magFilter],pe.min=wt[Ne.minFilter],pe.wrapS=He[Ne.wrapS],pe.wrapT=He[Ne.wrapT],be=0;be<6;++be)ti(oe[be]);return pe}function me(le,he,Z,ie,K){k(!!he,"must specify image data"),k(typeof le=="number"&&le===(le|0)&&le>=0&&le<6,"invalid face");var ve=Z|0,be=ie|0,Ne=K|0,ze=St();return ft(ze,j),ze.width=0,ze.height=0,ot(ze,he),ze.width=ze.width||(j.width>>Ne)-ve,ze.height=ze.height||(j.height>>Ne)-be,k(j.type===ze.type&&j.format===ze.format&&j.internalformat===ze.internalformat,"incompatible format for texture.subimage"),k(ve>=0&&be>=0&&ve+ze.width<=j.width&&be+ze.height<=j.height,"texture.subimage write out of bounds"),k(j.mipmask&1<<Ne,"missing mipmap data"),k(ze.data||ze.element||ze.needsCopy,"missing image data"),$i(j),Kt(ze,Ty+le,ve,be,Ne),Qr(),yr(ze),pe}function fe(le){var he=le|0;if(he!==j.width){pe.width=j.width=he,pe.height=j.height=he,$i(j);for(var Z=0;Z<6;++Z)for(var ie=0;j.mipmask>>ie;++ie)I.texImage2D(Ty+Z,ie,j.format,he>>ie,he>>ie,0,j.format,j.type,null);return Qr(),Ae.profile&&(j.stats.size=Dy(j.internalformat,j.type,pe.width,pe.height,!1,!0)),pe}}return pe(J,Se,xe,_t,br,q),pe.subimage=me,pe.resize=fe,pe._reglType="textureCube",pe._texture=j,Ae.profile&&(pe.stats=j.stats),pe.destroy=function(){j.decRef()},pe}function Un(){for(var J=0;J<Fi;++J)I.activeTexture(jp+J),I.bindTexture(Ws,null),jn[J]=null;io(bi).forEach(Wt),we.cubeCount=0,we.textureCount=0}Ae.profile&&(we.getTotalTextureSize=function(){var J=0;return Object.keys(bi).forEach(function(Se){J+=bi[Se].stats.size}),J});function Hs(){for(var J=0;J<Fi;++J){var Se=jn[J];Se&&(Se.bindCount=0,Se.unit=-1,jn[J]=null)}io(bi).forEach(function(xe){xe.texture=I.createTexture(),I.bindTexture(xe.target,xe.texture);for(var _t=0;_t<32;++_t)if(xe.mipmask&1<<_t)if(xe.target===Ws)I.texImage2D(Ws,_t,xe.internalformat,xe.width>>_t,xe.height>>_t,0,xe.internalformat,xe.type,null);else for(var br=0;br<6;++br)I.texImage2D(Ty+br,_t,xe.internalformat,xe.width>>_t,xe.height>>_t,0,xe.internalformat,xe.type,null);ri(xe.texInfo,xe.target)})}function zc(){for(var J=0;J<Fi;++J){var Se=jn[J];Se&&(Se.bindCount=0,Se.unit=-1,jn[J]=null),I.activeTexture(jp+J),I.bindTexture(Ws,null),I.bindTexture(z2,null)}}return{create2D:wr,createCube:Pr,clear:Un,getTexture:function(J){return null},restore:Hs,refresh:zc}}var Qu=36161,Ny=32854,gN=32855,mN=36194,yN=33189,bN=36168,xN=34041,wN=35907,EN=34836,_N=34842,SN=34843,cs=[];cs[Ny]=2,cs[gN]=2,cs[mN]=2,cs[yN]=2,cs[bN]=1,cs[xN]=4,cs[wN]=4,cs[EN]=16,cs[_N]=8,cs[SN]=6;function MN(I,W,re){return cs[I]*W*re}var Vre=function(I,W,re,Ee,$e){var we={rgba4:Ny,rgb565:mN,"rgb5 a1":gN,depth:yN,stencil:bN,"depth stencil":xN};W.ext_srgb&&(we.srgba=wN),W.ext_color_buffer_half_float&&(we.rgba16f=_N,we.rgb16f=SN),W.webgl_color_buffer_float&&(we.rgba32f=EN);var Ae=[];Object.keys(we).forEach(function(Ze){var lt=we[Ze];Ae[lt]=Ze});var qe=0,Je={};function it(Ze){this.id=qe++,this.refCount=1,this.renderbuffer=Ze,this.format=Ny,this.width=0,this.height=0,$e.profile&&(this.stats={size:0})}it.prototype.decRef=function(){--this.refCount<=0&&et(this)};function et(Ze){var lt=Ze.renderbuffer;k(lt,"must not double destroy renderbuffer"),I.bindRenderbuffer(Qu,null),I.deleteRenderbuffer(lt),Ze.renderbuffer=null,Ze.refCount=0,delete Je[Ze.id],Ee.renderbufferCount--}function st(Ze,lt){var ge=new it(I.createRenderbuffer());Je[ge.id]=ge,Ee.renderbufferCount++;function Te(pt,je){var wt=0,He=0,ut=Ny;if(typeof pt=="object"&&pt){var We=pt;if("shape"in We){var ft=We.shape;k(Array.isArray(ft)&&ft.length>=2,"invalid renderbuffer shape"),wt=ft[0]|0,He=ft[1]|0}else"radius"in We&&(wt=He=We.radius|0),"width"in We&&(wt=We.width|0),"height"in We&&(He=We.height|0);"format"in We&&(k.parameter(We.format,we,"invalid renderbuffer format"),ut=we[We.format])}else typeof pt=="number"?(wt=pt|0,typeof je=="number"?He=je|0:He=wt):pt?k.raise("invalid arguments to renderbuffer constructor"):wt=He=1;if(k(wt>0&&He>0&&wt<=re.maxRenderbufferSize&&He<=re.maxRenderbufferSize,"invalid renderbuffer size"),!(wt===ge.width&&He===ge.height&&ut===ge.format))return Te.width=ge.width=wt,Te.height=ge.height=He,ge.format=ut,I.bindRenderbuffer(Qu,ge.renderbuffer),I.renderbufferStorage(Qu,ut,wt,He),k(I.getError()===0,"invalid render buffer format"),$e.profile&&(ge.stats.size=MN(ge.format,ge.width,ge.height)),Te.format=Ae[ge.format],Te}function nt(pt,je){var wt=pt|0,He=je|0||wt;return wt===ge.width&&He===ge.height||(k(wt>0&&He>0&&wt<=re.maxRenderbufferSize&&He<=re.maxRenderbufferSize,"invalid renderbuffer size"),Te.width=ge.width=wt,Te.height=ge.height=He,I.bindRenderbuffer(Qu,ge.renderbuffer),I.renderbufferStorage(Qu,ge.format,wt,He),k(I.getError()===0,"invalid render buffer format"),$e.profile&&(ge.stats.size=MN(ge.format,ge.width,ge.height))),Te}return Te(Ze,lt),Te.resize=nt,Te._reglType="renderbuffer",Te._renderbuffer=ge,$e.profile&&(Te.stats=ge.stats),Te.destroy=function(){ge.decRef()},Te}$e.profile&&(Ee.getTotalRenderbufferSize=function(){var Ze=0;return Object.keys(Je).forEach(function(lt){Ze+=Je[lt].stats.size}),Ze});function ht(){io(Je).forEach(function(Ze){Ze.renderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(Qu,Ze.renderbuffer),I.renderbufferStorage(Qu,Ze.format,Ze.width,Ze.height)}),I.bindRenderbuffer(Qu,null)}return{create:st,clear:function(){io(Je).forEach(et)},restore:ht}},tu=36160,nS=36161,Dc=3553,Ry=34069,CN=36064,AN=36096,TN=36128,ON=33306,kN=36053,Hre=36054,Xre=36055,Yre=36057,Kre=36061,qre=36193,Zre=5121,Qre=5126,IN=6407,LN=6408,Jre=6402,ene=[IN,LN],iS=[];iS[LN]=4,iS[IN]=3;var By=[];By[Zre]=1,By[Qre]=4,By[qre]=2;var tne=32854,rne=32855,nne=36194,ine=33189,ane=36168,PN=34041,one=35907,sne=34836,lne=34842,une=34843,fne=[tne,rne,nne,one,lne,une,sne],Ed={};Ed[kN]="complete",Ed[Hre]="incomplete attachment",Ed[Yre]="incomplete dimensions",Ed[Xre]="incomplete, missing attachment",Ed[Kre]="unsupported";function cne(I,W,re,Ee,$e,we){var Ae={cur:null,next:null,dirty:!1,setFBO:null},qe=["rgba"],Je=["rgba4","rgb565","rgb5 a1"];W.ext_srgb&&Je.push("srgba"),W.ext_color_buffer_half_float&&Je.push("rgba16f","rgb16f"),W.webgl_color_buffer_float&&Je.push("rgba32f");var it=["uint8"];W.oes_texture_half_float&&it.push("half float","float16"),W.oes_texture_float&&it.push("float","float32");function et(dt,ot,Ge){this.target=dt,this.texture=ot,this.renderbuffer=Ge;var Kt=0,ur=0;ot?(Kt=ot.width,ur=ot.height):Ge&&(Kt=Ge.width,ur=Ge.height),this.width=Kt,this.height=ur}function st(dt){dt&&(dt.texture&&dt.texture._texture.decRef(),dt.renderbuffer&&dt.renderbuffer._renderbuffer.decRef())}function ht(dt,ot,Ge){if(dt)if(dt.texture){var Kt=dt.texture._texture,ur=Math.max(1,Kt.width),St=Math.max(1,Kt.height);k(ur===ot&&St===Ge,"inconsistent width/height for supplied texture"),Kt.refCount+=1}else{var yr=dt.renderbuffer._renderbuffer;k(yr.width===ot&&yr.height===Ge,"inconsistent width/height for renderbuffer"),yr.refCount+=1}}function Ze(dt,ot){ot&&(ot.texture?I.framebufferTexture2D(tu,dt,ot.target,ot.texture._texture.texture,0):I.framebufferRenderbuffer(tu,dt,nS,ot.renderbuffer._renderbuffer.renderbuffer))}function lt(dt){var ot=Dc,Ge=null,Kt=null,ur=dt;typeof dt=="object"&&(ur=dt.data,"target"in dt&&(ot=dt.target|0)),k.type(ur,"function","invalid attachment data");var St=ur._reglType;return St==="texture2d"?(Ge=ur,k(ot===Dc)):St==="textureCube"?(Ge=ur,k(ot>=Ry&&ot<Ry+6,"invalid cube map target")):St==="renderbuffer"?(Kt=ur,ot=nS):k.raise("invalid regl object for attachment"),new et(ot,Ge,Kt)}function ge(dt,ot,Ge,Kt,ur){if(Ge){var St=Ee.create2D({width:dt,height:ot,format:Kt,type:ur});return St._texture.refCount=0,new et(Dc,St,null)}else{var yr=$e.create({width:dt,height:ot,format:Kt});return yr._renderbuffer.refCount=0,new et(nS,null,yr)}}function Te(dt){return dt&&(dt.texture||dt.renderbuffer)}function nt(dt,ot,Ge){dt&&(dt.texture?dt.texture.resize(ot,Ge):dt.renderbuffer&&dt.renderbuffer.resize(ot,Ge),dt.width=ot,dt.height=Ge)}var pt=0,je={};function wt(){this.id=pt++,je[this.id]=this,this.framebuffer=I.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function He(dt){dt.colorAttachments.forEach(st),st(dt.depthAttachment),st(dt.stencilAttachment),st(dt.depthStencilAttachment)}function ut(dt){var ot=dt.framebuffer;k(ot,"must not double destroy framebuffer"),I.deleteFramebuffer(ot),dt.framebuffer=null,we.framebufferCount--,delete je[dt.id]}function We(dt){var ot;I.bindFramebuffer(tu,dt.framebuffer);var Ge=dt.colorAttachments;for(ot=0;ot<Ge.length;++ot)Ze(CN+ot,Ge[ot]);for(ot=Ge.length;ot<re.maxColorAttachments;++ot)I.framebufferTexture2D(tu,CN+ot,Dc,null,0);I.framebufferTexture2D(tu,ON,Dc,null,0),I.framebufferTexture2D(tu,AN,Dc,null,0),I.framebufferTexture2D(tu,TN,Dc,null,0),Ze(AN,dt.depthAttachment),Ze(TN,dt.stencilAttachment),Ze(ON,dt.depthStencilAttachment);var Kt=I.checkFramebufferStatus(tu);!I.isContextLost()&&Kt!==kN&&k.raise("framebuffer configuration not supported, status = "+Ed[Kt]),I.bindFramebuffer(tu,Ae.next?Ae.next.framebuffer:null),Ae.cur=Ae.next,I.getError()}function ft(dt,ot){var Ge=new wt;we.framebufferCount++;function Kt(St,yr){var rr;k(Ae.next!==Ge,"can not update framebuffer which is currently in use");var vr=0,Gr=0,Yn=!0,fi=!0,Sr=null,ti=!0,cn="rgba",Kn="uint8",ri=1,ni=null,bi=null,Fi=null,jn=!1;if(typeof St=="number")vr=St|0,Gr=yr|0||vr;else if(!St)vr=Gr=1;else{k.type(St,"object","invalid arguments for framebuffer");var fr=St;if("shape"in fr){var $i=fr.shape;k(Array.isArray($i)&&$i.length>=2,"invalid shape for framebuffer"),vr=$i[0],Gr=$i[1]}else"radius"in fr&&(vr=Gr=fr.radius),"width"in fr&&(vr=fr.width),"height"in fr&&(Gr=fr.height);("color"in fr||"colors"in fr)&&(Sr=fr.color||fr.colors,Array.isArray(Sr)&&k(Sr.length===1||W.webgl_draw_buffers,"multiple render targets not supported")),Sr||("colorCount"in fr&&(ri=fr.colorCount|0,k(ri>0,"invalid color buffer count")),"colorTexture"in fr&&(ti=!!fr.colorTexture,cn="rgba4"),"colorType"in fr&&(Kn=fr.colorType,ti?(k(W.oes_texture_float||!(Kn==="float"||Kn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k(W.oes_texture_half_float||!(Kn==="half float"||Kn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Kn==="half float"||Kn==="float16"?(k(W.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),cn="rgba16f"):(Kn==="float"||Kn==="float32")&&(k(W.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),cn="rgba32f"),k.oneOf(Kn,it,"invalid color type")),"colorFormat"in fr&&(cn=fr.colorFormat,qe.indexOf(cn)>=0?ti=!0:Je.indexOf(cn)>=0?ti=!1:ti?k.oneOf(fr.colorFormat,qe,"invalid color format for texture"):k.oneOf(fr.colorFormat,Je,"invalid color format for renderbuffer"))),("depthTexture"in fr||"depthStencilTexture"in fr)&&(jn=!!(fr.depthTexture||fr.depthStencilTexture),k(!jn||W.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in fr&&(typeof fr.depth=="boolean"?Yn=fr.depth:(ni=fr.depth,fi=!1)),"stencil"in fr&&(typeof fr.stencil=="boolean"?fi=fr.stencil:(bi=fr.stencil,Yn=!1)),"depthStencil"in fr&&(typeof fr.depthStencil=="boolean"?Yn=fi=fr.depthStencil:(Fi=fr.depthStencil,Yn=!1,fi=!1))}var Qr=null,Wt=null,wr=null,Pr=null;if(Array.isArray(Sr))Qr=Sr.map(lt);else if(Sr)Qr=[lt(Sr)];else for(Qr=new Array(ri),rr=0;rr<ri;++rr)Qr[rr]=ge(vr,Gr,ti,cn,Kn);k(W.webgl_draw_buffers||Qr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),k(Qr.length<=re.maxColorAttachments,"too many color attachments, not supported"),vr=vr||Qr[0].width,Gr=Gr||Qr[0].height,ni?Wt=lt(ni):Yn&&!fi&&(Wt=ge(vr,Gr,jn,"depth","uint32")),bi?wr=lt(bi):fi&&!Yn&&(wr=ge(vr,Gr,!1,"stencil","uint8")),Fi?Pr=lt(Fi):!ni&&!bi&&fi&&Yn&&(Pr=ge(vr,Gr,jn,"depth stencil","depth stencil")),k(!!ni+!!bi+!!Fi<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Un=null;for(rr=0;rr<Qr.length;++rr)if(ht(Qr[rr],vr,Gr),k(!Qr[rr]||Qr[rr].texture&&ene.indexOf(Qr[rr].texture._texture.format)>=0||Qr[rr].renderbuffer&&fne.indexOf(Qr[rr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+rr+" is invalid"),Qr[rr]&&Qr[rr].texture){var Hs=iS[Qr[rr].texture._texture.format]*By[Qr[rr].texture._texture.type];Un===null?Un=Hs:k(Un===Hs,"all color attachments much have the same number of bits per pixel.")}return ht(Wt,vr,Gr),k(!Wt||Wt.texture&&Wt.texture._texture.format===Jre||Wt.renderbuffer&&Wt.renderbuffer._renderbuffer.format===ine,"invalid depth attachment for framebuffer object"),ht(wr,vr,Gr),k(!wr||wr.renderbuffer&&wr.renderbuffer._renderbuffer.format===ane,"invalid stencil attachment for framebuffer object"),ht(Pr,vr,Gr),k(!Pr||Pr.texture&&Pr.texture._texture.format===PN||Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.format===PN,"invalid depth-stencil attachment for framebuffer object"),He(Ge),Ge.width=vr,Ge.height=Gr,Ge.colorAttachments=Qr,Ge.depthAttachment=Wt,Ge.stencilAttachment=wr,Ge.depthStencilAttachment=Pr,Kt.color=Qr.map(Te),Kt.depth=Te(Wt),Kt.stencil=Te(wr),Kt.depthStencil=Te(Pr),Kt.width=Ge.width,Kt.height=Ge.height,We(Ge),Kt}function ur(St,yr){k(Ae.next!==Ge,"can not resize a framebuffer which is currently in use");var rr=Math.max(St|0,1),vr=Math.max(yr|0||rr,1);if(rr===Ge.width&&vr===Ge.height)return Kt;for(var Gr=Ge.colorAttachments,Yn=0;Yn<Gr.length;++Yn)nt(Gr[Yn],rr,vr);return nt(Ge.depthAttachment,rr,vr),nt(Ge.stencilAttachment,rr,vr),nt(Ge.depthStencilAttachment,rr,vr),Ge.width=Kt.width=rr,Ge.height=Kt.height=vr,We(Ge),Kt}return Kt(dt,ot),n(Kt,{resize:ur,_reglType:"framebuffer",_framebuffer:Ge,destroy:function(){ut(Ge),He(Ge)},use:function(St){Ae.setFBO({framebuffer:Kt},St)}})}function Bt(dt){var ot=Array(6);function Ge(ur){var St;k(ot.indexOf(Ae.next)<0,"can not update framebuffer which is currently in use");var yr={color:null},rr=0,vr=null,Gr="rgba",Yn="uint8",fi=1;if(typeof ur=="number")rr=ur|0;else if(!ur)rr=1;else{k.type(ur,"object","invalid arguments for framebuffer");var Sr=ur;if("shape"in Sr){var ti=Sr.shape;k(Array.isArray(ti)&&ti.length>=2,"invalid shape for framebuffer"),k(ti[0]===ti[1],"cube framebuffer must be square"),rr=ti[0]}else"radius"in Sr&&(rr=Sr.radius|0),"width"in Sr?(rr=Sr.width|0,"height"in Sr&&k(Sr.height===rr,"must be square")):"height"in Sr&&(rr=Sr.height|0);("color"in Sr||"colors"in Sr)&&(vr=Sr.color||Sr.colors,Array.isArray(vr)&&k(vr.length===1||W.webgl_draw_buffers,"multiple render targets not supported")),vr||("colorCount"in Sr&&(fi=Sr.colorCount|0,k(fi>0,"invalid color buffer count")),"colorType"in Sr&&(k.oneOf(Sr.colorType,it,"invalid color type"),Yn=Sr.colorType),"colorFormat"in Sr&&(Gr=Sr.colorFormat,k.oneOf(Sr.colorFormat,qe,"invalid color format for texture"))),"depth"in Sr&&(yr.depth=Sr.depth),"stencil"in Sr&&(yr.stencil=Sr.stencil),"depthStencil"in Sr&&(yr.depthStencil=Sr.depthStencil)}var cn;if(vr)if(Array.isArray(vr))for(cn=[],St=0;St<vr.length;++St)cn[St]=vr[St];else cn=[vr];else{cn=Array(fi);var Kn={radius:rr,format:Gr,type:Yn};for(St=0;St<fi;++St)cn[St]=Ee.createCube(Kn)}for(yr.color=Array(cn.length),St=0;St<cn.length;++St){var ri=cn[St];k(typeof ri=="function"&&ri._reglType==="textureCube","invalid cube map"),rr=rr||ri.width,k(ri.width===rr&&ri.height===rr,"invalid cube map shape"),yr.color[St]={target:Ry,data:cn[St]}}for(St=0;St<6;++St){for(var ni=0;ni<cn.length;++ni)yr.color[ni].target=Ry+St;St>0&&(yr.depth=ot[0].depth,yr.stencil=ot[0].stencil,yr.depthStencil=ot[0].depthStencil),ot[St]?ot[St](yr):ot[St]=ft(yr)}return n(Ge,{width:rr,height:rr,color:cn})}function Kt(ur){var St,yr=ur|0;if(k(yr>0&&yr<=re.maxCubeMapSize,"invalid radius for cube fbo"),yr===Ge.width)return Ge;var rr=Ge.color;for(St=0;St<rr.length;++St)rr[St].resize(yr);for(St=0;St<6;++St)ot[St].resize(yr);return Ge.width=Ge.height=yr,Ge}return Ge(dt),n(Ge,{faces:ot,resize:Kt,_reglType:"framebufferCube",destroy:function(){ot.forEach(function(ur){ur.destroy()})}})}function tr(){Ae.cur=null,Ae.next=null,Ae.dirty=!0,io(je).forEach(function(dt){dt.framebuffer=I.createFramebuffer(),We(dt)})}return n(Ae,{getFramebuffer:function(dt){if(typeof dt=="function"&&dt._reglType==="framebuffer"){var ot=dt._framebuffer;if(ot instanceof wt)return ot}return null},create:ft,createCube:Bt,clear:function(){io(je).forEach(ut)},restore:tr})}var hne=5126,DN=34962;function aS(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=hne,this.offset=0,this.stride=0,this.divisor=0}function dne(I,W,re,Ee,$e){for(var we=re.maxAttributes,Ae=new Array(we),qe=0;qe<we;++qe)Ae[qe]=new aS;var Je=0,it={},et={Record:aS,scope:{},state:Ae,currentVAO:null,targetVAO:null,restore:ht()?je:function(){},createVAO:wt,getVAO:lt,destroyBuffer:st,setVAO:ht()?ge:Te,clear:ht()?nt:function(){}};function st(He){for(var ut=0;ut<Ae.length;++ut){var We=Ae[ut];We.buffer===He&&(I.disableVertexAttribArray(ut),We.buffer=null)}}function ht(){return W.oes_vertex_array_object}function Ze(){return W.angle_instanced_arrays}function lt(He){return typeof He=="function"&&He._vao?He._vao:null}function ge(He){if(He!==et.currentVAO){var ut=ht();He?ut.bindVertexArrayOES(He.vao):ut.bindVertexArrayOES(null),et.currentVAO=He}}function Te(He){if(He!==et.currentVAO){if(He)He.bindAttrs();else for(var ut=Ze(),We=0;We<Ae.length;++We){var ft=Ae[We];ft.buffer?(I.enableVertexAttribArray(We),I.vertexAttribPointer(We,ft.size,ft.type,ft.normalized,ft.stride,ft.offfset),ut&&ft.divisor&&ut.vertexAttribDivisorANGLE(We,ft.divisor)):(I.disableVertexAttribArray(We),I.vertexAttrib4f(We,ft.x,ft.y,ft.z,ft.w))}et.currentVAO=He}}function nt(){io(it).forEach(function(He){He.destroy()})}function pt(){this.id=++Je,this.attributes=[];var He=ht();He?this.vao=He.createVertexArrayOES():this.vao=null,it[this.id]=this,this.buffers=[]}pt.prototype.bindAttrs=function(){for(var He=Ze(),ut=this.attributes,We=0;We<ut.length;++We){var ft=ut[We];ft.buffer?(I.enableVertexAttribArray(We),I.bindBuffer(DN,ft.buffer.buffer),I.vertexAttribPointer(We,ft.size,ft.type,ft.normalized,ft.stride,ft.offset),He&&ft.divisor&&He.vertexAttribDivisorANGLE(We,ft.divisor)):(I.disableVertexAttribArray(We),I.vertexAttrib4f(We,ft.x,ft.y,ft.z,ft.w))}for(var Bt=ut.length;Bt<we;++Bt)I.disableVertexAttribArray(Bt)},pt.prototype.refresh=function(){var He=ht();He&&(He.bindVertexArrayOES(this.vao),this.bindAttrs(),et.currentVAO=this)},pt.prototype.destroy=function(){if(this.vao){var He=ht();this===et.currentVAO&&(et.currentVAO=null,He.bindVertexArrayOES(null)),He.deleteVertexArrayOES(this.vao),this.vao=null}it[this.id]&&(delete it[this.id],Ee.vaoCount-=1)};function je(){var He=ht();He&&io(it).forEach(function(ut){ut.refresh()})}function wt(He){var ut=new pt;Ee.vaoCount+=1;function We(ft){k(Array.isArray(ft),"arguments to vertex array constructor must be an array"),k(ft.length<we,"too many attributes"),k(ft.length>0,"must specify at least one attribute");var Bt={},tr=ut.attributes;tr.length=ft.length;for(var dt=0;dt<ft.length;++dt){var ot=ft[dt],Ge=tr[dt]=new aS,Kt=ot.data||ot;if(Array.isArray(Kt)||t(Kt)||fs(Kt)){var ur;ut.buffers[dt]&&(ur=ut.buffers[dt],t(Kt)&&ur._buffer.byteLength>=Kt.byteLength?ur.subdata(Kt):(ur.destroy(),ut.buffers[dt]=null)),ut.buffers[dt]||(ur=ut.buffers[dt]=$e.create(ot,DN,!1,!0)),Ge.buffer=$e.getBuffer(ur),Ge.size=Ge.buffer.dimension|0,Ge.normalized=!1,Ge.type=Ge.buffer.dtype,Ge.offset=0,Ge.stride=0,Ge.divisor=0,Ge.state=1,Bt[dt]=1}else $e.getBuffer(ot)?(Ge.buffer=$e.getBuffer(ot),Ge.size=Ge.buffer.dimension|0,Ge.normalized=!1,Ge.type=Ge.buffer.dtype,Ge.offset=0,Ge.stride=0,Ge.divisor=0,Ge.state=1):$e.getBuffer(ot.buffer)?(Ge.buffer=$e.getBuffer(ot.buffer),Ge.size=(+ot.size||Ge.buffer.dimension)|0,Ge.normalized=!!ot.normalized||!1,"type"in ot?(k.parameter(ot.type,kc,"invalid buffer type"),Ge.type=kc[ot.type]):Ge.type=Ge.buffer.dtype,Ge.offset=(ot.offset||0)|0,Ge.stride=(ot.stride||0)|0,Ge.divisor=(ot.divisor||0)|0,Ge.state=1,k(Ge.size>=1&&Ge.size<=4,"size must be between 1 and 4"),k(Ge.offset>=0,"invalid offset"),k(Ge.stride>=0&&Ge.stride<=255,"stride must be between 0 and 255"),k(Ge.divisor>=0,"divisor must be positive"),k(!Ge.divisor||!!W.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ot?(k(dt>0,"first attribute must not be a constant"),Ge.x=+ot.x||0,Ge.y=+ot.y||0,Ge.z=+ot.z||0,Ge.w=+ot.w||0,Ge.state=2):k(!1,"invalid attribute spec for location "+dt)}for(var St=0;St<ut.buffers.length;++St)!Bt[St]&&ut.buffers[St]&&(ut.buffers[St].destroy(),ut.buffers[St]=null);return ut.refresh(),We}return We.destroy=function(){for(var ft=0;ft<ut.buffers.length;++ft)ut.buffers[ft]&&ut.buffers[ft].destroy();ut.buffers.length=0,ut.destroy()},We._vao=ut,We._reglType="vao",We(He)}return et}var NN=35632,vne=35633,pne=35718,gne=35721;function mne(I,W,re,Ee){var $e={},we={};function Ae(ge,Te,nt,pt){this.name=ge,this.id=Te,this.location=nt,this.info=pt}function qe(ge,Te){for(var nt=0;nt<ge.length;++nt)if(ge[nt].id===Te.id){ge[nt].location=Te.location;return}ge.push(Te)}function Je(ge,Te,nt){var pt=ge===NN?$e:we,je=pt[Te];if(!je){var wt=W.str(Te);je=I.createShader(ge),I.shaderSource(je,wt),I.compileShader(je),k.shaderError(I,je,wt,ge,nt),pt[Te]=je}return je}var it={},et=[],st=0;function ht(ge,Te){this.id=st++,this.fragId=ge,this.vertId=Te,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ee.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ze(ge,Te,nt){var pt,je,wt=Je(NN,ge.fragId),He=Je(vne,ge.vertId),ut=ge.program=I.createProgram();if(I.attachShader(ut,wt),I.attachShader(ut,He),nt)for(pt=0;pt<nt.length;++pt){var We=nt[pt];I.bindAttribLocation(ut,We[0],We[1])}I.linkProgram(ut),k.linkError(I,ut,W.str(ge.fragId),W.str(ge.vertId),Te);var ft=I.getProgramParameter(ut,pne);Ee.profile&&(ge.stats.uniformsCount=ft);var Bt=ge.uniforms;for(pt=0;pt<ft;++pt)if(je=I.getActiveUniform(ut,pt),je)if(je.size>1)for(var tr=0;tr<je.size;++tr){var dt=je.name.replace("[0]","["+tr+"]");qe(Bt,new Ae(dt,W.id(dt),I.getUniformLocation(ut,dt),je))}else qe(Bt,new Ae(je.name,W.id(je.name),I.getUniformLocation(ut,je.name),je));var ot=I.getProgramParameter(ut,gne);Ee.profile&&(ge.stats.attributesCount=ot);var Ge=ge.attributes;for(pt=0;pt<ot;++pt)je=I.getActiveAttrib(ut,pt),je&&qe(Ge,new Ae(je.name,W.id(je.name),I.getAttribLocation(ut,je.name),je))}Ee.profile&&(re.getMaxUniformsCount=function(){var ge=0;return et.forEach(function(Te){Te.stats.uniformsCount>ge&&(ge=Te.stats.uniformsCount)}),ge},re.getMaxAttributesCount=function(){var ge=0;return et.forEach(function(Te){Te.stats.attributesCount>ge&&(ge=Te.stats.attributesCount)}),ge});function lt(){$e={},we={};for(var ge=0;ge<et.length;++ge)Ze(et[ge],null,et[ge].attributes.map(function(Te){return[Te.location,Te.name]}))}return{clear:function(){var ge=I.deleteShader.bind(I);io($e).forEach(ge),$e={},io(we).forEach(ge),we={},et.forEach(function(Te){I.deleteProgram(Te.program)}),et.length=0,it={},re.shaderCount=0},program:function(ge,Te,nt,pt){k.command(ge>=0,"missing vertex shader",nt),k.command(Te>=0,"missing fragment shader",nt);var je=it[Te];je||(je=it[Te]={});var wt=je[ge];if(wt&&(wt.refCount++,!pt))return wt;var He=new ht(Te,ge);return re.shaderCount++,Ze(He,nt,pt),wt||(je[ge]=He),et.push(He),n(He,{destroy:function(){if(He.refCount--,He.refCount<=0){I.deleteProgram(He.program);var ut=et.indexOf(He);et.splice(ut,1),re.shaderCount--}je[He.vertId].refCount<=0&&(I.deleteShader(we[He.vertId]),delete we[He.vertId],delete it[He.fragId][He.vertId]),Object.keys(it[He.fragId]).length||(I.deleteShader($e[He.fragId]),delete $e[He.fragId],delete it[He.fragId])}})},restore:lt,shader:Je,frag:-1,vert:-1}}var yne=6408,Up=5121,bne=3333,Fy=5126;function xne(I,W,re,Ee,$e,we,Ae){function qe(et){var st;W.next===null?(k($e.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),st=Up):(k(W.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),st=W.next.colorAttachments[0].texture._texture.type,we.oes_texture_float?(k(st===Up||st===Fy,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),st===Fy&&k(Ae.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):k(st===Up,"Reading from a framebuffer is only allowed for the type 'uint8'"));var ht=0,Ze=0,lt=Ee.framebufferWidth,ge=Ee.framebufferHeight,Te=null;t(et)?Te=et:et&&(k.type(et,"object","invalid arguments to regl.read()"),ht=et.x|0,Ze=et.y|0,k(ht>=0&&ht<Ee.framebufferWidth,"invalid x offset for regl.read"),k(Ze>=0&&Ze<Ee.framebufferHeight,"invalid y offset for regl.read"),lt=(et.width||Ee.framebufferWidth-ht)|0,ge=(et.height||Ee.framebufferHeight-Ze)|0,Te=et.data||null),Te&&(st===Up?k(Te instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):st===Fy&&k(Te instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),k(lt>0&&lt+ht<=Ee.framebufferWidth,"invalid width for read pixels"),k(ge>0&&ge+Ze<=Ee.framebufferHeight,"invalid height for read pixels"),re();var nt=lt*ge*4;return Te||(st===Up?Te=new Uint8Array(nt):st===Fy&&(Te=Te||new Float32Array(nt))),k.isTypedArray(Te,"data buffer for regl.read() must be a typedarray"),k(Te.byteLength>=nt,"data buffer for regl.read() too small"),I.pixelStorei(bne,4),I.readPixels(ht,Ze,lt,ge,yne,st,Te),Te}function Je(et){var st;return W.setFBO({framebuffer:et.framebuffer},function(){st=qe(et)}),st}function it(et){return!et||!("framebuffer"in et)?qe(et):Je(et)}return it}function _d(I){return Array.prototype.slice.call(I)}function Sd(I){return _d(I).join("")}function wne(){var I=0,W=[],re=[];function Ee(st){for(var ht=0;ht<re.length;++ht)if(re[ht]===st)return W[ht];var Ze="g"+I++;return W.push(Ze),re.push(st),Ze}function $e(){var st=[];function ht(){st.push.apply(st,_d(arguments))}var Ze=[];function lt(){var ge="v"+I++;return Ze.push(ge),arguments.length>0&&(st.push(ge,"="),st.push.apply(st,_d(arguments)),st.push(";")),ge}return n(ht,{def:lt,toString:function(){return Sd([Ze.length>0?"var "+Ze.join(",")+";":"",Sd(st)])}})}function we(){var st=$e(),ht=$e(),Ze=st.toString,lt=ht.toString;function ge(Te,nt){ht(Te,nt,"=",st.def(Te,nt),";")}return n(function(){st.apply(st,_d(arguments))},{def:st.def,entry:st,exit:ht,save:ge,set:function(Te,nt,pt){ge(Te,nt),st(Te,nt,"=",pt,";")},toString:function(){return Ze()+lt()}})}function Ae(){var st=Sd(arguments),ht=we(),Ze=we(),lt=ht.toString,ge=Ze.toString;return n(ht,{then:function(){return ht.apply(ht,_d(arguments)),this},else:function(){return Ze.apply(Ze,_d(arguments)),this},toString:function(){var Te=ge();return Te&&(Te="else{"+Te+"}"),Sd(["if(",st,"){",lt(),"}",Te])}})}var qe=$e(),Je={};function it(st,ht){var Ze=[];function lt(){var je="a"+Ze.length;return Ze.push(je),je}ht=ht||0;for(var ge=0;ge<ht;++ge)lt();var Te=we(),nt=Te.toString,pt=Je[st]=n(Te,{arg:lt,toString:function(){return Sd(["function(",Ze.join(),"){",nt(),"}"])}});return pt}function et(){var st=['"use strict";',qe,"return {"];Object.keys(Je).forEach(function(lt){st.push('"',lt,'":',Je[lt].toString(),",")}),st.push("}");var ht=Sd(st).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ze=Function.apply(null,W.concat(ht));return Ze.apply(null,re)}return{global:qe,link:Ee,block:$e,proc:it,scope:we,cond:Ae,compile:et}}var Md="xyzw".split(""),RN=5121,Cd=1,oS=2,sS=0,lS=1,uS=2,fS=3,$y=4,BN=5,FN=6,$N="dither",zN="blend.enable",GN="blend.color",cS="blend.equation",hS="blend.func",jN="depth.enable",UN="depth.func",WN="depth.range",VN="depth.mask",dS="colorMask",HN="cull.enable",XN="cull.face",vS="frontFace",pS="lineWidth",YN="polygonOffset.enable",gS="polygonOffset.offset",KN="sample.alpha",qN="sample.enable",mS="sample.coverage",ZN="stencil.enable",QN="stencil.mask",yS="stencil.func",bS="stencil.opFront",Wp="stencil.opBack",JN="scissor.enable",zy="scissor.box",ru="viewport",Vp="profile",Nc="framebuffer",Hp="vert",Xp="frag",Rc="elements",Bc="primitive",Fc="count",Gy="offset",jy="instances",Yp="vao",xS="Width",wS="Height",Ad=Nc+xS,Td=Nc+wS,Ene=ru+xS,_ne=ru+wS,eR="drawingBuffer",tR=eR+xS,rR=eR+wS,Sne=[hS,cS,yS,bS,Wp,mS,ru,zy,gS],Od=34962,Mne=34963,Cne=35632,Ane=35633,nR=3553,Tne=34067,One=2884,kne=3042,Ine=3024,Lne=2960,Pne=2929,Dne=3089,Nne=32823,Rne=32926,Bne=32928,ES=5126,Uy=35664,Wy=35665,Vy=35666,_S=5124,Hy=35667,Xy=35668,Yy=35669,SS=35670,Ky=35671,qy=35672,Zy=35673,Kp=35674,qp=35675,Zp=35676,Qp=35678,Jp=35680,iR=4,eg=1028,$c=1029,aR=2304,MS=2305,Fne=32775,$ne=32776,zne=519,Ju=7680,oR=0,sR=1,lR=32774,Gne=513,uR=36160,jne=36064,Vs={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},fR=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],kd={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ef={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},cR={frag:Cne,vert:Ane},CS={cw:aR,ccw:MS};function Qy(I){return Array.isArray(I)||t(I)||fs(I)}function hR(I){return I.sort(function(W,re){return W===ru?-1:re===ru?1:W<re?-1:1})}function ba(I,W,re,Ee){this.thisDep=I,this.contextDep=W,this.propDep=re,this.append=Ee}function tf(I){return I&&!(I.thisDep||I.contextDep||I.propDep)}function Xn(I){return new ba(!1,!1,!1,I)}function Da(I,W){var re=I.type;if(re===sS){var Ee=I.data.length;return new ba(!0,Ee>=1,Ee>=2,W)}else if(re===$y){var $e=I.data;return new ba($e.thisDep,$e.contextDep,$e.propDep,W)}else{if(re===BN)return new ba(!1,!1,!1,W);if(re===FN){for(var we=!1,Ae=!1,qe=!1,Je=0;Je<I.data.length;++Je){var it=I.data[Je];if(it.type===lS)qe=!0;else if(it.type===uS)Ae=!0;else if(it.type===fS)we=!0;else if(it.type===sS){we=!0;var et=it.data;et>=1&&(Ae=!0),et>=2&&(qe=!0)}else it.type===$y&&(we=we||it.data.thisDep,Ae=Ae||it.data.contextDep,qe=qe||it.data.propDep)}return new ba(we,Ae,qe,W)}else return new ba(re===fS,re===uS,re===lS,W)}}var dR=new ba(!1,!1,!1,function(){});function Une(I,W,re,Ee,$e,we,Ae,qe,Je,it,et,st,ht,Ze,lt){var ge=it.Record,Te={add:32774,subtract:32778,"reverse subtract":32779};re.ext_blend_minmax&&(Te.min=Fne,Te.max=$ne);var nt=re.angle_instanced_arrays,pt=re.webgl_draw_buffers,je={dirty:!0,profile:lt.profile},wt={},He=[],ut={},We={};function ft(q){return q.replace(".","_")}function Bt(q,j,oe){var pe=ft(q);He.push(q),wt[pe]=je[pe]=!!oe,ut[pe]=j}function tr(q,j,oe){var pe=ft(q);He.push(q),Array.isArray(oe)?(je[pe]=oe.slice(),wt[pe]=oe.slice()):je[pe]=wt[pe]=oe,We[pe]=j}Bt($N,Ine),Bt(zN,kne),tr(GN,"blendColor",[0,0,0,0]),tr(cS,"blendEquationSeparate",[lR,lR]),tr(hS,"blendFuncSeparate",[sR,oR,sR,oR]),Bt(jN,Pne,!0),tr(UN,"depthFunc",Gne),tr(WN,"depthRange",[0,1]),tr(VN,"depthMask",!0),tr(dS,dS,[!0,!0,!0,!0]),Bt(HN,One),tr(XN,"cullFace",$c),tr(vS,vS,MS),tr(pS,pS,1),Bt(YN,Nne),tr(gS,"polygonOffset",[0,0]),Bt(KN,Rne),Bt(qN,Bne),tr(mS,"sampleCoverage",[1,!1]),Bt(ZN,Lne),tr(QN,"stencilMask",-1),tr(yS,"stencilFunc",[zne,0,-1]),tr(bS,"stencilOpSeparate",[eg,Ju,Ju,Ju]),tr(Wp,"stencilOpSeparate",[$c,Ju,Ju,Ju]),Bt(JN,Dne),tr(zy,"scissor",[0,0,I.drawingBufferWidth,I.drawingBufferHeight]),tr(ru,ru,[0,0,I.drawingBufferWidth,I.drawingBufferHeight]);var dt={gl:I,context:ht,strings:W,next:wt,current:je,draw:st,elements:we,buffer:$e,shader:et,attributes:it.state,vao:it,uniforms:Je,framebuffer:qe,extensions:re,timer:Ze,isBufferArgs:Qy},ot={primTypes:pd,compareFuncs:kd,blendFuncs:Vs,blendEquations:Te,stencilOps:ef,glTypes:kc,orientationType:CS};k.optional(function(){dt.isArrayLike=Gn}),pt&&(ot.backBuffer=[$c],ot.drawBuffer=ui(Ee.maxDrawbuffers,function(q){return q===0?[0]:ui(q,function(j){return jne+j})}));var Ge=0;function Kt(){var q=wne(),j=q.link,oe=q.global;q.id=Ge++,q.batchId="0";var pe=j(dt),me=q.shared={props:"a0"};Object.keys(dt).forEach(function(ie){me[ie]=oe.def(pe,".",ie)}),k.optional(function(){q.CHECK=j(k),q.commandStr=k.guessCommand(),q.command=j(q.commandStr),q.assert=function(ie,K,ve){ie("if(!(",K,"))",this.CHECK,".commandRaise(",j(ve),",",this.command,");")},ot.invalidBlendCombinations=fR});var fe=q.next={},le=q.current={};Object.keys(We).forEach(function(ie){Array.isArray(je[ie])&&(fe[ie]=oe.def(me.next,".",ie),le[ie]=oe.def(me.current,".",ie))});var he=q.constants={};Object.keys(ot).forEach(function(ie){he[ie]=oe.def(JSON.stringify(ot[ie]))}),q.invoke=function(ie,K){switch(K.type){case sS:var ve=["this",me.context,me.props,q.batchId];return ie.def(j(K.data),".call(",ve.slice(0,Math.max(K.data.length+1,4)),")");case lS:return ie.def(me.props,K.data);case uS:return ie.def(me.context,K.data);case fS:return ie.def("this",K.data);case $y:return K.data.append(q,ie),K.data.ref;case BN:return K.data.toString();case FN:return K.data.map(function(be){return q.invoke(ie,be)})}},q.attribCache={};var Z={};return q.scopeAttrib=function(ie){var K=W.id(ie);if(K in Z)return Z[K];var ve=it.scope[K];ve||(ve=it.scope[K]=new ge);var be=Z[K]=j(ve);return be},q}function ur(q){var j=q.static,oe=q.dynamic,pe;if(Vp in j){var me=!!j[Vp];pe=Xn(function(le,he){return me}),pe.enable=me}else if(Vp in oe){var fe=oe[Vp];pe=Da(fe,function(le,he){return le.invoke(he,fe)})}return pe}function St(q,j){var oe=q.static,pe=q.dynamic;if(Nc in oe){var me=oe[Nc];return me?(me=qe.getFramebuffer(me),k.command(me,"invalid framebuffer object"),Xn(function(le,he){var Z=le.link(me),ie=le.shared;he.set(ie.framebuffer,".next",Z);var K=ie.context;return he.set(K,"."+Ad,Z+".width"),he.set(K,"."+Td,Z+".height"),Z})):Xn(function(le,he){var Z=le.shared;he.set(Z.framebuffer,".next","null");var ie=Z.context;return he.set(ie,"."+Ad,ie+"."+tR),he.set(ie,"."+Td,ie+"."+rR),"null"})}else if(Nc in pe){var fe=pe[Nc];return Da(fe,function(le,he){var Z=le.invoke(he,fe),ie=le.shared,K=ie.framebuffer,ve=he.def(K,".getFramebuffer(",Z,")");k.optional(function(){le.assert(he,"!"+Z+"||"+ve,"invalid framebuffer object")}),he.set(K,".next",ve);var be=ie.context;return he.set(be,"."+Ad,ve+"?"+ve+".width:"+be+"."+tR),he.set(be,"."+Td,ve+"?"+ve+".height:"+be+"."+rR),ve})}else return null}function yr(q,j,oe){var pe=q.static,me=q.dynamic;function fe(Z){if(Z in pe){var ie=pe[Z];k.commandType(ie,"object","invalid "+Z,oe.commandStr);var K=!0,ve=ie.x|0,be=ie.y|0,Ne,ze;return"width"in ie?(Ne=ie.width|0,k.command(Ne>=0,"invalid "+Z,oe.commandStr)):K=!1,"height"in ie?(ze=ie.height|0,k.command(ze>=0,"invalid "+Z,oe.commandStr)):K=!1,new ba(!K&&j&&j.thisDep,!K&&j&&j.contextDep,!K&&j&&j.propDep,function(kt,cr){var Mt=kt.shared.context,Vt=Ne;"width"in ie||(Vt=cr.def(Mt,".",Ad,"-",ve));var ir=ze;return"height"in ie||(ir=cr.def(Mt,".",Td,"-",be)),[ve,be,Vt,ir]})}else if(Z in me){var Oe=me[Z],rt=Da(Oe,function(kt,cr){var Mt=kt.invoke(cr,Oe);k.optional(function(){kt.assert(cr,Mt+"&&typeof "+Mt+'==="object"',"invalid "+Z)});var Vt=kt.shared.context,ir=cr.def(Mt,".x|0"),jr=cr.def(Mt,".y|0"),Dn=cr.def('"width" in ',Mt,"?",Mt,".width|0:","(",Vt,".",Ad,"-",ir,")"),xa=cr.def('"height" in ',Mt,"?",Mt,".height|0:","(",Vt,".",Td,"-",jr,")");return k.optional(function(){kt.assert(cr,Dn+">=0&&"+xa+">=0","invalid "+Z)}),[ir,jr,Dn,xa]});return j&&(rt.thisDep=rt.thisDep||j.thisDep,rt.contextDep=rt.contextDep||j.contextDep,rt.propDep=rt.propDep||j.propDep),rt}else return j?new ba(j.thisDep,j.contextDep,j.propDep,function(kt,cr){var Mt=kt.shared.context;return[0,0,cr.def(Mt,".",Ad),cr.def(Mt,".",Td)]}):null}var le=fe(ru);if(le){var he=le;le=new ba(le.thisDep,le.contextDep,le.propDep,function(Z,ie){var K=he.append(Z,ie),ve=Z.shared.context;return ie.set(ve,"."+Ene,K[2]),ie.set(ve,"."+_ne,K[3]),K})}return{viewport:le,scissor_box:fe(zy)}}function rr(q,j){var oe=q.static,pe=typeof oe[Xp]=="string"&&typeof oe[Hp]=="string";if(pe){if(Object.keys(j.dynamic).length>0)return null;var me=j.static,fe=Object.keys(me);if(fe.length>0&&typeof me[fe[0]]=="number"){for(var le=[],he=0;he<fe.length;++he)k(typeof me[fe[he]]=="number","must specify all vertex attribute locations when using vaos"),le.push([me[fe[he]]|0,fe[he]]);return le}}return null}function vr(q,j,oe){var pe=q.static,me=q.dynamic;function fe(K){if(K in pe){var ve=W.id(pe[K]);k.optional(function(){et.shader(cR[K],ve,k.guessCommand())});var be=Xn(function(){return ve});return be.id=ve,be}else if(K in me){var Ne=me[K];return Da(Ne,function(ze,Oe){var rt=ze.invoke(Oe,Ne),kt=Oe.def(ze.shared.strings,".id(",rt,")");return k.optional(function(){Oe(ze.shared.shader,".shader(",cR[K],",",kt,",",ze.command,");")}),kt})}return null}var le=fe(Xp),he=fe(Hp),Z=null,ie;return tf(le)&&tf(he)?(Z=et.program(he.id,le.id,null,oe),ie=Xn(function(K,ve){return K.link(Z)})):ie=new ba(le&&le.thisDep||he&&he.thisDep,le&&le.contextDep||he&&he.contextDep,le&&le.propDep||he&&he.propDep,function(K,ve){var be=K.shared.shader,Ne;le?Ne=le.append(K,ve):Ne=ve.def(be,".",Xp);var ze;he?ze=he.append(K,ve):ze=ve.def(be,".",Hp);var Oe=be+".program("+ze+","+Ne;return k.optional(function(){Oe+=","+K.command}),ve.def(Oe+")")}),{frag:le,vert:he,progVar:ie,program:Z}}function Gr(q,j){var oe=q.static,pe=q.dynamic;function me(){if(Rc in oe){var K=oe[Rc];Qy(K)?K=we.getElements(we.create(K,!0)):K&&(K=we.getElements(K),k.command(K,"invalid elements",j.commandStr));var ve=Xn(function(Ne,ze){if(K){var Oe=Ne.link(K);return Ne.ELEMENTS=Oe,Oe}return Ne.ELEMENTS=null,null});return ve.value=K,ve}else if(Rc in pe){var be=pe[Rc];return Da(be,function(Ne,ze){var Oe=Ne.shared,rt=Oe.isBufferArgs,kt=Oe.elements,cr=Ne.invoke(ze,be),Mt=ze.def("null"),Vt=ze.def(rt,"(",cr,")"),ir=Ne.cond(Vt).then(Mt,"=",kt,".createStream(",cr,");").else(Mt,"=",kt,".getElements(",cr,");");return k.optional(function(){Ne.assert(ir.else,"!"+cr+"||"+Mt,"invalid elements")}),ze.entry(ir),ze.exit(Ne.cond(Vt).then(kt,".destroyStream(",Mt,");")),Ne.ELEMENTS=Mt,Mt})}return null}var fe=me();function le(){if(Bc in oe){var K=oe[Bc];return k.commandParameter(K,pd,"invalid primitve",j.commandStr),Xn(function(be,Ne){return pd[K]})}else if(Bc in pe){var ve=pe[Bc];return Da(ve,function(be,Ne){var ze=be.constants.primTypes,Oe=be.invoke(Ne,ve);return k.optional(function(){be.assert(Ne,Oe+" in "+ze,"invalid primitive, must be one of "+Object.keys(pd))}),Ne.def(ze,"[",Oe,"]")})}else if(fe)return tf(fe)?fe.value?Xn(function(be,Ne){return Ne.def(be.ELEMENTS,".primType")}):Xn(function(){return iR}):new ba(fe.thisDep,fe.contextDep,fe.propDep,function(be,Ne){var ze=be.ELEMENTS;return Ne.def(ze,"?",ze,".primType:",iR)});return null}function he(K,ve){if(K in oe){var be=oe[K]|0;return k.command(!ve||be>=0,"invalid "+K,j.commandStr),Xn(function(ze,Oe){return ve&&(ze.OFFSET=be),be})}else if(K in pe){var Ne=pe[K];return Da(Ne,function(ze,Oe){var rt=ze.invoke(Oe,Ne);return ve&&(ze.OFFSET=rt,k.optional(function(){ze.assert(Oe,rt+">=0","invalid "+K)})),rt})}else if(ve&&fe)return Xn(function(ze,Oe){return ze.OFFSET="0",0});return null}var Z=he(Gy,!0);function ie(){if(Fc in oe){var K=oe[Fc]|0;return k.command(typeof K=="number"&&K>=0,"invalid vertex count",j.commandStr),Xn(function(){return K})}else if(Fc in pe){var ve=pe[Fc];return Da(ve,function(ze,Oe){var rt=ze.invoke(Oe,ve);return k.optional(function(){ze.assert(Oe,"typeof "+rt+'==="number"&&'+rt+">=0&&"+rt+"===("+rt+"|0)","invalid vertex count")}),rt})}else if(fe)if(tf(fe)){if(fe)return Z?new ba(Z.thisDep,Z.contextDep,Z.propDep,function(ze,Oe){var rt=Oe.def(ze.ELEMENTS,".vertCount-",ze.OFFSET);return k.optional(function(){ze.assert(Oe,rt+">=0","invalid vertex offset/element buffer too small")}),rt}):Xn(function(ze,Oe){return Oe.def(ze.ELEMENTS,".vertCount")});var be=Xn(function(){return-1});return k.optional(function(){be.MISSING=!0}),be}else{var Ne=new ba(fe.thisDep||Z.thisDep,fe.contextDep||Z.contextDep,fe.propDep||Z.propDep,function(ze,Oe){var rt=ze.ELEMENTS;return ze.OFFSET?Oe.def(rt,"?",rt,".vertCount-",ze.OFFSET,":-1"):Oe.def(rt,"?",rt,".vertCount:-1")});return k.optional(function(){Ne.DYNAMIC=!0}),Ne}return null}return{elements:fe,primitive:le(),count:ie(),instances:he(jy,!1),offset:Z}}function Yn(q,j){var oe=q.static,pe=q.dynamic,me={};return He.forEach(function(fe){var le=ft(fe);function he(Z,ie){if(fe in oe){var K=Z(oe[fe]);me[le]=Xn(function(){return K})}else if(fe in pe){var ve=pe[fe];me[le]=Da(ve,function(be,Ne){return ie(be,Ne,be.invoke(Ne,ve))})}}switch(fe){case HN:case zN:case $N:case ZN:case jN:case JN:case YN:case KN:case qN:case VN:return he(function(Z){return k.commandType(Z,"boolean",fe,j.commandStr),Z},function(Z,ie,K){return k.optional(function(){Z.assert(ie,"typeof "+K+'==="boolean"',"invalid flag "+fe,Z.commandStr)}),K});case UN:return he(function(Z){return k.commandParameter(Z,kd,"invalid "+fe,j.commandStr),kd[Z]},function(Z,ie,K){var ve=Z.constants.compareFuncs;return k.optional(function(){Z.assert(ie,K+" in "+ve,"invalid "+fe+", must be one of "+Object.keys(kd))}),ie.def(ve,"[",K,"]")});case WN:return he(function(Z){return k.command(Gn(Z)&&Z.length===2&&typeof Z[0]=="number"&&typeof Z[1]=="number"&&Z[0]<=Z[1],"depth range is 2d array",j.commandStr),Z},function(Z,ie,K){k.optional(function(){Z.assert(ie,Z.shared.isArrayLike+"("+K+")&&"+K+".length===2&&typeof "+K+'[0]==="number"&&typeof '+K+'[1]==="number"&&'+K+"[0]<="+K+"[1]","depth range must be a 2d array")});var ve=ie.def("+",K,"[0]"),be=ie.def("+",K,"[1]");return[ve,be]});case hS:return he(function(Z){k.commandType(Z,"object","blend.func",j.commandStr);var ie="srcRGB"in Z?Z.srcRGB:Z.src,K="srcAlpha"in Z?Z.srcAlpha:Z.src,ve="dstRGB"in Z?Z.dstRGB:Z.dst,be="dstAlpha"in Z?Z.dstAlpha:Z.dst;return k.commandParameter(ie,Vs,le+".srcRGB",j.commandStr),k.commandParameter(K,Vs,le+".srcAlpha",j.commandStr),k.commandParameter(ve,Vs,le+".dstRGB",j.commandStr),k.commandParameter(be,Vs,le+".dstAlpha",j.commandStr),k.command(fR.indexOf(ie+", "+ve)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ie+", "+ve+")",j.commandStr),[Vs[ie],Vs[ve],Vs[K],Vs[be]]},function(Z,ie,K){var ve=Z.constants.blendFuncs;k.optional(function(){Z.assert(ie,K+"&&typeof "+K+'==="object"',"invalid blend func, must be an object")});function be(Mt,Vt){var ir=ie.def('"',Mt,Vt,'" in ',K,"?",K,".",Mt,Vt,":",K,".",Mt);return k.optional(function(){Z.assert(ie,ir+" in "+ve,"invalid "+fe+"."+Mt+Vt+", must be one of "+Object.keys(Vs))}),ir}var Ne=be("src","RGB"),ze=be("dst","RGB");k.optional(function(){var Mt=Z.constants.invalidBlendCombinations;Z.assert(ie,Mt+".indexOf("+Ne+'+", "+'+ze+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Oe=ie.def(ve,"[",Ne,"]"),rt=ie.def(ve,"[",be("src","Alpha"),"]"),kt=ie.def(ve,"[",ze,"]"),cr=ie.def(ve,"[",be("dst","Alpha"),"]");return[Oe,kt,rt,cr]});case cS:return he(function(Z){if(typeof Z=="string")return k.commandParameter(Z,Te,"invalid "+fe,j.commandStr),[Te[Z],Te[Z]];if(typeof Z=="object")return k.commandParameter(Z.rgb,Te,fe+".rgb",j.commandStr),k.commandParameter(Z.alpha,Te,fe+".alpha",j.commandStr),[Te[Z.rgb],Te[Z.alpha]];k.commandRaise("invalid blend.equation",j.commandStr)},function(Z,ie,K){var ve=Z.constants.blendEquations,be=ie.def(),Ne=ie.def(),ze=Z.cond("typeof ",K,'==="string"');return k.optional(function(){function Oe(rt,kt,cr){Z.assert(rt,cr+" in "+ve,"invalid "+kt+", must be one of "+Object.keys(Te))}Oe(ze.then,fe,K),Z.assert(ze.else,K+"&&typeof "+K+'==="object"',"invalid "+fe),Oe(ze.else,fe+".rgb",K+".rgb"),Oe(ze.else,fe+".alpha",K+".alpha")}),ze.then(be,"=",Ne,"=",ve,"[",K,"];"),ze.else(be,"=",ve,"[",K,".rgb];",Ne,"=",ve,"[",K,".alpha];"),ie(ze),[be,Ne]});case GN:return he(function(Z){return k.command(Gn(Z)&&Z.length===4,"blend.color must be a 4d array",j.commandStr),ui(4,function(ie){return+Z[ie]})},function(Z,ie,K){return k.optional(function(){Z.assert(ie,Z.shared.isArrayLike+"("+K+")&&"+K+".length===4","blend.color must be a 4d array")}),ui(4,function(ve){return ie.def("+",K,"[",ve,"]")})});case QN:return he(function(Z){return k.commandType(Z,"number",le,j.commandStr),Z|0},function(Z,ie,K){return k.optional(function(){Z.assert(ie,"typeof "+K+'==="number"',"invalid stencil.mask")}),ie.def(K,"|0")});case yS:return he(function(Z){k.commandType(Z,"object",le,j.commandStr);var ie=Z.cmp||"keep",K=Z.ref||0,ve="mask"in Z?Z.mask:-1;return k.commandParameter(ie,kd,fe+".cmp",j.commandStr),k.commandType(K,"number",fe+".ref",j.commandStr),k.commandType(ve,"number",fe+".mask",j.commandStr),[kd[ie],K,ve]},function(Z,ie,K){var ve=Z.constants.compareFuncs;k.optional(function(){function Oe(){Z.assert(ie,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Oe(K+"&&typeof ",K,'==="object"'),Oe('!("cmp" in ',K,")||(",K,".cmp in ",ve,")")});var be=ie.def('"cmp" in ',K,"?",ve,"[",K,".cmp]",":",Ju),Ne=ie.def(K,".ref|0"),ze=ie.def('"mask" in ',K,"?",K,".mask|0:-1");return[be,Ne,ze]});case bS:case Wp:return he(function(Z){k.commandType(Z,"object",le,j.commandStr);var ie=Z.fail||"keep",K=Z.zfail||"keep",ve=Z.zpass||"keep";return k.commandParameter(ie,ef,fe+".fail",j.commandStr),k.commandParameter(K,ef,fe+".zfail",j.commandStr),k.commandParameter(ve,ef,fe+".zpass",j.commandStr),[fe===Wp?$c:eg,ef[ie],ef[K],ef[ve]]},function(Z,ie,K){var ve=Z.constants.stencilOps;k.optional(function(){Z.assert(ie,K+"&&typeof "+K+'==="object"',"invalid "+fe)});function be(Ne){return k.optional(function(){Z.assert(ie,'!("'+Ne+'" in '+K+")||("+K+"."+Ne+" in "+ve+")","invalid "+fe+"."+Ne+", must be one of "+Object.keys(ef))}),ie.def('"',Ne,'" in ',K,"?",ve,"[",K,".",Ne,"]:",Ju)}return[fe===Wp?$c:eg,be("fail"),be("zfail"),be("zpass")]});case gS:return he(function(Z){k.commandType(Z,"object",le,j.commandStr);var ie=Z.factor|0,K=Z.units|0;return k.commandType(ie,"number",le+".factor",j.commandStr),k.commandType(K,"number",le+".units",j.commandStr),[ie,K]},function(Z,ie,K){k.optional(function(){Z.assert(ie,K+"&&typeof "+K+'==="object"',"invalid "+fe)});var ve=ie.def(K,".factor|0"),be=ie.def(K,".units|0");return[ve,be]});case XN:return he(function(Z){var ie=0;return Z==="front"?ie=eg:Z==="back"&&(ie=$c),k.command(!!ie,le,j.commandStr),ie},function(Z,ie,K){return k.optional(function(){Z.assert(ie,K+'==="front"||'+K+'==="back"',"invalid cull.face")}),ie.def(K,'==="front"?',eg,":",$c)});case pS:return he(function(Z){return k.command(typeof Z=="number"&&Z>=Ee.lineWidthDims[0]&&Z<=Ee.lineWidthDims[1],"invalid line width, must be a positive number between "+Ee.lineWidthDims[0]+" and "+Ee.lineWidthDims[1],j.commandStr),Z},function(Z,ie,K){return k.optional(function(){Z.assert(ie,"typeof "+K+'==="number"&&'+K+">="+Ee.lineWidthDims[0]+"&&"+K+"<="+Ee.lineWidthDims[1],"invalid line width")}),K});case vS:return he(function(Z){return k.commandParameter(Z,CS,le,j.commandStr),CS[Z]},function(Z,ie,K){return k.optional(function(){Z.assert(ie,K+'==="cw"||'+K+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ie.def(K+'==="cw"?'+aR+":"+MS)});case dS:return he(function(Z){return k.command(Gn(Z)&&Z.length===4,"color.mask must be length 4 array",j.commandStr),Z.map(function(ie){return!!ie})},function(Z,ie,K){return k.optional(function(){Z.assert(ie,Z.shared.isArrayLike+"("+K+")&&"+K+".length===4","invalid color.mask")}),ui(4,function(ve){return"!!"+K+"["+ve+"]"})});case mS:return he(function(Z){k.command(typeof Z=="object"&&Z,le,j.commandStr);var ie="value"in Z?Z.value:1,K=!!Z.invert;return k.command(typeof ie=="number"&&ie>=0&&ie<=1,"sample.coverage.value must be a number between 0 and 1",j.commandStr),[ie,K]},function(Z,ie,K){k.optional(function(){Z.assert(ie,K+"&&typeof "+K+'==="object"',"invalid sample.coverage")});var ve=ie.def('"value" in ',K,"?+",K,".value:1"),be=ie.def("!!",K,".invert");return[ve,be]})}}),me}function fi(q,j){var oe=q.static,pe=q.dynamic,me={};return Object.keys(oe).forEach(function(fe){var le=oe[fe],he;if(typeof le=="number"||typeof le=="boolean")he=Xn(function(){return le});else if(typeof le=="function"){var Z=le._reglType;Z==="texture2d"||Z==="textureCube"?he=Xn(function(ie){return ie.link(le)}):Z==="framebuffer"||Z==="framebufferCube"?(k.command(le.color.length>0,'missing color attachment for framebuffer sent to uniform "'+fe+'"',j.commandStr),he=Xn(function(ie){return ie.link(le.color[0])})):k.commandRaise('invalid data for uniform "'+fe+'"',j.commandStr)}else Gn(le)?he=Xn(function(ie){var K=ie.global.def("[",ui(le.length,function(ve){return k.command(typeof le[ve]=="number"||typeof le[ve]=="boolean","invalid uniform "+fe,ie.commandStr),le[ve]}),"]");return K}):k.commandRaise('invalid or missing data for uniform "'+fe+'"',j.commandStr);he.value=le,me[fe]=he}),Object.keys(pe).forEach(function(fe){var le=pe[fe];me[fe]=Da(le,function(he,Z){return he.invoke(Z,le)})}),me}function Sr(q,j){var oe=q.static,pe=q.dynamic,me={};return Object.keys(oe).forEach(function(fe){var le=oe[fe],he=W.id(fe),Z=new ge;if(Qy(le))Z.state=Cd,Z.buffer=$e.getBuffer($e.create(le,Od,!1,!0)),Z.type=0;else{var ie=$e.getBuffer(le);if(ie)Z.state=Cd,Z.buffer=ie,Z.type=0;else if(k.command(typeof le=="object"&&le,"invalid data for attribute "+fe,j.commandStr),"constant"in le){var K=le.constant;Z.buffer="null",Z.state=oS,typeof K=="number"?Z.x=K:(k.command(Gn(K)&&K.length>0&&K.length<=4,"invalid constant for attribute "+fe,j.commandStr),Md.forEach(function(kt,cr){cr<K.length&&(Z[kt]=K[cr])}))}else{Qy(le.buffer)?ie=$e.getBuffer($e.create(le.buffer,Od,!1,!0)):ie=$e.getBuffer(le.buffer),k.command(!!ie,'missing buffer for attribute "'+fe+'"',j.commandStr);var ve=le.offset|0;k.command(ve>=0,'invalid offset for attribute "'+fe+'"',j.commandStr);var be=le.stride|0;k.command(be>=0&&be<256,'invalid stride for attribute "'+fe+'", must be integer betweeen [0, 255]',j.commandStr);var Ne=le.size|0;k.command(!("size"in le)||Ne>0&&Ne<=4,'invalid size for attribute "'+fe+'", must be 1,2,3,4',j.commandStr);var ze=!!le.normalized,Oe=0;"type"in le&&(k.commandParameter(le.type,kc,"invalid type for attribute "+fe,j.commandStr),Oe=kc[le.type]);var rt=le.divisor|0;"divisor"in le&&(k.command(rt===0||nt,'cannot specify divisor for attribute "'+fe+'", instancing not supported',j.commandStr),k.command(rt>=0,'invalid divisor for attribute "'+fe+'"',j.commandStr)),k.optional(function(){var kt=j.commandStr,cr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(le).forEach(function(Mt){k.command(cr.indexOf(Mt)>=0,'unknown parameter "'+Mt+'" for attribute pointer "'+fe+'" (valid parameters are '+cr+")",kt)})}),Z.buffer=ie,Z.state=Cd,Z.size=Ne,Z.normalized=ze,Z.type=Oe||ie.dtype,Z.offset=ve,Z.stride=be,Z.divisor=rt}}me[fe]=Xn(function(kt,cr){var Mt=kt.attribCache;if(he in Mt)return Mt[he];var Vt={isStream:!1};return Object.keys(Z).forEach(function(ir){Vt[ir]=Z[ir]}),Z.buffer&&(Vt.buffer=kt.link(Z.buffer),Vt.type=Vt.type||Vt.buffer+".dtype"),Mt[he]=Vt,Vt})}),Object.keys(pe).forEach(function(fe){var le=pe[fe];function he(Z,ie){var K=Z.invoke(ie,le),ve=Z.shared,be=Z.constants,Ne=ve.isBufferArgs,ze=ve.buffer;k.optional(function(){Z.assert(ie,K+"&&(typeof "+K+'==="object"||typeof '+K+'==="function")&&('+Ne+"("+K+")||"+ze+".getBuffer("+K+")||"+ze+".getBuffer("+K+".buffer)||"+Ne+"("+K+'.buffer)||("constant" in '+K+"&&(typeof "+K+'.constant==="number"||'+ve.isArrayLike+"("+K+".constant))))",'invalid dynamic attribute "'+fe+'"')});var Oe={isStream:ie.def(!1)},rt=new ge;rt.state=Cd,Object.keys(rt).forEach(function(Vt){Oe[Vt]=ie.def(""+rt[Vt])});var kt=Oe.buffer,cr=Oe.type;ie("if(",Ne,"(",K,")){",Oe.isStream,"=true;",kt,"=",ze,".createStream(",Od,",",K,");",cr,"=",kt,".dtype;","}else{",kt,"=",ze,".getBuffer(",K,");","if(",kt,"){",cr,"=",kt,".dtype;",'}else if("constant" in ',K,"){",Oe.state,"=",oS,";","if(typeof "+K+'.constant === "number"){',Oe[Md[0]],"=",K,".constant;",Md.slice(1).map(function(Vt){return Oe[Vt]}).join("="),"=0;","}else{",Md.map(function(Vt,ir){return Oe[Vt]+"="+K+".constant.length>"+ir+"?"+K+".constant["+ir+"]:0;"}).join(""),"}}else{","if(",Ne,"(",K,".buffer)){",kt,"=",ze,".createStream(",Od,",",K,".buffer);","}else{",kt,"=",ze,".getBuffer(",K,".buffer);","}",cr,'="type" in ',K,"?",be.glTypes,"[",K,".type]:",kt,".dtype;",Oe.normalized,"=!!",K,".normalized;");function Mt(Vt){ie(Oe[Vt],"=",K,".",Vt,"|0;")}return Mt("size"),Mt("offset"),Mt("stride"),Mt("divisor"),ie("}}"),ie.exit("if(",Oe.isStream,"){",ze,".destroyStream(",kt,");","}"),Oe}me[fe]=Da(le,he)}),me}function ti(q,j){var oe=q.static,pe=q.dynamic;if(Yp in oe){var me=oe[Yp];return me!==null&&it.getVAO(me)===null&&(me=it.createVAO(me)),Xn(function(le){return le.link(it.getVAO(me))})}else if(Yp in pe){var fe=pe[Yp];return Da(fe,function(le,he){var Z=le.invoke(he,fe);return he.def(le.shared.vao+".getVAO("+Z+")")})}return null}function cn(q){var j=q.static,oe=q.dynamic,pe={};return Object.keys(j).forEach(function(me){var fe=j[me];pe[me]=Xn(function(le,he){return typeof fe=="number"||typeof fe=="boolean"?""+fe:le.link(fe)})}),Object.keys(oe).forEach(function(me){var fe=oe[me];pe[me]=Da(fe,function(le,he){return le.invoke(he,fe)})}),pe}function Kn(q,j,oe,pe,me){var fe=q.static,le=q.dynamic;k.optional(function(){var Mt=[Nc,Hp,Xp,Rc,Bc,Gy,Fc,jy,Vp,Yp].concat(He);function Vt(ir){Object.keys(ir).forEach(function(jr){k.command(Mt.indexOf(jr)>=0,'unknown parameter "'+jr+'"',me.commandStr)})}Vt(fe),Vt(le)});var he=rr(q,j),Z=St(q),ie=yr(q,Z,me),K=Gr(q,me),ve=Yn(q,me),be=vr(q,me,he);function Ne(Mt){var Vt=ie[Mt];Vt&&(ve[Mt]=Vt)}Ne(ru),Ne(ft(zy));var ze=Object.keys(ve).length>0,Oe={framebuffer:Z,draw:K,shader:be,state:ve,dirty:ze,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Oe.profile=ur(q),Oe.uniforms=fi(oe,me),Oe.drawVAO=Oe.scopeVAO=ti(q),!Oe.drawVAO&&be.program&&!he&&re.angle_instanced_arrays){var rt=!0,kt=be.program.attributes.map(function(Mt){var Vt=j.static[Mt];return rt=rt&&!!Vt,Vt});if(rt&&kt.length>0){var cr=it.getVAO(it.createVAO(kt));Oe.drawVAO=new ba(null,null,null,function(Mt,Vt){return Mt.link(cr)}),Oe.useVAO=!0}}return he?Oe.useVAO=!0:Oe.attributes=Sr(j,me),Oe.context=cn(pe),Oe}function ri(q,j,oe){var pe=q.shared,me=pe.context,fe=q.scope();Object.keys(oe).forEach(function(le){j.save(me,"."+le);var he=oe[le],Z=he.append(q,j);Array.isArray(Z)?fe(me,".",le,"=[",Z.join(),"];"):fe(me,".",le,"=",Z,";")}),j(fe)}function ni(q,j,oe,pe){var me=q.shared,fe=me.gl,le=me.framebuffer,he;pt&&(he=j.def(me.extensions,".webgl_draw_buffers"));var Z=q.constants,ie=Z.drawBuffer,K=Z.backBuffer,ve;oe?ve=oe.append(q,j):ve=j.def(le,".next"),pe||j("if(",ve,"!==",le,".cur){"),j("if(",ve,"){",fe,".bindFramebuffer(",uR,",",ve,".framebuffer);"),pt&&j(he,".drawBuffersWEBGL(",ie,"[",ve,".colorAttachments.length]);"),j("}else{",fe,".bindFramebuffer(",uR,",null);"),pt&&j(he,".drawBuffersWEBGL(",K,");"),j("}",le,".cur=",ve,";"),pe||j("}")}function bi(q,j,oe){var pe=q.shared,me=pe.gl,fe=q.current,le=q.next,he=pe.current,Z=pe.next,ie=q.cond(he,".dirty");He.forEach(function(K){var ve=ft(K);if(!(ve in oe.state)){var be,Ne;if(ve in le){be=le[ve],Ne=fe[ve];var ze=ui(je[ve].length,function(rt){return ie.def(be,"[",rt,"]")});ie(q.cond(ze.map(function(rt,kt){return rt+"!=="+Ne+"["+kt+"]"}).join("||")).then(me,".",We[ve],"(",ze,");",ze.map(function(rt,kt){return Ne+"["+kt+"]="+rt}).join(";"),";"))}else{be=ie.def(Z,".",ve);var Oe=q.cond(be,"!==",he,".",ve);ie(Oe),ve in ut?Oe(q.cond(be).then(me,".enable(",ut[ve],");").else(me,".disable(",ut[ve],");"),he,".",ve,"=",be,";"):Oe(me,".",We[ve],"(",be,");",he,".",ve,"=",be,";")}}}),Object.keys(oe.state).length===0&&ie(he,".dirty=false;"),j(ie)}function Fi(q,j,oe,pe){var me=q.shared,fe=q.current,le=me.current,he=me.gl;hR(Object.keys(oe)).forEach(function(Z){var ie=oe[Z];if(!(pe&&!pe(ie))){var K=ie.append(q,j);if(ut[Z]){var ve=ut[Z];tf(ie)?K?j(he,".enable(",ve,");"):j(he,".disable(",ve,");"):j(q.cond(K).then(he,".enable(",ve,");").else(he,".disable(",ve,");")),j(le,".",Z,"=",K,";")}else if(Gn(K)){var be=fe[Z];j(he,".",We[Z],"(",K,");",K.map(function(Ne,ze){return be+"["+ze+"]="+Ne}).join(";"),";")}else j(he,".",We[Z],"(",K,");",le,".",Z,"=",K,";")}})}function jn(q,j){nt&&(q.instancing=j.def(q.shared.extensions,".angle_instanced_arrays"))}function fr(q,j,oe,pe,me){var fe=q.shared,le=q.stats,he=fe.current,Z=fe.timer,ie=oe.profile;function K(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ve,be;function Ne(Mt){ve=j.def(),Mt(ve,"=",K(),";"),typeof me=="string"?Mt(le,".count+=",me,";"):Mt(le,".count++;"),Ze&&(pe?(be=j.def(),Mt(be,"=",Z,".getNumPendingQueries();")):Mt(Z,".beginQuery(",le,");"))}function ze(Mt){Mt(le,".cpuTime+=",K(),"-",ve,";"),Ze&&(pe?Mt(Z,".pushScopeStats(",be,",",Z,".getNumPendingQueries(),",le,");"):Mt(Z,".endQuery();"))}function Oe(Mt){var Vt=j.def(he,".profile");j(he,".profile=",Mt,";"),j.exit(he,".profile=",Vt,";")}var rt;if(ie){if(tf(ie)){ie.enable?(Ne(j),ze(j.exit),Oe("true")):Oe("false");return}rt=ie.append(q,j),Oe(rt)}else rt=j.def(he,".profile");var kt=q.block();Ne(kt),j("if(",rt,"){",kt,"}");var cr=q.block();ze(cr),j.exit("if(",rt,"){",cr,"}")}function $i(q,j,oe,pe,me){var fe=q.shared;function le(Z){switch(Z){case Uy:case Hy:case Ky:return 2;case Wy:case Xy:case qy:return 3;case Vy:case Yy:case Zy:return 4;default:return 1}}function he(Z,ie,K){var ve=fe.gl,be=j.def(Z,".location"),Ne=j.def(fe.attributes,"[",be,"]"),ze=K.state,Oe=K.buffer,rt=[K.x,K.y,K.z,K.w],kt=["buffer","normalized","offset","stride"];function cr(){j("if(!",Ne,".buffer){",ve,".enableVertexAttribArray(",be,");}");var Vt=K.type,ir;if(K.size?ir=j.def(K.size,"||",ie):ir=ie,j("if(",Ne,".type!==",Vt,"||",Ne,".size!==",ir,"||",kt.map(function(Dn){return Ne+"."+Dn+"!=="+K[Dn]}).join("||"),"){",ve,".bindBuffer(",Od,",",Oe,".buffer);",ve,".vertexAttribPointer(",[be,ir,Vt,K.normalized,K.stride,K.offset],");",Ne,".type=",Vt,";",Ne,".size=",ir,";",kt.map(function(Dn){return Ne+"."+Dn+"="+K[Dn]+";"}).join(""),"}"),nt){var jr=K.divisor;j("if(",Ne,".divisor!==",jr,"){",q.instancing,".vertexAttribDivisorANGLE(",[be,jr],");",Ne,".divisor=",jr,";}")}}function Mt(){j("if(",Ne,".buffer){",ve,".disableVertexAttribArray(",be,");",Ne,".buffer=null;","}if(",Md.map(function(Vt,ir){return Ne+"."+Vt+"!=="+rt[ir]}).join("||"),"){",ve,".vertexAttrib4f(",be,",",rt,");",Md.map(function(Vt,ir){return Ne+"."+Vt+"="+rt[ir]+";"}).join(""),"}")}ze===Cd?cr():ze===oS?Mt():(j("if(",ze,"===",Cd,"){"),cr(),j("}else{"),Mt(),j("}"))}pe.forEach(function(Z){var ie=Z.name,K=oe.attributes[ie],ve;if(K){if(!me(K))return;ve=K.append(q,j)}else{if(!me(dR))return;var be=q.scopeAttrib(ie);k.optional(function(){q.assert(j,be+".state","missing attribute "+ie)}),ve={},Object.keys(new ge).forEach(function(Ne){ve[Ne]=j.def(be,".",Ne)})}he(q.link(Z),le(Z.info.type),ve)})}function Qr(q,j,oe,pe,me){for(var fe=q.shared,le=fe.gl,he,Z=0;Z<pe.length;++Z){var ie=pe[Z],K=ie.name,ve=ie.info.type,be=oe.uniforms[K],Ne=q.link(ie),ze=Ne+".location",Oe;if(be){if(!me(be))continue;if(tf(be)){var rt=be.value;if(k.command(rt!==null&&typeof rt<"u",'missing uniform "'+K+'"',q.commandStr),ve===Qp||ve===Jp){k.command(typeof rt=="function"&&(ve===Qp&&(rt._reglType==="texture2d"||rt._reglType==="framebuffer")||ve===Jp&&(rt._reglType==="textureCube"||rt._reglType==="framebufferCube")),"invalid texture for uniform "+K,q.commandStr);var kt=q.link(rt._texture||rt.color[0]._texture);j(le,".uniform1i(",ze,",",kt+".bind());"),j.exit(kt,".unbind();")}else if(ve===Kp||ve===qp||ve===Zp){k.optional(function(){k.command(Gn(rt),"invalid matrix for uniform "+K,q.commandStr),k.command(ve===Kp&&rt.length===4||ve===qp&&rt.length===9||ve===Zp&&rt.length===16,"invalid length for matrix uniform "+K,q.commandStr)});var cr=q.global.def("new Float32Array(["+Array.prototype.slice.call(rt)+"])"),Mt=2;ve===qp?Mt=3:ve===Zp&&(Mt=4),j(le,".uniformMatrix",Mt,"fv(",ze,",false,",cr,");")}else{switch(ve){case ES:k.commandType(rt,"number","uniform "+K,q.commandStr),he="1f";break;case Uy:k.command(Gn(rt)&&rt.length===2,"uniform "+K,q.commandStr),he="2f";break;case Wy:k.command(Gn(rt)&&rt.length===3,"uniform "+K,q.commandStr),he="3f";break;case Vy:k.command(Gn(rt)&&rt.length===4,"uniform "+K,q.commandStr),he="4f";break;case SS:k.commandType(rt,"boolean","uniform "+K,q.commandStr),he="1i";break;case _S:k.commandType(rt,"number","uniform "+K,q.commandStr),he="1i";break;case Ky:k.command(Gn(rt)&&rt.length===2,"uniform "+K,q.commandStr),he="2i";break;case Hy:k.command(Gn(rt)&&rt.length===2,"uniform "+K,q.commandStr),he="2i";break;case qy:k.command(Gn(rt)&&rt.length===3,"uniform "+K,q.commandStr),he="3i";break;case Xy:k.command(Gn(rt)&&rt.length===3,"uniform "+K,q.commandStr),he="3i";break;case Zy:k.command(Gn(rt)&&rt.length===4,"uniform "+K,q.commandStr),he="4i";break;case Yy:k.command(Gn(rt)&&rt.length===4,"uniform "+K,q.commandStr),he="4i";break}j(le,".uniform",he,"(",ze,",",Gn(rt)?Array.prototype.slice.call(rt):rt,");")}continue}else Oe=be.append(q,j)}else{if(!me(dR))continue;Oe=j.def(fe.uniforms,"[",W.id(K),"]")}ve===Qp?(k(!Array.isArray(Oe),"must specify a scalar prop for textures"),j("if(",Oe,"&&",Oe,'._reglType==="framebuffer"){',Oe,"=",Oe,".color[0];","}")):ve===Jp&&(k(!Array.isArray(Oe),"must specify a scalar prop for cube maps"),j("if(",Oe,"&&",Oe,'._reglType==="framebufferCube"){',Oe,"=",Oe,".color[0];","}")),k.optional(function(){function xa(hs,xR){q.assert(j,hs,'bad data or missing for uniform "'+K+'".  '+xR)}function AS(hs){k(!Array.isArray(Oe),"must not specify an array type for uniform"),xa("typeof "+Oe+'==="'+hs+'"',"invalid type, expected "+hs)}function Io(hs,xR){Array.isArray(Oe)?k(Oe.length===hs,"must have length "+hs):xa(fe.isArrayLike+"("+Oe+")&&"+Oe+".length==="+hs,"invalid vector, should have length "+hs,q.commandStr)}function bR(hs){k(!Array.isArray(Oe),"must not specify a value type"),xa("typeof "+Oe+'==="function"&&'+Oe+'._reglType==="texture'+(hs===nR?"2d":"Cube")+'"',"invalid texture type",q.commandStr)}switch(ve){case _S:AS("number");break;case Hy:Io(2);break;case Xy:Io(3);break;case Yy:Io(4);break;case ES:AS("number");break;case Uy:Io(2);break;case Wy:Io(3);break;case Vy:Io(4);break;case SS:AS("boolean");break;case Ky:Io(2);break;case qy:Io(3);break;case Zy:Io(4);break;case Kp:Io(4);break;case qp:Io(9);break;case Zp:Io(16);break;case Qp:bR(nR);break;case Jp:bR(Tne);break}});var Vt=1;switch(ve){case Qp:case Jp:var ir=j.def(Oe,"._texture");j(le,".uniform1i(",ze,",",ir,".bind());"),j.exit(ir,".unbind();");continue;case _S:case SS:he="1i";break;case Hy:case Ky:he="2i",Vt=2;break;case Xy:case qy:he="3i",Vt=3;break;case Yy:case Zy:he="4i",Vt=4;break;case ES:he="1f";break;case Uy:he="2f",Vt=2;break;case Wy:he="3f",Vt=3;break;case Vy:he="4f",Vt=4;break;case Kp:he="Matrix2fv";break;case qp:he="Matrix3fv";break;case Zp:he="Matrix4fv";break}if(j(le,".uniform",he,"(",ze,","),he.charAt(0)==="M"){var jr=Math.pow(ve-Kp+2,2),Dn=q.global.def("new Float32Array(",jr,")");Array.isArray(Oe)?j("false,(",ui(jr,function(xa){return Dn+"["+xa+"]="+Oe[xa]}),",",Dn,")"):j("false,(Array.isArray(",Oe,")||",Oe," instanceof Float32Array)?",Oe,":(",ui(jr,function(xa){return Dn+"["+xa+"]="+Oe+"["+xa+"]"}),",",Dn,")")}else Vt>1?j(ui(Vt,function(xa){return Array.isArray(Oe)?Oe[xa]:Oe+"["+xa+"]"})):(k(!Array.isArray(Oe),"uniform value must not be an array"),j(Oe));j(");")}}function Wt(q,j,oe,pe){var me=q.shared,fe=me.gl,le=me.draw,he=pe.draw;function Z(){var ir=he.elements,jr,Dn=j;return ir?((ir.contextDep&&pe.contextDynamic||ir.propDep)&&(Dn=oe),jr=ir.append(q,Dn)):jr=Dn.def(le,".",Rc),jr&&Dn("if("+jr+")"+fe+".bindBuffer("+Mne+","+jr+".buffer.buffer);"),jr}function ie(){var ir=he.count,jr,Dn=j;return ir?((ir.contextDep&&pe.contextDynamic||ir.propDep)&&(Dn=oe),jr=ir.append(q,Dn),k.optional(function(){ir.MISSING&&q.assert(j,"false","missing vertex count"),ir.DYNAMIC&&q.assert(Dn,jr+">=0","missing vertex count")})):(jr=Dn.def(le,".",Fc),k.optional(function(){q.assert(Dn,jr+">=0","missing vertex count")})),jr}var K=Z();function ve(ir){var jr=he[ir];return jr?jr.contextDep&&pe.contextDynamic||jr.propDep?jr.append(q,oe):jr.append(q,j):j.def(le,".",ir)}var be=ve(Bc),Ne=ve(Gy),ze=ie();if(typeof ze=="number"){if(ze===0)return}else oe("if(",ze,"){"),oe.exit("}");var Oe,rt;nt&&(Oe=ve(jy),rt=q.instancing);var kt=K+".type",cr=he.elements&&tf(he.elements);function Mt(){function ir(){oe(rt,".drawElementsInstancedANGLE(",[be,ze,kt,Ne+"<<(("+kt+"-"+RN+")>>1)",Oe],");")}function jr(){oe(rt,".drawArraysInstancedANGLE(",[be,Ne,ze,Oe],");")}K?cr?ir():(oe("if(",K,"){"),ir(),oe("}else{"),jr(),oe("}")):jr()}function Vt(){function ir(){oe(fe+".drawElements("+[be,ze,kt,Ne+"<<(("+kt+"-"+RN+")>>1)"]+");")}function jr(){oe(fe+".drawArrays("+[be,Ne,ze]+");")}K?cr?ir():(oe("if(",K,"){"),ir(),oe("}else{"),jr(),oe("}")):jr()}nt&&(typeof Oe!="number"||Oe>=0)?typeof Oe=="string"?(oe("if(",Oe,">0){"),Mt(),oe("}else if(",Oe,"<0){"),Vt(),oe("}")):Mt():Vt()}function wr(q,j,oe,pe,me){var fe=Kt(),le=fe.proc("body",me);return k.optional(function(){fe.commandStr=j.commandStr,fe.command=fe.link(j.commandStr)}),nt&&(fe.instancing=le.def(fe.shared.extensions,".angle_instanced_arrays")),q(fe,le,oe,pe),fe.compile().body}function Pr(q,j,oe,pe){jn(q,j),oe.useVAO?oe.drawVAO?j(q.shared.vao,".setVAO(",oe.drawVAO.append(q,j),");"):j(q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"):(j(q.shared.vao,".setVAO(null);"),$i(q,j,oe,pe.attributes,function(){return!0})),Qr(q,j,oe,pe.uniforms,function(){return!0}),Wt(q,j,j,oe)}function Un(q,j){var oe=q.proc("draw",1);jn(q,oe),ri(q,oe,j.context),ni(q,oe,j.framebuffer),bi(q,oe,j),Fi(q,oe,j.state),fr(q,oe,j,!1,!0);var pe=j.shader.progVar.append(q,oe);if(oe(q.shared.gl,".useProgram(",pe,".program);"),j.shader.program)Pr(q,oe,j,j.shader.program);else{oe(q.shared.vao,".setVAO(null);");var me=q.global.def("{}"),fe=oe.def(pe,".id"),le=oe.def(me,"[",fe,"]");oe(q.cond(le).then(le,".call(this,a0);").else(le,"=",me,"[",fe,"]=",q.link(function(he){return wr(Pr,q,j,he,1)}),"(",pe,");",le,".call(this,a0);"))}Object.keys(j.state).length>0&&oe(q.shared.current,".dirty=true;")}function Hs(q,j,oe,pe){q.batchId="a1",jn(q,j);function me(){return!0}$i(q,j,oe,pe.attributes,me),Qr(q,j,oe,pe.uniforms,me),Wt(q,j,j,oe)}function zc(q,j,oe,pe){jn(q,j);var me=oe.contextDep,fe=j.def(),le="a0",he="a1",Z=j.def();q.shared.props=Z,q.batchId=fe;var ie=q.scope(),K=q.scope();j(ie.entry,"for(",fe,"=0;",fe,"<",he,";++",fe,"){",Z,"=",le,"[",fe,"];",K,"}",ie.exit);function ve(kt){return kt.contextDep&&me||kt.propDep}function be(kt){return!ve(kt)}if(oe.needsContext&&ri(q,K,oe.context),oe.needsFramebuffer&&ni(q,K,oe.framebuffer),Fi(q,K,oe.state,ve),oe.profile&&ve(oe.profile)&&fr(q,K,oe,!1,!0),pe)oe.useVAO?oe.drawVAO?ve(oe.drawVAO)?K(q.shared.vao,".setVAO(",oe.drawVAO.append(q,K),");"):ie(q.shared.vao,".setVAO(",oe.drawVAO.append(q,ie),");"):ie(q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"):(ie(q.shared.vao,".setVAO(null);"),$i(q,ie,oe,pe.attributes,be),$i(q,K,oe,pe.attributes,ve)),Qr(q,ie,oe,pe.uniforms,be),Qr(q,K,oe,pe.uniforms,ve),Wt(q,ie,K,oe);else{var Ne=q.global.def("{}"),ze=oe.shader.progVar.append(q,K),Oe=K.def(ze,".id"),rt=K.def(Ne,"[",Oe,"]");K(q.shared.gl,".useProgram(",ze,".program);","if(!",rt,"){",rt,"=",Ne,"[",Oe,"]=",q.link(function(kt){return wr(Hs,q,oe,kt,2)}),"(",ze,");}",rt,".call(this,a0[",fe,"],",fe,");")}}function J(q,j){var oe=q.proc("batch",2);q.batchId="0",jn(q,oe);var pe=!1,me=!0;Object.keys(j.context).forEach(function(Ne){pe=pe||j.context[Ne].propDep}),pe||(ri(q,oe,j.context),me=!1);var fe=j.framebuffer,le=!1;fe?(fe.propDep?pe=le=!0:fe.contextDep&&pe&&(le=!0),le||ni(q,oe,fe)):ni(q,oe,null),j.state.viewport&&j.state.viewport.propDep&&(pe=!0);function he(Ne){return Ne.contextDep&&pe||Ne.propDep}bi(q,oe,j),Fi(q,oe,j.state,function(Ne){return!he(Ne)}),(!j.profile||!he(j.profile))&&fr(q,oe,j,!1,"a1"),j.contextDep=pe,j.needsContext=me,j.needsFramebuffer=le;var Z=j.shader.progVar;if(Z.contextDep&&pe||Z.propDep)zc(q,oe,j,null);else{var ie=Z.append(q,oe);if(oe(q.shared.gl,".useProgram(",ie,".program);"),j.shader.program)zc(q,oe,j,j.shader.program);else{oe(q.shared.vao,".setVAO(null);");var K=q.global.def("{}"),ve=oe.def(ie,".id"),be=oe.def(K,"[",ve,"]");oe(q.cond(be).then(be,".call(this,a0,a1);").else(be,"=",K,"[",ve,"]=",q.link(function(Ne){return wr(zc,q,j,Ne,2)}),"(",ie,");",be,".call(this,a0,a1);"))}}Object.keys(j.state).length>0&&oe(q.shared.current,".dirty=true;")}function Se(q,j){var oe=q.proc("scope",3);q.batchId="a2";var pe=q.shared,me=pe.current;ri(q,oe,j.context),j.framebuffer&&j.framebuffer.append(q,oe),hR(Object.keys(j.state)).forEach(function(le){var he=j.state[le],Z=he.append(q,oe);Gn(Z)?Z.forEach(function(ie,K){oe.set(q.next[le],"["+K+"]",ie)}):oe.set(pe.next,"."+le,Z)}),fr(q,oe,j,!0,!0),[Rc,Gy,Fc,jy,Bc].forEach(function(le){var he=j.draw[le];he&&oe.set(pe.draw,"."+le,""+he.append(q,oe))}),Object.keys(j.uniforms).forEach(function(le){var he=j.uniforms[le].append(q,oe);Array.isArray(he)&&(he="["+he.join()+"]"),oe.set(pe.uniforms,"["+W.id(le)+"]",he)}),Object.keys(j.attributes).forEach(function(le){var he=j.attributes[le].append(q,oe),Z=q.scopeAttrib(le);Object.keys(new ge).forEach(function(ie){oe.set(Z,"."+ie,he[ie])})}),j.scopeVAO&&oe.set(pe.vao,".targetVAO",j.scopeVAO.append(q,oe));function fe(le){var he=j.shader[le];he&&oe.set(pe.shader,"."+le,he.append(q,oe))}fe(Hp),fe(Xp),Object.keys(j.state).length>0&&(oe(me,".dirty=true;"),oe.exit(me,".dirty=true;")),oe("a1(",q.shared.context,",a0,",q.batchId,");")}function xe(q){if(!(typeof q!="object"||Gn(q))){for(var j=Object.keys(q),oe=0;oe<j.length;++oe)if(zr.isDynamic(q[j[oe]]))return!0;return!1}}function _t(q,j,oe){var pe=j.static[oe];if(!pe||!xe(pe))return;var me=q.global,fe=Object.keys(pe),le=!1,he=!1,Z=!1,ie=q.global.def("{}");fe.forEach(function(ve){var be=pe[ve];if(zr.isDynamic(be)){typeof be=="function"&&(be=pe[ve]=zr.unbox(be));var Ne=Da(be,null);le=le||Ne.thisDep,Z=Z||Ne.propDep,he=he||Ne.contextDep}else{switch(me(ie,".",ve,"="),typeof be){case"number":me(be);break;case"string":me('"',be,'"');break;case"object":Array.isArray(be)&&me("[",be.join(),"]");break;default:me(q.link(be));break}me(";")}});function K(ve,be){fe.forEach(function(Ne){var ze=pe[Ne];if(zr.isDynamic(ze)){var Oe=ve.invoke(be,ze);be(ie,".",Ne,"=",Oe,";")}})}j.dynamic[oe]=new zr.DynamicVariable($y,{thisDep:le,contextDep:he,propDep:Z,ref:ie,append:K}),delete j.static[oe]}function br(q,j,oe,pe,me){var fe=Kt();fe.stats=fe.link(me),Object.keys(j.static).forEach(function(he){_t(fe,j,he)}),Sne.forEach(function(he){_t(fe,q,he)});var le=Kn(q,j,oe,pe,fe);return Un(fe,le),Se(fe,le),J(fe,le),n(fe.compile(),{destroy:function(){le.shader.program.destroy()}})}return{next:wt,current:je,procs:function(){var q=Kt(),j=q.proc("poll"),oe=q.proc("refresh"),pe=q.block();j(pe),oe(pe);var me=q.shared,fe=me.gl,le=me.next,he=me.current;pe(he,".dirty=false;"),ni(q,j),ni(q,oe,null,!0);var Z;nt&&(Z=q.link(nt)),re.oes_vertex_array_object&&oe(q.link(re.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ie=0;ie<Ee.maxAttributes;++ie){var K=oe.def(me.attributes,"[",ie,"]"),ve=q.cond(K,".buffer");ve.then(fe,".enableVertexAttribArray(",ie,");",fe,".bindBuffer(",Od,",",K,".buffer.buffer);",fe,".vertexAttribPointer(",ie,",",K,".size,",K,".type,",K,".normalized,",K,".stride,",K,".offset);").else(fe,".disableVertexAttribArray(",ie,");",fe,".vertexAttrib4f(",ie,",",K,".x,",K,".y,",K,".z,",K,".w);",K,".buffer=null;"),oe(ve),nt&&oe(Z,".vertexAttribDivisorANGLE(",ie,",",K,".divisor);")}return oe(q.shared.vao,".currentVAO=null;",q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"),Object.keys(ut).forEach(function(be){var Ne=ut[be],ze=pe.def(le,".",be),Oe=q.block();Oe("if(",ze,"){",fe,".enable(",Ne,")}else{",fe,".disable(",Ne,")}",he,".",be,"=",ze,";"),oe(Oe),j("if(",ze,"!==",he,".",be,"){",Oe,"}")}),Object.keys(We).forEach(function(be){var Ne=We[be],ze=je[be],Oe,rt,kt=q.block();if(kt(fe,".",Ne,"("),Gn(ze)){var cr=ze.length;Oe=q.global.def(le,".",be),rt=q.global.def(he,".",be),kt(ui(cr,function(Mt){return Oe+"["+Mt+"]"}),");",ui(cr,function(Mt){return rt+"["+Mt+"]="+Oe+"["+Mt+"];"}).join("")),j("if(",ui(cr,function(Mt){return Oe+"["+Mt+"]!=="+rt+"["+Mt+"]"}).join("||"),"){",kt,"}")}else Oe=pe.def(le,".",be),rt=pe.def(he,".",be),kt(Oe,");",he,".",be,"=",Oe,";"),j("if(",Oe,"!==",rt,"){",kt,"}");oe(kt)}),q.compile()}(),compile:br}}function Wne(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Vne=34918,Hne=34919,vR=35007,Xne=function(I,W){if(!W.ext_disjoint_timer_query)return null;var re=[];function Ee(){return re.pop()||W.ext_disjoint_timer_query.createQueryEXT()}function $e(nt){re.push(nt)}var we=[];function Ae(nt){var pt=Ee();W.ext_disjoint_timer_query.beginQueryEXT(vR,pt),we.push(pt),Ze(we.length-1,we.length,nt)}function qe(){W.ext_disjoint_timer_query.endQueryEXT(vR)}function Je(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var it=[];function et(){return it.pop()||new Je}function st(nt){it.push(nt)}var ht=[];function Ze(nt,pt,je){var wt=et();wt.startQueryIndex=nt,wt.endQueryIndex=pt,wt.sum=0,wt.stats=je,ht.push(wt)}var lt=[],ge=[];function Te(){var nt,pt,je=we.length;if(je!==0){ge.length=Math.max(ge.length,je+1),lt.length=Math.max(lt.length,je+1),lt[0]=0,ge[0]=0;var wt=0;for(nt=0,pt=0;pt<we.length;++pt){var He=we[pt];W.ext_disjoint_timer_query.getQueryObjectEXT(He,Hne)?(wt+=W.ext_disjoint_timer_query.getQueryObjectEXT(He,Vne),$e(He)):we[nt++]=He,lt[pt+1]=wt,ge[pt+1]=nt}for(we.length=nt,nt=0,pt=0;pt<ht.length;++pt){var ut=ht[pt],We=ut.startQueryIndex,ft=ut.endQueryIndex;ut.sum+=lt[ft]-lt[We];var Bt=ge[We],tr=ge[ft];tr===Bt?(ut.stats.gpuTime+=ut.sum/1e6,st(ut)):(ut.startQueryIndex=Bt,ut.endQueryIndex=tr,ht[nt++]=ut)}ht.length=nt}}return{beginQuery:Ae,endQuery:qe,pushScopeStats:Ze,update:Te,getNumPendingQueries:function(){return we.length},clear:function(){re.push.apply(re,we);for(var nt=0;nt<re.length;nt++)W.ext_disjoint_timer_query.deleteQueryEXT(re[nt]);we.length=0,re.length=0},restore:function(){we.length=0,re.length=0}}},Yne=16384,Kne=256,qne=1024,Zne=34962,pR="webglcontextlost",gR="webglcontextrestored",mR=1,Qne=2,Jne=3;function yR(I,W){for(var re=0;re<I.length;++re)if(I[re]===W)return re;return-1}function eie(I){var W=Mc(I);if(!W)return null;var re=W.gl,Ee=re.getContextAttributes(),$e=re.isContextLost(),we=Cc(re,W);if(!we)return null;var Ae=Zr(),qe=Wne(),Je=we.extensions,it=Xne(re,Je),et=Lr(),st=re.drawingBufferWidth,ht=re.drawingBufferHeight,Ze={tick:0,time:0,viewportWidth:st,viewportHeight:ht,framebufferWidth:st,framebufferHeight:ht,drawingBufferWidth:st,drawingBufferHeight:ht,pixelRatio:W.pixelRatio},lt={},ge={elements:null,primitive:4,count:-1,offset:0,instances:-1},Te=$te(re,Je),nt=tre(re,qe,W,je),pt=dne(re,Je,Te,qe,nt);function je(Wt){return pt.destroyBuffer(Wt)}var wt=dre(re,Je,nt,qe),He=mne(re,Ae,qe,W),ut=Wre(re,Je,Te,function(){Bt.procs.poll()},Ze,qe,W),We=Vre(re,Je,Te,qe,W),ft=cne(re,Je,Te,ut,We,qe),Bt=Une(re,Ae,Je,Te,nt,wt,ut,ft,lt,pt,He,ge,Ze,it,W),tr=xne(re,ft,Bt.procs.poll,Ze,Ee,Je,Te),dt=Bt.next,ot=re.canvas,Ge=[],Kt=[],ur=[],St=[W.onDestroy],yr=null;function rr(){if(Ge.length===0){it&&it.update(),yr=null;return}yr=lr.next(rr),Fi();for(var Wt=Ge.length-1;Wt>=0;--Wt){var wr=Ge[Wt];wr&&wr(Ze,null,0)}re.flush(),it&&it.update()}function vr(){!yr&&Ge.length>0&&(yr=lr.next(rr))}function Gr(){yr&&(lr.cancel(rr),yr=null)}function Yn(Wt){Wt.preventDefault(),$e=!0,Gr(),Kt.forEach(function(wr){wr()})}function fi(Wt){re.getError(),$e=!1,we.restore(),He.restore(),nt.restore(),ut.restore(),We.restore(),ft.restore(),pt.restore(),it&&it.restore(),Bt.procs.refresh(),vr(),ur.forEach(function(wr){wr()})}ot&&(ot.addEventListener(pR,Yn,!1),ot.addEventListener(gR,fi,!1));function Sr(){Ge.length=0,Gr(),ot&&(ot.removeEventListener(pR,Yn),ot.removeEventListener(gR,fi)),He.clear(),ft.clear(),We.clear(),ut.clear(),wt.clear(),nt.clear(),pt.clear(),it&&it.clear(),St.forEach(function(Wt){Wt()})}function ti(Wt){k(!!Wt,"invalid args to regl({...})"),k.type(Wt,"object","invalid args to regl({...})");function wr(me){var fe=n({},me);delete fe.uniforms,delete fe.attributes,delete fe.context,delete fe.vao,"stencil"in fe&&fe.stencil.op&&(fe.stencil.opBack=fe.stencil.opFront=fe.stencil.op,delete fe.stencil.op);function le(he){if(he in fe){var Z=fe[he];delete fe[he],Object.keys(Z).forEach(function(ie){fe[he+"."+ie]=Z[ie]})}}return le("blend"),le("depth"),le("cull"),le("stencil"),le("polygonOffset"),le("scissor"),le("sample"),"vao"in me&&(fe.vao=me.vao),fe}function Pr(me,fe){var le={},he={};return Object.keys(me).forEach(function(Z){var ie=me[Z];if(zr.isDynamic(ie)){he[Z]=zr.unbox(ie,Z);return}else if(fe&&Array.isArray(ie)){for(var K=0;K<ie.length;++K)if(zr.isDynamic(ie[K])){he[Z]=zr.unbox(ie,Z);return}}le[Z]=ie}),{dynamic:he,static:le}}var Un=Pr(Wt.context||{},!0),Hs=Pr(Wt.uniforms||{},!0),zc=Pr(Wt.attributes||{},!1),J=Pr(wr(Wt),!1),Se={gpuTime:0,cpuTime:0,count:0},xe=Bt.compile(J,zc,Hs,Un,Se),_t=xe.draw,br=xe.batch,q=xe.scope,j=[];function oe(me){for(;j.length<me;)j.push(null);return j}function pe(me,fe){var le;if($e&&k.raise("context lost"),typeof me=="function")return q.call(this,null,me,0);if(typeof fe=="function")if(typeof me=="number")for(le=0;le<me;++le)q.call(this,null,fe,le);else if(Array.isArray(me))for(le=0;le<me.length;++le)q.call(this,me[le],fe,le);else return q.call(this,me,fe,0);else if(typeof me=="number"){if(me>0)return br.call(this,oe(me|0),me|0)}else if(Array.isArray(me)){if(me.length)return br.call(this,me,me.length)}else return _t.call(this,me)}return n(pe,{stats:Se,destroy:function(){xe.destroy()}})}var cn=ft.setFBO=ti({framebuffer:zr.define.call(null,mR,"framebuffer")});function Kn(Wt,wr){var Pr=0;Bt.procs.poll();var Un=wr.color;Un&&(re.clearColor(+Un[0]||0,+Un[1]||0,+Un[2]||0,+Un[3]||0),Pr|=Yne),"depth"in wr&&(re.clearDepth(+wr.depth),Pr|=Kne),"stencil"in wr&&(re.clearStencil(wr.stencil|0),Pr|=qne),k(!!Pr,"called regl.clear with no buffer specified"),re.clear(Pr)}function ri(Wt){if(k(typeof Wt=="object"&&Wt,"regl.clear() takes an object as input"),"framebuffer"in Wt)if(Wt.framebuffer&&Wt.framebuffer_reglType==="framebufferCube")for(var wr=0;wr<6;++wr)cn(n({framebuffer:Wt.framebuffer.faces[wr]},Wt),Kn);else cn(Wt,Kn);else Kn(null,Wt)}function ni(Wt){k.type(Wt,"function","regl.frame() callback must be a function"),Ge.push(Wt);function wr(){var Pr=yR(Ge,Wt);k(Pr>=0,"cannot cancel a frame twice");function Un(){var Hs=yR(Ge,Un);Ge[Hs]=Ge[Ge.length-1],Ge.length-=1,Ge.length<=0&&Gr()}Ge[Pr]=Un}return vr(),{cancel:wr}}function bi(){var Wt=dt.viewport,wr=dt.scissor_box;Wt[0]=Wt[1]=wr[0]=wr[1]=0,Ze.viewportWidth=Ze.framebufferWidth=Ze.drawingBufferWidth=Wt[2]=wr[2]=re.drawingBufferWidth,Ze.viewportHeight=Ze.framebufferHeight=Ze.drawingBufferHeight=Wt[3]=wr[3]=re.drawingBufferHeight}function Fi(){Ze.tick+=1,Ze.time=fr(),bi(),Bt.procs.poll()}function jn(){ut.refresh(),bi(),Bt.procs.refresh(),it&&it.update()}function fr(){return(Lr()-et)/1e3}jn();function $i(Wt,wr){k.type(wr,"function","listener callback must be a function");var Pr;switch(Wt){case"frame":return ni(wr);case"lost":Pr=Kt;break;case"restore":Pr=ur;break;case"destroy":Pr=St;break;default:k.raise("invalid event, must be one of frame,lost,restore,destroy")}return Pr.push(wr),{cancel:function(){for(var Un=0;Un<Pr.length;++Un)if(Pr[Un]===wr){Pr[Un]=Pr[Pr.length-1],Pr.pop();return}}}}var Qr=n(ti,{clear:ri,prop:zr.define.bind(null,mR),context:zr.define.bind(null,Qne),this:zr.define.bind(null,Jne),draw:ti({}),buffer:function(Wt){return nt.create(Wt,Zne,!1,!1)},elements:function(Wt){return wt.create(Wt,!1)},texture:ut.create2D,cube:ut.createCube,renderbuffer:We.create,framebuffer:ft.create,framebufferCube:ft.createCube,vao:pt.createVAO,attributes:Ee,frame:ni,on:$i,limits:Te,hasExtension:function(Wt){return Te.extensions.indexOf(Wt.toLowerCase())>=0},read:tr,destroy:Sr,_gl:re,_refresh:jn,poll:function(){Fi(),it&&it.update()},now:fr,stats:qe});return W.onDone(null,Qr),Qr}return eie})})(tK);var SNe=tK.exports;const MNe=Gl(SNe);var CNe=function(){function r(e,t){Fs(this,r),this.attribute=void 0,this.buffer=void 0;var n=t.buffer,i=t.offset,a=t.stride,o=t.normalized,s=t.size,l=t.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return $s(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),au,dg,ou,No,vg,lf,pg,V1,qs,Hc,qi,Zs,Qs,H1,ANe=(au={},mt(au,Qe.POINTS,"points"),mt(au,Qe.LINES,"lines"),mt(au,Qe.LINE_LOOP,"line loop"),mt(au,Qe.LINE_STRIP,"line strip"),mt(au,Qe.TRIANGLES,"triangles"),mt(au,Qe.TRIANGLE_FAN,"triangle fan"),mt(au,Qe.TRIANGLE_STRIP,"triangle strip"),au),rK=(dg={},mt(dg,Qe.STATIC_DRAW,"static"),mt(dg,Qe.DYNAMIC_DRAW,"dynamic"),mt(dg,Qe.STREAM_DRAW,"stream"),dg),VL=(ou={},mt(ou,Qe.BYTE,"int8"),mt(ou,Qe.UNSIGNED_INT,"int16"),mt(ou,Qe.INT,"int32"),mt(ou,Qe.UNSIGNED_BYTE,"uint8"),mt(ou,Qe.UNSIGNED_SHORT,"uint16"),mt(ou,Qe.UNSIGNED_INT,"uint32"),mt(ou,Qe.FLOAT,"float"),ou),TNe=(No={},mt(No,Qe.ALPHA,"alpha"),mt(No,Qe.LUMINANCE,"luminance"),mt(No,Qe.LUMINANCE_ALPHA,"luminance alpha"),mt(No,Qe.RGB,"rgb"),mt(No,Qe.RGBA,"rgba"),mt(No,Qe.RGBA4,"rgba4"),mt(No,Qe.RGB5_A1,"rgb5 a1"),mt(No,Qe.RGB565,"rgb565"),mt(No,Qe.DEPTH_COMPONENT,"depth"),mt(No,Qe.DEPTH_STENCIL,"depth stencil"),No),ONe=(vg={},mt(vg,Qe.DONT_CARE,"dont care"),mt(vg,Qe.NICEST,"nice"),mt(vg,Qe.FASTEST,"fast"),vg),LF=(lf={},mt(lf,Qe.NEAREST,"nearest"),mt(lf,Qe.LINEAR,"linear"),mt(lf,Qe.LINEAR_MIPMAP_LINEAR,"mipmap"),mt(lf,Qe.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),mt(lf,Qe.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),mt(lf,Qe.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),lf),PF=(pg={},mt(pg,Qe.REPEAT,"repeat"),mt(pg,Qe.CLAMP_TO_EDGE,"clamp"),mt(pg,Qe.MIRRORED_REPEAT,"mirror"),pg),kNe=(V1={},mt(V1,Qe.NONE,"none"),mt(V1,Qe.BROWSER_DEFAULT_WEBGL,"browser"),V1),INe=(qs={},mt(qs,Qe.NEVER,"never"),mt(qs,Qe.ALWAYS,"always"),mt(qs,Qe.LESS,"less"),mt(qs,Qe.LEQUAL,"lequal"),mt(qs,Qe.GREATER,"greater"),mt(qs,Qe.GEQUAL,"gequal"),mt(qs,Qe.EQUAL,"equal"),mt(qs,Qe.NOTEQUAL,"notequal"),qs),DF=(Hc={},mt(Hc,Qe.FUNC_ADD,"add"),mt(Hc,Qe.MIN_EXT,"min"),mt(Hc,Qe.MAX_EXT,"max"),mt(Hc,Qe.FUNC_SUBTRACT,"subtract"),mt(Hc,Qe.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Hc),X1=(qi={},mt(qi,Qe.ZERO,"zero"),mt(qi,Qe.ONE,"one"),mt(qi,Qe.SRC_COLOR,"src color"),mt(qi,Qe.ONE_MINUS_SRC_COLOR,"one minus src color"),mt(qi,Qe.SRC_ALPHA,"src alpha"),mt(qi,Qe.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),mt(qi,Qe.DST_COLOR,"dst color"),mt(qi,Qe.ONE_MINUS_DST_COLOR,"one minus dst color"),mt(qi,Qe.DST_ALPHA,"dst alpha"),mt(qi,Qe.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),mt(qi,Qe.CONSTANT_COLOR,"constant color"),mt(qi,Qe.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),mt(qi,Qe.CONSTANT_ALPHA,"constant alpha"),mt(qi,Qe.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),mt(qi,Qe.SRC_ALPHA_SATURATE,"src alpha saturate"),qi),LNe=(Zs={},mt(Zs,Qe.NEVER,"never"),mt(Zs,Qe.ALWAYS,"always"),mt(Zs,Qe.LESS,"less"),mt(Zs,Qe.LEQUAL,"lequal"),mt(Zs,Qe.GREATER,"greater"),mt(Zs,Qe.GEQUAL,"gequal"),mt(Zs,Qe.EQUAL,"equal"),mt(Zs,Qe.NOTEQUAL,"notequal"),Zs),$d=(Qs={},mt(Qs,Qe.ZERO,"zero"),mt(Qs,Qe.KEEP,"keep"),mt(Qs,Qe.REPLACE,"replace"),mt(Qs,Qe.INVERT,"invert"),mt(Qs,Qe.INCR,"increment"),mt(Qs,Qe.DECR,"decrement"),mt(Qs,Qe.INCR_WRAP,"increment wrap"),mt(Qs,Qe.DECR_WRAP,"decrement wrap"),Qs),PNe=(H1={},mt(H1,Qe.FRONT,"front"),mt(H1,Qe.BACK,"back"),H1),DNe=function(){function r(e,t){Fs(this,r),this.buffer=void 0;var n=t.data,i=t.usage,a=t.type;this.buffer=e.buffer({data:n,usage:rK[i||Qe.STATIC_DRAW],type:VL[a||Qe.UNSIGNED_BYTE]})}return $s(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var n=t.data,i=t.offset;this.buffer.subdata(n,i)}}]),r}();function DT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function NNe(r){if(Array.isArray(r))return DT(r)}function RNe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function BNe(r,e){if(r){if(typeof r=="string")return DT(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return DT(r,e)}}function FNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ne(r){return NNe(r)||RNe(r)||BNe(r)||FNe()}function NF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function RF(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(t),!0).forEach(function(n){mt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):NF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var zNe=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,BF=0,GNe=function(){function r(e,t){var n=this;Fs(this,r),this.reGl=e,this.context=t,this.entity=JY(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var f=u.name,c=u.type,h=u.data,d=u.isReferer,v=u.storageClass;if(v===tp.StorageBuffer){if(d)n.textureCache[f]={data:void 0},i["".concat(f,"Size")]=function(){return h.compiledBundle.context.output.textureSize};else{n.textureCache[f]=n.calcDataTexture(f,c,h);var p=n.textureCache[f],g=p.textureWidth,m=p.isOutput;i["".concat(f,"Size")]=[g,g],m&&(n.outputTextureName=f,n.context.needPingpong&&(n.outputTextureName="".concat(f,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(f,c,h)))}i[f]=function(){return n.textureCache[f].texture}}else if(v===tp.Uniform){if(h&&(Array.isArray(h)||Lw(h))&&h.length>16)throw new Error("invalid data type ".concat(c));i[f]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:zNe,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return $s(r,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()})}},{key:"readData",value:function(){var e=Pf(la.mark(function n(){var i=this,a,o,s,l,u,f,c,h;return la.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){v.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,f=u===void 0?Float32Array:u,c=[],l!==4)for(h=0;h<a.length;h+=4)l===1?c.push(a[h]):l===2?c.push(a[h],a[h+1]):c.push(a[h],a[h+1],a[h+2]);else c=a;return v.abrupt("return",new f(c.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"confirmInput",value:function(t,n){var i;this.entity===t.entity?(this.dynamicPingpong=!0,i=this):i=t,this.textureCache[n].id=i.getOuputDataTexture().id,this.textureCache[n].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,n){var i=this.context.uniforms.find(function(l){var u=l.name;return u===t});if(i){var a=this.calcDataTexture(t,i.type,n),o=a.texture,s=a.data;this.textureCache[t].data=s,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var n=t.data,i=t.textureWidth;return RF(RF({},t),{},{id:BF++,texture:this.reGl.texture({width:i,height:i,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(t,n,i){var a=1;n===Q0.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),f=Math.ceil(Math.sqrt(u)),c=f*f;u<c&&o.push.apply(o,$Ne(new Array((c-u)*4).fill(0)));var h=this.reGl.texture({width:f,height:f,data:o,type:"float"});return{id:BF++,data:o,originalDataLength:l,typedArrayConstructor:Lw(i)?i.constructor:void 0,textureWidth:f,texture:h,texelCount:u,elementsPerTexel:a,isOutput:t===this.context.output.name}}}]),r}(),jNe=function(){function r(e,t){Fs(this,r),this.elements=void 0;var n=t.data,i=t.usage,a=t.type,o=t.count;this.elements=e.elements({data:n,usage:rK[i||Qe.STATIC_DRAW],type:VL[a||Qe.UNSIGNED_BYTE],count:o})}return $s(r,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var n=t.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),r}(),UNe=function(){function r(e,t){Fs(this,r),this.framebuffer=void 0;var n=t.width,i=t.height,a=t.color,o=t.colors;t.depth,t.stencil;var s={width:n,height:i};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(s.color=a.get()),this.framebuffer=e.framebuffer(s)}return $s(r,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var n=t.width,i=t.height;this.framebuffer.resize(n,i)}}]),r}();function WNe(r,e){return function(t){return r(e(t))}}var VNe=WNe,HNe=VNe,XNe=HNe(Object.getPrototypeOf,Object),YNe=XNe,KNe=UL,qNe=YNe,ZNe=WL,QNe="[object Object]",JNe=Function.prototype,eRe=Object.prototype,nK=JNe.toString,tRe=eRe.hasOwnProperty,rRe=nK.call(Object);function nRe(r){if(!ZNe(r)||KNe(r)!=QNe)return!1;var e=qNe(r);if(e===null)return!0;var t=tRe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&nK.call(t)==rRe}var iRe=nRe;const aRe=Gl(iRe);function GM(r){var e={};return Object.keys(r).forEach(function(t){NT(t,r[t],e,"")}),e}function NT(r,e,t,n){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||Lw(e)||e===""||e.resize!==void 0){t["".concat(n&&n+".").concat(r)]=e;return}aRe(e)&&Object.keys(e).forEach(function(i){NT(i,e[i],t,"".concat(n&&n+".").concat(r))}),Array.isArray(e)&&e.forEach(function(i,a){Object.keys(i).forEach(function(o){NT(o,i[o],t,"".concat(n&&n+".").concat(r,"[").concat(a,"]"))})})}function FF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zd(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FF(Object(t),!0).forEach(function(n){mt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):FF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var oRe=function(){function r(e,t){Fs(this,r),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=t.vs,i=t.fs,a=t.defines,o=t.attributes,s=t.uniforms,l=t.primitive,u=t.count,f=t.elements,c=t.depth,h=t.blend,d=t.stencil,v=t.cull,p=t.instances,g=t.scissor,m=t.viewport,b={};s&&(this.uniforms=GM(s),Object.keys(s).forEach(function(E){b[E]=e.prop(E)}));var y={};Object.keys(o).forEach(function(E){y[E]=o[E].get()});var x=a&&this.generateDefines(a)||"",w={attributes:y,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(x,`
`).concat(i),uniforms:b,vert:`
`.concat(x,`
`).concat(n),primitive:ANe[l===void 0?Qe.TRIANGLES:l]};p&&(w.instances=p),u&&(w.count=u),f&&(w.elements=f.get()),g&&(w.scissor=g),m&&(w.viewport=m),this.initDepthDrawParams({depth:c},w),this.initBlendDrawParams({blend:h},w),this.initStencilDrawParams({stencil:d},w),this.initCullDrawParams({cull:v},w),this.drawCommand=e(w)}return $s(r,[{key:"addUniforms",value:function(t){this.uniforms=zd(zd({},this.uniforms),GM(t))}},{key:"draw",value:function(t){var n=zd(zd({},this.uniforms),GM(t.uniforms||{})),i={};Object.keys(n).forEach(function(a){var o=ep(n[a]);o==="boolean"||o==="number"||Array.isArray(n[a])||n[a].BYTES_PER_ELEMENT?i[a]=n[a]:o==="string"||(i[a]=n[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,n){var i=t.depth;i&&(n.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:INe[i.func||Qe.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,n){var i=t.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;n.blend={enable:!!a,func:{srcRGB:X1[o&&o.srcRGB||Qe.SRC_ALPHA],srcAlpha:X1[o&&o.srcAlpha||Qe.SRC_ALPHA],dstRGB:X1[o&&o.dstRGB||Qe.ONE_MINUS_SRC_ALPHA],dstAlpha:X1[o&&o.dstAlpha||Qe.ONE_MINUS_SRC_ALPHA]},equation:{rgb:DF[s&&s.rgb||Qe.FUNC_ADD],alpha:DF[s&&s.alpha||Qe.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,n){var i=t.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:Qe.ALWAYS,ref:0,mask:-1}:l,f=i.opFront,c=f===void 0?{fail:Qe.KEEP,zfail:Qe.KEEP,zpass:Qe.KEEP}:f,h=i.opBack,d=h===void 0?{fail:Qe.KEEP,zfail:Qe.KEEP,zpass:Qe.KEEP}:h;n.stencil={enable:!!a,mask:s,func:zd(zd({},u),{},{cmp:LNe[u.cmp]}),opFront:{fail:$d[c.fail],zfail:$d[c.zfail],zpass:$d[c.zpass]},opBack:{fail:$d[d.fail],zfail:$d[d.zfail],zpass:$d[d.zpass]}}}}},{key:"initCullDrawParams",value:function(t,n){var i=t.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?Qe.BACK:o;n.cull={enable:!!a,face:PNe[s]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(n){return"#define ".concat(n," ").concat(Number(t[n]))}).join(`
`)}}]),r}(),sRe=function(){function r(e,t){Fs(this,r),this.texture=void 0,this.width=void 0,this.height=void 0;var n=t.data,i=t.type,a=i===void 0?Qe.UNSIGNED_BYTE:i,o=t.width,s=t.height,l=t.flipY,u=l===void 0?!1:l,f=t.format,c=f===void 0?Qe.RGBA:f,h=t.mipmap,d=h===void 0?!1:h,v=t.wrapS,p=v===void 0?Qe.CLAMP_TO_EDGE:v,g=t.wrapT,m=g===void 0?Qe.CLAMP_TO_EDGE:g,b=t.aniso,y=b===void 0?0:b,x=t.alignment,w=x===void 0?1:x,E=t.premultiplyAlpha,_=E===void 0?!1:E,S=t.mag,C=S===void 0?Qe.NEAREST:S,M=t.min,T=M===void 0?Qe.NEAREST:M,A=t.colorSpace,O=A===void 0?Qe.BROWSER_DEFAULT_WEBGL:A;this.width=o,this.height=s;var L={width:o,height:s,type:VL[a],format:TNe[c],wrapS:PF[p],wrapT:PF[m],mag:LF[C],min:LF[T],alignment:w,flipY:u,colorSpace:kNe[O],premultiplyAlpha:_,aniso:y};n&&(L.data=n),typeof d=="number"?L.mipmap=ONe[d]:typeof d=="boolean"&&(L.mipmap=d),this.texture=e.texture(L)}return $s(r,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var n=t.width,i=t.height;this.texture.resize(n,i),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),r}(),lRe=function(){function r(){var e=this;Fs(this,r),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Pf(la.mark(function n(i){return la.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=Pf(la.mark(function l(u){var f;return la.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){h.next=5;break}return h.next=3,i.uniforms[u].load();case 3:f=h.sent,i.uniforms[u]=f;case 5:case"end":return h.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new oRe(e.gl,i));case 4:case"end":return o.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new CNe(e.gl,t)},this.createBuffer=function(t){return new DNe(e.gl,t)},this.createElements=function(t){return new jNe(e.gl,t)},this.createTexture2D=function(t){return new sRe(e.gl,t)},this.createFramebuffer=function(t){return new UNe(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Pf(la.mark(function n(i){return la.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new GNe(e.gl,i));case 1:case"end":return o.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,i=t.depth,a=t.stencil,o=t.framebuffer,s=o===void 0?null:o,l={color:n,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),e.gl.clear(l)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qe.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qe.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,i=t.y,a=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,i,a,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,i=t.x,a=t.y,o=t.width,s=t.height,l={x:i,y:a,width:o,height:s};return n&&(l.framebuffer=n.get()),e.gl.read(l)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return $s(r,[{key:"init",value:function(){var e=Pf(la.mark(function n(i){return la.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){MNe({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(f,c){(f||!c)&&l(f),s(c)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function t(n){return e.apply(this,arguments)}return t}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),r}(),uRe=function(){function r(){Fs(this,r),this.engine=void 0,this.configService=new wNe}return $s(r,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return JY()}},{key:"createKernel",value:function(t){var n=new eK(this.engine,this.configService);return typeof t=="string"?n.setBundle(JSON.parse(t)):n.setBundle(t),n.init(),n}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=new r;return n.setConfig(t),n.setEngine(new lRe),n}}]),r}();const fRe=Object.freeze(Object.defineProperty({__proto__:null,Kernel:eK,World:uRe},Symbol.toStringTag,{value:"Module"})),iK=jl(fRe);var mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.arrayToTextureData=mo.attributesToTextureData=mo.buildTextureDataWithTwoEdgeAttr=mo.buildTextureData=mo.proccessToFunc=void 0;var cRe=Vn(),Pw=d_,hRe=function(r,e){var t;return r?(0,cRe.isNumber)(r)?t=function(){return r}:t=r:t=function(){return e||1},t};mo.proccessToFunc=hRe;var dRe=function(r,e){var t=[],n=[],i={},a=0;for(a=0;a<r.length;a++){var o=r[a];i[o.id]=a,t.push(o.x),t.push(o.y),t.push(0),t.push(0),n.push([])}for(a=0;a<e.length;a++){var s=e[a],l=(0,Pw.getEdgeTerminal)(s,"source"),u=(0,Pw.getEdgeTerminal)(s,"target");!isNaN(i[l])&&!isNaN(i[u])&&(n[i[l]].push(i[u]),n[i[u]].push(i[l]))}var f=0;for(a=0;a<r.length;a++){var c=t.length,h=n[a],d=h.length;t[a*4+2]=c,t[a*4+3]=d,f=Math.max(f,d);for(var v=0;v<d;++v){var p=h[v];t.push(+p)}}for(;t.length%4!==0;)t.push(0);return{maxEdgePerVetex:f,array:new Float32Array(t)}};mo.buildTextureData=dRe;var vRe=function(r,e,t,n){var i=[],a=[],o={},s=0;for(s=0;s<r.length;s++){var l=r[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var u=e[s],f=(0,Pw.getEdgeTerminal)(u,"source"),c=(0,Pw.getEdgeTerminal)(u,"target");a[o[f]].push(o[c]),a[o[f]].push(t(u)),a[o[f]].push(n(u)),a[o[f]].push(0),a[o[c]].push(o[f]),a[o[c]].push(t(u)),a[o[c]].push(n(u)),a[o[c]].push(0)}var h=0;for(s=0;s<r.length;s++){var d=i.length,v=a[s],p=v.length;i[s*4+2]=d+1048576*p/4,i[s*4+3]=0,h=Math.max(h,p/4);for(var g=0;g<p;++g){var m=v[g];i.push(+m)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}};mo.buildTextureDataWithTwoEdgeAttr=vRe;var pRe=function(r,e){var t=[],n=r.length,i={};return e.forEach(function(a){r.forEach(function(o,s){if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),t.push(i[a[o]]),s===n-1)for(;t.length%4!==0;)t.push(0)})}),{array:new Float32Array(t),count:Object.keys(i).length}};mo.attributesToTextureData=pRe;var gRe=function(r){for(var e=[],t=r.length,n=r[0].length,i=function(o){r.forEach(function(s,l){if(e.push(s[o]),l===t-1)for(;e.length%4!==0;)e.push(0)})},a=0;a<n;a++)i(a);return new Float32Array(e)};mo.arrayToTextureData=gRe;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.clusterBundle=xl.clusterCode=xl.fruchtermanBundle=xl.fruchtermanCode=void 0;xl.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;xl.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';xl.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;xl.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var mRe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Y1=Re&&Re.__awaiter||function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(f){try{u(n.next(f))}catch(c){o(c)}}function l(f){try{u(n.throw(f))}catch(c){o(c)}}function u(f){f.done?a(f.value):i(f.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},K1=Re&&Re.__generator||function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(f){return l([u,f])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ry,"__esModule",{value:!0});ry.FruchtermanGPULayout=void 0;var yRe=ei,Gd=Vn(),$F=iK,zF=mo,GF=xl,bRe=Lu,xRe=function(r){mRe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return Y1(this,void 0,void 0,function(){var t,n,i,a,o,s=this;return K1(this,function(l){switch(l.label){case 0:return t=this,n=t.nodes,!n||n.length===0?(t.onLayoutEnd&&t.onLayoutEnd(),[2]):(!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),i=t.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(u,f){(0,Gd.isNumber)(u.x)||(u.x=Math.random()*s.width),(0,Gd.isNumber)(u.y)||(u.y=Math.random()*s.height),a[u.id]=u,o[u.id]=f}),t.nodeMap=a,t.nodeIdxMap=o,[4,t.run()]));case 1:return l.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,n){return Y1(this,void 0,void 0,function(){var i,a,o,s,l,u=this;return K1(this,function(f){switch(f.label){case 0:return i=this,a=i.nodes,o=i.center,!a||a.length===0?[2]:a.length===1?(a[0].x=o[0],a[0].y=o[1],[2]):(s={},l={},a.forEach(function(c,h){(0,Gd.isNumber)(c.x)||(c.x=Math.random()*u.width),(0,Gd.isNumber)(c.y)||(c.y=Math.random()*u.height),s[c.id]=c,l[c.id]=h}),i.nodeMap=s,i.nodeIdxMap=l,[4,i.run(t,n)]);case 1:return f.sent(),[2]}})})},e.prototype.run=function(t,n){return Y1(this,void 0,void 0,function(){var i,a,o,s,l,u,f,c,h,d,v,p,g,m,b,y,x,w,E,_,S,C,M,T,A,O,L=this;return K1(this,function(N){switch(N.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,l=i.center,u=i.height*i.width,f=Math.sqrt(u)/10,c=u/(a.length+1),h=Math.sqrt(c),d=i.speed,v=i.clustering,p=(0,zF.attributesToTextureData)([i.clusterField],a),g=p.array,m=p.count,a.forEach(function(P,R){var G=0,D=0;(0,Gd.isNumber)(P.fx)&&(0,Gd.isNumber)(P.fy)&&(G=P.fx||.001,D=P.fy||.001),g[4*R+1]=G,g[4*R+2]=D}),b=a.length,y=(0,zF.buildTextureData)(a,o),x=y.maxEdgePerVetex,w=y.array,E=i.workerEnabled,E?_=$F.World.create({canvas:t,engineOptions:{supportCompute:!0}}):_=$F.World.create({engineOptions:{supportCompute:!0}}),S=i.onLayoutEnd,C=[],M=0;M<m;M++)C.push(0,0,0,0);return T=_.createKernel(GF.fruchtermanBundle).setDispatch([b,1,1]).setBinding({u_Data:w,u_K:h,u_K2:c,u_Gravity:i.gravity,u_ClusterGravity:i.clusterGravity||i.gravity||1,u_Speed:d,u_MaxDisplace:f,u_Clustering:v?1:0,u_Center:l,u_AttributeArray:g,u_ClusterCenters:C,MAX_EDGE_PER_VERTEX:x,VERTEX_COUNT:b}),v&&(A=_.createKernel(GF.clusterBundle).setDispatch([m,1,1]).setBinding({u_Data:w,u_NodeAttributes:g,u_ClusterCenters:C,VERTEX_COUNT:b,CLUSTER_COUNT:m})),O=function(){return Y1(L,void 0,void 0,function(){var P,R;return K1(this,function(G){switch(G.label){case 0:P=0,G.label=1;case 1:return P<s?[4,T.execute()]:[3,6];case 2:return G.sent(),v?(A.setBinding({u_Data:T}),[4,A.execute()]):[3,4];case 3:G.sent(),T.setBinding({u_ClusterCenters:A}),G.label=4;case 4:T.setBinding({u_MaxDisplace:f*=.99}),G.label=5;case 5:return P++,[3,1];case 6:return[4,T.getOutput()];case 7:return R=G.sent(),t?n.postMessage({type:bRe.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:R}):a.forEach(function(D,B){var Y=R[4*B],ee=R[4*B+1];D.x=Y,D.y=ee}),S&&S(),[2]}})})},[4,O()];case 1:return N.sent(),[2]}})})},e.prototype.getType=function(){return"fruchterman-gpu"},e}(yRe.Base);ry.FruchtermanGPULayout=xRe;var ny={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.aveMovementBundle=wl.aveMovementCode=wl.gForceBundle=wl.gForceCode=void 0;wl.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 每个节点属性占两个数组中各一格
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;wl.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';wl.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;wl.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var wRe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jM=Re&&Re.__awaiter||function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(f){try{u(n.next(f))}catch(c){o(c)}}function l(f){try{u(n.throw(f))}catch(c){o(c)}}function u(f){f.done?a(f.value):i(f.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},UM=Re&&Re.__generator||function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(f){return l([u,f])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ny,"__esModule",{value:!0});ny.GForceGPULayout=void 0;var ERe=ei,su=Vn(),jF=iK,lu=mo,_Re=d_,UF=wl,SRe=Lu,MRe=function(r){wRe(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return jM(this,void 0,void 0,function(){var t,n,i,a,o;return UM(this,function(s){switch(s.label){case 0:return t=this,n=t.nodes,!n||n.length===0?(t.onLayoutEnd&&t.onLayoutEnd(),[2]):(!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),i=t.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(l,u){(0,su.isNumber)(l.x)||(l.x=Math.random()*t.width),(0,su.isNumber)(l.y)||(l.y=Math.random()*t.height),a[l.id]=l,o[l.id]=u}),t.nodeMap=a,t.nodeIdxMap=o,t.nodeStrength=(0,lu.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,lu.proccessToFunc)(t.edgeStrength,1),[4,t.run()]));case 1:return s.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,n){var i=this,a=i.nodes,o=i.center;if(!(!a||a.length===0)){if(a.length===1){a[0].x=o[0],a[0].y=o[1];return}var s={},l={};a.forEach(function(u,f){(0,su.isNumber)(u.x)||(u.x=Math.random()*i.width),(0,su.isNumber)(u.y)||(u.y=Math.random()*i.height),s[u.id]=u,l[u.id]=f}),i.nodeMap=s,i.nodeIdxMap=l,i.nodeStrength=(0,lu.proccessToFunc)(i.nodeStrength,1),i.edgeStrength=(0,lu.proccessToFunc)(i.edgeStrength,1),i.run(t,n)}},e.prototype.run=function(t,n){return jM(this,void 0,void 0,function(){var i,a,o,s,l,u,f,c,h,d,v,p,g,m,b,y,x,w,E,_,S,C,M,T,A,O,L,N=this;return UM(this,function(P){switch(P.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),l=a.length,i.linkDistance=(0,lu.proccessToFunc)(i.linkDistance),i.edgeStrength=(0,lu.proccessToFunc)(i.edgeStrength),u=(0,lu.buildTextureDataWithTwoEdgeAttr)(a,o,i.linkDistance,i.edgeStrength),f=u.maxEdgePerVetex,c=u.array,i.degrees=(0,_Re.getDegree)(a.length,i.nodeIdxMap,o).map(function(R){return R.all}),h=[],d=[],v=[],p=[],g=[],m=[],b=[],i.getMass||(i.getMass=function(R){return i.degrees[i.nodeIdxMap[R.id]]||1}),y=i.gravity,x=i.center,a.forEach(function(R,G){h.push(i.getMass(R)),d.push(i.nodeStrength(R)),i.degrees[G]||(i.degrees[G]=0);var D=[x[0],x[1],y];if(i.getCenter){var B=i.getCenter(R,i.degrees[G]);B&&(0,su.isNumber)(B[0])&&(0,su.isNumber)(B[1])&&(0,su.isNumber)(B[2])&&(D=B)}v.push(D[0]),p.push(D[1]),g.push(D[2]),(0,su.isNumber)(R.fx)&&(0,su.isNumber)(R.fy)?(m.push(R.fx||.001),b.push(R.fy||.001)):(m.push(0),b.push(0))}),w=(0,lu.arrayToTextureData)([h,i.degrees,d,m]),E=(0,lu.arrayToTextureData)([v,p,g,b]),_=i.workerEnabled,_?S=jF.World.create({canvas:t,engineOptions:{supportCompute:!0}}):S=jF.World.create({engineOptions:{supportCompute:!0}}),C=i.onLayoutEnd,M=[],c.forEach(function(R){M.push(R)}),T=0;T<4;T++)M.push(0);return A=S.createKernel(UF.gForceBundle).setDispatch([l,1,1]).setBinding({u_Data:c,u_damping:i.damping,u_maxSpeed:i.maxSpeed,u_minMovement:i.minMovement,u_coulombDisScale:i.coulombDisScale,u_factor:i.factor,u_NodeAttributeArray1:w,u_NodeAttributeArray2:E,MAX_EDGE_PER_VERTEX:f,VERTEX_COUNT:l,u_AveMovement:M,u_interval:i.interval}),O=S.createKernel(UF.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:c,VERTEX_COUNT:l,u_AveMovement:[0,0,0,0]}),L=function(){return jM(N,void 0,void 0,function(){var R,G,D;return UM(this,function(B){switch(B.label){case 0:R=0,B.label=1;case 1:return R<s?[4,A.execute()]:[3,5];case 2:return B.sent(),O.setBinding({u_Data:A}),[4,O.execute()];case 3:B.sent(),G=Math.max(.02,i.interval-R*.002),A.setBinding({u_interval:G,u_AveMovement:O}),B.label=4;case 4:return R++,[3,1];case 5:return[4,A.getOutput()];case 6:return D=B.sent(),t?n.postMessage({type:SRe.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:D}):a.forEach(function(Y,ee){var ne=D[4*ee],Q=D[4*ee+1];Y.x=ne,Y.y=Q}),C&&C(),[2]}})})},[4,L()];case 1:return P.sent(),[2]}})})},e.prototype.getType=function(){return"gForce-gpu"},e}(ERe.Base);ny.GForceGPULayout=MRe;var iy={},CRe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(iy,"__esModule",{value:!0});iy.ComboForceLayout=void 0;var ARe=ei,Cr=Vn(),TRe=function(r){CRe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t=this,n=t.nodes,i=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight);var a=t.center,o=t.velocityDecay,s=t.comboMap;t.previousLayouted||t.initPos(s);for(var l=function(h){var d=[];n.forEach(function(v,p){d[p]={x:0,y:0}}),t.applyCalculate(d),t.applyComboCenterForce(d),n.forEach(function(v,p){!(0,Cr.isNumber)(v.x)||!(0,Cr.isNumber)(v.y)||(v.x+=d[p].x*o,v.y+=d[p].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<i;u++)l();var f=[0,0];n.forEach(function(h){!(0,Cr.isNumber)(h.x)||!(0,Cr.isNumber)(h.y)||(f[0]+=h.x,f[1]+=h.y)}),f[0]/=n.length,f[1]/=n.length;var c=[a[0]-f[0],a[1]-f[1]];n.forEach(function(h,d){!(0,Cr.isNumber)(h.x)||!(0,Cr.isNumber)(h.y)||(h.x+=c[0],h.y+=c[1])}),t.combos.forEach(function(h){var d=s[h.id];d&&d.empty&&(h.x=d.cx||h.x,h.y=d.cy||h.y)}),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this,n=t.edges,i=t.nodes,a=t.combos,o={},s={},l={};i.forEach(function(R,G){s[R.id]=R,l[R.id]=G}),t.nodeMap=s,t.indexMap=l;var u={};a.forEach(function(R){u[R.id]=R}),t.oriComboMap=u,t.comboMap=t.getComboMap();var f=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||f,t.preventNodeOverlap=t.preventNodeOverlap||f;var c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var h=0;h<n.length;++h){var d=(0,Cr.getEdgeTerminal)(n[h],"source"),v=(0,Cr.getEdgeTerminal)(n[h],"target");o[d]?o[d]++:o[d]=1,o[v]?o[v]++:o[v]=1}for(var p=[],h=0;h<n.length;++h){var d=(0,Cr.getEdgeTerminal)(n[h],"source"),v=(0,Cr.getEdgeTerminal)(n[h],"target");p[h]=o[d]/(o[d]+o[v])}this.bias=p;var g=t.nodeSize,m=t.nodeSpacing,b,y;if((0,Cr.isNumber)(m)?y=function(){return m}:(0,Cr.isFunction)(m)?y=m:y=function(){return 0},this.nodeSpacing=y,!g)b=function(R){if(R.size){if((0,Cr.isArray)(R.size)){var G=R.size[0]>R.size[1]?R.size[0]:R.size[1];return G/2}if((0,Cr.isObject)(R.size)){var G=R.size.width>R.size.height?R.size.width:R.size.height;return G/2}return R.size/2}return 10};else if((0,Cr.isFunction)(g))b=function(R){return g(R)};else if((0,Cr.isArray)(g)){var x=g[0]>g[1]?g[0]:g[1],w=x/2;b=function(R){return w}}else{var E=g/2;b=function(R){return E}}this.nodeSize=b;var _=t.comboSpacing,S;(0,Cr.isNumber)(_)?S=function(){return _}:(0,Cr.isFunction)(_)?S=_:S=function(){return 0},this.comboSpacing=S;var C=t.comboPadding,M;(0,Cr.isNumber)(C)?M=function(){return C}:(0,Cr.isArray)(C)?M=function(){return Math.max.apply(null,C)}:(0,Cr.isFunction)(C)?M=C:M=function(){return 0},this.comboPadding=M;var T=this.linkDistance,A;T||(T=10),(0,Cr.isNumber)(T)?A=function(R){return T}:A=T,this.linkDistance=A;var O=this.edgeStrength,L;O||(O=1),(0,Cr.isNumber)(O)?L=function(R){return O}:L=O,this.edgeStrength=L;var N=this.nodeStrength,P;N||(N=30),(0,Cr.isNumber)(N)?P=function(R){return N}:P=N,this.nodeStrength=P},e.prototype.initPos=function(t){var n=this,i=n.nodes;i.forEach(function(a,o){var s=a.comboId,l=t[s];s&&l?(a.x=l.cx+100/(o+1),a.y=l.cy+100/(o+1)):(a.x=100/(o+1),a.y=100/(o+1))})},e.prototype.getComboMap=function(){var t=this,n=t.nodeMap,i=t.comboTrees,a=t.oriComboMap,o={};return(i||[]).forEach(function(s){var l=[];(0,Cr.traverseTreeUp)(s,function(u){if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){var f={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};o[u.id]=f}var c=u.children;c&&c.forEach(function(v){if(!o[v.id]&&!n[v.id])return!0;l.push(v)});var h=o[u.id];if(h.cx=0,h.cy=0,l.length===0){h.empty=!0;var d=a[u.id];h.cx=d.x,h.cy=d.y}return l.forEach(function(v){if(h.count++,v.itemType!=="node"){var p=o[v.id];(0,Cr.isNumber)(p.cx)&&(h.cx+=p.cx),(0,Cr.isNumber)(p.cy)&&(h.cy+=p.cy);return}var g=n[v.id];g&&((0,Cr.isNumber)(g.x)&&(h.cx+=g.x),(0,Cr.isNumber)(g.y)&&(h.cy+=g.y))}),h.cx/=h.count||1,h.cy/=h.count||1,h.children=l,!0})}),o},e.prototype.applyComboCenterForce=function(t){var n=this,i=n.gravity,a=n.comboGravity||i,o=this.alpha,s=n.comboTrees,l=n.indexMap,u=n.nodeMap,f=n.comboMap;(s||[]).forEach(function(c){(0,Cr.traverseTreeUp)(c,function(h){if(h.itemType==="node")return!0;var d=f[h.id];if(!d)return!0;var v=f[h.id],p=(v.depth+1)/10*.5,g=v.cx,m=v.cy;return v.cx=0,v.cy=0,v.children.forEach(function(b){if(b.itemType!=="node"){var y=f[b.id];y&&(0,Cr.isNumber)(y.cx)&&(v.cx+=y.cx),y&&(0,Cr.isNumber)(y.cy)&&(v.cy+=y.cy);return}var x=u[b.id],w=x.x-g||.005,E=x.y-m||.005,_=Math.sqrt(w*w+E*E),S=l[x.id],C=a*o/_*p;t[S].x-=w*C,t[S].y-=E*C,(0,Cr.isNumber)(x.x)&&(v.cx+=x.x),(0,Cr.isNumber)(x.y)&&(v.cy+=x.y)}),v.cx/=v.count||1,v.cy/=v.count||1,!0})})},e.prototype.applyCalculate=function(t){var n=this,i=n.comboMap,a=n.nodes,o={};a.forEach(function(l,u){a.forEach(function(f,c){if(!(u<c)){var h=l.x-f.x||.005,d=l.y-f.y||.005,v=h*h+d*d,p=Math.sqrt(v);v<1&&(v=p),o["".concat(l.id,"-").concat(f.id)]={vx:h,vy:d,vl2:v,vl:p},o["".concat(f.id,"-").concat(l.id)]={vl2:v,vl:p,vx:-h,vy:-d}}})}),n.updateComboSizes(i),n.calRepulsive(t,o),n.calAttractive(t,o);var s=n.preventComboOverlap;s&&n.comboNonOverlapping(t,i)},e.prototype.updateComboSizes=function(t){var n=this,i=n.comboTrees,a=n.nodeMap,o=n.nodeSize,s=n.comboSpacing,l=n.comboPadding;(i||[]).forEach(function(u){var f=[];(0,Cr.traverseTreeUp)(u,function(c){if(c.itemType==="node")return!0;var h=t[c.id];if(!h)return!1;var d=c.children;d&&d.forEach(function(g){!t[g.id]&&!a[g.id]||f.push(g)}),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0,f.forEach(function(g){if(g.itemType!=="node")return!0;var m=a[g.id];if(!m)return!0;var b=o(m),y=m.x-b,x=m.y-b,w=m.x+b,E=m.y+b;h.minX>y&&(h.minX=y),h.minY>x&&(h.minY=x),h.maxX<w&&(h.maxX=w),h.maxY<E&&(h.maxY=E)});var v=n.oriComboMap[c.id].size||10;(0,Cr.isArray)(v)&&(v=v[0]);var p=Math.max(h.maxX-h.minX,h.maxY-h.minY,v);return h.r=p/2+s(h)/2+l(h),!0})})},e.prototype.comboNonOverlapping=function(t,n){var i=this,a=i.comboTree,o=i.comboCollideStrength,s=i.indexMap,l=i.nodeMap;(0,Cr.traverseTreeUp)(a,function(u){if(!n[u.id]&&!l[u.id]&&u.id!=="comboTreeRoot")return!1;var f=u.children;return f&&f.length>1&&f.forEach(function(c,h){if(c.itemType==="node")return!1;var d=n[c.id];d&&f.forEach(function(v,p){if(h<=p||v.itemType==="node")return!1;var g=n[v.id];if(!g)return!1;var m=d.cx-g.cx||.005,b=d.cy-g.cy||.005,y=m*m+b*b,x=d.r||1,w=g.r||1,E=x+w,_=w*w,S=x*x;if(y<E*E){var C=c.children;if(!C||C.length===0)return!1;var M=v.children;if(!M||M.length===0)return!1;var T=Math.sqrt(y),A=(E-T)/T*o,O=m*A,L=b*A,N=_/(S+_),P=1-N;C.forEach(function(R){if(R.itemType!=="node")return!1;if(l[R.id]){var G=s[R.id];M.forEach(function(D){if(D.itemType!=="node"||!l[D.id])return!1;var B=s[D.id];t[G].x+=O*N,t[G].y+=L*N,t[B].x-=O*P,t[B].y-=L*P})}})}})}),!0})},e.prototype.calRepulsive=function(t,n){var i=this,a=i.nodes,o=i.width*i.optimizeRangeFactor,s=i.nodeStrength,l=i.alpha,u=i.nodeCollideStrength,f=i.preventNodeOverlap,c=i.nodeSize,h=i.nodeSpacing,d=i.depthRepulsiveForceScale,v=i.center;a.forEach(function(p,g){if(!(!p.x||!p.y)){if(v){var m=i.gravity,b=p.x-v[0]||.005,y=p.y-v[1]||.005,x=Math.sqrt(b*b+y*y);t[g].x-=b*m*l/x,t[g].y-=y*m*l/x}a.forEach(function(w,E){if(g!==E&&!(!w.x||!w.y)){var _=n["".concat(p.id,"-").concat(w.id)],S=_.vl2,C=_.vl;if(!(C>o)){var M=n["".concat(p.id,"-").concat(w.id)],T=M.vx,A=M.vy,O=Math.log(Math.abs(w.depth-p.depth)/10)+1||1;O=O<1?1:O,w.comboId!==p.comboId&&(O+=1);var L=O?Math.pow(d,O):1,N=s(w)*l/S*L;if(t[g].x+=T*N,t[g].y+=A*N,g<E&&f){var P=c(p)+h(p)||1,R=c(w)+h(w)||1,G=P+R;if(S<G*G){var D=(G-C)/C*u,B=R*R,Y=B/(P*P+B),ee=T*D,ne=A*D;t[g].x+=ee*Y,t[g].y+=ne*Y,Y=1-Y,t[E].x-=ee*Y,t[E].y-=ne*Y}}}}})}})},e.prototype.calAttractive=function(t,n){var i=this,a=i.edges,o=i.linkDistance,s=i.alpha,l=i.edgeStrength,u=i.bias,f=i.depthAttractiveForceScale;a.forEach(function(c,h){var d=(0,Cr.getEdgeTerminal)(c,"source"),v=(0,Cr.getEdgeTerminal)(c,"target");if(!(!d||!v||d===v)){var p=i.indexMap[d],g=i.indexMap[v],m=i.nodeMap[d],b=i.nodeMap[v];if(!(!m||!b)){var y=m.depth===b.depth?0:Math.log(Math.abs(m.depth-b.depth)/10);m.comboId===b.comboId&&(y=y/2);var x=y?Math.pow(f,y):1;if(m.comboId!==b.comboId&&x===1?x=f/2:m.comboId===b.comboId&&(x=2),!(!(0,Cr.isNumber)(b.x)||!(0,Cr.isNumber)(m.x)||!(0,Cr.isNumber)(b.y)||!(0,Cr.isNumber)(m.y))){var w=n["".concat(v,"-").concat(d)],E=w.vl,_=w.vx,S=w.vy,C=(E-o(c))/E*s*l(c)*x,M=_*C,T=S*C,A=u[h];t[g].x-=M*A,t[g].y-=T*A,t[p].x+=M*(1-A),t[p].y+=T*(1-A)}}}})},e.prototype.getType=function(){return"comboForce"},e}(ARe.Base);iy.ComboForceLayout=TRe;var gg={},WF;function aK(){if(WF)return gg;WF=1;var r=Re&&Re.__extends||function(){var s=function(l,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(f[h]=c[h])},s(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");s(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),e=Re&&Re.__assign||function(){return e=Object.assign||function(s){for(var l,u=1,f=arguments.length;u<f;u++){l=arguments[u];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s},e.apply(this,arguments)};Object.defineProperty(gg,"__esModule",{value:!0}),gg.ComboCombinedLayout=void 0;var t=Lu,n=ei,i=Vn(),a=dK(),o=function(s){r(l,s);function l(u){var f=s.call(this)||this;return f.center=[0,0],f.nodes=[],f.edges=[],f.combos=[],f.comboEdges=[],f.comboPadding=10,f.comboTrees=[],f.updateCfg(u),f}return l.prototype.getDefaultCfg=function(){return{}},l.prototype.execute=function(){var u=this,f=u.nodes,c=u.center;if(!f||f.length===0){u.onLayoutEnd&&u.onLayoutEnd();return}if(f.length===1){f[0].x=c[0],f[0].y=c[1],u.onLayoutEnd&&u.onLayoutEnd();return}u.initVals(),u.run(),u.onLayoutEnd&&u.onLayoutEnd()},l.prototype.run=function(){var u,f=this,c=f.nodes,h=f.edges,d=f.combos,v=f.comboEdges,p=f.center,g={};c.forEach(function(N){g[N.id]=N});var m={};d.forEach(function(N){m[N.id]=N});var b=f.getInnerGraphs(g),y=[],x=[],w={},E=!0;this.comboTrees.forEach(function(N){var P=b[N.id];if(P){var R=e(e({},N),{x:P.x||m[N.id].x,y:P.y||m[N.id].y,fx:P.fx||m[N.id].fx,fy:P.fy||m[N.id].fy,mass:P.mass||m[N.id].mass,size:P.size});x.push(R),!isNaN(R.x)&&R.x!==0&&!isNaN(R.y)&&R.y!==0?E=!1:(R.x=Math.random()*100,R.y=Math.random()*100),y.push(N.id),(0,i.traverseTreeUp)(N,function(G){return G.id!==N.id&&(w[G.id]=N.id),!0})}}),c.forEach(function(N){if(!(N.comboId&&m[N.comboId])){var P=e({},N);x.push(P),!isNaN(P.x)&&P.x!==0&&!isNaN(P.y)&&P.y!==0?E=!1:(P.x=Math.random()*100,P.y=Math.random()*100),y.push(N.id)}});var _=[];if(h.concat(v).forEach(function(N){var P=w[N.source]||N.source,R=w[N.target]||N.target;P!==R&&y.includes(P)&&y.includes(R)&&_.push({source:P,target:R})}),x!=null&&x.length){if(x.length===1)x[0].x=p[0],x[0].y=p[1];else{var S={nodes:x,edges:_},C=this.outerLayout||new a.GForceLayout({gravity:1,factor:4,linkDistance:function(N,P,R){var G,D,B=((((G=P.size)===null||G===void 0?void 0:G[0])||30)+(((D=R.size)===null||D===void 0?void 0:D[0])||30))/2;return Math.min(B*1.5,700)}}),M=(u=C.getType)===null||u===void 0?void 0:u.call(C);if(C.updateCfg({center:p,kg:5,preventOverlap:!0,animate:!1}),E&&t.FORCE_LAYOUT_TYPE_MAP[M]){var T=x.length<100?new a.MDSLayout:new a.GridLayout;T.layout(S)}C.layout(S)}x.forEach(function(N){var P=b[N.id];if(!P){var R=g[N.id];R&&(R.x=N.x,R.y=N.y);return}P.visited=!0,P.x=N.x,P.y=N.y,P.nodes.forEach(function(G){G.x+=N.x,G.y+=N.y})})}for(var A=Object.keys(b),O=function(N){var P=A[N],R=b[P];if(!R)return"continue";R.nodes.forEach(function(G){R.visited||(G.x+=R.x||0,G.y+=R.y||0),g[G.id]&&(g[G.id].x=G.x,g[G.id].y=G.y)}),m[P]&&(m[P].x=R.x,m[P].y=R.y)},L=A.length-1;L>=0;L--)O(L);return{nodes:c,edges:h,combos:d,comboEdges:v}},l.prototype.getInnerGraphs=function(u){var f=this,c=f.comboTrees,h=f.nodeSize,d=f.edges,v=f.comboPadding,p=f.spacing,g={},m=this.innerLayout||new a.ConcentricLayout({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=p,(c||[]).forEach(function(b){(0,i.traverseTreeUp)(b,function(y){var x,w=(v==null?void 0:v(y))||10;if((0,i.isArray)(w)&&(w=Math.max.apply(Math,w)),!((x=y.children)===null||x===void 0)&&x.length){var _=y.children.map(function(D){if(D.itemType==="combo")return g[D.id];var B=u[D.id]||{};return e(e({},B),D)}),S=_.map(function(D){return D.id}),C={nodes:_,edges:d.filter(function(D){return S.includes(D.source)&&S.includes(D.target)})},M=1/0;_.forEach(function(D){var B;D.size||(D.size=((B=g[D.id])===null||B===void 0?void 0:B.size)||(h==null?void 0:h(D))||[30,30]),(0,i.isNumber)(D.size)&&(D.size=[D.size,D.size]),M>D.size[0]&&(M=D.size[0]),M>D.size[1]&&(M=D.size[1])}),m.layout(C);var T=(0,i.getLayoutBBox)(_),A=T.minX,O=T.minY,L=T.maxX,N=T.maxY,P={x:(L+A)/2,y:(N+O)/2};C.nodes.forEach(function(D){D.x-=P.x,D.y-=P.y});var R=Math.max(L-A,M)+w*2,G=Math.max(N-O,M)+w*2;g[y.id]={id:y.id,nodes:_,size:[R,G]}}else if(y.itemType==="combo"){var E=w?[w*2,w*2]:[30,30];g[y.id]={id:y.id,nodes:[],size:E}}return!0})}),g},l.prototype.initVals=function(){var u=this,f=u.nodeSize,c=u.spacing,h,d;if((0,i.isNumber)(c)?d=function(){return c}:(0,i.isFunction)(c)?d=c:d=function(){return 0},this.spacing=d,!f)h=function(y){var x=d(y);if(y.size){if((0,i.isArray)(y.size)){var w=y.size[0]>y.size[1]?y.size[0]:y.size[1];return(w+x)/2}if((0,i.isObject)(y.size)){var w=y.size.width>y.size.height?y.size.width:y.size.height;return(w+x)/2}return(y.size+x)/2}return 10+x/2};else if((0,i.isFunction)(f))h=function(y){var x=f(y),w=d(y);if((0,i.isArray)(y.size)){var E=y.size[0]>y.size[1]?y.size[0]:y.size[1];return(E+w)/2}return((x||10)+w)/2};else if((0,i.isArray)(f)){var v=f[0]>f[1]?f[0]:f[1],p=v/2;h=function(y){return p+d(y)/2}}else{var g=f/2;h=function(y){return g+d(y)/2}}this.nodeSize=h;var m=u.comboPadding,b;(0,i.isNumber)(m)?b=function(){return m}:(0,i.isArray)(m)?b=function(){return Math.max.apply(null,m)}:(0,i.isFunction)(m)?b=m:b=function(){return 0},this.comboPadding=b},l.prototype.getType=function(){return"comboCombined"},l}(n.Base);return gg.ComboCombinedLayout=o,gg}var ay={},HL={};Object.defineProperty(HL,"__esModule",{value:!0});var ORe=function(){function r(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return r.prototype.distanceTo=function(e){var t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)},r.prototype.setPos=function(e,t){this.rx=e,this.ry=t},r.prototype.resetForce=function(){this.fx=0,this.fy=0},r.prototype.addForce=function(e){var t=e.rx-this.rx,n=e.ry-this.ry,i=Math.hypot(t,n);i=i<1e-4?1e-4:i;var a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*t/i,this.fy+=a*n/i},r.prototype.in=function(e){return e.contains(this.rx,this.ry)},r.prototype.add=function(e){var t=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/t,i=(this.ry*this.mass+e.ry*e.mass)/t,a=this.degree+e.degree,o={rx:n,ry:i,mass:t,degree:a};return new r(o)},r}();HL.default=ORe;var XL={};Object.defineProperty(XL,"__esModule",{value:!0});var kRe=function(){function r(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return r.prototype.getLength=function(){return this.length},r.prototype.contains=function(e,t){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n},r.prototype.NW=function(){var e=this.xmid-this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r.prototype.NE=function(){var e=this.xmid+this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r.prototype.SW=function(){var e=this.xmid-this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r.prototype.SE=function(){var e=this.xmid+this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n},a=new r(i);return a},r}();XL.default=kRe;var YL={};Object.defineProperty(YL,"__esModule",{value:!0});var IRe=function(){function r(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}return r.prototype.insert=function(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new r(this.quad.NW()),this.NE=new r(this.quad.NE()),this.SW=new r(this.quad.SW()),this.SE=new r(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))},r.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},r.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},r.prototype.updateForce=function(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{var t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}},r}();YL.default=IRe;var LRe=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),KL=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ay,"__esModule",{value:!0});ay.ForceAtlas2Layout=void 0;var PRe=ei,uu=Vn(),DRe=KL(HL),NRe=KL(XL),RRe=KL(YL),BRe=function(r){LRe(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.onLayoutEnd,a=t.prune,o=t.maxIteration;!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight);for(var s=[],l=n.length,u=0;u<l;u+=1){var f=n[u],c=10,h=10;(0,uu.isNumber)(f.size)&&(c=f.size,h=f.size),(0,uu.isArray)(f.size)?(isNaN(f.size[0])||(c=f.size[0]),isNaN(f.size[1])||(h=f.size[1])):(0,uu.isObject)(f.size)&&(c=f.size.width,h=f.size.height),t.getWidth&&!isNaN(t.getWidth(f))&&(h=t.getWidth(f)),t.getHeight&&!isNaN(t.getHeight(f))&&(c=t.getHeight(f));var d=Math.max(c,h);s.push(d)}t.barnesHut===void 0&&l>250&&(t.barnesHut=!0),t.prune===void 0&&l>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(o=250,l<=200&&l>100?o=1e3:l>200&&(o=1200),this.maxIteration=o):this.maxIteration===0&&a&&(o=100,l<=200&&l>100?o=500:l>200&&(o=950),this.maxIteration=o),t.kr||(t.kr=50,l>100&&l<=500?t.kr=20:l>500&&(t.kr=1)),t.kg||(t.kg=20,l>100&&l<=500?t.kg=10:l>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(s),i()},e.prototype.updateNodesByForces=function(t){for(var n=this,i=n.edges,a=n.maxIteration,o=n.nodes,s=i.filter(function(_){var S=(0,uu.getEdgeTerminal)(_,"source"),C=(0,uu.getEdgeTerminal)(_,"target");return S!==C}),l=o.length,u=s.length,f=[],c={},h={},d=[],v=0;v<l;v+=1)c[o[v].id]=v,f[v]=0,(o[v].x===void 0||isNaN(o[v].x))&&(o[v].x=Math.random()*1e3),(o[v].y===void 0||isNaN(o[v].y))&&(o[v].y=Math.random()*1e3),d.push({x:o[v].x,y:o[v].y});for(var v=0;v<u;v+=1){for(var p=void 0,g=void 0,m=0,b=0,y=0;y<l;y+=1){var x=(0,uu.getEdgeTerminal)(s[v],"source"),w=(0,uu.getEdgeTerminal)(s[v],"target");o[y].id===x?(p=o[y],m=y):o[y].id===w&&(g=o[y],b=y),h[v]={sourceIdx:m,targetIdx:b}}p&&(f[c[p.id]]+=1),g&&(f[c[g.id]]+=1)}var E=a;if(o=this.iterate(E,c,h,u,f,t),n.prune){for(var y=0;y<u;y+=1)f[h[y].sourceIdx]<=1?(o[h[y].sourceIdx].x=o[h[y].targetIdx].x,o[h[y].sourceIdx].y=o[h[y].targetIdx].y):f[h[y].targetIdx]<=1&&(o[h[y].targetIdx].x=o[h[y].sourceIdx].x,o[h[y].targetIdx].y=o[h[y].sourceIdx].y);n.prune=!1,n.barnesHut=!1,E=100,o=this.iterate(E,c,h,u,f,t)}return o},e.prototype.iterate=function(t,n,i,a,o,s){for(var l=this,u=l.nodes,f=l.kr,c=l.preventOverlap,h=l.barnesHut,d=u.length,v=0,p=100,g=t,m=50,b=[],y=[],x=[],w=0;w<d;w+=1)if(b[2*w]=0,b[2*w+1]=0,h){var E={id:w,rx:u[w].x,ry:u[w].y,mass:1,g:f,degree:o[w]};x[w]=new DRe.default(E)}for(;g>0;){for(var w=0;w<d;w+=1)y[2*w]=b[2*w],y[2*w+1]=b[2*w+1],b[2*w]=0,b[2*w+1]=0;b=this.getAttrForces(g,m,a,n,i,o,s,b),h&&(c&&g>m||!c)?b=this.getOptRepGraForces(b,x,o):b=this.getRepGraForces(g,m,b,p,s,o);var _=this.updatePos(b,y,v,o);u=_.nodes,v=_.sg,g--,l.tick&&l.tick()}return u},e.prototype.getAttrForces=function(t,n,i,a,o,s,l,u){for(var f=this,c=f.nodes,h=f.preventOverlap,d=f.dissuadeHubs,v=f.mode,p=f.prune,g=0;g<i;g+=1){var m=c[o[g].sourceIdx],b=o[g].sourceIdx,y=c[o[g].targetIdx],x=o[g].targetIdx;if(!(p&&(s[b]<=1||s[x]<=1))){var w=[y.x-m.x,y.y-m.y],E=Math.hypot(w[0],w[1]);E=E<1e-4?1e-4:E,w[0]=w[0]/E,w[1]=w[1]/E,h&&t<n&&(E=E-l[b]-l[x]);var _=E,S=_;v==="linlog"&&(_=Math.log(1+E),S=_),d&&(_=E/s[b],S=E/s[x]),h&&t<n&&E<=0?(_=0,S=0):h&&t<n&&E>0&&(_=E,S=E),u[2*a[m.id]]+=_*w[0],u[2*a[y.id]]-=S*w[0],u[2*a[m.id]+1]+=_*w[1],u[2*a[y.id]+1]-=S*w[1]}}return u},e.prototype.getRepGraForces=function(t,n,i,a,o,s){for(var l=this,u=l.nodes,f=l.preventOverlap,c=l.kr,h=l.kg,d=l.center,v=l.prune,p=u.length,g=0;g<p;g+=1){for(var m=g+1;m<p;m+=1)if(!(v&&(s[g]<=1||s[m]<=1))){var b=[u[m].x-u[g].x,u[m].y-u[g].y],y=Math.hypot(b[0],b[1]);y=y<1e-4?1e-4:y,b[0]=b[0]/y,b[1]=b[1]/y,f&&t<n&&(y=y-o[g]-o[m]);var x=c*(s[g]+1)*(s[m]+1)/y;f&&t<n&&y<0?x=a*(s[g]+1)*(s[m]+1):f&&t<n&&y===0?x=0:f&&t<n&&y>0&&(x=c*(s[g]+1)*(s[m]+1)/y),i[2*g]-=x*b[0],i[2*m]+=x*b[0],i[2*g+1]-=x*b[1],i[2*m+1]+=x*b[1]}var w=[u[g].x-d[0],u[g].y-d[1]],E=Math.hypot(w[0],w[1]);w[0]=w[0]/E,w[1]=w[1]/E;var _=h*(s[g]+1);i[2*g]-=_*w[0],i[2*g+1]-=_*w[1]}return i},e.prototype.getOptRepGraForces=function(t,n,i){for(var a=this,o=a.nodes,s=a.kg,l=a.center,u=a.prune,f=o.length,c=9e10,h=-9e10,d=9e10,v=-9e10,p=0;p<f;p+=1)u&&i[p]<=1||(n[p].setPos(o[p].x,o[p].y),o[p].x>=h&&(h=o[p].x),o[p].x<=c&&(c=o[p].x),o[p].y>=v&&(v=o[p].y),o[p].y<=d&&(d=o[p].y));for(var g=Math.max(h-c,v-d),m={xmid:(h+c)/2,ymid:(v+d)/2,length:g,massCenter:l,mass:f},b=new NRe.default(m),y=new RRe.default(b),p=0;p<f;p+=1)u&&i[p]<=1||n[p].in(b)&&y.insert(n[p]);for(var p=0;p<f;p+=1)if(!(u&&i[p]<=1)){n[p].resetForce(),y.updateForce(n[p]),t[2*p]-=n[p].fx,t[2*p+1]-=n[p].fy;var x=[o[p].x-l[0],o[p].y-l[1]],w=Math.hypot(x[0],x[1]);w=w<1e-4?1e-4:w,x[0]=x[0]/w,x[1]=x[1]/w;var E=s*(i[p]+1);t[2*p]-=E*x[0],t[2*p+1]-=E*x[1]}return t},e.prototype.updatePos=function(t,n,i,a){for(var o=this,s=o.nodes,l=o.ks,u=o.tao,f=o.prune,c=o.ksmax,h=s.length,d=[],v=[],p=0,g=0,m=0;m<h;m+=1)if(!(f&&a[m]<=1)){var b=[t[2*m]-n[2*m],t[2*m+1]-n[2*m+1]],y=Math.hypot(b[0],b[1]),x=[t[2*m]+n[2*m],t[2*m+1]+n[2*m+1]],w=Math.hypot(x[0],x[1]);d[m]=y,v[m]=w/2,p+=(a[m]+1)*d[m],g+=(a[m]+1)*v[m]}var E=i;i=u*g/p,E!==0&&(i=i>1.5*E?1.5*E:i);for(var m=0;m<h;m+=1)if(!(f&&a[m]<=1)&&!((0,uu.isNumber)(s[m].fx)&&(0,uu.isNumber)(s[m].fy))){var _=l*i/(1+i*Math.sqrt(d[m])),S=Math.hypot(t[2*m],t[2*m+1]);S=S<1e-4?1e-4:S;var C=c/S;_=_>C?C:_;var M=_*t[2*m],T=_*t[2*m+1];s[m].x+=M,s[m].y+=T}return{nodes:s,sg:i}},e}(PRe.Base);ay.ForceAtlas2Layout=BRe;var oy={},qL={},ZL={},QL={},uv=Re&&Re.__assign||function(){return uv=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},uv.apply(this,arguments)};Object.defineProperty(QL,"__esModule",{value:!0});var FRe=function(){function r(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return r.prototype.init=function(e,t,n){this.cells=[],this.CELL_W=n.CELL_W||r.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||r.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(t/this.CELL_H),r.MIN_DIST=Math.pow(e,2)+Math.pow(t,2);for(var i=0;i<this.columnNum;i++){for(var a=[],o=0;o<this.rowNum;o++){var s={dx:i,dy:o,x:i*this.CELL_W,y:o*this.CELL_H,occupied:!1};a.push(s)}this.cells.push(a)}},r.prototype.findGridByNodeId=function(e){for(var t,n,i=0;i<this.columnNum;i++)for(var a=0;a<this.rowNum;a++)if(this.cells[i][a].node&&((n=(t=this.cells[i][a])===null||t===void 0?void 0:t.node)===null||n===void 0?void 0:n.id)===e)return{column:i,row:a};return null},r.prototype.sqdist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},r.prototype.occupyNearest=function(e){for(var t=r.MIN_DIST,n,i=null,a=0;a<this.columnNum;a++)for(var o=0;o<this.rowNum;o++)!this.cells[a][o].occupied&&(n=this.sqdist(e,this.cells[a][o]))<t&&(t=n,i=this.cells[a][o]);return i&&(i.occupied=!0),i},r.prototype.insertColumn=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++){this.cells[n+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[n+this.columnNum][i]={dx:n,dy:i,x:n*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(var n=this.columnNum-1;n>e;n--)for(var i=0;i<this.rowNum;i++)this.cells[n+t][i]=uv(uv({},this.cells[n][i]),{x:(n+t)*this.CELL_W,y:i*this.CELL_H}),this.cells[n][i]={x:n*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(var i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=e&&(this.additionColumn[i]+=t);for(var n=0;n<t;n++)this.additionColumn.push(e+n+1);this.columnNum+=t}},r.prototype.insertRow=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++)for(var i=0;i<this.columnNum;i++)this.cells[i][n+this.rowNum]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var i=0;i<this.columnNum;i++)for(var n=this.rowNum-1;n>e;n--)this.cells[i][n+t]=uv(uv({},this.cells[i][n]),{dx:i,dy:n+t,x:i*this.CELL_W,y:(n+t)*this.CELL_H}),this.cells[i][n]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=t);for(var i=0;i<t;i++)this.additionRow.push(e+i+1);this.rowNum+=t}},r.prototype.getNodes=function(){for(var e=[],t=0;t<this.columnNum;t++)for(var n=0;n<this.rowNum;n++)this.cells[t][n].node&&e.push(this.cells[t][n]);return e},r.MIN_DIST=50,r.DEFAULT_CELL_W=80,r.DEFAULT_CELL_H=80,r}();QL.default=FRe;var $Re=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ZL,"__esModule",{value:!0});var zRe=$Re(QL);function GRe(r,e){if(!r.nodes||r.nodes.length===0)return r;var t=e.width,n=e.height,i=e.nodeMinGap,a=1e4,o=1e4;r.nodes.forEach(function(b){var y=b.size[0]||50,x=b.size[1]||50;a=Math.min(y,a),o=Math.min(x,o)});var s=new zRe.default;s.init(t,n,{CELL_H:o,CELL_W:a}),r.nodes.forEach(function(b){var y=s.occupyNearest(b);y&&(y.node={id:b.id,size:b.size},b.x=y.x,b.y=y.y,b.dx=y.dx,b.dy=y.dy)});for(var l=0;l<r.nodes.length;l++){var u=r.nodes[l],f=s.findGridByNodeId(u.id);if(!f)throw new Error("can not find node cell");var c=f.column,h=f.row;if(u.size[0]+i>a){for(var d=Math.ceil((u.size[0]+i)/a)-1,v=d,p=0;p<d;p++){var g=s.additionColumn.indexOf(c+p+1)>-1;if(g&&!s.cells[c+p+1][h].node)v--;else break}s.insertColumn(c,v)}if(u.size[1]+i>o){for(var d=Math.ceil((u.size[1]+i)/o)-1,v=d,p=0;p<d;p++){var g=s.additionRow.indexOf(h+p+1)>-1;if(g&&!s.cells[c][h+p+1].node)v--;else break}s.insertRow(h,v)}}for(var l=0;l<s.columnNum;l++)for(var m=function(y){var x=s.cells[l][y];if(x.node){var w=r.nodes.find(function(E){var _;return E.id===((_=x==null?void 0:x.node)===null||_===void 0?void 0:_.id)});w&&(w.x=x.x+w.size[0]/2,w.y=x.y+w.size[1]/2)}},p=0;p<s.rowNum;p++)m(p)}ZL.default=GRe;var JL={};Object.defineProperty(JL,"__esModule",{value:!0});var oK=1200,sK=800,q1=1e7,mg=10,lK=3.141592653589793,WM=1.5707963267948966,jRe=lK*.375,URe=lK*.625,gx=new Map,WRe=10,VRe=10,VM=.8,VF=.1,HRe=.5;function XRe(r,e,t){var n=r.x-r.size[0]/2,i=r.y-r.size[1]/2,a=r.x+r.size[0]/2,o=r.y+r.size[1]/2,s=e.x-e.size[0]/2,l=e.y-e.size[1]/2,u=e.x+e.size[0]/2,f=e.y+e.size[1]/2,c=r.x,h=r.y,d=e.x,v=e.y,p=d-c,g=Math.atan2(p,v-h),m=0,b=0,y=0,x=0;g>WM?(b=i-f,m=s-a,y=parseFloat(b?(b/Math.cos(g)).toFixed(2):m.toFixed(2)),x=parseFloat(m?(m/Math.sin(g)).toFixed(2):b.toFixed(2))):0<g&&g<=WM?(b=l-o,m=s-a,b>m?y=x=parseFloat(b?(b/Math.cos(g)).toFixed(2):m.toFixed(2)):y=x=parseFloat(m?(m/Math.sin(g)).toFixed(2):b.toFixed(2))):g<-WM?(b=i-f,m=-(u-n),b>m?y=x=parseFloat(b?(b/Math.cos(g)).toFixed(2):m.toFixed(2)):y=x=parseFloat(m?(m/Math.sin(g)).toFixed(2):b.toFixed(2))):(b=l-o,Math.abs(p)>(a-n)/2?m=n-u:m=p,b>m?y=x=parseFloat(b?(b/Math.cos(g)).toFixed(2):m.toFixed(2)):y=x=parseFloat(m&&g!==0?(m/Math.sin(g)).toFixed(2):b.toFixed(2)));var w=parseFloat(g.toFixed(2)),E=t;return t&&(E=jRe<w&&w<URe),{distance:Math.abs(y<x?y:x),isHoriz:E}}function uK(r,e){var t=gx.get(r.id)||[],n=t.find(function(P){return P.source===e.id||P.target===e.id}),i=r.size[0]*r.size[1],a=e.size[0]*e.size[1],o=i>a?e:r,s=i>a?r:e,l=o.x-o.size[0]/2,u=o.y-o.size[1]/2,f=o.x+o.size[0]/2,c=o.y+o.size[1]/2,h=s.x-s.size[0]/2,d=s.y-s.size[1]/2,v=s.x+s.size[0]/2,p=s.y+s.size[1]/2,g=o.x,m=o.y,b=s.x,y=s.y,x=f>=h&&v>=l&&c>=d&&p>=u,w=0,E=0;if(x){E=Math.sqrt(Math.pow(b-g,2)+Math.pow(y-m,2));var _=l>h?l:h,S=u>d?u:d,C=f<v?f:v,M=c<p?c:p,T=C-_,A=M-S,O=T*A;E===0&&(E=1e-7),w=mg*1/E*100+O,w*=q1}else{var L=!1,N=XRe(o,s,L);E=N.distance,L=N.isHoriz,E<=mg?E!==0?n?w+=mg+q1*1/E:w+=mg+q1*mg/E:w+=q1:(w+=E,n&&(w+=E*E))}return w}function fK(r){for(var e=0,t=0;t<r.length;t++){var n=r[t];(n.x<0||n.y<0||n.x>oK||n.y>sK)&&(e+=1e12);for(var i=t+1;i<r.length;i++)e+=uK(n,r[i])}return e}function YRe(r,e,t,n){var i=new Map;t.forEach(function(g,m){i.set(g.id,g)});var a=n.filter(function(g){return g.source===r.id||g.target===r.id})||[],o=[];a.forEach(function(g){var m=g.source===r.id?g.target:g.source,b=i.get(m);b&&o.push(b)});for(var s=!0,l=0;l<o.length;l++){var u=o[l],f=Math.atan((r.y-u.y)/(u.x-r.y))*180,c=Math.atan((e.y-u.y)/(u.x-e.y))*180,h=f<30||f>150,d=c<30||c>150,v=f>70&&f<110,p=c>70&&c<110;if(h&&!d||f*c<0){s=!1;break}else if(v&&!p||f*c<0){s=!1;break}else if((u.x-r.x)*(u.x-e.x)<0){s=!1;break}else if((u.y-r.y)*(u.y-e.y)<0){s=!1;break}}return s}function KRe(r,e){for(var t=!1,n=1,i=WRe*n,a=VRe*n,o=[i,-i,0,0],s=[0,0,a,-a],l=0;l<r.length;++l)for(var u=r[l],f=HF(u,r),c=0;c<o.length;c++){var h=YRe(u,{x:u.x+o[c],y:u.y+s[c]},r,e);if(h){u.x+=o[c],u.y+=s[c];var d=HF(u,r),v=Math.random();d<f||v<VM&&v>VF?(f=d,t=!0):(u.x-=o[c],u.y-=s[c])}}return VM>VF&&(VM*=HRe),t?fK(r):0}function HF(r,e){var t=0;(r.x<0||r.y<0||r.x+r.size[0]+20>oK||r.y+r.size[1]+20>sK)&&(t+=1e12);for(var n=0;n<e.length;++n)r.id!==e[n].id&&(t+=uK(r,e[n]));return t}function qRe(r,e){if(r.length===0)return{nodes:r,edges:e};r.forEach(function(u){var f=e.filter(function(c){return c.source===u.id||c.target===u.id});gx.set(u,f)}),r.sort(function(u,f){var c,h;return((c=gx.get(u.id))===null||c===void 0?void 0:c.length)-((h=gx.get(f.id))===null||h===void 0?void 0:h.length)});for(var t=fK(r),n=20,i=1,a=0,o=50,s=0;n>0&&(s++,!(s>=o));){var l=KRe(r,e);l!==0&&(a=l),i=a-t,t=a,i===0?--n:n=20}return r.forEach(function(u){u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:r,edges:e}}JL.default=qRe;var RT=Re&&Re.__assign||function(){return RT=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},RT.apply(this,arguments)},ZRe=Re&&Re.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),QRe=Re&&Re.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),JRe=Re&&Re.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ZRe(e,r,t);return QRe(e,r),e},cK=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qL,"__esModule",{value:!0});var jd=JRe(VI),e3e=cK(ZL),t3e=cK(JL),r3e=Cp;function n3e(r,e){var t=r.nodes,n=r.edges,i=e.width,a=e.height;if(!(t!=null&&t.length))return Promise.resolve();var o=[];t.forEach(function(v){var p=n.filter(function(m){return m.source===v.id||m.target===v.id});if(p.length>1){var g=RT({},v);delete g.size,o.push(g)}});var s=[];n.forEach(function(v){var p=o.find(function(m){return m.id===v.source}),g=o.find(function(m){return m.id===v.target});p&&g&&s.push(v)});var l=new r3e.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}),u=l.layout({nodes:o,edges:s}).nodes;t.forEach(function(v){var p=(u||[]).find(function(g){return g.id===v.id});v.x=(p==null?void 0:p.x)||i/2,v.y=(p==null?void 0:p.y)||a/2});var f=JSON.parse(JSON.stringify(t)),c=JSON.parse(JSON.stringify(n)),h=jd.forceSimulation().nodes(f).force("link",jd.forceLink(c).id(function(v){return v.id}).distance(function(v){var p=s.find(function(g){return g.source===v.source&&g.target===v.target});return p?30:20})).force("charge",jd.forceManyBody()).force("center",jd.forceCenter(i/2,a/2)).force("x",jd.forceX(i/2)).force("y",jd.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),d=new Promise(function(v){h.on("end",function(){t.forEach(function(w){var E=f.find(function(_){return _.id===w.id});E&&(w.x=E.x,w.y=E.y)});var p=Math.min.apply(Math,t.map(function(w){return w.x})),g=Math.max.apply(Math,t.map(function(w){return w.x})),m=Math.min.apply(Math,t.map(function(w){return w.y})),b=Math.max.apply(Math,t.map(function(w){return w.y})),y=i/(g-p),x=a/(b-m);t.forEach(function(w){w.x!==void 0&&y<1&&(w.x=(w.x-p)*y),w.y!==void 0&&x<1&&(w.y=(w.y-m)*x)}),t.forEach(function(w){w.sizeTemp=w.size,w.size=[10,10]}),(0,t3e.default)(t,n),t.forEach(function(w){w.size=w.sizeTemp||[],delete w.sizeTemp}),(0,e3e.default)({nodes:t,edges:n},e),v()})});return d}qL.default=n3e;var i3e=Re&&Re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),a3e=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oy,"__esModule",{value:!0});oy.ERLayout=void 0;var o3e=ei,s3e=a3e(qL),l3e=function(r){i3e(e,r);function e(t){var n=r.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},t&&n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,n=t.nodes,i=t.edges;return n==null||n.forEach(function(a){a.size||(a.size=[50,50])}),(0,s3e.default)({nodes:n,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){t.onLayoutEnd&&t.onLayoutEnd()})},e.prototype.getType=function(){return"er"},e}(o3e.Base);oy.ERLayout=l3e;var Xc={},XF;function u3e(){if(XF)return Xc;XF=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.Layouts=Xc.Layout=void 0;var r=Ou,e=Gm,t=jm,n=Wm,i=Um,a=WI,o=Vm,s=Cp,l=zL,u=Jm,f=ey,c=ty,h=ry,d=ny,v=iy,p=aK(),g=ay,m=oy,b=Ym,y=Vn(),x=function(){function w(E){var _=(0,r.getLayoutByName)(E.type);this.layoutInstance=new _(E)}return w.prototype.layout=function(E){return this.layoutInstance.layout(E)},w.prototype.updateCfg=function(E){this.layoutInstance.updateCfg(E)},w.prototype.init=function(E){this.correctLayers(E.nodes),this.layoutInstance.init(E)},w.prototype.correctLayers=function(E){if(E!=null&&E.length){var _=1/0,S=[];if(E.forEach(function(M){(0,y.isString)(M.layer)&&(M.layer=parseInt(M.layer,10)),!(M.layer===void 0||isNaN(M.layer))&&(S.push(M),M.layer<_&&(_=M.layer))}),_<=0){var C=Math.abs(_)+1;S.forEach(function(M){return M.layer+=C})}}},w.prototype.execute=function(){this.layoutInstance.execute()},w.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},w.prototype.destroy=function(){return this.layoutInstance.destroy()},w}();return Xc.Layout=x,Xc.Layouts={force:a.ForceLayout,fruchterman:c.FruchtermanLayout,forceAtlas2:g.ForceAtlas2Layout,gForce:i.GForceLayout,force2:n.Force2Layout,dagre:s.DagreLayout,dagreCompound:b.DagreCompoundLayout,circular:o.CircularLayout,radial:l.RadialLayout,concentric:u.ConcentricLayout,grid:e.GridLayout,mds:f.MDSLayout,comboForce:v.ComboForceLayout,comboCombined:p.ComboCombinedLayout,random:t.RandomLayout,"gForce-gpu":d.GForceGPULayout,"fruchterman-gpu":h.FruchtermanGPULayout,er:m.ERLayout},Xc}var hK={};Object.defineProperty(hK,"__esModule",{value:!0});var YF;function dK(){return YF||(YF=1,function(r){var e=Re&&Re.__createBinding||(Object.create?function(E,_,S,C){C===void 0&&(C=S);var M=Object.getOwnPropertyDescriptor(_,S);(!M||("get"in M?!_.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(E,C,M)}:function(E,_,S,C){C===void 0&&(C=S),E[C]=_[S]}),t=Re&&Re.__exportStar||function(E,_){for(var S in E)S!=="default"&&!Object.prototype.hasOwnProperty.call(_,S)&&e(_,E,S)};Object.defineProperty(r,"__esModule",{value:!0}),r.ERLayout=r.ForceAtlas2Layout=r.ComboCombinedLayout=r.ComboForceLayout=r.GForceGPULayout=r.FruchtermanGPULayout=r.FruchtermanLayout=r.MDSLayout=r.ConcentricLayout=r.RadialLayout=r.DagreCompoundLayout=r.DagreLayout=r.CircularLayout=r.ForceLayout=r.Force2Layout=r.GForceLayout=r.RandomLayout=r.GridLayout=r.Layouts=r.Layout=void 0;var n=Gm;Object.defineProperty(r,"GridLayout",{enumerable:!0,get:function(){return n.GridLayout}});var i=jm;Object.defineProperty(r,"RandomLayout",{enumerable:!0,get:function(){return i.RandomLayout}});var a=Um;Object.defineProperty(r,"GForceLayout",{enumerable:!0,get:function(){return a.GForceLayout}});var o=Wm;Object.defineProperty(r,"Force2Layout",{enumerable:!0,get:function(){return o.Force2Layout}});var s=WI;Object.defineProperty(r,"ForceLayout",{enumerable:!0,get:function(){return s.ForceLayout}});var l=Vm;Object.defineProperty(r,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}});var u=Cp;Object.defineProperty(r,"DagreLayout",{enumerable:!0,get:function(){return u.DagreLayout}});var f=Ym;Object.defineProperty(r,"DagreCompoundLayout",{enumerable:!0,get:function(){return f.DagreCompoundLayout}});var c=zL;Object.defineProperty(r,"RadialLayout",{enumerable:!0,get:function(){return c.RadialLayout}});var h=Jm;Object.defineProperty(r,"ConcentricLayout",{enumerable:!0,get:function(){return h.ConcentricLayout}});var d=ey;Object.defineProperty(r,"MDSLayout",{enumerable:!0,get:function(){return d.MDSLayout}});var v=ty;Object.defineProperty(r,"FruchtermanLayout",{enumerable:!0,get:function(){return v.FruchtermanLayout}});var p=ry;Object.defineProperty(r,"FruchtermanGPULayout",{enumerable:!0,get:function(){return p.FruchtermanGPULayout}});var g=ny;Object.defineProperty(r,"GForceGPULayout",{enumerable:!0,get:function(){return g.GForceGPULayout}});var m=iy;Object.defineProperty(r,"ComboForceLayout",{enumerable:!0,get:function(){return m.ComboForceLayout}});var b=aK();Object.defineProperty(r,"ComboCombinedLayout",{enumerable:!0,get:function(){return b.ComboCombinedLayout}});var y=ay;Object.defineProperty(r,"ForceAtlas2Layout",{enumerable:!0,get:function(){return y.ForceAtlas2Layout}});var x=oy;Object.defineProperty(r,"ERLayout",{enumerable:!0,get:function(){return x.ERLayout}});var w=u3e();Object.defineProperty(r,"Layout",{enumerable:!0,get:function(){return w.Layout}}),Object.defineProperty(r,"Layouts",{enumerable:!0,get:function(){return w.Layouts}}),t(hK,r)}(vM)),vM}(function(r){var e=Re&&Re.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,l)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),t=Re&&Re.__exportStar||function(i,a){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),r.getLayoutByName=r.unRegisterLayout=r.registerLayout=void 0;var n=Ou;Object.defineProperty(r,"registerLayout",{enumerable:!0,get:function(){return n.registerLayout}}),Object.defineProperty(r,"unRegisterLayout",{enumerable:!0,get:function(){return n.unRegisterLayout}}),Object.defineProperty(r,"getLayoutByName",{enumerable:!0,get:function(){return n.getLayoutByName}}),t(dK(),r)})(Or);var vK={exports:{}};(function(r,e){(function(n,i){r.exports=i()})(typeof self<"u"?self:Re,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=36)}([function(t,n,i){var a=i(3);n.a=function(o){return Array.isArray?Array.isArray(o):Object(a.a)(o,"Array")}},function(t,n,i){var a=function(o){return o!==null&&typeof o!="function"&&isFinite(o.length)};n.a=a},function(t,n,i){var a=i(3);n.a=function(o){return Object(a.a)(o,"Function")}},function(t,n,i){var a={}.toString,o=function(s,l){return a.call(s)==="[object "+l+"]"};n.a=o},function(t,n,i){var a=i(3);n.a=function(o){return Object(a.a)(o,"String")}},function(t,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Number")};n.a=o},function(t,n,i){var a=i(38),o=a.mix;function s(l,u,f,c){return c===void 0&&(c="height"),f==="center"?(l[c]+u[c])/2:l.height}t.exports={assign:o,getHeight:s}},function(t,n,i){var a=function(o){return o==null};n.a=a},function(t,n,i){var a=i(0),o=i(12);function s(l,u){if(l){var f;if(Object(a.a)(l))for(var c=0,h=l.length;c<h&&(f=u(l[c],c),f!==!1);c++);else if(Object(o.a)(l)){for(var d in l)if(l.hasOwnProperty(d)&&(f=u(l[d],d),f===!1))break}}}n.a=s},function(t,n,i){var a=i(7);n.a=function(o){return Object(a.a)(o)?"":o.toString()}},function(t,n,i){var a=i(14),o=i(3),s=function(l){if(!Object(a.a)(l)||!Object(o.a)(l,"Object"))return!1;if(Object.getPrototypeOf(l)===null)return!0;for(var u=l;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(l)===u};n.a=s},function(t,n,i){var a=i(18),o=function(){function s(u,f){f===void 0&&(f={});var c=this;c.options=f,c.rootNode=a(u,f)}var l=s.prototype;return l.execute=function(){throw new Error("please override this method")},s}();t.exports=o},function(t,n,i){n.a=function(a){var o=typeof a;return a!==null&&o==="object"||o==="function"}},function(t,n,i){var a=i(1),o=function(s,l){return Object(a.a)(s)?s.indexOf(l)>-1:!1};n.a=o},function(t,n,i){var a=function(o){return typeof o=="object"&&o!==null};n.a=a},function(t,n,i){var a=i(8),o=i(2),s=Object.values?function(l){return Object.values(l)}:function(l){var u=[];return Object(a.a)(l,function(f,c){Object(o.a)(l)&&c==="prototype"||u.push(f)}),u};n.a=s},function(t,n,i){n.a=o;function a(s,l){for(var u in l)l.hasOwnProperty(u)&&u!=="constructor"&&l[u]!==void 0&&(s[u]=l[u])}function o(s,l,u,f){return l&&a(s,l),u&&a(s,u),f&&a(s,f),s}},function(t,n,i){var a=i(35),o=["LR","RL","TB","BT","H","V"],s=["LR","RL","H"],l=function(c){return s.indexOf(c)>-1},u=o[0];t.exports=function(f,c,h){var d=c.direction||u;if(c.isHorizontal=l(d),d&&o.indexOf(d)===-1)throw new TypeError("Invalid direction: "+d);if(d===o[0])h(f,c);else if(d===o[1])h(f,c),f.right2left();else if(d===o[2])h(f,c);else if(d===o[3])h(f,c),f.bottom2top();else if(d===o[4]||d===o[5]){var v=a(f,c),p=v.left,g=v.right;h(p,c),h(g,c),c.isHorizontal?p.right2left():p.bottom2top(),g.translate(p.x-g.x,p.y-g.y),f.x=p.x,f.y=g.y;var m=f.getBoundingBox();c.isHorizontal?m.top<0&&f.translate(0,-m.top):m.left<0&&f.translate(-m.left,0)}var b=c.fixedRoot;return b===void 0&&(b=!0),b&&f.translate(-(f.x+f.width/2+f.hgap),-(f.y+f.height/2+f.vgap)),f}},function(t,n,i){var a=i(6),o=18,s=o*2,l=o,u={getId:function(d){return d.id||d.name},getPreH:function(d){return d.preH||0},getPreV:function(d){return d.preV||0},getHGap:function(d){return d.hgap||l},getVGap:function(d){return d.vgap||l},getChildren:function(d){return d.children},getHeight:function(d){return d.height||s},getWidth:function(d){var v=d.label||" ";return d.width||v.split("").length*o}};function f(h,d){var v=this;if(v.vgap=v.hgap=0,h instanceof f)return h;v.data=h;var p=d.getHGap(h),g=d.getVGap(h);return v.preH=d.getPreH(h),v.preV=d.getPreV(h),v.width=d.getWidth(h),v.height=d.getHeight(h),v.width+=v.preH,v.height+=v.preV,v.id=d.getId(h),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(p,g),v}a.assign(f.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(d,v){var p=this;p.hgap+=d,p.vgap+=v,p.width+=2*d,p.height+=2*v},eachNode:function(d){for(var v=this,p=[v],g;g=p.shift();)d(g),p=g.children.concat(p)},DFTraverse:function(d){this.eachNode(d)},BFTraverse:function(d){for(var v=this,p=[v],g;g=p.shift();)d(g),p=p.concat(g.children)},getBoundingBox:function(){var d={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){d.left=Math.min(d.left,v.x),d.top=Math.min(d.top,v.y),d.width=Math.max(d.width,v.x+v.width),d.height=Math.max(d.height,v.y+v.height)}),d},translate:function(d,v){d===void 0&&(d=0),v===void 0&&(v=0),this.eachNode(function(p){p.x+=d,p.y+=v,p.x+=p.preH,p.y+=p.preV})},right2left:function(){var d=this,v=d.getBoundingBox();d.eachNode(function(p){p.x=p.x-(p.x-v.left)*2-p.width}),d.translate(v.width,0)},bottom2top:function(){var d=this,v=d.getBoundingBox();d.eachNode(function(p){p.y=p.y-(p.y-v.top)*2-p.height}),d.translate(0,v.height)}});function c(h,d,v){d===void 0&&(d={}),d=a.assign({},u,d);var p=new f(h,d),g=[p],m;if(!v&&!h.collapsed){for(;m=g.shift();)if(!m.data.collapsed){var b=d.getChildren(m.data),y=b?b.length:0;if(m.children=new Array(y),b&&y)for(var x=0;x<y;x++){var w=new f(b[x],d);m.children[x]=w,g.push(w),w.parent=m,w.depth=m.depth+1}}}return p}t.exports=c},function(t,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return s;for(var u=[],f=0;f<s.length;f++){var c=s[f];l(c,f)&&u.push(c)}return u};n.a=o},function(t,n,i){var a=i(7),o=i(21);function s(l,u){var f=Object(o.a)(u),c=f.length;if(Object(a.a)(l))return!c;for(var h=0;h<c;h+=1){var d=f[h];if(u[d]!==l[d]||!(d in l))return!1}return!0}n.a=s},function(t,n,i){var a=i(8),o=i(2),s=Object.keys?function(l){return Object.keys(l)}:function(l){var u=[];return Object(a.a)(l,function(f,c){Object(o.a)(l)&&c==="prototype"||u.push(c)}),u};n.a=s},function(t,n,i){var a=i(0);n.a=function(o){if(Object(a.a)(o))return o.reduce(function(s,l){return Math.max(s,l)},o[0])}},function(t,n,i){var a=i(0);n.a=function(o){if(Object(a.a)(o))return o.reduce(function(s,l){return Math.min(s,l)},o[0])}},function(t,n,i){var a=i(1),o=Array.prototype.splice,s=function(u,f){if(!Object(a.a)(u))return[];for(var c=u?f.length:0,h=c-1;c--;){var d=void 0,v=f[c];(c===h||v!==d)&&(d=v,o.call(u,v,1))}return u};n.a=s},function(t,n,i){var a=i(8),o=i(0),s=i(10),l=function(u,f,c){if(!Object(o.a)(u)&&!Object(s.a)(u))return u;var h=c;return Object(a.a)(u,function(d,v){h=f(h,d,v)}),h};n.a=l},function(t,n,i){n.a=a;function a(o,s){s===void 0&&(s=new Map);var l=[];if(Array.isArray(o))for(var u=0,f=o.length;u<f;u++){var c=o[u];s.has(c)||(l.push(c),s.set(c,!0))}return l}},function(t,n,i){n.a=l;var a=i(0),o=i(2),s=i(28);function l(u,f){if(!f)return{0:u};if(!Object(o.a)(f)){var c=Object(a.a)(f)?f:f.replace(/\s+/g,"").split("*");f=function(h){for(var d="_",v=0,p=c.length;v<p;v++)d+=h[c[v]]&&h[c[v]].toString();return d}}return Object(s.a)(u,f)}},function(t,n,i){var a=i(0),o=i(2),s=Object.prototype.hasOwnProperty;function l(u,f){if(!f||!Object(a.a)(u))return{};for(var c={},h=Object(o.a)(f)?f:function(g){return g[f]},d,v=0;v<u.length;v++){var p=u[v];d=h(p),s.call(c,d)?c[d].push(p):c[d]=[p]}return c}n.a=l},function(t,n,i){n.a=function(a,o){return a.hasOwnProperty(o)}},function(t,n,i){var a={}.toString,o=function(s){return a.call(s).replace(/^\[object /,"").replace(/]$/,"")};n.a=o},function(t,n,i){var a=Object.prototype,o=function(s){var l=s&&s.constructor,u=typeof l=="function"&&l.prototype||a;return s===u};n.a=o},function(t,n,i){var a=i(2);n.a=function(o,s){if(!Object(a.a)(o))throw new TypeError("Expected a function");var l=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var c=s?s.apply(this,u):u[0],h=l.cache;if(h.has(c))return h.get(c);var d=o.apply(this,u);return h.set(c,d),d};return l.cache=new Map,l}},function(t,n,i){var a=i(14),o=i(1),s=i(4),l=function(u,f){if(u===f)return!0;if(!u||!f||Object(s.a)(u)||Object(s.a)(f))return!1;if(Object(o.a)(u)||Object(o.a)(f)){if(u.length!==f.length)return!1;for(var c=!0,h=0;h<u.length&&(c=l(u[h],f[h]),!!c);h++);return c}if(Object(a.a)(u)||Object(a.a)(f)){var d=Object.keys(u),v=Object.keys(f);if(d.length!==v.length)return!1;for(var c=!0,h=0;h<d.length&&(c=l(u[d[h]],f[d[h]]),!!c);h++);return c}return!1};n.a=l},function(t,n,i){var a=i(116),o=i(15),s=i(32),l=i(4),u;n.a=Object(s.a)(function(f,c){c===void 0&&(c={});var h=c.fontSize,d=c.fontFamily,v=c.fontWeight,p=c.fontStyle,g=c.fontVariant;return u||(u=document.createElement("canvas").getContext("2d")),u.font=[p,g,v,h+"px",d].join(" "),u.measureText(Object(l.a)(f)?f:"").width},function(f,c){return c===void 0&&(c={}),Object(a.a)([f],Object(o.a)(c)).join("")})},function(t,n,i){var a=i(18);t.exports=function(o,s){for(var l=a(o.data,s,!0),u=a(o.data,s,!0),f=o.children.length,c=Math.round(f/2),h=s.getSide||function(g,m){return m<c?"right":"left"},d=0;d<f;d++){var v=o.children[d],p=h(v,d);p==="right"?u.children.push(v):l.children.push(v)}return l.eachNode(function(g){g.isRoot()||(g.side="left")}),u.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:l,right:u}}},function(t,n,i){var a={compactBox:i(37),dendrogram:i(120),indented:i(122),mindmap:i(124)};t.exports=a},function(t,n,i){function a(v,p){v.prototype=Object.create(p.prototype),v.prototype.constructor=v,o(v,p)}function o(v,p){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,b){return m.__proto__=b,m},o(v,p)}var s=i(11),l=i(119),u=i(17),f=i(6),c=function(v){a(p,v);function p(){return v.apply(this,arguments)||this}var g=p.prototype;return g.execute=function(){var b=this;return u(b.rootNode,b.options,l)},p}(s),h={};function d(v,p){return p=f.assign({},h,p),new c(v,p).execute()}t.exports=d},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(13);i.d(n,"contains",function(){return a.a}),i.d(n,"includes",function(){return a.a});var o=i(39);i.d(n,"difference",function(){return o.a});var s=i(40);i.d(n,"find",function(){return s.a});var l=i(41);i.d(n,"findIndex",function(){return l.a});var u=i(42);i.d(n,"firstValue",function(){return u.a});var f=i(43);i.d(n,"flatten",function(){return f.a});var c=i(44);i.d(n,"flattenDeep",function(){return c.a});var h=i(45);i.d(n,"getRange",function(){return h.a});var d=i(46);i.d(n,"pull",function(){return d.a});var v=i(24);i.d(n,"pullAt",function(){return v.a});var p=i(25);i.d(n,"reduce",function(){return p.a});var g=i(47);i.d(n,"remove",function(){return g.a});var m=i(48);i.d(n,"sortBy",function(){return m.a});var b=i(49);i.d(n,"union",function(){return b.a});var y=i(26);i.d(n,"uniq",function(){return y.a});var x=i(50);i.d(n,"valuesOfKey",function(){return x.a});var w=i(51);i.d(n,"head",function(){return w.a});var E=i(52);i.d(n,"last",function(){return E.a});var _=i(53);i.d(n,"startsWith",function(){return _.a});var S=i(54);i.d(n,"endsWith",function(){return S.a});var C=i(19);i.d(n,"filter",function(){return C.a});var M=i(55);i.d(n,"every",function(){return M.a});var T=i(56);i.d(n,"some",function(){return T.a});var A=i(57);i.d(n,"group",function(){return A.a});var O=i(28);i.d(n,"groupBy",function(){return O.a});var L=i(27);i.d(n,"groupToMap",function(){return L.a});var N=i(58);i.d(n,"getWrapBehavior",function(){return N.a});var P=i(59);i.d(n,"wrapBehavior",function(){return P.a});var R=i(60);i.d(n,"number2color",function(){return R.a});var G=i(61);i.d(n,"parseRadius",function(){return G.a});var D=i(62);i.d(n,"clamp",function(){return D.a});var B=i(63);i.d(n,"fixedBase",function(){return B.a});var Y=i(64);i.d(n,"isDecimal",function(){return Y.a});var ee=i(65);i.d(n,"isEven",function(){return ee.a});var ne=i(66);i.d(n,"isInteger",function(){return ne.a});var Q=i(67);i.d(n,"isNegative",function(){return Q.a});var ye=i(68);i.d(n,"isNumberEqual",function(){return ye.a});var Le=i(69);i.d(n,"isOdd",function(){return Le.a});var Fe=i(70);i.d(n,"isPositive",function(){return Fe.a});var _e=i(22);i.d(n,"max",function(){return _e.a});var Ve=i(71);i.d(n,"maxBy",function(){return Ve.a});var Xe=i(23);i.d(n,"min",function(){return Xe.a});var vt=i(72);i.d(n,"minBy",function(){return vt.a});var bt=i(73);i.d(n,"mod",function(){return bt.a});var te=i(74);i.d(n,"toDegree",function(){return te.a});var H=i(75);i.d(n,"toInteger",function(){return H.a});var de=i(76);i.d(n,"toRadian",function(){return de.a});var Be=i(77);i.d(n,"forIn",function(){return Be.a});var Ie=i(29);i.d(n,"has",function(){return Ie.a});var Pe=i(78);i.d(n,"hasKey",function(){return Pe.a});var Ye=i(79);i.d(n,"hasValue",function(){return Ye.a});var V=i(21);i.d(n,"keys",function(){return V.a});var z=i(20);i.d(n,"isMatch",function(){return z.a});var F=i(15);i.d(n,"values",function(){return F.a});var k=i(80);i.d(n,"lowerCase",function(){return k.a});var ue=i(81);i.d(n,"lowerFirst",function(){return ue.a});var ce=i(82);i.d(n,"substitute",function(){return ce.a});var X=i(83);i.d(n,"upperCase",function(){return X.a});var ae=i(84);i.d(n,"upperFirst",function(){return ae.a});var Ce=i(30);i.d(n,"getType",function(){return Ce.a});var ke=i(85);i.d(n,"isArguments",function(){return ke.a});var Ke=i(0);i.d(n,"isArray",function(){return Ke.a});var Et=i(1);i.d(n,"isArrayLike",function(){return Et.a});var jt=i(86);i.d(n,"isBoolean",function(){return jt.a});var kr=i(87);i.d(n,"isDate",function(){return kr.a});var Qt=i(88);i.d(n,"isError",function(){return Qt.a});var zr=i(2);i.d(n,"isFunction",function(){return zr.a});var lr=i(89);i.d(n,"isFinite",function(){return lr.a});var Lr=i(7);i.d(n,"isNil",function(){return Lr.a});var Zr=i(90);i.d(n,"isNull",function(){return Zr.a});var mi=i(5);i.d(n,"isNumber",function(){return mi.a});var Fr=i(12);i.d(n,"isObject",function(){return Fr.a});var $n=i(14);i.d(n,"isObjectLike",function(){return $n.a});var to=i(10);i.d(n,"isPlainObject",function(){return to.a});var Hn=i(31);i.d(n,"isPrototype",function(){return Hn.a});var js=i(91);i.d(n,"isRegExp",function(){return js.a});var Mc=i(4);i.d(n,"isString",function(){return Mc.a});var Cc=i(3);i.d(n,"isType",function(){return Cc.a});var ui=i(92);i.d(n,"isUndefined",function(){return ui.a});var ls=i(93);i.d(n,"isElement",function(){return ls.a});var ql=i(94);i.d(n,"requestAnimationFrame",function(){return ql.a});var Ac=i(95);i.d(n,"clearAnimationFrame",function(){return Ac.a});var Tc=i(96);i.d(n,"augment",function(){return Tc.a});var Oc=i(97);i.d(n,"clone",function(){return Oc.a});var ro=i(98);i.d(n,"debounce",function(){return ro.a});var zn=i(32);i.d(n,"memoize",function(){return zn.a});var no=i(99);i.d(n,"deepMix",function(){return no.a});var Zt=i(8);i.d(n,"each",function(){return Zt.a});var ln=i(100);i.d(n,"extend",function(){return ln.a});var Ut=i(101);i.d(n,"indexOf",function(){return Ut.a});var Mn=i(102);i.d(n,"isEmpty",function(){return Mn.a});var yi=i(33);i.d(n,"isEqual",function(){return yi.a});var Zl=i(103);i.d(n,"isEqualWith",function(){return Zl.a});var Ql=i(104);i.d(n,"map",function(){return Ql.a});var us=i(105);i.d(n,"mapValues",function(){return us.a});var Us=i(16);i.d(n,"mix",function(){return Us.a}),i.d(n,"assign",function(){return Us.a});var Jl=i(106);i.d(n,"get",function(){return Jl.a});var eu=i(107);i.d(n,"set",function(){return eu.a});var w2=i(108);i.d(n,"pick",function(){return w2.a});var E2=i(109);i.d(n,"omit",function(){return E2.a});var _2=i(110);i.d(n,"throttle",function(){return _2.a});var S2=i(111);i.d(n,"toArray",function(){return S2.a});var M2=i(9);i.d(n,"toString",function(){return M2.a});var C2=i(112);i.d(n,"uniqueId",function(){return C2.a});var A2=i(113);i.d(n,"noop",function(){return A2.a});var T2=i(114);i.d(n,"identity",function(){return T2.a});var O2=i(115);i.d(n,"size",function(){return O2.a});var k2=i(34);i.d(n,"measureTextWidth",function(){return k2.a});var I2=i(117);i.d(n,"getEllipsisText",function(){return I2.a});var L2=i(118);i.d(n,"Cache",function(){return L2.a})},function(t,n,i){var a=i(19),o=i(13),s=function(l,u){return u===void 0&&(u=[]),Object(a.a)(l,function(f){return!Object(o.a)(u,f)})};n.a=s},function(t,n,i){var a=i(2),o=i(20),s=i(0),l=i(10);function u(f,c){if(!Object(s.a)(f))return null;var h;if(Object(a.a)(c)&&(h=c),Object(l.a)(c)&&(h=function(v){return Object(o.a)(v,c)}),h){for(var d=0;d<f.length;d+=1)if(h(f[d]))return f[d]}return null}n.a=u},function(t,n,i){function a(o,s,l){l===void 0&&(l=0);for(var u=l;u<o.length;u++)if(s(o[u],u))return u;return-1}n.a=a},function(t,n,i){var a=i(7),o=i(0),s=function(l,u){for(var f=null,c=0;c<l.length;c++){var h=l[c],d=h[u];if(!Object(a.a)(d)){Object(o.a)(d)?f=d[0]:f=d;break}}return f};n.a=s},function(t,n,i){var a=i(0),o=function(s){if(!Object(a.a)(s))return[];for(var l=[],u=0;u<s.length;u++)l=l.concat(s[u]);return l};n.a=o},function(t,n,i){var a=i(0),o=function(s,l){if(l===void 0&&(l=[]),!Object(a.a)(s))l.push(s);else for(var u=0;u<s.length;u+=1)o(s[u],l);return l};n.a=o},function(t,n,i){var a=i(0),o=i(22),s=i(23),l=function(u){var f=u.filter(function(p){return!isNaN(p)});if(!f.length)return{min:0,max:0};if(Object(a.a)(u[0])){for(var c=[],h=0;h<u.length;h++)c=c.concat(u[h]);f=c}var d=Object(o.a)(f),v=Object(s.a)(f);return{min:v,max:d}};n.a=l},function(t,n,i){var a=Array.prototype,o=a.splice,s=a.indexOf,l=function(u){for(var f=[],c=1;c<arguments.length;c++)f[c-1]=arguments[c];for(var h=0;h<f.length;h++)for(var d=f[h],v=-1;(v=s.call(u,d))>-1;)o.call(u,v,1);return u};n.a=l},function(t,n,i){var a=i(1),o=i(24),s=function(l,u){var f=[];if(!Object(a.a)(l))return f;for(var c=-1,h=[],d=l.length;++c<d;){var v=l[c];u(v,c,l)&&(f.push(v),h.push(c))}return Object(o.a)(l,h),f};n.a=s},function(t,n,i){var a=i(0),o=i(4),s=i(2);function l(u,f){var c;if(Object(s.a)(f))c=function(d,v){return f(d)-f(v)};else{var h=[];Object(o.a)(f)?h.push(f):Object(a.a)(f)&&(h=f),c=function(d,v){for(var p=0;p<h.length;p+=1){var g=h[p];if(d[g]>v[g])return 1;if(d[g]<v[g])return-1}return 0}}return u.sort(c),u}n.a=l},function(t,n,i){var a=i(26),o=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return Object(a.a)([].concat.apply([],s))};n.a=o},function(t,n,i){var a=i(0),o=i(7);n.a=function(s,l){for(var u=[],f={},c=0;c<s.length;c++){var h=s[c],d=h[l];if(!Object(o.a)(d)){Object(a.a)(d)||(d=[d]);for(var v=0;v<d.length;v++){var p=d[v];f[p]||(u.push(p),f[p]=!0)}}}return u}},function(t,n,i){n.a=o;var a=i(1);function o(s){if(Object(a.a)(s))return s[0]}},function(t,n,i){n.a=o;var a=i(1);function o(s){if(Object(a.a)(s)){var l=s;return l[l.length-1]}}},function(t,n,i){var a=i(0),o=i(4);function s(l,u){return Object(a.a)(l)||Object(o.a)(l)?l[0]===u:!1}n.a=s},function(t,n,i){var a=i(0),o=i(4);function s(l,u){return Object(a.a)(l)||Object(o.a)(l)?l[l.length-1]===u:!1}n.a=s},function(t,n,i){var a=function(o,s){for(var l=0;l<o.length;l++)if(!s(o[l],l))return!1;return!0};n.a=a},function(t,n,i){var a=function(o,s){for(var l=0;l<o.length;l++)if(s(o[l],l))return!0;return!1};n.a=a},function(t,n,i){var a=i(27);n.a=function(o,s){if(!s)return[o];var l=Object(a.a)(o,s),u=[];for(var f in l)u.push(l[f]);return u}},function(t,n,i){function a(o,s){return o["_wrap_"+s]}n.a=a},function(t,n,i){function a(o,s){if(o["_wrap_"+s])return o["_wrap_"+s];var l=function(u){o[s](u)};return o["_wrap_"+s]=l,l}n.a=a},function(t,n,i){var a={};function o(s){var l=a[s];if(!l){for(var u=s.toString(16),f=u.length;f<6;f++)u="0"+u;l="#"+u,a[s]=l}return l}n.a=o},function(t,n,i){var a=i(0);function o(s){var l=0,u=0,f=0,c=0;return Object(a.a)(s)?s.length===1?l=u=f=c=s[0]:s.length===2?(l=f=s[0],u=c=s[1]):s.length===3?(l=s[0],u=c=s[1],f=s[2]):(l=s[0],u=s[1],f=s[2],c=s[3]):l=u=f=c=s,{r1:l,r2:u,r3:f,r4:c}}n.a=o},function(t,n,i){var a=function(o,s,l){return o<s?s:o>l?l:o};n.a=a},function(t,n,i){var a=function(o,s){var l=s.toString(),u=l.indexOf(".");if(u===-1)return Math.round(o);var f=l.substr(u+1).length;return f>20&&(f=20),parseFloat(o.toFixed(f))};n.a=a},function(t,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%1!==0};n.a=o},function(t,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%2===0};n.a=o},function(t,n,i){var a=i(5),o=Number.isInteger?Number.isInteger:function(s){return Object(a.a)(s)&&s%1===0};n.a=o},function(t,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s<0};n.a=o},function(t,n,i){n.a=o;var a=1e-5;function o(s,l,u){return u===void 0&&(u=a),Math.abs(s-l)<u}},function(t,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%2!==0};n.a=o},function(t,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s>0};n.a=o},function(t,n,i){var a=i(0),o=i(2);n.a=function(s,l){if(Object(a.a)(s)){for(var u,f=-1/0,c=0;c<s.length;c++){var h=s[c],d=Object(o.a)(l)?l(h):h[l];d>f&&(u=h,f=d)}return u}}},function(t,n,i){var a=i(0),o=i(2);n.a=function(s,l){if(Object(a.a)(s)){for(var u,f=1/0,c=0;c<s.length;c++){var h=s[c],d=Object(o.a)(l)?l(h):h[l];d<f&&(u=h,f=d)}return u}}},function(t,n,i){var a=function(o,s){return(o%s+s)%s};n.a=a},function(t,n,i){var a=180/Math.PI,o=function(s){return a*s};n.a=o},function(t,n,i){n.a=parseInt},function(t,n,i){var a=Math.PI/180,o=function(s){return a*s};n.a=o},function(t,n,i){var a=i(8);n.a=a.a},function(t,n,i){var a=i(29);n.a=a.a},function(t,n,i){var a=i(13),o=i(15);n.a=function(s,l){return Object(a.a)(Object(o.a)(s),l)}},function(t,n,i){var a=i(9),o=function(s){return Object(a.a)(s).toLowerCase()};n.a=o},function(t,n,i){var a=i(9),o=function(s){var l=Object(a.a)(s);return l.charAt(0).toLowerCase()+l.substring(1)};n.a=o},function(t,n,i){function a(o,s){return!o||!s?o:o.replace(/\\?\{([^{}]+)\}/g,function(l,u){return l.charAt(0)==="\\"?l.slice(1):s[u]===void 0?"":s[u]})}n.a=a},function(t,n,i){var a=i(9),o=function(s){return Object(a.a)(s).toUpperCase()};n.a=o},function(t,n,i){var a=i(9),o=function(s){var l=Object(a.a)(s);return l.charAt(0).toUpperCase()+l.substring(1)};n.a=o},function(t,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Arguments")};n.a=o},function(t,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Boolean")};n.a=o},function(t,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Date")};n.a=o},function(t,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Error")};n.a=o},function(t,n,i){var a=i(5);n.a=function(o){return Object(a.a)(o)&&isFinite(o)}},function(t,n,i){var a=function(o){return o===null};n.a=a},function(t,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"RegExp")};n.a=o},function(t,n,i){var a=function(o){return o===void 0};n.a=a},function(t,n,i){var a=function(o){return o instanceof Element||o instanceof HTMLDocument};n.a=a},function(t,n,i){n.a=a;function a(o){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(l){return setTimeout(l,16)};return s(o)}},function(t,n,i){n.a=a;function a(o){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(o)}},function(t,n,i){var a=i(16),o=i(2),s=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];for(var f=l[0],c=1;c<l.length;c++){var h=l[c];Object(o.a)(h)&&(h=h.prototype),Object(a.a)(f.prototype,h)}};n.a=s},function(t,n,i){var a=i(0),o=function(s){if(typeof s!="object"||s===null)return s;var l;if(Object(a.a)(s)){l=[];for(var u=0,f=s.length;u<f;u++)typeof s[u]=="object"&&s[u]!=null?l[u]=o(s[u]):l[u]=s[u]}else{l={};for(var c in s)typeof s[c]=="object"&&s[c]!=null?l[c]=o(s[c]):l[c]=s[c]}return l};n.a=o},function(t,n,i){function a(o,s,l){var u;return function(){var f=this,c=arguments,h=function(){u=null,l||o.apply(f,c)},d=l&&!u;clearTimeout(u),u=setTimeout(h,s),d&&o.apply(f,c)}}n.a=a},function(t,n,i){var a=i(0),o=i(10),s=5;function l(f,c,h,d){h=h||0,d=d||s;for(var v in c)if(c.hasOwnProperty(v)){var p=c[v];p!==null&&Object(o.a)(p)?(Object(o.a)(f[v])||(f[v]={}),h<d?l(f[v],p,h+1,d):f[v]=c[v]):Object(a.a)(p)?(f[v]=[],f[v]=f[v].concat(p)):p!==void 0&&(f[v]=p)}}var u=function(f){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];for(var d=0;d<c.length;d+=1)l(f,c[d]);return f};n.a=u},function(t,n,i){var a=i(16),o=i(2),s=function(l,u,f,c){Object(o.a)(u)||(f=u,u=l,l=function(){});var h=Object.create?function(v,p){return Object.create(v,{constructor:{value:p}})}:function(v,p){function g(){}g.prototype=v;var m=new g;return m.constructor=p,m},d=h(u.prototype,l);return l.prototype=Object(a.a)(d,l.prototype),l.superclass=h(u.prototype,u),Object(a.a)(d,f),Object(a.a)(l,c),l};n.a=s},function(t,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return-1;var u=Array.prototype.indexOf;if(u)return u.call(s,l);for(var f=-1,c=0;c<s.length;c++)if(s[c]===l){f=c;break}return f};n.a=o},function(t,n,i){var a=i(7),o=i(1),s=i(30),l=i(31),u=Object.prototype.hasOwnProperty;function f(c){if(Object(a.a)(c))return!0;if(Object(o.a)(c))return!c.length;var h=Object(s.a)(c);if(h==="Map"||h==="Set")return!c.size;if(Object(l.a)(c))return!Object.keys(c).length;for(var d in c)if(u.call(c,d))return!1;return!0}n.a=f},function(t,n,i){var a=i(2),o=i(33);n.a=function(s,l,u){return Object(a.a)(u)?!!u(s,l):Object(o.a)(s,l)}},function(t,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return s;for(var u=[],f=0;f<s.length;f++){var c=s[f];u.push(l(c,f))}return u};n.a=o},function(t,n,i){var a=i(7),o=i(12),s=function(l){return l};n.a=function(l,u){u===void 0&&(u=s);var f={};return Object(o.a)(l)&&!Object(a.a)(l)&&Object.keys(l).forEach(function(c){f[c]=u(l[c],c)}),f}},function(t,n,i){var a=i(4);n.a=function(o,s,l){for(var u=0,f=Object(a.a)(s)?s.split("."):s;o&&u<f.length;)o=o[f[u++]];return o===void 0||u<f.length?l:o}},function(t,n,i){var a=i(12),o=i(4),s=i(5);n.a=function(l,u,f){var c=l,h=Object(o.a)(u)?u.split("."):u;return h.forEach(function(d,v){v<h.length-1?(Object(a.a)(c[d])||(c[d]=Object(s.a)(h[v+1])?[]:{}),c=c[d]):c[d]=f}),l}},function(t,n,i){var a=i(8),o=i(10),s=Object.prototype.hasOwnProperty;n.a=function(l,u){if(l===null||!Object(o.a)(l))return{};var f={};return Object(a.a)(u,function(c){s.call(l,c)&&(f[c]=l[c])}),f}},function(t,n,i){var a=i(25);n.a=function(o,s){return Object(a.a)(o,function(l,u,f){return s.includes(f)||(l[f]=u),l},{})}},function(t,n,i){n.a=function(a,o,s){var l,u,f,c,h=0;s||(s={});var d=function(){h=s.leading===!1?0:Date.now(),l=null,c=a.apply(u,f),l||(u=f=null)},v=function(){var p=Date.now();!h&&s.leading===!1&&(h=p);var g=o-(p-h);return u=this,f=arguments,g<=0||g>o?(l&&(clearTimeout(l),l=null),h=p,c=a.apply(u,f),l||(u=f=null)):!l&&s.trailing!==!1&&(l=setTimeout(d,g)),c};return v.cancel=function(){clearTimeout(l),h=0,l=u=f=null},v}},function(t,n,i){var a=i(1);n.a=function(o){return Object(a.a)(o)?Array.prototype.slice.call(o):[]}},function(t,n,i){var a={};n.a=function(o){return o=o||"g",a[o]?a[o]+=1:a[o]=1,o+a[o]}},function(t,n,i){n.a=function(){}},function(t,n,i){n.a=function(a){return a}},function(t,n,i){n.a=s;var a=i(7),o=i(1);function s(l){return Object(a.a)(l)?0:Object(o.a)(l)?l.length:Object.keys(l).length}},function(t,n,i){n.a=a;function a(){for(var o=0,s=0,l=arguments.length;s<l;s++)o+=arguments[s].length;for(var u=Array(o),f=0,s=0;s<l;s++)for(var c=arguments[s],h=0,d=c.length;h<d;h++,f++)u[f]=c[h];return u}},function(t,n,i){var a=i(4),o=i(9),s=i(34);n.a=function(l,u,f,c){c===void 0&&(c="...");var h=16,d=Object(s.a)(c,f),v=Object(a.a)(l)?l:Object(o.a)(l),p=u,g=[],m,b;if(Object(s.a)(l,f)<=u)return l;for(;m=v.substr(0,h),b=Object(s.a)(m,f),!(b+d>p&&b>p);)if(g.push(m),p-=b,v=v.substr(h),!v)return g.join("");for(;m=v.substr(0,1),b=Object(s.a)(m,f),!(b+d>p);)if(g.push(m),p-=b,v=v.substr(1),!v)return g.join("");return""+g.join("")+c}},function(t,n,i){var a=function(){function o(){this.map={}}return o.prototype.has=function(s){return this.map[s]!==void 0},o.prototype.get=function(s,l){var u=this.map[s];return u===void 0?l:u},o.prototype.set=function(s,l){this.map[s]=l},o.prototype.clear=function(){this.map={}},o.prototype.delete=function(s){delete this.map[s]},o.prototype.size=function(){return Object.keys(this.map).length},o}();n.a=a},function(t,n){function i(f,c,h,d){d===void 0&&(d=[]);var v=this;v.w=f||0,v.h=c||0,v.y=h||0,v.x=0,v.c=d||[],v.cs=d.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}i.fromNode=function(f,c){if(!f)return null;var h=[];return f.children.forEach(function(d){h.push(i.fromNode(d,c))}),c?new i(f.height,f.width,f.x,h):new i(f.width,f.height,f.y,h)};function a(f,c,h){h?f.y+=c:f.x+=c,f.children.forEach(function(d){a(d,c,h)})}function o(f,c){var h=c?f.y:f.x;return f.children.forEach(function(d){h=Math.min(o(d,c),h)}),h}function s(f,c){var h=o(f,c);a(f,-h,c)}function l(f,c,h){h?c.y=f.x:c.x=f.x,f.c.forEach(function(d,v){l(d,c.children[v],h)})}function u(f,c,h){h===void 0&&(h=0),c?(f.x=h,h+=f.width):(f.y=h,h+=f.height),f.children.forEach(function(d){u(d,c,h)})}t.exports=function(f,c){c===void 0&&(c={});var h=c.isHorizontal;function d(A){if(A.cs===0){v(A);return}d(A.c[0]);for(var O=M(y(A.c[0].el),0,null),L=1;L<A.cs;++L){d(A.c[L]);var N=y(A.c[L].er);p(A,L,O),O=M(N,L,O)}E(A),v(A)}function v(A){A.cs===0?(A.el=A,A.er=A,A.msel=A.mser=0):(A.el=A.c[0].el,A.msel=A.c[0].msel,A.er=A.c[A.cs-1].er,A.mser=A.c[A.cs-1].mser)}function p(A,O,L){for(var N=A.c[O-1],P=N.mod,R=A.c[O],G=R.mod;N!==null&&R!==null;){y(N)>L.low&&(L=L.nxt);var D=P+N.prelim+N.w-(G+R.prelim);D>0&&(G+=D,g(A,O,L.index,D));var B=y(N),Y=y(R);B<=Y&&(N=b(N),N!==null&&(P+=N.mod)),B>=Y&&(R=m(R),R!==null&&(G+=R.mod))}!N&&R?x(A,O,R,G):N&&!R&&w(A,O,N,P)}function g(A,O,L,N){A.c[O].mod+=N,A.c[O].msel+=N,A.c[O].mser+=N,S(A,O,L,N)}function m(A){return A.cs===0?A.tl:A.c[0]}function b(A){return A.cs===0?A.tr:A.c[A.cs-1]}function y(A){return A.y+A.h}function x(A,O,L,N){var P=A.c[0].el;P.tl=L;var R=N-L.mod-A.c[0].msel;P.mod+=R,P.prelim-=R,A.c[0].el=A.c[O].el,A.c[0].msel=A.c[O].msel}function w(A,O,L,N){var P=A.c[O].er;P.tr=L;var R=N-L.mod-A.c[O].mser;P.mod+=R,P.prelim-=R,A.c[O].er=A.c[O-1].er,A.c[O].mser=A.c[O-1].mser}function E(A){A.prelim=(A.c[0].prelim+A.c[0].mod+A.c[A.cs-1].mod+A.c[A.cs-1].prelim+A.c[A.cs-1].w)/2-A.w/2}function _(A,O){O+=A.mod,A.x=A.prelim+O,C(A);for(var L=0;L<A.cs;L++)_(A.c[L],O)}function S(A,O,L,N){if(L!==O-1){var P=O-L;A.c[L+1].shift+=N/P,A.c[O].shift-=N/P,A.c[O].change-=N-N/P}}function C(A){for(var O=0,L=0,N=0;N<A.cs;N++)O+=A.c[N].shift,L+=O+A.c[N].change,A.c[N].mod+=L}function M(A,O,L){for(;L!==null&&A>=L.low;)L=L.nxt;return{low:A,index:O,nxt:L}}u(f,h);var T=i.fromNode(f,h);return d(T),_(T,0),l(T,f,h),s(f,h),f}},function(t,n,i){function a(v,p){v.prototype=Object.create(p.prototype),v.prototype.constructor=v,o(v,p)}function o(v,p){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,b){return m.__proto__=b,m},o(v,p)}var s=i(11),l=i(121),u=i(17),f=i(6),c=function(v){a(p,v);function p(){return v.apply(this,arguments)||this}var g=p.prototype;return g.execute=function(){var b=this;return b.rootNode.width=0,u(b.rootNode,b.options,l)},p}(s),h={};function d(v,p){return p=f.assign({},h,p),new c(v,p).execute()}t.exports=d},function(t,n,i){var a=i(6);function o(u,f){f===void 0&&(f=[]);var c=this;c.x=c.y=0,c.leftChild=c.rightChild=null,c.height=0,c.children=f}var s={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function l(u,f,c){c?(f.x=u.x,f.y=u.y):(f.x=u.y,f.y=u.x),u.children.forEach(function(h,d){l(h,f.children[d],c)})}t.exports=function(u,f){f===void 0&&(f={}),f=a.assign({},s,f);var c=0;function h(m){if(!m)return null;m.width=0,m.depth&&m.depth>c&&(c=m.depth);var b=m.children,y=b.length,x=new o(m.height,[]);return b.forEach(function(w,E){var _=h(w);x.children.push(_),E===0&&(x.leftChild=_),E===y-1&&(x.rightChild=_)}),x.originNode=m,x.isLeaf=m.isLeaf(),x}function d(m){if(m.isLeaf||m.children.length===0)m.drawingDepth=c;else{var b=m.children.map(function(x){return d(x)}),y=Math.min.apply(null,b);m.drawingDepth=y-1}return m.drawingDepth}var v;function p(m){m.x=m.drawingDepth*f.rankSep,m.isLeaf?(m.y=0,v&&(m.y=v.y+v.height+f.nodeSep,m.originNode.parent!==v.originNode.parent&&(m.y+=f.subTreeSep)),v=m):(m.children.forEach(function(b){p(b)}),m.y=(m.leftChild.y+m.rightChild.y)/2)}var g=h(u);return d(g),p(g),l(g,u,f.isHorizontal),u}},function(t,n,i){function a(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,o(g,m)}function o(g,m){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,x){return y.__proto__=x,y},o(g,m)}var s=i(11),l=i(123),u=i(35),f=i(6),c=["LR","RL","H"],h=c[0],d=function(g){a(m,g);function m(){return g.apply(this,arguments)||this}var b=m.prototype;return b.execute=function(){var x=this,w=x.options,E=x.rootNode;w.isHorizontal=!0;var _=w.indent,S=_===void 0?20:_,C=w.dropCap,M=C===void 0?!0:C,T=w.direction,A=T===void 0?h:T,O=w.align;if(A&&c.indexOf(A)===-1)throw new TypeError("Invalid direction: "+A);if(A===c[0])l(E,S,M,O);else if(A===c[1])l(E,S,M,O),E.right2left();else if(A===c[2]){var L=u(E,w),N=L.left,P=L.right;l(N,S,M,O),N.right2left(),l(P,S,M,O);var R=N.getBoundingBox();P.translate(R.width,0),E.x=P.x-E.width/2}return E},m}(s),v={};function p(g,m){return m=f.assign({},v,m),new d(g,m).execute()}t.exports=p},function(t,n,i){var a=i(6);function o(s,l,u,f,c){var h=typeof u=="function"?u(s):u*s.depth;if(!f)try{if(s.id===s.parent.children[0].id){s.x+=h,s.y=l?l.y:0;return}}catch{}if(s.x+=h,l){if(s.y=l.y+a.getHeight(l,s,c),l.parent&&s.parent.id!==l.parent.id){var d=l.parent,v=d.y+a.getHeight(d,s,c);s.y=v>s.y?v:s.y}}else s.y=0}t.exports=function(s,l,u,f){var c=null;s.eachNode(function(h){o(h,c,l,u,f),c=h})}},function(t,n,i){function a(v,p){v.prototype=Object.create(p.prototype),v.prototype.constructor=v,o(v,p)}function o(v,p){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,b){return m.__proto__=b,m},o(v,p)}var s=i(11),l=i(125),u=i(17),f=i(6),c=function(v){a(p,v);function p(){return v.apply(this,arguments)||this}var g=p.prototype;return g.execute=function(){var b=this;return u(b.rootNode,b.options,l)},p}(s),h={};function d(v,p){return p=f.assign({},h,p),new c(v,p).execute()}t.exports=d},function(t,n,i){var a=i(6);function o(u,f){var c=0;return u.children.length?u.children.forEach(function(h){c+=o(h,f)}):c=u.height,u._subTreeSep=f.getSubTreeSep(u.data),u.totalHeight=Math.max(u.height,c)+2*u._subTreeSep,u.totalHeight}function s(u){var f=u.children,c=f.length;if(c){f.forEach(function(m){s(m)});var h=f[0],d=f[c-1],v=d.y-h.y+d.height,p=0;if(f.forEach(function(m){p+=m.totalHeight}),v>u.height)u.y=h.y+v/2-u.height/2;else if(f.length!==1||u.height>p){var g=u.y+(u.height-v)/2-h.y;f.forEach(function(m){m.translate(0,g)})}else u.y=(h.y+h.height/2+d.y+d.height/2)/2-u.height/2}}var l={getSubTreeSep:function(){return 0}};t.exports=function(u,f){f===void 0&&(f={}),f=a.assign({},l,f),u.parent={x:0,width:0,height:0,y:0},u.BFTraverse(function(c){c.x=c.parent.x+c.parent.width}),u.parent=null,o(u,f),u.startY=0,u.y=u.totalHeight/2-u.height/2,u.eachNode(function(c){var h=c.children,d=h.length;if(d){var v=h[0];if(v.startY=c.startY+c._subTreeSep,d===1)v.y=c.y+c.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var p=1;p<d;p++){var g=h[p];g.startY=h[p-1].startY+h[p-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),s(u)}}])})})(vK);var f3e=vK.exports;const Dw=Gl(f3e);var KF=aa.traverseTree,c3e=function(e,t){var n;return e?Pt(e)?n=function(a){return e}:n=e:n=function(a){return t||1},n},h3e=function(e,t){var n=[],i=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<t.length;o++){var l=t[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<e.length;o++){var f=n.length,c=i[o],h=c.length;n[o*4+2]=f,n[o*4+3]=c.length,u=Math.max(u,c.length);for(var d=0;d<h;++d){var v=c[d];n.push(+v)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},d3e=function(e,t,n){var i=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var l=e[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<t.length;s++){var u=t[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(n(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(n(u))}var f=0;for(s=0;s<e.length;s++){var c=i.length,h=a[s],d=h.length;i[s*4+2]=c,i[s*4+3]=d/2,f=Math.max(f,d/2);for(var v=0;v<d;++v){var p=h[v];i.push(+p)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:f}},v3e=function(e,t,n,i){var a=[],o=[],s={},l=0;for(l=0;l<e.length;l++){var u=e[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<t.length;l++){var f=t[l];o[s[f.source]].push(s[f.target]),o[s[f.source]].push(n(f)),o[s[f.source]].push(i(f)),o[s[f.source]].push(0),o[s[f.target]].push(s[f.source]),o[s[f.target]].push(n(f)),o[s[f.target]].push(i(f)),o[s[f.target]].push(0)}var c=0;for(l=0;l<e.length;l++){var h=a.length,d=o[l],v=d.length;a[l*4+2]=h+1048576*v/4,a[l*4+3]=0,c=Math.max(c,v/4);for(var p=0;p<v;++p){var g=d[p];a.push(+g)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:c}},p3e=function(e,t){var n=[],i=e.length,a={};return t.forEach(function(o){e.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),l===i-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},g3e=function(e){for(var t=[],n=e.length,i=e[0].length,a=function(l){e.forEach(function(u,f){if(t.push(u[l]),f===n-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(t)},m3e=function(e,t){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&n.indexOf(t)>=0&&(s="x",o="y");var l=0;KF(e,function(c){return l++,c.x>a.x&&(a.x=c.x),c.x<i.x&&(i.x=c.x),c.y>a.y&&(a.y=c.y),c.y<i.y&&(i.y=c.y),!0});var u=Math.PI*2/l,f=a[s]-i[s];return f===0||KF(e,function(c){var h=(c[s]-i[s])/f*(Math.PI*2-u)+u,d=Math.abs(o==="x"?c.x-e.x:c.y-e.y);return c.x=d*Math.cos(h),c.y=d*Math.sin(h),!0}),e};const y3e=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:g3e,attributesToTextureData:p3e,buildTextureData:h3e,buildTextureDataWithOneEdgeAttr:d3e,buildTextureDataWithTwoEdgeAttr:v3e,proccessToFunc:c3e,radialLayout:m3e},Symbol.toStringTag,{value:"Module"}));var pK=function r(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var n=t.parent!==void 0?t.parent:document.body,i=t.id!==void 0?t.id:"oldie",a=r().getWebGLErrorMessage();a.id=i,n.appendChild(a)}}};const b3e=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:pK},Symbol.toStringTag,{value:"Module"}));var gK=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"};const x3e=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName:gK},Symbol.toStringTag,{value:"Module"}));var Hu=U(U(U(U(U({},aa),axe),y3e),b3e),x3e),w3e=Hu.radialLayout,E3e=function(){function r(e){this.type=e.type,this.radial=e.radial,this.config=e}return r.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(n){var i=Dw[t.type](n,t.config);return w3e(i),i};return}this.layoutMethod=function(n){return Dw[t.type](n,t.config)}},r.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},r.prototype.layout=function(e){return this.init(e),this.execute()},r}();Or.registerLayout("grid",Or.GridLayout);Or.registerLayout("random",Or.RandomLayout);Or.registerLayout("force",Or.ForceLayout);Or.registerLayout("circular",Or.CircularLayout);Or.registerLayout("dagre",Or.DagreLayout);Or.registerLayout("dagreCompound",Or.DagreCompoundLayout);Or.registerLayout("radial",Or.RadialLayout);Or.registerLayout("concentric",Or.ConcentricLayout);Or.registerLayout("mds",Or.MDSLayout);Or.registerLayout("fruchterman",Or.FruchtermanLayout);Or.registerLayout("fruchterman-gpu",Or.FruchtermanGPULayout);Or.registerLayout("gForce",Or.GForceLayout);Or.registerLayout("force2",Or.Force2Layout);Or.registerLayout("gForce-gpu",Or.GForceGPULayout);Or.registerLayout("comboForce",Or.ComboForceLayout);Or.registerLayout("comboCombined",Or.ComboCombinedLayout);Or.registerLayout("forceAtlas2",Or.ForceAtlas2Layout);var _3e=function(e,t){t.isCustomLayout=!0,Or.Layouts[e]=Or.registerLayout(e,t)},S3e=function(){function r(e,t){var n=e.toString(),i=new Blob(["importScripts('".concat(t,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return r}(),M3e=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var f=s.data,c=f.nodes,h=f.edges,d=f.layoutCfg,v=d===void 0?{}:d,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(p," not found")});break}var m;v.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:c}),m==null||m.destroy()},m=new g(v),m.init({nodes:c,edges:h}),m.execute();break}case i.GPURUN:{var b=s.data,y=b.nodes,h=b.edges,x=b.layoutCfg,v=x===void 0?{}:x,w=b.canvas,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(p," not found")});break}if(p.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout ".concat(p," does not support GPU")});break}var E=new g(v);E.init({nodes:y,edges:h}),E.executeWithWorker(w,this);break}}}onmessage=function(l){a(l)&&o(l)}}var n=new S3e(t,e);return n},Ud={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function BT(r){"@babel/helpers - typeof";return BT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BT(r)}var qF=function(e){return setTimeout(e,16)},ZF=function(e){return clearTimeout(e)},Z1={requestAnimationFrame:function(e){var t=typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||qF;return t(e)},cancelAnimationFrame:function(e){var t=typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||ZF;return t(e)}},C3e=["fruchterman","gForce"],A3e=["force","grid","circular"],T3e=function(r){nr(e,r);function e(t){var n=r.call(this,t)||this;return n.graph=t,n.layoutCfg=t.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=M3e(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(Z1.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(Z1.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,n){var i=this;return new Promise(function(a,o){return co(i,void 0,void 0,function(){var s,l,u,f,c,p,h,d,v,p,g;return ho(this,function(m){switch(m.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];l=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(mK(l)?l="".concat(l,"-gpu"):console.warn("The '".concat(l,"' layout does not support GPU calculation for now, it will run in CPU."))),aa.isForce(l)?(u=t.onTick,f=t.animate,c=f===void 0&&(l==="force"||l==="force2"),p=function(){u&&u(),(f||c)&&s.refreshPositions()},t.tick=p):(l==="comboForce"||l==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),h=!1;try{d=new Or.Layouts[l](t),this.layoutMethods[n]&&this.layoutMethods[n].destroy(),this.layoutMethods[n]=d}catch{console.warn("The layout method: '".concat(l,"' does not exist! Please specify it first.")),o()}return h=d.enableTick,h&&(v=t.onTick,p=function(){v&&v(),s.refreshPositions()},d.tick=p),g=this.filterLayoutData(this.data,t),I3e(g,n),d.init(g),s.emit("beforesublayout",{type:l}),[4,d.execute()];case 1:return m.sent(),d.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,n){var i=this;return new Promise(function(a,o){return co(i,void 0,void 0,function(){var s,l,u,f,c,h,d;return ho(this,function(v){switch(v.label){case 0:return s=this.graph,l=n==null?void 0:n.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},aa.isForce(l)&&(u=n.onTick,f=n.animate,c=f===void 0&&(l==="force"||l==="force2"),h=function(){u==null||u(),(f||c)&&s.refreshPositions()},n.tick=h),d=this.filterLayoutData(this.data,n),t.init(d),t.updateCfg(n),s.emit("beforesublayout",{type:l}),[4,t.execute()];case 1:return v.sent(),t.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var n=this,i,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,l=o.hiddenNodes;if(!s)return!1;var u=a.get("width"),f=a.get("height"),c={};Object.assign(c,{width:u,height:f,center:[u/2,f/2]},this.layoutCfg),this.layoutCfg=c;var h=c.type,d=!1;(i=this.layoutMethods)===null||i===void 0||i.forEach(function(w){var E;return d=!!(!((E=w.nodes)===null||E===void 0)&&E.length)||d});var v=this.destoryLayoutMethods();a.emit("beforelayout");var p=Promise.resolve();d&&h&&(v==null?void 0:v.length)===1&&v[0]===h?this.tweakInit():p=this.initPositions(c.center,s);var g=this.initPositions(c.center,l);g.then(),this.isGPU=QF(c,h);var m=c.onLayoutEnd,b=c.layoutEndFormatted,y=c.adjust;if(b||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return co(n,void 0,void 0,function(){return ho(this,function(w){switch(w.label){case 0:return m&&m(s),this.refreshLayout(),y&&c.pipes?[4,this.adjustPipesBox(this.data,y)]:[3,2];case 1:w.sent(),this.refreshLayout(),w.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var x=!1;return c.type?(x=!0,p=p.then(function(){return co(n,void 0,void 0,function(){return ho(this,function(w){switch(w.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,w.sent()]}})})})):c.pipes&&(x=!0,c.pipes.forEach(function(w,E){p=p.then(function(){return co(n,void 0,void 0,function(){return ho(this,function(_){switch(_.label){case 0:return[4,this.execLayoutMethod(w,E)];case 1:return[2,_.sent()]}})})})})),x?p.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),t&&t()}).catch(function(w){console.warn("graph layout failed,",w)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,n=t.data,i=t.graph,a=n.nodes,o=n.edges;if(a!=null&&a.length){var s={};a.forEach(function(f){var c=f.x,h=f.y;!isNaN(c)&&!isNaN(h)&&(s[f.id]={x:c,y:h},f.mass=f.mass||2)}),o.forEach(function(f){var c=f.source,h=f.target,d=s[c],v=s[h];!d&&v?s[c]={x:v.x+(Math.random()-.5)*80,y:v.y+(Math.random()-.5)*80}:!v&&d&&(s[h]={x:d.x+(Math.random()-.5)*80,y:d.y+(Math.random()-.5)*80})});var l=i.get("width"),u=i.get("height");a.forEach(function(f){var c=s[f.id]||{x:l/2+(Math.random()-.5)*20,y:u/2+(Math.random()-.5)*20};f.x=c.x,f.y=c.y})}},e.prototype.initWithPreset=function(t,n){var i=this;return new Promise(function(a,o){return co(i,void 0,void 0,function(){var s,l,u,f,c,h,d;return ho(this,function(v){switch(v.label){case 0:return s=this,l=s.layoutCfg,u=s.data,f=l.preset,!(f!=null&&f.type)||!Or.Layouts[f==null?void 0:f.type]?(n==null||n(),a(),[2,!1]):(c=QF(f,f.type),h=c?"".concat(f.type,"-gpu"):f.type,d=new Or.Layouts[h](f),delete l.preset,d.init(u),[4,d.execute()]);case 1:return v.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,n){var i=this,a=this,o=a.layoutCfg,s=a.graph,l=this.getWorker(),u=this.workerData;if(!l)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,s.emit("beforelayout");var f=Promise.resolve(),c=!1;if(o.type)c=!0,f=f.then(function(){return i.runWebworker(l,t,o)});else if(o.pipes){c=!0;for(var h=function(m){f=f.then(function(){return i.runWebworker(l,t,m)})},d=0,v=o.pipes;d<v.length;d++){var p=v[d];h(p)}}return c&&f.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),n==null||n()}).catch(function(g){console.error("layout failed",g)}),!0},e.prototype.runWebworker=function(t,n,i){var a=this,o=this.isGPU,s=this.filterLayoutData(n,i),l=s.nodes,u=s.edges,f=document.createElement("canvas"),c=o&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in f,h=O3e(i,function(v){return typeof v!="function"});if(!c)t.postMessage({type:Ud.RUN,nodes:l,edges:u,layoutCfg:h});else{var d=f.transferControlToOffscreen();h.type="".concat(h.type,"-gpu"),t.postMessage({type:Ud.GPURUN,nodes:l,edges:u,layoutCfg:h,canvas:d},[d])}return new Promise(function(v,p){t.onmessage=function(g){a.handleWorkerMessage(v,p,g,s,i)}})},e.prototype.handleWorkerMessage=function(t,n,i,a,o){var s=this,l=s.graph,u=s.workerData,f=i.data,c=f.type,h=function(){o.onTick&&o.onTick()};switch(c){case Ud.TICK:u.currentTick=f.currentTick,u.currentTickData=f,u.requestId||(u.requestId=Z1.requestAnimationFrame(function(){HM(a,f),l.refreshPositions(),h(),f.currentTick===f.totalTicks?t():u.currentTick===f.totalTicks&&(u.requestId2=Z1.requestAnimationFrame(function(){HM(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,h(),t()})),u.requestId=null}));break;case Ud.END:u.currentTick==null&&(HM(a,f),t());break;case Ud.GPUEND:u.currentTick==null&&(k3e(a,f),t());break;case Ud.ERROR:console.warn("Web-Worker layout error!",f.message),n();break;default:n();break}},e.prototype.updateLayoutCfg=function(t){var n=this,i=this,a=i.graph,o=i.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,l=Mi(t,["disableTriggerLayout"]),u=$t({},this.layoutCfg,l);if(this.layoutCfg=u,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(l.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var f=Promise.resolve(),c=!1;(o==null?void 0:o.length)===1?(c=!0,f=f.then(function(){return co(n,void 0,void 0,function(){return ho(this,function(h){switch(h.label){case 0:return[4,this.updateLayoutMethod(o[0],u)];case 1:return[2,h.sent()]}})})})):o!=null&&o.length&&(c=!0,o.forEach(function(h,d){var v=u.pipes[d];f=f.then(function(){return co(n,void 0,void 0,function(){return ho(this,function(p){switch(p.label){case 0:return[4,this.updateLayoutMethod(h,v)];case 1:return[2,p.sent()]}})})})})),c&&f.then(function(){u.onAllLayoutEnd&&u.onAllLayoutEnd()}).catch(function(h){console.warn("layout failed",h)})}}}},e.prototype.adjustPipesBox=function(t,n){var i=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),A3e.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:i.layoutCfg.center,nodeSize:function(v){return Math.max(v.height,v.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,f=l.layoutNodes,c=Tr(f);s.onLayoutEnd=function(){f==null||f.forEach(function(d,v){var p,g,m,b=d.x-((p=c[v])===null||p===void 0?void 0:p.x),y=d.y-((g=c[v])===null||g===void 0?void 0:g.y);(m=u[v])===null||m===void 0||m.forEach(function(x){x.x+=b,x.y+=y})}),a()};var h=new Or.Layouts[n](s);h.layout({nodes:f})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(sV);function HM(r,e){for(var t=r.nodes,n=e.nodes,i=t.length,a=0;a<i;a++){var o=t[a];o.x=n[a].x,o.y=n[a].y}}function O3e(r,e){var t={};return r&&BT(r)==="object"?(Object.keys(r).forEach(function(n){r.hasOwnProperty(n)&&e(r[n])&&(t[n]=r[n])}),t):r}function k3e(r,e){for(var t=r.nodes,n=e.vertexEdgeData,i=t.length,a=0;a<i;a++){var o=t[a],s=n[4*a],l=n[4*a+1];o.x=s,o.y=l}}function I3e(r,e){var t;if(!((t=r==null?void 0:r.nodes)===null||t===void 0)&&t.length){var n=r.nodes;n.forEach(function(i){i.layoutOrder=e})}}function mK(r){return C3e.includes(r)}function QF(r,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],r.gpuEnabled=!0);var n=!1;return r.gpuEnabled&&(n=!0,pK().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!mK(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}var JF=as,L3e="svg",yK=function(r){nr(e,r);function e(t){var n=r.call(this,t)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return e.prototype.initLayoutController=function(){var t=new T3e(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new hxe(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var n=t.clientWidth,i=t.clientHeight,a=this.get("width")||n,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i));var s=this.get("renderer"),l;if(s===L3e)l=new i0({container:t,width:a,height:o});else{var u={container:t,width:a,height:o},f=this.get("pixelRatio");f&&(u.pixelRatio=f,window.devicePixelRatio=f),l=new Eu(u)}this.set("canvas",l)},e.prototype.initPlugins=function(){var t=this;De(t.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,n,i,a){return co(this,void 0,void 0,function(){var o,s,l;return ho(this,function(u){switch(u.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(f){l.onload=function(){var c=n.createPattern(l,"repeat");n.rect(0,0,i,a),n.fillStyle=c,n.fill(),f("")}})];case 1:return u.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,n,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),f=this.get("canvas"),c=f.getRenderer(),h=s||f.get("el"),d="";t||(t="image/png"),setTimeout(function(){return co(l,void 0,void 0,function(){var v,p,g,m,b,y,x,w,E,_;return ho(this,function(S){switch(S.label){case 0:return c!=="svg"?[3,1]:(v=h.cloneNode(!0),p=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",p),g.replaceChild(v,g.documentElement),m=new XMLSerializer().serializeToString(g),d="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(m)),[3,4]);case 1:return b=void 0,y=h.getContext("2d"),x=a||this.get("width"),w=o||this.get("height"),E=void 0,u?[4,this.downloadImageWatermark(u,y,x,w)]:[3,3];case 2:S.sent(),S.label=3;case 3:if(n){_=typeof window<"u"?window.devicePixelRatio:1;try{b=y.getImageData(0,0,x*_,w*_),E=y.globalCompositeOperation,y.globalCompositeOperation="destination-over",y.fillStyle=n,y.fillRect(0,0,x,w)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}d=h.toDataURL(t),n&&(y.clearRect(0,0,x,w),y.putImageData(b,0,0),y.globalCompositeOperation=E),S.label=4;case 4:return i&&i(d),[2]}})})},16)},e.prototype.toDataURL=function(t,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");t||(t="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),f=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);f.replaceChild(l,f.documentElement);var c=new XMLSerializer().serializeToString(f);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(c))}else{var h=void 0,d=o.getContext("2d"),v=Math.max(this.get("width"),500),p=Math.max(this.get("height"),500),g=void 0;if(n){var m=typeof window<"u"&&window.devicePixelRatio||1;try{h=d.getImageData(0,0,v*m,p*m),g=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=n,d.fillRect(0,0,v,p)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),n&&(d.clearRect(0,0,v,p),d.putImageData(h,0,0),d.globalCompositeOperation=g)}return s},e.prototype.toFullDataURL=function(t,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=_n('<div id="virtual-image"></div>'),f=i?i.backgroundColor:void 0,c=i?i.padding:void 0;c?Pt(c)&&(c=[c,c,c,c]):c=[0,0,0,0];var h=o+c[0]+c[2],d=s+c[1]+c[3],v={container:u,height:h,width:d,quickHit:!0},p=l==="svg"?new i0(v):new Eu(v),g=this.get("group"),m=g.clone(),b=Tr(m.getMatrix());b||(b=[1,0,0,0,1,0,0,0,1]);var y=(a.maxX+a.minX)/2,x=(a.maxY+a.minY)/2;b=JF(b,[["t",-y,-x],["t",s/2+c[3],o/2+c[0]]]),m.resetMatrix(),m.setMatrix(b),p.add(m);var w=p.get("el"),E="";n||(n="image/png"),setTimeout(function(){if(l==="svg"){var _=w.cloneNode(!0),S=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),C=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",S);C.replaceChild(_,C.documentElement);var M=new XMLSerializer().serializeToString(C);E="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(M))}else{var T=void 0,A=w.getContext("2d"),O=void 0;if(f){var L=typeof window<"u"?window.devicePixelRatio:1;try{T=A.getImageData(0,0,d*L,h*L),O=A.globalCompositeOperation,A.globalCompositeOperation="destination-over",A.fillStyle=f,A.fillRect(0,0,d,h)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}E=w.toDataURL(n),f&&(A.clearRect(0,0,d,h),A.putImageData(T,0,0),A.globalCompositeOperation=O)}t&&t(E)},16)},e.prototype.downloadFullImage=function(t,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),f=_n('<div id="virtual-image"></div>'),c=document.querySelector(".g6-graph-watermarker"),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?Pt(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var v=s+d[0]+d[2],p=l+d[1]+d[3];if(c){var g=this.get("graphWaterMarker").cfg||{},m=g.width,b=g.height;v=Math.ceil(v/b)*b,p=Math.ceil(p/m)*m}var y={container:f,height:v,width:p},x=u==="svg"?new i0(y):new Eu(y),w=this.get("group"),E=lxe(w),_=Tr(E.getMatrix());_||(_=[1,0,0,0,1,0,0,0,1]);var S=(o.maxX+o.minX)/2,C=(o.maxY+o.minY)/2;_=JF(_,[["t",-S,-C],["t",l/2+d[3],s/2+d[0]]]),E.resetMatrix(),E.setMatrix(_),x.add(E);var M=x.get("el");n||(n="image/png"),this.asyncToDataUrl(n,h,function(T){var A=document.createElement("a"),O=(t||"graph")+(u==="svg"?".svg":".".concat(n.split("/")[1]));a.dataURLToImage(T,u,A,O);var L=document.createEvent("MouseEvents");L.initEvent("click",!1,!1),A.dispatchEvent(L)},p,v,M)},e.prototype.downloadImage=function(t,n,i){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();n||(n="image/png");var u=(t||"graph")+(l==="svg"?".svg":".".concat(n.split("/")[1])),f=document.createElement("a");o.asyncToDataUrl(n,i,function(c){a.dataURLToImage(c,l,f,u);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),f.dispatchEvent(h)})},e.prototype.dataURLToImage=function(t,n,i,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window<"u")if(window.Blob&&window.URL&&n!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),f=u.length,c=new Uint8Array(f);f--;)c[f]=u.charCodeAt(f);var h=new Blob([c],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(h)})}else i.addEventListener("click",function(){i.download=a,i.href=t})},e.prototype.addPlugin=function(t){var n=this;t.destroyed||(n.get("plugins").push(t),t.initPlugin(n))},e.prototype.removePlugin=function(t){var n=this.get("plugins"),i=n.indexOf(t);i>=0&&(t.destroyPlugin(),n.splice(i,1))},e.prototype.setImageWaterMarker=function(t,n){t===void 0&&(t=Th.waterMarkerImage);var i=this.get("container");tt(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=dn({},Th.imageWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,f=o.image;if(!t){var c=u?i:document.querySelector(".g6-graph-watermarker");c&&(c.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new Eu(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var v=a.get("context"),p=f.rotate,g=f.x,m=f.y;v.rotate(-p*Math.PI/180);var b=new Image;b.crossOrigin="anonymous",b.src=t,b.onload=function(){if(v.drawImage(b,g,m,f.width,f.height),v.rotate(p*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var y=document.querySelector(".g6-graph-watermarker");y||(y=document.createElement("div"),y.className="g6-graph-watermarker"),y.className="g6-graph-watermarker",a.destroyed||(y.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),i.appendChild(y))}}},e.prototype.setTextWaterMarker=function(t,n){var i=this.get("container");tt(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=dn({},Th.textWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,f=o.text;if(!(t!=null&&t.length)){var c=u?i:document.querySelector(".g6-graph-watermarker");c&&(c.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new Eu(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var v=a.get("context"),p=f.rotate,g=f.fill,m=f.fontFamily,b=f.fontSize,y=f.baseline,x=f.x,w=f.y,E=f.lineHeight;v.rotate(-p*Math.PI/180),v.font="".concat(b,"px ").concat(m),v.fillStyle=g,v.textBaseline=y;for(var _=tt(t)?[t]:t,S=_.length-1;S>=0;S--)v.fillText(_[S],x,w+S*E);if(v.rotate(p*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var C=document.querySelector(".g6-graph-watermarker");C||(C=document.createElement("div"),C.className="g6-graph-watermarker"),C.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(C)}},e.prototype.destroy=function(){var t,n,i,a;De(this.get("plugins"),function(f){f.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var l=o[s];if(l){var u=l.parentElement;u&&u.removeChild(l)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),r.prototype.destroy.call(this)},e}(nV);function FT(r){"@babel/helpers - typeof";return FT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FT(r)}function bK(r,e){if(e===void 0&&(e=new WeakMap),r===null)return r;if(r instanceof Date)return new Date(r);if(r instanceof RegExp)return new RegExp(r);if(FT(r)!=="object")return r;if(e.get(r))return e.get(r);var t=Array.isArray(r)?[]:{};e.set(r,t);for(var n in r)r.hasOwnProperty(n)&&r[n]!==void 0&&(t[n]=bK(r[n],e));return t}function P3e(r){try{return structuredClone(r)}catch{return bK(r)}}var D3e=Hu.radialLayout,XM=Hu.traverseTree,N3e=function(r){nr(e,r);function e(t){var n=r.call(this,t)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(n){var i=Dw[t.type](n,t);return D3e(i),i}:function(n){return Dw[t.type](n,t)}):null},e.indexOfChild=function(t,n){var i=-1;return De(t,function(a,o){if(n===a.id)return i=o,!1}),i},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,n,i){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(n){if(s.set("parent",n),i){var l=n.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=n.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var f=n.get("children");f?f.push(s):n.set("children",[s]),a.addItem("edge",{source:n.get("id"),target:s.get("id"),id:"".concat(n.get("id"),":").concat(s.get("id"))},!1)}return De(t.children||[],function(c){a.innerAddChild(c,s,i)}),a.emit("afteraddchild",{item:s,parent:n}),s},e.prototype.innerUpdateChild=function(t,n,i){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,n,i);return}De(t.children||[],function(v){a.innerUpdateChild(v,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var f=s[u].getModel();e.indexOfChild(t.children||[],f.id)===-1&&(a.innerRemoveChild(f.id,{x:t.x,y:t.y},i),s.splice(u,1))}}var c,h;o.get("originAttrs")&&(c=o.get("originAttrs").x,h=o.get("originAttrs").y);var d=o.getModel();i&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",Object.assign(d,t.data)),(c!==t.x||h!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,n,i){var a=this,o=a.findById(t);if(o)if(De(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,n,i)}),i){var s=o.getModel();o.set("to",n),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,n){n===void 0&&(n=!0);var i=this;this.getNodes().map(function(a){return i.clearItemStates(a)}),this.getEdges().map(function(a){return i.clearItemStates(a)}),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.get("originData"),after:t||i.get("data")}),t?(i.data(t),i.render(!1)):i.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(t)},e.prototype.updateLayout=function(t,n,i,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),n){var s=i;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*l[0]+l[6],s.y=s.y*l[0]+l[7];var u=this.getGroup().getCanvasBBox(),f=u.minX,c=u.maxX,h=u.minY,d=u.maxY,v={x:(f+c)/2,y:(h+d)/2};n==="begin"&&(v.x=f,v.y=h),this.translate(s.x-v.x,s.y-v.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(t)},e.prototype.layout=function(t){var n=this,i=this,a=i.get("data"),o=i.get("layoutMethod"),s=i.get("layout"),l=a;if(s!=null&&s.excludeInvisibles){a=Tr(i.get("data"));var u={};XM(a,function(h){var d=h.children;if(!(d!=null&&d.length))return!0;for(var v=d.length-1;v>=0;v--){var p=n.findById(d[v].id),g=p?!p.isVisible():d[v].visible===!1;g&&(u[h.id]=u[h.id]||[],u[h.id].push({idx:v,child:d.splice(v,1)[0]}))}}),l=o?o(a,i.get("layout")):a,XM(l,function(h){var d=u[h.id];if(d!=null&&d.length)for(var v=d.length-1;v>=0;v--){var p=d[v],g=p.idx,m=p.child;h.children.splice(g,0,m)}})}else l=o?o(a,i.get("layout")):a;var f=i.get("animate");if(i.emit("beforerefreshlayout",{data:a,layoutData:l}),i.emit("beforelayout"),i.innerUpdateChild(l,void 0,f),t){var c=i.get("viewController");c.fitView()}f?i.layoutAnimate(l):(i.refresh(),i.paint()),i.emit("afterrefreshlayout",{data:a,layoutData:l}),i.emit("afterlayout")},e.prototype.addChild=function(t,n,i){i===void 0&&(i=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:n}),tt(n)||(n=n.get("id"));var o=a.findDataById(n);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(n);s.refresh(),a.changeData(void 0,i)}},e.prototype.updateChildren=function(t,n,i){i===void 0&&(i=!0);var a=this,o=a.findById(n);if(!n||!o){console.warn("Update children failed! There is no node with id '".concat(n,"'"));return}var s=a.findDataById(n);s.children=t,o.refresh(),a.changeData(void 0,i)},e.prototype.updateChild=function(t,n,i){i===void 0&&(i=!0);var a=this;if(!n||!a.findById(n)){a.changeData(t,i);return}var o=a.findDataById(n),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var l=e.indexOfChild(o.children,t.id);l>-1&&(o.children[l]=t)}var u=a.findById(n);u==null||u.refresh(),a.changeData(void 0,i)},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0);var i=this,a=i.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=i.getNodes().find(function(c){var h=c.getModel().children||[];return!!h.find(function(d){return d.id===t})}),o&&!o.destroyed){var s=o.get("id"),l=i.findDataById(s),u=l&&l.children||[],f=e.indexOfChild(u,t);u.splice(f,1),o.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(t,n){var i=this;if(n||(n=i.get("data")),t===n.id)return n;var a=null;return De(n.children||[],function(o){if(o.id===t)return a=o,!1;if(a=i.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,n){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:t}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){XM(t,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),f=l.get("model");if(u||(u={x:f.x,y:f.y},l.set("originAttrs",u)),n){var c=n(l,o,u,t);l.set("model",Object.assign(f,c))}else f.x=u.x+(s.x-u.x)*o,f.y=u.y+(s.y-u.y)*o}return!0}),De(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),f=s.get("to");l.x=u.x+(f.x-u.x)*o,l.y=u.y+(f.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){De(i.getNodes(),function(s){s.set("originAttrs",null)}),De(i.get("removeList"),function(s){i.removeItem(s,!1)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var n=this,i=n.get("data");if(!i||!Hi(i)||!Object.keys(i).length)throw new Error("data must be defined first");n.clear(),t&&this.get("enabledStack")&&this.clearStack(),n.emit("beforerender"),n.layout(this.get("fitView")),n.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){r.prototype.data.call(this,t),this.set("originData",P3e(t))},e}(yK),R3e=function(){function r(e){this._cfgs=dn(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var n=t.getEvents(),i={};De(n,function(a,o){var s=hh(t,a);i[o]=s,e.on(o,s)}),this._events=i,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},r.prototype.set=function(e,t){this._cfgs[e]=t},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;De(t,function(n,i){e.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},r}();const eo=R3e;var B3e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),e6="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",F3e=function(r){B3e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:e6,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),n=t.get("container"),i=t.get("canvas").get("el"),a=this.get("img")||e6;a.includes("url(")||(a='url("'.concat(a,'")'));var o=_n(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=_n(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),n.insertBefore(o,i)},e.prototype.positionInit=function(){var t=this.get("graph"),n=t.get("minZoom"),i=t.get("width"),a=t.get("height");Mr(this.get("container"),{width:"".concat(i,"px"),height:"".concat(a,"px")});var o=i*80/n,s=a*80/n;Mr(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var n=this.get("gridContainer"),i=t.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(i[0],", ").concat(i[1],", ").concat(i[3],", ").concat(i[4],", ").concat(a?i[6]:"0",", ").concat(a?i[7]:"0",")");Mr(n,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),n=t.get("container"),i=this.get("container");n.removeChild(i)},e}(eo);const $3e=F3e;var eP={exports:{}},t6=[],yg=[],z3e="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function xK(r,e){if(e=e||{},r===void 0)throw new Error(z3e);var t=e.prepend===!0?"prepend":"append",n=e.container!==void 0?e.container:document.querySelector("head"),i=t6.indexOf(n);i===-1&&(i=t6.push(n)-1,yg[i]={});var a;return yg[i]!==void 0&&yg[i][t]!==void 0?a=yg[i][t]:(a=yg[i][t]=G3e(),t==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),r.charCodeAt(0)===65279&&(r=r.substr(1,r.length)),a.styleSheet?a.styleSheet.cssText+=r:a.textContent+=r,a}function G3e(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}eP.exports=xK;eP.exports.insertCss=xK;var j3e=eP.exports;const $_=Gl(j3e);var U3e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&$_(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var W3e=function(r){U3e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>菜单项1</li>
            <li>菜单项2</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),n=_n("<div class=".concat(t||"g6-component-contextmenu","></div>"));Mr(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),tt(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},e.prototype.onMenuShow=function(t){var n=this;t.preventDefault();var i=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&i.indexOf(t.item.getType())===-1){n.onMenuHide();return}}else if(i.indexOf("canvas")===-1){n.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(t,l);tt(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var f=this.get("handleMenuClick");if(f){var c=function(S){f(S.target,t.item,l)};this.set("handleMenuClickWrapper",c),o.addEventListener("click",c)}var h=l.get("width"),d=l.get("height"),v=o.getBoundingClientRect(),p=this.get("offsetX")||0,g=this.get("offsetY")||0,m=l.getContainer().offsetTop,b=l.getContainer().offsetLeft,y=t.canvasX+b+p,x=t.canvasY+m+g;y+v.width>h&&(y=t.canvasX-v.width-p+b),x+v.height>d&&(x=t.canvasY-v.height-g+m),x<0&&(x=0),Mr(o,{top:"".concat(x,"px"),left:"".concat(y,"px"),visibility:"visible"});var w=this.get("trigger")==="click",E=function(S){if(w){w=!1;return}n.onMenuHide()};document.body.addEventListener("click",E),this.set("handler",E)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),n=this.get("handler");if(t){var i=this.get("menu");i.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Mr(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var n=this.get("container");n||(n=this.get("graph").get("container")),tt(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(eo);const V3e=W3e;var H3e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$T=function(){return $T=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},$T.apply(this,arguments)},r6=Math.max,X3e=as,Y3e="default",K3e="keyShape",q3e="delegate",n6="svg",Z3e=function(r){H3e(e,r);function e(t){var n=r.call(this,t)||this;return n.handleUpdateCanvas=Lm(function(i){var a=n;a.destroyed||a.updateCanvas()},100,!1),n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,i=n.size,a=n.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,f=_n(`
      <div
        class=`.concat(n.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(u||l),`
      </div>`)),c=0,h=0,d=!1,v=0,p=0,g=0,m=0,b=0,y=0,x=u||l?"mousedown":"dragstart";f.addEventListener(x,function(S){var C,M;if(S.dataTransfer){var T=new Image;T.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(M=(C=S.dataTransfer).setDragImage)===null||M===void 0||M.call(C,T,0,0);try{S.dataTransfer.setData("text/html","view-port-minimap")}catch{S.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,S.target===f){var A=f.style;v=parseInt(A.left,10),p=parseInt(A.top,10),g=parseInt(A.width,10),m=parseInt(A.height,10),!(g>i[0]||m>i[1])&&(y=a.getZoom(),b=t.get("ratio"),d=!0,c=S.clientX,h=S.clientY)}},!1);var w=function(C){if(!(!d||Lt(C.clientX)||Lt(C.clientY))){var M=c-C.clientX,T=h-C.clientY;(v-M<0||v-M+g>=i[0])&&(M=0),(p-T<0||p-T+m>=i[1])&&(T=0),v-=M,p-=T,Mr(f,{left:"".concat(v,"px"),top:"".concat(p,"px")}),a.translate(M*y/b,T*y/b),c=C.clientX,h=C.clientY}};!u&&!l&&f.addEventListener("drag",w,!1);var E=function(){d=!1,n.refresh=!0},_=u||l?"mouseup":"dragend";f.addEventListener(_,E,!1),s.addEventListener("mouseleave",E),s.addEventListener("mouseup",E),(u||l)&&s.addEventListener("mousemove",w,!1),this.set("viewport",f),s.appendChild(f)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("totaldx"),i=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),l=a.get("width")||s.scrollWidth||500,u=a.get("height")||s.scrollHeight||500,f=a.getPointByCanvas(0,0),c=a.getPointByCanvas(l,u),h=this.get("viewport");h||this.initViewport();var d=(c.x-f.x)*t,v=(c.y-f.y)*t,p=f.x*t+n,g=f.y*t+i,m=p+d,b=g+v;p<0&&(d+=p,p=0),m>o[0]&&(d=d-(m-o[0])),g<0&&(v+=g,g=0),b>o[1]&&(v=v-(b-o[1])),this.set("ratio",t);var y="".concat(p,"px"),x="".concat(g,"px");Mr(h,{left:y,top:x,width:"".concat(d,"px"),height:"".concat(v,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,n=this.get("canvas"),i=t.get("group");if(!i.destroyed){n.clear();var a;this.get("hideEdge")?(a=n.addGroup(),i.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=i.clone(),a.resetMatrix(),n.add(a));var o=t.get("renderer");o===n6&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var n=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var i=t.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),n.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||De(n.getEdges(),function(l){t.updateOneEdgeKeyShape(l,a)}),De(n.getNodes(),function(l){t.updateOneNodeKeyShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(De(o,function(l){t.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,n){if(!this.destroyed){var i=this.get("itemMap")||{},a=i[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var f=a.get("type");(f==="rect"||f==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),t.isVisible()?a.show():a.hide(),a.exist=!0;var c=t.getModel().depth;isNaN(c)||a.set("zIndex",c),i[t.get("id")]=a,this.set("itemMap",i)}},e.prototype.updateOneNodeKeyShape=function(t,n){var i=this.get("itemMap")||{},a=i[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?(u=Object.assign(l,u),a.toFront()):(a=s,n.add(a));var f=a.get("type");(f==="rect"||f==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),t.isVisible()?a.show():a.hide(),a.exist=!0;var c=t.getModel().depth;isNaN(c)||a.set("zIndex",c),i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var t=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||De(n.getEdges(),function(l){t.updateOneEdgeKeyShape(l,a)}),De(n.getNodes(),function(l){t.updateOneNodeDelegateShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(De(o,function(l){t.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},n=Object.keys(t);if(!(!n||n.length===0))for(var i=n.length-1;i>=0;i--){var a=t[n[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[n[i]])}},e.prototype.updateOneEdgeKeyShape=function(t,n){var i=this.get("itemMap")||{},a=i[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),n.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,i[t.get("id")]=a,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(t,n){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l),o.toFront()}else o=n.addShape("rect",{attrs:$T({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),i=t.get("size"),a=t.get("className"),o=t.get("container"),s=_n("<div class='".concat(a,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));tt(o)&&(o=document.getElementById(o)),o?o.appendChild(s):n.get("container").appendChild(s),t.set("container",s);var l=_n('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(c){c.preventDefault()}),l.addEventListener("dragover",function(c){c.preventDefault()});var u,f=n.get("renderer");f===n6?u=new i0({container:l,width:i[0],height:i[1]}):u=new Eu({container:l,width:i[0],height:i[1]}),t.set("canvas",u),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Y3e:this.updateGraphShapes();break;case K3e:this.updateKeyShapes();break;case q3e:this.updateDelegateShapes();break}var l=a.get("children")[0];if(l){l.resetMatrix();var u=l.getCanvasBBox(),f=n.get("canvas").getCanvasBBox(),c=n.getZoom()||1,h=f.width/c,d=f.height/c;Number.isFinite(u.width)&&(h=r6(u.width,h),d=r6(u.height,d)),h+=2*s,d+=2*s;var v=Math.min(i[0]/h,i[1]/d),p=[1,0,0,0,1,0,0,0,1],g=0,m=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(m=-u.minY);var b=(i[0]-(h-2*s)*v)/2,y=(i[1]-(d-2*s)*v)/2;p=X3e(p,[["t",g,m],["s",v,v],["t",b,y]]),l.setMatrix(p),this.set("ratio",v),this.set("totaldx",b+g*v),this.set("totaldy",y+m*v),this.set("dx",b),this.set("dy",y),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var n=this.get("container");n!=null&&n.parentNode&&n.parentNode.removeChild(n)},e}(eo);const Q3e=Z3e;var J3e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function Js(r,e,t){var n=r.x-e.x,i=r.y-e.y;return!t||Math.abs(n)>t||Math.abs(i)>t?Math.sqrt(n*n+i*i):t}function e5e(r,e){return r.x*e.x+r.y*e.y}function i6(r,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(t*t*e.source.x+t*(r.y-e.source.y)+r.x)/(t*t+1),i=t*(n-e.source.x)+e.source.y;return{x:n,y:i}}var t5e=function(r){J3e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),n=this.get("onTick"),i=function(){n&&n(),t.refreshPositions()};this.set("tick",i)},e.prototype.bundling=function(t){var n=this;if(n.set("data",t),!n.isTicking()){var i=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(x){(x.x===null||!x.y===null||x.x===void 0||!x.y===void 0)&&(s=!0),o[x.id]=x}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var l=n.get("divisions"),u=n.get("divRate"),f=n.divideEdges(l);n.set("edgePoints",f);var c=n.getEdgeBundles();n.set("edgeBundles",c);for(var h=n.get("cycles"),d=n.get("iterations"),v=n.get("iterRate"),p=n.get("lambda"),g=0;g<h;g++){for(var m=function(w){var E=[];i.forEach(function(_,S){if(_.source!==_.target){var C=o[_.source],M=o[_.target];E[S]=n.getEdgeForces({source:C,target:M},S,l,p);for(var T=0;T<l+1;T++)f[S][T].x+=E[S][T].x,f[S][T].y+=E[S][T].y}})},b=0;b<d;b++)m(b);p=p/2,l*=u,d*=v,f=n.divideEdges(l),n.set("edgePoints",f)}i.forEach(function(x,w){x.source!==x.target&&(x.type="polyline",x.controlPoints=f[w].slice(1,f[w].length-1))});var y=n.get("graph");y.refresh()}},e.prototype.updateBundling=function(t){var n=this,i=t.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(t).forEach(function(o){n.set(o,t[o])}),t.onTick){var a=this.get("graph");n.set("tick",function(){t.onTick(),a.refresh()})}n.bundling(i)},e.prototype.divideEdges=function(t){var n=this,i=n.get("data").edges,a=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){var u;(!o[l]||o[l]===void 0)&&(o[l]=[]);var f=a[s.source],c=a[s.target];if(t===1)o[l].push({x:f.x,y:f.y}),o[l].push({x:.5*(f.x+c.x),y:.5*(f.y+c.y)}),o[l].push({x:c.x,y:c.y});else{var h=0;!((u=o[l])===null||u===void 0)&&u.length?h=n.getEdgeLength(o[l]):h=Js({x:f.x,y:f.y},{x:c.x,y:c.y});var d=h/(t+1),v=d,p=[{x:f.x,y:f.y}];o[l].forEach(function(g,m){if(m!==0){for(var b=Js(g,o[l][m-1]);b>v;){var y=v/b,x={x:o[l][m-1].x,y:o[l][m-1].y};x.x+=y*(g.x-o[l][m-1].x),x.y+=y*(g.y-o[l][m-1].y),p.push(x),b-=v,v=d}v-=b}}),p.push({x:c.x,y:c.y}),o[l]=p}}),o},e.prototype.getEdgeLength=function(t){var n=0;return t.forEach(function(i,a){a!==0&&(n+=Js(i,t[a-1]))}),n},e.prototype.getEdgeBundles=function(){var t=this,n=t.get("data"),i=n.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var f=o[l.source],c=o[l.target];i.forEach(function(h,d){if(!(d<=u)){var v=o[h.source],p=o[h.target],g=t.getBundleScore({source:f,target:c},{source:v,target:p});g>=a&&(s[u].push(d),s[d].push(u))}})}),s},e.prototype.getBundleScore=function(t,n){var i=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,t.length=Js({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),n.length=Js({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var a=i.getAngleScore(t,n),o=i.getScaleScore(t,n),s=i.getPositionScore(t,n),l=i.getVisibilityScore(t,n);return a*o*s*l},e.prototype.getAngleScore=function(t,n){var i=e5e({x:t.vx,y:t.vy},{x:n.vx,y:n.vy});return i/(t.length*n.length)},e.prototype.getScaleScore=function(t,n){var i=(t.length+n.length)/2,a=2/(i/Math.min(t.length,n.length)+Math.max(t.length,n.length)/i);return a},e.prototype.getPositionScore=function(t,n){var i=(t.length+n.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},s=Js(a,o);return i/(i+s)},e.prototype.getVisibilityScore=function(t,n){var i=this.getEdgeVisibility(t,n),a=this.getEdgeVisibility(n,t);return i<a?i:a},e.prototype.getEdgeVisibility=function(t,n){var i=i6(n.source,t),a=i6(n.target,t),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Js(o,s)/Js(i,a))},e.prototype.getEdgeForces=function(t,n,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Js(t.source,t.target)*(i+1)),f=[{x:0,y:0}],c=1;c<i;c++){var h={x:0,y:0},d=o.getSpringForce({pre:s[n][c-1],cur:s[n][c],next:s[n][c+1]},u),v=o.getElectrostaticForce(c,n);h.x=a*(d.x+v.x),h.y=a*(d.y+v.y),f.push(h)}return f.push({x:0,y:0}),f},e.prototype.getSpringForce=function(t,n){var i=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return i*=n,a*=n,{x:i,y:a}},e.prototype.getElectrostaticForce=function(t,n){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[n],u={x:0,y:0};return l.forEach(function(f){var c={x:s[f][t].x-s[n][t].x,y:s[f][t].y-s[n][t].y};if(Math.abs(c.x)>a||Math.abs(c.y)>a){var h=Js(s[f][t],s[n][t]),d=1/h;u.x+=c.x*d,u.y+=c.y*d}}),u},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),r.prototype.destroy.call(this)},e}(eo);const r5e=t5e;var n5e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zT=function(){return zT=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},zT.apply(this,arguments)},Q1=.05,a6={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},i5e=function(r){n5e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Tr(a6),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,n=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",n*n);var i=t.get("d");t.set("molecularParam",(i+1)*n)},e.prototype.createDelegate=function(t){var n=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(t),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Q1:a=1/(1-Q1);var u=n.get("maxR"),f=n.get("minR"),c=n.get("r");(c>(u||i.get("height"))&&a>1||c<(f||i.get("height")*.05)&&a<1)&&(a=1),c*=a,n.set("r",c),n.set("r2",c*c);var h=n.get("d");n.set("molecularParam",(h+1)*c),n.set("delegateCenterDiff",void 0),n.magnify(t,l)}},e.prototype.scaleRByDrag=function(t){var n=this;if(t){var i=n.get("dragPrePos"),a=n.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-i.x<0?o=1-Q1:o=1/(1-Q1);var l=n.get("maxR"),u=n.get("minR"),f=n.get("r");(f>(l||a.get("height"))&&o>1||f<(u||a.get("height")*.05)&&o<1)&&(o=1),f*=o,n.set("r",f),n.set("r2",f*f);var c=n.get("d");n.set("molecularParam",(c+1)*f),n.magnify(t,s),n.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var n=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=0;t.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=n.get("d"),o=a+i,s=n.get("maxD"),l=n.get("minD");if(o<s&&o>l){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var f=n.get("delegate"),c=f?{x:f.attr("x"),y:f.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(t,c)}}},e.prototype.scaleDByDrag=function(t){var n=this,i=n.get("dragPrePos"),a=t.x-i.x>0?.1:-.1,o=n.get("d"),s=o+a,l=n.get("maxD"),u=n.get("minD");if(s<l&&s>u){n.set("d",s);var f=n.get("r");n.set("molecularParam",(s+1)*f),n.magnify(t)}n.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,n){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),f=i.get("r2"),c=i.get("d"),h=i.get("molecularParam"),d=a.getNodes(),v=d.length,p=n?{x:n.x,y:n.y}:{x:t.x,y:t.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(p=i.get("cacheCenter"));var g=i.get("delegateCenterDiff");g&&(p.x+=g.x,p.y+=g.y),i.updateDelegate(p,u);for(var m=0;m<v;m++){var b=d[m].getModel(),y=b.x,x=b.y;if(!(isNaN(y)||isNaN(x))){var w=(y-p.x)*(y-p.x)+(x-p.y)*(x-p.y);if(!isNaN(w)&&w<f&&w!==0){var E=Math.sqrt(w),_=h*E/(c*E+u),S=(y-p.x)/E,C=(x-p.y)/E;if(b.x=S*_+p.x,b.y=C*_+p.y,s[b.id]||(s[b.id]={x:y,y:x,texts:[]}),o.push(b),l&&2*E<u)for(var M=d[m],T=M.getContainer(),A=T.getChildren(),O=A.length,L=0;L<O;L++){var N=A[L];N.get("type")==="text"&&(s[b.id].texts.push({visible:N.get("visible"),shape:N}),N.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,n=t.get("cachedMagnifiedModels"),i=t.get("cachedOriginPositions"),a=n.length,o=0;o<a;o++){var s=n[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var f=u.texts.length,c=0;c<f;c++){var h=u.texts[c];h.shape.set("visible",h.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var n=this,i=t.r,a=t.d,o=t.trigger,s=t.minD,l=t.maxD,u=t.minR,f=t.maxR,c=t.scaleDBy,h=t.scaleRBy;isNaN(t.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(a)||n.set("d",a),isNaN(l)||n.set("maxD",l),isNaN(s)||n.set("minD",s),isNaN(f)||n.set("maxR",f),isNaN(u)||n.set("minR",u);var d=n.get("d"),v=n.get("r");if(n.set("molecularParam",(d+1)*v),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),c==="drag"||c==="wheel"||c==="unset"){n.set("scaleDBy",c),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}if(h==="drag"||h==="wheel"||h==="unset"){n.set("scaleRBy",h),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}},e.prototype.updateDelegate=function(t,n){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||a6;s=l.addShape("circle",{attrs:zT({r:n/1.5,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(v){a.scaleRByWheel(v)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){a.scaleRByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(v){i.scaleDByWheel(v)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){i.scaleDByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:n/1.5});if(a.get("showDPercent")){var f=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),c=a.get("dPercentText"),h=t.y+n/1.5+16;if(!c||c.destroyed){var d=o.get("group");c=d.addShape("text",{attrs:{text:"".concat(f,"%"),x:t.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",c)}else c.attr({text:"".concat(f,"%"),x:t.x,y:h})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(eo);const a5e=i5e;var o5e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),o6=.05;typeof document<"u"&&$_(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var s5e=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),n.tagName==="HTML")return t.push(document,window),t;n=n.parentElement}return t},l5e=function(r){o5e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,n=this.get("graph"),i=this.get("getContent"),a=i(n),o=a;tt(a)&&(o=_n(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),tt(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(c){var h=s5e(c).filter(function(v){return v.nodeName==="LI"});if(h.length!==0){var d=h[0].getAttribute("code");d&&(u?u(d,n):t.handleDefaultOperator(d))}});var f=this.get("position");f&&Mr(o,{top:"".concat(f.y,"px"),left:"".concat(f.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!a||!o||(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,f=l.length,c=u.length;f===0?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),c===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),n=t.getUndoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action;t.pushStack(a,Tr(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(d){var v=t.findById(d.id);d.visible?t.showItem(v,!1):t.hideItem(v,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(d){var v=t.findById(d.id);delete d.id,t.updateItem(v,d,!1),v.getType()==="combo"&&t.updateCombo(v)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(d){var v=d.itemType;delete d.itemType,t.addItem(v,d,!1)})});break}case"add":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(d){t.removeItem(d.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})});break;case"createCombo":var s=i.data.after.combos,l=s[s.length-1];Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})}),t.removeItem(l.id,!1);break;case"uncombo":var u=o.combos[o.combos.length-1],f=o.nodes.concat(o.combos).map(function(c){return c.id}).filter(function(c){return c!==u.id});t.createCombo(u,f,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.redo=function(){var t=this.get("graph"),n=t.getRedoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action,o=i.data.after;if(t.pushStack(a,Tr(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(f){var c=o[f];c&&c.forEach(function(h){var d=t.findById(h.id);h.visible?t.showItem(d,!1):t.hideItem(d,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(f){var c=o[f];c&&c.forEach(function(h){var d=t.findById(h.id);delete h.id,t.updateItem(d,h,!1),d.getType()==="combo"&&t.updateCombo(d)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(f){t.removeItem(f.id,!1)}),o.nodes&&o.nodes.forEach(function(f){t.removeItem(f.id,!1)}),o.combos&&o.combos.forEach(function(f){t.removeItem(f.id,!1)});break;case"add":{Object.keys(o).forEach(function(f){var c=o[f];c&&c.forEach(function(h){var d=h.itemType;delete h.itemType,t.addItem(d,h,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(f){var c=o[f];c&&c.forEach(function(h){t.updateComboTree(h.id,h.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(f){return f.id}),!1);break;case"uncombo":var l=i.data.before.combos,u=l[l.length-1];t.uncombo(u.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),n=t.getZoom(),i=1/(1-o6*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");i*n>a||t.zoomTo(n*i)},e.prototype.zoomIn=function(){var t=this.get("graph"),n=t.getZoom(),i=1-o6*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");i*n<a||t.zoomTo(n*i)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),tt(n)&&(n=document.getElementById(n)),n.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},e}(eo);const u5e=l5e;var f5e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&$_(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var c5e=function(r){f5e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>类型：`.concat(n.item.getType(),`</h4>
          <span class='tooltip-id'>ID：`).concat(n.item.getID(),`</span>
        `)},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,n=t.get("className")||"g6-component-tooltip",i=_n("<div class='".concat(n,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),tt(a)&&(a=document.getElementById(a)),Mr(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),t.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){Mr(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",i)},e.prototype.onClick=function(t){var n=this.get("itemTypes");if(!(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var n=this.get("itemTypes");if(!(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var n=this.get("itemTypes");t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var n=this.get("itemTypes");if(!(t.item.getType&&n.indexOf(t.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(t);tt(o)?i.innerHTML=o:(this.clearContainer(),i.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Mr(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var n=this.get("shouldBegin"),i=this.get("tooltip");if(!n(t)){Mr(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,f=a.getPointByClient(t.clientX,t.clientY),c=this.get("fixToNode"),h=t.item;if(h.getType&&h.getType()==="node"&&c&&Ft(c)&&c.length>=2){var d=h.getBBox();f={x:d.minX+d.width*c[0],y:d.minY+d.height*c[1]}}var v=a.getCanvasByPoint(f.x,f.y),p=v.x,g=v.y,m=a.getContainer(),b={x:p+m.offsetLeft+l,y:g+m.offsetTop+u};Mr(i,{visibility:"visible",display:"unset"});var y=i.getBoundingClientRect();p+y.width+l>o&&(b.x-=y.width+l),g+y.height+u>s&&(b.y-=y.height+u,b.y<0&&(b.y=0)),Mr(i,{left:"".concat(b.x,"px"),top:"".concat(b.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),tt(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(eo);const h5e=c5e;var wK="timebarstartplay",EK="timebarendplay",cl="valuechange",Oh="timebarConfigChanged",Df="playPauseBtn",J0="nextStepBtn",em="preStepBtn",d5e=function(){function r(e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.container,s=e.text,l=e.padding,u=l===void 0?[4,4,4,4]:l,f=e.className,c=f===void 0?"g6-component-timebar-tooltip":f,h=e.backgroundColor,d=h===void 0?"#000":h,v=e.textColor,p=v===void 0?"#fff":v,g=e.opacity,m=g===void 0?.8:g,b=e.fontSize,y=b===void 0?12:b;this.container=o,this.className=c,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=a,this.text=s,this.padding=u,this.opacity=m,this.fontSize=y,this.render()}return r.prototype.render=function(){var e=this,t=e.className;e.x,e.y;var n=e.backgroundColor,i=e.textColor,a=e.text,o=e.padding,s=e.opacity,l=e.fontSize,u=e.container,f=_n("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(s,'"></div>'));tt(u)&&(u=document.getElementById(u)),u.appendChild(f),e.parentHeight=u.offsetHeight,e.parentWidth=u.offsetWidth,Mr(f,{visibility:"hidden",top:0,left:0});var c=_n(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(n,"; font-size: ").concat(l,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(i,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));c.innerHTML=a,f.appendChild(c),e.backgroundDOM=c;var h=_n("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));f.appendChild(h),e.arrowDOM=h,e.container=f},r.prototype.show=function(e){var t=this,n=e.text,i=e.x;e.y,e.clientX,e.clientY,t.backgroundDOM.innerHTML=n;var a=t.backgroundDOM.offsetWidth,o=t.backgroundDOM.offsetHeight,s=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Mr(t.container,{top:"".concat(-o-l,"px"),left:"".concat(i,"px"),visibility:"visible"}),Mr(t.backgroundDOM,{marginLeft:"".concat(-a/2,"px")}),Mr(t.arrowDOM,{marginLeft:"".concat(-s/2,"px"),top:"".concat(o,"px")});var u=i-a/2,f=i+a/2;u<0?Mr(t.backgroundDOM,{marginLeft:"".concat(-a/2-u,"px")}):f>t.parentWidth&&Mr(t.backgroundDOM,{marginLeft:"".concat(-a/2-f+t.parentWidth+12,"px")})},r.prototype.hide=function(){Mr(this.container,{top:0,left:0,visibility:"hidden"})},r}();const v5e=d5e;var GT=function(){return GT=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},GT.apply(this,arguments)},p5e=function(){function r(e){this.config=dn({},e),this.init()}return r.prototype.update=function(e){this.config=dn({},this.config,e),this.updateElement(),this.renderMarker()},r.prototype.init=function(){this.initElement(),this.renderMarker()},r.prototype.initElement=function(){var e=this.config,t=e.group,n=e.style,i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,f=this.config.x+s,c=this.config.y+u,h=t.addGroup({name:Df});this.startMarkerGroup=h.addGroup({name:Df}),this.circle=t.addShape("circle",{attrs:GT({x:f,y:c,r:this.config.r*a},n),name:Df}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(f,c,a),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:Df});var d=.25*this.config.r*a,v=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f-.375*this.config.r*a,y:c-v/2,width:d,height:v,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f+1/8*this.config.r*a,y:c-v/2,width:d,height:v,fill:n.stroke||"#aaa",lineWidth:0}})},r.prototype.updateElement=function(){var e=this.config.style,t=e.scale,n=t===void 0?1:t,i=e.offsetX,a=i===void 0?0:i,o=e.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(l,u,n));var f=.25*this.config.r*n,c=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-c/2),this.pauseLeftMarker.attr("width",f),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",l+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-c/2),this.pauseRightMarker.attr("width",f),this.pauseRightMarker.attr("height",c)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},r.prototype.getStartMarkerPath=function(e,t,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-i/Math.sqrt(3)/2,t-i/2],["L",e+i/Math.sqrt(3),t],["L",e-i/Math.sqrt(3)/2,t+i/2]]},r}();const g5e=p5e;var ii=function(){return ii=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ii.apply(this,arguments)},bg=as,m5e="#aaa",y5e="green",b5e={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},x5e={fill:"#fff"},w5e={fill:"green"},_K={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},SK={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},E5e={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:_K,timeTypeControllerStyle:SK},YM=110,uf=50,sl={SINGLE:"single",RANGE:"range"},_5e=function(){function r(e){this.controllerCfg=dn({},E5e,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||sl.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return r.prototype.init=function(){this.renderPlayButton()},r.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},r.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},r.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,i=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,l=s===void 0?m5e:s,u=e.stroke,f=u===void 0?y5e:u,c=e.containerStyle,h=c===void 0?{}:c,d=ii(ii({},b5e),e.playBtnStyle||{}),v=ii(ii({},x5e),e.preBtnStyle||{}),p=ii(ii({},w5e),e.nextBtnStyle||{}),g=n/2-5,m=a+10,b=this.controllerGroup.addShape("rect",{attrs:ii({x:i,y:m,width:t,height:n,stroke:f,fill:l},h),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:m,r:g}):this.playButton=new g5e({group:this.controllerGroup,x:t/2,y:m+g+5,r:g,isPlay:this.isPlay,style:d});var y=v.offsetX||0,x=v.offsetY||0,w=(v.scale||1)*g;this.controllerGroup.addShape("path",{attrs:ii({path:this.getPreMarkerPath(t/2-5*g+y,m+g+5+x,w*.5)},v),name:em});var E=p.offsetX||0,_=p.offsetY||0,S=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:ii({path:this.getNextMarkerPath(t/2+5*g+E,m+g+5+_,S*.5)},p),name:J0}),b.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var C=this.controllerCfg.scale,M=C===void 0?1:C,T=this.controllerGroup.getCanvasBBox(),A=(T.maxX+T.minX)/2,O=(T.maxY+T.minY)/2,L=bg([1,0,0,0,1,0,0,0,1],[["t",-A,-O],["s",M,M],["t",A,O]]);this.controllerGroup.setMatrix(L)},r.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,i=e.hideTimeTypeController,a=ii(ii({},_K),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,f=a.pointer,c=f===void 0?{}:f,h=a.scale,d=h===void 0?1:h,v=a.offsetX,p=v===void 0?0:v,g=a.offsetY,m=g===void 0?0:g,b=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=b;var y=5;this.speedAxisY=[19,22,26,32,39];for(var x=0;x<5;x++){var w=t+this.speedAxisY[x],E=n-(i?uf:YM);b.addShape("line",{attrs:ii({x1:E,x2:E+15,y1:w,y2:w},s),speed:y,name:"speed-rect"}),this.speedAxisY[x]=w,y=y-1}this.speedText=b.addShape("text",{attrs:ii({x:n-(i?uf:YM)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=b.addShape("path",{attrs:ii({path:this.getPointerPath(n-(i?uf:YM),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c),name:"speed-pointer"});var _=this.speedGroup.getCanvasBBox(),S=(_.maxX+_.minX)/2,C=(_.maxY+_.minY)/2,M=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];M=bg(M,[["t",-S,-C],["s",d,d],["t",S+p*d,C+m*d]]),this.speedGroup.setMatrix(M)},r.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},r.prototype.renderToggleTime=function(){var e,t,n=this.controllerCfg,i=n.width,a=n.defaultTimeType,o=ii(ii({},SK),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,l=s===void 0?1:s,u=o.offsetX,f=u===void 0?0:u,c=o.offsetY,h=c===void 0?0:c,d=o.box,v=d===void 0?{}:d,p=o.check,g=p===void 0?{}:p,m=o.text,b=m===void 0?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var y=a===sl.SINGLE;this.toggleGroup.addShape("rect",{attrs:ii({x:i-uf,y:this.speedAxisY[0]+3.5},v),isChecked:y,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:ii({path:[["M",i-uf+3,this.speedAxisY[1]+6],["L",i-uf+7,this.speedAxisY[1]+10],["L",i-uf+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),y||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:ii({text:y?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"时间范围":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"单一时间",x:i-uf+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},b),name:"checked-text"});var x=this.toggleGroup.getCanvasBBox(),w=(x.maxX+x.minX)/2,E=(x.maxY+x.minY)/2,_=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];_=bg(_,[["t",-w,-E],["s",l,l],["t",w+f*l,E+h*l]]),this.toggleGroup.setMatrix(_)},r.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var n=t.target.attr("y1"),i=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(i[7]||0),o=e.speedAxisY.indexOf(n),s=e.speedAxisY[o]-e.speedAxisY[a];i=bg(i,[["t",0,s]]),e.speedPoint.setMatrix(i),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Oh,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],a=e.speedAxisY.indexOf(i);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(l,u){var f=Math.abs(l-i);o>f&&(o=f,a=u)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-i;n=bg(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Oh,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var n,i,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((i=e.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"单一时间"),e.currentType=sl.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"时间范围"),e.currentType=sl.SINGLE),t.target.set("isChecked",!a),e.group.emit(Oh,{type:e.currentType,speed:e.currentSpeed})})},r.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},r}();const MK=_5e;var f0=function(){return f0=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},f0.apply(this,arguments)},S5e=as,M5e={fill:"#5B8FF9"},C5e={fill:"#e6e8e9"},A5e=function(){function r(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,n=e.canvas,i=e.group,a=e.width,o=e.height,s=e.padding,l=e.data,u=e.start,f=e.end,c=e.x,h=c===void 0?0:c,d=e.y,v=d===void 0?0:d,p=e.tickLabelFormatter,g=e.selectedTickStyle,m=g===void 0?M5e:g,b=e.unselectedTickStyle,y=b===void 0?C5e:b,x=e.tooltipBackgroundColor,w=e.tooltipFomatter,E=e.tickLabelStyle,_=e.controllerCfg,S=_===void 0?{speed:1}:_;this.graph=t,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=f,this.tickLabelFormatter=p,this.tickLabelStyle=E||{},this.selectedTickStyle=m,this.unselectedTickStyle=y,this.controllerCfg=S,this.currentSpeed=S.speed||1,this.x=h,this.y=v,this.tooltipBackgroundColor=x,this.tooltipFomatter=w,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return r.prototype.renderSlices=function(){var e=this,t=this,n=t.width,i=t.height,a=t.padding,o=t.data,s=t.start,l=t.end,u=t.tickLabelFormatter,f=t.selectedTickStyle,c=t.unselectedTickStyle,h=t.tickLabelStyle,d=n-2*a,v=10,p=4,g=3*a+p+v,m=i-g-2*a,b=2,y=o.length,x=(d-b*(y-1))/y;this.tickWidth=x;var w=this.sliceGroup,E=[],_=[],S=Math.round(y*s),C=Math.round(y*l);this.startTickRectId=S,this.endTickRectId=C;var M=h.rotate;delete h.rotate,o.forEach(function(A,O){var L=O>=S&&O<=C,N=L?f:c,P=w.addShape("rect",{attrs:f0({x:a+O*(x+b),y:a,width:x,height:m},N),draggable:!0,name:"tick-rect-".concat(O)}),R=w.addShape("rect",{attrs:{x:a+O*x+b*(2*O-1)/2,y:a,width:O===0||O===y-1?x+b/2:x+b,height:m,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(O)});R.toFront();var G=P.getBBox(),D=(G.minX+G.maxX)/2;E.push({rect:P,pickRect:R,value:A.date,x:D,y:G.minY});var B;if(u?(B=u(A),!tt(B)&&B&&(B=A.date)):O%Math.round(y/10)===0&&(B=A.date),B){_.push(B);var Y=G.maxY+a*2;w.addShape("line",{attrs:{stroke:"#BFBFBF",x1:D,y1:Y,x2:D,y2:Y+p},name:"tick-line"});var ee=Y+p+a,ne=w.addShape("text",{attrs:f0({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:D,y:ee,textAlign:"center",text:B,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),Q=ne.getBBox();if(Q.maxX>n?ne.attr("textAlign","right"):Q.minX<0&&ne.attr("textAlign","left"),Pt(M)&&_.length!==10){var ye=S5e([1,0,0,0,1,0,0,0,1],[["t",-D,-ee],["r",M],["t",D-5,ee+2]]);ne.attr({textAlign:"left",matrix:ye})}_.length===1?ne.attr({textAlign:"left"}):_.length===10&&ne.attr({textAlign:"right"})}}),this.tickRects=E;var T=this.group;this.currentSpeed=1,this.controllerBtnGroup=new MK(f0({group:T,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},r.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(f){var c=f.target;if(!(c.get("type")!=="rect"||!c.get("name"))){var h=parseInt(c.get("name").split("-")[2],10);if(!isNaN(h)){var d=e.tickRects,v=e.unselectedTickStyle;d.forEach(function(b){b.rect.attr(v)});var p=e.selectedTickStyle;d[h].rect.attr(p),e.startTickRectId=h,e.endTickRectId=h;var g=d.length,m=h/g;e.graph.emit(cl,{value:[m,m]})}}}),t.on("dragstart",function(f){var c=e.tickRects,h=e.unselectedTickStyle;c.forEach(function(b){b.rect.attr(h)});var d=f.target,v=parseInt(d.get("name").split("-")[2],10),p=e.selectedTickStyle;c[v].rect.attr(p),e.startTickRectId=v;var g=c.length,m=v/g;e.graph.emit(cl,{value:[m,m]}),e.dragging=!0}),t.on("dragover",function(f){if(e.dragging&&f.target.get("type")==="rect"){for(var c=parseInt(f.target.get("name").split("-")[2],10),h=e.startTickRectId,d=e.tickRects,v=e.selectedTickStyle,p=e.unselectedTickStyle,g=0;g<d.length;g++){var m=g>=h&&g<=c?v:p;d[g].rect.attr(m)}var b=d.length;e.endTickRectId=c;var y=h/b,x=c/b;e.graph.emit(cl,{value:[y,x]})}}),t.on("drop",function(f){if(e.dragging&&(e.dragging=!1,f.target.get("type")==="rect")){var c=e.startTickRectId,h=parseInt(f.target.get("name").split("-")[2],10);if(!(h<c)){var d=e.selectedTickStyle,v=e.tickRects;v[h].rect.attr(d),e.endTickRectId=h;var p=v.length,g=c/p,m=h/p;e.graph.emit(cl,{value:[g,m]})}}});var n=this,i=n.tooltipBackgroundColor,a=n.tooltipFomatter,o=n.canvas,s=new v5e({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(f){var c=f.pickRect;c.on("mouseenter",function(h){var d=h.target;if(d.get("type")==="rect"){var v=parseInt(d.get("name").split("-")[2],10),p=o.getClientByPoint(l[v].x,l[v].y);s.show({x:l[v].x,y:l[v].y,clientX:p.x,clientY:p.y,text:a?a(l[v].value):l[v].value})}}),c.on("mouseleave",function(h){s.hide()})});var u=this.group;u.on("".concat(Df,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),u.on("".concat(J0,":click"),function(){e.updateStartEnd(1)}),u.on("".concat(em,":click"),function(){e.updateStartEnd(-1)}),u.on(Oh,function(f){f.type;var c=f.speed;e.currentSpeed=c})},r.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(wK,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(EK,null))},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.updateStartEnd=function(e){var t=this,n=this.tickRects,i=n.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(n[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var l=t.startTickRectId;l<=t.endTickRectId-1;l++)n[l].rect.attr(a);t.startTickRectId=t.endTickRectId}if(n[t.endTickRectId]){n[t.endTickRectId].rect.attr(o);var u=t.startTickRectId/i,f=t.endTickRectId/i;this.graph.emit(cl,{value:[u,f]})}},r.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var n=t.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Df,":click")),e.off("".concat(J0,":click")),e.off("".concat(em,":click")),e.off(Oh),this.sliceGroup.destroy()},r}();const T5e=A5e;var CK={};function O5e(r){return CK[r]}function Vl(r,e){CK[r]=e}var tP=function(){function r(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return r.prototype.translate=function(e){return e},r.prototype.change=function(e){$t(this.__cfg__,e),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var e=this;return $h(this.ticks,function(t,n){return Hi(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}})},r.prototype.getText=function(e,t){var n=this.formatter,i=n?n(e,t):e;return Lt(i)||!Ln(i.toString)?"":i.toString()},r.prototype.getConfig=function(e){return this.__cfg__[e]},r.prototype.init=function(){$t(this,this.__cfg__),this.setDomain(),Z9(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(tt(e)){var n=O5e(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else Ln(e)&&(t=e(this));return t},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(e,t,n){return Pt(e)?(e-t)/(n-t):NaN},r.prototype.calcValue=function(e,t,n){return t+e*(n-t)},r}(),sy=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var n=this.translateIndexMap.get(t);return n===void 0&&(n=Pt(t)?t:NaN),n},e.prototype.scale=function(t){var n=this.translate(t),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var n=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=t;return Pt(t)&&!this.values.includes(t)&&(a=this.values[a]),r.prototype.getText.apply(this,jE([a],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(Lt(this.getConfig("min"))&&(this.min=0),Lt(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(tP),AK=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,mf="\\d\\d?",ff="\\d\\d",k5e="\\d{3}",I5e="\\d{4}",c0="[^\\s]+",TK=/\[([^]*?)\]/gm;function OK(r,e){for(var t=[],n=0,i=r.length;n<i;n++)t.push(r[n].substr(0,e));return t}var s6=function(r){return function(e,t){var n=t[r].map(function(a){return a.toLowerCase()}),i=n.indexOf(e.toLowerCase());return i>-1?i:null}};function nc(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0,i=e;n<i.length;n++){var a=i[n];for(var o in a)r[o]=a[o]}return r}var kK=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],IK=["January","February","March","April","May","June","July","August","September","October","November","December"],L5e=OK(IK,3),P5e=OK(kK,3),rP={dayNamesShort:P5e,dayNames:kK,monthNamesShort:L5e,monthNames:IK,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},Nw=nc({},rP),LK=function(r){return Nw=nc(Nw,r)},l6=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ra=function(r,e){for(e===void 0&&(e=2),r=String(r);r.length<e;)r="0"+r;return r},D5e={D:function(r){return String(r.getDate())},DD:function(r){return Ra(r.getDate())},Do:function(r,e){return e.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return Ra(r.getDay())},ddd:function(r,e){return e.dayNamesShort[r.getDay()]},dddd:function(r,e){return e.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return Ra(r.getMonth()+1)},MMM:function(r,e){return e.monthNamesShort[r.getMonth()]},MMMM:function(r,e){return e.monthNames[r.getMonth()]},YY:function(r){return Ra(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return Ra(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return Ra(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return Ra(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return Ra(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return Ra(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return Ra(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Ra(r.getMilliseconds(),3)},a:function(r,e){return r.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(r,e){return r.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+Ra(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+Ra(Math.floor(Math.abs(e)/60),2)+":"+Ra(Math.abs(e)%60,2)}},u6=function(r){return+r-1},f6=[null,mf],c6=[null,c0],h6=["isPm",c0,function(r,e){var t=r.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],d6=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var e=(r+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],N5e={D:["day",mf],DD:["day",ff],Do:["day",mf+c0,function(r){return parseInt(r,10)}],M:["month",mf,u6],MM:["month",ff,u6],YY:["year",ff,function(r){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+r>68?t-1:t)+r)}],h:["hour",mf,void 0,"isPm"],hh:["hour",ff,void 0,"isPm"],H:["hour",mf],HH:["hour",ff],m:["minute",mf],mm:["minute",ff],s:["second",mf],ss:["second",ff],YYYY:["year",I5e],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",ff,function(r){return+r*10}],SSS:["millisecond",k5e],d:f6,dd:f6,ddd:c6,dddd:c6,MMM:["month",c0,s6("monthNamesShort")],MMMM:["month",c0,s6("monthNames")],a:h6,A:h6,ZZ:d6,Z:d6},Rw={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},PK=function(r){return nc(Rw,r)},DK=function(r,e,t){if(e===void 0&&(e=Rw.default),t===void 0&&(t={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");e=Rw[e]||e;var n=[];e=e.replace(TK,function(a,o){return n.push(o),"@@@"});var i=nc(nc({},Nw),t);return e=e.replace(AK,function(a){return D5e[a](r,i)}),e.replace(/@@@/g,function(){return n.shift()})};function NK(r,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Rw[e]||e,r.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(TK,function(x,w){return o.push(l6(w)),"@@@"}),l={},u={};s=l6(s).replace(AK,function(x){var w=N5e[x],E=w[0],_=w[1],S=w[3];if(l[E])throw new Error("Invalid format. "+E+" specified twice in format");return l[E]=!0,S&&(u[S]=!0),a.push(w),"("+_+")"}),Object.keys(u).forEach(function(x){if(!l[x])throw new Error("Invalid format. "+x+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var f=r.match(new RegExp(s,"i"));if(!f)return null;for(var c=nc(nc({},Nw),t),h=1;h<f.length;h++){var d=a[h-1],v=d[0],p=d[2],g=p?p(f[h],c):+f[h];if(g==null)return null;i[v]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var b=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],h=0,y=b.length;h<y;h++)if(l[b[h][0]]&&i[b[h][0]]!==m[b[h][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var RK={format:DK,parse:NK,defaultI18n:rP,setGlobalDateI18n:LK,setGlobalDateMasks:PK};const R5e=Object.freeze(Object.defineProperty({__proto__:null,assign:nc,default:RK,defaultI18n:rP,format:DK,parse:NK,setGlobalDateI18n:LK,setGlobalDateMasks:PK},Symbol.toStringTag,{value:"Module"}));function B5e(r){return function(e,t,n,i){for(var a=Lt(n)?0:n,o=Lt(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a}}var v6="format";function BK(r,e){var t=R5e[v6]||RK[v6];return t(r,e)}function Bw(r){return tt(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),Vk(r)&&(r=r.getTime()),r}var bs=1e3,kh=60*bs,Ih=60*kh,Mu=24*Ih,h0=Mu*31,p6=Mu*365,xg=[["HH:mm:ss",bs],["HH:mm:ss",bs*10],["HH:mm:ss",bs*30],["HH:mm",kh],["HH:mm",kh*10],["HH:mm",kh*30],["HH",Ih],["HH",Ih*6],["HH",Ih*12],["YYYY-MM-DD",Mu],["YYYY-MM-DD",Mu*4],["YYYY-WW",Mu*7],["YYYY-MM",h0],["YYYY-MM",h0*4],["YYYY-MM",h0*6],["YYYY",Mu*380]];function F5e(r,e,t){var n=(e-r)/t,i=B5e(function(o){return o[1]})(xg,n)-1,a=xg[i];return i<0?a=xg[0]:i>=xg.length&&(a=Yo(xg)),a}var $5e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=Bw(t);var n=this.values.indexOf(t);return n===-1&&(Pt(t)&&t<this.values.length?n=t:n=NaN),n},e.prototype.getText=function(t,n){var i=this.translate(t);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):BK(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;De(t,function(n,i){t[i]=Bw(n)}),t.sort(function(n,i){return n-i}),r.prototype.setDomain.call(this)},e}(sy),z_=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if(Lt(t))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(t);return n+s*(i-n)},e.prototype.init=function(){r.prototype.init.call(this);var t=this.ticks,n=Ml(t),i=Yo(t);n<this.min&&(this.min=n),i>this.max&&(this.max=i),Lt(this.minLimit)||(this.min=n),Lt(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var t=$9(this.values),n=t.min,i=t.max;Lt(this.min)&&(this.min=n),Lt(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},e.prototype.calculateTicks=function(){var t=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=UE(n,function(i){return i>=t.min&&i<=t.max})),n},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;return(t-i)/(n-i)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(tP),ly=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(z_);function Mf(r,e){var t=Math.E,n;return e>=0?n=Math.pow(t,Math.log(e)/r):n=Math.pow(t,Math.log(-e)/r)*-1,n}function zo(r,e){return r===1?1:Math.log(e)/Math.log(r)}function FK(r,e,t){Lt(t)&&(t=Math.max.apply(null,r));var n=t;return De(r,function(i){i>0&&i<n&&(n=i)}),n===t&&(n=t/e),n>1&&(n=1),n}var z5e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var n=this.base,i=zo(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(t===0)return 0;s=zo(n,l/n);var u=1/(i-s)*o;if(t<u)return t/u*l}else s=zo(n,this.min);var f=(t-a)/o,c=f*(i-s)+s;return Math.pow(n,c)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){r.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=FK(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return t<o?s=t/o/(zo(a,n)-zo(a,i)):s=(zo(a,t)-zo(a,i))/(zo(a,n)-zo(a,i)),s},e}(z_),G5e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t),i=this.exponent,a=Mf(i,this.max),o=Mf(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(Mf(a,t)-Mf(a,i))/(Mf(a,n)-Mf(a,i));return o},e}(z_),j5e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,n){var i=this.translate(t),a=this.formatter;return a?a(i,n):BK(i,this.mask)},e.prototype.scale=function(t){var n=t;return(tt(n)||Vk(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},e.prototype.translate=function(t){return Bw(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!Lt(n)||!Pt(n))&&(this.min=this.translate(this.min)),(!Lt(i)||!Pt(i))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,l=0;De(t,function(u){var f=Bw(u);if(isNaN(f))throw new TypeError("Invalid Time: "+u+" in time scale!");o>f?(s=o,o=f):s>f&&(s=f),l<f&&(l=f),a.push(f)}),t.length>1&&(this.minTickInterval=s-o),Lt(n)&&(this.min=o),Lt(i)&&(this.max=l)}},e}(ly),$K=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var n=this.ticks,i=n.length,a=this.getInvertPercent(t),o=Math.floor(a*(i-1));if(o>=i-1)return Yo(n);if(o<0)return Ml(n);var s=n[o],l=n[o+1],u=o/(i-1),f=(o+1)/(i-1);return s+(a-u)/(f-u)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||(Yo(t)!==this.max&&t.push(this.max),Ml(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var n=this.ticks;if(t<Ml(n))return 0;if(t>Yo(n))return 1;var i=0;return De(n,function(a,o){if(t>=a)i=o;else return!1}),i/(n.length-1)},e}(z_),U5e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}($K),zK={};function W5e(r){return zK[r]}function Hl(r,e){if(W5e(r))throw new Error("type '"+r+"' existed.");zK[r]=e}var V5e=function(r){nr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&Pt(t)?t:this.range[0]},e.prototype.invert=function(t){var n=this.range;return t<n[0]||t>n[1]?NaN:this.values[0]},e}(tP);function GK(r){var e=r.values,t=r.tickInterval,n=r.tickCount,i=r.showLast;if(Pt(t)){var a=UE(e,function(v,p){return p%t===0}),o=Yo(e);return i&&Yo(a)!==o&&a.push(o),a}var s=e.length,l=r.min,u=r.max;if(Lt(l)&&(l=0),Lt(u)&&(u=e.length-1),!Pt(n)||n>=s)return e.slice(l,u+1);if(n<=0||u<=0)return[];for(var f=n===1?s:Math.floor(s/(n-1)),c=[],h=l,d=0;d<n&&!(h>=u);d++)h=Math.min(l+d*f,u),d===n-1&&i?c.push(e[u]):c.push(e[h]);return c}function H5e(r){var e=r.min,t=r.max,n=r.nice,i=r.tickCount,a=new X5e;return a.domain([e,t]),n&&a.nice(i),a.ticks(i)}var KM=5,g6=Math.sqrt(50),m6=Math.sqrt(10),y6=Math.sqrt(2),X5e=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},r.prototype.nice=function(e){var t,n;e===void 0&&(e=KM);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(t=[l,s],s=t[0],l=t[1],n=[o,a],a=n[0],o=n[1]),u=mx(s,l,e),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=mx(s,l,e)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=mx(s,l,e)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},r.prototype.ticks=function(e){return e===void 0&&(e=KM),Y5e(this._domain[0],this._domain[this._domain.length-1],e||KM)},r}();function Y5e(r,e,t){var n,i=-1,a,o,s;if(e=+e,r=+r,t=+t,r===e&&t>0)return[r];if((n=e<r)&&(a=r,r=e,e=a),(s=mx(r,e,t))===0||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-r+1));++i<a;)o[i]=(r+i)*s;else for(r=Math.floor(r*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(r-e+1));++i<a;)o[i]=(r-i)/s;return n&&o.reverse(),o}function mx(r,e,t){var n=(e-r)/Math.max(0,t),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=g6?10:a>=m6?5:a>=y6?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=g6?10:a>=m6?5:a>=y6?2:1)}function b6(r,e,t){var n;return t==="ceil"?n=Math.ceil(r/e):t==="floor"?n=Math.floor(r/e):n=Math.round(r/e),n*e}function nP(r,e,t){var n=b6(r,t,"floor"),i=b6(e,t,"ceil");n=Xb(n,t),i=Xb(i,t);for(var a=[],o=Math.max((i-n)/(Math.pow(2,12)-1),t),s=n;s<=i;s=s+o){var l=Xb(s,o);a.push(l)}return{min:n,max:i,ticks:a}}function iP(r,e,t){var n,i=r.minLimit,a=r.maxLimit,o=r.min,s=r.max,l=r.tickCount,u=l===void 0?5:l,f=Lt(i)?Lt(e)?o:e:i,c=Lt(a)?Lt(t)?s:t:a;if(f>c&&(n=[f,c],c=n[0],f=n[1]),u<=2)return[f,c];for(var h=(c-f)/(u-1),d=[],v=0;v<u;v++)d.push(f+h*v);return d}function K5e(r){var e=r.min,t=r.max,n=r.tickInterval,i=r.minLimit,a=r.maxLimit,o=H5e(r);return!Lt(i)||!Lt(a)?iP(r,Ml(o),Yo(o)):n?nP(e,t,n).ticks:o}function nh(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var q5e=[1,5,2,2.5,4,3],x6=Number.EPSILON*100;function Z5e(r,e){return(r%e+e)%e}function Q5e(r){return Math.round(r*1e12)/1e12}function J5e(r,e,t,n,i,a){var o=HE(e),s=Hk(e,r),l=0,u=Z5e(n,a);return(u<x6||a-u<x6)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-t+l}function eBe(r,e,t){var n=HE(e),i=Hk(e,r),a=1;return 1-i/(n-1)-t+a}function tBe(r,e,t,n,i,a){var o=(r-1)/(a-i),s=(e-1)/(Math.max(a,n)-Math.min(t,i));return 2-Math.max(o/s,s/o)}function rBe(r,e){return r>=e?2-(r-1)/(e-1):1}function nBe(r,e,t,n){var i=e-r;return 1-.5*(Math.pow(e-n,2)+Math.pow(r-t,2))/Math.pow(.1*i,2)}function iBe(r,e,t){var n=e-r;if(t>n){var i=(t-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function aBe(){return 1}function oBe(r,e,t,n,i,a){t===void 0&&(t=5),n===void 0&&(n=!0),i===void 0&&(i=q5e),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(r)||Number.isNaN(e)||typeof r!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-r<1e-15||o===1)return{min:r,max:e,ticks:[r]};if(e-r>1e148){var s=t||5,l=(e-r)/s;return{min:r,max:e,ticks:Array(s).fill(null).map(function(Y,ee){return nh(r+l*ee)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},f=1;f<1/0;){for(var c=0;c<i.length;c+=1){var h=i[c],d=eBe(h,i,f);if(a[0]*d+a[1]+a[2]+a[3]<u.score){f=1/0;break}for(var v=2;v<1/0;){var p=rBe(v,o);if(a[0]*d+a[1]+a[2]*p+a[3]<u.score)break;for(var g=(e-r)/(v+1)/f/h,m=Math.ceil(Math.log10(g));m<1/0;){var b=f*h*Math.pow(10,m),y=iBe(r,e,b*(v-1));if(a[0]*d+a[1]*y+a[2]*p+a[3]<u.score)break;var x=Math.floor(e/b)*f-(v-1)*f,w=Math.ceil(r/b)*f;if(x<=w)for(var s=w-x,E=0;E<=s;E+=1){var _=x+E,S=_*(b/f),C=S+b*(v-1),M=b,T=J5e(h,i,f,S,C,M),A=nBe(r,e,S,C),O=tBe(v,o,r,e,S,C),L=aBe(),N=a[0]*T+a[1]*A+a[2]*O+a[3]*L;N>u.score&&(!n||S<=r&&C>=e)&&(u.lmin=S,u.lmax=C,u.lstep=M,u.score=N)}m+=1}v+=1}}f+=1}var P=nh(u.lmax),R=nh(u.lmin),G=nh(u.lstep),D=Math.floor(Q5e((P-R)/G))+1,B=new Array(D);B[0]=nh(R);for(var c=1;c<D;c++)B[c]=nh(B[c-1]+G);return{min:Math.min(r,Ml(B)),max:Math.max(e,Yo(B)),ticks:B}}function sBe(r){var e=r.min,t=r.max,n=r.tickCount,i=r.nice,a=r.tickInterval,o=r.minLimit,s=r.maxLimit,l=oBe(e,t,n,i).ticks;return!Lt(o)||!Lt(s)?iP(r,Ml(l),Yo(l)):a?nP(e,t,a).ticks:l}function lBe(r){var e=r.base,t=r.tickCount,n=r.min,i=r.max,a=r.values,o,s=zo(e,i);if(n>0)o=Math.floor(zo(e,n));else{var l=FK(a,e,i);o=Math.floor(zo(e,l))}for(var u=s-o,f=Math.ceil(u/t),c=[],h=o;h<s+f;h=h+f)c.push(Math.pow(e,h));return n<=0&&c.unshift(0),c}function jK(r,e,t){if(t===void 0&&(t=5),r===e)return{max:e,min:r,ticks:[r]};var n=t<0?0:Math.round(t);if(n===0)return{max:e,min:r,ticks:[]};var i=1.5,a=.5+1.5*i,o=e-r,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<a*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var f=Math.ceil(e/u),c=Math.floor(r/u),h=Math.max(f*u,e),d=Math.min(c*u,r),v=Math.floor((h-d)/u)+1,p=new Array(v),g=0;g<v;g++)p[g]=nh(d+g*u);return{min:d,max:h,ticks:p}}function uBe(r){var e=r.exponent,t=r.tickCount,n=Math.ceil(Mf(e,r.max)),i=Math.floor(Mf(e,r.min)),a=jK(i,n,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function fBe(r,e){var t=r.length*e;return e===1?r[r.length-1]:e===0?r[0]:t%1!==0?r[Math.ceil(t)-1]:r.length%2===0?(r[t-1]+r[t])/2:r[t]}function cBe(r){var e=r.tickCount,t=r.values;if(!t||!t.length)return[];for(var n=t.slice().sort(function(s,l){return s-l}),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(fBe(n,o))}return i}function hBe(r){var e=r.min,t=r.max,n=r.tickCount,i=r.tickInterval,a=r.minLimit,o=r.maxLimit,s=jK(e,t,n).ticks;return!Lt(a)||!Lt(o)?iP(r,Ml(s),Yo(s)):i?nP(e,t,i).ticks:s}function dBe(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickInterval,a=r.tickCount;if(i)a=Math.ceil((t-e)/i);else{i=F5e(e,t,a)[1];var o=(t-e)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);for(var l=[],u=e;u<t+i;u+=i)l.push(u);return l}function vBe(r){var e=GK(U({showLast:!0},r));return e}function Fw(r){return new Date(r).getFullYear()}function pBe(r){return new Date(r,0,1).getTime()}function jT(r){return new Date(r).getMonth()}function gBe(r,e){var t=Fw(r),n=Fw(e),i=jT(r),a=jT(e);return(n-t)*12+(a-i)%12}function mBe(r,e){return new Date(r,e,1).getTime()}function yBe(r,e){return Math.ceil((e-r)/Mu)}function bBe(r,e){return Math.ceil((e-r)/Ih)}function xBe(r,e){return Math.ceil((e-r)/(60*1e3))}function wBe(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickCount,a=r.tickInterval,o=[];a||(a=(t-e)/i,n&&a<n&&(a=n)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=Fw(e);if(a>p6)for(var l=Fw(t),u=Math.ceil(a/p6),f=s;f<=l+u;f=f+u)o.push(pBe(f));else if(a>h0)for(var c=Math.ceil(a/h0),h=jT(e),d=gBe(e,t),f=0;f<=d+c;f=f+c)o.push(mBe(s,f+h));else if(a>Mu)for(var v=new Date(e),p=v.getFullYear(),g=v.getMonth(),m=v.getDate(),b=Math.ceil(a/Mu),y=yBe(e,t),f=0;f<y+b;f=f+b)o.push(new Date(p,g,m+f).getTime());else if(a>Ih)for(var v=new Date(e),p=v.getFullYear(),g=v.getMonth(),b=v.getDate(),x=v.getHours(),w=Math.ceil(a/Ih),E=bBe(e,t),f=0;f<=E+w;f=f+w)o.push(new Date(p,g,b,x+f).getTime());else if(a>kh)for(var _=xBe(e,t),S=Math.ceil(a/kh),f=0;f<=_+S;f=f+S)o.push(e+f*kh);else{var C=a;C<bs&&(C=bs);for(var M=Math.floor(e/bs)*bs,T=Math.ceil((t-e)/bs),A=Math.ceil(C/bs),f=0;f<T+A;f=f+A)o.push(M+f*bs)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Vl("cat",GK);Vl("time-cat",vBe);Vl("wilkinson-extended",sBe);Vl("r-pretty",hBe);Vl("time",dBe);Vl("time-pretty",wBe);Vl("log",lBe);Vl("pow",uBe);Vl("quantile",cBe);Vl("d3-linear",K5e);Hl("cat",sy);Hl("category",sy);Hl("identity",V5e);Hl("linear",ly);Hl("log",z5e);Hl("pow",G5e);Hl("time",j5e);Hl("timeCat",$5e);Hl("quantize",$K);Hl("quantile",U5e);var EBe=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};function _Be(r){return $h(r,function(e,t){var n=t===0?"M":"L",i=e[0],a=e[1];return[n,i,a]})}function UK(r){return _Be(r)}function SBe(r){if(r.length<=2)return UK(r);var e=[];De(r,function(o){qf(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=$W(e,!1),n=Ml(r),i=n[0],a=n[1];return t.unshift(["M",i,a]),t}function MBe(r,e,t,n){n===void 0&&(n=!0);var i=new ly({values:r}),a=new sy({values:$h(r,function(s,l){return l})}),o=$h(r,function(s,l){return[a.scale(l)*e,t-i.scale(s)*t]});return n?SBe(o):UK(o)}function CBe(r,e,t,n){n===void 0&&(n=5);for(var i=new ly({values:r}),a=new sy({values:$h(r,function(h,d){return d})}),o=$h(r,function(h,d){return[a.scale(d)*e,t-i.scale(h)*t]}),s=[],l=0;l<o.length;l++){var u=o[l],f={x:u[0],y:u[1],y0:t,size:n},c=OBe(f);s.push.apply(s,c)}return kBe(s)}function ABe(r,e){var t=new ly({values:r}),n=Math.max(0,t.min);return e-t.scale(n)*e}function TBe(r,e,t,n){var i=EBe([],r,!0),a=ABe(n,t);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}function OBe(r){var e=r.x,t=r.y,n=r.y0,i=r.size,a,o;Ft(t)?(a=t[0],o=t[1]):(a=n,o=t);var s,l;Ft(e)?(s=e[0],l=e[1]):(s=e-i/2,l=e+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function kBe(r,e){e===void 0&&(e=!0);var t=[],n=r[0];t.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)t.push(["L",r[i].x,r[i].y]);return e&&(t.push(["L",n.x,n.y]),t.push(["z"])),t}var d0=function(){return d0=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},d0.apply(this,arguments)},IBe={stroke:"#C5C5C5",strokeOpacity:.85},LBe={fill:"#CACED4",opacity:.85},PBe=function(){function r(e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.width,s=o===void 0?200:o,l=e.height,u=l===void 0?26:l,f=e.smooth,c=f===void 0?!0:f,h=e.isArea,d=h===void 0?!1:h,v=e.data,p=v===void 0?[]:v,g=e.lineStyle,m=e.areaStyle,b=e.group,y=e.interval,x=y===void 0?null:y;this.group=b,this.x=n,this.y=a,this.width=s,this.height=u,this.data=p,this.smooth=c,this.isArea=d,this.lineStyle=Object.assign({},IBe,g),this.areaStyle=Object.assign({},LBe,m),this.intervalConfig=x,this.renderLine()}return r.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,i=e.width,a=e.height;e.barWidth;var o=e.data,s=e.smooth,l=e.isArea,u=e.lineStyle,f=e.areaStyle,c=this.group.addGroup({name:"trend-group"});if(o){var h=MBe(o,i,a,s);if(c.addShape("path",{attrs:d0({path:h},u),name:"trend-line"}),l){var d=TBe(h,i,a,o);c.addShape("path",{attrs:d0({path:d},f),name:"trend-area"})}}this.intervalConfig&&c.addShape("path",{attrs:d0({path:CBe(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),c.move(t,n)},r.prototype.destory=function(){this.group.destroy()},r}();const DBe=PBe;var fv=function(){return fv=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},fv.apply(this,arguments)},NBe={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},RBe={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},BBe=function(){function r(e){var t=e.group,n=e.name,i=e.type,a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s,u=e.width,f=u===void 0?2:u,c=e.height,h=c===void 0?24:c,d=e.style,v=d===void 0?{}:d;this.group=t,this.name=n,this.handleType=i,this.x=o,this.y=l,this.width=f,this.height=h,i==="trend"?this.style=fv(fv({},NBe),v):i==="simple"&&(this.style=fv(fv({},RBe),v)),this.renderHandle()}return r.prototype.setX=function(e){this.setXY(e,void 0)},r.prototype.setY=function(e){this.setXY(void 0,e)},r.prototype.setXY=function(e,t){Pt(e)&&(this.x=e),Pt(t)&&(this.y=t),this.updateXY()},r.prototype.renderHandle=function(){var e=this,t=e.width,n=e.height,i=e.style,a=e.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,f=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:n,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},r.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.topCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.topCircle.attr("fill",n)})},r.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)})},r.prototype.show=function(){this.handleGroup.show()},r.prototype.hide=function(){this.handleGroup.hide()},r.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},r}();const w6=BBe;var pn=function(){return pn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},pn.apply(this,arguments)},FBe=as,$Be={fill:"#416180",opacity:.05},zBe={fill:"#416180",opacity:.15,radius:5},GBe={fill:"#5B8FF9",opacity:.3,cursor:"grab"},UT=2,jBe={width:UT,height:24},UBe={textBaseline:"middle",fill:"#000",opacity:.45},WBe={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},VBe={lineWidth:1,stroke:"#ccc"},HBe=function(){function r(e){var t=this;this.prevX=0,this.onMouseDown=function(Y){return function(ee){t.currentHandler=Y;var ne=ee.originalEvent;ne.stopPropagation(),ne.preventDefault(),t.prevX=gu(ne,"touches.0.pageX",ne.pageX);var Q=t.canvas.get("container");Q.addEventListener("mousemove",t.onMouseMove),Q.addEventListener("mouseup",t.onMouseUp),Q.addEventListener("mouseleave",t.onMouseUp),Q.addEventListener("touchmove",t.onMouseMove),Q.addEventListener("touchend",t.onMouseUp),Q.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Y){Y.stopPropagation(),Y.preventDefault();var ee=gu(Y,"touches.0.pageX",Y.pageX),ne=ee-t.prevX,Q=t.adjustOffsetRange(ne/t.width);t.updateStartEnd(Q),t.updateUI(),t.prevX=ee},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Y=t.canvas.get("container");Y&&(Y.removeEventListener("mousemove",t.onMouseMove),Y.removeEventListener("mouseup",t.onMouseUp),Y.removeEventListener("mouseleave",t.onMouseUp),Y.removeEventListener("touchmove",t.onMouseMove),Y.removeEventListener("touchend",t.onMouseUp),Y.removeEventListener("touchcancel",t.onMouseUp))};var n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.width,l=s===void 0?100:s,u=e.height,f=e.padding,c=f===void 0?10:f,h=e.trendCfg,d=e.controllerCfg,v=d===void 0?{speed:1}:d,p=e.backgroundStyle,g=p===void 0?{}:p,m=e.foregroundStyle,b=m===void 0?{}:m,y=e.handlerStyle,x=y===void 0?{}:y,w=e.textStyle,E=w===void 0?{}:w,_=e.start,S=_===void 0?0:_,C=e.end,M=C===void 0?1:C,T=e.minText,A=T===void 0?"":T,O=e.maxText,L=O===void 0?"":O,N=e.group,P=e.graph,R=e.canvas,G=e.tick,D=G===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(ee){return ee},ticks:[]}:G,B=e.type;this.graph=P,this.canvas=R,this.group=N,this.timeBarType=B,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=c,this.ticks=D.ticks,this.trendCfg=h,this.controllerCfg=v,this.currentSpeed=v.speed||1,this.tickLabelFormatter=D.tickLabelFormatter,B==="trend"?this.backgroundStyle=pn(pn({},$Be),g):B==="simple"&&(this.backgroundStyle=pn(pn({},zBe),g)),this.foregroundStyle=pn(pn({},GBe),b),this.handlerStyle=pn(pn({},jBe),x),this.textStyle=pn(pn({},UBe),E),this.tickLabelStyle=pn(pn({},WBe),D.tickLabelStyle),this.tickLineStyle=pn(pn({},VBe),D.tickLineStyle),this.currentMode=v.defaultTimeType||sl.RANGE,this.start=S,this.end=M,this.minText=A,this.maxText=L,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return r.prototype.update=function(e){var t=e.x,n=e.y,i=e.width,a=e.height,o=e.minText,s=e.maxText,l=e.start,u=e.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),$t(this,{x:t,y:n,width:i,height:a,minText:o,maxText:s}),this.updateUI()},r.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},r.prototype.renderSlider=function(){var e=this,t=this,n=t.width,i=t.height,a=t.timeBarType;if(a==="trend"&&HE(gu(this.trendCfg,"data"))){var o=new DBe(pn(pn({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:pn({x:0,y:0,width:n,height:i},this.backgroundStyle),name:"background"});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:pn({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:pn({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=l.addShape("text",{attrs:pn({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:pn({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:pn({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(m){m.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(m){m.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var u=gu(this.handlerStyle,"width",2),f=gu(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new w6({name:"minHandlerShape",group:c,type:a,x:this.x,y:this.y,width:u,height:f,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new w6({name:"maxHandlerShape",group:h,type:a,x:this.x,y:this.y,width:u,height:f,style:this.handlerStyle});var d=this.ticks,v=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(m){m.destroy()});var p=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map(function(m,b){e.tickPosList.push(e.x+b*v);var y;e.tickLabelFormatter?(y=e.tickLabelFormatter(m),!tt(y)&&y&&(y=m.date)):y=m.date;var x=e.x+b*v,w=e.y+i+5,E=e.group.addShape("text",{attrs:pn({x,y:w,text:y,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if(Pt(g)&&b!==d.length-1){var _=FBe([1,0,0,0,1,0,0,0,1],[["t",-x,-w],["r",g],["t",x-5,w+2]]);E.attr({textAlign:"left",matrix:_})}b===0?E.attr({textAlign:"left"}):b!==d.length-1&&E.attr({textAlign:"right"});var S=e.group.addShape("line",{attrs:pn({x1:e.x+b*v,y1:e.y+i+2,x2:e.x+b*v,y2:e.y+i+6},e.tickLineStyle),name:"tick-line"});S.toBack();var C=E.getBBox();return C.minX>p?(E.show(),S.show(),p=C.minX+C.width+10):(E.hide(),S.hide()),E}),this.controllerBtnGroup=new MK(pn({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===sl.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},r.prototype.bindEvents=function(){var e=this,t=this.group.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Df,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(J0,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(em,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Oh,function(i){var a=i.type,o=i.speed;e.currentSpeed=o,e.currentMode=a,a===sl.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===sl.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},r.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},r.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,n=1-this.end;return Math.min(n,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,n=1-this.end;return Math.min(n,Math.max(t,e))}default:return 0}},r.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n==null?void 0:n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},r.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",n-t);var i=gu(this.handlerStyle,"width",UT);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,n]),o=a[0],s=a[1];this.minHandlerShape.setX(t-i/2),De(o,function(l,u){return e.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(n-i/2),De(s,function(l,u){return e.maxTextShape.attr(u,l)}),this.currentMode===sl.RANGE?this.graph.emit(cl,{value:[this.start,this.end].sort()}):this.currentMode===sl.SINGLE&&this.graph.emit(cl,{value:[this.end,this.end]})},r.prototype.dodgeText=function(e){var t,n,i=2,a=gu(this.handlerStyle,"width",UT),o=this.minTextShape,s=this.maxTextShape,l=e[0],u=e[1],f=!1;l>u&&(t=[u,l],l=t[0],u=t[1],n=[s,o],o=n[0],s=n[1],f=!0);var c=o.getBBox(),h=s.getBBox(),d=null,v=null;return this.timeBarType==="trend"?(d=l-c.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},v=u+h.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(d=o.attr("x")>c.width?{x:l,textAlign:"center"}:{x:l,textAlign:"left"},v=s.attr("x")>this.width-h.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),f?[v,d]:[d,v]},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var t=e,n=t.ticks,i=t.width,a=e.currentSpeed,o=i/n.length,s=o/((10-a)*1e3/60),l=e.adjustOffsetRange(s/e.width);e.updateStartEnd(l),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(wK,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(EK,null))},r.prototype.destory=function(){this.graph.off(cl,function(){});var e=this.group,t=e.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var n=e.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Df,":click")),e.off("".concat(J0,":click")),e.off("".concat(em,":click")),e.off(Oh),e.destroy(),this.trendComponent&&this.trendComponent.destory()},r}();const XBe=HBe;var YBe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mu=function(){return mu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},mu.apply(this,arguments)},KBe=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},qBe=4,ZBe=26,QBe=function(r){YBe(e,r);function e(t){var n=r.call(this,t)||this;return n.afterrenderListener=function(i){return n.filterData({})},n.valueChangeListener=L0(function(i){return n.filterData(i)},200,{trailing:!0,leading:!0}),n.changeData=function(i){var a=n.get("graph");n.cacheGraphData=a.get("data"),n.filterData({})},n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),n=this._cfgs,i=n.width,a=n.height,o=n.putInGraphContainer,s=this.get("className")||"g6-component-timebar",l=this.get("container"),u;if(l?(tt(l)&&(l=document.getElementById(l)),u=l):(u=_n("<div class='".concat(s,"'></div>")),Mr(u,{position:"relative"})),o){var f=this.get("graph").get("container");f.appendChild(u)}this.set("timeBarContainer",u);var c,h=t.get("renderer");h==="SVG"?c=new i0({container:u,width:i,height:a}):c=new Eu({container:u,width:i,height:a}),this.get("containerCSS")&&Mr(u,this.get("containerCSS")),this.set("canvas",c)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),n=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var n=this.get("timebar");n&&(n.isPlay=!!t,n.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,n=this._cfgs,i=n.width,a=n.x,o=n.y,s=n.padding,l=n.type,u=n.trend,f=n.slider,c=n.controllerCfg,h=n.textStyle,d=n.tick,v=n.backgroundStyle,p=n.foregroundStyle,g=u.data,m=KBe(u,["data"]),b=i-2*s,y=l==="trend"?ZBe:qBe,x=this.get("graph"),w=this.get("timeBarGroup"),E=this.get("canvas"),_=null;if(l==="trend"||l==="simple"){var S=this.get("getValue");_=new XBe(mu(mu({graph:x,canvas:E,group:w,type:l,x:a+s,y:l==="trend"?o+s:o+s+15,width:b,height:y,padding:s,backgroundStyle:v,foregroundStyle:p,trendCfg:mu(mu({},m),{data:g.map(function(M){return(S==null?void 0:S(M))||M.value})})},f),{tick:{ticks:g,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:mu(mu({},f.handlerStyle),{height:f.height||y}),controllerCfg:c,textStyle:h}))}else l==="tick"&&(_=new T5e(mu({graph:x,canvas:E,group:w,x:a+s,y:o+s,width:i,height:42,padding:2,controllerCfg:c},d)));var C=function M(){var T=t.get("timebar");T.draggingHandler=!1,T.isPlay&&(T.isPlay=!1,T.currentHandler=T.maxHandlerShape,T.changePlayStatus()),document.removeEventListener("mouseup",M)};E.on("mousedown",function(M){(M.target.get("name")==="maxHandlerShape-handler"||M.target.get("name")==="minHandlerShape-handler"||M.target===_.foregroundShape)&&document.addEventListener("mouseup",C)}),this.set("timebar",_)},e.prototype.filterData=function(t){var n,i=t.value;if(!i){i=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end):a==="tick"&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("请配置 TimeBar 组件的数据");return}var l=this.get("rangeChange"),u=this.get("graph"),f=Math.round(o.length*i[0]),c=Math.round(o.length*i[1]);c=c>=o.length?o.length-1:c,f=f>=o.length?o.length-1:f;var h=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,d=h?h(o[f]):o[f].date,v=h?h(o[c]):o[c].date;if(s!=="tick"){var p=this.get("timebar");p.setText(d,v)}if(l)l(u,d,v);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=u.get("data"));var g=this.get("filterItemTypes"),m=this.get("changeData"),b=this.get("getDate"),y=this.get("shouldIgnore"),x=o[f].date,w=o[c].date;if(m||m===void 0){var E=this.cacheGraphData.nodes,_=this.cacheGraphData.edges,S={},C={};u.getNodes().forEach(function(M){return S[M.getID()]=!0}),u.getEdges().forEach(function(M){return C[M.getID()]=!0}),g.includes("node")&&(E==null||E.forEach(function(M){var T=+((b==null?void 0:b(M))||M.date),A=T>=x&&T<=w||(y==null?void 0:y("node",M,{min:x,max:w})),O=S[M.id];O&&!A?(u.removeItem(M.id),S[M.id]=!1):!O&&A&&(u.addItem("node",M),S[M.id]=!0)}),_==null||_.forEach(function(M){var T=S[M.source]&&S[M.target]||(y==null?void 0:y("edge",M,{min:x,max:w})),A=!!u.findById(M.id);A&&!T?(u.removeItem(M.id),C[M.id]=!1):!A&&T?(u.addItem("edge",M),C[M.id]=!0):A||(C[M.id]=!1)})),(this.get("filterEdge")||g.includes("edge"))&&(_==null||_.filter(function(M){var T=+((b==null?void 0:b(M))||M.date),A=T>=x&&T<=w||(y==null?void 0:y("edge",M,{min:x,max:w})),O=S[M.source]&&S[M.target],L=A&&O,N=C[M.id];N&&!L?(C[M.id]=!1,u.removeItem(M.id)):!N&&L&&(C[M.id]=!0,u.addItem("edge",M))}))}else g.includes("node")&&u.getNodes().forEach(function(M){var T=M.getModel();if(!(y!=null&&y("node",T,{min:x,max:w}))){var A=+((b==null?void 0:b(T))||T.date);A<x||A>w?u.hideItem(M):u.showItem(M)}}),(this.get("filterEdge")||g.includes("edge"))&&u.getEdges().forEach(function(M){var T=M.getModel();if(!(y!=null&&y("edge",T,{min:o[f].date,max:o[c].date}))){var A=+((b==null?void 0:b(T))||T.date);if(A<o[f].date||A>o[c].date)u.hideItem(M);else{var O=M.getSource().isVisible(),L=M.getTarget().isVisible();O&&L&&u.showItem(M)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(cl,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(cl,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),r.prototype.destroy.call(this);var i=this.get("timeBarContainer");if(i){var a=this.get("container");a||(a=this.get("graph").get("container")),tt(a)&&(a=document.getElementById(a)),a===i&&(a=a.parentElement),a.removeChild(i)}},e}(eo);const JBe=QBe;var e4e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),t4e=aa.applyMatrix;function r4e(r,e){var t,n;if(r.naturalWidth)t=r.naturalWidth,n=r.naturalHeight;else{var i=new Image;i.src=r.src,i.onload=function(){e&&e(i.width,i.height)}}return[t,n]}var n4e=function(r){e4e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var a=this.get("container");tt(a)&&(a=document.getElementById(a));var o=_n("<div class=".concat(n.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,l=0,u=!1,f=0,c=0,h=0,d=0,v=0,p=0;a.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var m=o.style;h=parseInt(m.width,10),d=parseInt(m.height,10);var b=t.get("width"),y=t.get("height");h>b||d>y||(p=i.getZoom(),v=t.get("ratio"),u=!0,s=g.clientX,l=g.clientY)}},!1),a.addEventListener("mousemove",function(g){if(!(!u||Lt(g.clientX)||Lt(g.clientY))){var m=t.get("width"),b=t.get("height"),y=o.style;f=parseInt(y.left,10),c=parseInt(y.top,10),h=parseInt(y.width,10),d=parseInt(y.height,10);var x=s-g.clientX,w=l-g.clientY;f-x<0?x=f:f-x+h>=m&&(x=0),c-w<0?w=c:c-w+d>=b&&(w=0),f-=x,c-=w,Mr(o,{left:"".concat(f,"px"),top:"".concat(c,"px")}),i.translate(x*p/v,w*p/v),s=g.clientX,l=g.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),f=u.getCanvasBBox(),c=[(f.minX+f.maxX)/2,(f.minY+f.maxY)/2],h=[f.maxX-f.minX,f.maxY-f.minY],d={centerX:c[0],centerY:c[1],width:0,height:0,minX:0,minY:0};f[0]/f[1]>l?(d.width=h[0],d.height=d.width/l):(d.height=h[1],d.width=d.height*l),d.minX=c[0]-d.width/2,d.minY=c[1]-d.height/2;var v=u.getMatrix();v||(v=[1,0,0,0,1,0,0,0,1]);var p=Yk([1,0,0,0,1,0,0,0,1],v),g=t4e({x:d.minX,y:d.minY},p),m=a.getCanvasByPoint(g.x,g.y),b=this.get("viewport");b||this.initViewport();var y=o/d.width,x=y*n,w=y*i,E=n*-m.x/d.width,_=i*-m.y/d.height,S=E+x,C=_+w;E<0&&(x+=E,E=0),S>n&&(x=x-(S-n)),_<0&&(w+=_,_=0),C>i&&(w=w-(C-i)),this.set("ratio",t);var M="".concat(E,"px"),T="".concat(_,"px");Mr(b,{left:M,top:T,width:"".concat(x,"px"),height:"".concat(w,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),i=n.get("width"),a=n.get("height"),o=a/i,s=t.get("className"),l=t.get("container"),u=t.get("width"),f=t.get("height");!u&&!f&&(u=200),u?(f=o*u,t.set("height",f)):(u=1/o*f,t.set("width",u));var c=_n("<div class='".concat(s,"' style='width: ").concat(u,"px; height: ").concat(f,"px; overflow: hidden; position: relative;'></div>"));tt(l)&&(l=document.getElementById(l)),l?l.appendChild(c):n.get("container").appendChild(c),t.set("container",c);var h=_n('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');c.appendChild(h);var d=_n('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),t.set("containerDOM",h),t.set("containerSpan",d);var v=_n('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",v),t.updateImgSize(),d.appendChild(v),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,n=t.get("imgDOM"),i=t.get("width"),a=t.get("height");n.onload=function(){var o=r4e(n);o[0]>o[1]?n.width=i:n.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=n.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var n=this,i=n.get("imgDOM");i.remove(),n.set("graphImg",t);var a=_n('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));n.set("imgDOM",a),a.src=t,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(a),n.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(eo);const i4e=n4e;var a4e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),WT=function(){return WT=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},WT.apply(this,arguments)},o4e=aa.distance,E6=.05,_6={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},s4e=function(r){a4e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Tr(_6),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,n=t.get("showLabel"),i=n==="node"||n==="both",a=n==="edge"||n==="both";t.set("showNodeLabel",i),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(t),i=n.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){n.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){n.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0;s||i.getPointByClient(t.clientX,t.clientY),t.originalEvent.wheelDelta<0?a=1-E6:a=1/(1-E6);var l=n.get("maxR"),u=n.get("minR"),f=n.get("r");(f>(l||i.get("height"))&&a>1||f<(u||i.get("height")*.05)&&a<1)&&(a=1),f*=a,n.set("r",f),n.filter(t)}},e.prototype.filter=function(t){var n=this,i=n.get("graph"),a=i.getNodes(),o={},s=n.get("r"),l=n.get("type"),u={x:t.x,y:t.y};n.updateDelegate(u,s);var f=n.get("shouldShow"),c=n.get("vShapes");c&&c.forEach(function(m){m.remove(),m.destroy()}),c=[],a.forEach(function(m){var b=m.getModel(),y=b.x,x=b.y;o4e({x:y,y:x},u)<s&&(o[b.id]=m)});var h=i.getEdges(),d=[];h.forEach(function(m){var b=m.getModel(),y=b.source,x=b.target;f(b)&&(l==="only-source"||l==="one"?o[y]&&!o[x]&&d.push(m):l==="only-target"||l==="one"?o[x]&&!o[y]&&d.push(m):l==="both"&&o[y]&&o[x]&&d.push(m))});var v=n.get("showNodeLabel"),p=n.get("showEdgelabel"),g=i.get("group");d.forEach(function(m){var b=m.get("group").get("children");b.forEach(function(y){var x=y.get("type"),w=g.addShape(x,{attrs:y.attr()});c.push(w),v&&x==="text"&&w.set("visible",!0)})}),Object.keys(o).forEach(function(m){var b=o[m],y=b.get("group").clone();if(g.add(y),c.push(y),p)for(var x=y.get("children"),w=0;w<x.length;w++){var E=x[w];E.get("type")==="text"&&E.set("visible",!0)}}),n.set("vShapes",c)},e.prototype.updateParams=function(t){var n=this,i=t.r,a=t.trigger,o=t.minR,s=t.maxR,l=t.scaleRBy,u=t.showLabel,f=t.shouldShow;if(isNaN(t.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(o)||n.set("minR",o),(a==="mousemove"||a==="click")&&n.set("trigger",a),l==="wheel"||l==="unset"){n.set("scaleRBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var c=n.get("dPercentText");c&&(c.remove(),c.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),f&&n.set("shouldShow",f)},e.prototype.updateDelegate=function(t,n){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||_6;o=s.addShape("circle",{attrs:WT({r:n,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:t.x,y:t.y,r:n});i.set("delegate",o)},e.prototype.clear=function(){var t=this,n=t.get("vShapes");n&&n.forEach(function(a){a.remove(),a.destroy()}),n=[],t.set("vShapes",n);var i=t.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(eo);const l4e=s4e;var u4e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),f4e=aa.pointLineDistance,c4e={stroke:"#FA8C16",lineWidth:1},h4e=function(r){u4e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:c4e,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var n=t.item,i=n.get("delegateShape")||n,a=i.getBBox(),o=n.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,n=t.horizontalLines,i=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),f=l.get("id");a===!0||a==="horizontal"?(n["".concat(f,"tltr")]=[u.minX,u.minY,u.maxX,u.minY,l],n["".concat(f,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l],n["".concat(f,"blbr")]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(n["".concat(f,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i["".concat(f,"tlbl")]=[u.minX,u.minY,u.minX,u.maxY,l],i["".concat(f,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l],i["".concat(f,"trbr")]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i["".concat(f,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},e.prototype.show=function(t,n){var i=$t({},t);return this.itemAlign(t,n,i),t},e.prototype.itemAlign=function(t,n,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,f={x:i.x+n.width/2,y:i.y},c={x:i.x+n.width/2,y:i.y+n.height/2},h={x:i.x+n.width/2,y:i.y+n.height},d={x:i.x,y:i.y+n.height/2},v={x:i.x+n.width,y:i.y+n.height/2},p=[],g=[],m=null;if(this.clearAlignLine(),De(s,function(y){y[4].isVisible&&(p.push(a.getLineDisObject(y,f)),p.push(a.getLineDisObject(y,c)),p.push(a.getLineDisObject(y,h)))}),De(l,function(y){y[4].isVisible&&(g.push(a.getLineDisObject(y,d)),g.push(a.getLineDisObject(y,c)),g.push(a.getLineDisObject(y,v)))}),p.sort(function(y,x){return y.dis-x.dis}),g.sort(function(y,x){return y.dis-x.dis}),p.length!==0&&p[0].dis<u){t.y=p[0].line[1]-p[0].point.y+i.y,m={type:"item",horizontals:[p[0]]};for(var b=1;b<3;b++)p[0].dis===p[b].dis&&m.horizontals.push(p[b])}if(g.length!==0&&g[0].dis<u){t.x=g[0].line[0]-g[0].point.x+i.x,m?m.verticals=[g[0]]:m={type:"item",verticals:[g[0]]};for(var b=1;b<3;b++)g[0].dis===g[b].dis&&m.verticals.push(g[b])}m&&(m.bbox=n,this.addAlignLine(m))},e.prototype.addAlignLine=function(t){var n=t.bbox,i=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,l=s.line,u=s.alignLines,f=this.get("graph"),c=f.get("group");i==="item"&&(a&&De(a,function(h){var d=h.line,v=h.point,p=(d[0]+d[2])/2,g,m;v.x<p?(g=v.x-n.width/2,m=Math.max(d[0],d[2])):(g=v.x+n.width/2,m=Math.min(d[0],d[2]));var b=$t({x1:g,y1:d[1],x2:m,y2:d[1]},l),y=c.addShape("line",{attrs:b,capture:!1});u.push(y)}),o&&De(o,function(h){var d=h.line,v=h.point,p=(d[1]+d[3])/2,g,m;v.y<p?(g=v.y-n.height/2,m=Math.max(d[1],d[3])):(g=v.y+n.height/2,m=Math.min(d[1],d[3]));var b=$t({x1:d[0],y1:g,x2:d[0],y2:m},l),y=c.addShape("line",{attrs:b,capture:!1});u.push(y)}))},e.prototype.getLineDisObject=function(t,n){return{line:t,point:n,dis:f4e(t,n)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;De(t,function(n){n.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,n=t.horizontalLines,i=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete n["".concat(l,"tltr")],delete n["".concat(l,"lcrc")],delete n["".concat(l,"blbr")],delete i["".concat(l,"tlbl")],delete i["".concat(l,"tcbc")],delete i["".concat(l,"trbr")]}),this.clearAlignLine()},e}(eo);const d4e=h4e;var v4e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nn=function(){return Nn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Nn.apply(this,arguments)},p4e=["click","mouseenter"],g4e=function(r){v4e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},n=t.multiple;n&&t.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=_n(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();Mr(l,this.getContainerPos(u)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var n=this,i=n.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},f=0,c=0,h={left:(i.getWidth()-t[0])/2+f,top:(i.getHeight()-t[1])/2+c};return l.forEach(function(d){var v=s[u[d]],p=d;switch(d){case"top":v+=c;break;case"left":v+=f;break;case"bottom":v=i.getHeight()-t[1]-v+c,p="top";break;default:v=i.getWidth()-t[0]-v+f,p="left";break}h[p]=v}),h.top+=o+i.getContainer().offsetTop,h.left+=a+i.getContainer().offsetLeft,Object.keys(h).forEach(function(d){h[d]="".concat(h[d],"px")}),h},e.prototype.bindEvents=function(){var t=this,n=t.get("filter");if(!(!n||!n.enable)){var i=n.trigger||"click";p4e.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=t.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var n=this.render();Mr(this.get("container"),this.getContainerPos(n))},e.prototype.activateLegend=function(t){var n=this.get("filter"),i=n==null?void 0:n.multiple;i||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(c){c.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(c){var h=c.get("children"),d=h[0],v=h[1];d.attr(Nn(Nn({},d.get("oriAttrs")),s)),v.attr(Nn(Nn({},v.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},f=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(c){var h=c.get("children"),d=h[0],v=h[1];d.attr(Nn(Nn({},d.get("oriAttrs")),u)),v.attr(Nn(Nn({},v.get("oriAttrs")),f))})},e.prototype.findLegendItemsByState=function(t,n,i){n===void 0&&(n="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(l){return!!l.get(t)===i}):n==="edge"?s.get("children").filter(function(l){return!!l.get(t)===i}):o.get("children").filter(function(l){return!!l.get(t)===i}).concat(s.get("children").filter(function(l){return!!l.get(t)===i}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),n=t.find(function(a){return a.get("name")==="root"}),i=[n.find(function(a){return a.get("name")==="node-group"}),n.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},e.prototype.filterData=function(t){var n=this.get("filter"),i=n==null?void 0:n.filterFunctions;if(!(!n||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=n.graphActiveState||"active",l=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(t.target);var f=a.find(function(m){return m.get("name")==="root"}),c=f.find(function(m){return m.get("name")==="node-group"}),h=f.find(function(m){return m.get("name")==="edge-group"}),d=c.get("children").filter(function(m){return m.get("active")}),v=h.get("children").filter(function(m){return m.get("active")}),p=0,g=["getNodes","getEdges"];g.forEach(function(m){o[m]().forEach(function(b){var y=!1,x=m==="getNodes"?d:v;x.forEach(function(w){var E=i[w.get("id")];y=y||E(b.getModel())}),y?(o.setItemState(b,l,!1),o.setItemState(b,s,!0),p++):(o.setItemState(b,s,!1),o.setItemState(b,l,!0))})}),p||g.forEach(function(m){o[m]().forEach(function(b){o.clearItemStates(b,[l])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),n=this.get("filter");if(n){var i=n.graphActiveState||"active",a=n.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[i,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[i,a])})}},e.prototype.render=function(){var t=this;this.processData();var n=this.get("legendCanvas");n?n.clear():n=new Eu({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"}),a=i.addGroup({name:"node-group"}),o=i.addGroup({name:"edge-group"});this.set("legendCanvas",n);var s=this.get("itemsData"),l=["nodes","edges"],u=[a,o];l.forEach(function(P,R){s[P].forEach(function(G){var D,B=u[R].addGroup({id:G.id,name:"node-container"}),Y,ee=G.type,ne=t.getShapeSize(G),Q=ne.width,ye=ne.height,Le=ne.r,Fe=t.getStyle(P.substr(0,4),G);switch(G.type){case"circle":Y={r:Le,x:0,y:0};break;case"rect":Y={width:Q,height:ye,x:-Q/2,y:-ye/2};break;case"ellipse":Y={rx:Q,ry:ye,x:0,y:0},ee="ellipse";break;case"line":Y={x1:-Q/2,y1:0,x2:Q/2,y2:0},ee="line";break;case"quadratic":Y={path:[["M",-Q/2,0],["Q",0,Q/2,Q/2,0]]},ee="path";break;case"cubic":Y={path:[["M",-Q/2,0],["C",-Q/6,Q/2,Q/6,-Q/2,Q/2,0]]},ee="path";break;case"diamond":Y={path:[["M",0,-ye],["L",Q,0],["L",0,ye],["L",-Q,0],["Z"]]},ee="path";break;case"triangle":Y={path:[["M",-Q,ye],["L",0,-ye],["L",Q,ye],["Z"]]},ee="path";break;case"star":Y={path:aa.getStarPath(Le*3,Le*1.2)},ee="path";break;default:Y={r:Le,x:0,y:0};break}var _e=B.addShape(ee,{attrs:Nn(Nn({},Y),Fe),name:"".concat(G.type,"-node-keyShape"),oriAttrs:Nn({opacity:1},Fe)});if(G.label){var Ve=_e.getBBox(),Xe=((D=G.labelCfg)===null||D===void 0?void 0:D.style)||{},vt=Nn({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},Xe);B.addShape("text",{attrs:Nn({x:Ve.maxX+4,y:0,text:G.label},vt),className:"legend-label",name:"".concat(G.type,"-node-text"),oriAttrs:vt})}})});var f=this.get("padding"),c,h=i.find(function(P){return P.get("name")==="title-container"}),d={height:0,maxY:0,width:0};if(this.get("title")){h||(h=i.addGroup({name:"title-container"}));var v={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:f[0]},p=this.get("titleConfig")||{},g=Object.assign(v,p.style||{});c=h.addShape("text",{attrs:Nn({text:this.get("title")},g)}),d=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,p.offsetX,p.offsetY,1])}this.layoutItems();var m=i.getCanvasBBox(),b=a.getCanvasBBox(),y=b.minX<0?Math.abs(b.minX)+f[3]:f[3],x=d.maxY<b.minY?Math.abs(d.maxY-b.minY)+f[0]:d.maxY+f[0],w=[1,0,0,0,1,0,y,x,1];a.setMatrix(w),m=i.getCanvasBBox();var E=[m.minX+m.width+f[1],m.minY+m.height+f[2]];if(c){var p=Nn({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));d=h.getCanvasBBox();var _=h.getMatrix()||[1,0,0,0,1,0,0,0,1];p.position==="center"?_[6]=E[0]/2+p.offsetX:p.position==="right"?(_[6]=E[0]-f[3]+p.offsetX,c.attr({textAlign:"right"})):(_[6]=f[3]+p.offsetX,c.attr({textAlign:"left"})),h.setMatrix(_),d=h.getCanvasBBox(),y=b.minX<0?Math.abs(b.minX)+f[3]:f[3],x=b.minY<d.maxY?Math.abs(d.maxY-b.minY)+f[0]:d.maxY+f[0],w=[1,0,0,0,1,0,y,x,1],a.setMatrix(w);var S=[1,0,0,0,1,0,y,x,1];this.get("layout")==="vertical"?S[6]+=b.maxX+this.get("horiSep"):S[7]+=b.maxY+this.get("vertiSep"),o.setMatrix(S)}else{b=a.getCanvasBBox();var C=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?C[6]+=w[6]+b.maxX+this.get("horiSep"):C[7]+=w[7]+b.maxY+this.get("vertiSep"),o.setMatrix(C)}m=i.getCanvasBBox(),b=a.getCanvasBBox(),w=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var M=o.getMatrix()||[1,0,0,0,1,0,0,0,1],T=o.getCanvasBBox();E=[Math.max(b.width+w[6],T.width+M[6])+f[1],Math.max(b.height+w[7],T.height+M[7])+f[2]],n.changeSize(E[0],E[1]);var A=this.get("containerStyle"),O=i.getMatrix()||[1,0,0,0,1,0,0,0,1],L=aa.invertMatrix({x:0,y:0},O),N=i.addShape("rect",{attrs:Nn({x:L.x+(A.lineWidth||1),y:L.y+(A.lineWidth||1),width:E[0]-2*(A.lineWidth||1),height:E[1]-2*(A.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},A),name:"legend-back-rect",capture:!1});return N.toBack(),E},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=t.find(function(y){return y.get("name")==="root"}),u=l.find(function(y){return y.get("name")==="node-group"}),f=l.find(function(y){return y.get("name")==="edge-group"}),c={min:0,max:-1/0};u.get("children").forEach(function(y,x){x===0&&(c.min=s[0]);var w=y.get("children")[0],E=y.getCanvasBBox(),_=w.getBBox(),S=_.width,C=_.height,M=0,T=0;a==="vertical"?(M=s[1],T=s[0]+S/2,s[0]=T+E.height+i,E.maxX+M+S/2):(M=s[0]+S/2,T=s[1],s[0]=M+E.width+n,E.maxY+T+C/2),s[0]>c.max&&(c.max=s[0]),y.setMatrix([1,0,0,0,1,0,M,T,1])});var h=c.max-c.min,d={min:0,max:-1/0},v=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?v.maxX+n:v.maxY+i,f.get("children").forEach(function(y,x){x===0&&(d.min=s[0]);var w=y.get("children")[0],E=y.getCanvasBBox(),_=w.getBBox(),S=_.width,C=_.height,M=0,T=0;a==="vertical"?(M=s[1],T=s[0],s[0]=T+E.height+i,y.setMatrix([1,0,0,0,1,0,0,T+C/2,1])):(M=s[0],T=s[1],s[0]=M+E.width+n,y.setMatrix([1,0,0,0,1,0,M+S/2,0,1])),s[0]>d.max&&(d.max=s[0])});var p=d.max-d.min;if(o&&o!==""&&o!=="left"){var g=h-p,m=o==="center"?Math.abs(g)/2:Math.abs(g),b=g<0?u:f;b.get("children").forEach(function(y){var x=y.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?x[7]+=m:x[6]+=m,y.setMatrix(x)})}},e.prototype.processData=function(){var t=this.get("data"),n={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(i,a){return i.order-a.order}),t.nodes.forEach(function(i){var a,o,s,l,u,f=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],c=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:i.id||Dl(),type:i.type||"circle",style:Nn({},i.style),order:i.order,label:i.label,itemType:"node",size:f,labelCfg:{position:"right",style:Nn({fontFamily:"Arial"},c)}})})),t.edges&&(t.edges.sort(function(i,a){return i.order-a.order}),t.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:i.id||Dl(),type:s,size:u,style:Nn({lineWidth:Ft(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Nn({fontFamily:"Arial"},l)}})})),this.set("itemsData",n)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var n=this.get(t);if(Pt(n))this.set(t,[n,n,n,n]);else if(Ft(n))switch(n.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(t,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(t,[n[0],n[1],n[2],n[1]]);break}return this.get(t)},e.prototype.getShapeSize=function(t){var n,i,a;return t.size&&(Ft(t.size)?(n=t.size[0],i=t.size[1]||t.size[0],a=t.size[0]/2):Pt(t.size)&&(n=t.size,i=t.size,a=t.size/2)),t.style&&(t.style.width&&(n=t.style.width),t.style.height&&(i=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),n||(n=a),i||(i=a),{width:n,height:i,r:a}},e.prototype.getStyle=function(t,n){var i=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Nn(Nn({},i),n.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var n=this.get("graph"),i=n.get("container"),a=this.get("container");i.removeChild(a)},e}(eo);const m4e=g4e;var y4e=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bo=function(){return Bo=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Bo.apply(this,arguments)},S6=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};typeof document<"u"&&$_(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var M6="canvas-annotation",b4e=function(r){y4e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Bo(Bo({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var n=t.collapsed,i=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,l=s===void 0?"":s,u=t.borderRadius,f=u===void 0?5:u,c=n?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",h=n?"":" <p class='g6-annotation-content'>".concat(l,"</p>"),d="<p class='g6-annotation-close'>x</p>",v=n?"".concat(f,"px"):"".concat(f,"px ").concat(f,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(f,"px; max-width: ").concat(i,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(v,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(c,`
          `).concat(d,`
        </div>
        `).concat(h,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var n=t.get("graph"),i=n.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),i.appendChild(a)):a=i,this.set("container",a);var s=i.getBoundingClientRect(),l=new Eu({container:i,width:s.right-s.left,height:s.bottom-s.top});Mr(l.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",Lm(function(){return t.resizeCanvas(t)},100));var u=l.addGroup({id:"annotation-link-group"});t.set("linkGroup",u),t.set("canvas",l),t.get("getTitle")||t.set("getTitle",function(c){var h,d=((h=c==null?void 0:c.getModel)===null||h===void 0?void 0:h.call(c))||{},v=d.label,p=d.id;return v||p||"-"}),t.get("getContent")||t.set("getContent",function(c){var h,d;if(!c)return"-";var v=((h=c.getModel)===null||h===void 0?void 0:h.call(c))||{},p=v.label,g=v.id,m=(d=c.getType)===null||d===void 0?void 0:d.call(c),b=m?"".concat(m,": "):"";return"".concat(b).concat(p||g||"")});var f=t.get("defaultData");f&&this.readData(f)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var n=this.get("containerCfg"),i=this.get("graph"),a=i.getContainer(),o=a.getBoundingClientRect(),s=o.left,l=o.right,u=o.top,f=o.bottom,c=f-u,h=l-s,d=n.position,v=d===void 0?"top":d,p=n.offsetX,g=p===void 0?0:p,m=n.offsetY,b=m===void 0?0:m,y=S6(n,["position","offsetX","offsetY"]),x=n.height,w=x===void 0?"fit-content":x,E=n.width,_=E===void 0?i.getWidth():E;w==="100%"&&(w=c),_==="100%"&&(_=h);var S="unset",C="unset",M={};switch(v){case"right":S="".concat(c,"px"),M={top:0,right:0},M.right+=s+g,M.top+=u+b;break;case"bottom":C="".concat(h,"px"),M={bottom:0,left:0},M.left+=s+g,M.bottom+=u+b;break;case"top":C="".concat(h,"px");case"left":S="".concat(c,"px");default:M={top:0,left:0},M.left+=s+g,M.top+=u+b;break}Object.keys(M).forEach(function(A){M[A]="".concat(M[A],"px")});var T=_n("<div class='".concat(n.className," g6-annotation-container'></div>"));return Mr(T,Bo(Bo({position:"absolute",display:v==="top"||v==="bottom"?"inline-flex":"unset",width:Pt(_)?"".concat(_,"px"):_,height:Pt(w)?"".concat(w,"px"):w,maxHeight:S,maxWidth:C,overflow:"scroll"},M),y)),a.appendChild(T),T.addEventListener("scroll",function(A){t.updateLinks()}),T}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var n=t.get("container").getBoundingClientRect(),i=n.right-n.left,a=n.bottom-n.top;t.get("canvas").changeSize(i,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var n=t||this,i=n.get("cardInfoMap")||{},a=n.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),l=a.getClientByPoint(o.x,o.y),u=l.x,f=l.y,c=a.getClientByPoint(s.x,s.y),h=c.x,d=c.y;Object.values(i).forEach(function(v){var p=v.card;if(p){var g=p.style,m=Yc(g.left),b=Yc(g.top),y=p.getBoundingClientRect(),x=y.width,w=y.height,E=m,_=b;m+x>h-u&&(E=h-u-x),m<0&&(E=0),b+w>d-f&&(_=d-f-w),b<0&&(_=0),Mr(p,{left:"".concat(E,"px"),top:"".concat(_,"px")})}}),n.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var n=t.item;this.toggleAnnotation(n)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var n=t.get("cardInfoMap")||{};Object.keys(n).forEach(function(i){t.hideCard(i)})}},e.prototype.toggleAnnotation=function(t,n){var i,a;n===void 0&&(n={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},l=o.get("graph"),u=o.get("container"),f=o.get("containerCfg"),c=Object.assign({},o.get("cardCfg")||{},n),h=c.minHeight,d=c.minWidth,v=c.width,p=c.height,g=c.collapsed,m=g===void 0?!1:g,b=c.x,y=c.y,x=c.title,w=c.content,E=c.maxTitleLength,_=c.defaultBegin,S=S6(c,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),C=o.get("linkGroup"),M=this.get("rows")||[[]],T=(i=t.isCanvas)===null||i===void 0?void 0:i.call(t),A=T?M6:t.getID(),O=s[A]||{},L=O.card,N=O.link,P=O.x,R=O.y,G=O.title,D=O.content,B=this.get("getTitle"),Y=this.get("getContent"),ee=this.get("getContentPlaceholder")||function(){return""},ne=this.get("getTitlePlaceHolder")||function(){return""},Q=ee(t),ye=ne(t),Le=_n(this.getDOMContent(Bo({itemId:A,collapsed:m,title:((a=G||x||(B==null?void 0:B(t)))===null||a===void 0?void 0:a.substr(0,E))||ye,content:D||w||(Y==null?void 0:Y(t))||Q},S))),Fe=Pt(h)?"".concat(h,"px"):h;Mr(Le,{minHeight:m?"unset":Fe,minWidth:Pt(d)?"".concat(d,"px"):d,height:p,width:v});var _e=!!L;_e?(N==null||N.remove(!0),u.replaceChild(Le,L)):u.appendChild(Le);var Ve;if(!f){if(Ve=u.getBoundingClientRect()||{},b!==void 0&&y!==void 0)P=b,R=y;else if(!_e&&!T){var Xe=Ve.top,vt=_||{},bt=vt.left,te=vt.right,H=te===void 0?16:te,de=vt.top,Be=de===void 0?8:de,Ie=vt.bottom,Pe=H,Ye=Be;isNaN(bt)||(Pe=u.scrollWidth-bt),isNaN(Ie)||(Ye=u.scrollHeight-Ie);var V=Pt(d)?d:100;P=u.scrollWidth-Le.scrollWidth-(M.length-1)*V-Pe;var z=M[M.length-1],F=(z[z.length-1]||{}).bbox;R=(F==null?void 0:F.bottom)-Xe||Ye}Mr(Le,{position:"absolute",left:"".concat(P,"px"),top:"".concat(R,"px"),cusor:f?"unset":"move"})}this.bindListener(Le,A);var k=Le.getBoundingClientRect();if(!T){var ue=qM(t,k,l,this.get("canvas")),ce=this.get("linkStyle");N=C.addShape("path",{attrs:Bo({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:ue},ce)})}if(s[A]=Bo(Bo({},s[A]||{}),{id:A,collapsed:m,card:Le,link:N,x:P,y:R,cardBBox:k,content:D||w,title:G||x,contentPlaceholder:Q,titlePlaceholder:ye,isCanvas:T}),o.set("cardInfoMap",s),f)this.updateCardPositionsInConatainer(),this.updateLinks();else{var X=!isNaN(b)&&!isNaN(y);if(!_e&&!T&&!X){var ae=Ve.bottom,Ce=ae===void 0?0:ae,Xe=Ve.top;M[M.length-1].push({id:A,bbox:k}),k.top>Ce-Xe-k.height-16&&M.push([]),this.set("rows",M)}}this.updateCardSize(A);var ke=this.get("onAnnotationChange");ke==null||ke(s[A],_e?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var n=this.get("container"),i=this.get("containerCfg").position,a=n.getBoundingClientRect().width,o=getComputedStyle(n),s=Yc(o.paddingLeft)+Yc(o.paddingRight);a-=s,Object.values(t).forEach(function(l){var u=l.card,f=u.getBoundingClientRect().width;switch(i){case"right":Mr(u,{marginLeft:a?"".concat(a-f,"px"):"0px"});break;case"top":case"bottom":Mr(u,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var n=this.get("graph"),i=this.get("cardInfoMap");if(i){var a=i[t].collapsed,o=n.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),i[t]=Bo(Bo({},i[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(!(!n||!n[t])){var i=n[t],a=i.card,o=i.link;Mr(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(n[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=n[t],a=i.card,o=i.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete n[t];var l=this.get("onAnnotationChange");l(i,"remove")}}},e.prototype.bindListener=function(t,n){var i=this;if(!this.destroyed){t.addEventListener("mousemove",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var f=i.get("cardCfg").onMouseEnterIcon,c=f===void 0?function(){}:f;c(l,n,u)}}),t.addEventListener("mouseout",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var f=i.get("cardCfg").onMouseLeaveIcon,c=f===void 0?function(){}:f;c(l,n,u)}}),t.addEventListener("mouseenter",function(l){var u=i.get("cardInfoMap");if(u){var f=i.get("graph"),c=f.findById(n);if(c){var h=i.get("itemHighlightState");f.setItemState(c,h,!0)}var d=u[n].link;if(d){var v=i.get("linkHighlightStyle")||{};d.attr(v)}}}),t.addEventListener("mouseleave",function(l){var u=i.get("cardInfoMap");if(u){var f=i.get("graph"),c=f.findById(n);if(c){var h=i.get("itemHighlightState");f.setItemState(c,h,!1)}var d=u[n].link;if(d){var v=i.get("linkHighlightStyle")||{};Object.keys(v).forEach(function(g){d.attr(g,void 0),d.attr(g,void 0)});var p=i.get("linkStyle");d.attr(p)}}}),t.addEventListener("click",function(l){var u=(i.get("cardCfg")||{}).onClickIcon;if(l.target.className==="g6-annotation-collapse"||l.target.className==="g6-annotation-expand"){var f=i.get("cardCfg").collapseType;f==="hide"?i.hideCard(n):i.handleExpandCollapseCard(n),u==null||u(l,n,l.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(l.target.className==="g6-annotation-close"){var c=i.get("cardCfg").closeType;c==="remove"?i.removeCard(n):i.hideCard(n),u==null||u(l,n,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(l){var u=i.get("cardInfoMap"),f=(i.get("cardCfg")||{}).maxTitleLength,c=f===void 0?20:f;if(u){var h=l.target,d=h.className;if(!(d!=="g6-annotation-title"&&d!=="g6-annotation-content")){var v=d==="g6-annotation-title"?h.getBoundingClientRect():h.parentNode.getBoundingClientRect(),p=v.width,g=v.height,m=getComputedStyle(h),b=d==="g6-annotation-title"?"input":"textarea",y=_n("<".concat(b,' class="').concat(d,'-input" type="textarea" style="width:').concat(p,"px; height: ").concat(g,'px; min-width: 16px;"/>')),x=_n('<div class="'.concat(d,'-input-wrapper" style="width: ').concat(p,"px; height: ").concat(g,"px; min-width: 16px; margin-right: ").concat(m.marginRight,'" />'));x.appendChild(y),h.parentNode.replaceChild(x,h);var w=u[n],E=w.contentPlaceholder,_=w.titlePlaceholder,S=w.content,C=w.title,M=S;d==="g6-annotation-title"?(y.name="title",y.maxLength=c,M=C):y.name="content",M?(y.innerHTML=h.innerHTML,y.value=h.innerHTML):y.placeholder=d==="g6-annotation-title"?_:E,y.focus(),y.addEventListener("blur",function(T){y.value&&(h.innerHTML=y.value,w[y.name||"title"]=y.value),x.parentNode.replaceChild(h,x),i.updateCardSize(n);var A=i.get("onAnnotationChange");A==null||A(w,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(l){var u=l.target.className;if(!o.includes(u)){var f=t.style;i.set("dragging",{card:t,x:l.clientX,y:l.clientY,left:Yc(f.left),top:Yc(f.top)})}}),t.addEventListener("drag",function(l){l.preventDefault();var u=i.get("cardInfoMap");if(u){var f=l.clientX,c=l.clientY,h=i.get("dragging");if(!(isNaN(f)||isNaN(c)||!h)){var d=h.x,v=h.y,p=h.left,g=h.top,m=h.card,b=f-d,y=c-v;p+=b,g+=y;var x=i.get("graph"),w=x.getPointByCanvas(0,0),E=x.getPointByCanvas(x.getWidth(),x.getHeight()),_=x.getClientByPoint(w.x,w.y),S=_.x,C=_.y,M=x.getClientByPoint(E.x,E.y),T=M.x,A=M.y,O=m.getBoundingClientRect(),L=O.right-O.left,N=O.bottom-O.top;(p>T-S-L&&b>0||p<0&&b<0)&&(p-=b),(g>A-C-N&&y>0||g<0&&y<0)&&(g-=y),Mr(m,{left:"".concat(p,"px"),top:"".concat(g,"px"),visibility:"hidden"}),d=f,v=c;var P=(u[n]||{}).link;if(P){var R=x.findById(n);P.attr("path",qM(R,O,x,i.get("canvas")))}i.set("dragging",{x:d,y:v,left:p,top:g,card:m})}}});var s=function(u){var f=i.get("cardInfoMap");if(f){var c=i.get("dragging");if(c){var h=c.left,d=c.top,v=c.card;f[n].x=h,f[n].y=d,Mr(v,{visibility:"visible"}),i.set("dragging",!1);var p=i.get("rows");p==null||p.forEach(function(m){for(var b=m.length-1;b>=0;b--)m[b].id===n&&m.splice(b,1)});var g=i.get("onAnnotationChange");g==null||g(f[n],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var n=this.get("cardInfoMap");if(n){var i=n[t].card,a=i.getBoundingClientRect().width,o=i.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),l=Yc(s.marginLeft),u=o.getBoundingClientRect().width;Mr(o,{marginRight:"".concat(a-l-24-16-u,"px")})}}},e.prototype.updateLink=function(t){var n=t.item;if(n){var i=this.get("cardInfoMap");if(i){var a=this.get("canvas"),o=this.get("graph"),s=n.getID(),l=i[s]||{},u=l.link,f=l.card;if(u){var c=qM(n,f.getBoundingClientRect(),o,a);u.attr("path",c)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=i.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=a.card,l=a.isCanvas;if(!(!s||l||s.style.display==="none")){var u=i.findById(o);u&&u.isVisible()?t.toggleAnnotation(u):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var n=t.item,i=t.visible;if(!(!n||n.destroyed)){var a=this.get("cardInfoMap");if(a){var o=n.getID();a[o]&&(i||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var n=this.get("cardInfoMap");if(n){var i=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(n).forEach(function(l){var u=l.title,f=l.content,c=l.x,h=l.y,d=l.id,v=l.collapsed,p=l.card;if(!(p&&p.style.display==="none"&&!t)){var g=i.findById(d)||i.get("canvas");s.push({id:d,x:c,y:h,collapsed:v,title:u||(a==null?void 0:a(g)),content:f||(o==null?void 0:o(g)),visible:p&&p.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var n=this,i=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,l=a.y,u=a.title,f=a.content,c=a.collapsed,h=a.visible,d=i.findById(o);if(!d&&o===M6&&(d=i.get("canvas")),!d){var v=n.get("cardInfoMap")||{};v[o]=a,n.set("cardInfoMap",v);return}n.toggleAnnotation(d,{x:s,y:l,title:u,content:f,collapsed:c}),h||n.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var n=this.get("container");Object.values(t).forEach(function(i){var a=i.card,o=i.link;n.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var n=this.get("graph");!n||n.destroyed||(this.get("containerCfg")&&n.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(eo);const x4e=b4e;var w4e=function(e,t){var n,i,a=1/0;Object.keys(e).forEach(function(l){var u=e[l];Object.keys(t).forEach(function(f){var c=t[f],h=u.x-c.x,d=u.y-c.y,v=h*h+d*d;a>v&&(a=v,n=u,i=c)})});var o=20,s=aa.getControlPoint(n,i,.5,o);return[["M",n.x,n.y],["Q",s.x,s.y,i.x,i.y]]},qM=function(e,t,n,i){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var l=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),u=l.minX,f=l.minY,c=l.maxX,h=l.maxY,d=e.getModel(),v=d.x,p=d.y;u+=v,f+=p,c+=v,h+=p,o={left:{x:u,y:(f+h)/2},right:{x:c,y:(f+h)/2},top:{x:(u+c)/2,y:f},bottom:{x:(u+c)/2,y:h}}}Object.keys(o).forEach(function(C){var M=o[C],T=M.x,A=M.y,O=n.getClientByPoint(T,A);o[C]=i.getPointByClient(O.x,O.y)});var g=t.top,m=g===void 0?0:g,b=t.left,y=b===void 0?0:b,x=t.right,w=x===void 0?0:x,E=t.bottom,_=E===void 0?0:E,S={left:i.getPointByClient(y,(m+_)/2),right:i.getPointByClient(w,(m+_)/2),top:i.getPointByClient((y+w)/2,m),bottom:i.getPointByClient((y+w)/2,_)};return w4e(o,S)},Yc=function(e){return Number(e.replace(/\s+|px/gi,""))||0},po={PluginBase:eo,Menu:V3e,Grid:$3e,Minimap:Q3e,Bundling:r5e,ToolBar:u5e,Tooltip:h5e,Fisheye:a5e,TimeBar:JBe,ImageMinimap:i4e,EdgeFilterLens:l4e,SnapLine:d4e,Legend:m4e,Annotation:x4e};zu("circle",{options:{size:gt.defaultNode.size,style:{x:0,y:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:U({},gt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=dn({},i,e.icon),s="".concat(this.type,"-keyShape"),l=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=l;var u=o.width,f=o.height,c=o.show,h=o.text;if(c){var d="".concat(this.type,"-icon");h?t.shapeMap[d]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):t.shapeMap[d]=t.addShape("image",{attrs:U({x:-u/2,y:-f/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var i=n||{},a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=Mi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2;if(o){var v="link-point-left";t.shapeMap[v]=t.addShape("circle",{attrs:U(U({},c),{x:-d,y:0,r:u/2||f||5}),className:v,name:v,isAnchorPoint:!0})}if(s){var p="link-point-right";t.shapeMap[p]=t.addShape("circle",{attrs:U(U({},c),{x:d,y:0,r:u/2||f||5}),className:p,name:p,isAnchorPoint:!0})}if(a){var g="link-point-top";t.shapeMap[g]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:-d,r:u/2||f||5}),className:g,name:g,isAnchorPoint:!0})}if(l){var m="link-point-bottom";t.shapeMap[m]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:d,r:u/2||f||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=dn({},t,n),a=this.getSize(e),o=a[0]/2,s=U({x:0,y:0,r:o},i);return s},update:function(e,t,n){var i=t.getContainer(),a=this.getSize(e),o=U({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,i)}},"single-node");zu("rect",{options:{size:[100,30],style:{radius:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:U({},gt.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=i,this.drawLinkPoints(e,t),i},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=Mi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],v=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},c),{x:-d/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},c),{x:d/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:-v/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:v/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=U({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var l={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=$t({},a,s.attr(),l);u=$t(u,e.style),this.updateShape(e,t,u,!1,n),this.updateLinkPoints(e,i)}},"single-node");zu("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:U({},gt.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=i.width,l=i.height,u=i.show,f=i.text;return u&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:U({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=Mi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,v=h[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},c),{x:-d,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},c),{x:d,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:-v,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:v,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getSize(e),o=a[0]/2,s=a[1]/2,l=U({x:0,y:0,rx:o,ry:s},i);return l},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},l=t.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");zu("diamond",{options:{size:[80,80],style:{stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:U({},gt.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,f=i.text;return u&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:U({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=Mi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],v=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},c),{x:-d/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},c),{x:d/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:-v/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:v/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),n=t[0],i=t[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getPath(e),o=U({path:a},i);return o},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=t.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");zu("triangle",{options:{size:40,direction:"up",style:{stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:U({},gt.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(e),l=e.direction||o,u=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=u;var f=a.width,c=a.height,h=a.show,d=a.offset,v=a.text;if(h)if(v)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-f/2,g=-c/2;(l==="up"||l==="down")&&(g+=d),(l==="left"||l==="right")&&(p+=d),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:U({x:p,y:g},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=e.direction||o,l=a.top,u=a.left,f=a.right,c=a.bottom,h=a.size,d=a.r,v=Mi(a,["top","left","right","bottom","size","r"]),p=this.getSize(e),g=p[0];if(u){var m=null,b=g*Math.sin(1/3*Math.PI),y=g*Math.sin(1/3*Math.PI);s==="up"?m=[-y,b]:s==="down"?m=[-y,-b]:s==="left"&&(m=[-y,y-b]),m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},v),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(f){var x=null,b=g*Math.sin(1/3*Math.PI),y=g*Math.sin(1/3*Math.PI);s==="up"?x=[y,b]:s==="down"?x=[y,-b]:s==="right"&&(x=[y,y-b]),x&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},v),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(l){var w=null,b=g*Math.sin(1/3*Math.PI),y=g*Math.sin(1/3*Math.PI);s==="up"?w=[y-b,-b]:s==="left"?w=[y,-b]:s==="right"&&(w=[-y,-b]),w&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},v),{x:w[0],y:w[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(c){var E=null,b=g*Math.sin(1/3*Math.PI),y=g*Math.sin(1/3*Math.PI);s==="down"?E=[-y+b,b]:s==="left"?E=[y,b]:s==="right"&&(E=[-y,b]),E&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},v),{x:E[0],y:E[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||t,i=this.getSize(e),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getPath(e),o=U({path:a},i);return o},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=t.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,t){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(P){return P.get("className")==="link-point-left"}),l=t.shapeMap["link-point-right"]||t.find(function(P){return P.get("className")==="link-point-right"}),u=t.shapeMap["link-point-top"]||t.find(function(P){return P.get("className")==="link-point-top"}),f=t.shapeMap["link-point-bottom"]||t.find(function(P){return P.get("className")==="link-point-bottom"}),c=i,h=s||l||u||f;h&&(c=h.attr());var d=$t({},c,e.linkPoints),v=d.fill,p=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var b=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},y=b.left,x=b.right,w=b.top,E=b.bottom,_=this.getSize(e),S=_[0],C={r:m,fill:v,stroke:p,lineWidth:g},M=null,T=S*Math.sin(1/3*Math.PI),A=S*Math.sin(1/3*Math.PI);o==="up"?M=[-A,T]:o==="down"?M=[-A,-T]:o==="left"&&(M=[-A,A-T]),M&&(s?!y&&y!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr(U(U({},C),{x:M[0],y:M[1]})):y&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},C),{x:M[0],y:M[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var O=null;o==="up"?O=[A,T]:o==="down"?O=[A,-T]:o==="right"&&(O=[A,A-T]),O&&(l?!x&&x!==void 0?(l.remove(),delete t.shapeMap["link-point-right"]):l.attr(U(U({},C),{x:O[0],y:O[1]})):x&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},C),{x:O[0],y:O[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var L=null;o==="up"?L=[A-T,-T]:o==="left"?L=[A,-T]:o==="right"&&(L=[-A,-T]),L&&(u?!w&&w!==void 0?(u.remove(),delete t.shapeMap["link-point-top"]):u.attr(U(U({},C),{x:L[0],y:L[1]})):w&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},C),{x:L[0],y:L[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var N=null;o==="down"?N=[-A+T,T]:o==="left"?N=[A,T]:o==="right"&&(N=[-A,T]),N&&(f?!E&&E!==void 0?(f.remove(),delete t.shapeMap["link-point-bottom"]):f.attr(U(U({},C),{x:N[0],y:N[1]})):E&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},C),{x:N[0],y:N[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");zu("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:gt.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:gt.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:gt.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],l=o[1],u=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=u;var f=i.show,c=Mi(i,["show"]);return f&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:U({x:-s/2,y:-l/2,height:l},c),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),u},drawLogoIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,f=i.y,c=i.offset,h=i.text,d=Mi(i,["width","height","x","y","offset","text"]);h?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:U(U({},d),{x:u||-o/2+s+c,y:f||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,f=i.y,c=i.offset,h=i.text,d=Mi(i,["width","height","x","y","offset","text"]);h?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:U(U({},d),{x:u||o/2-s+c,y:f||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=Mi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],v=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},c),{x:-d/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},c),{x:d/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:-v/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},c),{x:0,y:v/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var n=this.getOptions(e),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,f=this.getSize(e),c=f[0],h=null,d=s.show,v=s.width,p=-c/2+a.offset;d&&(p=-c/2+v+a.offset);var g=a.style,m=u.style,b=u.paddingTop;return tt(e.description)?(h=t.addShape("text",{attrs:U(U({},g),{x:p,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h,t.shapeMap["rect-description"]=t.addShape("text",{attrs:U(U({},m),{x:p,y:17+(b||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=t.addShape("text",{attrs:U(U({},g),{x:p,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h),h},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=U({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,f=this.getSize(e),c=f[0],h=f[1],d=t.get("keyShape");d.attr(U(U({},a),{x:-c/2,y:-h/2,width:c,height:h}));var v=t.getContainer(),p=v.shapeMap["rect-logo-icon"]||v.find(function(Le){return Le.get("className")==="rect-logo-icon"}),g=p?p.attr():{},m=$t({},g,e.logoIcon),b=m.width;b===void 0&&(b=this.options.logoIcon.width);var y=e.logoIcon?e.logoIcon.show:void 0,x=s.offset,w=-c/2+b+x;!y&&y!==void 0&&(w=-c/2+x);var E=v.shapeMap["node-label"]||v.find(function(Le){return Le.get("className")==="node-label"}),_=v.shapeMap["rect-description"]||v.find(function(Le){return Le.get("className")==="rect-description"});if(e.label)if(!E)v.shapeMap["node-label"]=v.addShape("text",{attrs:U(U({},s.style),{x:w,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var S=e.labelCfg?e.labelCfg.style:{},C=$t({},E.attr(),S);e.label&&(C.text=e.label),C.x=w,tt(e.description)&&(C.y=-5),_&&(_.resetMatrix(),_.attr({x:w})),E.resetMatrix(),E.attr(C)}if(tt(e.description)){var M=u.paddingTop;if(!_)v.shapeMap["rect-description"]=v.addShape("text",{attrs:U(U({},u.style),{x:w,y:17+(M||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var S=e.descriptionCfg?e.descriptionCfg.style:{},T=$t({},_.attr(),S);tt(e.description)&&(T.text=e.description),T.x=w,_.resetMatrix(),_.attr(U(U({},T),{y:17+(M||0)}))}}var A=v.shapeMap["pre-rect"]||v.find(function(Le){return Le.get("className")==="pre-rect"});if(A&&!A.destroyed){var O=$t({},A.attr(),e.preRect);A.attr(U(U({},O),{x:-c/2,y:-h/2,height:h}))}if(p&&!p.destroyed)if(!y&&y!==void 0)p.remove(),delete v.shapeMap["pre-rect"];else{var L=m.width,N=m.height,P=m.x,R=m.y,G=m.offset,D=Mi(m,["width","height","x","y","offset"]);p.attr(U(U({},D),{x:P||-c/2+L+G,y:R||-N/2,width:L,height:N}))}else y&&this.drawLogoIcon(e,v);var B=v.shapeMap["rect-state-icon"]||v.find(function(Le){return Le.get("className")==="rect-state-icon"}),Y=B?B.attr():{},ee=$t({},Y,e.stateIcon);if(B){!ee.show&&ee.show!==void 0&&(B.remove(),delete v.shapeMap["rect-state-icon"]);var ne=ee.width,N=ee.height,P=ee.x,R=ee.y,Q=ee.offset,ye=Mi(ee,["width","height","x","y","offset"]);B.attr(U(U({},ye),{x:P||c/2-ne+Q,y:R||-N/2,width:ne,height:N}))}else ee.show&&this.drawStateIcon(e,v);this.updateLinkPoints(e,v)},getOptions:function(e,t){return t==="move"?e:dn({},this.options,this.getCustomConfig(e)||{},e)}},"single-node");zu("star",{options:{size:60,style:{stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:U({},gt.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,f=i.text;return u&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:U({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,f=i.size,c=i.r,h=Mi(i,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e),v=d[0];if(s){var p=Math.cos(.1*Math.PI)*v,g=Math.sin((18+72*0)/180*Math.PI)*v;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},h),{x:p,y:-g,r:f/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(a){var p=Math.cos(.5*Math.PI)*v,g=Math.sin((18+72*1)/180*Math.PI)*v;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},h),{x:p,y:-g,r:f/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){var p=Math.cos(.9*Math.PI)*v,g=Math.sin((18+72*2)/180*Math.PI)*v;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},h),{x:p,y:-g,r:f/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(l){var p=Math.cos(1.3*Math.PI)*v,g=Math.sin((18+72*3)/180*Math.PI)*v;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:U(U({},h),{x:p,y:-g,r:f/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var p=Math.cos(1.7*Math.PI)*v,g=Math.sin((18+72*4)/180*Math.PI)*v;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:U(U({},h),{x:p,y:-g,r:f/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),n=t[0],i=n*3/8,a=e.innerR||i;return aa.getStarPath(n,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},t,n),a=this.getPath(e),o=U({path:a},i);return o},update:function(e,t,n){var i=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=t.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,i=t.shapeMap["link-point-left"]||t.find(function(T){return T.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(T){return T.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(T){return T.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(T){return T.get("className")==="link-point-left-bottom"}),l=t.shapeMap["link-point-left-bottom"]||t.find(function(T){return T.get("className")==="link-point-right-bottom"}),u=n,f=i||a||o||s||l;f&&(u=f.attr());var c=$t({},u,e.linkPoints),h=c.fill,d=c.stroke,v=c.lineWidth,p=c.size/2;p||(p=c.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,b=g.right,y=g.top,x=g.leftBottom,w=g.rightBottom,E=this.getSize(e),_=E[0],S={r:p,fill:h,stroke:d,lineWidth:v},C=Math.cos((18+72*0)/180*Math.PI)*_,M=Math.sin((18+72*0)/180*Math.PI)*_;a?!b&&b!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr(U(U({},S),{x:C,y:-M})):b&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:U(U({},S),{x:C,y:-M}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),C=Math.cos((18+72*1)/180*Math.PI)*_,M=Math.sin((18+72*1)/180*Math.PI)*_,o?!y&&y!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr(U(U({},S),{x:C,y:-M})):y&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:U(U({},S),{x:C,y:-M}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),C=Math.cos((18+72*2)/180*Math.PI)*_,M=Math.sin((18+72*2)/180*Math.PI)*_,i?!m&&m!==void 0?(i.remove(),delete t.shapeMap["link-point-left"]):i.attr(U(U({},S),{x:C,y:-M})):m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:U(U({},S),{x:C,y:-M}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),C=Math.cos((18+72*3)/180*Math.PI)*_,M=Math.sin((18+72*3)/180*Math.PI)*_,s?!x&&x!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr(U(U({},S),{x:C,y:-M})):x&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:U(U({},S),{x:C,y:-M}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),C=Math.cos((18+72*4)/180*Math.PI)*_,M=Math.sin((18+72*4)/180*Math.PI)*_,l?!w&&w!==void 0?(l.remove(),delete t.shapeMap["link-point-right-bottom"]):l.attr(U(U({},S),{x:C,y:-M})):w&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:U(U({},S),{x:C,y:-M}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var C6=aa.defaultSubjectColors,v0="fan-shape-";zu("donut",{options:{size:gt.defaultNode.size,style:{x:0,y:0,stroke:gt.defaultNode.style.stroke,fill:gt.defaultNode.style.fill,lineWidth:gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:gt.nodeLabel.style.fill,fontSize:gt.nodeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:gt.defaultNode.linkPoints.size,lineWidth:gt.defaultNode.linkPoints.lineWidth,fill:gt.defaultNode.linkPoints.fill,stroke:gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:U({},gt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=dn({},i,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var l=o.width,u=o.height,f=o.show,c=o.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:U({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:U({x:-l/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),E4e(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,n,i,a){var o=t.get("keyShape");o.attr(U({},n)),_4e(e,t,o),this.updateLabel(e,t,a),i&&this.updateIcon(e,t)}},"circle");var E4e=function(e,t,n){var i=e.donutAttrs,a=i===void 0?{}:i,o=e.donutColorMap,s=o===void 0?{}:o,l=Object.keys(a).length;if(a&&l>1){var u=WK(a,s),f=u.configs,c=u.totalValue;if(c){var h=VK(n),d=h.lineWidth,v=h.arcR,p=[v,0],g=0;if(l===1){VT(t,{arcR:v,arcBegin:p,beginAngle:g,config:f[0],fanIndex:0,lineWidth:d,totalValue:c,drawWhole:!0});return}for(var m=0;m<f.length;m++){var b=VT(t,{arcR:v,arcBegin:p,beginAngle:g,config:f[m],fanIndex:m,lineWidth:d,totalValue:c});if(b.shouldEnd)return;p=b.arcBegin,g=b.beginAngle}}}},VT=function(e,t){var n=t.arcR,i=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,l=t.lineWidth,u=t.totalValue,f=t.drawWhole,c=f===void 0?!1:f,h=t.updateShape,d=h===void 0?void 0:h,v=o.value/u;if(v<.001)return{beginAngle:a,arcBegin:i,shape:void 0,shouldEnd:!1};var p,g,m;if(c||v>.999)p=[n,1e-4],m=1;else{var b=v*Math.PI*2;g=a+b,p=[n*Math.cos(g),-n*Math.sin(g)],m=b>Math.PI?1:0}var y={path:[["M",i[0],i[1]],["A",n,n,0,m,0,p[0],p[1]]],stroke:o.color||(d==null?void 0:d.attr("stroke"))||C6[s%C6.length],lineWidth:l};return d?d.attr(y):e.shapeMap["".concat(v0).concat(s)]=e.addShape("path",{attrs:y,name:"".concat(v0).concat(s),draggable:!0}),{beginAngle:g,arcBegin:p,shape:e.shapeMap["".concat(v0).concat(s)],shouldEnd:c||v>.999}},_4e=function(e,t,n){var i=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},l=t.getContainer();if(i){var u=WK(i,o),f=u.configs,c=u.totalValue;if(c)for(var h=VK(n),d=h.lineWidth,v=h.arcR,p=[v,0],g=0,m=0;m<f.length;m++){var b="".concat(v0).concat(m),y=VT(l,{arcR:v,arcBegin:p,beginAngle:g,config:f[m],fanIndex:m,lineWidth:d,totalValue:c,drawWhole:f.length===1,updateShape:l.shapeMap[b]});if(y.shape&&(s[b]=!0),y.shouldEnd)break;p=y.arcBegin,g=y.beginAngle}}var x=Object.keys(l.shapeMap).filter(function(w){return w.includes(v0)});x.forEach(function(w){s[w]||(l.shapeMap[w].remove(!0),delete l.shapeMap[w])})},WK=function(e,t){var n=0,i=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(i.push({key:a,value:o,color:t[a]}),n+=o)}),{totalValue:n,configs:i}},VK=function(e){var t=e.attr("r"),n=.6*t,i=(t+n)/2,a=t-n;return{lineWidth:a,arcR:i}},J1=function(e){var t=e.x,n=e.y;return{x:t,y:n,centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}},S4e=function(e){e===void 0&&(e=[]);var t=[],n=[];e.forEach(function(l){t.push(l.x),n.push(l.y)});var i=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},aP=function(e){for(var t=[],n={},i=e.length,a=i-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,t.push(o))}return t},HK=function(e){return aP(e)},$w=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},M4e=function(e,t){var n=Math.abs(e.x-t.centerX),i=Math.abs(e.y-t.centerY);return n===0&&i===0?0:n/t.width>i/t.height},HT=function(e,t,n){var i=M4e(t,e);if(i===0){var a=e.centerX,o=e.centerY;return n.y<t.y?o=e.minY:n.x>t.x?a=e.maxX:n.x<t.x?a=e.minX:n.x===t.x&&(o=e.maxY),{x:a,y:o}}return i?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},A6=function(e,t){var n=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},XT=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},eb=function(e,t){var n=e.x,i=e.y;return n<t.minX||n>t.maxX||i<t.minY||i>t.maxY},C4e=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},A4e=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},T4e=function(e,t){return C4e(e,t.x).concat(A4e(e,t.y))},tm=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},O4e=function(e,t){var n=-2,i=0;return t.forEach(function(a){a&&(e.x===a.x&&(i+=n),e.y===a.y&&(i+=n))}),i},T6=function(e,t,n,i,a){return tm(e,t)+tm(e,n)+O4e(e,[t,n,i,a])},k4e=function r(e,t,n,i,a){a===void 0&&(a=0),e.unshift(t[i]),n[i]&&n[i]!==i&&a<=100&&r(e,t,n,n[i],a+1)},tb=function(e,t,n,i){var a=n.x-e.x,o=n.y-e.y,s=i.x-e.x,l=i.y-e.y,u=n.x-t.x,f=n.y-t.y,c=i.x-t.x,h=i.y-t.y,d=a*l-o*s,v=u*h-f*c,p=a*f-o*u,g=s*h-l*c;return d*v<=0&&p*g<=0},YT=function(e,t,n){if(n.width||n.height){var i=XT(n),a=i[0],o=i[1],s=i[2],l=i[3];return tb(e,t,a,o)||tb(e,t,a,l)||tb(e,t,o,s)||tb(e,t,s,l)}return!1},I4e=function(e,t,n,i){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(YT(o,t,n)||YT(o,t,i))return;a.push(o)}}),aP(a)},L4e=function(e,t,n,i,a,o,s){var l,u=[],f=(l={},l[t.id]=t,l),c={},h={},d={};h[t.id]=0,d[t.id]=T6(t,n,t);var v=new YK;v.add({id:t.id,value:d[t.id]});var p={};e.forEach(function(w){p[w.id]=w});for(var g;Object.keys(f).length;){var m=v.minId(!1);if(m)g=f[m];else break;if(g===n){var b=[];return k4e(b,p,c,n.id),b}delete f[g.id],v.remove(g.id),u.push(g);var y=I4e(e,g,i,a),x=function(E){E.forEach(function(_){if(u.indexOf(_)===-1){var S=_.id;f[S]||(f[S]=_);var C=d[g.id]+tm(g,_);if(h[S]&&C>=h[S]){v.add({id:S,value:d[S]});return}c[S]=g.id,h[S]=C,d[S]=h[S]+T6(_,n,t,o,s),v.add({id:S,value:d[S]})}})};x(y)}return[t,n]},P4e=function(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)},D4e=function(e,t,n,i){var a=tm(e,t),o=tm(n,t);a<i&&(i=a),o<i&&(i=o);var s={x:t.x-i/a*(t.x-e.x),y:t.y-i/a*(t.y-e.y)},l={x:t.x-i/o*(t.x-n.x),y:t.y-i/o*(t.y-n.y)};return[s,l]},O6=function(e,t){var n=[],i=e[0];return n.push("M".concat(i.x," ").concat(i.y)),e.forEach(function(a,o){var s=e[o+1],l=e[o+2];if(s&&l)if(P4e(a,s,l)){var u=D4e(a,s,l,t),f=u[0],c=u[1];n.push("L".concat(f.x," ").concat(f.y)),n.push("Q".concat(s.x," ").concat(s.y," ").concat(c.x," ").concat(c.y)),n.push("L".concat(c.x," ").concat(c.y))}else n.push("L".concat(s.x," ").concat(s.y));else s&&n.push("L".concat(s.x," ").concat(s.y))}),n.join("")},XK=function(e,t,n,i,a){var o,s;if(!n||!n.getType())o=J1(e);else if(n.getType()==="combo"){var l=n.getKeyShape().getBBox();if(l){var u=n.getModel(),f=u.x,c=u.y;o={x:f,y:c,width:l.width,height:l.height,minX:l.minX+f,maxX:l.maxX+f,minY:l.minY+c,maxY:l.maxY+c},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=J1(e)}else o=n&&n.getBBox();if(!i||!i.getType())s=J1(t);else if(i.getType()==="combo"){var h=i.getKeyShape().getBBox();if(h){var d=i.getModel(),v=d.x,p=d.y;s={x:v,y:p,width:h.width,height:h.height,minX:h.minX+v,maxX:h.maxX+v,minY:h.minY+p,maxY:h.maxY+p},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=J1(t)}else s=i&&i.getBBox();var g=$w(o,a),m=$w(s,a),b=HT(g,e,t),y=HT(m,t,e),x=S4e([b,y]),w=A6(g,x),E=A6(m,x),_=[];_=_.concat(XT(w)).concat(XT(E));var S={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[x,w,E].forEach(function(M){_=_.concat(T4e(M,S).filter(function(T){return eb(T,g)&&eb(T,m)}))}),[{x:b.x,y:y.y},{x:y.x,y:b.y}].forEach(function(M){eb(M,g)&&eb(M,m)&&_.push(M)}),_.unshift(b),_.push(y),_=aP(_);var C=L4e(_,b,y,o,s,e,t);return C.unshift(e),C.push(t),HK(C)},N4e=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],n={x:t.x,y:t.y},i=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===n.x?i.push(s):(i=[s],n.x=s.x),s.y===n.y?a.push(s):(a=[s],n.y=s.y),i.length>2){var l=e.indexOf(i[1]);l>-1&&e.splice(l,1);continue}if(a.length>2){var l=e.indexOf(a[1]);l>-1&&e.splice(l,1)}}return e},YK=function(){function r(){this.arr=[],this.map={},this.arr=[],this.map={}}return r.prototype._innerAdd=function(e,t){for(var n=[0,t-1];n[1]-n[0]>1;){var i=Math.floor((n[0]+n[1])/2);if(this.arr[i].value>e.value)n[1]=i;else if(this.arr[i].value<e.value)n[0]=i;else{this.arr.splice(i,0,e),this.map[e.id]=!0;return}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},r.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},r.prototype.remove=function(e){this.map[e]&&delete this.map[e]},r.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},r.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},r.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},r}(),R4e=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},B4e=function(e,t,n,i,a){return HK(XK(e,t,n,i,a.offset))},F4e={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:R4e,fallbackRoute:B4e},Cu=function(e,t){var n=Math.round(Math.abs(e/t)),i=e<0?-1:1;return n<0?0:i*n},$4e=function(e,t,n){var i={};return e.forEach(function(a){if(a)for(var o=$w(a.getBBox(),n),s=Cu(o.minX,t);s<=Cu(o.maxX,t);s+=1)for(var l=Cu(o.minY,t);l<=Cu(o.maxY,t);l+=1)i["".concat(s,"|||").concat(l)]=!0}),i},ZM=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n||i?Math.atan2(i,n):0},k6=function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n},I6=function(e,t,n){for(var i=1/0,a=0,o=t.length;a<o;a++){var s=n(e,t[a]);s<i&&(i=s)}return i},L6=function(e,t,n,i,a){var o=[];if(!n)return[e];var s=a.directions,l=a.offset,u=n.getBBox(),f=t.x>u.minX&&t.x<u.maxX&&t.y>u.minY&&t.y<u.maxY,c=$w(u,l);for(var h in c)c[h]=Cu(c[h],a.gridSize);if(f){for(var d=0,v=s;d<v.length;d++)for(var p=v[d],g=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]],h=0;h<4;h++){var m=g[h],b=aa.getLineIntersect(e,{x:e.x+p.stepX*c.width,y:e.y+p.stepY*c.height},m[0],m[1]);b&&!YT(e,b,u)&&(b.id="".concat(b.x,"|||").concat(b.y),o.push(b))}return o}var y=HT(c,e,i);return y.id="".concat(y.x,"|||").concat(y.y),[y]},KT=function(e,t,n,i){var a=ZM(e,t),o=n[e.id];if(!o){var s=ZM(i,e);return k6(s,a)}var l=ZM({x:o.x,y:o.y},e);return k6(l,a)},z4e=function(e,t,n,i,a,o,s){var l=[i],u=i,f=e.id,c=e.x,h=e.y,d={x:c,y:h,id:f};KT(d,o,t,n)&&(u={x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s},l.unshift(u));for(var v=t[f];v&&v.id!==f;){var p={x:c,y:h,id:f},g={x:v.x,y:v.y,id:v.id},m=KT(g,p,t,n);m&&(u={x:g.x===p.x?u.x:g.x*s,y:g.y===p.y?u.y:g.y*s},l.unshift(u)),f=g.id,c=g.x,h=g.y,v=t[f]}return l[0].x=c===n.x?a.x:u.x,l[0].y=h===n.y?a.y:u.y,l.unshift(a),l},G4e=function(e,t,n,i,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=dn(F4e,a);o.obstacles=o.obstacles||[];var s=o.penalties,l=o.gridSize,u=$4e(o.obstacles.concat([n,i]),l,o.offset),f={x:Cu(e.x,l),y:Cu(e.y,l)},c={x:Cu(t.x,l),y:Cu(t.y,l)};e.id="".concat(f.x,"|||").concat(f.y),t.id="".concat(c.x,"|||").concat(c.y);var h=L6(f,e,n,c,o),d=L6(c,t,i,f,o);h.forEach(function(D){delete u[D.id]}),d.forEach(function(D){delete u[D.id]});for(var v={},p={},g={},m={},b={},y=new YK,x=0;x<h.length;x++){var w=h[x];v[w.id]=w,m[w.id]=0,b[w.id]=I6(w,d,o.distFunc),y.add({id:w.id,value:b[w.id]})}var E=o.maximumLoops,_,S,C,M,T,A,O=1/0,L={};for(d.forEach(function(D){L["".concat(D.x,"|||").concat(D.y)]=!0}),Object.keys(v).forEach(function(D){var B=v[D].id;b[B]<=O&&(O=b[B],_=v[B])});Object.keys(v).length>0&&E>0;){var N=y.minId((E+1)%30===0);if(N)_=v[N];else break;if(L["".concat(_.x,"|||").concat(_.y)])return z4e(_,g,f,t,e,c,l);delete v[_.id],y.remove(_.id),p[_.id]=!0;for(var x=0;x<o.directions.length;x++){S=o.directions[x];var P="".concat(Math.round(_.x)+S.stepX,"|||").concat(Math.round(_.y)+S.stepY);if(C={x:_.x+S.stepX,y:_.y+S.stepY,id:P},!p[P]&&(A=KT(_,C,g,f),!(A>o.maxAllowedDirectionChange)&&!u[P])){v[P]||(v[P]=C);var R=s[A];M=o.distFunc(_,C)+(isNaN(R)?l:R),T=m[_.id]+M;var G=m[P];G&&T>=G||(g[P]=_,m[P]=T,b[P]=T+I6(C,d,o.distFunc),y.add({id:P,value:b[P]}))}}E-=1}return o.fallbackRoute(e,t,n,i,o)};uV("polyline",{options:{color:gt.defaultEdge.color,size:gt.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:gt.defaultEdge.style.stroke,lineAppendWidth:gt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:gt.edgeLabel.style.fill,fontSize:gt.edgeLabel.style.fontSize,fontFamily:gt.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:U({},gt.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);n.radius===0&&delete n.radius;var i=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return t.shapeMap["edge-shape"]=i,i},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},i=$t({},t,n,e.style);e=this.getPathPoints(e),this.radius=i.radius,this.offset=i.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),l=[a];s&&(l=l.concat(s)),l.push(o);var u=e.sourceNode,f=e.targetNode,c=i.radius,h=this.options.routeCfg,d=$t({},h,e.routeCfg);d.offset=i.offset;var v=this.getPath(l,u,f,c,d,!s);(Ft(v)&&v.length<=1||tt(v)&&v.indexOf("L")===-1)&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(v="M0 0, L0 0");var p=$t({},gt.defaultEdge.style,i,{lineWidth:e.size,path:v});return p},updateShapeStyle:function(e,t){var n=t.getContainer();if(t.isVisible()){var i={stroke:e.color},a=n.shapeMap["edge-shape"]||n.find(function(x){return x.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,l=e.endPoint,u=this.getControlPoints(e),f=[s];u&&(f=f.concat(u)),f.push(l);var c=a.attr(),h=$t({},i,c,e.style),d=e.sourceNode,v=e.targetNode,p=h.radius,g=this.options.routeCfg,m=$t({},g,e.routeCfg);m.offset=h.offset;var b=this.getPath(f,d,v,p,m,!u);(Ft(b)&&b.length<=1||tt(b)&&b.indexOf("L")===-1)&&(b="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(b="M0 0, L0 0"),c.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),c.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var y=$t(i,a.attr(),{lineWidth:o,path:b},e.style);a&&a.attr(y)}},getPath:function(e,t,n,i,a,o){var s=a.offset,l=a.obstacles,u=a.simple;if(!s||e.length>2||o===!1){if(i)return O6(e,i);var f=[];return De(e,function(v,p){p===0?f.push(["M",v.x,v.y]):f.push(["L",v.x,v.y])}),f}u!==!1&&!(l!=null&&l.length)&&(u=!0);var c=u?XK(e[e.length-1],e[0],n,t,s):G4e(e[0],e[e.length-1],t,n,a);if(!c||!c.length)return"M0 0, L0 0";if(i){var h=O6(c,i);return h}c=N4e(c);var d=aa.pointsToPolygon(c);return d}},"single-edge");var P6=Hu.cloneEvent,D6=Hu.isNaN,N6=Math.abs,j4e=10,U4e=["shift","ctrl","alt","control"];const W4e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,n=+e.clientX,i=+e.clientY;if(!(D6(n)||D6(i))){var a=n-t.x,o=i-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,c=this.scalableRange;f<1&&f>-1&&(f=s*f,c=l*c),(u.minX<=s+f&&u.minX+a>s+f||u.maxX+f>=0&&u.maxX+f+a<0)&&(a=0),(u.minY<=l+c&&u.minY+o>l+c||u.maxY+c>=0&&u.maxY+c+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,n=e.originalEvent.touches,i=n[0],a=n[1];i&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,n=e.originalEvent;if(!(n&&e.name!=="touchstart"&&n.button!==0)&&!(e.name!=="touchstart"&&typeof window<"u"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var i=this.graph,a=i.getEdges(),o=0,s=a.length;o<s;o++){var l=a[o].get("group").get("children");l&&l.forEach(function(y){y.set("ori-visibility",y.get("ori-visibility")||y.get("visible")),y.hide()})}for(var u=i.getNodes(),f=0,c=u.length;f<c;f++)for(var h=u[f].getContainer(),d=h.get("children"),v=0,p=d;v<p.length;v++){var g=p[v],m=g.get("isKeyShape");m||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if(typeof window<"u"){var b=this;this.handleDOMContextMenu=function(y){return b.onMouseUp(y)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=P6(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(N6(this.origin.x-e.clientX)+N6(this.origin.y-e.clientY)<j4e)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,n;this.mousedown=!1,this.dragstart=!1;var i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(n=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(_){return _.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),f=0,c=u.length;f<c;f++){var h=u[f].get("group").get("children");h&&h.forEach(function(_){var S=_.get("ori-visibility");_.set("ori-visibility",void 0),S&&_.show()})}if(a>l)for(var d=i.getNodes(),v=0,p=d.length;v<p;v++)for(var g=d[v].getContainer(),m=g.get("children"),b=0,y=m;b<y.length;b++){var x=y[b],w=x.get("isKeyShape");if(!w){var E=x.get("ori-visibility");x.set("ori-visibility",void 0),E&&x.show()}}}if(!this.dragging){this.origin=null;return}e=P6(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,i.emit("canvas:dragend",e),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,n=e.key;n&&(U4e.indexOf(n.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(Im(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(Hi(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,f=(n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t);if(!s&&f==="node"||!l&&f==="edge"||!u&&f==="combo")return!1}return!0}},V4e={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){t.onDragEnd(e);return}e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window<"u"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,n;if(((n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag(U(U({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin(U(U({},e),this.mousedown),this)){var n=this.mousedown,i=n.item,a=n.target;if(!(!i||i.destroyed||i.hasLocked())){var o=i.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(i),a){var s=a.get("isAnchorPoint");if(s)return}var l=this.graph;this.targets=[],this.targetCombo=null;var u=l.findAllByState("node",this.selectedState),f=i.get("id"),c=u.filter(function(d){var v=d.get("id");return f===v});if(c.length===0?this.targets.push(i):u.length>1?u.forEach(function(d){var v=d.hasLocked();v||t.targets.push(d)}):this.targets.push(i),this.graph.get("enabledStack")&&this.enableStack){var h=[];this.targets.forEach(function(d){var v=d.getModel(),p=v.x,g=v.y,m=v.id;h.push({x:p,y:g,id:m})}),this.set("beforeDragNodes",h)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(d){var v=d.getEdges();v.forEach(function(p){p.isVisible()&&(t.hidenEdge[p.getID()]=!0,p.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map(function(i){t.update(i,e);var a=i.getModel().comboId;a&&(n[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,n;if(this.mousedown=!1,this.dragstart=!1,typeof window<"u"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(l){t.hidenEdge[l.getID()]&&l.show(),l.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),l=s.x,u=s.y,f=s.id;a.after.nodes.push({x:l,y:u,id:f})}),i.pushStack("update",Tr(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var n=this.graph;if(this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)n.updateCombos();else{var i=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(t)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&t.updateComboTree(n)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,n=e.item,i=t.graph,a=n.getModel().comboId,o=a?i.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=i.findById(a);t.comboActiveState&&i.setItemState(s,t.comboActiveState,!1),this.targets.map(function(l){var u=l.getModel();a!==u.comboId&&i.updateComboTree(l,a)}),i.updateCombo(s)}else this.targets.map(function(l){var u=l.getModel();u.comboId&&i.updateComboTree(l)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(i){return n.update(i,e)}):this.targets.map(function(i){return n.update(i,e,t)}))},update:function(e,t,n){var i=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-i.x+this.point[o].x,l=t.y-i.y+this.point[o].y;n&&(s+=i.x-t.x,l+=i.y-t.y);var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:Lm(function(r){var e=r.targets,t=r.graph,n=r.point,i=r.origin,a=r.evt,o=r.updateEdge,s=r.onlyChangeComboSize,l=r.updateParentCombos;e.map(function(u){var f=u.get("model"),c=u.get("id");n[c]||(n[c]={x:f.x||0,y:f.y||0});var h=a.x-i.x+n[c].x,d=a.y-i.y+n[c].y,v={x:h,y:d};o?t.updateItem(u,v,!1):u.updatePosition(v)}),s&&l(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:h,y:d})}else{var n=t.get("group"),i=dn({},Th.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,l=a.width,u=a.height,f=a.minX,c=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:f,minY:c},this.delegateRect=n.addShape("rect",{attrs:U({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var l=t[s],u=l.getBBox(),f=u.minX,c=u.minY,h=u.maxX,d=u.maxY;f<n&&(n=f),c<a&&(a=c),h>i&&(i=h),d>o&&(o=d)}var v=Math.floor(n),p=Math.floor(a),g=Math.ceil(i)-Math.floor(n),m=Math.ceil(o)-Math.floor(a);return{x:v,y:p,width:g,height:m,minX:n,minY:a}},updateParentCombos:function(e,t){var n=e||this.graph,i=t||this.targets,a={};i==null||i.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=n.findById(s))}),Object.values(a).forEach(function(o){o&&n.updateCombo(o)})}};var rb=null;const H4e={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,n=this.shouldClearStatusOnSecond;n&&(rb=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:L0(function(r,e){var t=r.item,n=e.graph;if(!(!n||n.destroyed)&&(e.item=t,!!e.shouldUpdate(r.item,{event:r,action:"activate"},e))){var i=e.shouldClearStatusOnSecond,a=t.getModel().id;if(rb===a&&i){e.throttleClearActiveState(r,e),rb=null;return}for(var o=e.activeState,s=e.inactiveState,l=n.getNodes(),u=n.getCombos(),f=n.getEdges(),c=n.get("vedges"),h=l.length,d=u.length,v=f.length,p=c.length,g=e.inactiveItems||{},m=e.activeItems||{},b=0;b<h;b++){var y=l[b],x=y.getID(),w=y.hasState("selected");e.resetSelected&&w&&n.setItemState(y,"selected",!1),m[x]&&(n.setItemState(y,o,!1),delete m[x]),s&&!g[x]&&(n.setItemState(y,s,!0),g[x]=y)}for(var b=0;b<d;b++){var E=u[b],_=E.getID(),w=E.hasState("selected");e.resetSelected&&w&&n.setItemState(E,"selected",!1),m[_]&&(n.setItemState(E,o,!1),delete m[_]),s&&!g[_]&&(n.setItemState(E,s,!0),g[_]=E)}for(var b=0;b<v;b++){var S=f[b],C=S.getID();m[C]&&(n.setItemState(S,o,!1),delete m[C]),s&&!g[C]&&(n.setItemState(S,s,!0),g[C]=S)}for(var b=0;b<p;b++){var M=c[b],T=M.getID();m[T]&&(n.setItemState(M,o,!1),delete m[T]),s&&!g[T]&&(n.setItemState(M,s,!0),g[T]=M)}if(t&&!t.destroyed){s&&(n.setItemState(t,s,!1),delete g[t.getID()]),m[t.getID()]||(n.setItemState(t,o,!0),m[t.getID()]=t);for(var A=t.getEdges(),O=A.length,b=0;b<O;b++){var S=A[b],C=S.getID(),L=void 0;S.getSource()===t?L=S.getTarget():L=S.getSource();var N=L.getID();s&&g[N]&&(n.setItemState(L,s,!1),delete g[N]),m[N]||(n.setItemState(L,o,!0),m[N]=L),g[C]&&(n.setItemState(S,s,!1),delete g[C]),m[C]||(n.setItemState(S,o,!0),m[C]=S),S.toFront()}}e.activeItems=m,e.inactiveItems=g,i&&(rb=t.getModel().id),n.emit("afteractivaterelations",{item:r.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:L0(function(r,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(r.item,{event:r,action:"deactivate"},e)){var n=e.activeState,i=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,i)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:r.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var nb=Math.min,R6=Math.max,B6=Math.abs,F6="shift",X4e=["drag","shift","ctrl","alt","control"];const Y4e={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:F6,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return X4e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=F6,console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,n=this.brush,i=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!i||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1))},clearStates:function(){var e=this,t=e.graph,n=e.selectedState,i=t.findAllByState("node",n),a=t.findAllByState("edge",n),o=t.findAllByState("combo",n);i.forEach(function(s){return t.setItemState(s,n,!1)}),a.forEach(function(s){return t.setItemState(s,n,!1)}),o.forEach(function(s){return t.setItemState(s,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,n,i,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=n&&o.centerY>=i&&o.centerY<=a},getSelectedNodes:function(e){var t=this,n=this,i=n.graph,a=n.originPoint,o=n.shouldUpdate,s=n.isBBoxCenterInRect,l=this.selectedState,u={x:e.x,y:e.y},f=i.getPointByCanvas(a.x,a.y),c=nb(u.x,f.x),h=R6(u.x,f.x),d=nb(u.y,f.y),v=R6(u.y,f.y),p=[],g=[];i.getNodes().forEach(function(y){if(y.isVisible()&&s(y,c,h,d,v)&&o(y,"select",t)){p.push(y);var x=y.getModel();g.push(x.id),i.setItemState(y,l,!0)}});var m=[];this.includeEdges&&p.forEach(function(y){var x=y.getOutEdges();x.forEach(function(w){if(w.isVisible()){var E=w.getModel(),_=E.source,S=E.target;g.includes(_)&&g.includes(S)&&o(w,"select",t)&&(m.push(w),i.setItemState(w,t.selectedState,!0))}})});var b=[];this.includeCombos&&i.getCombos().forEach(function(y){if(y.isVisible()&&s(y,c,h,d,v)&&o(y,"select",t)){b.push(y);var x=y.getModel();g.push(x.id),i.setItemState(y,l,!0)}}),this.selectedEdges=m,this.selectedNodes=p,this.selectedCombos=b,this.onSelect&&this.onSelect(p,m,b),i.emit("nodeselectchange",{selectedItems:{nodes:p,edges:m,combos:b},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:B6(e.canvasX-t.x),height:B6(e.canvasY-t.y),x:nb(e.canvasX,t.x),y:nb(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),i=t.toLowerCase();i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var $6="shift",K4e=["shift","ctrl","alt","control"];const q4e={getDefaultCfg:function(){return{multiple:!0,trigger:$6,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return K4e.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=$6,console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,n=e.item;if(!(!n||n.destroyed)){var i=n.getType(),a=t.graph,o=t.keydown,s=t.multiple,l=t.shouldUpdate,u=t.shouldBegin;if(u(e,t)){if(!o||!s){var f=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));De(f,function(p){p!==n&&a.setItemState(p,t.selectedState,!1)})}var c=function(){switch(i){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!c){var h=a.findAllByState("node",t.selectedState),d=a.findAllByState("edge",t.selectedState),v=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:h,edges:d,combos:v},select:!1});return}if(n.hasState(t.selectedState)){l(e,t)&&a.setItemState(n,t.selectedState,!1);var h=a.findAllByState("node",t.selectedState),d=a.findAllByState("edge",t.selectedState),v=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:v},select:!1})}else{l(e,t)&&a.setItemState(n,t.selectedState,!0);var h=a.findAllByState("node",t.selectedState),d=a.findAllByState("edge",t.selectedState),v=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:v},select:!0})}}}},onCanvasClick:function(e){var t=this,n=this,i=n.graph,a=n.shouldBegin;if(a(e,this)){var o=i.findAllByState("node",this.selectedState);De(o,function(u){i.setItemState(u,t.selectedState,!1)});var s=i.findAllByState("edge",this.selectedState);De(s,function(u){i.setItemState(u,t.selectedState,!1)});var l=i.findAllByState("combo",this.selectedState);De(l,function(u){i.setItemState(u,t.selectedState,!1)}),i.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}};var Z4e=as,ib=.05;const Q4e={getDefaultCfg:function(){return this.isFireFox=gK()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],i=t[1];e.preventDefault(),i&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,n=t[0],i=t[1];if(i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(p,g){return Math.hypot(g.x-p.x,g.y-p.y)},o=a({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var f=this.get("animate"),c=this.get("animateCfg"),h=this.graph.get("canvas"),d=h.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:d.x,y:d.y},f,c),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,n=this,i=n.graph,a=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=this.get("sensitivity"),u=i.getZoom(),f=u,c=u;this.isFireFox?e.deltaY>0||e.wheelDelta<0?f=1-ib*l:f=1/(1-ib*l):e.wheelDelta<0?f=1-ib*l:f=1/(1-ib*l),c=u*f;var h=this.get("minZoom")||i.get("minZoom"),d=this.get("maxZoom")||i.get("maxZoom");c>d?c=d:c<h&&(c=h);var v=this.get("enableOptimize");if(v){var p=this.get("optimizeZoom"),g=this.get("optimized"),m=i.getNodes(),b=i.getEdges(),y=m.length,x=b.length;if(!g){for(var w=0;w<y;w++){var E=m[w];if(!E.destroyed)for(var _=E.get("group").get("children"),S=_.length,C=0;C<S;C++){var M=_[C];!M.destoryed&&!M.get("isKeyShape")&&(M.set("ori-visibility",M.get("ori-visibility")||M.get("visible")),M.hide())}}for(var T=0;T<x;T++)for(var A=b[T],_=A.get("group").get("children"),S=_.length,C=0;C<S;C++){var M=_[C];M.set("ori-visibility",M.get("ori-visibility")||M.get("visible")),M.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var O=setTimeout(function(){var z=i.getZoom(),F=t.get("optimized");if(F){t.set("optimized",!1);for(var k=0;k<y;k++){var ue=m[k],ce=ue.get("group").get("children"),X=ce.length;if(z<p){var ae=ue.getKeyShape(),Ce=ae.get("ori-visibility");ae.set("ori-visibility",void 0),Ce&&ae.show()}else for(var ke=0;ke<X;ke++){var Ke=ce[ke],Ce=Ke.get("ori-visibility");Ke.set("ori-visibility",void 0),!Ke.get("visible")&&Ce&&Ce&&Ke.show()}}for(var Et=0;Et<x;Et++){var jt=b[Et],ce=jt.get("group").get("children"),X=ce.length;if(z<p){var ae=jt.getKeyShape(),Ce=ae.get("ori-visibility");ae.set("ori-visibility",void 0),Ce&&ae.show()}else for(var ke=0;ke<X;ke++){var Ke=ce[ke];if(!Ke.get("visible")){var Ce=Ke.get("ori-visibility");Ke.set("ori-visibility",void 0),Ce&&Ke.show()}}}}},100);this.set("timeout",O)}if(u<=1){var L=void 0,N=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){L=i.findAllByState("node",a.fixState),N=i.findAllByState("edge",a.fixState);for(var P=u/c,R=L.length,G=0;G<R;G++){var E=L[G],D=E.getContainer(),B=E.getModel(),Y=E.getOriginStyle(),ee=E.getStateStyle(a.fixState),ne=E.get("shapeFactory").getShape(B.type).getStateStyle(a.fixState,E)[a.fixState];if(a.fixAll){if(c<=1){var Q=Tr(D.getMatrix());Q||(Q=[1,0,0,0,1,0,0,0,1]);var ye=E.getModel(),Le=ye.x,Fe=ye.y;Q=Z4e(Q,[["t",-Le,-Fe],["s",P,P],["t",Le,Fe]]),D.setMatrix(Q)}}else for(var _=D.get("children"),S=_.length,C=0;C<S;C++){var M=_[C],_e=void 0,Ve=void 0;if(a.fixLabel){var Xe=M.get("type");if(Xe==="text"){_e=M.attr("fontSize")||12;var vt=ee[M.get("name")],bt=ne[M.get("name")],te=vt?vt.fontSize:12,H=bt?bt.fontSize:12,de=te||H||12;if(c<=1&&M.attr("fontSize",de/c),Ve)break}}if(a.fixLineWidth&&M.get("isKeyShape")){Ve=M.attr("lineWidth")||0;var Be=ee.lineWidth||ne.lineWidth||Y.lineWidth||0;if(c<=1&&M.attr("lineWidth",Be/c),_e)break}}}for(var Ie=N.length,Pe=0;Pe<Ie;Pe++)for(var A=N[Pe],D=A.getContainer(),_=D.get("children"),B=A.getModel(),ee=A.getStateStyle(a.fixState),ne=A.get("shapeFactory").getShape(B.type).getStateStyle(a.fixState,A)[a.fixState],S=_.length,C=0;C<S;C++){var M=_[C],_e=void 0,Ve=void 0;if(a.fixLabel||a.fixAll){var Xe=M.get("type");if(Xe==="text"){_e=M.attr("fontSize")||12;var vt=ee[M.get("name")],bt=ne[M.get("name")],te=vt?vt.fontSize:12,H=bt?bt.fontSize:12,de=te||H||12;if(c<=1&&M.attr("fontSize",de/c),Ve)break}}if((a.fixLineWidth||a.fixAll)&&M.get("isKeyShape")){Ve=M.attr("lineWidth")||0;var Be=ee.lineWidth||ne.lineWidth||1;if(c<=1&&M.attr("lineWidth",Be/c),_e)break}}}}var Ye=this.get("animate"),V=this.get("animateCfg");i.zoomTo(c,{x:s.x,y:s.y},Ye,V),i.emit("wheelzoom",e)}}},KK={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var n=this.formatText(e.item.get("model"),e);t.innerHTML=n,Mr(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Mr(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this,i=n.width,a=n.height,o=n.container,s=n.graph;if(!t(e,this)){Mr(o,{visibility:"hidden"});return}var l=s.getPointByClient(e.clientX,e.clientY),u=s.getCanvasByPoint(l.x,l.y),f=u.x,c=u.y,h=o.getBoundingClientRect();f>i/2?f-=h.width:f+=this.offset,c>a/2?c-=h.height:c+=this.offset;var d="".concat(f,"px"),v="".concat(c,"px");Mr(this.container,{left:d,top:v,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var n=_n('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(n),Mr(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},J4e=U({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},KK),eFe=U({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},KK);var z6="click",tFe=["click","dblclick"];const rFe={getDefaultCfg:function(){return{trigger:z6,onChange:function(){}}},getEvents:function(){var e,t;return tFe.includes(this.trigger)?t=this.trigger:(t=z6,console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var n=this.graph.findDataById(t.get("id"));if(n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;this.shouldBegin(e,a,this)&&(n.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}};var nFe=Hu.calculationItemsBBox,iFe=function r(e,t){if(t(e)!==!1&&e){var n=e.get("combos");if(n.length===0)return!1;De(n,function(i){r(i,t)})}};const aFe={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var n=t.getType();return n==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,n=this.graph,i=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(u){var f=u.get("id");return o===f});s.length===0?this.targets.push(i):this.targets=a;var l=[];this.targets.forEach(function(u){var f=u.getModel(),c=f.x,h=f.y,d=f.id;l.push({x:c,y:h,id:d})}),this.set("beforeDragItems",l),this.activeState&&this.targets.map(function(u){var f=u.getModel();if(f.parentId){var c=n.findById(f.parentId);c&&n.setItemState(c,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],iFe(i,function(u){if(u.destroyed)return!1;var f=u.getModel();return t.currentItemChildCombos.push(f.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,i=e.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,f=s.width,c=o.filter(function(h){var d=h.getModel();return a.parentId,d.id!==a.id&&!t.currentItemChildCombos.includes(d.id)});c.map(function(h){var d=h.getBBox(),v=d.centerX,p=d.centerY,g=d.width,m=l-v,b=u-p,y=2*Math.sqrt(m*m+b*b);f+g-y>.8*f?n.setItemState(h,t.activeState,!0):n.setItemState(h,t.activeState,!1)})}De(this.targets,function(h){t.updateCombo(h,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var n=this;(this.enableDelegate||t)&&De(this.targets,function(i){n.updateCombo(i,e,t)})},onDrop:function(e){var t=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&i.setItemState(n,t.activeState,!1),t.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id,!1)):i.updateCombo(n)}),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,i=e.item,a=i.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var l=n.findById(a);n.setItemState(l,this.activeState,!1)}this.targets.map(function(u){t.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(s=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a,!1))})}else this.targets.map(function(u){if(t.onlyChangeComboSize)n.updateCombo(u);else{var f=u.getModel();f.comboId&&n.updateComboTree(u,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(t.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&i.setItemState(e,this.activeState,!1),!e){var o=i.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(l){if(!n.onlyChangeComboSize)i.updateComboTree(l,void 0,o);else{i.updateCombo(l);var u=l.getModel(),f=u.x,c=u.y,h=u.id;s.after.combos.push({x:f,y:c,id:h}),i.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,n){var i=this;if(n===void 0&&(n={}),t(e,n)!==!1&&e){var a=e.get("combos");De(a,function(s){i.traverse(s,t,n)});var o=e.get("nodes");De(o,function(s){i.traverse(s,t,n)})}},updateCombo:function(e,t,n){this.updateSingleItem(e,t,n);var i={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},i),Object.values(i).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,n){var i=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var l=t.x-i.x+this.point[s].x,u=t.y-i.y+this.point[s].y;n&&(l+=i.x-t.x,u+=i.y-t.y),a.updateItem(e,{x:l,y:u},!1)},getParentCombo:function(e){var t=this.graph;if(e){var n=t.findById(e);if(n)return n}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:h,y:d})}else{var n=t.get("delegateGroup"),i=null;this.targets.length>1?i=nFe(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,f=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:f};var c=U(U({},Th.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:U({width:i.width,height:i.height,x:i.x,y:i.y},c),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,n=e.targets,i={};n==null||n.forEach(function(a){var o=a.getModel().parentId;o&&(i[o]=t.findById(o))}),Object.values(i).forEach(function(a){a&&t.updateCombo(a)})}};var G6="dblclick",oFe=["click","dblclick"];const sFe={getDefaultCfg:function(){return{trigger:G6,relayout:!0}},getEvents:function(){var e,t;return oFe.includes(this.trigger)?t=this.trigger:(t=G6,console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,n=this,i=n.graph,a=n.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}};var lFe=Hu.isPolygonsIntersect,uFe=Hu.pathToPoints,j6="shift",fFe=["drag","shift","ctrl","alt","control"],cFe=function(e,t){var n,i=e.getKeyShape();if(e.get("type")==="path")n=uFe(i.attr("path"));else{var a=i.getCanvasBBox();n=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return lFe(t,n)};const hFe={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:j6,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return fFe.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=j6,console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,n=e.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(n,i){i===0?t.push(["M",n.x,n.y]):t.push(["L",n.x,n.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,n=t.graph,i=t.selectedState,a=t.shouldDeselect,o=n.findAllByState("node",i),s=n.findAllByState("edge",i);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(l){return n.setItemState(l,i,!1)}),s.forEach(function(l){return n.setItemState(l,i,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,n=t.graph,i=t.shouldUpdate,a=this.points.map(function(f){return[n.getCanvasByPoint(f.x,f.y).x,n.getCanvasByPoint(f.x,f.y).y]}),o=this.selectedState,s=[],l=[];n.getNodes().forEach(function(f){if(f.isVisible()&&cFe(f,a)&&i(f,"select",e)){s.push(f);var c=f.getModel();l.push(c.id),n.setItemState(f,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(f){var c=f.getOutEdges();c.forEach(function(h){if(h.isVisible()){var d=h.getModel(),v=d.source,p=d.target;l.includes(v)&&l.includes(p)&&i(h,"select",e)&&(u.push(h),n.setItemState(h,e.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:U({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var U6="click",dFe=["click","drag"],W6=void 0,vFe=["shift","ctrl","control","alt","meta",void 0];const pFe={getDefaultCfg:function(){return{trigger:U6,key:W6,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;dFe.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=U6,console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),e.key&&vFe.indexOf(e.key.toLowerCase())===-1&&(e.trigger=W6,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var n=e.item;(!n||n.getID()===t.source||n.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var n=e.item,i=t.graph,a=n.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&Ln(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var l=U({target:a.id},s);if(t.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(t.edge,l,!1),i.get("enabledStack")){var u=U(U({},t.edge.getModel()),{itemType:"edge"}),f={};f.edges=[u],i.pushStack("add",{before:{},after:f})}i.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&Ln(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=i.addItem("edge",U({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var n={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:n},!1)}},cancelCreating:function(e){var t,n,i=this;if(!(i.key&&!i.keydown)){var a=i.graph,o=e.item;if(i.addingEdge&&(i.edge===o||!((n=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||n===void 0)&&n.call(t))){i.edge&&!i.edge.destroyed&&a.removeItem(i.edge,!1),i.edge=null,i.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var V6="ctrl",gFe=["shift","ctrl","alt","control"],mFe="1";const yFe={getDefaultCfg:function(){return{trigger:V6,combinedKey:mFe,functionName:"fitView",functionParams:[]}},getEvents:function(){return gFe.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=V6,console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger,"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),i=t.toLowerCase();this.triggerKeydown||(i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName,"' 不合法，它不是 Graph 的一个函数名")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var bFe=["shift","ctrl","alt","control","meta"];const xFe={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||bFe.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var n=this.graph,i=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];i.includes("control")&&i.push("ctrl");var a=i.some(function(B){return e["".concat(B,"Key")]});if(a){var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=n.getZoom();e.wheelDelta>0?l=l+l*.05:l=l-l*.05,n.zoomTo(l,{x:s.x,y:s.y})}else{var u=e.deltaX||e.movementX,f=e.deltaY||e.movementY;!f&&navigator.userAgent.indexOf("Firefox")>-1&&(f=-e.wheelDelta*125/3);var c=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),v=this.scalableRange,p=this.scalableRange;v<1&&v>-1&&(v=c*v,p=h*p);var g=d.minX,m=d.maxX,b=d.minY,y=d.maxY;u>0?m<-v?u=0:m-u<-v&&(u=m+v):u<0&&(g>c+v?u=0:g-u>c+v&&(u=g-(c+v))),f>0?y<-p?f=0:y-f<-p&&(f=y+p):f<0&&(b>h+p?f=0:b-f>h+p&&(f=b-(h+p))),this.get("direction")==="x"?f=0:this.get("direction")==="y"&&(u=0),n.translate(-u,-f)}e.preventDefault();var x=this.get("enableOptimize");if(x){var w=this.get("optimizeZoom"),E=this.get("optimized"),_=n.getNodes(),S=n.getEdges(),C=_.length,M=S.length;if(!E){for(var T=0;T<C;T++){var A=_[T];if(!A.destroyed)for(var O=A.get("group").get("children"),L=O.length,N=0;N<L;N++){var P=O[N];!P.destoryed&&!P.get("isKeyShape")&&(P.set("ori-visibility",P.get("ori-visibility")||P.get("visible")),P.hide())}}for(var R=0;R<M;R++)for(var G=S[R],O=G.get("group").get("children"),L=O.length,N=0;N<L;N++){var P=O[N];P.set("ori-visibility",P.get("ori-visibility")||P.get("visible")),P.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var D=setTimeout(function(){var B=n.getZoom(),Y=t.get("optimized");if(Y){t.set("optimized",!1);for(var ee=0;ee<C;ee++){var ne=_[ee],Q=ne.get("group").get("children"),ye=Q.length;if(B<w){var Le=ne.getKeyShape(),Fe=Le.get("ori-visibility");Fe&&Le.show()}else for(var _e=0;_e<ye;_e++){var Ve=Q[_e],Fe=Ve.get("ori-visibility");!Ve.get("visible")&&Fe&&Fe&&Ve.show()}}for(var Xe=0;Xe<M;Xe++){var vt=S[Xe],Q=vt.get("group").get("children"),ye=Q.length;if(B<w){var Le=vt.getKeyShape(),Fe=Le.get("ori-visibility");Fe&&Le.show()}else for(var _e=0;_e<ye;_e++){var Ve=Q[_e];if(!Ve.get("visible")){var Fe=Ve.get("ori-visibility");Fe&&Ve.show()}}}}},100);this.set("timeout",D)}}},allowDrag:function(e){var t,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(Im(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(Hi(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,f=(n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t);if(!s&&f==="node"||!l&&f==="edge"||!u&&f==="combo")return!1}return!0}};var wFe={"drag-canvas":W4e,"zoom-canvas":Q4e,"drag-node":V4e,"activate-relations":H4e,"brush-select":Y4e,"click-select":q4e,"lasso-select":hFe,tooltip:J4e,"edge-tooltip":eFe,"collapse-expand":rFe,"drag-combo":aFe,"collapse-expand-combo":sFe,"create-edge":pFe,"shortcuts-call":yFe,"scroll-canvas":xFe};De(wFe,function(r,e){fV(e,r)});var EFe=U(U({},$de),Vye),_Fe=po.Fisheye,SFe=po.TimeBar,MFe=po.ImageMinimap,CFe=po.EdgeFilterLens,AFe=po.SnapLine,TFe=po.Annotation;const OFe={version:Th.version,Graph:yK,TreeGraph:N3e,Util:Hu,Layout:Or.Layouts,TreeLayout:E3e,registerLayout:_3e,Global:Th,registerBehavior:fV,registerCombo:A0e,registerEdge:uV,registerNode:zu,Minimap:po.Minimap,Grid:po.Grid,Bundling:po.Bundling,Menu:po.Menu,ToolBar:po.ToolBar,Tooltip:po.Tooltip,Legend:po.Legend,TimeBar:SFe,SnapLine:AFe,Fisheye:_Fe,ImageMinimap:MFe,EdgeFilterLens:CFe,Annotation:TFe,Algorithm:EFe,Arrow:iV,Marker:aV,Shape:vn};OFe.version="4.8.23";/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const zw=typeof window<"u",yc=(r,e=!1)=>e?Symbol.for(r):Symbol(r),kFe=(r,e,t)=>IFe({l:r,k:e,s:t}),IFe=r=>JSON.stringify(r).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ti=r=>typeof r=="number"&&isFinite(r),LFe=r=>ZK(r)==="[object Date]",ic=r=>ZK(r)==="[object RegExp]",G_=r=>Er(r)&&Object.keys(r).length===0,na=Object.assign;let H6;const _u=()=>H6||(H6=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function X6(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const PFe=Object.prototype.hasOwnProperty;function Gw(r,e){return PFe.call(r,e)}const kn=Array.isArray,En=r=>typeof r=="function",Ot=r=>typeof r=="string",Vr=r=>typeof r=="boolean",fn=r=>r!==null&&typeof r=="object",DFe=r=>fn(r)&&En(r.then)&&En(r.catch),qK=Object.prototype.toString,ZK=r=>qK.call(r),Er=r=>{if(!fn(r))return!1;const e=Object.getPrototypeOf(r);return e===null||e.constructor===Object},NFe=r=>r==null?"":kn(r)||Er(r)&&r.toString===qK?JSON.stringify(r,null,2):String(r);function RFe(r,e=""){return r.reduce((t,n,i)=>i===0?t+n:t+e+n,"")}function j_(r){let e=r;return()=>++e}function BFe(r,e){typeof console<"u"&&(console.warn("[intlify] "+r),e&&console.warn(e.stack))}const ab=r=>!fn(r)||kn(r);function yx(r,e){if(ab(r)||ab(e))throw new Error("Invalid value");const t=[{src:r,des:e}];for(;t.length;){const{src:n,des:i}=t.pop();Object.keys(n).forEach(a=>{ab(n[a])||ab(i[a])?i[a]=n[a]:t.push({src:n[a],des:i[a]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function FFe(r,e,t){return{line:r,column:e,offset:t}}function jw(r,e,t){const n={start:r,end:e};return t!=null&&(n.source=t),n}const $Fe=/\{([0-9a-zA-Z]+)\}/g;function QK(r,...e){return e.length===1&&zFe(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),r.replace($Fe,(t,n)=>e.hasOwnProperty(n)?e[n]:"")}const JK=Object.assign,Y6=r=>typeof r=="string",zFe=r=>r!==null&&typeof r=="object";function eq(r,e=""){return r.reduce((t,n,i)=>i===0?t+n:t+e+n,"")}const oP={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},GFe={[oP.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function jFe(r,e,...t){const n=QK(GFe[r]||"",...t||[]),i={message:String(n),code:r};return e&&(i.location=e),i}const hr={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},UFe={[hr.EXPECTED_TOKEN]:"Expected token: '{0}'",[hr.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[hr.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[hr.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[hr.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[hr.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[hr.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[hr.EMPTY_PLACEHOLDER]:"Empty placeholder",[hr.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[hr.INVALID_LINKED_FORMAT]:"Invalid linked format",[hr.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[hr.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[hr.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[hr.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[hr.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[hr.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Op(r,e,t={}){const{domain:n,messages:i,args:a}=t,o=QK((i||UFe)[r]||"",...a||[]),s=new SyntaxError(String(o));return s.code=r,e&&(s.location=e),s.domain=n,s}function WFe(r){throw r}const fu=" ",VFe="\r",Ea=`
`,HFe="\u2028",XFe="\u2029";function YFe(r){const e=r;let t=0,n=1,i=1,a=0;const o=_=>e[_]===VFe&&e[_+1]===Ea,s=_=>e[_]===Ea,l=_=>e[_]===XFe,u=_=>e[_]===HFe,f=_=>o(_)||s(_)||l(_)||u(_),c=()=>t,h=()=>n,d=()=>i,v=()=>a,p=_=>o(_)||l(_)||u(_)?Ea:e[_],g=()=>p(t),m=()=>p(t+a);function b(){return a=0,f(t)&&(n++,i=0),o(t)&&t++,t++,i++,e[t]}function y(){return o(t+a)&&a++,a++,e[t+a]}function x(){t=0,n=1,i=1,a=0}function w(_=0){a=_}function E(){const _=t+a;for(;_!==t;)b();a=0}return{index:c,line:h,column:d,peekOffset:v,charAt:p,currentChar:g,currentPeek:m,next:b,peek:y,reset:x,resetPeek:w,skipToPeek:E}}const cf=void 0,KFe=".",K6="'",qFe="tokenizer";function ZFe(r,e={}){const t=e.location!==!1,n=YFe(r),i=()=>n.index(),a=()=>FFe(n.line(),n.column(),n.index()),o=a(),s=i(),l={currentType:14,offset:s,startLoc:o,endLoc:o,lastType:14,lastOffset:s,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:f}=e;function c(V,z,F,...k){const ue=u();if(z.column+=F,z.offset+=F,f){const ce=t?jw(ue.startLoc,z):null,X=Op(V,ce,{domain:qFe,args:k});f(X)}}function h(V,z,F){V.endLoc=a(),V.currentType=z;const k={type:z};return t&&(k.loc=jw(V.startLoc,V.endLoc)),F!=null&&(k.value=F),k}const d=V=>h(V,14);function v(V,z){return V.currentChar()===z?(V.next(),z):(c(hr.EXPECTED_TOKEN,a(),0,z),"")}function p(V){let z="";for(;V.currentPeek()===fu||V.currentPeek()===Ea;)z+=V.currentPeek(),V.peek();return z}function g(V){const z=p(V);return V.skipToPeek(),z}function m(V){if(V===cf)return!1;const z=V.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z===95}function b(V){if(V===cf)return!1;const z=V.charCodeAt(0);return z>=48&&z<=57}function y(V,z){const{currentType:F}=z;if(F!==2)return!1;p(V);const k=m(V.currentPeek());return V.resetPeek(),k}function x(V,z){const{currentType:F}=z;if(F!==2)return!1;p(V);const k=V.currentPeek()==="-"?V.peek():V.currentPeek(),ue=b(k);return V.resetPeek(),ue}function w(V,z){const{currentType:F}=z;if(F!==2)return!1;p(V);const k=V.currentPeek()===K6;return V.resetPeek(),k}function E(V,z){const{currentType:F}=z;if(F!==8)return!1;p(V);const k=V.currentPeek()===".";return V.resetPeek(),k}function _(V,z){const{currentType:F}=z;if(F!==9)return!1;p(V);const k=m(V.currentPeek());return V.resetPeek(),k}function S(V,z){const{currentType:F}=z;if(!(F===8||F===12))return!1;p(V);const k=V.currentPeek()===":";return V.resetPeek(),k}function C(V,z){const{currentType:F}=z;if(F!==10)return!1;const k=()=>{const ce=V.currentPeek();return ce==="{"?m(V.peek()):ce==="@"||ce==="%"||ce==="|"||ce===":"||ce==="."||ce===fu||!ce?!1:ce===Ea?(V.peek(),k()):A(V,!1)},ue=k();return V.resetPeek(),ue}function M(V){p(V);const z=V.currentPeek()==="|";return V.resetPeek(),z}function T(V){const z=p(V),F=V.currentPeek()==="%"&&V.peek()==="{";return V.resetPeek(),{isModulo:F,hasSpace:z.length>0}}function A(V,z=!0){const F=(ue=!1,ce="",X=!1)=>{const ae=V.currentPeek();return ae==="{"?ce==="%"?!1:ue:ae==="@"||!ae?ce==="%"?!0:ue:ae==="%"?(V.peek(),F(ue,"%",!0)):ae==="|"?ce==="%"||X?!0:!(ce===fu||ce===Ea):ae===fu?(V.peek(),F(!0,fu,X)):ae===Ea?(V.peek(),F(!0,Ea,X)):!0},k=F();return z&&V.resetPeek(),k}function O(V,z){const F=V.currentChar();return F===cf?cf:z(F)?(V.next(),F):null}function L(V){const z=V.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===95||z===36}function N(V){return O(V,L)}function P(V){const z=V.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===95||z===36||z===45}function R(V){return O(V,P)}function G(V){const z=V.charCodeAt(0);return z>=48&&z<=57}function D(V){return O(V,G)}function B(V){const z=V.charCodeAt(0);return z>=48&&z<=57||z>=65&&z<=70||z>=97&&z<=102}function Y(V){return O(V,B)}function ee(V){let z="",F="";for(;z=D(V);)F+=z;return F}function ne(V){g(V);const z=V.currentChar();return z!=="%"&&c(hr.EXPECTED_TOKEN,a(),0,z),V.next(),"%"}function Q(V){let z="";for(;;){const F=V.currentChar();if(F==="{"||F==="}"||F==="@"||F==="|"||!F)break;if(F==="%")if(A(V))z+=F,V.next();else break;else if(F===fu||F===Ea)if(A(V))z+=F,V.next();else{if(M(V))break;z+=F,V.next()}else z+=F,V.next()}return z}function ye(V){g(V);let z="",F="";for(;z=R(V);)F+=z;return V.currentChar()===cf&&c(hr.UNTERMINATED_CLOSING_BRACE,a(),0),F}function Le(V){g(V);let z="";return V.currentChar()==="-"?(V.next(),z+=`-${ee(V)}`):z+=ee(V),V.currentChar()===cf&&c(hr.UNTERMINATED_CLOSING_BRACE,a(),0),z}function Fe(V){return V!==K6&&V!==Ea}function _e(V){g(V),v(V,"'");let z="",F="";for(;z=O(V,Fe);)z==="\\"?F+=Ve(V):F+=z;const k=V.currentChar();return k===Ea||k===cf?(c(hr.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,a(),0),k===Ea&&(V.next(),v(V,"'")),F):(v(V,"'"),F)}function Ve(V){const z=V.currentChar();switch(z){case"\\":case"'":return V.next(),`\\${z}`;case"u":return Xe(V,z,4);case"U":return Xe(V,z,6);default:return c(hr.UNKNOWN_ESCAPE_SEQUENCE,a(),0,z),""}}function Xe(V,z,F){v(V,z);let k="";for(let ue=0;ue<F;ue++){const ce=Y(V);if(!ce){c(hr.INVALID_UNICODE_ESCAPE_SEQUENCE,a(),0,`\\${z}${k}${V.currentChar()}`);break}k+=ce}return`\\${z}${k}`}function vt(V){return V!=="{"&&V!=="}"&&V!==fu&&V!==Ea}function bt(V){g(V);let z="",F="";for(;z=O(V,vt);)F+=z;return F}function te(V){let z="",F="";for(;z=N(V);)F+=z;return F}function H(V){const z=F=>{const k=V.currentChar();return k==="{"||k==="%"||k==="@"||k==="|"||k==="("||k===")"||!k||k===fu?F:(F+=k,V.next(),z(F))};return z("")}function de(V){g(V);const z=v(V,"|");return g(V),z}function Be(V,z){let F=null;switch(V.currentChar()){case"{":return z.braceNest>=1&&c(hr.NOT_ALLOW_NEST_PLACEHOLDER,a(),0),V.next(),F=h(z,2,"{"),g(V),z.braceNest++,F;case"}":return z.braceNest>0&&z.currentType===2&&c(hr.EMPTY_PLACEHOLDER,a(),0),V.next(),F=h(z,3,"}"),z.braceNest--,z.braceNest>0&&g(V),z.inLinked&&z.braceNest===0&&(z.inLinked=!1),F;case"@":return z.braceNest>0&&c(hr.UNTERMINATED_CLOSING_BRACE,a(),0),F=Ie(V,z)||d(z),z.braceNest=0,F;default:{let ue=!0,ce=!0,X=!0;if(M(V))return z.braceNest>0&&c(hr.UNTERMINATED_CLOSING_BRACE,a(),0),F=h(z,1,de(V)),z.braceNest=0,z.inLinked=!1,F;if(z.braceNest>0&&(z.currentType===5||z.currentType===6||z.currentType===7))return c(hr.UNTERMINATED_CLOSING_BRACE,a(),0),z.braceNest=0,Pe(V,z);if(ue=y(V,z))return F=h(z,5,ye(V)),g(V),F;if(ce=x(V,z))return F=h(z,6,Le(V)),g(V),F;if(X=w(V,z))return F=h(z,7,_e(V)),g(V),F;if(!ue&&!ce&&!X)return F=h(z,13,bt(V)),c(hr.INVALID_TOKEN_IN_PLACEHOLDER,a(),0,F.value),g(V),F;break}}return F}function Ie(V,z){const{currentType:F}=z;let k=null;const ue=V.currentChar();switch((F===8||F===9||F===12||F===10)&&(ue===Ea||ue===fu)&&c(hr.INVALID_LINKED_FORMAT,a(),0),ue){case"@":return V.next(),k=h(z,8,"@"),z.inLinked=!0,k;case".":return g(V),V.next(),h(z,9,".");case":":return g(V),V.next(),h(z,10,":");default:return M(V)?(k=h(z,1,de(V)),z.braceNest=0,z.inLinked=!1,k):E(V,z)||S(V,z)?(g(V),Ie(V,z)):_(V,z)?(g(V),h(z,12,te(V))):C(V,z)?(g(V),ue==="{"?Be(V,z)||k:h(z,11,H(V))):(F===8&&c(hr.INVALID_LINKED_FORMAT,a(),0),z.braceNest=0,z.inLinked=!1,Pe(V,z))}}function Pe(V,z){let F={type:14};if(z.braceNest>0)return Be(V,z)||d(z);if(z.inLinked)return Ie(V,z)||d(z);switch(V.currentChar()){case"{":return Be(V,z)||d(z);case"}":return c(hr.UNBALANCED_CLOSING_BRACE,a(),0),V.next(),h(z,3,"}");case"@":return Ie(V,z)||d(z);default:{if(M(V))return F=h(z,1,de(V)),z.braceNest=0,z.inLinked=!1,F;const{isModulo:ue,hasSpace:ce}=T(V);if(ue)return ce?h(z,0,Q(V)):h(z,4,ne(V));if(A(V))return h(z,0,Q(V));break}}return F}function Ye(){const{currentType:V,offset:z,startLoc:F,endLoc:k}=l;return l.lastType=V,l.lastOffset=z,l.lastStartLoc=F,l.lastEndLoc=k,l.offset=i(),l.startLoc=a(),n.currentChar()===cf?h(l,14):Pe(n,l)}return{nextToken:Ye,currentOffset:i,currentPosition:a,context:u}}const QFe="parser",JFe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function e6e(r,e,t){switch(r){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(e||t,16);return n<=55295||n>=57344?String.fromCodePoint(n):"�"}}}function t6e(r={}){const e=r.location!==!1,{onError:t,onWarn:n}=r;function i(y,x,w,E,..._){const S=y.currentPosition();if(S.offset+=E,S.column+=E,t){const C=e?jw(w,S):null,M=Op(x,C,{domain:QFe,args:_});t(M)}}function a(y,x,w,E,..._){const S=y.currentPosition();if(S.offset+=E,S.column+=E,n){const C=e?jw(w,S):null;n(jFe(x,C,_))}}function o(y,x,w){const E={type:y};return e&&(E.start=x,E.end=x,E.loc={start:w,end:w}),E}function s(y,x,w,E){E&&(y.type=E),e&&(y.end=x,y.loc&&(y.loc.end=w))}function l(y,x){const w=y.context(),E=o(3,w.offset,w.startLoc);return E.value=x,s(E,y.currentOffset(),y.currentPosition()),E}function u(y,x){const w=y.context(),{lastOffset:E,lastStartLoc:_}=w,S=o(5,E,_);return S.index=parseInt(x,10),y.nextToken(),s(S,y.currentOffset(),y.currentPosition()),S}function f(y,x,w){const E=y.context(),{lastOffset:_,lastStartLoc:S}=E,C=o(4,_,S);return C.key=x,w===!0&&(C.modulo=!0),y.nextToken(),s(C,y.currentOffset(),y.currentPosition()),C}function c(y,x){const w=y.context(),{lastOffset:E,lastStartLoc:_}=w,S=o(9,E,_);return S.value=x.replace(JFe,e6e),y.nextToken(),s(S,y.currentOffset(),y.currentPosition()),S}function h(y){const x=y.nextToken(),w=y.context(),{lastOffset:E,lastStartLoc:_}=w,S=o(8,E,_);return x.type!==12?(i(y,hr.UNEXPECTED_EMPTY_LINKED_MODIFIER,w.lastStartLoc,0),S.value="",s(S,E,_),{nextConsumeToken:x,node:S}):(x.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ds(x)),S.value=x.value||"",s(S,y.currentOffset(),y.currentPosition()),{node:S})}function d(y,x){const w=y.context(),E=o(7,w.offset,w.startLoc);return E.value=x,s(E,y.currentOffset(),y.currentPosition()),E}function v(y){const x=y.context(),w=o(6,x.offset,x.startLoc);let E=y.nextToken();if(E.type===9){const _=h(y);w.modifier=_.node,E=_.nextConsumeToken||y.nextToken()}switch(E.type!==10&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(E)),E=y.nextToken(),E.type===2&&(E=y.nextToken()),E.type){case 11:E.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(E)),w.key=d(y,E.value||"");break;case 5:E.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(E)),w.key=f(y,E.value||"");break;case 6:E.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(E)),w.key=u(y,E.value||"");break;case 7:E.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(E)),w.key=c(y,E.value||"");break;default:{i(y,hr.UNEXPECTED_EMPTY_LINKED_KEY,x.lastStartLoc,0);const _=y.context(),S=o(7,_.offset,_.startLoc);return S.value="",s(S,_.offset,_.startLoc),w.key=S,s(w,_.offset,_.startLoc),{nextConsumeToken:E,node:w}}}return s(w,y.currentOffset(),y.currentPosition()),{node:w}}function p(y){const x=y.context(),w=x.currentType===1?y.currentOffset():x.offset,E=x.currentType===1?x.endLoc:x.startLoc,_=o(2,w,E);_.items=[];let S=null,C=null;do{const A=S||y.nextToken();switch(S=null,A.type){case 0:A.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(A)),_.items.push(l(y,A.value||""));break;case 6:A.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(A)),_.items.push(u(y,A.value||""));break;case 4:C=!0;break;case 5:A.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(A)),_.items.push(f(y,A.value||"",!!C)),C&&(a(y,oP.USE_MODULO_SYNTAX,x.lastStartLoc,0,ds(A)),C=null);break;case 7:A.value==null&&i(y,hr.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,ds(A)),_.items.push(c(y,A.value||""));break;case 8:{const O=v(y);_.items.push(O.node),S=O.nextConsumeToken||null;break}}}while(x.currentType!==14&&x.currentType!==1);const M=x.currentType===1?x.lastOffset:y.currentOffset(),T=x.currentType===1?x.lastEndLoc:y.currentPosition();return s(_,M,T),_}function g(y,x,w,E){const _=y.context();let S=E.items.length===0;const C=o(1,x,w);C.cases=[],C.cases.push(E);do{const M=p(y);S||(S=M.items.length===0),C.cases.push(M)}while(_.currentType!==14);return S&&i(y,hr.MUST_HAVE_MESSAGES_IN_PLURAL,w,0),s(C,y.currentOffset(),y.currentPosition()),C}function m(y){const x=y.context(),{offset:w,startLoc:E}=x,_=p(y);return x.currentType===14?_:g(y,w,E,_)}function b(y){const x=ZFe(y,JK({},r)),w=x.context(),E=o(0,w.offset,w.startLoc);return e&&E.loc&&(E.loc.source=y),E.body=m(x),r.onCacheKey&&(E.cacheKey=r.onCacheKey(y)),w.currentType!==14&&i(x,hr.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,y[w.offset]||""),s(E,x.currentOffset(),x.currentPosition()),E}return{parse:b}}function ds(r){if(r.type===14)return"EOF";const e=(r.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function r6e(r,e={}){const t={ast:r,helpers:new Set};return{context:()=>t,helper:a=>(t.helpers.add(a),a)}}function q6(r,e){for(let t=0;t<r.length;t++)sP(r[t],e)}function sP(r,e){switch(r.type){case 1:q6(r.cases,e),e.helper("plural");break;case 2:q6(r.items,e);break;case 6:{sP(r.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function n6e(r,e={}){const t=r6e(r);t.helper("normalize"),r.body&&sP(r.body,t);const n=t.context();r.helpers=Array.from(n.helpers)}function i6e(r){const e=r.body;return e.type===2?Z6(e):e.cases.forEach(t=>Z6(t)),r}function Z6(r){if(r.items.length===1){const e=r.items[0];(e.type===3||e.type===9)&&(r.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<r.items.length;t++){const n=r.items[t];if(!(n.type===3||n.type===9)||n.value==null)break;e.push(n.value)}if(e.length===r.items.length){r.static=eq(e);for(let t=0;t<r.items.length;t++){const n=r.items[t];(n.type===3||n.type===9)&&delete n.value}}}}const a6e="minifier";function rv(r){switch(r.t=r.type,r.type){case 0:{const e=r;rv(e.body),e.b=e.body,delete e.body;break}case 1:{const e=r,t=e.cases;for(let n=0;n<t.length;n++)rv(t[n]);e.c=t,delete e.cases;break}case 2:{const e=r,t=e.items;for(let n=0;n<t.length;n++)rv(t[n]);e.i=t,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=r;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=r;rv(e.key),e.k=e.key,delete e.key,e.modifier&&(rv(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=r;e.i=e.index,delete e.index;break}case 4:{const e=r;e.k=e.key,delete e.key;break}default:throw Op(hr.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:a6e,args:[r.type]})}delete r.type}const o6e="parser";function s6e(r,e){const{sourceMap:t,filename:n,breakLineCode:i,needIndent:a}=e,o=e.location!==!1,s={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:a,indentLevel:0};o&&r.loc&&(s.source=r.loc.source);const l=()=>s;function u(g,m){s.code+=g}function f(g,m=!0){const b=m?i:"";u(a?b+"  ".repeat(g):b)}function c(g=!0){const m=++s.indentLevel;g&&f(m)}function h(g=!0){const m=--s.indentLevel;g&&f(m)}function d(){f(s.indentLevel)}return{context:l,push:u,indent:c,deindent:h,newline:d,helper:g=>`_${g}`,needIndent:()=>s.needIndent}}function l6e(r,e){const{helper:t}=r;r.push(`${t("linked")}(`),rp(r,e.key),e.modifier?(r.push(", "),rp(r,e.modifier),r.push(", _type")):r.push(", undefined, _type"),r.push(")")}function u6e(r,e){const{helper:t,needIndent:n}=r;r.push(`${t("normalize")}([`),r.indent(n());const i=e.items.length;for(let a=0;a<i&&(rp(r,e.items[a]),a!==i-1);a++)r.push(", ");r.deindent(n()),r.push("])")}function f6e(r,e){const{helper:t,needIndent:n}=r;if(e.cases.length>1){r.push(`${t("plural")}([`),r.indent(n());const i=e.cases.length;for(let a=0;a<i&&(rp(r,e.cases[a]),a!==i-1);a++)r.push(", ");r.deindent(n()),r.push("])")}}function c6e(r,e){e.body?rp(r,e.body):r.push("null")}function rp(r,e){const{helper:t}=r;switch(e.type){case 0:c6e(r,e);break;case 1:f6e(r,e);break;case 2:u6e(r,e);break;case 6:l6e(r,e);break;case 8:r.push(JSON.stringify(e.value),e);break;case 7:r.push(JSON.stringify(e.value),e);break;case 5:r.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:r.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:r.push(JSON.stringify(e.value),e);break;case 3:r.push(JSON.stringify(e.value),e);break;default:throw Op(hr.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:o6e,args:[e.type]})}}const h6e=(r,e={})=>{const t=Y6(e.mode)?e.mode:"normal",n=Y6(e.filename)?e.filename:"message.intl",i=!!e.sourceMap,a=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,o=e.needIndent?e.needIndent:t!=="arrow",s=r.helpers||[],l=s6e(r,{mode:t,filename:n,sourceMap:i,breakLineCode:a,needIndent:o});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),s.length>0&&(l.push(`const { ${eq(s.map(c=>`${c}: _${c}`),", ")} } = ctx`),l.newline()),l.push("return "),rp(l,r),l.deindent(o),l.push("}"),delete r.helpers;const{code:u,map:f}=l.context();return{ast:r,code:u,map:f?f.toJSON():void 0}};function d6e(r,e={}){const t=JK({},e),n=!!t.jit,i=!!t.minify,a=t.optimize==null?!0:t.optimize,s=t6e(t).parse(r);return n?(a&&i6e(s),i&&rv(s),{ast:s,code:""}):(n6e(s,t),h6e(s,t))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function v6e(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_u().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_u().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_u().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const bc=[];bc[0]={w:[0],i:[3,0],"[":[4],o:[7]};bc[1]={w:[1],".":[2],"[":[4],o:[7]};bc[2]={w:[2],i:[3,0],0:[3,0]};bc[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};bc[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};bc[5]={"'":[4,0],o:8,l:[5,0]};bc[6]={'"':[4,0],o:8,l:[6,0]};const p6e=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function g6e(r){return p6e.test(r)}function m6e(r){const e=r.charCodeAt(0),t=r.charCodeAt(r.length-1);return e===t&&(e===34||e===39)?r.slice(1,-1):r}function y6e(r){if(r==null)return"o";switch(r.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return r;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function b6e(r){const e=r.trim();return r.charAt(0)==="0"&&isNaN(parseInt(r))?!1:g6e(e)?m6e(e):"*"+e}function x6e(r){const e=[];let t=-1,n=0,i=0,a,o,s,l,u,f,c;const h=[];h[0]=()=>{o===void 0?o=s:o+=s},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),i++},h[3]=()=>{if(i>0)i--,n=4,h[0]();else{if(i=0,o===void 0||(o=b6e(o),o===!1))return!1;h[1]()}};function d(){const v=r[t+1];if(n===5&&v==="'"||n===6&&v==='"')return t++,s="\\"+v,h[0](),!0}for(;n!==null;)if(t++,a=r[t],!(a==="\\"&&d())){if(l=y6e(a),c=bc[n],u=c[l]||c.l||8,u===8||(n=u[0],u[1]!==void 0&&(f=h[u[1]],f&&(s=a,f()===!1))))return;if(n===7)return e}}const Q6=new Map;function w6e(r,e){return fn(r)?r[e]:null}function E6e(r,e){if(!fn(r))return null;let t=Q6.get(e);if(t||(t=x6e(e),t&&Q6.set(e,t)),!t)return null;const n=t.length;let i=r,a=0;for(;a<n;){const o=i[t[a]];if(o===void 0||En(i))return null;i=o,a++}return i}const _6e=r=>r,S6e=r=>"",M6e="text",C6e=r=>r.length===0?"":RFe(r),A6e=NFe;function J6(r,e){return r=Math.abs(r),e===2?r?r>1?1:0:1:r?Math.min(r,2):0}function T6e(r){const e=Ti(r.pluralIndex)?r.pluralIndex:-1;return r.named&&(Ti(r.named.count)||Ti(r.named.n))?Ti(r.named.count)?r.named.count:Ti(r.named.n)?r.named.n:e:e}function O6e(r,e){e.count||(e.count=r),e.n||(e.n=r)}function k6e(r={}){const e=r.locale,t=T6e(r),n=fn(r.pluralRules)&&Ot(e)&&En(r.pluralRules[e])?r.pluralRules[e]:J6,i=fn(r.pluralRules)&&Ot(e)&&En(r.pluralRules[e])?J6:void 0,a=m=>m[n(t,m.length,i)],o=r.list||[],s=m=>o[m],l=r.named||{};Ti(r.pluralIndex)&&O6e(t,l);const u=m=>l[m];function f(m){const b=En(r.messages)?r.messages(m):fn(r.messages)?r.messages[m]:!1;return b||(r.parent?r.parent.message(m):S6e)}const c=m=>r.modifiers?r.modifiers[m]:_6e,h=Er(r.processor)&&En(r.processor.normalize)?r.processor.normalize:C6e,d=Er(r.processor)&&En(r.processor.interpolate)?r.processor.interpolate:A6e,v=Er(r.processor)&&Ot(r.processor.type)?r.processor.type:M6e,g={list:s,named:u,plural:a,linked:(m,...b)=>{const[y,x]=b;let w="text",E="";b.length===1?fn(y)?(E=y.modifier||E,w=y.type||w):Ot(y)&&(E=y||E):b.length===2&&(Ot(y)&&(E=y||E),Ot(x)&&(w=x||w));const _=f(m)(g),S=w==="vnode"&&kn(_)&&E?_[0]:_;return E?c(E)(S,w):S},message:f,type:v,interpolate:d,normalize:h,values:na({},o,l)};return g}let rm=null;function I6e(r){rm=r}function L6e(r,e,t){rm&&rm.emit("i18n:init",{timestamp:Date.now(),i18n:r,version:e,meta:t})}const P6e=D6e("function:translate");function D6e(r){return e=>rm&&rm.emit(r,e)}const tq=oP.__EXTEND_POINT__,Kc=j_(tq),N6e={NOT_FOUND_KEY:tq,FALLBACK_TO_TRANSLATE:Kc(),CANNOT_FORMAT_NUMBER:Kc(),FALLBACK_TO_NUMBER_FORMAT:Kc(),CANNOT_FORMAT_DATE:Kc(),FALLBACK_TO_DATE_FORMAT:Kc(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Kc(),__EXTEND_POINT__:Kc()},rq=hr.__EXTEND_POINT__,qc=j_(rq),Ss={INVALID_ARGUMENT:rq,INVALID_DATE_ARGUMENT:qc(),INVALID_ISO_DATE_ARGUMENT:qc(),NOT_SUPPORT_NON_STRING_MESSAGE:qc(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:qc(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:qc(),NOT_SUPPORT_LOCALE_TYPE:qc(),__EXTEND_POINT__:qc()};function El(r){return Op(r,null,void 0)}function lP(r,e){return e.locale!=null?e8(e.locale):e8(r.locale)}let QM;function e8(r){if(Ot(r))return r;if(En(r)){if(r.resolvedOnce&&QM!=null)return QM;if(r.constructor.name==="Function"){const e=r();if(DFe(e))throw El(Ss.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return QM=e}else throw El(Ss.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw El(Ss.NOT_SUPPORT_LOCALE_TYPE)}function R6e(r,e,t){return[...new Set([t,...kn(e)?e:fn(e)?Object.keys(e):Ot(e)?[e]:[t]])]}function nq(r,e,t){const n=Ot(t)?t:np,i=r;i.__localeChainCache||(i.__localeChainCache=new Map);let a=i.__localeChainCache.get(n);if(!a){a=[];let o=[t];for(;kn(o);)o=t8(a,o,e);const s=kn(e)||!Er(e)?e:e.default?e.default:null;o=Ot(s)?[s]:s,kn(o)&&t8(a,o,!1),i.__localeChainCache.set(n,a)}return a}function t8(r,e,t){let n=!0;for(let i=0;i<e.length&&Vr(n);i++){const a=e[i];Ot(a)&&(n=B6e(r,e[i],t))}return n}function B6e(r,e,t){let n;const i=e.split("-");do{const a=i.join("-");n=F6e(r,a,t),i.splice(-1,1)}while(i.length&&n===!0);return n}function F6e(r,e,t){let n=!1;if(!r.includes(e)&&(n=!0,e)){n=e[e.length-1]!=="!";const i=e.replace(/!/g,"");r.push(i),(kn(t)||Er(t))&&t[i]&&(n=t[i])}return n}const $6e="9.13.1",U_=-1,np="en-US",r8="",n8=r=>`${r.charAt(0).toLocaleUpperCase()}${r.substr(1)}`;function z6e(){return{upper:(r,e)=>e==="text"&&Ot(r)?r.toUpperCase():e==="vnode"&&fn(r)&&"__v_isVNode"in r?r.children.toUpperCase():r,lower:(r,e)=>e==="text"&&Ot(r)?r.toLowerCase():e==="vnode"&&fn(r)&&"__v_isVNode"in r?r.children.toLowerCase():r,capitalize:(r,e)=>e==="text"&&Ot(r)?n8(r):e==="vnode"&&fn(r)&&"__v_isVNode"in r?n8(r.children):r}}let iq;function i8(r){iq=r}let aq;function G6e(r){aq=r}let oq;function j6e(r){oq=r}let sq=null;const U6e=r=>{sq=r},W6e=()=>sq;let lq=null;const a8=r=>{lq=r},V6e=()=>lq;let o8=0;function H6e(r={}){const e=En(r.onWarn)?r.onWarn:BFe,t=Ot(r.version)?r.version:$6e,n=Ot(r.locale)||En(r.locale)?r.locale:np,i=En(n)?np:n,a=kn(r.fallbackLocale)||Er(r.fallbackLocale)||Ot(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:i,o=Er(r.messages)?r.messages:{[i]:{}},s=Er(r.datetimeFormats)?r.datetimeFormats:{[i]:{}},l=Er(r.numberFormats)?r.numberFormats:{[i]:{}},u=na({},r.modifiers||{},z6e()),f=r.pluralRules||{},c=En(r.missing)?r.missing:null,h=Vr(r.missingWarn)||ic(r.missingWarn)?r.missingWarn:!0,d=Vr(r.fallbackWarn)||ic(r.fallbackWarn)?r.fallbackWarn:!0,v=!!r.fallbackFormat,p=!!r.unresolving,g=En(r.postTranslation)?r.postTranslation:null,m=Er(r.processor)?r.processor:null,b=Vr(r.warnHtmlMessage)?r.warnHtmlMessage:!0,y=!!r.escapeParameter,x=En(r.messageCompiler)?r.messageCompiler:iq,w=En(r.messageResolver)?r.messageResolver:aq||w6e,E=En(r.localeFallbacker)?r.localeFallbacker:oq||R6e,_=fn(r.fallbackContext)?r.fallbackContext:void 0,S=r,C=fn(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,M=fn(S.__numberFormatters)?S.__numberFormatters:new Map,T=fn(S.__meta)?S.__meta:{};o8++;const A={version:t,cid:o8,locale:n,fallbackLocale:a,messages:o,modifiers:u,pluralRules:f,missing:c,missingWarn:h,fallbackWarn:d,fallbackFormat:v,unresolving:p,postTranslation:g,processor:m,warnHtmlMessage:b,escapeParameter:y,messageCompiler:x,messageResolver:w,localeFallbacker:E,fallbackContext:_,onWarn:e,__meta:T};return A.datetimeFormats=s,A.numberFormats=l,A.__datetimeFormatters=C,A.__numberFormatters=M,__INTLIFY_PROD_DEVTOOLS__&&L6e(A,t,T),A}function uP(r,e,t,n,i){const{missing:a,onWarn:o}=r;if(a!==null){const s=a(r,t,e,i);return Ot(s)?s:e}else return e}function wg(r,e,t){const n=r;n.__localeChainCache=new Map,r.localeFallbacker(r,t,e)}function X6e(r,e){return r===e?!1:r.split("-")[0]===e.split("-")[0]}function Y6e(r,e){const t=e.indexOf(r);if(t===-1)return!1;for(let n=t+1;n<e.length;n++)if(X6e(r,e[n]))return!0;return!1}function JM(r){return t=>K6e(t,r)}function K6e(r,e){const t=e.b||e.body;if((t.t||t.type)===1){const n=t,i=n.c||n.cases;return r.plural(i.reduce((a,o)=>[...a,s8(r,o)],[]))}else return s8(r,t)}function s8(r,e){const t=e.s||e.static;if(t)return r.type==="text"?t:r.normalize([t]);{const n=(e.i||e.items).reduce((i,a)=>[...i,qT(r,a)],[]);return r.normalize(n)}}function qT(r,e){const t=e.t||e.type;switch(t){case 3:{const n=e;return n.v||n.value}case 9:{const n=e;return n.v||n.value}case 4:{const n=e;return r.interpolate(r.named(n.k||n.key))}case 5:{const n=e;return r.interpolate(r.list(n.i!=null?n.i:n.index))}case 6:{const n=e,i=n.m||n.modifier;return r.linked(qT(r,n.k||n.key),i?qT(r,i):void 0,r.type)}case 7:{const n=e;return n.v||n.value}case 8:{const n=e;return n.v||n.value}default:throw new Error(`unhandled node type on format message part: ${t}`)}}const uq=r=>r;let cv=Object.create(null);const ip=r=>fn(r)&&(r.t===0||r.type===0)&&("b"in r||"body"in r);function fq(r,e={}){let t=!1;const n=e.onError||WFe;return e.onError=i=>{t=!0,n(i)},{...d6e(r,e),detectError:t}}const q6e=(r,e)=>{if(!Ot(r))throw El(Ss.NOT_SUPPORT_NON_STRING_MESSAGE);{Vr(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||uq)(r),i=cv[n];if(i)return i;const{code:a,detectError:o}=fq(r,e),s=new Function(`return ${a}`)();return o?s:cv[n]=s}};function Z6e(r,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&Ot(r)){Vr(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||uq)(r),i=cv[n];if(i)return i;const{ast:a,detectError:o}=fq(r,{...e,location:!1,jit:!0}),s=JM(a);return o?s:cv[n]=s}else{const t=r.cacheKey;if(t){const n=cv[t];return n||(cv[t]=JM(r))}else return JM(r)}}const l8=()=>"",jo=r=>En(r);function u8(r,...e){const{fallbackFormat:t,postTranslation:n,unresolving:i,messageCompiler:a,fallbackLocale:o,messages:s}=r,[l,u]=ZT(...e),f=Vr(u.missingWarn)?u.missingWarn:r.missingWarn,c=Vr(u.fallbackWarn)?u.fallbackWarn:r.fallbackWarn,h=Vr(u.escapeParameter)?u.escapeParameter:r.escapeParameter,d=!!u.resolvedMessage,v=Ot(u.default)||Vr(u.default)?Vr(u.default)?a?l:()=>l:u.default:t?a?l:()=>l:"",p=t||v!=="",g=lP(r,u);h&&Q6e(u);let[m,b,y]=d?[l,g,s[g]||{}]:cq(r,l,g,o,c,f),x=m,w=l;if(!d&&!(Ot(x)||ip(x)||jo(x))&&p&&(x=v,w=x),!d&&(!(Ot(x)||ip(x)||jo(x))||!Ot(b)))return i?U_:l;let E=!1;const _=()=>{E=!0},S=jo(x)?x:hq(r,l,b,x,w,_);if(E)return x;const C=t8e(r,b,y,u),M=k6e(C),T=J6e(r,S,M),A=n?n(T,l):T;if(__INTLIFY_PROD_DEVTOOLS__){const O={timestamp:Date.now(),key:Ot(l)?l:jo(x)?x.key:"",locale:b||(jo(x)?x.locale:""),format:Ot(x)?x:jo(x)?x.source:"",message:A};O.meta=na({},r.__meta,W6e()||{}),P6e(O)}return A}function Q6e(r){kn(r.list)?r.list=r.list.map(e=>Ot(e)?X6(e):e):fn(r.named)&&Object.keys(r.named).forEach(e=>{Ot(r.named[e])&&(r.named[e]=X6(r.named[e]))})}function cq(r,e,t,n,i,a){const{messages:o,onWarn:s,messageResolver:l,localeFallbacker:u}=r,f=u(r,n,t);let c={},h,d=null;const v="translate";for(let p=0;p<f.length&&(h=f[p],c=o[h]||{},(d=l(c,e))===null&&(d=c[e]),!(Ot(d)||ip(d)||jo(d)));p++)if(!Y6e(h,f)){const g=uP(r,e,h,a,v);g!==e&&(d=g)}return[d,h,c]}function hq(r,e,t,n,i,a){const{messageCompiler:o,warnHtmlMessage:s}=r;if(jo(n)){const u=n;return u.locale=u.locale||t,u.key=u.key||e,u}if(o==null){const u=()=>n;return u.locale=t,u.key=e,u}const l=o(n,e8e(r,t,i,n,s,a));return l.locale=t,l.key=e,l.source=n,l}function J6e(r,e,t){return e(t)}function ZT(...r){const[e,t,n]=r,i={};if(!Ot(e)&&!Ti(e)&&!jo(e)&&!ip(e))throw El(Ss.INVALID_ARGUMENT);const a=Ti(e)?String(e):(jo(e),e);return Ti(t)?i.plural=t:Ot(t)?i.default=t:Er(t)&&!G_(t)?i.named=t:kn(t)&&(i.list=t),Ti(n)?i.plural=n:Ot(n)?i.default=n:Er(n)&&na(i,n),[a,i]}function e8e(r,e,t,n,i,a){return{locale:e,key:t,warnHtmlMessage:i,onError:o=>{throw a&&a(o),o},onCacheKey:o=>kFe(e,t,o)}}function t8e(r,e,t,n){const{modifiers:i,pluralRules:a,messageResolver:o,fallbackLocale:s,fallbackWarn:l,missingWarn:u,fallbackContext:f}=r,h={locale:e,modifiers:i,pluralRules:a,messages:d=>{let v=o(t,d);if(v==null&&f){const[,,p]=cq(f,d,e,s,l,u);v=o(p,d)}if(Ot(v)||ip(v)){let p=!1;const m=hq(r,d,e,v,d,()=>{p=!0});return p?l8:m}else return jo(v)?v:l8}};return r.processor&&(h.processor=r.processor),n.list&&(h.list=n.list),n.named&&(h.named=n.named),Ti(n.plural)&&(h.pluralIndex=n.plural),h}function f8(r,...e){const{datetimeFormats:t,unresolving:n,fallbackLocale:i,onWarn:a,localeFallbacker:o}=r,{__datetimeFormatters:s}=r,[l,u,f,c]=QT(...e),h=Vr(f.missingWarn)?f.missingWarn:r.missingWarn;Vr(f.fallbackWarn)?f.fallbackWarn:r.fallbackWarn;const d=!!f.part,v=lP(r,f),p=o(r,i,v);if(!Ot(l)||l==="")return new Intl.DateTimeFormat(v,c).format(u);let g={},m,b=null;const y="datetime format";for(let E=0;E<p.length&&(m=p[E],g=t[m]||{},b=g[l],!Er(b));E++)uP(r,l,m,h,y);if(!Er(b)||!Ot(m))return n?U_:l;let x=`${m}__${l}`;G_(c)||(x=`${x}__${JSON.stringify(c)}`);let w=s.get(x);return w||(w=new Intl.DateTimeFormat(m,na({},b,c)),s.set(x,w)),d?w.formatToParts(u):w.format(u)}const dq=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function QT(...r){const[e,t,n,i]=r,a={};let o={},s;if(Ot(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw El(Ss.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();s=new Date(u);try{s.toISOString()}catch{throw El(Ss.INVALID_ISO_DATE_ARGUMENT)}}else if(LFe(e)){if(isNaN(e.getTime()))throw El(Ss.INVALID_DATE_ARGUMENT);s=e}else if(Ti(e))s=e;else throw El(Ss.INVALID_ARGUMENT);return Ot(t)?a.key=t:Er(t)&&Object.keys(t).forEach(l=>{dq.includes(l)?o[l]=t[l]:a[l]=t[l]}),Ot(n)?a.locale=n:Er(n)&&(o=n),Er(i)&&(o=i),[a.key||"",s,a,o]}function c8(r,e,t){const n=r;for(const i in t){const a=`${e}__${i}`;n.__datetimeFormatters.has(a)&&n.__datetimeFormatters.delete(a)}}function h8(r,...e){const{numberFormats:t,unresolving:n,fallbackLocale:i,onWarn:a,localeFallbacker:o}=r,{__numberFormatters:s}=r,[l,u,f,c]=JT(...e),h=Vr(f.missingWarn)?f.missingWarn:r.missingWarn;Vr(f.fallbackWarn)?f.fallbackWarn:r.fallbackWarn;const d=!!f.part,v=lP(r,f),p=o(r,i,v);if(!Ot(l)||l==="")return new Intl.NumberFormat(v,c).format(u);let g={},m,b=null;const y="number format";for(let E=0;E<p.length&&(m=p[E],g=t[m]||{},b=g[l],!Er(b));E++)uP(r,l,m,h,y);if(!Er(b)||!Ot(m))return n?U_:l;let x=`${m}__${l}`;G_(c)||(x=`${x}__${JSON.stringify(c)}`);let w=s.get(x);return w||(w=new Intl.NumberFormat(m,na({},b,c)),s.set(x,w)),d?w.formatToParts(u):w.format(u)}const vq=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function JT(...r){const[e,t,n,i]=r,a={};let o={};if(!Ti(e))throw El(Ss.INVALID_ARGUMENT);const s=e;return Ot(t)?a.key=t:Er(t)&&Object.keys(t).forEach(l=>{vq.includes(l)?o[l]=t[l]:a[l]=t[l]}),Ot(n)?a.locale=n:Er(n)&&(o=n),Er(i)&&(o=i),[a.key||"",s,a,o]}function d8(r,e,t){const n=r;for(const i in t){const a=`${e}__${i}`;n.__numberFormatters.has(a)&&n.__numberFormatters.delete(a)}}v6e();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const r8e="9.13.1";function n8e(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(_u().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(_u().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_u().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_u().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_u().__INTLIFY_PROD_DEVTOOLS__=!1)}const pq=N6e.__EXTEND_POINT__,cu=j_(pq);cu(),cu(),cu(),cu(),cu(),cu(),cu(),cu(),cu();const gq=Ss.__EXTEND_POINT__,Ba=j_(gq),Pi={UNEXPECTED_RETURN_TYPE:gq,INVALID_ARGUMENT:Ba(),MUST_BE_CALL_SETUP_TOP:Ba(),NOT_INSTALLED:Ba(),NOT_AVAILABLE_IN_LEGACY_MODE:Ba(),REQUIRED_VALUE:Ba(),INVALID_VALUE:Ba(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Ba(),NOT_INSTALLED_WITH_PROVIDE:Ba(),UNEXPECTED_ERROR:Ba(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Ba(),BRIDGE_SUPPORT_VUE_2_ONLY:Ba(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Ba(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Ba(),__EXTEND_POINT__:Ba()};function Yi(r,...e){return Op(r,null,void 0)}const eO=yc("__translateVNode"),tO=yc("__datetimeParts"),rO=yc("__numberParts"),mq=yc("__setPluralRules"),yq=yc("__injectWithOption"),nO=yc("__dispose");function nm(r){if(!fn(r))return r;for(const e in r)if(Gw(r,e))if(!e.includes("."))fn(r[e])&&nm(r[e]);else{const t=e.split("."),n=t.length-1;let i=r,a=!1;for(let o=0;o<n;o++){if(t[o]in i||(i[t[o]]={}),!fn(i[t[o]])){a=!0;break}i=i[t[o]]}a||(i[t[n]]=r[e],delete r[e]),fn(i[t[n]])&&nm(i[t[n]])}return r}function W_(r,e){const{messages:t,__i18n:n,messageResolver:i,flatJson:a}=e,o=Er(t)?t:kn(n)?{}:{[r]:{}};if(kn(n)&&n.forEach(s=>{if("locale"in s&&"resource"in s){const{locale:l,resource:u}=s;l?(o[l]=o[l]||{},yx(u,o[l])):yx(u,o)}else Ot(s)&&yx(JSON.parse(s),o)}),i==null&&a)for(const s in o)Gw(o,s)&&nm(o[s]);return o}function bq(r){return r.type}function xq(r,e,t){let n=fn(e.messages)?e.messages:{};"__i18nGlobal"in t&&(n=W_(r.locale.value,{messages:n,__i18n:t.__i18nGlobal}));const i=Object.keys(n);i.length&&i.forEach(a=>{r.mergeLocaleMessage(a,n[a])});{if(fn(e.datetimeFormats)){const a=Object.keys(e.datetimeFormats);a.length&&a.forEach(o=>{r.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(fn(e.numberFormats)){const a=Object.keys(e.numberFormats);a.length&&a.forEach(o=>{r.mergeNumberFormat(o,e.numberFormats[o])})}}}function v8(r){return _r(nd,null,r,0)}const p8="__INTLIFY_META__",g8=()=>[],i8e=()=>!1;let m8=0;function y8(r){return(e,t,n,i)=>r(t,n,Wn()||void 0,i)}const a8e=()=>{const r=Wn();let e=null;return r&&(e=bq(r)[p8])?{[p8]:e}:null};function fP(r={},e){const{__root:t,__injectWithOption:n}=r,i=t===void 0,a=r.flatJson,o=zw?xt:As,s=!!r.translateExistCompatible;let l=Vr(r.inheritLocale)?r.inheritLocale:!0;const u=o(t&&l?t.locale.value:Ot(r.locale)?r.locale:np),f=o(t&&l?t.fallbackLocale.value:Ot(r.fallbackLocale)||kn(r.fallbackLocale)||Er(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:u.value),c=o(W_(u.value,r)),h=o(Er(r.datetimeFormats)?r.datetimeFormats:{[u.value]:{}}),d=o(Er(r.numberFormats)?r.numberFormats:{[u.value]:{}});let v=t?t.missingWarn:Vr(r.missingWarn)||ic(r.missingWarn)?r.missingWarn:!0,p=t?t.fallbackWarn:Vr(r.fallbackWarn)||ic(r.fallbackWarn)?r.fallbackWarn:!0,g=t?t.fallbackRoot:Vr(r.fallbackRoot)?r.fallbackRoot:!0,m=!!r.fallbackFormat,b=En(r.missing)?r.missing:null,y=En(r.missing)?y8(r.missing):null,x=En(r.postTranslation)?r.postTranslation:null,w=t?t.warnHtmlMessage:Vr(r.warnHtmlMessage)?r.warnHtmlMessage:!0,E=!!r.escapeParameter;const _=t?t.modifiers:Er(r.modifiers)?r.modifiers:{};let S=r.pluralRules||t&&t.pluralRules,C;C=(()=>{i&&a8(null);const X={version:r8e,locale:u.value,fallbackLocale:f.value,messages:c.value,modifiers:_,pluralRules:S,missing:y===null?void 0:y,missingWarn:v,fallbackWarn:p,fallbackFormat:m,unresolving:!0,postTranslation:x===null?void 0:x,warnHtmlMessage:w,escapeParameter:E,messageResolver:r.messageResolver,messageCompiler:r.messageCompiler,__meta:{framework:"vue"}};X.datetimeFormats=h.value,X.numberFormats=d.value,X.__datetimeFormatters=Er(C)?C.__datetimeFormatters:void 0,X.__numberFormatters=Er(C)?C.__numberFormatters:void 0;const ae=H6e(X);return i&&a8(ae),ae})(),wg(C,u.value,f.value);function T(){return[u.value,f.value,c.value,h.value,d.value]}const A=Me({get:()=>u.value,set:X=>{u.value=X,C.locale=u.value}}),O=Me({get:()=>f.value,set:X=>{f.value=X,C.fallbackLocale=f.value,wg(C,u.value,X)}}),L=Me(()=>c.value),N=Me(()=>h.value),P=Me(()=>d.value);function R(){return En(x)?x:null}function G(X){x=X,C.postTranslation=X}function D(){return b}function B(X){X!==null&&(y=y8(X)),b=X,C.missing=y}const Y=(X,ae,Ce,ke,Ke,Et)=>{T();let jt;try{__INTLIFY_PROD_DEVTOOLS__,i||(C.fallbackContext=t?V6e():void 0),jt=X(C)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(C.fallbackContext=void 0)}if(Ce!=="translate exists"&&Ti(jt)&&jt===U_||Ce==="translate exists"&&!jt){const[kr,Qt]=ae();return t&&g?ke(t):Ke(kr)}else{if(Et(jt))return jt;throw Yi(Pi.UNEXPECTED_RETURN_TYPE)}};function ee(...X){return Y(ae=>Reflect.apply(u8,null,[ae,...X]),()=>ZT(...X),"translate",ae=>Reflect.apply(ae.t,ae,[...X]),ae=>ae,ae=>Ot(ae))}function ne(...X){const[ae,Ce,ke]=X;if(ke&&!fn(ke))throw Yi(Pi.INVALID_ARGUMENT);return ee(ae,Ce,na({resolvedMessage:!0},ke||{}))}function Q(...X){return Y(ae=>Reflect.apply(f8,null,[ae,...X]),()=>QT(...X),"datetime format",ae=>Reflect.apply(ae.d,ae,[...X]),()=>r8,ae=>Ot(ae))}function ye(...X){return Y(ae=>Reflect.apply(h8,null,[ae,...X]),()=>JT(...X),"number format",ae=>Reflect.apply(ae.n,ae,[...X]),()=>r8,ae=>Ot(ae))}function Le(X){return X.map(ae=>Ot(ae)||Ti(ae)||Vr(ae)?v8(String(ae)):ae)}const _e={normalize:Le,interpolate:X=>X,type:"vnode"};function Ve(...X){return Y(ae=>{let Ce;const ke=ae;try{ke.processor=_e,Ce=Reflect.apply(u8,null,[ke,...X])}finally{ke.processor=null}return Ce},()=>ZT(...X),"translate",ae=>ae[eO](...X),ae=>[v8(ae)],ae=>kn(ae))}function Xe(...X){return Y(ae=>Reflect.apply(h8,null,[ae,...X]),()=>JT(...X),"number format",ae=>ae[rO](...X),g8,ae=>Ot(ae)||kn(ae))}function vt(...X){return Y(ae=>Reflect.apply(f8,null,[ae,...X]),()=>QT(...X),"datetime format",ae=>ae[tO](...X),g8,ae=>Ot(ae)||kn(ae))}function bt(X){S=X,C.pluralRules=S}function te(X,ae){return Y(()=>{if(!X)return!1;const Ce=Ot(ae)?ae:u.value,ke=Be(Ce),Ke=C.messageResolver(ke,X);return s?Ke!=null:ip(Ke)||jo(Ke)||Ot(Ke)},()=>[X],"translate exists",Ce=>Reflect.apply(Ce.te,Ce,[X,ae]),i8e,Ce=>Vr(Ce))}function H(X){let ae=null;const Ce=nq(C,f.value,u.value);for(let ke=0;ke<Ce.length;ke++){const Ke=c.value[Ce[ke]]||{},Et=C.messageResolver(Ke,X);if(Et!=null){ae=Et;break}}return ae}function de(X){const ae=H(X);return ae??(t?t.tm(X)||{}:{})}function Be(X){return c.value[X]||{}}function Ie(X,ae){if(a){const Ce={[X]:ae};for(const ke in Ce)Gw(Ce,ke)&&nm(Ce[ke]);ae=Ce[X]}c.value[X]=ae,C.messages=c.value}function Pe(X,ae){c.value[X]=c.value[X]||{};const Ce={[X]:ae};if(a)for(const ke in Ce)Gw(Ce,ke)&&nm(Ce[ke]);ae=Ce[X],yx(ae,c.value[X]),C.messages=c.value}function Ye(X){return h.value[X]||{}}function V(X,ae){h.value[X]=ae,C.datetimeFormats=h.value,c8(C,X,ae)}function z(X,ae){h.value[X]=na(h.value[X]||{},ae),C.datetimeFormats=h.value,c8(C,X,ae)}function F(X){return d.value[X]||{}}function k(X,ae){d.value[X]=ae,C.numberFormats=d.value,d8(C,X,ae)}function ue(X,ae){d.value[X]=na(d.value[X]||{},ae),C.numberFormats=d.value,d8(C,X,ae)}m8++,t&&zw&&(qt(t.locale,X=>{l&&(u.value=X,C.locale=X,wg(C,u.value,f.value))}),qt(t.fallbackLocale,X=>{l&&(f.value=X,C.fallbackLocale=X,wg(C,u.value,f.value))}));const ce={id:m8,locale:A,fallbackLocale:O,get inheritLocale(){return l},set inheritLocale(X){l=X,X&&t&&(u.value=t.locale.value,f.value=t.fallbackLocale.value,wg(C,u.value,f.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:L,get modifiers(){return _},get pluralRules(){return S||{}},get isGlobal(){return i},get missingWarn(){return v},set missingWarn(X){v=X,C.missingWarn=v},get fallbackWarn(){return p},set fallbackWarn(X){p=X,C.fallbackWarn=p},get fallbackRoot(){return g},set fallbackRoot(X){g=X},get fallbackFormat(){return m},set fallbackFormat(X){m=X,C.fallbackFormat=m},get warnHtmlMessage(){return w},set warnHtmlMessage(X){w=X,C.warnHtmlMessage=X},get escapeParameter(){return E},set escapeParameter(X){E=X,C.escapeParameter=X},t:ee,getLocaleMessage:Be,setLocaleMessage:Ie,mergeLocaleMessage:Pe,getPostTranslationHandler:R,setPostTranslationHandler:G,getMissingHandler:D,setMissingHandler:B,[mq]:bt};return ce.datetimeFormats=N,ce.numberFormats=P,ce.rt=ne,ce.te=te,ce.tm=de,ce.d=Q,ce.n=ye,ce.getDateTimeFormat=Ye,ce.setDateTimeFormat=V,ce.mergeDateTimeFormat=z,ce.getNumberFormat=F,ce.setNumberFormat=k,ce.mergeNumberFormat=ue,ce[yq]=n,ce[eO]=Ve,ce[tO]=vt,ce[rO]=Xe,ce}function o8e(r){const e=Ot(r.locale)?r.locale:np,t=Ot(r.fallbackLocale)||kn(r.fallbackLocale)||Er(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:e,n=En(r.missing)?r.missing:void 0,i=Vr(r.silentTranslationWarn)||ic(r.silentTranslationWarn)?!r.silentTranslationWarn:!0,a=Vr(r.silentFallbackWarn)||ic(r.silentFallbackWarn)?!r.silentFallbackWarn:!0,o=Vr(r.fallbackRoot)?r.fallbackRoot:!0,s=!!r.formatFallbackMessages,l=Er(r.modifiers)?r.modifiers:{},u=r.pluralizationRules,f=En(r.postTranslation)?r.postTranslation:void 0,c=Ot(r.warnHtmlInMessage)?r.warnHtmlInMessage!=="off":!0,h=!!r.escapeParameterHtml,d=Vr(r.sync)?r.sync:!0;let v=r.messages;if(Er(r.sharedMessages)){const E=r.sharedMessages;v=Object.keys(E).reduce((S,C)=>{const M=S[C]||(S[C]={});return na(M,E[C]),S},v||{})}const{__i18n:p,__root:g,__injectWithOption:m}=r,b=r.datetimeFormats,y=r.numberFormats,x=r.flatJson,w=r.translateExistCompatible;return{locale:e,fallbackLocale:t,messages:v,flatJson:x,datetimeFormats:b,numberFormats:y,missing:n,missingWarn:i,fallbackWarn:a,fallbackRoot:o,fallbackFormat:s,modifiers:l,pluralRules:u,postTranslation:f,warnHtmlMessage:c,escapeParameter:h,messageResolver:r.messageResolver,inheritLocale:d,translateExistCompatible:w,__i18n:p,__root:g,__injectWithOption:m}}function iO(r={},e){{const t=fP(o8e(r)),{__extender:n}=r,i={id:t.id,get locale(){return t.locale.value},set locale(a){t.locale.value=a},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(a){t.fallbackLocale.value=a},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(a){},get missing(){return t.getMissingHandler()},set missing(a){t.setMissingHandler(a)},get silentTranslationWarn(){return Vr(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(a){t.missingWarn=Vr(a)?!a:a},get silentFallbackWarn(){return Vr(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(a){t.fallbackWarn=Vr(a)?!a:a},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(a){t.fallbackFormat=a},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(a){t.setPostTranslationHandler(a)},get sync(){return t.inheritLocale},set sync(a){t.inheritLocale=a},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){t.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(a){t.escapeParameter=a},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(a){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...a){const[o,s,l]=a,u={};let f=null,c=null;if(!Ot(o))throw Yi(Pi.INVALID_ARGUMENT);const h=o;return Ot(s)?u.locale=s:kn(s)?f=s:Er(s)&&(c=s),kn(l)?f=l:Er(l)&&(c=l),Reflect.apply(t.t,t,[h,f||c||{},u])},rt(...a){return Reflect.apply(t.rt,t,[...a])},tc(...a){const[o,s,l]=a,u={plural:1};let f=null,c=null;if(!Ot(o))throw Yi(Pi.INVALID_ARGUMENT);const h=o;return Ot(s)?u.locale=s:Ti(s)?u.plural=s:kn(s)?f=s:Er(s)&&(c=s),Ot(l)?u.locale=l:kn(l)?f=l:Er(l)&&(c=l),Reflect.apply(t.t,t,[h,f||c||{},u])},te(a,o){return t.te(a,o)},tm(a){return t.tm(a)},getLocaleMessage(a){return t.getLocaleMessage(a)},setLocaleMessage(a,o){t.setLocaleMessage(a,o)},mergeLocaleMessage(a,o){t.mergeLocaleMessage(a,o)},d(...a){return Reflect.apply(t.d,t,[...a])},getDateTimeFormat(a){return t.getDateTimeFormat(a)},setDateTimeFormat(a,o){t.setDateTimeFormat(a,o)},mergeDateTimeFormat(a,o){t.mergeDateTimeFormat(a,o)},n(...a){return Reflect.apply(t.n,t,[...a])},getNumberFormat(a){return t.getNumberFormat(a)},setNumberFormat(a,o){t.setNumberFormat(a,o)},mergeNumberFormat(a,o){t.mergeNumberFormat(a,o)},getChoiceIndex(a,o){return-1}};return i.__extender=n,i}}const cP={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:r=>r==="parent"||r==="global",default:"parent"},i18n:{type:Object}};function s8e({slots:r},e){return e.length===1&&e[0]==="default"?(r.default?r.default():[]).reduce((n,i)=>[...n,...i.type===Qn?i.children:[i]],[]):e.reduce((t,n)=>{const i=r[n];return i&&(t[n]=i()),t},{})}function wq(r){return Qn}const l8e=Rt({name:"i18n-t",props:na({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:r=>Ti(r)||!isNaN(r)}},cP),setup(r,e){const{slots:t,attrs:n}=e,i=r.i18n||hP({useScope:r.scope,__useComponent:!0});return()=>{const a=Object.keys(t).filter(c=>c!=="_"),o={};r.locale&&(o.locale=r.locale),r.plural!==void 0&&(o.plural=Ot(r.plural)?+r.plural:r.plural);const s=s8e(e,a),l=i[eO](r.keypath,s,o),u=na({},n),f=Ot(r.tag)||fn(r.tag)?r.tag:wq();return Ep(f,u,l)}}}),b8=l8e;function u8e(r){return kn(r)&&!Ot(r[0])}function Eq(r,e,t,n){const{slots:i,attrs:a}=e;return()=>{const o={part:!0};let s={};r.locale&&(o.locale=r.locale),Ot(r.format)?o.key=r.format:fn(r.format)&&(Ot(r.format.key)&&(o.key=r.format.key),s=Object.keys(r.format).reduce((h,d)=>t.includes(d)?na({},h,{[d]:r.format[d]}):h,{}));const l=n(r.value,o,s);let u=[o.key];kn(l)?u=l.map((h,d)=>{const v=i[h.type],p=v?v({[h.type]:h.value,index:d,parts:l}):[h.value];return u8e(p)&&(p[0].key=`${h.type}-${d}`),p}):Ot(l)&&(u=[l]);const f=na({},a),c=Ot(r.tag)||fn(r.tag)?r.tag:wq();return Ep(c,f,u)}}const f8e=Rt({name:"i18n-n",props:na({value:{type:Number,required:!0},format:{type:[String,Object]}},cP),setup(r,e){const t=r.i18n||hP({useScope:r.scope,__useComponent:!0});return Eq(r,e,vq,(...n)=>t[rO](...n))}}),x8=f8e,c8e=Rt({name:"i18n-d",props:na({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},cP),setup(r,e){const t=r.i18n||hP({useScope:r.scope,__useComponent:!0});return Eq(r,e,dq,(...n)=>t[tO](...n))}}),w8=c8e;function h8e(r,e){const t=r;if(r.mode==="composition")return t.__getInstance(e)||r.global;{const n=t.__getInstance(e);return n!=null?n.__composer:r.global.__composer}}function d8e(r){const e=o=>{const{instance:s,modifiers:l,value:u}=o;if(!s||!s.$)throw Yi(Pi.UNEXPECTED_ERROR);const f=h8e(r,s.$),c=E8(u);return[Reflect.apply(f.t,f,[..._8(c)]),f]};return{created:(o,s)=>{const[l,u]=e(s);zw&&r.global===u&&(o.__i18nWatcher=qt(u.locale,()=>{s.instance&&s.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{zw&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:s})=>{if(o.__composer){const l=o.__composer,u=E8(s);o.textContent=Reflect.apply(l.t,l,[..._8(u)])}},getSSRProps:o=>{const[s]=e(o);return{textContent:s}}}}function E8(r){if(Ot(r))return{path:r};if(Er(r)){if(!("path"in r))throw Yi(Pi.REQUIRED_VALUE,"path");return r}else throw Yi(Pi.INVALID_VALUE)}function _8(r){const{path:e,locale:t,args:n,choice:i,plural:a}=r,o={},s=n||{};return Ot(t)&&(o.locale=t),Ti(i)&&(o.plural=i),Ti(a)&&(o.plural=a),[e,s,o]}function v8e(r,e,...t){const n=Er(t[0])?t[0]:{},i=!!n.useI18nComponentName;(Vr(n.globalInstall)?n.globalInstall:!0)&&([i?"i18n":b8.name,"I18nT"].forEach(o=>r.component(o,b8)),[x8.name,"I18nN"].forEach(o=>r.component(o,x8)),[w8.name,"I18nD"].forEach(o=>r.component(o,w8))),r.directive("t",d8e(e))}function p8e(r,e,t){return{beforeCreate(){const n=Wn();if(!n)throw Yi(Pi.UNEXPECTED_ERROR);const i=this.$options;if(i.i18n){const a=i.i18n;if(i.__i18n&&(a.__i18n=i.__i18n),a.__root=e,this===this.$root)this.$i18n=S8(r,a);else{a.__injectWithOption=!0,a.__extender=t.__vueI18nExtend,this.$i18n=iO(a);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(i.__i18n)if(this===this.$root)this.$i18n=S8(r,i);else{this.$i18n=iO({__i18n:i.__i18n,__injectWithOption:!0,__extender:t.__vueI18nExtend,__root:e});const a=this.$i18n;a.__extender&&(a.__disposer=a.__extender(this.$i18n))}else this.$i18n=r;i.__i18nGlobal&&xq(e,i,i),this.$t=(...a)=>this.$i18n.t(...a),this.$rt=(...a)=>this.$i18n.rt(...a),this.$tc=(...a)=>this.$i18n.tc(...a),this.$te=(a,o)=>this.$i18n.te(a,o),this.$d=(...a)=>this.$i18n.d(...a),this.$n=(...a)=>this.$i18n.n(...a),this.$tm=a=>this.$i18n.tm(a),t.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const n=Wn();if(!n)throw Yi(Pi.UNEXPECTED_ERROR);const i=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,i.__disposer&&(i.__disposer(),delete i.__disposer,delete i.__extender),t.__deleteInstance(n),delete this.$i18n}}}function S8(r,e){r.locale=e.locale||r.locale,r.fallbackLocale=e.fallbackLocale||r.fallbackLocale,r.missing=e.missing||r.missing,r.silentTranslationWarn=e.silentTranslationWarn||r.silentFallbackWarn,r.silentFallbackWarn=e.silentFallbackWarn||r.silentFallbackWarn,r.formatFallbackMessages=e.formatFallbackMessages||r.formatFallbackMessages,r.postTranslation=e.postTranslation||r.postTranslation,r.warnHtmlInMessage=e.warnHtmlInMessage||r.warnHtmlInMessage,r.escapeParameterHtml=e.escapeParameterHtml||r.escapeParameterHtml,r.sync=e.sync||r.sync,r.__composer[mq](e.pluralizationRules||r.pluralizationRules);const t=W_(r.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(t).forEach(n=>r.mergeLocaleMessage(n,t[n])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(n=>r.mergeDateTimeFormat(n,e.datetimeFormats[n])),e.numberFormats&&Object.keys(e.numberFormats).forEach(n=>r.mergeNumberFormat(n,e.numberFormats[n])),r}const g8e=yc("global-vue-i18n");function Ert(r={},e){const t=__VUE_I18N_LEGACY_API__&&Vr(r.legacy)?r.legacy:__VUE_I18N_LEGACY_API__,n=Vr(r.globalInjection)?r.globalInjection:!0,i=__VUE_I18N_LEGACY_API__&&t?!!r.allowComposition:!0,a=new Map,[o,s]=m8e(r,t),l=yc("");function u(h){return a.get(h)||null}function f(h,d){a.set(h,d)}function c(h){a.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},get allowComposition(){return i},async install(d,...v){if(d.__VUE_I18N_SYMBOL__=l,d.provide(d.__VUE_I18N_SYMBOL__,h),Er(v[0])){const m=v[0];h.__composerExtend=m.__composerExtend,h.__vueI18nExtend=m.__vueI18nExtend}let p=null;!t&&n&&(p=C8e(d,h.global)),__VUE_I18N_FULL_INSTALL__&&v8e(d,h,...v),__VUE_I18N_LEGACY_API__&&t&&d.mixin(p8e(s,s.__composer,h));const g=d.unmount;d.unmount=()=>{p&&p(),h.dispose(),g()}},get global(){return s},dispose(){o.stop()},__instances:a,__getInstance:u,__setInstance:f,__deleteInstance:c};return h}}function hP(r={}){const e=Wn();if(e==null)throw Yi(Pi.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Yi(Pi.NOT_INSTALLED);const t=y8e(e),n=x8e(t),i=bq(e),a=b8e(r,i);if(__VUE_I18N_LEGACY_API__&&t.mode==="legacy"&&!r.__useComponent){if(!t.allowComposition)throw Yi(Pi.NOT_AVAILABLE_IN_LEGACY_MODE);return S8e(e,a,n,r)}if(a==="global")return xq(n,r,i),n;if(a==="parent"){let l=w8e(t,e,r.__useComponent);return l==null&&(l=n),l}const o=t;let s=o.__getInstance(e);if(s==null){const l=na({},r);"__i18n"in i&&(l.__i18n=i.__i18n),n&&(l.__root=n),s=fP(l),o.__composerExtend&&(s[nO]=o.__composerExtend(s)),_8e(o,e,s),o.__setInstance(e,s)}return s}function m8e(r,e,t){const n=Mk();{const i=__VUE_I18N_LEGACY_API__&&e?n.run(()=>iO(r)):n.run(()=>fP(r));if(i==null)throw Yi(Pi.UNEXPECTED_ERROR);return[n,i]}}function y8e(r){{const e=tn(r.isCE?g8e:r.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Yi(r.isCE?Pi.NOT_INSTALLED_WITH_PROVIDE:Pi.UNEXPECTED_ERROR);return e}}function b8e(r,e){return G_(r)?"__i18n"in e?"local":"global":r.useScope?r.useScope:"local"}function x8e(r){return r.mode==="composition"?r.global:r.global.__composer}function w8e(r,e,t=!1){let n=null;const i=e.root;let a=E8e(e,t);for(;a!=null;){const o=r;if(r.mode==="composition")n=o.__getInstance(a);else if(__VUE_I18N_LEGACY_API__){const s=o.__getInstance(a);s!=null&&(n=s.__composer,t&&n&&!n[yq]&&(n=null))}if(n!=null||i===a)break;a=a.parent}return n}function E8e(r,e=!1){return r==null?null:e&&r.vnode.ctx||r.parent}function _8e(r,e,t){Fn(()=>{},e),RE(()=>{const n=t;r.__deleteInstance(e);const i=n[nO];i&&(i(),delete n[nO])},e)}function S8e(r,e,t,n={}){const i=e==="local",a=As(null);if(i&&r.proxy&&!(r.proxy.$options.i18n||r.proxy.$options.__i18n))throw Yi(Pi.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Vr(n.inheritLocale)?n.inheritLocale:!Ot(n.locale),s=xt(!i||o?t.locale.value:Ot(n.locale)?n.locale:np),l=xt(!i||o?t.fallbackLocale.value:Ot(n.fallbackLocale)||kn(n.fallbackLocale)||Er(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:s.value),u=xt(W_(s.value,n)),f=xt(Er(n.datetimeFormats)?n.datetimeFormats:{[s.value]:{}}),c=xt(Er(n.numberFormats)?n.numberFormats:{[s.value]:{}}),h=i?t.missingWarn:Vr(n.missingWarn)||ic(n.missingWarn)?n.missingWarn:!0,d=i?t.fallbackWarn:Vr(n.fallbackWarn)||ic(n.fallbackWarn)?n.fallbackWarn:!0,v=i?t.fallbackRoot:Vr(n.fallbackRoot)?n.fallbackRoot:!0,p=!!n.fallbackFormat,g=En(n.missing)?n.missing:null,m=En(n.postTranslation)?n.postTranslation:null,b=i?t.warnHtmlMessage:Vr(n.warnHtmlMessage)?n.warnHtmlMessage:!0,y=!!n.escapeParameter,x=i?t.modifiers:Er(n.modifiers)?n.modifiers:{},w=n.pluralRules||i&&t.pluralRules;function E(){return[s.value,l.value,u.value,f.value,c.value]}const _=Me({get:()=>a.value?a.value.locale.value:s.value,set:H=>{a.value&&(a.value.locale.value=H),s.value=H}}),S=Me({get:()=>a.value?a.value.fallbackLocale.value:l.value,set:H=>{a.value&&(a.value.fallbackLocale.value=H),l.value=H}}),C=Me(()=>a.value?a.value.messages.value:u.value),M=Me(()=>f.value),T=Me(()=>c.value);function A(){return a.value?a.value.getPostTranslationHandler():m}function O(H){a.value&&a.value.setPostTranslationHandler(H)}function L(){return a.value?a.value.getMissingHandler():g}function N(H){a.value&&a.value.setMissingHandler(H)}function P(H){return E(),H()}function R(...H){return a.value?P(()=>Reflect.apply(a.value.t,null,[...H])):P(()=>"")}function G(...H){return a.value?Reflect.apply(a.value.rt,null,[...H]):""}function D(...H){return a.value?P(()=>Reflect.apply(a.value.d,null,[...H])):P(()=>"")}function B(...H){return a.value?P(()=>Reflect.apply(a.value.n,null,[...H])):P(()=>"")}function Y(H){return a.value?a.value.tm(H):{}}function ee(H,de){return a.value?a.value.te(H,de):!1}function ne(H){return a.value?a.value.getLocaleMessage(H):{}}function Q(H,de){a.value&&(a.value.setLocaleMessage(H,de),u.value[H]=de)}function ye(H,de){a.value&&a.value.mergeLocaleMessage(H,de)}function Le(H){return a.value?a.value.getDateTimeFormat(H):{}}function Fe(H,de){a.value&&(a.value.setDateTimeFormat(H,de),f.value[H]=de)}function _e(H,de){a.value&&a.value.mergeDateTimeFormat(H,de)}function Ve(H){return a.value?a.value.getNumberFormat(H):{}}function Xe(H,de){a.value&&(a.value.setNumberFormat(H,de),c.value[H]=de)}function vt(H,de){a.value&&a.value.mergeNumberFormat(H,de)}const bt={get id(){return a.value?a.value.id:-1},locale:_,fallbackLocale:S,messages:C,datetimeFormats:M,numberFormats:T,get inheritLocale(){return a.value?a.value.inheritLocale:o},set inheritLocale(H){a.value&&(a.value.inheritLocale=H)},get availableLocales(){return a.value?a.value.availableLocales:Object.keys(u.value)},get modifiers(){return a.value?a.value.modifiers:x},get pluralRules(){return a.value?a.value.pluralRules:w},get isGlobal(){return a.value?a.value.isGlobal:!1},get missingWarn(){return a.value?a.value.missingWarn:h},set missingWarn(H){a.value&&(a.value.missingWarn=H)},get fallbackWarn(){return a.value?a.value.fallbackWarn:d},set fallbackWarn(H){a.value&&(a.value.missingWarn=H)},get fallbackRoot(){return a.value?a.value.fallbackRoot:v},set fallbackRoot(H){a.value&&(a.value.fallbackRoot=H)},get fallbackFormat(){return a.value?a.value.fallbackFormat:p},set fallbackFormat(H){a.value&&(a.value.fallbackFormat=H)},get warnHtmlMessage(){return a.value?a.value.warnHtmlMessage:b},set warnHtmlMessage(H){a.value&&(a.value.warnHtmlMessage=H)},get escapeParameter(){return a.value?a.value.escapeParameter:y},set escapeParameter(H){a.value&&(a.value.escapeParameter=H)},t:R,getPostTranslationHandler:A,setPostTranslationHandler:O,getMissingHandler:L,setMissingHandler:N,rt:G,d:D,n:B,tm:Y,te:ee,getLocaleMessage:ne,setLocaleMessage:Q,mergeLocaleMessage:ye,getDateTimeFormat:Le,setDateTimeFormat:Fe,mergeDateTimeFormat:_e,getNumberFormat:Ve,setNumberFormat:Xe,mergeNumberFormat:vt};function te(H){H.locale.value=s.value,H.fallbackLocale.value=l.value,Object.keys(u.value).forEach(de=>{H.mergeLocaleMessage(de,u.value[de])}),Object.keys(f.value).forEach(de=>{H.mergeDateTimeFormat(de,f.value[de])}),Object.keys(c.value).forEach(de=>{H.mergeNumberFormat(de,c.value[de])}),H.escapeParameter=y,H.fallbackFormat=p,H.fallbackRoot=v,H.fallbackWarn=d,H.missingWarn=h,H.warnHtmlMessage=b}return Bk(()=>{if(r.proxy==null||r.proxy.$i18n==null)throw Yi(Pi.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const H=a.value=r.proxy.$i18n.__composer;e==="global"?(s.value=H.locale.value,l.value=H.fallbackLocale.value,u.value=H.messages.value,f.value=H.datetimeFormats.value,c.value=H.numberFormats.value):i&&te(H)}),bt}const M8e=["locale","fallbackLocale","availableLocales"],M8=["t","rt","d","n","tm","te"];function C8e(r,e){const t=Object.create(null);return M8e.forEach(i=>{const a=Object.getOwnPropertyDescriptor(e,i);if(!a)throw Yi(Pi.UNEXPECTED_ERROR);const o=Sn(a.value)?{get(){return a.value.value},set(s){a.value.value=s}}:{get(){return a.get&&a.get()}};Object.defineProperty(t,i,o)}),r.config.globalProperties.$i18n=t,M8.forEach(i=>{const a=Object.getOwnPropertyDescriptor(e,i);if(!a||!a.value)throw Yi(Pi.UNEXPECTED_ERROR);Object.defineProperty(r.config.globalProperties,`$${i}`,a)}),()=>{delete r.config.globalProperties.$i18n,M8.forEach(i=>{delete r.config.globalProperties[`$${i}`]})}}n8e();__INTLIFY_JIT_COMPILATION__?i8(Z6e):i8(q6e);G6e(E6e);j6e(nq);if(__INTLIFY_PROD_DEVTOOLS__){const r=_u();r.__INTLIFY__=!0,I6e(r.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const Cv=(r,e=0,t=1)=>vP(pP(e,r),t),dP=r=>{r._clipped=!1,r._unclipped=r.slice(0);for(let e=0;e<=3;e++)e<3?((r[e]<0||r[e]>255)&&(r._clipped=!0),r[e]=Cv(r[e],0,255)):e===3&&(r[e]=Cv(r[e],0,1));return r},_q={};for(let r of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])_q[`[object ${r}]`]=r.toLowerCase();function Hr(r){return _q[Object.prototype.toString.call(r)]||"object"}const Yr=(r,e=null)=>r.length>=3?Array.prototype.slice.call(r):Hr(r[0])=="object"&&e?e.split("").filter(t=>r[0][t]!==void 0).map(t=>r[0][t]):r[0],V_=r=>{if(r.length<2)return null;const e=r.length-1;return Hr(r[e])=="string"?r[e].toLowerCase():null},{PI:H_,min:vP,max:pP}=Math,xu=H_*2,eC=H_/3,A8e=H_/180,T8e=180/H_,Ar={format:{},autodetect:[]};class yt{constructor(...e){const t=this;if(Hr(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let n=V_(e),i=!1;if(!n){i=!0,Ar.sorted||(Ar.autodetect=Ar.autodetect.sort((a,o)=>o.p-a.p),Ar.sorted=!0);for(let a of Ar.autodetect)if(n=a.test(...e),n)break}if(Ar.format[n]){const a=Ar.format[n].apply(null,i?e:e.slice(0,-1));t._rgb=dP(a)}else throw new Error("unknown format: "+e);t._rgb.length===3&&t._rgb.push(1)}toString(){return Hr(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const O8e="2.6.0",Nr=(...r)=>new Nr.Color(...r);Nr.Color=yt;Nr.version=O8e;const k8e=(...r)=>{r=Yr(r,"cmyk");const[e,t,n,i]=r,a=r.length>4?r[4]:1;return i===1?[0,0,0,a]:[e>=1?0:255*(1-e)*(1-i),t>=1?0:255*(1-t)*(1-i),n>=1?0:255*(1-n)*(1-i),a]},{max:C8}=Math,I8e=(...r)=>{let[e,t,n]=Yr(r,"rgb");e=e/255,t=t/255,n=n/255;const i=1-C8(e,C8(t,n)),a=i<1?1/(1-i):0,o=(1-e-i)*a,s=(1-t-i)*a,l=(1-n-i)*a;return[o,s,l,i]};yt.prototype.cmyk=function(){return I8e(this._rgb)};Nr.cmyk=(...r)=>new yt(...r,"cmyk");Ar.format.cmyk=k8e;Ar.autodetect.push({p:2,test:(...r)=>{if(r=Yr(r,"cmyk"),Hr(r)==="array"&&r.length===4)return"cmyk"}});const tC=r=>Math.round(r*100)/100,L8e=(...r)=>{const e=Yr(r,"hsla");let t=V_(r)||"lsa";return e[0]=tC(e[0]||0),e[1]=tC(e[1]*100)+"%",e[2]=tC(e[2]*100)+"%",t==="hsla"||e.length>3&&e[3]<1?(e[3]=e.length>3?e[3]:1,t="hsla"):e.length=3,`${t}(${e.join(",")})`},Sq=(...r)=>{r=Yr(r,"rgba");let[e,t,n]=r;e/=255,t/=255,n/=255;const i=vP(e,t,n),a=pP(e,t,n),o=(a+i)/2;let s,l;return a===i?(s=0,l=Number.NaN):s=o<.5?(a-i)/(a+i):(a-i)/(2-a-i),e==a?l=(t-n)/(a-i):t==a?l=2+(n-e)/(a-i):n==a&&(l=4+(e-t)/(a-i)),l*=60,l<0&&(l+=360),r.length>3&&r[3]!==void 0?[l,s,o,r[3]]:[l,s,o]},{round:rC}=Math,P8e=(...r)=>{const e=Yr(r,"rgba");let t=V_(r)||"rgb";return t.substr(0,3)=="hsl"?L8e(Sq(e),t):(e[0]=rC(e[0]),e[1]=rC(e[1]),e[2]=rC(e[2]),(t==="rgba"||e.length>3&&e[3]<1)&&(e[3]=e.length>3?e[3]:1,t="rgba"),`${t}(${e.slice(0,t==="rgb"?3:4).join(",")})`)},{round:nC}=Math,aO=(...r)=>{r=Yr(r,"hsl");const[e,t,n]=r;let i,a,o;if(t===0)i=a=o=n*255;else{const s=[0,0,0],l=[0,0,0],u=n<.5?n*(1+t):n+t-n*t,f=2*n-u,c=e/360;s[0]=c+1/3,s[1]=c,s[2]=c-1/3;for(let h=0;h<3;h++)s[h]<0&&(s[h]+=1),s[h]>1&&(s[h]-=1),6*s[h]<1?l[h]=f+(u-f)*6*s[h]:2*s[h]<1?l[h]=u:3*s[h]<2?l[h]=f+(u-f)*(2/3-s[h])*6:l[h]=f;[i,a,o]=[nC(l[0]*255),nC(l[1]*255),nC(l[2]*255)]}return r.length>3?[i,a,o,r[3]]:[i,a,o,1]},Mq=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Cq=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Aq=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Tq=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Oq=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,kq=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,{round:A8}=Math,gP=r=>{r=r.toLowerCase().trim();let e;if(Ar.format.named)try{return Ar.format.named(r)}catch{}if(e=r.match(Mq)){const t=e.slice(1,4);for(let n=0;n<3;n++)t[n]=+t[n];return t[3]=1,t}if(e=r.match(Cq)){const t=e.slice(1,5);for(let n=0;n<4;n++)t[n]=+t[n];return t}if(e=r.match(Aq)){const t=e.slice(1,4);for(let n=0;n<3;n++)t[n]=A8(t[n]*2.55);return t[3]=1,t}if(e=r.match(Tq)){const t=e.slice(1,5);for(let n=0;n<3;n++)t[n]=A8(t[n]*2.55);return t[3]=+t[3],t}if(e=r.match(Oq)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const n=aO(t);return n[3]=1,n}if(e=r.match(kq)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const n=aO(t);return n[3]=+e[4],n}};gP.test=r=>Mq.test(r)||Cq.test(r)||Aq.test(r)||Tq.test(r)||Oq.test(r)||kq.test(r);yt.prototype.css=function(r){return P8e(this._rgb,r)};Nr.css=(...r)=>new yt(...r,"css");Ar.format.css=gP;Ar.autodetect.push({p:5,test:(r,...e)=>{if(!e.length&&Hr(r)==="string"&&gP.test(r))return"css"}});Ar.format.gl=(...r)=>{const e=Yr(r,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};Nr.gl=(...r)=>new yt(...r,"gl");yt.prototype.gl=function(){const r=this._rgb;return[r[0]/255,r[1]/255,r[2]/255,r[3]]};const{floor:D8e}=Math,N8e=(...r)=>{r=Yr(r,"hcg");let[e,t,n]=r,i,a,o;n=n*255;const s=t*255;if(t===0)i=a=o=n;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=D8e(e),u=e-l,f=n*(1-t),c=f+s*(1-u),h=f+s*u,d=f+s;switch(l){case 0:[i,a,o]=[d,h,f];break;case 1:[i,a,o]=[c,d,f];break;case 2:[i,a,o]=[f,d,h];break;case 3:[i,a,o]=[f,c,d];break;case 4:[i,a,o]=[h,f,d];break;case 5:[i,a,o]=[d,f,c];break}}return[i,a,o,r.length>3?r[3]:1]},R8e=(...r)=>{const[e,t,n]=Yr(r,"rgb"),i=vP(e,t,n),a=pP(e,t,n),o=a-i,s=o*100/255,l=i/(255-o)*100;let u;return o===0?u=Number.NaN:(e===a&&(u=(t-n)/o),t===a&&(u=2+(n-e)/o),n===a&&(u=4+(e-t)/o),u*=60,u<0&&(u+=360)),[u,s,l]};yt.prototype.hcg=function(){return R8e(this._rgb)};Nr.hcg=(...r)=>new yt(...r,"hcg");Ar.format.hcg=N8e;Ar.autodetect.push({p:1,test:(...r)=>{if(r=Yr(r,"hcg"),Hr(r)==="array"&&r.length===3)return"hcg"}});const B8e=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,F8e=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Iq=r=>{if(r.match(B8e)){(r.length===4||r.length===7)&&(r=r.substr(1)),r.length===3&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);const e=parseInt(r,16),t=e>>16,n=e>>8&255,i=e&255;return[t,n,i,1]}if(r.match(F8e)){(r.length===5||r.length===9)&&(r=r.substr(1)),r.length===4&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]);const e=parseInt(r,16),t=e>>24&255,n=e>>16&255,i=e>>8&255,a=Math.round((e&255)/255*100)/100;return[t,n,i,a]}throw new Error(`unknown hex color: ${r}`)},{round:ob}=Math,Lq=(...r)=>{let[e,t,n,i]=Yr(r,"rgba"),a=V_(r)||"auto";i===void 0&&(i=1),a==="auto"&&(a=i<1?"rgba":"rgb"),e=ob(e),t=ob(t),n=ob(n);let s="000000"+(e<<16|t<<8|n).toString(16);s=s.substr(s.length-6);let l="0"+ob(i*255).toString(16);switch(l=l.substr(l.length-2),a.toLowerCase()){case"rgba":return`#${s}${l}`;case"argb":return`#${l}${s}`;default:return`#${s}`}};yt.prototype.hex=function(r){return Lq(this._rgb,r)};Nr.hex=(...r)=>new yt(...r,"hex");Ar.format.hex=Iq;Ar.autodetect.push({p:4,test:(r,...e)=>{if(!e.length&&Hr(r)==="string"&&[3,4,5,6,7,8,9].indexOf(r.length)>=0)return"hex"}});const{cos:Wd}=Math,$8e=(...r)=>{r=Yr(r,"hsi");let[e,t,n]=r,i,a,o;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(o=(1-t)/3,i=(1+t*Wd(xu*e)/Wd(eC-xu*e))/3,a=1-(o+i)):e<2/3?(e-=1/3,i=(1-t)/3,a=(1+t*Wd(xu*e)/Wd(eC-xu*e))/3,o=1-(i+a)):(e-=2/3,a=(1-t)/3,o=(1+t*Wd(xu*e)/Wd(eC-xu*e))/3,i=1-(a+o)),i=Cv(n*i*3),a=Cv(n*a*3),o=Cv(n*o*3),[i*255,a*255,o*255,r.length>3?r[3]:1]},{min:z8e,sqrt:G8e,acos:j8e}=Math,U8e=(...r)=>{let[e,t,n]=Yr(r,"rgb");e/=255,t/=255,n/=255;let i;const a=z8e(e,t,n),o=(e+t+n)/3,s=o>0?1-a/o:0;return s===0?i=NaN:(i=(e-t+(e-n))/2,i/=G8e((e-t)*(e-t)+(e-n)*(t-n)),i=j8e(i),n>t&&(i=xu-i),i/=xu),[i*360,s,o]};yt.prototype.hsi=function(){return U8e(this._rgb)};Nr.hsi=(...r)=>new yt(...r,"hsi");Ar.format.hsi=$8e;Ar.autodetect.push({p:2,test:(...r)=>{if(r=Yr(r,"hsi"),Hr(r)==="array"&&r.length===3)return"hsi"}});yt.prototype.hsl=function(){return Sq(this._rgb)};Nr.hsl=(...r)=>new yt(...r,"hsl");Ar.format.hsl=aO;Ar.autodetect.push({p:2,test:(...r)=>{if(r=Yr(r,"hsl"),Hr(r)==="array"&&r.length===3)return"hsl"}});const{floor:W8e}=Math,V8e=(...r)=>{r=Yr(r,"hsv");let[e,t,n]=r,i,a,o;if(n*=255,t===0)i=a=o=n;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const s=W8e(e),l=e-s,u=n*(1-t),f=n*(1-t*l),c=n*(1-t*(1-l));switch(s){case 0:[i,a,o]=[n,c,u];break;case 1:[i,a,o]=[f,n,u];break;case 2:[i,a,o]=[u,n,c];break;case 3:[i,a,o]=[u,f,n];break;case 4:[i,a,o]=[c,u,n];break;case 5:[i,a,o]=[n,u,f];break}}return[i,a,o,r.length>3?r[3]:1]},{min:H8e,max:X8e}=Math,Y8e=(...r)=>{r=Yr(r,"rgb");let[e,t,n]=r;const i=H8e(e,t,n),a=X8e(e,t,n),o=a-i;let s,l,u;return u=a/255,a===0?(s=Number.NaN,l=0):(l=o/a,e===a&&(s=(t-n)/o),t===a&&(s=2+(n-e)/o),n===a&&(s=4+(e-t)/o),s*=60,s<0&&(s+=360)),[s,l,u]};yt.prototype.hsv=function(){return Y8e(this._rgb)};Nr.hsv=(...r)=>new yt(...r,"hsv");Ar.format.hsv=V8e;Ar.autodetect.push({p:2,test:(...r)=>{if(r=Yr(r,"hsv"),Hr(r)==="array"&&r.length===3)return"hsv"}});const Ha={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},{pow:K8e}=Math,Pq=(...r)=>{r=Yr(r,"lab");const[e,t,n]=r;let i,a,o,s,l,u;return a=(e+16)/116,i=isNaN(t)?a:a+t/500,o=isNaN(n)?a:a-n/200,a=Ha.Yn*aC(a),i=Ha.Xn*aC(i),o=Ha.Zn*aC(o),s=iC(3.2404542*i-1.5371385*a-.4985314*o),l=iC(-.969266*i+1.8760108*a+.041556*o),u=iC(.0556434*i-.2040259*a+1.0572252*o),[s,l,u,r.length>3?r[3]:1]},iC=r=>255*(r<=.00304?12.92*r:1.055*K8e(r,1/2.4)-.055),aC=r=>r>Ha.t1?r*r*r:Ha.t2*(r-Ha.t0),{pow:Dq}=Math,Nq=(...r)=>{const[e,t,n]=Yr(r,"rgb"),[i,a,o]=q8e(e,t,n),s=116*a-16;return[s<0?0:s,500*(i-a),200*(a-o)]},oC=r=>(r/=255)<=.04045?r/12.92:Dq((r+.055)/1.055,2.4),sC=r=>r>Ha.t3?Dq(r,1/3):r/Ha.t2+Ha.t0,q8e=(r,e,t)=>{r=oC(r),e=oC(e),t=oC(t);const n=sC((.4124564*r+.3575761*e+.1804375*t)/Ha.Xn),i=sC((.2126729*r+.7151522*e+.072175*t)/Ha.Yn),a=sC((.0193339*r+.119192*e+.9503041*t)/Ha.Zn);return[n,i,a]};yt.prototype.lab=function(){return Nq(this._rgb)};Nr.lab=(...r)=>new yt(...r,"lab");Ar.format.lab=Pq;Ar.autodetect.push({p:2,test:(...r)=>{if(r=Yr(r,"lab"),Hr(r)==="array"&&r.length===3)return"lab"}});const{sin:Z8e,cos:Q8e}=Math,Rq=(...r)=>{let[e,t,n]=Yr(r,"lch");return isNaN(n)&&(n=0),n=n*A8e,[e,Q8e(n)*t,Z8e(n)*t]},Bq=(...r)=>{r=Yr(r,"lch");const[e,t,n]=r,[i,a,o]=Rq(e,t,n),[s,l,u]=Pq(i,a,o);return[s,l,u,r.length>3?r[3]:1]},J8e=(...r)=>{const e=Yr(r,"hcl").reverse();return Bq(...e)},{sqrt:e$e,atan2:t$e,round:r$e}=Math,Fq=(...r)=>{const[e,t,n]=Yr(r,"lab"),i=e$e(t*t+n*n);let a=(t$e(n,t)*T8e+360)%360;return r$e(i*1e4)===0&&(a=Number.NaN),[e,i,a]},$q=(...r)=>{const[e,t,n]=Yr(r,"rgb"),[i,a,o]=Nq(e,t,n);return Fq(i,a,o)};yt.prototype.lch=function(){return $q(this._rgb)};yt.prototype.hcl=function(){return $q(this._rgb).reverse()};Nr.lch=(...r)=>new yt(...r,"lch");Nr.hcl=(...r)=>new yt(...r,"hcl");Ar.format.lch=Bq;Ar.format.hcl=J8e;["lch","hcl"].forEach(r=>Ar.autodetect.push({p:2,test:(...e)=>{if(e=Yr(e,r),Hr(e)==="array"&&e.length===3)return r}}));const ap={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};yt.prototype.name=function(){const r=Lq(this._rgb,"rgb");for(let e of Object.keys(ap))if(ap[e]===r)return e.toLowerCase();return r};Ar.format.named=r=>{if(r=r.toLowerCase(),ap[r])return Iq(ap[r]);throw new Error("unknown color name: "+r)};Ar.autodetect.push({p:5,test:(r,...e)=>{if(!e.length&&Hr(r)==="string"&&ap[r.toLowerCase()])return"named"}});const n$e=r=>{if(Hr(r)=="number"&&r>=0&&r<=16777215){const e=r>>16,t=r>>8&255,n=r&255;return[e,t,n,1]}throw new Error("unknown num color: "+r)},i$e=(...r)=>{const[e,t,n]=Yr(r,"rgb");return(e<<16)+(t<<8)+n};yt.prototype.num=function(){return i$e(this._rgb)};Nr.num=(...r)=>new yt(...r,"num");Ar.format.num=n$e;Ar.autodetect.push({p:5,test:(...r)=>{if(r.length===1&&Hr(r[0])==="number"&&r[0]>=0&&r[0]<=16777215)return"num"}});const{round:zq}=Math;yt.prototype.rgb=function(r=!0){return r===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(zq)};yt.prototype.rgba=function(r=!0){return this._rgb.slice(0,4).map((e,t)=>t<3?r===!1?e:zq(e):e)};Nr.rgb=(...r)=>new yt(...r,"rgb");Ar.format.rgb=(...r)=>{const e=Yr(r,"rgba");return e[3]===void 0&&(e[3]=1),e};Ar.autodetect.push({p:3,test:(...r)=>{if(r=Yr(r,"rgba"),Hr(r)==="array"&&(r.length===3||r.length===4&&Hr(r[3])=="number"&&r[3]>=0&&r[3]<=1))return"rgb"}});const{log:sb}=Math,Gq=r=>{const e=r/100;let t,n,i;return e<66?(t=255,n=e<6?0:-155.25485562709179-.44596950469579133*(n=e-2)+104.49216199393888*sb(n),i=e<20?0:-254.76935184120902+.8274096064007395*(i=e-10)+115.67994401066147*sb(i)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*sb(t),n=325.4494125711974+.07943456536662342*(n=e-50)-28.0852963507957*sb(n),i=255),[t,n,i,1]},{round:a$e}=Math,o$e=(...r)=>{const e=Yr(r,"rgb"),t=e[0],n=e[2];let i=1e3,a=4e4;const o=.4;let s;for(;a-i>o;){s=(a+i)*.5;const l=Gq(s);l[2]/l[0]>=n/t?a=s:i=s}return a$e(s)};yt.prototype.temp=yt.prototype.kelvin=yt.prototype.temperature=function(){return o$e(this._rgb)};Nr.temp=Nr.kelvin=Nr.temperature=(...r)=>new yt(...r,"temp");Ar.format.temp=Ar.format.kelvin=Ar.format.temperature=Gq;const{pow:bx,sign:s$e}=Math,jq=(...r)=>{r=Yr(r,"lab");const[e,t,n]=r,i=bx(e+.3963377774*t+.2158037573*n,3),a=bx(e-.1055613458*t-.0638541728*n,3),o=bx(e-.0894841775*t-1.291485548*n,3);return[255*lC(4.0767416621*i-3.3077115913*a+.2309699292*o),255*lC(-1.2684380046*i+2.6097574011*a-.3413193965*o),255*lC(-.0041960863*i-.7034186147*a+1.707614701*o),r.length>3?r[3]:1]};function lC(r){const e=Math.abs(r);return e>.0031308?(s$e(r)||1)*(1.055*bx(e,1/2.4)-.055):r*12.92}const{cbrt:uC,pow:l$e,sign:u$e}=Math,Uq=(...r)=>{const[e,t,n]=Yr(r,"rgb"),[i,a,o]=[fC(e/255),fC(t/255),fC(n/255)],s=uC(.4122214708*i+.5363325363*a+.0514459929*o),l=uC(.2119034982*i+.6806995451*a+.1073969566*o),u=uC(.0883024619*i+.2817188376*a+.6299787005*o);return[.2104542553*s+.793617785*l-.0040720468*u,1.9779984951*s-2.428592205*l+.4505937099*u,.0259040371*s+.7827717662*l-.808675766*u]};function fC(r){const e=Math.abs(r);return e<.04045?r/12.92:(u$e(r)||1)*l$e((e+.055)/1.055,2.4)}yt.prototype.oklab=function(){return Uq(this._rgb)};Nr.oklab=(...r)=>new yt(...r,"oklab");Ar.format.oklab=jq;Ar.autodetect.push({p:3,test:(...r)=>{if(r=Yr(r,"oklab"),Hr(r)==="array"&&r.length===3)return"oklab"}});const f$e=(...r)=>{r=Yr(r,"lch");const[e,t,n]=r,[i,a,o]=Rq(e,t,n),[s,l,u]=jq(i,a,o);return[s,l,u,r.length>3?r[3]:1]},c$e=(...r)=>{const[e,t,n]=Yr(r,"rgb"),[i,a,o]=Uq(e,t,n);return Fq(i,a,o)};yt.prototype.oklch=function(){return c$e(this._rgb)};Nr.oklch=(...r)=>new yt(...r,"oklch");Ar.format.oklch=f$e;Ar.autodetect.push({p:3,test:(...r)=>{if(r=Yr(r,"oklch"),Hr(r)==="array"&&r.length===3)return"oklch"}});yt.prototype.alpha=function(r,e=!1){return r!==void 0&&Hr(r)==="number"?e?(this._rgb[3]=r,this):new yt([this._rgb[0],this._rgb[1],this._rgb[2],r],"rgb"):this._rgb[3]};yt.prototype.clipped=function(){return this._rgb._clipped||!1};yt.prototype.darken=function(r=1){const e=this,t=e.lab();return t[0]-=Ha.Kn*r,new yt(t,"lab").alpha(e.alpha(),!0)};yt.prototype.brighten=function(r=1){return this.darken(-r)};yt.prototype.darker=yt.prototype.darken;yt.prototype.brighter=yt.prototype.brighten;yt.prototype.get=function(r){const[e,t]=r.split("."),n=this[e]();if(t){const i=e.indexOf(t)-(e.substr(0,2)==="ok"?2:0);if(i>-1)return n[i];throw new Error(`unknown channel ${t} in mode ${e}`)}else return n};const{pow:h$e}=Math,d$e=1e-7,v$e=20;yt.prototype.luminance=function(r,e="rgb"){if(r!==void 0&&Hr(r)==="number"){if(r===0)return new yt([0,0,0,this._rgb[3]],"rgb");if(r===1)return new yt([255,255,255,this._rgb[3]],"rgb");let t=this.luminance(),n=v$e;const i=(o,s)=>{const l=o.interpolate(s,.5,e),u=l.luminance();return Math.abs(r-u)<d$e||!n--?l:u>r?i(o,l):i(l,s)},a=(t>r?i(new yt([0,0,0]),this):i(this,new yt([255,255,255]))).rgb();return new yt([...a,this._rgb[3]])}return p$e(...this._rgb.slice(0,3))};const p$e=(r,e,t)=>(r=cC(r),e=cC(e),t=cC(t),.2126*r+.7152*e+.0722*t),cC=r=>(r/=255,r<=.03928?r/12.92:h$e((r+.055)/1.055,2.4)),va={},im=(r,e,t=.5,...n)=>{let i=n[0]||"lrgb";if(!va[i]&&!n.length&&(i=Object.keys(va)[0]),!va[i])throw new Error(`interpolation mode ${i} is not defined`);return Hr(r)!=="object"&&(r=new yt(r)),Hr(e)!=="object"&&(e=new yt(e)),va[i](r,e,t).alpha(r.alpha()+t*(e.alpha()-r.alpha()))};yt.prototype.mix=yt.prototype.interpolate=function(r,e=.5,...t){return im(this,r,e,...t)};yt.prototype.premultiply=function(r=!1){const e=this._rgb,t=e[3];return r?(this._rgb=[e[0]*t,e[1]*t,e[2]*t,t],this):new yt([e[0]*t,e[1]*t,e[2]*t,t],"rgb")};yt.prototype.saturate=function(r=1){const e=this,t=e.lch();return t[1]+=Ha.Kn*r,t[1]<0&&(t[1]=0),new yt(t,"lch").alpha(e.alpha(),!0)};yt.prototype.desaturate=function(r=1){return this.saturate(-r)};yt.prototype.set=function(r,e,t=!1){const[n,i]=r.split("."),a=this[n]();if(i){const o=n.indexOf(i)-(n.substr(0,2)==="ok"?2:0);if(o>-1){if(Hr(e)=="string")switch(e.charAt(0)){case"+":a[o]+=+e;break;case"-":a[o]+=+e;break;case"*":a[o]*=+e.substr(1);break;case"/":a[o]/=+e.substr(1);break;default:a[o]=+e}else if(Hr(e)==="number")a[o]=e;else throw new Error("unsupported value for Color.set");const s=new yt(a,n);return t?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${i} in mode ${n}`)}else return a};yt.prototype.tint=function(r=.5,...e){return im(this,"white",r,...e)};yt.prototype.shade=function(r=.5,...e){return im(this,"black",r,...e)};const g$e=(r,e,t)=>{const n=r._rgb,i=e._rgb;return new yt(n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1]),n[2]+t*(i[2]-n[2]),"rgb")};va.rgb=g$e;const{sqrt:hC,pow:Vd}=Math,m$e=(r,e,t)=>{const[n,i,a]=r._rgb,[o,s,l]=e._rgb;return new yt(hC(Vd(n,2)*(1-t)+Vd(o,2)*t),hC(Vd(i,2)*(1-t)+Vd(s,2)*t),hC(Vd(a,2)*(1-t)+Vd(l,2)*t),"rgb")};va.lrgb=m$e;const y$e=(r,e,t)=>{const n=r.lab(),i=e.lab();return new yt(n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1]),n[2]+t*(i[2]-n[2]),"lab")};va.lab=y$e;const kp=(r,e,t,n)=>{let i,a;n==="hsl"?(i=r.hsl(),a=e.hsl()):n==="hsv"?(i=r.hsv(),a=e.hsv()):n==="hcg"?(i=r.hcg(),a=e.hcg()):n==="hsi"?(i=r.hsi(),a=e.hsi()):n==="lch"||n==="hcl"?(n="hcl",i=r.hcl(),a=e.hcl()):n==="oklch"&&(i=r.oklch().reverse(),a=e.oklch().reverse());let o,s,l,u,f,c;(n.substr(0,1)==="h"||n==="oklch")&&([o,l,f]=i,[s,u,c]=a);let h,d,v,p;return!isNaN(o)&&!isNaN(s)?(s>o&&s-o>180?p=s-(o+360):s<o&&o-s>180?p=s+360-o:p=s-o,d=o+t*p):isNaN(o)?isNaN(s)?d=Number.NaN:(d=s,(f==1||f==0)&&n!="hsv"&&(h=u)):(d=o,(c==1||c==0)&&n!="hsv"&&(h=l)),h===void 0&&(h=l+t*(u-l)),v=f+t*(c-f),n==="oklch"?new yt([v,h,d],n):new yt([d,h,v],n)},Wq=(r,e,t)=>kp(r,e,t,"lch");va.lch=Wq;va.hcl=Wq;const b$e=(r,e,t)=>{const n=r.num(),i=e.num();return new yt(n+t*(i-n),"num")};va.num=b$e;const x$e=(r,e,t)=>kp(r,e,t,"hcg");va.hcg=x$e;const w$e=(r,e,t)=>kp(r,e,t,"hsi");va.hsi=w$e;const E$e=(r,e,t)=>kp(r,e,t,"hsl");va.hsl=E$e;const _$e=(r,e,t)=>kp(r,e,t,"hsv");va.hsv=_$e;const S$e=(r,e,t)=>{const n=r.oklab(),i=e.oklab();return new yt(n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1]),n[2]+t*(i[2]-n[2]),"oklab")};va.oklab=S$e;const M$e=(r,e,t)=>kp(r,e,t,"oklch");va.oklch=M$e;const{pow:dC,sqrt:vC,PI:pC,cos:T8,sin:O8,atan2:C$e}=Math,A$e=(r,e="lrgb",t=null)=>{const n=r.length;t||(t=Array.from(new Array(n)).map(()=>1));const i=n/t.reduce(function(c,h){return c+h});if(t.forEach((c,h)=>{t[h]*=i}),r=r.map(c=>new yt(c)),e==="lrgb")return T$e(r,t);const a=r.shift(),o=a.get(e),s=[];let l=0,u=0;for(let c=0;c<o.length;c++)if(o[c]=(o[c]||0)*t[0],s.push(isNaN(o[c])?0:t[0]),e.charAt(c)==="h"&&!isNaN(o[c])){const h=o[c]/180*pC;l+=T8(h)*t[0],u+=O8(h)*t[0]}let f=a.alpha()*t[0];r.forEach((c,h)=>{const d=c.get(e);f+=c.alpha()*t[h+1];for(let v=0;v<o.length;v++)if(!isNaN(d[v]))if(s[v]+=t[h+1],e.charAt(v)==="h"){const p=d[v]/180*pC;l+=T8(p)*t[h+1],u+=O8(p)*t[h+1]}else o[v]+=d[v]*t[h+1]});for(let c=0;c<o.length;c++)if(e.charAt(c)==="h"){let h=C$e(u/s[c],l/s[c])/pC*180;for(;h<0;)h+=360;for(;h>=360;)h-=360;o[c]=h}else o[c]=o[c]/s[c];return f/=n,new yt(o,e).alpha(f>.99999?1:f,!0)},T$e=(r,e)=>{const t=r.length,n=[0,0,0,0];for(let i=0;i<r.length;i++){const a=r[i],o=e[i]/t,s=a._rgb;n[0]+=dC(s[0],2)*o,n[1]+=dC(s[1],2)*o,n[2]+=dC(s[2],2)*o,n[3]+=s[3]*o}return n[0]=vC(n[0]),n[1]=vC(n[1]),n[2]=vC(n[2]),n[3]>.9999999&&(n[3]=1),new yt(dP(n))},{pow:O$e}=Math;function Uw(r){let e="rgb",t=Nr("#ccc"),n=0,i=[0,1],a=[],o=[0,0],s=!1,l=[],u=!1,f=0,c=1,h=!1,d={},v=!0,p=1;const g=function(_){if(_=_||["#fff","#000"],_&&Hr(_)==="string"&&Nr.brewer&&Nr.brewer[_.toLowerCase()]&&(_=Nr.brewer[_.toLowerCase()]),Hr(_)==="array"){_.length===1&&(_=[_[0],_[0]]),_=_.slice(0);for(let S=0;S<_.length;S++)_[S]=Nr(_[S]);a.length=0;for(let S=0;S<_.length;S++)a.push(S/(_.length-1))}return w(),l=_},m=function(_){if(s!=null){const S=s.length-1;let C=0;for(;C<S&&_>=s[C];)C++;return C-1}return 0};let b=_=>_,y=_=>_;const x=function(_,S){let C,M;if(S==null&&(S=!1),isNaN(_)||_===null)return t;S?M=_:s&&s.length>2?M=m(_)/(s.length-2):c!==f?M=(_-f)/(c-f):M=1,M=y(M),S||(M=b(M)),p!==1&&(M=O$e(M,p)),M=o[0]+M*(1-o[0]-o[1]),M=Cv(M,0,1);const T=Math.floor(M*1e4);if(v&&d[T])C=d[T];else{if(Hr(l)==="array")for(let A=0;A<a.length;A++){const O=a[A];if(M<=O){C=l[A];break}if(M>=O&&A===a.length-1){C=l[A];break}if(M>O&&M<a[A+1]){M=(M-O)/(a[A+1]-O),C=Nr.interpolate(l[A],l[A+1],M,e);break}}else Hr(l)==="function"&&(C=l(M));v&&(d[T]=C)}return C};var w=()=>d={};g(r);const E=function(_){const S=Nr(x(_));return u&&S[u]?S[u]():S};return E.classes=function(_){if(_!=null){if(Hr(_)==="array")s=_,i=[_[0],_[_.length-1]];else{const S=Nr.analyze(i);_===0?s=[S.min,S.max]:s=Nr.limits(S,"e",_)}return E}return s},E.domain=function(_){if(!arguments.length)return i;f=_[0],c=_[_.length-1],a=[];const S=l.length;if(_.length===S&&f!==c)for(let C of Array.from(_))a.push((C-f)/(c-f));else{for(let C=0;C<S;C++)a.push(C/(S-1));if(_.length>2){const C=_.map((T,A)=>A/(_.length-1)),M=_.map(T=>(T-f)/(c-f));M.every((T,A)=>C[A]===T)||(y=T=>{if(T<=0||T>=1)return T;let A=0;for(;T>=M[A+1];)A++;const O=(T-M[A])/(M[A+1]-M[A]);return C[A]+O*(C[A+1]-C[A])})}}return i=[f,c],E},E.mode=function(_){return arguments.length?(e=_,w(),E):e},E.range=function(_,S){return g(_),E},E.out=function(_){return u=_,E},E.spread=function(_){return arguments.length?(n=_,E):n},E.correctLightness=function(_){return _==null&&(_=!0),h=_,w(),h?b=function(S){const C=x(0,!0).lab()[0],M=x(1,!0).lab()[0],T=C>M;let A=x(S,!0).lab()[0];const O=C+(M-C)*S;let L=A-O,N=0,P=1,R=20;for(;Math.abs(L)>.01&&R-- >0;)(function(){return T&&(L*=-1),L<0?(N=S,S+=(P-S)*.5):(P=S,S+=(N-S)*.5),A=x(S,!0).lab()[0],L=A-O})();return S}:b=S=>S,E},E.padding=function(_){return _!=null?(Hr(_)==="number"&&(_=[_,_]),o=_,E):o},E.colors=function(_,S){arguments.length<2&&(S="hex");let C=[];if(arguments.length===0)C=l.slice(0);else if(_===1)C=[E(.5)];else if(_>1){const M=i[0],T=i[1]-M;C=k$e(0,_,!1).map(A=>E(M+A/(_-1)*T))}else{r=[];let M=[];if(s&&s.length>2)for(let T=1,A=s.length,O=1<=A;O?T<A:T>A;O?T++:T--)M.push((s[T-1]+s[T])*.5);else M=i;C=M.map(T=>E(T))}return Nr[S]&&(C=C.map(M=>M[S]())),C},E.cache=function(_){return _!=null?(v=_,E):v},E.gamma=function(_){return _!=null?(p=_,E):p},E.nodata=function(_){return _!=null?(t=Nr(_),E):t},E}function k$e(r,e,t){let n=[],i=r<e,a=t?i?e+1:e-1:e;for(let o=r;i?o<a:o>a;i?o++:o--)n.push(o);return n}const I$e=function(r){let e=[1,1];for(let t=1;t<r;t++){let n=[1];for(let i=1;i<=e.length;i++)n[i]=(e[i]||0)+e[i-1];e=n}return e},L$e=function(r){let e,t,n,i;if(r=r.map(a=>new yt(a)),r.length===2)[t,n]=r.map(a=>a.lab()),e=function(a){const o=[0,1,2].map(s=>t[s]+a*(n[s]-t[s]));return new yt(o,"lab")};else if(r.length===3)[t,n,i]=r.map(a=>a.lab()),e=function(a){const o=[0,1,2].map(s=>(1-a)*(1-a)*t[s]+2*(1-a)*a*n[s]+a*a*i[s]);return new yt(o,"lab")};else if(r.length===4){let a;[t,n,i,a]=r.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(l=>(1-o)*(1-o)*(1-o)*t[l]+3*(1-o)*(1-o)*o*n[l]+3*(1-o)*o*o*i[l]+o*o*o*a[l]);return new yt(s,"lab")}}else if(r.length>=5){let a,o,s;a=r.map(l=>l.lab()),s=r.length-1,o=I$e(s),e=function(l){const u=1-l,f=[0,1,2].map(c=>a.reduce((h,d,v)=>h+o[v]*u**(s-v)*l**v*d[c],0));return new yt(f,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},P$e=r=>{const e=L$e(r);return e.scale=()=>Uw(e),e},ks=(r,e,t)=>{if(!ks[t])throw new Error("unknown blend mode "+t);return ks[t](r,e)},xc=r=>(e,t)=>{const n=Nr(t).rgb(),i=Nr(e).rgb();return Nr.rgb(r(n,i))},wc=r=>(e,t)=>{const n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n},D$e=r=>r,N$e=(r,e)=>r*e/255,R$e=(r,e)=>r>e?e:r,B$e=(r,e)=>r>e?r:e,F$e=(r,e)=>255*(1-(1-r/255)*(1-e/255)),$$e=(r,e)=>e<128?2*r*e/255:255*(1-2*(1-r/255)*(1-e/255)),z$e=(r,e)=>255*(1-(1-e/255)/(r/255)),G$e=(r,e)=>r===255?255:(r=255*(e/255)/(1-r/255),r>255?255:r);ks.normal=xc(wc(D$e));ks.multiply=xc(wc(N$e));ks.screen=xc(wc(F$e));ks.overlay=xc(wc($$e));ks.darken=xc(wc(R$e));ks.lighten=xc(wc(B$e));ks.dodge=xc(wc(G$e));ks.burn=xc(wc(z$e));const{pow:j$e,sin:U$e,cos:W$e}=Math;function V$e(r=300,e=-1.5,t=1,n=1,i=[0,1]){let a=0,o;Hr(i)==="array"?o=i[1]-i[0]:(o=0,i=[i,i]);const s=function(l){const u=xu*((r+120)/360+e*l),f=j$e(i[0]+o*l,n),h=(a!==0?t[0]+l*a:t)*f*(1-f)/2,d=W$e(u),v=U$e(u),p=f+h*(-.14861*d+1.78277*v),g=f+h*(-.29227*d-.90649*v),m=f+h*(1.97294*d);return Nr(dP([p*255,g*255,m*255,1]))};return s.start=function(l){return l==null?r:(r=l,s)},s.rotations=function(l){return l==null?e:(e=l,s)},s.gamma=function(l){return l==null?n:(n=l,s)},s.hue=function(l){return l==null?t:(t=l,Hr(t)==="array"?(a=t[1]-t[0],a===0&&(t=t[1])):a=0,s)},s.lightness=function(l){return l==null?i:(Hr(l)==="array"?(i=l,o=l[1]-l[0]):(i=[l,l],o=0),s)},s.scale=()=>Nr.scale(s),s.hue(t),s}const H$e="0123456789abcdef",{floor:X$e,random:Y$e}=Math,K$e=()=>{let r="#";for(let e=0;e<6;e++)r+=H$e.charAt(X$e(Y$e()*16));return new yt(r,"hex")},{log:k8,pow:q$e,floor:Z$e,abs:Q$e}=Math;function Vq(r,e=null){const t={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Hr(r)==="object"&&(r=Object.values(r)),r.forEach(n=>{e&&Hr(n)==="object"&&(n=n[e]),n!=null&&!isNaN(n)&&(t.values.push(n),t.sum+=n,n<t.min&&(t.min=n),n>t.max&&(t.max=n),t.count+=1)}),t.domain=[t.min,t.max],t.limits=(n,i)=>Hq(t,n,i),t}function Hq(r,e="equal",t=7){Hr(r)=="array"&&(r=Vq(r));const{min:n,max:i}=r,a=r.values.sort((s,l)=>s-l);if(t===1)return[n,i];const o=[];if(e.substr(0,1)==="c"&&(o.push(n),o.push(i)),e.substr(0,1)==="e"){o.push(n);for(let s=1;s<t;s++)o.push(n+s/t*(i-n));o.push(i)}else if(e.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");const s=Math.LOG10E*k8(n),l=Math.LOG10E*k8(i);o.push(n);for(let u=1;u<t;u++)o.push(q$e(10,s+u/t*(l-s)));o.push(i)}else if(e.substr(0,1)==="q"){o.push(n);for(let s=1;s<t;s++){const l=(a.length-1)*s/t,u=Z$e(l);if(u===l)o.push(a[u]);else{const f=l-u;o.push(a[u]*(1-f)+a[u+1]*f)}}o.push(i)}else if(e.substr(0,1)==="k"){let s;const l=a.length,u=new Array(l),f=new Array(t);let c=!0,h=0,d=null;d=[],d.push(n);for(let g=1;g<t;g++)d.push(n+g/t*(i-n));for(d.push(i);c;){for(let m=0;m<t;m++)f[m]=0;for(let m=0;m<l;m++){const b=a[m];let y=Number.MAX_VALUE,x;for(let w=0;w<t;w++){const E=Q$e(d[w]-b);E<y&&(y=E,x=w),f[x]++,u[m]=x}}const g=new Array(t);for(let m=0;m<t;m++)g[m]=null;for(let m=0;m<l;m++)s=u[m],g[s]===null?g[s]=a[m]:g[s]+=a[m];for(let m=0;m<t;m++)g[m]*=1/f[m];c=!1;for(let m=0;m<t;m++)if(g[m]!==d[m]){c=!0;break}d=g,h++,h>200&&(c=!1)}const v={};for(let g=0;g<t;g++)v[g]=[];for(let g=0;g<l;g++)s=u[g],v[s].push(a[g]);let p=[];for(let g=0;g<t;g++)p.push(v[g][0]),p.push(v[g][v[g].length-1]);p=p.sort((g,m)=>g-m),o.push(p[0]);for(let g=1;g<p.length;g+=2){const m=p[g];!isNaN(m)&&o.indexOf(m)===-1&&o.push(m)}}return o}const J$e=(r,e)=>{r=new yt(r),e=new yt(e);const t=r.luminance(),n=e.luminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},{sqrt:hu,pow:ci,min:eze,max:tze,atan2:I8,abs:L8,cos:lb,sin:P8,exp:rze,PI:D8}=Math;function nze(r,e,t=1,n=1,i=1){var a=function(ne){return 360*ne/(2*D8)},o=function(ne){return 2*D8*ne/360};r=new yt(r),e=new yt(e);const[s,l,u]=Array.from(r.lab()),[f,c,h]=Array.from(e.lab()),d=(s+f)/2,v=hu(ci(l,2)+ci(u,2)),p=hu(ci(c,2)+ci(h,2)),g=(v+p)/2,m=.5*(1-hu(ci(g,7)/(ci(g,7)+ci(25,7)))),b=l*(1+m),y=c*(1+m),x=hu(ci(b,2)+ci(u,2)),w=hu(ci(y,2)+ci(h,2)),E=(x+w)/2,_=a(I8(u,b)),S=a(I8(h,y)),C=_>=0?_:_+360,M=S>=0?S:S+360,T=L8(C-M)>180?(C+M+360)/2:(C+M)/2,A=1-.17*lb(o(T-30))+.24*lb(o(2*T))+.32*lb(o(3*T+6))-.2*lb(o(4*T-63));let O=M-C;O=L8(O)<=180?O:M<=C?O+360:O-360,O=2*hu(x*w)*P8(o(O)/2);const L=f-s,N=w-x,P=1+.015*ci(d-50,2)/hu(20+ci(d-50,2)),R=1+.045*E,G=1+.015*E*A,D=30*rze(-ci((T-275)/25,2)),Y=-(2*hu(ci(E,7)/(ci(E,7)+ci(25,7))))*P8(2*o(D)),ee=hu(ci(L/(t*P),2)+ci(N/(n*R),2)+ci(O/(i*G),2)+Y*(N/(n*R))*(O/(i*G)));return tze(0,eze(100,ee))}function ize(r,e,t="lab"){r=new yt(r),e=new yt(e);const n=r.get(t),i=e.get(t);let a=0;for(let o in n){const s=(n[o]||0)-(i[o]||0);a+=s*s}return Math.sqrt(a)}const aze=(...r)=>{try{return new yt(...r),!0}catch{return!1}},oze={cool(){return Uw([Nr.hsl(180,1,.9),Nr.hsl(250,.7,.4)])},hot(){return Uw(["#000","#f00","#ff0","#fff"]).mode("rgb")}},xx={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};for(let r of Object.keys(xx))xx[r.toLowerCase()]=xx[r];Object.assign(Nr,{average:A$e,bezier:P$e,blend:ks,cubehelix:V$e,mix:im,interpolate:im,random:K$e,scale:Uw,analyze:Vq,contrast:J$e,deltaE:nze,distance:ize,limits:Hq,valid:aze,scales:oze,input:Ar,colors:ap,brewer:xx});function mP(r){return OE()?(kE(r),!0):!1}function Nl(r){return typeof r=="function"?r():$(r)}const sze=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const lze=Object.prototype.toString,uze=r=>lze.call(r)==="[object Object]",Ww=()=>{};function Xq(r,e){function t(...n){return new Promise((i,a)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(a)})}return t}const Yq=r=>r();function Kq(r,e={}){let t,n,i=Ww;const a=s=>{clearTimeout(s),i(),i=Ww};return s=>{const l=Nl(r),u=Nl(e.maxWait);return t&&a(t),l<=0||u!==void 0&&u<=0?(n&&(a(n),n=null),Promise.resolve(s())):new Promise((f,c)=>{i=e.rejectOnCancel?c:f,u&&!n&&(n=setTimeout(()=>{t&&a(t),n=null,f(s())},u)),t=setTimeout(()=>{n&&a(n),n=null,f(s())},l)})}}function fze(r=Yq){const e=xt(!0);function t(){e.value=!1}function n(){e.value=!0}const i=(...a)=>{e.value&&r(...a)};return{isActive:wp(e),pause:t,resume:n,eventFilter:i}}function cze(r,e){var t;if(typeof r=="number")return r+e;const n=((t=r.match(/^-?\d+\.?\d*/))==null?void 0:t[0])||"",i=r.slice(n.length),a=Number.parseFloat(n)+e;return Number.isNaN(a)?r:a+i}function hze(r){return r||Wn()}function dze(...r){if(r.length!==1)return vl(...r);const e=r[0];return typeof e=="function"?wp(xj(()=>({get:e,set:Ww}))):xt(e)}function _rt(r,e=200,t={}){return Xq(Kq(e,t),r)}function qq(r,e,t={}){const{eventFilter:n=Yq,...i}=t;return qt(r,Xq(n,e),i)}function vze(r,e,t={}){const{eventFilter:n,...i}=t,{eventFilter:a,pause:o,resume:s,isActive:l}=fze(n);return{stop:qq(r,e,{...i,eventFilter:a}),pause:o,resume:s,isActive:l}}function X_(r,e=!0,t){hze()?Fn(r,t):e?r():di(r)}function Srt(r=!1,e={}){const{truthyValue:t=!0,falsyValue:n=!1}=e,i=Sn(r),a=xt(r);function o(s){if(arguments.length)return a.value=s,a.value;{const l=Nl(t);return a.value=a.value===l?Nl(n):l,a.value}}return i?o:[a,o]}function Mrt(r,e,t={}){const{debounce:n=0,maxWait:i=void 0,...a}=t;return qq(r,e,{...a,eventFilter:Kq(n,{maxWait:i})})}function Nf(r){var e;const t=Nl(r);return(e=t==null?void 0:t.$el)!=null?e:t}const Rl=sze?window:void 0;function oO(...r){let e,t,n,i;if(typeof r[0]=="string"||Array.isArray(r[0])?([t,n,i]=r,e=Rl):[e,t,n,i]=r,!e)return Ww;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const a=[],o=()=>{a.forEach(f=>f()),a.length=0},s=(f,c,h,d)=>(f.addEventListener(c,h,d),()=>f.removeEventListener(c,h,d)),l=qt(()=>[Nf(e),Nl(i)],([f,c])=>{if(o(),!f)return;const h=uze(c)?{...c}:c;a.push(...t.flatMap(d=>n.map(v=>s(f,d,v,h))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return mP(u),u}function pze(){const r=xt(!1),e=Wn();return e&&Fn(()=>{r.value=!0},e),r}function Zq(r){const e=pze();return Me(()=>(e.value,!!r()))}function lh(r,e={}){const{window:t=Rl}=e,n=Zq(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let i;const a=xt(!1),o=u=>{a.value=u.matches},s=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",o):i.removeListener(o))},l=Zj(()=>{n.value&&(s(),i=t.matchMedia(Nl(r)),"addEventListener"in i?i.addEventListener("change",o):i.addListener(o),a.value=i.matches)});return mP(()=>{l(),s(),i=void 0}),a}const Crt={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function Art(r,e={}){function t(f,c){let h=Nl(r[Nl(f)]);return c!=null&&(h=cze(h,c)),typeof h=="number"&&(h=`${h}px`),h}const{window:n=Rl,strategy:i="min-width"}=e;function a(f){return n?n.matchMedia(f).matches:!1}const o=f=>lh(()=>`(min-width: ${t(f)})`,e),s=f=>lh(()=>`(max-width: ${t(f)})`,e),l=Object.keys(r).reduce((f,c)=>(Object.defineProperty(f,c,{get:()=>i==="min-width"?o(c):s(c),enumerable:!0,configurable:!0}),f),{});function u(){const f=Object.keys(r).map(c=>[c,o(c)]);return Me(()=>f.filter(([,c])=>c.value).map(([c])=>c))}return Object.assign(l,{greaterOrEqual:o,smallerOrEqual:s,greater(f){return lh(()=>`(min-width: ${t(f,.1)})`,e)},smaller(f){return lh(()=>`(max-width: ${t(f,-.1)})`,e)},between(f,c){return lh(()=>`(min-width: ${t(f)}) and (max-width: ${t(c,-.1)})`,e)},isGreater(f){return a(`(min-width: ${t(f,.1)})`)},isGreaterOrEqual(f){return a(`(min-width: ${t(f)})`)},isSmaller(f){return a(`(max-width: ${t(f,-.1)})`)},isSmallerOrEqual(f){return a(`(max-width: ${t(f)})`)},isInBetween(f,c){return a(`(min-width: ${t(f)}) and (max-width: ${t(c,-.1)})`)},current:u,active(){const f=u();return Me(()=>f.value.length===0?"":f.value.at(-1))}})}const ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fb="__vueuse_ssr_handlers__",gze=mze();function mze(){return fb in ub||(ub[fb]=ub[fb]||{}),ub[fb]}function Qq(r,e){return gze[r]||e}function yze(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const bze={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},N8="vueuse-storage";function xze(r,e,t,n={}){var i;const{flush:a="pre",deep:o=!0,listenToStorageChanges:s=!0,writeDefaults:l=!0,mergeDefaults:u=!1,shallow:f,window:c=Rl,eventFilter:h,onError:d=M=>{console.error(M)},initOnMounted:v}=n,p=(f?As:xt)(typeof e=="function"?e():e);if(!t)try{t=Qq("getDefaultStorage",()=>{var M;return(M=Rl)==null?void 0:M.localStorage})()}catch(M){d(M)}if(!t)return p;const g=Nl(e),m=yze(g),b=(i=n.serializer)!=null?i:bze[m],{pause:y,resume:x}=vze(p,()=>E(p.value),{flush:a,deep:o,eventFilter:h});c&&s&&X_(()=>{oO(c,"storage",S),oO(c,N8,C),v&&S()}),v||S();function w(M,T){c&&c.dispatchEvent(new CustomEvent(N8,{detail:{key:r,oldValue:M,newValue:T,storageArea:t}}))}function E(M){try{const T=t.getItem(r);if(M==null)w(T,null),t.removeItem(r);else{const A=b.write(M);T!==A&&(t.setItem(r,A),w(T,A))}}catch(T){d(T)}}function _(M){const T=M?M.newValue:t.getItem(r);if(T==null)return l&&g!=null&&t.setItem(r,b.write(g)),g;if(!M&&u){const A=b.read(T);return typeof u=="function"?u(A,g):m==="object"&&!Array.isArray(A)?{...g,...A}:A}else return typeof T!="string"?T:b.read(T)}function S(M){if(!(M&&M.storageArea!==t)){if(M&&M.key==null){p.value=g;return}if(!(M&&M.key!==r)){y();try{(M==null?void 0:M.newValue)!==b.write(p.value)&&(p.value=_(M))}catch(T){d(T)}finally{M?di(x):x()}}}}function C(M){S(M.detail)}return p}function Jq(r){return lh("(prefers-color-scheme: dark)",r)}function wze(r={}){const{selector:e="html",attribute:t="class",initialValue:n="auto",window:i=Rl,storage:a,storageKey:o="vueuse-color-scheme",listenToStorageChanges:s=!0,storageRef:l,emitAuto:u,disableTransition:f=!0}=r,c={auto:"",light:"light",dark:"dark",...r.modes||{}},h=Jq({window:i}),d=Me(()=>h.value?"dark":"light"),v=l||(o==null?dze(n):xze(o,n,a,{window:i,listenToStorageChanges:s})),p=Me(()=>v.value==="auto"?d.value:v.value),g=Qq("updateHTMLAttrs",(x,w,E)=>{const _=typeof x=="string"?i==null?void 0:i.document.querySelector(x):Nf(x);if(!_)return;let S;if(f&&(S=i.document.createElement("style"),S.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),i.document.head.appendChild(S)),w==="class"){const C=E.split(/\s/g);Object.values(c).flatMap(M=>(M||"").split(/\s/g)).filter(Boolean).forEach(M=>{C.includes(M)?_.classList.add(M):_.classList.remove(M)})}else _.setAttribute(w,E);f&&(i.getComputedStyle(S).opacity,document.head.removeChild(S))});function m(x){var w;g(e,t,(w=c[x])!=null?w:x)}function b(x){r.onChanged?r.onChanged(x,m):m(x)}qt(p,b,{flush:"post",immediate:!0}),X_(()=>b(p.value));const y=Me({get(){return u?v.value:p.value},set(x){v.value=x}});try{return Object.assign(y,{store:v,system:d,state:p})}catch{return y}}function Trt(r={}){const{valueDark:e="dark",valueLight:t="",window:n=Rl}=r,i=wze({...r,onChanged:(s,l)=>{var u;r.onChanged?(u=r.onChanged)==null||u.call(r,s==="dark",l,s):l(s)},modes:{dark:e,light:t}}),a=Me(()=>i.system?i.system.value:Jq({window:n}).value?"dark":"light");return Me({get(){return i.value==="dark"},set(s){const l=s?"dark":"light";a.value===l?i.value="auto":i.value=l}})}function Eze(r,e,t={}){const{window:n=Rl,...i}=t;let a;const o=Zq(()=>n&&"ResizeObserver"in n),s=()=>{a&&(a.disconnect(),a=void 0)},l=Me(()=>Array.isArray(r)?r.map(c=>Nf(c)):[Nf(r)]),u=qt(l,c=>{if(s(),o.value&&n){a=new ResizeObserver(e);for(const h of c)h&&a.observe(h,i)}},{immediate:!0,flush:"post"}),f=()=>{s(),u()};return mP(f),{isSupported:o,stop:f}}function Ort(r,e={width:0,height:0},t={}){const{window:n=Rl,box:i="content-box"}=t,a=Me(()=>{var c,h;return(h=(c=Nf(r))==null?void 0:c.namespaceURI)==null?void 0:h.includes("svg")}),o=xt(e.width),s=xt(e.height),{stop:l}=Eze(r,([c])=>{const h=i==="border-box"?c.borderBoxSize:i==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(n&&a.value){const d=Nf(r);if(d){const v=d.getBoundingClientRect();o.value=v.width,s.value=v.height}}else if(h){const d=Array.isArray(h)?h:[h];o.value=d.reduce((v,{inlineSize:p})=>v+p,0),s.value=d.reduce((v,{blockSize:p})=>v+p,0)}else o.value=c.contentRect.width,s.value=c.contentRect.height},t);X_(()=>{const c=Nf(r);c&&(o.value="offsetWidth"in c?c.offsetWidth:e.width,s.value="offsetHeight"in c?c.offsetHeight:e.height)});const u=qt(()=>Nf(r),c=>{o.value=c?e.width:0,s.value=c?e.height:0});function f(){l(),u()}return{width:o,height:s,stop:f}}function krt(r={}){const{window:e=Rl,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:n=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:a=!0}=r,o=xt(t),s=xt(n),l=()=>{e&&(a?(o.value=e.innerWidth,s.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,s.value=e.document.documentElement.clientHeight))};if(l(),X_(l),oO("resize",l,{passive:!0}),i){const u=lh("(orientation: portrait)");qt(u,()=>l())}return{width:o,height:s}}var yP={exports:{}};yP.exports;(function(r){var e=function(){var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function o(l,u){if(!a[l]){a[l]={};for(var f=0;f<l.length;f++)a[l][l.charAt(f)]=f}return a[l][u]}var s={compressToBase64:function(l){if(l==null)return"";var u=s._compress(l,6,function(f){return n.charAt(f)});switch(u.length%4){default:case 0:return u;case 1:return u+"===";case 2:return u+"==";case 3:return u+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:s._decompress(l.length,32,function(u){return o(n,l.charAt(u))})},compressToUTF16:function(l){return l==null?"":s._compress(l,15,function(u){return t(u+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:s._decompress(l.length,16384,function(u){return l.charCodeAt(u)-32})},compressToUint8Array:function(l){for(var u=s.compress(l),f=new Uint8Array(u.length*2),c=0,h=u.length;c<h;c++){var d=u.charCodeAt(c);f[c*2]=d>>>8,f[c*2+1]=d%256}return f},decompressFromUint8Array:function(l){if(l==null)return s.decompress(l);for(var u=new Array(l.length/2),f=0,c=u.length;f<c;f++)u[f]=l[f*2]*256+l[f*2+1];var h=[];return u.forEach(function(d){h.push(t(d))}),s.decompress(h.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":s._compress(l,6,function(u){return i.charAt(u)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),s._decompress(l.length,32,function(u){return o(i,l.charAt(u))}))},compress:function(l){return s._compress(l,16,function(u){return t(u)})},_compress:function(l,u,f){if(l==null)return"";var c,h,d={},v={},p="",g="",m="",b=2,y=3,x=2,w=[],E=0,_=0,S;for(S=0;S<l.length;S+=1)if(p=l.charAt(S),Object.prototype.hasOwnProperty.call(d,p)||(d[p]=y++,v[p]=!0),g=m+p,Object.prototype.hasOwnProperty.call(d,g))m=g;else{if(Object.prototype.hasOwnProperty.call(v,m)){if(m.charCodeAt(0)<256){for(c=0;c<x;c++)E=E<<1,_==u-1?(_=0,w.push(f(E)),E=0):_++;for(h=m.charCodeAt(0),c=0;c<8;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1}else{for(h=1,c=0;c<x;c++)E=E<<1|h,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=0;for(h=m.charCodeAt(0),c=0;c<16;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1}b--,b==0&&(b=Math.pow(2,x),x++),delete v[m]}else for(h=d[m],c=0;c<x;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1;b--,b==0&&(b=Math.pow(2,x),x++),d[g]=y++,m=String(p)}if(m!==""){if(Object.prototype.hasOwnProperty.call(v,m)){if(m.charCodeAt(0)<256){for(c=0;c<x;c++)E=E<<1,_==u-1?(_=0,w.push(f(E)),E=0):_++;for(h=m.charCodeAt(0),c=0;c<8;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1}else{for(h=1,c=0;c<x;c++)E=E<<1|h,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=0;for(h=m.charCodeAt(0),c=0;c<16;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1}b--,b==0&&(b=Math.pow(2,x),x++),delete v[m]}else for(h=d[m],c=0;c<x;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1;b--,b==0&&(b=Math.pow(2,x),x++)}for(h=2,c=0;c<x;c++)E=E<<1|h&1,_==u-1?(_=0,w.push(f(E)),E=0):_++,h=h>>1;for(;;)if(E=E<<1,_==u-1){w.push(f(E));break}else _++;return w.join("")},decompress:function(l){return l==null?"":l==""?null:s._decompress(l.length,32768,function(u){return l.charCodeAt(u)})},_decompress:function(l,u,f){var c=[],h=4,d=4,v=3,p="",g=[],m,b,y,x,w,E,_,S={val:f(0),position:u,index:1};for(m=0;m<3;m+=1)c[m]=m;for(y=0,w=Math.pow(2,2),E=1;E!=w;)x=S.val&S.position,S.position>>=1,S.position==0&&(S.position=u,S.val=f(S.index++)),y|=(x>0?1:0)*E,E<<=1;switch(y){case 0:for(y=0,w=Math.pow(2,8),E=1;E!=w;)x=S.val&S.position,S.position>>=1,S.position==0&&(S.position=u,S.val=f(S.index++)),y|=(x>0?1:0)*E,E<<=1;_=t(y);break;case 1:for(y=0,w=Math.pow(2,16),E=1;E!=w;)x=S.val&S.position,S.position>>=1,S.position==0&&(S.position=u,S.val=f(S.index++)),y|=(x>0?1:0)*E,E<<=1;_=t(y);break;case 2:return""}for(c[3]=_,b=_,g.push(_);;){if(S.index>l)return"";for(y=0,w=Math.pow(2,v),E=1;E!=w;)x=S.val&S.position,S.position>>=1,S.position==0&&(S.position=u,S.val=f(S.index++)),y|=(x>0?1:0)*E,E<<=1;switch(_=y){case 0:for(y=0,w=Math.pow(2,8),E=1;E!=w;)x=S.val&S.position,S.position>>=1,S.position==0&&(S.position=u,S.val=f(S.index++)),y|=(x>0?1:0)*E,E<<=1;c[d++]=t(y),_=d-1,h--;break;case 1:for(y=0,w=Math.pow(2,16),E=1;E!=w;)x=S.val&S.position,S.position>>=1,S.position==0&&(S.position=u,S.val=f(S.index++)),y|=(x>0?1:0)*E,E<<=1;c[d++]=t(y),_=d-1,h--;break;case 2:return g.join("")}if(h==0&&(h=Math.pow(2,v),v++),c[_])p=c[_];else if(_===d)p=b+b.charAt(0);else return null;g.push(p),c[d++]=b+p.charAt(0),h--,b=p,h==0&&(h=Math.pow(2,v),v++)}}};return s}();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(yP);var Irt=yP.exports;const yu=(r,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const a=r==null?void 0:r(i);if(t===!1||!a)return e==null?void 0:e(i)};var R8;const Ki=typeof window<"u",_ze=r=>typeof r=="string",Vw=()=>{},Sze=Ki&&((R8=window==null?void 0:window.navigator)==null?void 0:R8.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function am(r){return typeof r=="function"?r():$(r)}function Mze(r,e){function t(...n){return new Promise((i,a)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(a)})}return t}function Cze(r,e={}){let t,n,i=Vw;const a=s=>{clearTimeout(s),i(),i=Vw};return s=>{const l=am(r),u=am(e.maxWait);return t&&a(t),l<=0||u!==void 0&&u<=0?(n&&(a(n),n=null),Promise.resolve(s())):new Promise((f,c)=>{i=e.rejectOnCancel?c:f,u&&!n&&(n=setTimeout(()=>{t&&a(t),n=null,f(s())},u)),t=setTimeout(()=>{n&&a(n),n=null,f(s())},l)})}}function Aze(r){return r}function Y_(r){return OE()?(kE(r),!0):!1}function Tze(r,e=200,t={}){return Mze(Cze(e,t),r)}function Oze(r,e=200,t={}){const n=xt(r.value),i=Tze(()=>{n.value=r.value},e,t);return qt(r,()=>i()),n}function kze(r,e=!0){Wn()?Fn(r):e?r():di(r)}function sO(r,e,t={}){const{immediate:n=!0}=t,i=xt(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function s(){i.value=!1,o()}function l(...u){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,r(...u)},am(e))}return n&&(i.value=!0,Ki&&l()),Y_(s),{isPending:wp(i),start:l,stop:s}}function Rf(r){var e;const t=am(r);return(e=t==null?void 0:t.$el)!=null?e:t}const bP=Ki?window:void 0;function Lh(...r){let e,t,n,i;if(_ze(r[0])||Array.isArray(r[0])?([t,n,i]=r,e=bP):[e,t,n,i]=r,!e)return Vw;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const a=[],o=()=>{a.forEach(f=>f()),a.length=0},s=(f,c,h,d)=>(f.addEventListener(c,h,d),()=>f.removeEventListener(c,h,d)),l=qt(()=>[Rf(e),am(i)],([f,c])=>{o(),f&&a.push(...t.flatMap(h=>n.map(d=>s(f,h,d,c))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return Y_(u),u}let B8=!1;function Ize(r,e,t={}){const{window:n=bP,ignore:i=[],capture:a=!0,detectIframe:o=!1}=t;if(!n)return;Sze&&!B8&&(B8=!0,Array.from(n.document.body.children).forEach(h=>h.addEventListener("click",Vw)));let s=!0;const l=h=>i.some(d=>{if(typeof d=="string")return Array.from(n.document.querySelectorAll(d)).some(v=>v===h.target||h.composedPath().includes(v));{const v=Rf(d);return v&&(h.target===v||h.composedPath().includes(v))}}),f=[Lh(n,"click",h=>{const d=Rf(r);if(!(!d||d===h.target||h.composedPath().includes(d))){if(h.detail===0&&(s=!l(h)),!s){s=!0;return}e(h)}},{passive:!0,capture:a}),Lh(n,"pointerdown",h=>{const d=Rf(r);d&&(s=!h.composedPath().includes(d)&&!l(h))},{passive:!0}),o&&Lh(n,"blur",h=>{var d;const v=Rf(r);((d=n.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(v!=null&&v.contains(n.document.activeElement))&&e(h)})].filter(Boolean);return()=>f.forEach(h=>h())}function Lze(r,e=!1){const t=xt(),n=()=>t.value=!!r();return n(),kze(n,e),t}const F8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$8="__vueuse_ssr_handlers__";F8[$8]=F8[$8]||{};var z8=Object.getOwnPropertySymbols,Pze=Object.prototype.hasOwnProperty,Dze=Object.prototype.propertyIsEnumerable,Nze=(r,e)=>{var t={};for(var n in r)Pze.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&z8)for(var n of z8(r))e.indexOf(n)<0&&Dze.call(r,n)&&(t[n]=r[n]);return t};function eZ(r,e,t={}){const n=t,{window:i=bP}=n,a=Nze(n,["window"]);let o;const s=Lze(()=>i&&"ResizeObserver"in i),l=()=>{o&&(o.disconnect(),o=void 0)},u=qt(()=>Rf(r),c=>{l(),s.value&&i&&c&&(o=new ResizeObserver(e),o.observe(c,a))},{immediate:!0,flush:"post"}),f=()=>{l(),u()};return Y_(f),{isSupported:s,stop:f}}var G8;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(G8||(G8={}));var Rze=Object.defineProperty,j8=Object.getOwnPropertySymbols,Bze=Object.prototype.hasOwnProperty,Fze=Object.prototype.propertyIsEnumerable,U8=(r,e,t)=>e in r?Rze(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$ze=(r,e)=>{for(var t in e||(e={}))Bze.call(e,t)&&U8(r,t,e[t]);if(j8)for(var t of j8(e))Fze.call(e,t)&&U8(r,t,e[t]);return r};const zze={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};$ze({linear:Aze},zze);const Gze=()=>Ki&&/firefox/i.test(window.navigator.userAgent);var tZ=typeof global=="object"&&global&&global.Object===Object&&global,jze=typeof self=="object"&&self&&self.Object===Object&&self,Xl=tZ||jze||Function("return this")(),Bl=Xl.Symbol,rZ=Object.prototype,Uze=rZ.hasOwnProperty,Wze=rZ.toString,Eg=Bl?Bl.toStringTag:void 0;function Vze(r){var e=Uze.call(r,Eg),t=r[Eg];try{r[Eg]=void 0;var n=!0}catch{}var i=Wze.call(r);return n&&(e?r[Eg]=t:delete r[Eg]),i}var Hze=Object.prototype,Xze=Hze.toString;function Yze(r){return Xze.call(r)}var Kze="[object Null]",qze="[object Undefined]",W8=Bl?Bl.toStringTag:void 0;function Ip(r){return r==null?r===void 0?qze:Kze:W8&&W8 in Object(r)?Vze(r):Yze(r)}function Lp(r){return r!=null&&typeof r=="object"}var Zze="[object Symbol]";function xP(r){return typeof r=="symbol"||Lp(r)&&Ip(r)==Zze}function Qze(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var Xu=Array.isArray,Jze=1/0,V8=Bl?Bl.prototype:void 0,H8=V8?V8.toString:void 0;function nZ(r){if(typeof r=="string")return r;if(Xu(r))return Qze(r,nZ)+"";if(xP(r))return H8?H8.call(r):"";var e=r+"";return e=="0"&&1/r==-Jze?"-0":e}function Kh(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function eGe(r){return r}var tGe="[object AsyncFunction]",rGe="[object Function]",nGe="[object GeneratorFunction]",iGe="[object Proxy]";function iZ(r){if(!Kh(r))return!1;var e=Ip(r);return e==rGe||e==nGe||e==tGe||e==iGe}var gC=Xl["__core-js_shared__"],X8=function(){var r=/[^.]+$/.exec(gC&&gC.keys&&gC.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function aGe(r){return!!X8&&X8 in r}var oGe=Function.prototype,sGe=oGe.toString;function cd(r){if(r!=null){try{return sGe.call(r)}catch{}try{return r+""}catch{}}return""}var lGe=/[\\^$.*+?()[\]{}|]/g,uGe=/^\[object .+?Constructor\]$/,fGe=Function.prototype,cGe=Object.prototype,hGe=fGe.toString,dGe=cGe.hasOwnProperty,vGe=RegExp("^"+hGe.call(dGe).replace(lGe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pGe(r){if(!Kh(r)||aGe(r))return!1;var e=iZ(r)?vGe:uGe;return e.test(cd(r))}function gGe(r,e){return r==null?void 0:r[e]}function hd(r,e){var t=gGe(r,e);return pGe(t)?t:void 0}var lO=hd(Xl,"WeakMap"),Y8=Object.create,mGe=function(){function r(){}return function(e){if(!Kh(e))return{};if(Y8)return Y8(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();function yGe(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function bGe(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var xGe=800,wGe=16,EGe=Date.now;function _Ge(r){var e=0,t=0;return function(){var n=EGe(),i=wGe-(n-t);if(t=n,i>0){if(++e>=xGe)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function SGe(r){return function(){return r}}var Hw=function(){try{var r=hd(Object,"defineProperty");return r({},"",{}),r}catch{}}(),MGe=Hw?function(r,e){return Hw(r,"toString",{configurable:!0,enumerable:!1,value:SGe(e),writable:!0})}:eGe;const CGe=MGe;var AGe=_Ge(CGe);function TGe(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var OGe=9007199254740991,kGe=/^(?:0|[1-9]\d*)$/;function wP(r,e){var t=typeof r;return e=e??OGe,!!e&&(t=="number"||t!="symbol"&&kGe.test(r))&&r>-1&&r%1==0&&r<e}function aZ(r,e,t){e=="__proto__"&&Hw?Hw(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function oZ(r,e){return r===e||r!==r&&e!==e}var IGe=Object.prototype,LGe=IGe.hasOwnProperty;function EP(r,e,t){var n=r[e];(!(LGe.call(r,e)&&oZ(n,t))||t===void 0&&!(e in r))&&aZ(r,e,t)}function K_(r,e,t,n){var i=!t;t||(t={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=n?n(t[s],r[s],s,t,r):void 0;l===void 0&&(l=r[s]),i?aZ(t,s,l):EP(t,s,l)}return t}var K8=Math.max;function PGe(r,e,t){return e=K8(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,a=K8(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=t(o),yGe(r,this,s)}}var DGe=9007199254740991;function _P(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=DGe}function sZ(r){return r!=null&&_P(r.length)&&!iZ(r)}var NGe=Object.prototype;function SP(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||NGe;return r===t}function RGe(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var BGe="[object Arguments]";function q8(r){return Lp(r)&&Ip(r)==BGe}var lZ=Object.prototype,FGe=lZ.hasOwnProperty,$Ge=lZ.propertyIsEnumerable,MP=q8(function(){return arguments}())?q8:function(r){return Lp(r)&&FGe.call(r,"callee")&&!$Ge.call(r,"callee")};function zGe(){return!1}var uZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z8=uZ&&typeof module=="object"&&module&&!module.nodeType&&module,GGe=Z8&&Z8.exports===uZ,Q8=GGe?Xl.Buffer:void 0,jGe=Q8?Q8.isBuffer:void 0,fZ=jGe||zGe,UGe="[object Arguments]",WGe="[object Array]",VGe="[object Boolean]",HGe="[object Date]",XGe="[object Error]",YGe="[object Function]",KGe="[object Map]",qGe="[object Number]",ZGe="[object Object]",QGe="[object RegExp]",JGe="[object Set]",eje="[object String]",tje="[object WeakMap]",rje="[object ArrayBuffer]",nje="[object DataView]",ije="[object Float32Array]",aje="[object Float64Array]",oje="[object Int8Array]",sje="[object Int16Array]",lje="[object Int32Array]",uje="[object Uint8Array]",fje="[object Uint8ClampedArray]",cje="[object Uint16Array]",hje="[object Uint32Array]",Tn={};Tn[ije]=Tn[aje]=Tn[oje]=Tn[sje]=Tn[lje]=Tn[uje]=Tn[fje]=Tn[cje]=Tn[hje]=!0;Tn[UGe]=Tn[WGe]=Tn[rje]=Tn[VGe]=Tn[nje]=Tn[HGe]=Tn[XGe]=Tn[YGe]=Tn[KGe]=Tn[qGe]=Tn[ZGe]=Tn[QGe]=Tn[JGe]=Tn[eje]=Tn[tje]=!1;function dje(r){return Lp(r)&&_P(r.length)&&!!Tn[Ip(r)]}function CP(r){return function(e){return r(e)}}var cZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,p0=cZ&&typeof module=="object"&&module&&!module.nodeType&&module,vje=p0&&p0.exports===cZ,mC=vje&&tZ.process,op=function(){try{var r=p0&&p0.require&&p0.require("util").types;return r||mC&&mC.binding&&mC.binding("util")}catch{}}(),J8=op&&op.isTypedArray,pje=J8?CP(J8):dje,gje=Object.prototype,mje=gje.hasOwnProperty;function hZ(r,e){var t=Xu(r),n=!t&&MP(r),i=!t&&!n&&fZ(r),a=!t&&!n&&!i&&pje(r),o=t||n||i||a,s=o?RGe(r.length,String):[],l=s.length;for(var u in r)(e||mje.call(r,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wP(u,l)))&&s.push(u);return s}function dZ(r,e){return function(t){return r(e(t))}}var yje=dZ(Object.keys,Object),bje=Object.prototype,xje=bje.hasOwnProperty;function wje(r){if(!SP(r))return yje(r);var e=[];for(var t in Object(r))xje.call(r,t)&&t!="constructor"&&e.push(t);return e}function AP(r){return sZ(r)?hZ(r):wje(r)}function Eje(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var _je=Object.prototype,Sje=_je.hasOwnProperty;function Mje(r){if(!Kh(r))return Eje(r);var e=SP(r),t=[];for(var n in r)n=="constructor"&&(e||!Sje.call(r,n))||t.push(n);return t}function TP(r){return sZ(r)?hZ(r,!0):Mje(r)}var Cje=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Aje=/^\w*$/;function Tje(r,e){if(Xu(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||xP(r)?!0:Aje.test(r)||!Cje.test(r)||e!=null&&r in Object(e)}var om=hd(Object,"create");function Oje(){this.__data__=om?om(null):{},this.size=0}function kje(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Ije="__lodash_hash_undefined__",Lje=Object.prototype,Pje=Lje.hasOwnProperty;function Dje(r){var e=this.__data__;if(om){var t=e[r];return t===Ije?void 0:t}return Pje.call(e,r)?e[r]:void 0}var Nje=Object.prototype,Rje=Nje.hasOwnProperty;function Bje(r){var e=this.__data__;return om?e[r]!==void 0:Rje.call(e,r)}var Fje="__lodash_hash_undefined__";function $je(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=om&&e===void 0?Fje:e,this}function qh(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}qh.prototype.clear=Oje;qh.prototype.delete=kje;qh.prototype.get=Dje;qh.prototype.has=Bje;qh.prototype.set=$je;function zje(){this.__data__=[],this.size=0}function q_(r,e){for(var t=r.length;t--;)if(oZ(r[t][0],e))return t;return-1}var Gje=Array.prototype,jje=Gje.splice;function Uje(r){var e=this.__data__,t=q_(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():jje.call(e,t,1),--this.size,!0}function Wje(r){var e=this.__data__,t=q_(e,r);return t<0?void 0:e[t][1]}function Vje(r){return q_(this.__data__,r)>-1}function Hje(r,e){var t=this.__data__,n=q_(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function Yu(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Yu.prototype.clear=zje;Yu.prototype.delete=Uje;Yu.prototype.get=Wje;Yu.prototype.has=Vje;Yu.prototype.set=Hje;var sm=hd(Xl,"Map");function Xje(){this.size=0,this.__data__={hash:new qh,map:new(sm||Yu),string:new qh}}function Yje(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Z_(r,e){var t=r.__data__;return Yje(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Kje(r){var e=Z_(this,r).delete(r);return this.size-=e?1:0,e}function qje(r){return Z_(this,r).get(r)}function Zje(r){return Z_(this,r).has(r)}function Qje(r,e){var t=Z_(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function Ec(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ec.prototype.clear=Xje;Ec.prototype.delete=Kje;Ec.prototype.get=qje;Ec.prototype.has=Zje;Ec.prototype.set=Qje;var Jje="Expected a function";function OP(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Jje);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(OP.Cache||Ec),t}OP.Cache=Ec;var e9e=500;function t9e(r){var e=OP(r,function(n){return t.size===e9e&&t.clear(),n}),t=e.cache;return e}var r9e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n9e=/\\(\\)?/g,i9e=t9e(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(r9e,function(t,n,i,a){e.push(i?a.replace(n9e,"$1"):n||t)}),e});function a9e(r){return r==null?"":nZ(r)}function Q_(r,e){return Xu(r)?r:Tje(r,e)?[r]:i9e(a9e(r))}var o9e=1/0;function kP(r){if(typeof r=="string"||xP(r))return r;var e=r+"";return e=="0"&&1/r==-o9e?"-0":e}function vZ(r,e){e=Q_(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[kP(e[t++])];return t&&t==n?r:void 0}function pZ(r,e,t){var n=r==null?void 0:vZ(r,e);return n===void 0?t:n}function IP(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var e$=Bl?Bl.isConcatSpreadable:void 0;function s9e(r){return Xu(r)||MP(r)||!!(e$&&r&&r[e$])}function gZ(r,e,t,n,i){var a=-1,o=r.length;for(t||(t=s9e),i||(i=[]);++a<o;){var s=r[a];e>0&&t(s)?e>1?gZ(s,e-1,t,n,i):IP(i,s):n||(i[i.length]=s)}return i}function l9e(r){var e=r==null?0:r.length;return e?gZ(r,1):[]}function u9e(r){return AGe(PGe(r,void 0,l9e),r+"")}var f9e=dZ(Object.getPrototypeOf,Object);const mZ=f9e;function uO(){if(!arguments.length)return[];var r=arguments[0];return Xu(r)?r:[r]}function c9e(){this.__data__=new Yu,this.size=0}function h9e(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function d9e(r){return this.__data__.get(r)}function v9e(r){return this.__data__.has(r)}var p9e=200;function g9e(r,e){var t=this.__data__;if(t instanceof Yu){var n=t.__data__;if(!sm||n.length<p9e-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Ec(n)}return t.set(r,e),this.size=t.size,this}function Pp(r){var e=this.__data__=new Yu(r);this.size=e.size}Pp.prototype.clear=c9e;Pp.prototype.delete=h9e;Pp.prototype.get=d9e;Pp.prototype.has=v9e;Pp.prototype.set=g9e;function m9e(r,e){return r&&K_(e,AP(e),r)}function y9e(r,e){return r&&K_(e,TP(e),r)}var yZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,t$=yZ&&typeof module=="object"&&module&&!module.nodeType&&module,b9e=t$&&t$.exports===yZ,r$=b9e?Xl.Buffer:void 0,n$=r$?r$.allocUnsafe:void 0;function x9e(r,e){if(e)return r.slice();var t=r.length,n=n$?n$(t):new r.constructor(t);return r.copy(n),n}function w9e(r,e){for(var t=-1,n=r==null?0:r.length,i=0,a=[];++t<n;){var o=r[t];e(o,t,r)&&(a[i++]=o)}return a}function bZ(){return[]}var E9e=Object.prototype,_9e=E9e.propertyIsEnumerable,i$=Object.getOwnPropertySymbols,LP=i$?function(r){return r==null?[]:(r=Object(r),w9e(i$(r),function(e){return _9e.call(r,e)}))}:bZ;function S9e(r,e){return K_(r,LP(r),e)}var M9e=Object.getOwnPropertySymbols,xZ=M9e?function(r){for(var e=[];r;)IP(e,LP(r)),r=mZ(r);return e}:bZ;function C9e(r,e){return K_(r,xZ(r),e)}function wZ(r,e,t){var n=e(r);return Xu(r)?n:IP(n,t(r))}function A9e(r){return wZ(r,AP,LP)}function T9e(r){return wZ(r,TP,xZ)}var fO=hd(Xl,"DataView"),cO=hd(Xl,"Promise"),hO=hd(Xl,"Set"),a$="[object Map]",O9e="[object Object]",o$="[object Promise]",s$="[object Set]",l$="[object WeakMap]",u$="[object DataView]",k9e=cd(fO),I9e=cd(sm),L9e=cd(cO),P9e=cd(hO),D9e=cd(lO),ih=Ip;(fO&&ih(new fO(new ArrayBuffer(1)))!=u$||sm&&ih(new sm)!=a$||cO&&ih(cO.resolve())!=o$||hO&&ih(new hO)!=s$||lO&&ih(new lO)!=l$)&&(ih=function(r){var e=Ip(r),t=e==O9e?r.constructor:void 0,n=t?cd(t):"";if(n)switch(n){case k9e:return u$;case I9e:return a$;case L9e:return o$;case P9e:return s$;case D9e:return l$}return e});const PP=ih;var N9e=Object.prototype,R9e=N9e.hasOwnProperty;function B9e(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&R9e.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var f$=Xl.Uint8Array;function DP(r){var e=new r.constructor(r.byteLength);return new f$(e).set(new f$(r)),e}function F9e(r,e){var t=e?DP(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var $9e=/\w*$/;function z9e(r){var e=new r.constructor(r.source,$9e.exec(r));return e.lastIndex=r.lastIndex,e}var c$=Bl?Bl.prototype:void 0,h$=c$?c$.valueOf:void 0;function G9e(r){return h$?Object(h$.call(r)):{}}function j9e(r,e){var t=e?DP(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var U9e="[object Boolean]",W9e="[object Date]",V9e="[object Map]",H9e="[object Number]",X9e="[object RegExp]",Y9e="[object Set]",K9e="[object String]",q9e="[object Symbol]",Z9e="[object ArrayBuffer]",Q9e="[object DataView]",J9e="[object Float32Array]",eUe="[object Float64Array]",tUe="[object Int8Array]",rUe="[object Int16Array]",nUe="[object Int32Array]",iUe="[object Uint8Array]",aUe="[object Uint8ClampedArray]",oUe="[object Uint16Array]",sUe="[object Uint32Array]";function lUe(r,e,t){var n=r.constructor;switch(e){case Z9e:return DP(r);case U9e:case W9e:return new n(+r);case Q9e:return F9e(r,t);case J9e:case eUe:case tUe:case rUe:case nUe:case iUe:case aUe:case oUe:case sUe:return j9e(r,t);case V9e:return new n;case H9e:case K9e:return new n(r);case X9e:return z9e(r);case Y9e:return new n;case q9e:return G9e(r)}}function uUe(r){return typeof r.constructor=="function"&&!SP(r)?mGe(mZ(r)):{}}var fUe="[object Map]";function cUe(r){return Lp(r)&&PP(r)==fUe}var d$=op&&op.isMap,hUe=d$?CP(d$):cUe,dUe="[object Set]";function vUe(r){return Lp(r)&&PP(r)==dUe}var v$=op&&op.isSet,pUe=v$?CP(v$):vUe,gUe=1,mUe=2,yUe=4,EZ="[object Arguments]",bUe="[object Array]",xUe="[object Boolean]",wUe="[object Date]",EUe="[object Error]",_Z="[object Function]",_Ue="[object GeneratorFunction]",SUe="[object Map]",MUe="[object Number]",SZ="[object Object]",CUe="[object RegExp]",AUe="[object Set]",TUe="[object String]",OUe="[object Symbol]",kUe="[object WeakMap]",IUe="[object ArrayBuffer]",LUe="[object DataView]",PUe="[object Float32Array]",DUe="[object Float64Array]",NUe="[object Int8Array]",RUe="[object Int16Array]",BUe="[object Int32Array]",FUe="[object Uint8Array]",$Ue="[object Uint8ClampedArray]",zUe="[object Uint16Array]",GUe="[object Uint32Array]",xn={};xn[EZ]=xn[bUe]=xn[IUe]=xn[LUe]=xn[xUe]=xn[wUe]=xn[PUe]=xn[DUe]=xn[NUe]=xn[RUe]=xn[BUe]=xn[SUe]=xn[MUe]=xn[SZ]=xn[CUe]=xn[AUe]=xn[TUe]=xn[OUe]=xn[FUe]=xn[$Ue]=xn[zUe]=xn[GUe]=!0;xn[EUe]=xn[_Z]=xn[kUe]=!1;function wx(r,e,t,n,i,a){var o,s=e&gUe,l=e&mUe,u=e&yUe;if(t&&(o=i?t(r,n,i,a):t(r)),o!==void 0)return o;if(!Kh(r))return r;var f=Xu(r);if(f){if(o=B9e(r),!s)return bGe(r,o)}else{var c=PP(r),h=c==_Z||c==_Ue;if(fZ(r))return x9e(r,s);if(c==SZ||c==EZ||h&&!i){if(o=l||h?{}:uUe(r),!s)return l?C9e(r,y9e(o,r)):S9e(r,m9e(o,r))}else{if(!xn[c])return i?r:{};o=lUe(r,c,s)}}a||(a=new Pp);var d=a.get(r);if(d)return d;a.set(r,o),pUe(r)?r.forEach(function(g){o.add(wx(g,e,t,g,r,a))}):hUe(r)&&r.forEach(function(g,m){o.set(m,wx(g,e,t,m,r,a))});var v=u?l?T9e:A9e:l?TP:AP,p=f?void 0:v(r);return TGe(p||r,function(g,m){p&&(m=g,g=r[m]),EP(o,m,wx(g,e,t,m,r,a))}),o}var jUe=4;function p$(r){return wx(r,jUe)}function UUe(r,e){return r!=null&&e in Object(r)}function WUe(r,e,t){e=Q_(e,r);for(var n=-1,i=e.length,a=!1;++n<i;){var o=kP(e[n]);if(!(a=r!=null&&t(r,o)))break;r=r[o]}return a||++n!=i?a:(i=r==null?0:r.length,!!i&&_P(i)&&wP(o,i)&&(Xu(r)||MP(r)))}function VUe(r,e){return r!=null&&WUe(r,e,UUe)}function Xw(r){for(var e=-1,t=r==null?0:r.length,n={};++e<t;){var i=r[e];n[i[0]]=i[1]}return n}function uy(r){return r==null}function MZ(r){return r===void 0}function CZ(r,e,t,n){if(!Kh(r))return r;e=Q_(e,r);for(var i=-1,a=e.length,o=a-1,s=r;s!=null&&++i<a;){var l=kP(e[i]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var f=s[l];u=n?n(f,l,s):void 0,u===void 0&&(u=Kh(f)?f:wP(e[i+1])?[]:{})}EP(s,l,u),s=s[l]}return r}function HUe(r,e,t){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=vZ(r,o);t(s,o)&&CZ(a,Q_(o,r),s)}return a}function XUe(r,e){return HUe(r,e,function(t,n){return VUe(r,n)})}var YUe=u9e(function(r,e){return r==null?{}:XUe(r,e)});function KUe(r,e,t){return r==null?r:CZ(r,e,t)}const qUe=r=>r===void 0,Ko=r=>typeof r=="boolean",qo=r=>typeof r=="number",Ph=r=>typeof Element>"u"?!1:r instanceof Element,g$=r=>uy(r),ZUe=r=>qr(r)?!Number.isNaN(Number(r)):!1,m$=r=>Object.keys(r),yC=(r,e,t)=>({get value(){return pZ(r,e,t)},set value(n){KUe(r,e,n)}});class QUe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function NP(r,e){throw new QUe(`[${r}] ${e}`)}const AZ=(r="")=>r.split(" ").filter(e=>!!e.trim()),y$=(r,e)=>{if(!r||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return r.classList.contains(e)},JUe=(r,e)=>{!r||!e.trim()||r.classList.add(...AZ(e))},e7e=(r,e)=>{!r||!e.trim()||r.classList.remove(...AZ(e))},t7e=(r,e)=>{var t;if(!Ki||!r||!e)return"";let n=Mo(e);n==="float"&&(n="cssFloat");try{const i=r.style[n];if(i)return i;const a=(t=document.defaultView)==null?void 0:t.getComputedStyle(r,"");return a?a[n]:""}catch{return r.style[n]}};function Pu(r,e="px"){if(!r)return"";if(qo(r)||ZUe(r))return`${r}${e}`;if(qr(r))return r}let cb;const r7e=r=>{var e;if(!Ki)return 0;if(cb!==void 0)return cb;const t=document.createElement("div");t.className=`${r}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",t.appendChild(i);const a=i.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),cb=n-a,cb};/*! Element Plus Icons Vue v2.3.1 */var n7e=Rt({name:"CircleCheck",__name:"circle-check",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),xr("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),i7e=n7e,a7e=Rt({name:"CircleCloseFilled",__name:"circle-close-filled",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),o7e=a7e,s7e=Rt({name:"CircleClose",__name:"circle-close",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),xr("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),TZ=s7e,l7e=Rt({name:"Close",__name:"close",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Yw=l7e,u7e=Rt({name:"Hide",__name:"hide",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),xr("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),f7e=u7e,c7e=Rt({name:"InfoFilled",__name:"info-filled",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),h7e=c7e,d7e=Rt({name:"Loading",__name:"loading",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),RP=d7e,v7e=Rt({name:"SuccessFilled",__name:"success-filled",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),p7e=v7e,g7e=Rt({name:"View",__name:"view",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),m7e=g7e,y7e=Rt({name:"WarningFilled",__name:"warning-filled",setup(r){return(e,t)=>(ct(),or("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[xr("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),b7e=y7e;const OZ="__epPropKey",pr=r=>r,x7e=r=>on(r)&&!!r[OZ],J_=(r,e)=>{if(!on(r)||x7e(r))return r;const{values:t,required:n,default:i,type:a,validator:o}=r,l={type:a,required:!!n,validator:t||o?u=>{let f=!1,c=[];if(t&&(c=Array.from(t),rn(r,"default")&&c.push(i),f||(f=c.includes(u))),o&&(f||(f=o(u))),!f&&c.length>0){const h=[...new Set(c)].map(d=>JSON.stringify(d)).join(", ");Qae(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(u)}.`)}return f}:void 0,[OZ]:!0};return rn(r,"default")&&(l.default=i),l},sn=r=>Xw(Object.entries(r).map(([e,t])=>[e,J_(t,e)])),Ms=pr([String,Object,Function]),kZ={Close:Yw},b$={success:p7e,warning:b7e,error:o7e,info:h7e},w7e={validating:RP,success:i7e,error:TZ},Oo=(r,e)=>{if(r.install=t=>{for(const n of[r,...Object.values(e??{})])t.component(n.name,n)},e)for(const[t,n]of Object.entries(e))r[t]=n;return r},E7e=(r,e)=>(r.install=t=>{r._context=t._context,t.config.globalProperties[e]=r},r),_7e=(r,e)=>(r.install=t=>{t.directive(e,r)},r),e2=r=>(r.install=oi,r),S7e=(...r)=>e=>{r.forEach(t=>{er(t)?t(e):t.value=e})},Dh={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Is="update:modelValue",Kw="change",dO="input",fy=["","default","small","large"],M7e=r=>["",...fy].includes(r);var Ex=(r=>(r[r.TEXT=1]="TEXT",r[r.CLASS=2]="CLASS",r[r.STYLE=4]="STYLE",r[r.PROPS=8]="PROPS",r[r.FULL_PROPS=16]="FULL_PROPS",r[r.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",r[r.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",r[r.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",r[r.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",r[r.NEED_PATCH=512]="NEED_PATCH",r[r.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",r[r.HOISTED=-1]="HOISTED",r[r.BAIL=-2]="BAIL",r))(Ex||{});const C7e=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r),A7e=r=>r,T7e=["class","style"],O7e=/^on[A-Z]/,k7e=(r={})=>{const{excludeListeners:e=!1,excludeKeys:t}=r,n=Me(()=>((t==null?void 0:t.value)||[]).concat(T7e)),i=Wn();return Me(i?()=>{var a;return Xw(Object.entries((a=i.proxy)==null?void 0:a.$attrs).filter(([o])=>!n.value.includes(o)&&!(e&&O7e.test(o))))}:()=>({}))},t2=({from:r,replacement:e,scope:t,version:n,ref:i,type:a="API"},o)=>{qt(()=>$(o),s=>{},{immediate:!0})},I7e=(r,e,t,n)=>{let i={offsetX:0,offsetY:0};const a=u=>{const f=u.clientX,c=u.clientY,{offsetX:h,offsetY:d}=i,v=r.value.getBoundingClientRect(),p=v.left,g=v.top,m=v.width,b=v.height,y=document.documentElement.clientWidth,x=document.documentElement.clientHeight,w=-p+h,E=-g+d,_=y-p-m+h,S=x-g-b+d,C=T=>{let A=h+T.clientX-f,O=d+T.clientY-c;n!=null&&n.value||(A=Math.min(Math.max(A,w),_),O=Math.min(Math.max(O,E),S)),i={offsetX:A,offsetY:O},r.value&&(r.value.style.transform=`translate(${Pu(A)}, ${Pu(O)})`)},M=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",M)},o=()=>{e.value&&r.value&&e.value.addEventListener("mousedown",a)},s=()=>{e.value&&r.value&&e.value.removeEventListener("mousedown",a)},l=()=>{i={offsetX:0,offsetY:0},r.value&&(r.value.style.transform="none")};return Fn(()=>{Zj(()=>{t.value?o():s()})}),La(()=>{s()}),{resetPostion:l}};var L7e={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const P7e=r=>(e,t)=>D7e(e,t,$(r)),D7e=(r,e,t)=>pZ(t,r,r).replace(/\{(\w+)\}/g,(n,i)=>{var a;return`${(a=e==null?void 0:e[i])!=null?a:`{${i}}`}`}),N7e=r=>{const e=Me(()=>$(r).name),t=Sn(r)?r:xt(r);return{lang:e,locale:t,t:P7e(r)}},IZ=Symbol("localeContextKey"),BP=r=>{const e=r||tn(IZ,xt());return N7e(Me(()=>e.value||L7e))},g0="el",R7e="is-",Zc=(r,e,t,n,i)=>{let a=`${r}-${e}`;return t&&(a+=`-${t}`),n&&(a+=`__${n}`),i&&(a+=`--${i}`),a},LZ=Symbol("namespaceContextKey"),FP=r=>{const e=r||(Wn()?tn(LZ,xt(g0)):xt(g0));return Me(()=>$(e)||g0)},Pn=(r,e)=>{const t=FP(e);return{namespace:t,b:(p="")=>Zc(t.value,r,p,"",""),e:p=>p?Zc(t.value,r,"",p,""):"",m:p=>p?Zc(t.value,r,"","",p):"",be:(p,g)=>p&&g?Zc(t.value,r,p,g,""):"",em:(p,g)=>p&&g?Zc(t.value,r,"",p,g):"",bm:(p,g)=>p&&g?Zc(t.value,r,p,"",g):"",bem:(p,g,m)=>p&&g&&m?Zc(t.value,r,p,g,m):"",is:(p,...g)=>{const m=g.length>=1?g[0]:!0;return p&&m?`${R7e}${p}`:""},cssVar:p=>{const g={};for(const m in p)p[m]&&(g[`--${t.value}-${m}`]=p[m]);return g},cssVarName:p=>`--${t.value}-${p}`,cssVarBlock:p=>{const g={};for(const m in p)p[m]&&(g[`--${t.value}-${r}-${m}`]=p[m]);return g},cssVarBlockName:p=>`--${t.value}-${r}-${p}`}},B7e=(r,e={})=>{Sn(r)||NP("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Pn("popup"),n=Me(()=>t.bm("parent","hidden"));if(!Ki||y$(document.body,n.value))return;let i=0,a=!1,o="0";const s=()=>{setTimeout(()=>{e7e(document==null?void 0:document.body,n.value),a&&document&&(document.body.style.width=o)},200)};qt(r,l=>{if(!l){s();return}a=!y$(document.body,n.value),a&&(o=document.body.style.width),i=r7e(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,f=t7e(document.body,"overflowY");i>0&&(u||f==="scroll")&&a&&(document.body.style.width=`calc(100% - ${i}px)`),JUe(document.body,n.value)}),kE(()=>s())},F7e=J_({type:pr(Boolean),default:null}),$7e=J_({type:pr(Function)}),PZ=r=>{const e=`update:${r}`,t=`onUpdate:${r}`,n=[e],i={[r]:F7e,[t]:$7e};return{useModelToggle:({indicator:o,toggleReason:s,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:f,onHide:c})=>{const h=Wn(),{emit:d}=h,v=h.props,p=Me(()=>er(v[t])),g=Me(()=>v[r]===null),m=_=>{o.value!==!0&&(o.value=!0,s&&(s.value=_),er(f)&&f(_))},b=_=>{o.value!==!1&&(o.value=!1,s&&(s.value=_),er(c)&&c(_))},y=_=>{if(v.disabled===!0||er(u)&&!u())return;const S=p.value&&Ki;S&&d(e,!0),(g.value||!S)&&m(_)},x=_=>{if(v.disabled===!0||!Ki)return;const S=p.value&&Ki;S&&d(e,!1),(g.value||!S)&&b(_)},w=_=>{Ko(_)&&(v.disabled&&_?p.value&&d(e,!1):o.value!==_&&(_?m():b()))},E=()=>{o.value?x():y()};return qt(()=>v[r],w),l&&h.appContext.config.globalProperties.$route!==void 0&&qt(()=>({...h.proxy.$route}),()=>{l.value&&o.value&&x()}),Fn(()=>{w(v[r])}),{hide:x,show:y,toggle:E,hasUpdateHandler:p}},useModelToggleProps:i,useModelToggleEmits:n}};PZ("modelValue");const DZ=r=>{const e=Wn();return Me(()=>{var t,n;return(n=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:n[r]})};var Xa="top",rs="bottom",ns="right",Ya="left",$P="auto",cy=[Xa,rs,ns,Ya],sp="start",lm="end",z7e="clippingParents",NZ="viewport",_g="popper",G7e="reference",x$=cy.reduce(function(r,e){return r.concat([e+"-"+sp,e+"-"+lm])},[]),zP=[].concat(cy,[$P]).reduce(function(r,e){return r.concat([e,e+"-"+sp,e+"-"+lm])},[]),j7e="beforeRead",U7e="read",W7e="afterRead",V7e="beforeMain",H7e="main",X7e="afterMain",Y7e="beforeWrite",K7e="write",q7e="afterWrite",Z7e=[j7e,U7e,W7e,V7e,H7e,X7e,Y7e,K7e,q7e];function Fl(r){return r?(r.nodeName||"").toLowerCase():null}function zs(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function lp(r){var e=zs(r).Element;return r instanceof e||r instanceof Element}function Zo(r){var e=zs(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function GP(r){if(typeof ShadowRoot>"u")return!1;var e=zs(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function Q7e(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Zo(a)||!Fl(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function J7e(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),s=o.reduce(function(l,u){return l[u]="",l},{});!Zo(i)||!Fl(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}var RZ={name:"applyStyles",enabled:!0,phase:"write",fn:Q7e,effect:J7e,requires:["computeStyles"]};function Tl(r){return r.split("-")[0]}var Nh=Math.max,qw=Math.min,up=Math.round;function fp(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),n=1,i=1;if(Zo(r)&&e){var a=r.offsetHeight,o=r.offsetWidth;o>0&&(n=up(t.width)/o||1),a>0&&(i=up(t.height)/a||1)}return{width:t.width/n,height:t.height/i,top:t.top/i,right:t.right/n,bottom:t.bottom/i,left:t.left/n,x:t.left/n,y:t.top/i}}function jP(r){var e=fp(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function BZ(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&GP(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Du(r){return zs(r).getComputedStyle(r)}function eWe(r){return["table","td","th"].indexOf(Fl(r))>=0}function _c(r){return((lp(r)?r.ownerDocument:r.document)||window.document).documentElement}function r2(r){return Fl(r)==="html"?r:r.assignedSlot||r.parentNode||(GP(r)?r.host:null)||_c(r)}function w$(r){return!Zo(r)||Du(r).position==="fixed"?null:r.offsetParent}function tWe(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Zo(r)){var n=Du(r);if(n.position==="fixed")return null}var i=r2(r);for(GP(i)&&(i=i.host);Zo(i)&&["html","body"].indexOf(Fl(i))<0;){var a=Du(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function hy(r){for(var e=zs(r),t=w$(r);t&&eWe(t)&&Du(t).position==="static";)t=w$(t);return t&&(Fl(t)==="html"||Fl(t)==="body"&&Du(t).position==="static")?e:t||tWe(r)||e}function UP(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function m0(r,e,t){return Nh(r,qw(e,t))}function rWe(r,e,t){var n=m0(r,e,t);return n>t?t:n}function FZ(){return{top:0,right:0,bottom:0,left:0}}function $Z(r){return Object.assign({},FZ(),r)}function zZ(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var nWe=function(r,e){return r=typeof r=="function"?r(Object.assign({},e.rects,{placement:e.placement})):r,$Z(typeof r!="number"?r:zZ(r,cy))};function iWe(r){var e,t=r.state,n=r.name,i=r.options,a=t.elements.arrow,o=t.modifiersData.popperOffsets,s=Tl(t.placement),l=UP(s),u=[Ya,ns].indexOf(s)>=0,f=u?"height":"width";if(!(!a||!o)){var c=nWe(i.padding,t),h=jP(a),d=l==="y"?Xa:Ya,v=l==="y"?rs:ns,p=t.rects.reference[f]+t.rects.reference[l]-o[l]-t.rects.popper[f],g=o[l]-t.rects.reference[l],m=hy(a),b=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,y=p/2-g/2,x=c[d],w=b-h[f]-c[v],E=b/2-h[f]/2+y,_=m0(x,E,w),S=l;t.modifiersData[n]=(e={},e[S]=_,e.centerOffset=_-E,e)}}function aWe(r){var e=r.state,t=r.options,n=t.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!BZ(e.elements.popper,i)||(e.elements.arrow=i))}var oWe={name:"arrow",enabled:!0,phase:"main",fn:iWe,effect:aWe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cp(r){return r.split("-")[1]}var sWe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lWe(r){var e=r.x,t=r.y,n=window,i=n.devicePixelRatio||1;return{x:up(e*i)/i||0,y:up(t*i)/i||0}}function E$(r){var e,t=r.popper,n=r.popperRect,i=r.placement,a=r.variation,o=r.offsets,s=r.position,l=r.gpuAcceleration,u=r.adaptive,f=r.roundOffsets,c=r.isFixed,h=o.x,d=h===void 0?0:h,v=o.y,p=v===void 0?0:v,g=typeof f=="function"?f({x:d,y:p}):{x:d,y:p};d=g.x,p=g.y;var m=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=Ya,x=Xa,w=window;if(u){var E=hy(t),_="clientHeight",S="clientWidth";if(E===zs(t)&&(E=_c(t),Du(E).position!=="static"&&s==="absolute"&&(_="scrollHeight",S="scrollWidth")),E=E,i===Xa||(i===Ya||i===ns)&&a===lm){x=rs;var C=c&&E===w&&w.visualViewport?w.visualViewport.height:E[_];p-=C-n.height,p*=l?1:-1}if(i===Ya||(i===Xa||i===rs)&&a===lm){y=ns;var M=c&&E===w&&w.visualViewport?w.visualViewport.width:E[S];d-=M-n.width,d*=l?1:-1}}var T=Object.assign({position:s},u&&sWe),A=f===!0?lWe({x:d,y:p}):{x:d,y:p};if(d=A.x,p=A.y,l){var O;return Object.assign({},T,(O={},O[x]=b?"0":"",O[y]=m?"0":"",O.transform=(w.devicePixelRatio||1)<=1?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",O))}return Object.assign({},T,(e={},e[x]=b?p+"px":"",e[y]=m?d+"px":"",e.transform="",e))}function uWe(r){var e=r.state,t=r.options,n=t.gpuAcceleration,i=n===void 0?!0:n,a=t.adaptive,o=a===void 0?!0:a,s=t.roundOffsets,l=s===void 0?!0:s,u={placement:Tl(e.placement),variation:cp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,E$(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,E$(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var GZ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uWe,data:{}},hb={passive:!0};function fWe(r){var e=r.state,t=r.instance,n=r.options,i=n.scroll,a=i===void 0?!0:i,o=n.resize,s=o===void 0?!0:o,l=zs(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(f){f.addEventListener("scroll",t.update,hb)}),s&&l.addEventListener("resize",t.update,hb),function(){a&&u.forEach(function(f){f.removeEventListener("scroll",t.update,hb)}),s&&l.removeEventListener("resize",t.update,hb)}}var jZ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:fWe,data:{}},cWe={left:"right",right:"left",bottom:"top",top:"bottom"};function _x(r){return r.replace(/left|right|bottom|top/g,function(e){return cWe[e]})}var hWe={start:"end",end:"start"};function _$(r){return r.replace(/start|end/g,function(e){return hWe[e]})}function WP(r){var e=zs(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function VP(r){return fp(_c(r)).left+WP(r).scrollLeft}function dWe(r){var e=zs(r),t=_c(r),n=e.visualViewport,i=t.clientWidth,a=t.clientHeight,o=0,s=0;return n&&(i=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:i,height:a,x:o+VP(r),y:s}}function vWe(r){var e,t=_c(r),n=WP(r),i=(e=r.ownerDocument)==null?void 0:e.body,a=Nh(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Nh(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+VP(r),l=-n.scrollTop;return Du(i||t).direction==="rtl"&&(s+=Nh(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function HP(r){var e=Du(r),t=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+n)}function UZ(r){return["html","body","#document"].indexOf(Fl(r))>=0?r.ownerDocument.body:Zo(r)&&HP(r)?r:UZ(r2(r))}function y0(r,e){var t;e===void 0&&(e=[]);var n=UZ(r),i=n===((t=r.ownerDocument)==null?void 0:t.body),a=zs(n),o=i?[a].concat(a.visualViewport||[],HP(n)?n:[]):n,s=e.concat(o);return i?s:s.concat(y0(r2(o)))}function vO(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function pWe(r){var e=fp(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function S$(r,e){return e===NZ?vO(dWe(r)):lp(e)?pWe(e):vO(vWe(_c(r)))}function gWe(r){var e=y0(r2(r)),t=["absolute","fixed"].indexOf(Du(r).position)>=0,n=t&&Zo(r)?hy(r):r;return lp(n)?e.filter(function(i){return lp(i)&&BZ(i,n)&&Fl(i)!=="body"}):[]}function mWe(r,e,t){var n=e==="clippingParents"?gWe(r):[].concat(e),i=[].concat(n,[t]),a=i[0],o=i.reduce(function(s,l){var u=S$(r,l);return s.top=Nh(u.top,s.top),s.right=qw(u.right,s.right),s.bottom=qw(u.bottom,s.bottom),s.left=Nh(u.left,s.left),s},S$(r,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function WZ(r){var e=r.reference,t=r.element,n=r.placement,i=n?Tl(n):null,a=n?cp(n):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,l;switch(i){case Xa:l={x:o,y:e.y-t.height};break;case rs:l={x:o,y:e.y+e.height};break;case ns:l={x:e.x+e.width,y:s};break;case Ya:l={x:e.x-t.width,y:s};break;default:l={x:e.x,y:e.y}}var u=i?UP(i):null;if(u!=null){var f=u==="y"?"height":"width";switch(a){case sp:l[u]=l[u]-(e[f]/2-t[f]/2);break;case lm:l[u]=l[u]+(e[f]/2-t[f]/2);break}}return l}function um(r,e){e===void 0&&(e={});var t=e,n=t.placement,i=n===void 0?r.placement:n,a=t.boundary,o=a===void 0?z7e:a,s=t.rootBoundary,l=s===void 0?NZ:s,u=t.elementContext,f=u===void 0?_g:u,c=t.altBoundary,h=c===void 0?!1:c,d=t.padding,v=d===void 0?0:d,p=$Z(typeof v!="number"?v:zZ(v,cy)),g=f===_g?G7e:_g,m=r.rects.popper,b=r.elements[h?g:f],y=mWe(lp(b)?b:b.contextElement||_c(r.elements.popper),o,l),x=fp(r.elements.reference),w=WZ({reference:x,element:m,strategy:"absolute",placement:i}),E=vO(Object.assign({},m,w)),_=f===_g?E:x,S={top:y.top-_.top+p.top,bottom:_.bottom-y.bottom+p.bottom,left:y.left-_.left+p.left,right:_.right-y.right+p.right},C=r.modifiersData.offset;if(f===_g&&C){var M=C[i];Object.keys(S).forEach(function(T){var A=[ns,rs].indexOf(T)>=0?1:-1,O=[Xa,rs].indexOf(T)>=0?"y":"x";S[T]+=M[O]*A})}return S}function yWe(r,e){e===void 0&&(e={});var t=e,n=t.placement,i=t.boundary,a=t.rootBoundary,o=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?zP:l,f=cp(n),c=f?s?x$:x$.filter(function(v){return cp(v)===f}):cy,h=c.filter(function(v){return u.indexOf(v)>=0});h.length===0&&(h=c);var d=h.reduce(function(v,p){return v[p]=um(r,{placement:p,boundary:i,rootBoundary:a,padding:o})[Tl(p)],v},{});return Object.keys(d).sort(function(v,p){return d[v]-d[p]})}function bWe(r){if(Tl(r)===$P)return[];var e=_x(r);return[_$(r),e,_$(e)]}function xWe(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,o=t.altAxis,s=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,f=t.boundary,c=t.rootBoundary,h=t.altBoundary,d=t.flipVariations,v=d===void 0?!0:d,p=t.allowedAutoPlacements,g=e.options.placement,m=Tl(g),b=m===g,y=l||(b||!v?[_x(g)]:bWe(g)),x=[g].concat(y).reduce(function(Q,ye){return Q.concat(Tl(ye)===$P?yWe(e,{placement:ye,boundary:f,rootBoundary:c,padding:u,flipVariations:v,allowedAutoPlacements:p}):ye)},[]),w=e.rects.reference,E=e.rects.popper,_=new Map,S=!0,C=x[0],M=0;M<x.length;M++){var T=x[M],A=Tl(T),O=cp(T)===sp,L=[Xa,rs].indexOf(A)>=0,N=L?"width":"height",P=um(e,{placement:T,boundary:f,rootBoundary:c,altBoundary:h,padding:u}),R=L?O?ns:Ya:O?rs:Xa;w[N]>E[N]&&(R=_x(R));var G=_x(R),D=[];if(a&&D.push(P[A]<=0),s&&D.push(P[R]<=0,P[G]<=0),D.every(function(Q){return Q})){C=T,S=!1;break}_.set(T,D)}if(S)for(var B=v?3:1,Y=function(Q){var ye=x.find(function(Le){var Fe=_.get(Le);if(Fe)return Fe.slice(0,Q).every(function(_e){return _e})});if(ye)return C=ye,"break"},ee=B;ee>0;ee--){var ne=Y(ee);if(ne==="break")break}e.placement!==C&&(e.modifiersData[n]._skip=!0,e.placement=C,e.reset=!0)}}var wWe={name:"flip",enabled:!0,phase:"main",fn:xWe,requiresIfExists:["offset"],data:{_skip:!1}};function M$(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function C$(r){return[Xa,ns,rs,Ya].some(function(e){return r[e]>=0})}function EWe(r){var e=r.state,t=r.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=um(e,{elementContext:"reference"}),s=um(e,{altBoundary:!0}),l=M$(o,n),u=M$(s,i,a),f=C$(l),c=C$(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}var _We={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:EWe};function SWe(r,e,t){var n=Tl(r),i=[Ya,Xa].indexOf(n)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Ya,ns].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function MWe(r){var e=r.state,t=r.options,n=r.name,i=t.offset,a=i===void 0?[0,0]:i,o=zP.reduce(function(f,c){return f[c]=SWe(c,e.rects,a),f},{}),s=o[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}var CWe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:MWe};function AWe(r){var e=r.state,t=r.name;e.modifiersData[t]=WZ({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var VZ={name:"popperOffsets",enabled:!0,phase:"read",fn:AWe,data:{}};function TWe(r){return r==="x"?"y":"x"}function OWe(r){var e=r.state,t=r.options,n=r.name,i=t.mainAxis,a=i===void 0?!0:i,o=t.altAxis,s=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,f=t.altBoundary,c=t.padding,h=t.tether,d=h===void 0?!0:h,v=t.tetherOffset,p=v===void 0?0:v,g=um(e,{boundary:l,rootBoundary:u,padding:c,altBoundary:f}),m=Tl(e.placement),b=cp(e.placement),y=!b,x=UP(m),w=TWe(x),E=e.modifiersData.popperOffsets,_=e.rects.reference,S=e.rects.popper,C=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,M=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(E){if(a){var O,L=x==="y"?Xa:Ya,N=x==="y"?rs:ns,P=x==="y"?"height":"width",R=E[x],G=R+g[L],D=R-g[N],B=d?-S[P]/2:0,Y=b===sp?_[P]:S[P],ee=b===sp?-S[P]:-_[P],ne=e.elements.arrow,Q=d&&ne?jP(ne):{width:0,height:0},ye=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:FZ(),Le=ye[L],Fe=ye[N],_e=m0(0,_[P],Q[P]),Ve=y?_[P]/2-B-_e-Le-M.mainAxis:Y-_e-Le-M.mainAxis,Xe=y?-_[P]/2+B+_e+Fe+M.mainAxis:ee+_e+Fe+M.mainAxis,vt=e.elements.arrow&&hy(e.elements.arrow),bt=vt?x==="y"?vt.clientTop||0:vt.clientLeft||0:0,te=(O=T==null?void 0:T[x])!=null?O:0,H=R+Ve-te-bt,de=R+Xe-te,Be=m0(d?qw(G,H):G,R,d?Nh(D,de):D);E[x]=Be,A[x]=Be-R}if(s){var Ie,Pe=x==="x"?Xa:Ya,Ye=x==="x"?rs:ns,V=E[w],z=w==="y"?"height":"width",F=V+g[Pe],k=V-g[Ye],ue=[Xa,Ya].indexOf(m)!==-1,ce=(Ie=T==null?void 0:T[w])!=null?Ie:0,X=ue?F:V-_[z]-S[z]-ce+M.altAxis,ae=ue?V+_[z]+S[z]-ce-M.altAxis:k,Ce=d&&ue?rWe(X,V,ae):m0(d?X:F,V,d?ae:k);E[w]=Ce,A[w]=Ce-V}e.modifiersData[n]=A}}var kWe={name:"preventOverflow",enabled:!0,phase:"main",fn:OWe,requiresIfExists:["offset"]};function IWe(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function LWe(r){return r===zs(r)||!Zo(r)?WP(r):IWe(r)}function PWe(r){var e=r.getBoundingClientRect(),t=up(e.width)/r.offsetWidth||1,n=up(e.height)/r.offsetHeight||1;return t!==1||n!==1}function DWe(r,e,t){t===void 0&&(t=!1);var n=Zo(e),i=Zo(e)&&PWe(e),a=_c(e),o=fp(r,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((Fl(e)!=="body"||HP(a))&&(s=LWe(e)),Zo(e)?(l=fp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=VP(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function NWe(r){var e=new Map,t=new Set,n=[];r.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var l=e.get(s);l&&i(l)}}),n.push(a)}return r.forEach(function(a){t.has(a.name)||i(a)}),n}function RWe(r){var e=NWe(r);return Z7e.reduce(function(t,n){return t.concat(e.filter(function(i){return i.phase===n}))},[])}function BWe(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function FWe(r){var e=r.reduce(function(t,n){var i=t[n.name];return t[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var A$={placement:"bottom",modifiers:[],strategy:"absolute"};function T$(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function XP(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?A$:i;return function(o,s,l){l===void 0&&(l=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},A$,a),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},f=[],c=!1,h={state:u,setOptions:function(p){var g=typeof p=="function"?p(u.options):p;v(),u.options=Object.assign({},a,u.options,g),u.scrollParents={reference:lp(o)?y0(o):o.contextElement?y0(o.contextElement):[],popper:y0(s)};var m=RWe(FWe([].concat(n,u.options.modifiers)));return u.orderedModifiers=m.filter(function(b){return b.enabled}),d(),h.update()},forceUpdate:function(){if(!c){var p=u.elements,g=p.reference,m=p.popper;if(T$(g,m)){u.rects={reference:DWe(g,hy(m),u.options.strategy==="fixed"),popper:jP(m)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(S){return u.modifiersData[S.name]=Object.assign({},S.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var y=u.orderedModifiers[b],x=y.fn,w=y.options,E=w===void 0?{}:w,_=y.name;typeof x=="function"&&(u=x({state:u,options:E,name:_,instance:h})||u)}}}},update:BWe(function(){return new Promise(function(p){h.forceUpdate(),p(u)})}),destroy:function(){v(),c=!0}};if(!T$(o,s))return h;h.setOptions(l).then(function(p){!c&&l.onFirstUpdate&&l.onFirstUpdate(p)});function d(){u.orderedModifiers.forEach(function(p){var g=p.name,m=p.options,b=m===void 0?{}:m,y=p.effect;if(typeof y=="function"){var x=y({state:u,name:g,instance:h,options:b}),w=function(){};f.push(x||w)}})}function v(){f.forEach(function(p){return p()}),f=[]}return h}}XP();var $We=[jZ,VZ,GZ,RZ];XP({defaultModifiers:$We});var zWe=[jZ,VZ,GZ,RZ,CWe,wWe,kWe,oWe,_We],GWe=XP({defaultModifiers:zWe});const jWe=(r,e,t={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=UWe(l);Object.assign(o.value,u)},requires:["computeStyles"]},i=Me(()=>{const{onFirstUpdate:l,placement:u,strategy:f,modifiers:c}=$(t);return{onFirstUpdate:l,placement:u||"bottom",strategy:f||"absolute",modifiers:[...c||[],n,{name:"applyStyles",enabled:!1}]}}),a=As(),o=xt({styles:{popper:{position:$(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=()=>{a.value&&(a.value.destroy(),a.value=void 0)};return qt(i,l=>{const u=$(a);u&&u.setOptions(l)},{deep:!0}),qt([r,e],([l,u])=>{s(),!(!l||!u)&&(a.value=GWe(l,u,$(i)))}),La(()=>{s()}),{state:Me(()=>{var l;return{...((l=$(a))==null?void 0:l.state)||{}}}),styles:Me(()=>$(o).styles),attributes:Me(()=>$(o).attributes),update:()=>{var l;return(l=$(a))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=$(a))==null?void 0:l.forceUpdate()},instanceRef:Me(()=>$(a))}};function UWe(r){const e=Object.keys(r.elements),t=Xw(e.map(i=>[i,r.styles[i]||{}])),n=Xw(e.map(i=>[i,r.attributes[i]]));return{styles:t,attributes:n}}const HZ=r=>{if(!r)return{onClick:oi,onMousedown:oi,onMouseup:oi};let e=!1,t=!1;return{onClick:o=>{e&&t&&r(o),e=t=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{t=o.target===o.currentTarget}}};function O$(){let r;const e=(n,i)=>{t(),r=window.setTimeout(n,i)},t=()=>window.clearTimeout(r);return Y_(()=>t()),{registerTimeout:e,cancelTimeout:t}}const k$={prefix:Math.floor(Math.random()*1e4),current:0},WWe=Symbol("elIdInjection"),XZ=()=>Wn()?tn(WWe,k$):k$,hp=r=>{const e=XZ(),t=FP();return Me(()=>$(r)||`${t.value}-id-${e.prefix}-${e.current++}`)};let nv=[];const I$=r=>{const e=r;e.key===Dh.esc&&nv.forEach(t=>t(e))},VWe=r=>{Fn(()=>{nv.length===0&&document.addEventListener("keydown",I$),Ki&&nv.push(r)}),La(()=>{nv=nv.filter(e=>e!==r),nv.length===0&&Ki&&document.removeEventListener("keydown",I$)})};let L$;const YZ=()=>{const r=FP(),e=XZ(),t=Me(()=>`${r.value}-popper-container-${e.prefix}`),n=Me(()=>`#${t.value}`);return{id:t,selector:n}},HWe=r=>{const e=document.createElement("div");return e.id=r,document.body.appendChild(e),e},XWe=()=>{const{id:r,selector:e}=YZ();return Bk(()=>{Ki&&!L$&&!document.body.querySelector(e.value)&&(L$=HWe(r.value))}),{id:r,selector:e}},YWe=sn({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),KWe=({showAfter:r,hideAfter:e,autoClose:t,open:n,close:i})=>{const{registerTimeout:a}=O$(),{registerTimeout:o,cancelTimeout:s}=O$();return{onOpen:f=>{a(()=>{n(f);const c=$(t);qo(c)&&c>0&&o(()=>{i(f)},c)},$(r))},onClose:f=>{s(),a(()=>{i(f)},$(e))}}},KZ=Symbol("elForwardRef"),qWe=r=>{Ia(KZ,{setForwardRef:t=>{r.value=t}})},ZWe=r=>({mounted(e){r(e)},updated(e){r(e)},unmounted(){r(null)}}),P$={current:0},D$=xt(0),qZ=2e3,N$=Symbol("elZIndexContextKey"),ZZ=Symbol("zIndexContextKey"),YP=r=>{const e=Wn()?tn(N$,P$):P$,t=r||(Wn()?tn(ZZ,void 0):void 0),n=Me(()=>{const o=$(t);return qo(o)?o:qZ}),i=Me(()=>n.value+D$.value),a=()=>(e.current++,D$.value=e.current,i.value);return!Ki&&tn(N$),{initialZIndex:n,currentZIndex:i,nextZIndex:a}};function QWe(r){let e;function t(){if(r.value==null)return;const{selectionStart:i,selectionEnd:a,value:o}=r.value;if(i==null||a==null)return;const s=o.slice(0,Math.max(0,i)),l=o.slice(Math.max(0,a));e={selectionStart:i,selectionEnd:a,value:o,beforeTxt:s,afterTxt:l}}function n(){if(r.value==null||e==null)return;const{value:i}=r.value,{beforeTxt:a,afterTxt:o,selectionStart:s}=e;if(a==null||o==null||s==null)return;let l=i.length;if(i.endsWith(o))l=i.length-o.length;else if(i.startsWith(a))l=a.length;else{const u=a[s-1],f=i.indexOf(u,s-1);f!==-1&&(l=f+1)}r.value.setSelectionRange(l,l)}return[t,n]}const n2=J_({type:String,values:fy,required:!1}),QZ=Symbol("size"),JWe=()=>{const r=tn(QZ,{});return Me(()=>$(r.size)||"")};function eVe(r,{beforeFocus:e,afterFocus:t,beforeBlur:n,afterBlur:i}={}){const a=Wn(),{emit:o}=a,s=As(),l=xt(!1),u=h=>{er(e)&&e(h)||l.value||(l.value=!0,o("focus",h),t==null||t())},f=h=>{var d;er(n)&&n(h)||h.relatedTarget&&((d=s.value)!=null&&d.contains(h.relatedTarget))||(l.value=!1,o("blur",h),i==null||i())},c=()=>{var h,d;(h=s.value)!=null&&h.contains(document.activeElement)&&s.value!==document.activeElement||(d=r.value)==null||d.focus()};return qt(s,h=>{h&&h.setAttribute("tabindex","-1")}),Lh(s,"focus",u,!0),Lh(s,"blur",f,!0),Lh(s,"click",c,!0),{isFocused:l,wrapperRef:s,handleFocus:u,handleBlur:f}}function tVe({afterComposition:r,emit:e}){const t=xt(!1),n=s=>{e==null||e("compositionstart",s),t.value=!0},i=s=>{var l;e==null||e("compositionupdate",s);const u=(l=s.target)==null?void 0:l.value,f=u[u.length-1]||"";t.value=!C7e(f)},a=s=>{e==null||e("compositionend",s),t.value&&(t.value=!1,di(()=>r(s)))};return{isComposing:t,handleComposition:s=>{s.type==="compositionend"?a(s):i(s)},handleCompositionStart:n,handleCompositionUpdate:i,handleCompositionEnd:a}}const rVe=Symbol("emptyValuesContextKey");sn({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:r=>er(r)?!r():!r}});const nVe=sn({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),dy=r=>YUe(nVe,r),JZ=Symbol(),Zw=xt();function i2(r,e=void 0){const t=Wn()?tn(JZ,Zw):Zw;return r?Me(()=>{var n,i;return(i=(n=t.value)==null?void 0:n[r])!=null?i:e}):t}function iVe(r,e){const t=i2(),n=Pn(r,Me(()=>{var s;return((s=t.value)==null?void 0:s.namespace)||g0})),i=BP(Me(()=>{var s;return(s=t.value)==null?void 0:s.locale})),a=YP(Me(()=>{var s;return((s=t.value)==null?void 0:s.zIndex)||qZ})),o=Me(()=>{var s;return $(e)||((s=t.value)==null?void 0:s.size)||""});return aVe(Me(()=>$(t)||{})),{ns:n,locale:i,zIndex:a,size:o}}const aVe=(r,e,t=!1)=>{var n;const i=!!Wn(),a=i?i2():void 0,o=(n=e==null?void 0:e.provide)!=null?n:i?Ia:void 0;if(!o)return;const s=Me(()=>{const l=$(r);return a!=null&&a.value?oVe(a.value,l):l});return o(JZ,s),o(IZ,Me(()=>s.value.locale)),o(LZ,Me(()=>s.value.namespace)),o(ZZ,Me(()=>s.value.zIndex)),o(QZ,{size:Me(()=>s.value.size||"")}),o(rVe,Me(()=>({emptyValues:s.value.emptyValues,valueOnClear:s.value.valueOnClear}))),(t||!Zw.value)&&(Zw.value=s.value),s},oVe=(r,e)=>{const t=[...new Set([...m$(r),...m$(e)])],n={};for(const i of t)n[i]=e[i]!==void 0?e[i]:r[i];return n};var yn=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t};const sVe=sn({size:{type:pr([Number,String])},color:{type:String}}),lVe=Rt({name:"ElIcon",inheritAttrs:!1}),uVe=Rt({...lVe,props:sVe,setup(r){const e=r,t=Pn("icon"),n=Me(()=>{const{size:i,color:a}=e;return!i&&!a?{}:{fontSize:qUe(i)?void 0:Pu(i),"--color":a}});return(i,a)=>(ct(),or("i",Xo({class:$(t).b(),style:$(n)},i.$attrs),[dr(i.$slots,"default")],16))}});var fVe=yn(uVe,[["__file","icon.vue"]]);const Ci=Oo(fVe),Dp=Symbol("formContextKey"),Zh=Symbol("formItemContextKey"),dd=(r,e={})=>{const t=xt(void 0),n=e.prop?t:DZ("size"),i=e.global?t:JWe(),a=e.form?{size:void 0}:tn(Dp,void 0),o=e.formItem?{size:void 0}:tn(Zh,void 0);return Me(()=>n.value||$(r)||(o==null?void 0:o.size)||(a==null?void 0:a.size)||i.value||"")},vy=r=>{const e=DZ("disabled"),t=tn(Dp,void 0);return Me(()=>e.value||$(r)||(t==null?void 0:t.disabled)||!1)},a2=()=>{const r=tn(Dp,void 0),e=tn(Zh,void 0);return{form:r,formItem:e}},KP=(r,{formItemContext:e,disableIdGeneration:t,disableIdManagement:n})=>{t||(t=xt(!1)),n||(n=xt(!1));const i=xt();let a;const o=Me(()=>{var s;return!!(!(r.label||r.ariaLabel)&&e&&e.inputIds&&((s=e.inputIds)==null?void 0:s.length)<=1)});return Fn(()=>{a=qt([vl(r,"id"),t],([s,l])=>{const u=s??(l?void 0:hp().value);u!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(n!=null&&n.value)&&!l&&u&&e.addInputId(u)),i.value=u)},{immediate:!0})}),RE(()=>{a&&a(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:o,inputId:i}},cVe=sn({size:{type:String,values:fy},disabled:Boolean}),hVe=sn({...cVe,model:Object,rules:{type:pr(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),dVe={validate:(r,e,t)=>(Jt(r)||qr(r))&&Ko(e)&&qr(t)};function vVe(){const r=xt([]),e=Me(()=>{if(!r.value.length)return"0";const a=Math.max(...r.value);return a?`${a}px`:""});function t(a){const o=r.value.indexOf(a);return o===-1&&e.value,o}function n(a,o){if(a&&o){const s=t(o);r.value.splice(s,1,a)}else a&&r.value.push(a)}function i(a){const o=t(a);o>-1&&r.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:n,deregisterLabelWidth:i}}const db=(r,e)=>{const t=uO(e);return t.length>0?r.filter(n=>n.prop&&t.includes(n.prop)):r},pVe="ElForm",gVe=Rt({name:pVe}),mVe=Rt({...gVe,props:hVe,emits:dVe,setup(r,{expose:e,emit:t}){const n=r,i=[],a=dd(),o=Pn("form"),s=Me(()=>{const{labelPosition:y,inline:x}=n;return[o.b(),o.m(a.value||"default"),{[o.m(`label-${y}`)]:y,[o.m("inline")]:x}]}),l=y=>i.find(x=>x.prop===y),u=y=>{i.push(y)},f=y=>{y.prop&&i.splice(i.indexOf(y),1)},c=(y=[])=>{n.model&&db(i,y).forEach(x=>x.resetField())},h=(y=[])=>{db(i,y).forEach(x=>x.clearValidate())},d=Me(()=>!!n.model),v=y=>{if(i.length===0)return[];const x=db(i,y);return x.length?x:[]},p=async y=>m(void 0,y),g=async(y=[])=>{if(!d.value)return!1;const x=v(y);if(x.length===0)return!0;let w={};for(const E of x)try{await E.validate("")}catch(_){w={...w,..._}}return Object.keys(w).length===0?!0:Promise.reject(w)},m=async(y=[],x)=>{const w=!er(x);try{const E=await g(y);return E===!0&&await(x==null?void 0:x(E)),E}catch(E){if(E instanceof Error)throw E;const _=E;return n.scrollToError&&b(Object.keys(_)[0]),await(x==null?void 0:x(!1,_)),w&&Promise.reject(_)}},b=y=>{var x;const w=db(i,y)[0];w&&((x=w.$el)==null||x.scrollIntoView(n.scrollIntoViewOptions))};return qt(()=>n.rules,()=>{n.validateOnRuleChange&&p().catch(y=>void 0)},{deep:!0}),Ia(Dp,dc({...LE(n),emit:t,resetFields:c,clearValidate:h,validateField:m,getField:l,addField:u,removeField:f,...vVe()})),e({validate:p,validateField:m,resetFields:c,clearValidate:h,scrollToField:b,fields:i}),(y,x)=>(ct(),or("form",{class:Tt($(s))},[dr(y.$slots,"default")],2))}});var yVe=yn(mVe,[["__file","form.vue"]]);function mh(){return mh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},mh.apply(this,arguments)}function bVe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,fm(r,e)}function pO(r){return pO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pO(r)}function fm(r,e){return fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fm(r,e)}function xVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sx(r,e,t){return xVe()?Sx=Reflect.construct.bind():Sx=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&fm(u,o.prototype),u},Sx.apply(null,arguments)}function wVe(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function gO(r){var e=typeof Map=="function"?new Map:void 0;return gO=function(n){if(n===null||!wVe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Sx(n,arguments,pO(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),fm(i,n)},gO(r)}var EVe=/%[sdj%]/g,_Ve=function(){};function mO(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)}),e}function Eo(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=0,a=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var o=r.replace(EVe,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return s}});return o}return r}function SVe(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function Di(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||SVe(e)&&typeof r=="string"&&!r)}function MVe(r,e,t){var n=[],i=0,a=r.length;function o(s){n.push.apply(n,s||[]),i++,i===a&&t(n)}r.forEach(function(s){e(s,o)})}function R$(r,e,t){var n=0,i=r.length;function a(o){if(o&&o.length){t(o);return}var s=n;n=n+1,s<i?e(r[s],a):t([])}a([])}function CVe(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,r[t]||[])}),e}var B$=function(r){bVe(e,r);function e(t,n){var i;return i=r.call(this,"Async Validation Error")||this,i.errors=t,i.fields=n,i}return e}(gO(Error));function AVe(r,e,t,n,i){if(e.first){var a=new Promise(function(h,d){var v=function(m){return n(m),m.length?d(new B$(m,mO(m))):h(i)},p=CVe(r);R$(p,t,v)});return a.catch(function(h){return h}),a}var o=e.firstFields===!0?Object.keys(r):e.firstFields||[],s=Object.keys(r),l=s.length,u=0,f=[],c=new Promise(function(h,d){var v=function(g){if(f.push.apply(f,g),u++,u===l)return n(f),f.length?d(new B$(f,mO(f))):h(i)};s.length||(n(f),h(i)),s.forEach(function(p){var g=r[p];o.indexOf(p)!==-1?R$(g,t,v):MVe(g,t,v)})});return c.catch(function(h){return h}),c}function TVe(r){return!!(r&&r.message!==void 0)}function OVe(r,e){for(var t=r,n=0;n<e.length;n++){if(t==null)return t;t=t[e[n]]}return t}function F$(r,e){return function(t){var n;return r.fullFields?n=OVe(e,r.fullFields):n=e[t.field||r.fullField],TVe(t)?(t.field=t.field||r.fullField,t.fieldValue=n,t):{message:typeof t=="function"?t():t,fieldValue:n,field:t.field||r.fullField}}}function $$(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];typeof n=="object"&&typeof r[t]=="object"?r[t]=mh({},r[t],n):r[t]=n}}return r}var eQ=function(e,t,n,i,a,o){e.required&&(!n.hasOwnProperty(e.field)||Di(t,o||e.type))&&i.push(Eo(a.messages.required,e.fullField))},kVe=function(e,t,n,i,a){(/^\s+$/.test(t)||t==="")&&i.push(Eo(a.messages.whitespace,e.fullField))},vb,IVe=function(){if(vb)return vb;var r="[a-fA-F\\d:]",e=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+t+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+t+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+t+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+t+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+t+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+t+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+t+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),o=new RegExp("^"+t+"$"),s=new RegExp("^"+i+"$"),l=function(x){return x&&x.exact?a:new RegExp("(?:"+e(x)+t+e(x)+")|(?:"+e(x)+i+e(x)+")","g")};l.v4=function(y){return y&&y.exact?o:new RegExp(""+e(y)+t+e(y),"g")},l.v6=function(y){return y&&y.exact?s:new RegExp(""+e(y)+i+e(y),"g")};var u="(?:(?:[a-z]+:)?//)",f="(?:\\S+(?::\\S*)?@)?",c=l.v4().source,h=l.v6().source,d="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",m='(?:[/?#][^\\s"]*)?',b="(?:"+u+"|www\\.)"+f+"(?:localhost|"+c+"|"+h+"|"+d+v+p+")"+g+m;return vb=new RegExp("(?:^"+b+"$)","i"),vb},z$={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},jg={integer:function(e){return jg.number(e)&&parseInt(e,10)===e},float:function(e){return jg.number(e)&&!jg.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!jg.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(z$.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(IVe())},hex:function(e){return typeof e=="string"&&!!e.match(z$.hex)}},LVe=function(e,t,n,i,a){if(e.required&&t===void 0){eQ(e,t,n,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?jg[s](t)||i.push(Eo(a.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&i.push(Eo(a.messages.types[s],e.fullField,e.type))},PVe=function(e,t,n,i,a){var o=typeof e.len=="number",s=typeof e.min=="number",l=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=t,c=null,h=typeof t=="number",d=typeof t=="string",v=Array.isArray(t);if(h?c="number":d?c="string":v&&(c="array"),!c)return!1;v&&(f=t.length),d&&(f=t.replace(u,"_").length),o?f!==e.len&&i.push(Eo(a.messages[c].len,e.fullField,e.len)):s&&!l&&f<e.min?i.push(Eo(a.messages[c].min,e.fullField,e.min)):l&&!s&&f>e.max?i.push(Eo(a.messages[c].max,e.fullField,e.max)):s&&l&&(f<e.min||f>e.max)&&i.push(Eo(a.messages[c].range,e.fullField,e.min,e.max))},Hd="enum",DVe=function(e,t,n,i,a){e[Hd]=Array.isArray(e[Hd])?e[Hd]:[],e[Hd].indexOf(t)===-1&&i.push(Eo(a.messages[Hd],e.fullField,e[Hd].join(", ")))},NVe=function(e,t,n,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(Eo(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||i.push(Eo(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},en={required:eQ,whitespace:kVe,type:LVe,range:PVe,enum:DVe,pattern:NVe},RVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t,"string")&&!e.required)return n();en.required(e,t,i,o,a,"string"),Di(t,"string")||(en.type(e,t,i,o,a),en.range(e,t,i,o,a),en.pattern(e,t,i,o,a),e.whitespace===!0&&en.whitespace(e,t,i,o,a))}n(o)},BVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&en.type(e,t,i,o,a)}n(o)},FVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t===""&&(t=void 0),Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&(en.type(e,t,i,o,a),en.range(e,t,i,o,a))}n(o)},$Ve=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&en.type(e,t,i,o,a)}n(o)},zVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),Di(t)||en.type(e,t,i,o,a)}n(o)},GVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&(en.type(e,t,i,o,a),en.range(e,t,i,o,a))}n(o)},jVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&(en.type(e,t,i,o,a),en.range(e,t,i,o,a))}n(o)},UVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t==null&&!e.required)return n();en.required(e,t,i,o,a,"array"),t!=null&&(en.type(e,t,i,o,a),en.range(e,t,i,o,a))}n(o)},WVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&en.type(e,t,i,o,a)}n(o)},VVe="enum",HVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a),t!==void 0&&en[VVe](e,t,i,o,a)}n(o)},XVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t,"string")&&!e.required)return n();en.required(e,t,i,o,a),Di(t,"string")||en.pattern(e,t,i,o,a)}n(o)},YVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t,"date")&&!e.required)return n();if(en.required(e,t,i,o,a),!Di(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),en.type(e,l,i,o,a),l&&en.range(e,l.getTime(),i,o,a)}}n(o)},KVe=function(e,t,n,i,a){var o=[],s=Array.isArray(t)?"array":typeof t;en.required(e,t,i,o,a,s),n(o)},bC=function(e,t,n,i,a){var o=e.type,s=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(Di(t,o)&&!e.required)return n();en.required(e,t,i,s,a,o),Di(t,o)||en.type(e,t,i,s,a)}n(s)},qVe=function(e,t,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Di(t)&&!e.required)return n();en.required(e,t,i,o,a)}n(o)},b0={string:RVe,method:BVe,number:FVe,boolean:$Ve,regexp:zVe,integer:GVe,float:jVe,array:UVe,object:WVe,enum:HVe,pattern:XVe,date:YVe,url:bC,hex:bC,email:bC,required:KVe,any:qVe};function yO(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var bO=yO(),py=function(){function r(t){this.rules=null,this._messages=bO,this.define(t)}var e=r.prototype;return e.define=function(n){var i=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(a){var o=n[a];i.rules[a]=Array.isArray(o)?o:[o]})},e.messages=function(n){return n&&(this._messages=$$(yO(),n)),this._messages},e.validate=function(n,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=n,l=i,u=a;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function f(p){var g=[],m={};function b(x){if(Array.isArray(x)){var w;g=(w=g).concat.apply(w,x)}else g.push(x)}for(var y=0;y<p.length;y++)b(p[y]);g.length?(m=mO(g),u(g,m)):u(null,s)}if(l.messages){var c=this.messages();c===bO&&(c=yO()),$$(c,l.messages),l.messages=c}else l.messages=this.messages();var h={},d=l.keys||Object.keys(this.rules);d.forEach(function(p){var g=o.rules[p],m=s[p];g.forEach(function(b){var y=b;typeof y.transform=="function"&&(s===n&&(s=mh({},s)),m=s[p]=y.transform(m)),typeof y=="function"?y={validator:y}:y=mh({},y),y.validator=o.getValidationMethod(y),y.validator&&(y.field=p,y.fullField=y.fullField||p,y.type=o.getType(y),h[p]=h[p]||[],h[p].push({rule:y,value:m,source:s,field:p}))})});var v={};return AVe(h,l,function(p,g){var m=p.rule,b=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");b=b&&(m.required||!m.required&&p.value),m.field=p.field;function y(E,_){return mh({},_,{fullField:m.fullField+"."+E,fullFields:m.fullFields?[].concat(m.fullFields,[E]):[E]})}function x(E){E===void 0&&(E=[]);var _=Array.isArray(E)?E:[E];!l.suppressWarning&&_.length&&r.warning("async-validator:",_),_.length&&m.message!==void 0&&(_=[].concat(m.message));var S=_.map(F$(m,s));if(l.first&&S.length)return v[m.field]=1,g(S);if(!b)g(S);else{if(m.required&&!p.value)return m.message!==void 0?S=[].concat(m.message).map(F$(m,s)):l.error&&(S=[l.error(m,Eo(l.messages.required,m.field))]),g(S);var C={};m.defaultField&&Object.keys(p.value).map(function(A){C[A]=m.defaultField}),C=mh({},C,p.rule.fields);var M={};Object.keys(C).forEach(function(A){var O=C[A],L=Array.isArray(O)?O:[O];M[A]=L.map(y.bind(null,A))});var T=new r(M);T.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),T.validate(p.value,p.rule.options||l,function(A){var O=[];S&&S.length&&O.push.apply(O,S),A&&A.length&&O.push.apply(O,A),g(O.length?O:null)})}}var w;if(m.asyncValidator)w=m.asyncValidator(m,p.value,x,p.source,l);else if(m.validator){try{w=m.validator(m,p.value,x,p.source,l)}catch(E){console.error==null||console.error(E),l.suppressValidatorError||setTimeout(function(){throw E},0),x(E.message)}w===!0?x():w===!1?x(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):w instanceof Array?x(w):w instanceof Error&&x(w.message)}w&&w.then&&w.then(function(){return x()},function(E){return x(E)})},function(p){f(p)},s)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!b0.hasOwnProperty(n.type))throw new Error(Eo("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var i=Object.keys(n),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?b0.required:b0[this.getType(n)]||void 0},r}();py.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");b0[e]=t};py.warning=_Ve;py.messages=bO;py.validators=b0;const ZVe=["","error","validating","success"],QVe=sn({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:pr([String,Array])},required:{type:Boolean,default:void 0},rules:{type:pr([Object,Array])},error:String,validateStatus:{type:String,values:ZVe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:fy}}),G$="ElLabelWrap";var JVe=Rt({name:G$,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(r,{slots:e}){const t=tn(Dp,void 0),n=tn(Zh);n||NP(G$,"usage: <el-form-item><label-wrap /></el-form-item>");const i=Pn("form"),a=xt(),o=xt(0),s=()=>{var f;if((f=a.value)!=null&&f.firstElementChild){const c=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(c))}else return 0},l=(f="update")=>{di(()=>{e.default&&r.isAutoWidth&&(f==="update"?o.value=s():f==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},u=()=>l("update");return Fn(()=>{u()}),La(()=>{l("remove")}),Fk(()=>u()),qt(o,(f,c)=>{r.updateAll&&(t==null||t.registerLabelWidth(f,c))}),eZ(Me(()=>{var f,c;return(c=(f=a.value)==null?void 0:f.firstElementChild)!=null?c:null}),u),()=>{var f,c;if(!e)return null;const{isAutoWidth:h}=r;if(h){const d=t==null?void 0:t.autoLabelWidth,v=n==null?void 0:n.hasLabel,p={};if(v&&d&&d!=="auto"){const g=Math.max(0,Number.parseInt(d,10)-o.value),b=(n.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";g&&(p[b]=`${g}px`)}return _r("div",{ref:a,class:[i.be("item","label-wrap")],style:p},[(f=e.default)==null?void 0:f.call(e)])}else return _r(Qn,{ref:a},[(c=e.default)==null?void 0:c.call(e)])}}});const eHe=Rt({name:"ElFormItem"}),tHe=Rt({...eHe,props:QVe,setup(r,{expose:e}){const t=r,n=Am(),i=tn(Dp,void 0),a=tn(Zh,void 0),o=dd(void 0,{formItem:!1}),s=Pn("form-item"),l=hp().value,u=xt([]),f=xt(""),c=Oze(f,100),h=xt(""),d=xt();let v,p=!1;const g=Me(()=>t.labelPosition||(i==null?void 0:i.labelPosition)),m=Me(()=>{if(g.value==="top")return{};const _e=Pu(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return _e?{width:_e}:{}}),b=Me(()=>{if(g.value==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&M)return{};const _e=Pu(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!n.label?{marginLeft:_e}:{}}),y=Me(()=>[s.b(),s.m(o.value),s.is("error",f.value==="error"),s.is("validating",f.value==="validating"),s.is("success",f.value==="success"),s.is("required",N.value||t.required),s.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[s.m("feedback")]:i==null?void 0:i.statusIcon,[s.m(`label-${g.value}`)]:g.value}]),x=Me(()=>Ko(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),w=Me(()=>[s.e("error"),{[s.em("error","inline")]:x.value}]),E=Me(()=>t.prop?qr(t.prop)?t.prop:t.prop.join("."):""),_=Me(()=>!!(t.label||n.label)),S=Me(()=>t.for||(u.value.length===1?u.value[0]:void 0)),C=Me(()=>!S.value&&_.value),M=!!a,T=Me(()=>{const _e=i==null?void 0:i.model;if(!(!_e||!t.prop))return yC(_e,t.prop).value}),A=Me(()=>{const{required:_e}=t,Ve=[];t.rules&&Ve.push(...uO(t.rules));const Xe=i==null?void 0:i.rules;if(Xe&&t.prop){const vt=yC(Xe,t.prop).value;vt&&Ve.push(...uO(vt))}if(_e!==void 0){const vt=Ve.map((bt,te)=>[bt,te]).filter(([bt])=>Object.keys(bt).includes("required"));if(vt.length>0)for(const[bt,te]of vt)bt.required!==_e&&(Ve[te]={...bt,required:_e});else Ve.push({required:_e})}return Ve}),O=Me(()=>A.value.length>0),L=_e=>A.value.filter(Xe=>!Xe.trigger||!_e?!0:Array.isArray(Xe.trigger)?Xe.trigger.includes(_e):Xe.trigger===_e).map(({trigger:Xe,...vt})=>vt),N=Me(()=>A.value.some(_e=>_e.required)),P=Me(()=>{var _e;return c.value==="error"&&t.showMessage&&((_e=i==null?void 0:i.showMessage)!=null?_e:!0)}),R=Me(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),G=_e=>{f.value=_e},D=_e=>{var Ve,Xe;const{errors:vt,fields:bt}=_e;(!vt||!bt)&&console.error(_e),G("error"),h.value=vt?(Xe=(Ve=vt==null?void 0:vt[0])==null?void 0:Ve.message)!=null?Xe:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,h.value)},B=()=>{G("success"),i==null||i.emit("validate",t.prop,!0,"")},Y=async _e=>{const Ve=E.value;return new py({[Ve]:_e}).validate({[Ve]:T.value},{firstFields:!0}).then(()=>(B(),!0)).catch(vt=>(D(vt),Promise.reject(vt)))},ee=async(_e,Ve)=>{if(p||!t.prop)return!1;const Xe=er(Ve);if(!O.value)return Ve==null||Ve(!1),!1;const vt=L(_e);return vt.length===0?(Ve==null||Ve(!0),!0):(G("validating"),Y(vt).then(()=>(Ve==null||Ve(!0),!0)).catch(bt=>{const{fields:te}=bt;return Ve==null||Ve(!1,te),Xe?!1:Promise.reject(te)}))},ne=()=>{G(""),h.value="",p=!1},Q=async()=>{const _e=i==null?void 0:i.model;if(!_e||!t.prop)return;const Ve=yC(_e,t.prop);p=!0,Ve.value=p$(v),await di(),ne(),p=!1},ye=_e=>{u.value.includes(_e)||u.value.push(_e)},Le=_e=>{u.value=u.value.filter(Ve=>Ve!==_e)};qt(()=>t.error,_e=>{h.value=_e||"",G(_e?"error":"")},{immediate:!0}),qt(()=>t.validateStatus,_e=>G(_e||""));const Fe=dc({...LE(t),$el:d,size:o,validateState:f,labelId:l,inputIds:u,isGroup:C,hasLabel:_,fieldValue:T,addInputId:ye,removeInputId:Le,resetField:Q,clearValidate:ne,validate:ee});return Ia(Zh,Fe),Fn(()=>{t.prop&&(i==null||i.addField(Fe),v=p$(T.value))}),La(()=>{i==null||i.removeField(Fe)}),e({size:o,validateMessage:h,validateState:f,validate:ee,clearValidate:ne,resetField:Q}),(_e,Ve)=>{var Xe;return ct(),or("div",{ref_key:"formItemRef",ref:d,class:Tt($(y)),role:$(C)?"group":void 0,"aria-labelledby":$(C)?$(l):void 0},[_r($(JVe),{"is-auto-width":$(m).width==="auto","update-all":((Xe=$(i))==null?void 0:Xe.labelWidth)==="auto"},{default:gr(()=>[$(_)?(ct(),mr(Ma($(S)?"label":"div"),{key:0,id:$(l),for:$(S),class:Tt($(s).e("label")),style:ga($(m))},{default:gr(()=>[dr(_e.$slots,"label",{label:$(R)},()=>[Tm(Oi($(R)),1)])]),_:3},8,["id","for","class","style"])):ar("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),xr("div",{class:Tt($(s).e("content")),style:ga($(b))},[dr(_e.$slots,"default"),_r(woe,{name:`${$(s).namespace.value}-zoom-in-top`},{default:gr(()=>[$(P)?dr(_e.$slots,"error",{key:0,error:h.value},()=>[xr("div",{class:Tt($(w))},Oi(h.value),3)]):ar("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var tQ=yn(tHe,[["__file","form-item.vue"]]);const Lrt=Oo(yVe,{FormItem:tQ}),Prt=e2(tQ);let vs;const rHe=`
  height:0 !important;
  visibility:hidden !important;
  ${Gze()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,nHe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function iHe(r){const e=window.getComputedStyle(r),t=e.getPropertyValue("box-sizing"),n=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:nHe.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:n,borderSize:i,boxSizing:t}}function j$(r,e=1,t){var n;vs||(vs=document.createElement("textarea"),document.body.appendChild(vs));const{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=iHe(r);vs.setAttribute("style",`${s};${rHe}`),vs.value=r.value||r.placeholder||"";let l=vs.scrollHeight;const u={};o==="border-box"?l=l+a:o==="content-box"&&(l=l-i),vs.value="";const f=vs.scrollHeight-i;if(qo(e)){let c=f*e;o==="border-box"&&(c=c+i+a),l=Math.max(c,l),u.minHeight=`${c}px`}if(qo(t)){let c=f*t;o==="border-box"&&(c=c+i+a),l=Math.min(c,l)}return u.height=`${l}px`,(n=vs.parentNode)==null||n.removeChild(vs),vs=void 0,u}const aHe=sn({id:{type:String,default:void 0},size:n2,disabled:Boolean,modelValue:{type:pr([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:pr([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ms},prefixIcon:{type:Ms},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:pr([Object,Array,String]),default:()=>A7e({})},autofocus:Boolean,rows:{type:Number,default:2},...dy(["ariaLabel"])}),oHe={[Is]:r=>qr(r),input:r=>qr(r),change:r=>qr(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},sHe=Rt({name:"ElInput",inheritAttrs:!1}),lHe=Rt({...sHe,props:aHe,emits:oHe,setup(r,{expose:e,emit:t}){const n=r,i=oae(),a=Am(),o=Me(()=>{const k={};return n.containerRole==="combobox"&&(k["aria-haspopup"]=i["aria-haspopup"],k["aria-owns"]=i["aria-owns"],k["aria-expanded"]=i["aria-expanded"]),k}),s=Me(()=>[n.type==="textarea"?g.b():p.b(),p.m(d.value),p.is("disabled",v.value),p.is("exceed",Y.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||n.prefixIcon,[p.m("suffix")]:a.suffix||n.suffixIcon||n.clearable||n.showPassword,[p.bm("suffix","password-clear")]:R.value&&G.value,[p.b("hidden")]:n.type==="hidden"},i.class]),l=Me(()=>[p.e("wrapper"),p.is("focus",C.value)]),u=k7e({excludeKeys:Me(()=>Object.keys(o.value))}),{form:f,formItem:c}=a2(),{inputId:h}=KP(n,{formItemContext:c}),d=dd(),v=vy(),p=Pn("input"),g=Pn("textarea"),m=As(),b=As(),y=xt(!1),x=xt(!1),w=xt(),E=As(n.inputStyle),_=Me(()=>m.value||b.value),{wrapperRef:S,isFocused:C}=eVe(_,{afterBlur(){var k;n.validateEvent&&((k=c==null?void 0:c.validate)==null||k.call(c,"blur").catch(ue=>void 0))}}),M=Me(()=>{var k;return(k=f==null?void 0:f.statusIcon)!=null?k:!1}),T=Me(()=>(c==null?void 0:c.validateState)||""),A=Me(()=>T.value&&w7e[T.value]),O=Me(()=>x.value?m7e:f7e),L=Me(()=>[i.style]),N=Me(()=>[n.inputStyle,E.value,{resize:n.resize}]),P=Me(()=>uy(n.modelValue)?"":String(n.modelValue)),R=Me(()=>n.clearable&&!v.value&&!n.readonly&&!!P.value&&(C.value||y.value)),G=Me(()=>n.showPassword&&!v.value&&!n.readonly&&!!P.value&&(!!P.value||C.value)),D=Me(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!v.value&&!n.readonly&&!n.showPassword),B=Me(()=>P.value.length),Y=Me(()=>!!D.value&&B.value>Number(n.maxlength)),ee=Me(()=>!!a.suffix||!!n.suffixIcon||R.value||n.showPassword||D.value||!!T.value&&M.value),[ne,Q]=QWe(m);eZ(b,k=>{if(Fe(),!D.value||n.resize!=="both")return;const ue=k[0],{width:ce}=ue.contentRect;w.value={right:`calc(100% - ${ce+15+6}px)`}});const ye=()=>{const{type:k,autosize:ue}=n;if(!(!Ki||k!=="textarea"||!b.value))if(ue){const ce=on(ue)?ue.minRows:void 0,X=on(ue)?ue.maxRows:void 0,ae=j$(b.value,ce,X);E.value={overflowY:"hidden",...ae},di(()=>{b.value.offsetHeight,E.value=ae})}else E.value={minHeight:j$(b.value).minHeight}},Fe=(k=>{let ue=!1;return()=>{var ce;if(ue||!n.autosize)return;((ce=b.value)==null?void 0:ce.offsetParent)===null||(k(),ue=!0)}})(ye),_e=()=>{const k=_.value,ue=n.formatter?n.formatter(P.value):P.value;!k||k.value===ue||(k.value=ue)},Ve=async k=>{ne();let{value:ue}=k.target;if(n.formatter&&(ue=n.parser?n.parser(ue):ue),!vt.value){if(ue===P.value){_e();return}t(Is,ue),t("input",ue),await di(),_e(),Q()}},Xe=k=>{t("change",k.target.value)},{isComposing:vt,handleCompositionStart:bt,handleCompositionUpdate:te,handleCompositionEnd:H}=tVe({emit:t,afterComposition:Ve}),de=()=>{x.value=!x.value,Be()},Be=async()=>{var k;await di(),(k=_.value)==null||k.focus()},Ie=()=>{var k;return(k=_.value)==null?void 0:k.blur()},Pe=k=>{y.value=!1,t("mouseleave",k)},Ye=k=>{y.value=!0,t("mouseenter",k)},V=k=>{t("keydown",k)},z=()=>{var k;(k=_.value)==null||k.select()},F=()=>{t(Is,""),t("change",""),t("clear"),t("input","")};return qt(()=>n.modelValue,()=>{var k;di(()=>ye()),n.validateEvent&&((k=c==null?void 0:c.validate)==null||k.call(c,"change").catch(ue=>void 0))}),qt(P,()=>_e()),qt(()=>n.type,async()=>{await di(),_e(),ye()}),Fn(()=>{!n.formatter&&n.parser,_e(),di(ye)}),e({input:m,textarea:b,ref:_,textareaStyle:N,autosize:vl(n,"autosize"),isComposing:vt,focus:Be,blur:Ie,select:z,clear:F,resizeTextarea:ye}),(k,ue)=>(ct(),or("div",Xo($(o),{class:[$(s),{[$(p).bm("group","append")]:k.$slots.append,[$(p).bm("group","prepend")]:k.$slots.prepend}],style:$(L),role:k.containerRole,onMouseenter:Ye,onMouseleave:Pe}),[ar(" input "),k.type!=="textarea"?(ct(),or(Qn,{key:0},[ar(" prepend slot "),k.$slots.prepend?(ct(),or("div",{key:0,class:Tt($(p).be("group","prepend"))},[dr(k.$slots,"prepend")],2)):ar("v-if",!0),xr("div",{ref_key:"wrapperRef",ref:S,class:Tt($(l))},[ar(" prefix slot "),k.$slots.prefix||k.prefixIcon?(ct(),or("span",{key:0,class:Tt($(p).e("prefix"))},[xr("span",{class:Tt($(p).e("prefix-inner"))},[dr(k.$slots,"prefix"),k.prefixIcon?(ct(),mr($(Ci),{key:0,class:Tt($(p).e("icon"))},{default:gr(()=>[(ct(),mr(Ma(k.prefixIcon)))]),_:1},8,["class"])):ar("v-if",!0)],2)],2)):ar("v-if",!0),xr("input",Xo({id:$(h),ref_key:"input",ref:m,class:$(p).e("inner")},$(u),{minlength:k.minlength,maxlength:k.maxlength,type:k.showPassword?x.value?"text":"password":k.type,disabled:$(v),readonly:k.readonly,autocomplete:k.autocomplete,tabindex:k.tabindex,"aria-label":k.ariaLabel,placeholder:k.placeholder,style:k.inputStyle,form:k.form,autofocus:k.autofocus,onCompositionstart:$(bt),onCompositionupdate:$(te),onCompositionend:$(H),onInput:Ve,onChange:Xe,onKeydown:V}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),ar(" suffix slot "),$(ee)?(ct(),or("span",{key:1,class:Tt($(p).e("suffix"))},[xr("span",{class:Tt($(p).e("suffix-inner"))},[!$(R)||!$(G)||!$(D)?(ct(),or(Qn,{key:0},[dr(k.$slots,"suffix"),k.suffixIcon?(ct(),mr($(Ci),{key:0,class:Tt($(p).e("icon"))},{default:gr(()=>[(ct(),mr(Ma(k.suffixIcon)))]),_:1},8,["class"])):ar("v-if",!0)],64)):ar("v-if",!0),$(R)?(ct(),mr($(Ci),{key:1,class:Tt([$(p).e("icon"),$(p).e("clear")]),onMousedown:Il($(oi),["prevent"]),onClick:F},{default:gr(()=>[_r($(TZ))]),_:1},8,["class","onMousedown"])):ar("v-if",!0),$(G)?(ct(),mr($(Ci),{key:2,class:Tt([$(p).e("icon"),$(p).e("password")]),onClick:de},{default:gr(()=>[(ct(),mr(Ma($(O))))]),_:1},8,["class"])):ar("v-if",!0),$(D)?(ct(),or("span",{key:3,class:Tt($(p).e("count"))},[xr("span",{class:Tt($(p).e("count-inner"))},Oi($(B))+" / "+Oi(k.maxlength),3)],2)):ar("v-if",!0),$(T)&&$(A)&&$(M)?(ct(),mr($(Ci),{key:4,class:Tt([$(p).e("icon"),$(p).e("validateIcon"),$(p).is("loading",$(T)==="validating")])},{default:gr(()=>[(ct(),mr(Ma($(A))))]),_:1},8,["class"])):ar("v-if",!0)],2)],2)):ar("v-if",!0)],2),ar(" append slot "),k.$slots.append?(ct(),or("div",{key:1,class:Tt($(p).be("group","append"))},[dr(k.$slots,"append")],2)):ar("v-if",!0)],64)):(ct(),or(Qn,{key:1},[ar(" textarea "),xr("textarea",Xo({id:$(h),ref_key:"textarea",ref:b,class:[$(g).e("inner"),$(p).is("focus",$(C))]},$(u),{minlength:k.minlength,maxlength:k.maxlength,tabindex:k.tabindex,disabled:$(v),readonly:k.readonly,autocomplete:k.autocomplete,style:$(N),"aria-label":k.ariaLabel,placeholder:k.placeholder,form:k.form,autofocus:k.autofocus,rows:k.rows,onCompositionstart:$(bt),onCompositionupdate:$(te),onCompositionend:$(H),onInput:Ve,onChange:Xe,onKeydown:V}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend"]),$(D)?(ct(),or("span",{key:0,style:ga(w.value),class:Tt($(p).e("count"))},Oi($(B))+" / "+Oi(k.maxlength),7)):ar("v-if",!0)],64))],16,["role"]))}});var uHe=yn(lHe,[["__file","input.vue"]]);const Drt=Oo(uHe),qP=Symbol("popper"),rQ=Symbol("popperContent"),fHe=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],nQ=sn({role:{type:String,values:fHe,default:"tooltip"}}),cHe=Rt({name:"ElPopper",inheritAttrs:!1}),hHe=Rt({...cHe,props:nQ,setup(r,{expose:e}){const t=r,n=xt(),i=xt(),a=xt(),o=xt(),s=Me(()=>t.role),l={triggerRef:n,popperInstanceRef:i,contentRef:a,referenceRef:o,role:s};return e(l),Ia(qP,l),(u,f)=>dr(u.$slots,"default")}});var dHe=yn(hHe,[["__file","popper.vue"]]);const iQ=sn({arrowOffset:{type:Number,default:5}}),vHe=Rt({name:"ElPopperArrow",inheritAttrs:!1}),pHe=Rt({...vHe,props:iQ,setup(r,{expose:e}){const t=r,n=Pn("popper"),{arrowOffset:i,arrowRef:a,arrowStyle:o}=tn(rQ,void 0);return qt(()=>t.arrowOffset,s=>{i.value=s}),La(()=>{a.value=void 0}),e({arrowRef:a}),(s,l)=>(ct(),or("span",{ref_key:"arrowRef",ref:a,class:Tt($(n).e("arrow")),style:ga($(o)),"data-popper-arrow":""},null,6))}});var gHe=yn(pHe,[["__file","arrow.vue"]]);const mHe="ElOnlyChild",yHe=Rt({name:mHe,setup(r,{slots:e,attrs:t}){var n;const i=tn(KZ),a=ZWe((n=i==null?void 0:i.setForwardRef)!=null?n:oi);return()=>{var o;const s=(o=e.default)==null?void 0:o.call(e,t);if(!s||s.length>1)return null;const l=aQ(s);return l?Kf(ku(l,t),[[a]]):null}}});function aQ(r){if(!r)return null;const e=r;for(const t of e){if(on(t))switch(t.type){case Ca:continue;case nd:case"svg":return U$(t);case Qn:return aQ(t.children);default:return t}return U$(t)}return null}function U$(r){const e=Pn("only-child");return _r("span",{class:e.e("content")},[r])}const oQ=sn({virtualRef:{type:pr(Object)},virtualTriggering:Boolean,onMouseenter:{type:pr(Function)},onMouseleave:{type:pr(Function)},onClick:{type:pr(Function)},onKeydown:{type:pr(Function)},onFocus:{type:pr(Function)},onBlur:{type:pr(Function)},onContextmenu:{type:pr(Function)},id:String,open:Boolean}),bHe=Rt({name:"ElPopperTrigger",inheritAttrs:!1}),xHe=Rt({...bHe,props:oQ,setup(r,{expose:e}){const t=r,{role:n,triggerRef:i}=tn(qP,void 0);qWe(i);const a=Me(()=>s.value?t.id:void 0),o=Me(()=>{if(n&&n.value==="tooltip")return t.open&&t.id?t.id:void 0}),s=Me(()=>{if(n&&n.value!=="tooltip")return n.value}),l=Me(()=>s.value?`${t.open}`:void 0);let u;const f=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Fn(()=>{qt(()=>t.virtualRef,c=>{c&&(i.value=Rf(c))},{immediate:!0}),qt(i,(c,h)=>{u==null||u(),u=void 0,Ph(c)&&(f.forEach(d=>{var v;const p=t[d];p&&(c.addEventListener(d.slice(2).toLowerCase(),p),(v=h==null?void 0:h.removeEventListener)==null||v.call(h,d.slice(2).toLowerCase(),p))}),u=qt([a,o,s,l],d=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((v,p)=>{uy(d[p])?c.removeAttribute(v):c.setAttribute(v,d[p])})},{immediate:!0})),Ph(h)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(d=>h.removeAttribute(d))},{immediate:!0})}),La(()=>{if(u==null||u(),u=void 0,i.value&&Ph(i.value)){const c=i.value;f.forEach(h=>{const d=t[h];d&&c.removeEventListener(h.slice(2).toLowerCase(),d)}),i.value=void 0}}),e({triggerRef:i}),(c,h)=>c.virtualTriggering?ar("v-if",!0):(ct(),mr($(yHe),Xo({key:0},c.$attrs,{"aria-controls":$(a),"aria-describedby":$(o),"aria-expanded":$(l),"aria-haspopup":$(s)}),{default:gr(()=>[dr(c.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var wHe=yn(xHe,[["__file","trigger.vue"]]);const xC="focus-trap.focus-after-trapped",wC="focus-trap.focus-after-released",EHe="focus-trap.focusout-prevented",W$={cancelable:!0,bubbles:!1},_He={cancelable:!0,bubbles:!1},V$="focusAfterTrapped",H$="focusAfterReleased",sQ=Symbol("elFocusTrap"),ZP=xt(),o2=xt(0),QP=xt(0);let pb=0;const lQ=r=>{const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},X$=(r,e)=>{for(const t of r)if(!SHe(t,e))return t},SHe=(r,e)=>{if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1},MHe=r=>{const e=lQ(r),t=X$(e,r),n=X$(e.reverse(),r);return[t,n]},CHe=r=>r instanceof HTMLInputElement&&"select"in r,yf=(r,e)=>{if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),QP.value=window.performance.now(),r!==t&&CHe(r)&&e&&r.select()}};function Y$(r,e){const t=[...r],n=r.indexOf(e);return n!==-1&&t.splice(n,1),t}const AHe=()=>{let r=[];return{push:n=>{const i=r[0];i&&n!==i&&i.pause(),r=Y$(r,n),r.unshift(n)},remove:n=>{var i,a;r=Y$(r,n),(a=(i=r[0])==null?void 0:i.resume)==null||a.call(i)}}},THe=(r,e=!1)=>{const t=document.activeElement;for(const n of r)if(yf(n,e),document.activeElement!==t)return},K$=AHe(),OHe=()=>o2.value>QP.value,gb=()=>{ZP.value="pointer",o2.value=window.performance.now()},q$=()=>{ZP.value="keyboard",o2.value=window.performance.now()},kHe=()=>(Fn(()=>{pb===0&&(document.addEventListener("mousedown",gb),document.addEventListener("touchstart",gb),document.addEventListener("keydown",q$)),pb++}),La(()=>{pb--,pb<=0&&(document.removeEventListener("mousedown",gb),document.removeEventListener("touchstart",gb),document.removeEventListener("keydown",q$))}),{focusReason:ZP,lastUserFocusTimestamp:o2,lastAutomatedFocusTimestamp:QP}),mb=r=>new CustomEvent(EHe,{..._He,detail:r}),IHe=Rt({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[V$,H$,"focusin","focusout","focusout-prevented","release-requested"],setup(r,{emit:e}){const t=xt();let n,i;const{focusReason:a}=kHe();VWe(v=>{r.trapped&&!o.paused&&e("release-requested",v)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},s=v=>{if(!r.loop&&!r.trapped||o.paused)return;const{key:p,altKey:g,ctrlKey:m,metaKey:b,currentTarget:y,shiftKey:x}=v,{loop:w}=r,E=p===Dh.tab&&!g&&!m&&!b,_=document.activeElement;if(E&&_){const S=y,[C,M]=MHe(S);if(C&&M){if(!x&&_===M){const A=mb({focusReason:a.value});e("focusout-prevented",A),A.defaultPrevented||(v.preventDefault(),w&&yf(C,!0))}else if(x&&[C,S].includes(_)){const A=mb({focusReason:a.value});e("focusout-prevented",A),A.defaultPrevented||(v.preventDefault(),w&&yf(M,!0))}}else if(_===S){const A=mb({focusReason:a.value});e("focusout-prevented",A),A.defaultPrevented||v.preventDefault()}}};Ia(sQ,{focusTrapRef:t,onKeydown:s}),qt(()=>r.focusTrapEl,v=>{v&&(t.value=v)},{immediate:!0}),qt([t],([v],[p])=>{v&&(v.addEventListener("keydown",s),v.addEventListener("focusin",f),v.addEventListener("focusout",c)),p&&(p.removeEventListener("keydown",s),p.removeEventListener("focusin",f),p.removeEventListener("focusout",c))});const l=v=>{e(V$,v)},u=v=>e(H$,v),f=v=>{const p=$(t);if(!p)return;const g=v.target,m=v.relatedTarget,b=g&&p.contains(g);r.trapped||m&&p.contains(m)||(n=m),b&&e("focusin",v),!o.paused&&r.trapped&&(b?i=g:yf(i,!0))},c=v=>{const p=$(t);if(!(o.paused||!p))if(r.trapped){const g=v.relatedTarget;!uy(g)&&!p.contains(g)&&setTimeout(()=>{if(!o.paused&&r.trapped){const m=mb({focusReason:a.value});e("focusout-prevented",m),m.defaultPrevented||yf(i,!0)}},0)}else{const g=v.target;g&&p.contains(g)||e("focusout",v)}};async function h(){await di();const v=$(t);if(v){K$.push(o);const p=v.contains(document.activeElement)?n:document.activeElement;if(n=p,!v.contains(p)){const m=new Event(xC,W$);v.addEventListener(xC,l),v.dispatchEvent(m),m.defaultPrevented||di(()=>{let b=r.focusStartEl;qr(b)||(yf(b),document.activeElement!==b&&(b="first")),b==="first"&&THe(lQ(v),!0),(document.activeElement===p||b==="container")&&yf(v)})}}}function d(){const v=$(t);if(v){v.removeEventListener(xC,l);const p=new CustomEvent(wC,{...W$,detail:{focusReason:a.value}});v.addEventListener(wC,u),v.dispatchEvent(p),!p.defaultPrevented&&(a.value=="keyboard"||!OHe()||v.contains(document.activeElement))&&yf(n??document.body),v.removeEventListener(wC,u),K$.remove(o)}}return Fn(()=>{r.trapped&&h(),qt(()=>r.trapped,v=>{v?h():d()})}),La(()=>{r.trapped&&d(),t.value&&(t.value.removeEventListener("keydown",s),t.value.removeEventListener("focusin",f),t.value.removeEventListener("focusout",c),t.value=void 0)}),{onKeydown:s}}});function LHe(r,e,t,n,i,a){return dr(r.$slots,"default",{handleKeydown:r.onKeydown})}var JP=yn(IHe,[["render",LHe],["__file","focus-trap.vue"]]);const PHe=["fixed","absolute"],DHe=sn({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:pr(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:zP,default:"bottom"},popperOptions:{type:pr(Object),default:()=>({})},strategy:{type:String,values:PHe,default:"absolute"}}),uQ=sn({...DHe,id:String,style:{type:pr([String,Array,Object])},className:{type:pr([String,Array,Object])},effect:{type:pr(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:pr([String,Array,Object])},popperStyle:{type:pr([String,Array,Object])},referenceEl:{type:pr(Object)},triggerTargetEl:{type:pr(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...dy(["ariaLabel"])}),NHe={mouseenter:r=>r instanceof MouseEvent,mouseleave:r=>r instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},RHe=(r,e=[])=>{const{placement:t,strategy:n,popperOptions:i}=r,a={placement:t,strategy:n,...i,modifiers:[...FHe(r),...e]};return $He(a,i==null?void 0:i.modifiers),a},BHe=r=>{if(Ki)return Rf(r)};function FHe(r){const{offset:e,gpuAcceleration:t,fallbackPlacements:n}=r;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function $He(r,e){e&&(r.modifiers=[...r.modifiers,...e??[]])}const zHe=0,GHe=r=>{const{popperInstanceRef:e,contentRef:t,triggerRef:n,role:i}=tn(qP,void 0),a=xt(),o=xt(),s=Me(()=>({name:"eventListeners",enabled:!!r.visible})),l=Me(()=>{var m;const b=$(a),y=(m=$(o))!=null?m:zHe;return{name:"arrow",enabled:!MZ(b),options:{element:b,padding:y}}}),u=Me(()=>({onFirstUpdate:()=>{v()},...RHe(r,[$(l),$(s)])})),f=Me(()=>BHe(r.referenceEl)||$(n)),{attributes:c,state:h,styles:d,update:v,forceUpdate:p,instanceRef:g}=jWe(f,t,u);return qt(g,m=>e.value=m),Fn(()=>{qt(()=>{var m;return(m=$(f))==null?void 0:m.getBoundingClientRect()},()=>{v()})}),{attributes:c,arrowRef:a,contentRef:t,instanceRef:g,state:h,styles:d,role:i,forceUpdate:p,update:v}},jHe=(r,{attributes:e,styles:t,role:n})=>{const{nextZIndex:i}=YP(),a=Pn("popper"),o=Me(()=>$(e).popper),s=xt(qo(r.zIndex)?r.zIndex:i()),l=Me(()=>[a.b(),a.is("pure",r.pure),a.is(r.effect),r.popperClass]),u=Me(()=>[{zIndex:$(s)},$(t).popper,r.popperStyle||{}]),f=Me(()=>n.value==="dialog"?"false":void 0),c=Me(()=>$(t).arrow||{});return{ariaModal:f,arrowStyle:c,contentAttrs:o,contentClass:l,contentStyle:u,contentZIndex:s,updateZIndex:()=>{s.value=qo(r.zIndex)?r.zIndex:i()}}},UHe=(r,e)=>{const t=xt(!1),n=xt();return{focusStartRef:n,trapped:t,onFocusAfterReleased:u=>{var f;((f=u.detail)==null?void 0:f.focusReason)!=="pointer"&&(n.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:u=>{r.visible&&!t.value&&(u.target&&(n.value=u.target),t.value=!0)},onFocusoutPrevented:u=>{r.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},WHe=Rt({name:"ElPopperContent"}),VHe=Rt({...WHe,props:uQ,emits:NHe,setup(r,{expose:e,emit:t}){const n=r,{focusStartRef:i,trapped:a,onFocusAfterReleased:o,onFocusAfterTrapped:s,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:f}=UHe(n,t),{attributes:c,arrowRef:h,contentRef:d,styles:v,instanceRef:p,role:g,update:m}=GHe(n),{ariaModal:b,arrowStyle:y,contentAttrs:x,contentClass:w,contentStyle:E,updateZIndex:_}=jHe(n,{styles:v,attributes:c,role:g}),S=tn(Zh,void 0),C=xt();Ia(rQ,{arrowStyle:y,arrowRef:h,arrowOffset:C}),S&&Ia(Zh,{...S,addInputId:oi,removeInputId:oi});let M;const T=(O=!0)=>{m(),O&&_()},A=()=>{T(!1),n.visible&&n.focusOnShow?a.value=!0:n.visible===!1&&(a.value=!1)};return Fn(()=>{qt(()=>n.triggerTargetEl,(O,L)=>{M==null||M(),M=void 0;const N=$(O||d.value),P=$(L||d.value);Ph(N)&&(M=qt([g,()=>n.ariaLabel,b,()=>n.id],R=>{["role","aria-label","aria-modal","id"].forEach((G,D)=>{uy(R[D])?N.removeAttribute(G):N.setAttribute(G,R[D])})},{immediate:!0})),P!==N&&Ph(P)&&["role","aria-label","aria-modal","id"].forEach(R=>{P.removeAttribute(R)})},{immediate:!0}),qt(()=>n.visible,A,{immediate:!0})}),La(()=>{M==null||M(),M=void 0}),e({popperContentRef:d,popperInstanceRef:p,updatePopper:T,contentStyle:E}),(O,L)=>(ct(),or("div",Xo({ref_key:"contentRef",ref:d},$(x),{style:$(E),class:$(w),tabindex:"-1",onMouseenter:N=>O.$emit("mouseenter",N),onMouseleave:N=>O.$emit("mouseleave",N)}),[_r($(JP),{trapped:$(a),"trap-on-focus-in":!0,"focus-trap-el":$(d),"focus-start-el":$(i),onFocusAfterTrapped:$(s),onFocusAfterReleased:$(o),onFocusin:$(l),onFocusoutPrevented:$(u),onReleaseRequested:$(f)},{default:gr(()=>[dr(O.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var HHe=yn(VHe,[["__file","content.vue"]]);const XHe=Oo(dHe),eD=Symbol("elTooltip"),Go=sn({...YWe,...uQ,appendTo:{type:pr([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:pr(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...dy(["ariaLabel"])}),cm=sn({...oQ,disabled:Boolean,trigger:{type:pr([String,Array]),default:"hover"},triggerKeys:{type:pr(Array),default:()=>[Dh.enter,Dh.space]}}),{useModelToggleProps:YHe,useModelToggleEmits:KHe,useModelToggle:qHe}=PZ("visible"),ZHe=sn({...nQ,...YHe,...Go,...cm,...iQ,showArrow:{type:Boolean,default:!0}}),QHe=[...KHe,"before-show","before-hide","show","hide","open","close"],JHe=(r,e)=>Jt(r)?r.includes(e):r===e,Xd=(r,e,t)=>n=>{JHe($(r),e)&&t(n)},eXe=Rt({name:"ElTooltipTrigger"}),tXe=Rt({...eXe,props:cm,setup(r,{expose:e}){const t=r,n=Pn("tooltip"),{controlled:i,id:a,open:o,onOpen:s,onClose:l,onToggle:u}=tn(eD,void 0),f=xt(null),c=()=>{if($(i)||t.disabled)return!0},h=vl(t,"trigger"),d=yu(c,Xd(h,"hover",s)),v=yu(c,Xd(h,"hover",l)),p=yu(c,Xd(h,"click",x=>{x.button===0&&u(x)})),g=yu(c,Xd(h,"focus",s)),m=yu(c,Xd(h,"focus",l)),b=yu(c,Xd(h,"contextmenu",x=>{x.preventDefault(),u(x)})),y=yu(c,x=>{const{code:w}=x;t.triggerKeys.includes(w)&&(x.preventDefault(),u(x))});return e({triggerRef:f}),(x,w)=>(ct(),mr($(wHe),{id:$(a),"virtual-ref":x.virtualRef,open:$(o),"virtual-triggering":x.virtualTriggering,class:Tt($(n).e("trigger")),onBlur:$(m),onClick:$(p),onContextmenu:$(b),onFocus:$(g),onMouseenter:$(d),onMouseleave:$(v),onKeydown:$(y)},{default:gr(()=>[dr(x.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var rXe=yn(tXe,[["__file","trigger.vue"]]);const nXe=sn({to:{type:pr([String,Object]),required:!0},disabled:Boolean}),iXe=Rt({__name:"teleport",props:nXe,setup(r){return(e,t)=>e.disabled?dr(e.$slots,"default",{key:0}):(ct(),mr(Sae,{key:1,to:e.to},[dr(e.$slots,"default")],8,["to"]))}});var aXe=yn(iXe,[["__file","teleport.vue"]]);const tD=Oo(aXe),oXe=Rt({name:"ElTooltipContent",inheritAttrs:!1}),sXe=Rt({...oXe,props:Go,setup(r,{expose:e}){const t=r,{selector:n}=YZ(),i=Pn("tooltip"),a=xt(null);let o;const{controlled:s,id:l,open:u,trigger:f,onClose:c,onOpen:h,onShow:d,onHide:v,onBeforeShow:p,onBeforeHide:g}=tn(eD,void 0),m=Me(()=>t.transition||`${i.namespace.value}-fade-in-linear`),b=Me(()=>t.persistent);La(()=>{o==null||o()});const y=Me(()=>$(b)?!0:$(u)),x=Me(()=>t.disabled?!1:$(u)),w=Me(()=>t.appendTo||n.value),E=Me(()=>{var P;return(P=t.style)!=null?P:{}}),_=Me(()=>!$(u)),S=()=>{v()},C=()=>{if($(s))return!0},M=yu(C,()=>{t.enterable&&$(f)==="hover"&&h()}),T=yu(C,()=>{$(f)==="hover"&&c()}),A=()=>{var P,R;(R=(P=a.value)==null?void 0:P.updatePopper)==null||R.call(P),p==null||p()},O=()=>{g==null||g()},L=()=>{d(),o=Ize(Me(()=>{var P;return(P=a.value)==null?void 0:P.popperContentRef}),()=>{if($(s))return;$(f)!=="hover"&&c()})},N=()=>{t.virtualTriggering||c()};return qt(()=>$(u),P=>{P||o==null||o()},{flush:"post"}),qt(()=>t.content,()=>{var P,R;(R=(P=a.value)==null?void 0:P.updatePopper)==null||R.call(P)}),e({contentRef:a}),(P,R)=>(ct(),mr($(tD),{disabled:!P.teleported,to:$(w)},{default:gr(()=>[_r(id,{name:$(m),onAfterLeave:S,onBeforeEnter:A,onAfterEnter:L,onBeforeLeave:O},{default:gr(()=>[$(y)?Kf((ct(),mr($(HHe),Xo({key:0,id:$(l),ref_key:"contentRef",ref:a},P.$attrs,{"aria-label":P.ariaLabel,"aria-hidden":$(_),"boundaries-padding":P.boundariesPadding,"fallback-placements":P.fallbackPlacements,"gpu-acceleration":P.gpuAcceleration,offset:P.offset,placement:P.placement,"popper-options":P.popperOptions,strategy:P.strategy,effect:P.effect,enterable:P.enterable,pure:P.pure,"popper-class":P.popperClass,"popper-style":[P.popperStyle,$(E)],"reference-el":P.referenceEl,"trigger-target-el":P.triggerTargetEl,visible:$(x),"z-index":P.zIndex,onMouseenter:$(M),onMouseleave:$(T),onBlur:N,onClose:$(c)}),{default:gr(()=>[dr(P.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[k0,$(x)]]):ar("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var lXe=yn(sXe,[["__file","content.vue"]]);const uXe=Rt({name:"ElTooltip"}),fXe=Rt({...uXe,props:ZHe,emits:QHe,setup(r,{expose:e,emit:t}){const n=r;XWe();const i=hp(),a=xt(),o=xt(),s=()=>{var m;const b=$(a);b&&((m=b.popperInstanceRef)==null||m.update())},l=xt(!1),u=xt(),{show:f,hide:c,hasUpdateHandler:h}=qHe({indicator:l,toggleReason:u}),{onOpen:d,onClose:v}=KWe({showAfter:vl(n,"showAfter"),hideAfter:vl(n,"hideAfter"),autoClose:vl(n,"autoClose"),open:f,close:c}),p=Me(()=>Ko(n.visible)&&!h.value);Ia(eD,{controlled:p,id:i,open:wp(l),trigger:vl(n,"trigger"),onOpen:m=>{d(m)},onClose:m=>{v(m)},onToggle:m=>{$(l)?v(m):d(m)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:s}),qt(()=>n.disabled,m=>{m&&l.value&&(l.value=!1)});const g=m=>{var b,y;const x=(y=(b=o.value)==null?void 0:b.contentRef)==null?void 0:y.popperContentRef,w=(m==null?void 0:m.relatedTarget)||document.activeElement;return x&&x.contains(w)};return kj(()=>l.value&&c()),e({popperRef:a,contentRef:o,isFocusInsideContent:g,updatePopper:s,onOpen:d,onClose:v,hide:c}),(m,b)=>(ct(),mr($(XHe),{ref_key:"popperRef",ref:a,role:m.role},{default:gr(()=>[_r(rXe,{disabled:m.disabled,trigger:m.trigger,"trigger-keys":m.triggerKeys,"virtual-ref":m.virtualRef,"virtual-triggering":m.virtualTriggering},{default:gr(()=>[m.$slots.default?dr(m.$slots,"default",{key:0}):ar("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),_r(lXe,{ref_key:"contentRef",ref:o,"aria-label":m.ariaLabel,"boundaries-padding":m.boundariesPadding,content:m.content,disabled:m.disabled,effect:m.effect,enterable:m.enterable,"fallback-placements":m.fallbackPlacements,"hide-after":m.hideAfter,"gpu-acceleration":m.gpuAcceleration,offset:m.offset,persistent:m.persistent,"popper-class":m.popperClass,"popper-style":m.popperStyle,placement:m.placement,"popper-options":m.popperOptions,pure:m.pure,"raw-content":m.rawContent,"reference-el":m.referenceEl,"trigger-target-el":m.triggerTargetEl,"show-after":m.showAfter,strategy:m.strategy,teleported:m.teleported,transition:m.transition,"virtual-triggering":m.virtualTriggering,"z-index":m.zIndex,"append-to":m.appendTo},{default:gr(()=>[dr(m.$slots,"content",{},()=>[m.rawContent?(ct(),or("span",{key:0,innerHTML:m.content},null,8,["innerHTML"])):(ct(),or("span",{key:1},Oi(m.content),1))]),m.showArrow?(ct(),mr($(gHe),{key:0,"arrow-offset":m.arrowOffset},null,8,["arrow-offset"])):ar("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var cXe=yn(fXe,[["__file","tooltip.vue"]]);const hXe=Oo(cXe),fQ=Symbol("buttonGroupContextKey"),dXe=(r,e)=>{t2({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},Me(()=>r.type==="text"));const t=tn(fQ,void 0),n=i2("button"),{form:i}=a2(),a=dd(Me(()=>t==null?void 0:t.size)),o=vy(),s=xt(),l=Am(),u=Me(()=>r.type||(t==null?void 0:t.type)||""),f=Me(()=>{var v,p,g;return(g=(p=r.autoInsertSpace)!=null?p:(v=n.value)==null?void 0:v.autoInsertSpace)!=null?g:!1}),c=Me(()=>r.tag==="button"?{ariaDisabled:o.value||r.loading,disabled:o.value||r.loading,autofocus:r.autofocus,type:r.nativeType}:{}),h=Me(()=>{var v;const p=(v=l.default)==null?void 0:v.call(l);if(f.value&&(p==null?void 0:p.length)===1){const g=p[0];if((g==null?void 0:g.type)===nd){const m=g.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(m.trim())}}return!1});return{_disabled:o,_size:a,_type:u,_ref:s,_props:c,shouldAddSpace:h,handleClick:v=>{r.nativeType==="reset"&&(i==null||i.resetFields()),e("click",v)}}},vXe=["default","primary","success","warning","info","danger","text",""],pXe=["button","submit","reset"],xO=sn({size:n2,disabled:Boolean,type:{type:String,values:vXe,default:""},icon:{type:Ms},nativeType:{type:String,values:pXe,default:"button"},loading:Boolean,loadingIcon:{type:Ms,default:()=>RP},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:pr([String,Object]),default:"button"}}),gXe={click:r=>r instanceof MouseEvent};function ia(r,e){mXe(r)&&(r="100%");var t=yXe(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function yb(r){return Math.min(1,Math.max(0,r))}function mXe(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function yXe(r){return typeof r=="string"&&r.indexOf("%")!==-1}function cQ(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function bb(r){return r<=1?"".concat(Number(r)*100,"%"):r}function yh(r){return r.length===1?"0"+r:String(r)}function bXe(r,e,t){return{r:ia(r,255)*255,g:ia(e,255)*255,b:ia(t,255)*255}}function Z$(r,e,t){r=ia(r,255),e=ia(e,255),t=ia(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case r:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-r)/l+2;break;case t:a=(r-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function EC(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*(6*t):t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function xXe(r,e,t){var n,i,a;if(r=ia(r,360),e=ia(e,100),t=ia(t,100),e===0)i=t,a=t,n=t;else{var o=t<.5?t*(1+e):t+e-t*e,s=2*t-o;n=EC(s,o,r+1/3),i=EC(s,o,r),a=EC(s,o,r-1/3)}return{r:n*255,g:i*255,b:a*255}}function Q$(r,e,t){r=ia(r,255),e=ia(e,255),t=ia(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),a=0,o=n,s=n-i,l=n===0?0:s/n;if(n===i)a=0;else{switch(n){case r:a=(e-t)/s+(e<t?6:0);break;case e:a=(t-r)/s+2;break;case t:a=(r-e)/s+4;break}a/=6}return{h:a,s:l,v:o}}function wXe(r,e,t){r=ia(r,360)*6,e=ia(e,100),t=ia(t,100);var n=Math.floor(r),i=r-n,a=t*(1-e),o=t*(1-i*e),s=t*(1-(1-i)*e),l=n%6,u=[t,o,a,a,s,t][l],f=[s,t,t,o,a,a][l],c=[a,a,s,t,t,o][l];return{r:u*255,g:f*255,b:c*255}}function J$(r,e,t,n){var i=[yh(Math.round(r).toString(16)),yh(Math.round(e).toString(16)),yh(Math.round(t).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function EXe(r,e,t,n,i){var a=[yh(Math.round(r).toString(16)),yh(Math.round(e).toString(16)),yh(Math.round(t).toString(16)),yh(_Xe(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function _Xe(r){return Math.round(parseFloat(r)*255).toString(16)}function ez(r){return uo(r)/255}function uo(r){return parseInt(r,16)}function SXe(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var wO={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function MXe(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,a=null,o=!1,s=!1;return typeof r=="string"&&(r=TXe(r)),typeof r=="object"&&(du(r.r)&&du(r.g)&&du(r.b)?(e=bXe(r.r,r.g,r.b),o=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):du(r.h)&&du(r.s)&&du(r.v)?(n=bb(r.s),i=bb(r.v),e=wXe(r.h,n,i),o=!0,s="hsv"):du(r.h)&&du(r.s)&&du(r.l)&&(n=bb(r.s),a=bb(r.l),e=xXe(r.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=cQ(t),{ok:o,format:r.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var CXe="[-\\+]?\\d+%?",AXe="[-\\+]?\\d*\\.\\d+%?",Bf="(?:".concat(AXe,")|(?:").concat(CXe,")"),_C="[\\s|\\(]+(".concat(Bf,")[,|\\s]+(").concat(Bf,")[,|\\s]+(").concat(Bf,")\\s*\\)?"),SC="[\\s|\\(]+(".concat(Bf,")[,|\\s]+(").concat(Bf,")[,|\\s]+(").concat(Bf,")[,|\\s]+(").concat(Bf,")\\s*\\)?"),gs={CSS_UNIT:new RegExp(Bf),rgb:new RegExp("rgb"+_C),rgba:new RegExp("rgba"+SC),hsl:new RegExp("hsl"+_C),hsla:new RegExp("hsla"+SC),hsv:new RegExp("hsv"+_C),hsva:new RegExp("hsva"+SC),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function TXe(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var e=!1;if(wO[r])r=wO[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=gs.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=gs.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=gs.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=gs.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=gs.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=gs.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=gs.hex8.exec(r),t?{r:uo(t[1]),g:uo(t[2]),b:uo(t[3]),a:ez(t[4]),format:e?"name":"hex8"}:(t=gs.hex6.exec(r),t?{r:uo(t[1]),g:uo(t[2]),b:uo(t[3]),format:e?"name":"hex"}:(t=gs.hex4.exec(r),t?{r:uo(t[1]+t[1]),g:uo(t[2]+t[2]),b:uo(t[3]+t[3]),a:ez(t[4]+t[4]),format:e?"name":"hex8"}:(t=gs.hex3.exec(r),t?{r:uo(t[1]+t[1]),g:uo(t[2]+t[2]),b:uo(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function du(r){return!!gs.CSS_UNIT.exec(String(r))}var OXe=function(){function r(e,t){e===void 0&&(e=""),t===void 0&&(t={});var n;if(e instanceof r)return e;typeof e=="number"&&(e=SXe(e)),this.originalInput=e;var i=MXe(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=t.format)!==null&&n!==void 0?n:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},r.prototype.getLuminance=function(){var e=this.toRgb(),t,n,i,a=e.r/255,o=e.g/255,s=e.b/255;return a<=.03928?t=a/12.92:t=Math.pow((a+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*t+.7152*n+.0722*i},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(e){return this.a=cQ(e),this.roundA=Math.round(100*this.a)/100,this},r.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},r.prototype.toHsv=function(){var e=Q$(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},r.prototype.toHsvString=function(){var e=Q$(this.r,this.g,this.b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},r.prototype.toHsl=function(){var e=Z$(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},r.prototype.toHslString=function(){var e=Z$(this.r,this.g,this.b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},r.prototype.toHex=function(e){return e===void 0&&(e=!1),J$(this.r,this.g,this.b,e)},r.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},r.prototype.toHex8=function(e){return e===void 0&&(e=!1),EXe(this.r,this.g,this.b,this.a,e)},r.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},r.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},r.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(ia(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(ia(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+J$(this.r,this.g,this.b,!1),t=0,n=Object.entries(wO);t<n.length;t++){var i=n[t],a=i[0],o=i[1];if(e===o)return a}return!1},r.prototype.toString=function(e){var t=!!e;e=e??this.format;var n=!1,i=this.a<1&&this.a>=0,a=!t&&i&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=yb(t.l),new r(t)},r.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new r(t)},r.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=yb(t.l),new r(t)},r.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},r.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},r.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=yb(t.s),new r(t)},r.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=yb(t.s),new r(t)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(e){var t=this.toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,new r(t)},r.prototype.mix=function(e,t){t===void 0&&(t=50);var n=this.toRgb(),i=new r(e).toRgb(),a=t/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return new r(o)},r.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var n=this.toHsl(),i=360/t,a=[this];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(new r(n));return a},r.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new r(e)},r.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),n=t.h,i=t.s,a=t.v,o=[],s=1/e;e--;)o.push(new r({h:n,s:i,v:a})),a=(a+s)%1;return o},r.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new r({h:(t+72)%360,s:e.s,l:e.l}),new r({h:(t+216)%360,s:e.s,l:e.l})]},r.prototype.onBackground=function(e){var t=this.toRgb(),n=new r(e).toRgb(),i=t.a+n.a*(1-t.a);return new r({r:(t.r*t.a+n.r*n.a*(1-t.a))/i,g:(t.g*t.a+n.g*n.a*(1-t.a))/i,b:(t.b*t.a+n.b*n.a*(1-t.a))/i,a:i})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(e){for(var t=this.toHsl(),n=t.h,i=[this],a=360/e,o=1;o<e;o++)i.push(new r({h:(n+o*a)%360,s:t.s,l:t.l}));return i},r.prototype.equals=function(e){return this.toRgbString()===new r(e).toRgbString()},r}();function hf(r,e=20){return r.mix("#141414",e).toString()}function kXe(r){const e=vy(),t=Pn("button");return Me(()=>{let n={},i=r.color;if(i){const a=i.match(/var\((.*?)\)/);a&&(i=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const o=new OXe(i),s=r.dark?o.tint(20).toString():hf(o,20);if(r.plain)n=t.cssVarBlock({"bg-color":r.dark?hf(o,90):o.tint(90).toString(),"text-color":i,"border-color":r.dark?hf(o,50):o.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":s,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":s}),e.value&&(n[t.cssVarBlockName("disabled-bg-color")]=r.dark?hf(o,90):o.tint(90).toString(),n[t.cssVarBlockName("disabled-text-color")]=r.dark?hf(o,50):o.tint(50).toString(),n[t.cssVarBlockName("disabled-border-color")]=r.dark?hf(o,80):o.tint(80).toString());else{const l=r.dark?hf(o,30):o.tint(30).toString(),u=o.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(n=t.cssVarBlock({"bg-color":i,"text-color":u,"border-color":i,"hover-bg-color":l,"hover-text-color":u,"hover-border-color":l,"active-bg-color":s,"active-border-color":s}),e.value){const f=r.dark?hf(o,50):o.tint(50).toString();n[t.cssVarBlockName("disabled-bg-color")]=f,n[t.cssVarBlockName("disabled-text-color")]=r.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,n[t.cssVarBlockName("disabled-border-color")]=f}}}return n})}const IXe=Rt({name:"ElButton"}),LXe=Rt({...IXe,props:xO,emits:gXe,setup(r,{expose:e,emit:t}){const n=r,i=kXe(n),a=Pn("button"),{_ref:o,_size:s,_type:l,_disabled:u,_props:f,shouldAddSpace:c,handleClick:h}=dXe(n,t),d=Me(()=>[a.b(),a.m(l.value),a.m(s.value),a.is("disabled",u.value),a.is("loading",n.loading),a.is("plain",n.plain),a.is("round",n.round),a.is("circle",n.circle),a.is("text",n.text),a.is("link",n.link),a.is("has-bg",n.bg)]);return e({ref:o,size:s,type:l,disabled:u,shouldAddSpace:c}),(v,p)=>(ct(),mr(Ma(v.tag),Xo({ref_key:"_ref",ref:o},$(f),{class:$(d),style:$(i),onClick:$(h)}),{default:gr(()=>[v.loading?(ct(),or(Qn,{key:0},[v.$slots.loading?dr(v.$slots,"loading",{key:0}):(ct(),mr($(Ci),{key:1,class:Tt($(a).is("loading"))},{default:gr(()=>[(ct(),mr(Ma(v.loadingIcon)))]),_:1},8,["class"]))],64)):v.icon||v.$slots.icon?(ct(),mr($(Ci),{key:1},{default:gr(()=>[v.icon?(ct(),mr(Ma(v.icon),{key:0})):dr(v.$slots,"icon",{key:1})]),_:3})):ar("v-if",!0),v.$slots.default?(ct(),or("span",{key:2,class:Tt({[$(a).em("text","expand")]:$(c)})},[dr(v.$slots,"default")],2)):ar("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var PXe=yn(LXe,[["__file","button.vue"]]);const DXe={size:xO.size,type:xO.type},NXe=Rt({name:"ElButtonGroup"}),RXe=Rt({...NXe,props:DXe,setup(r){const e=r;Ia(fQ,dc({size:vl(e,"size"),type:vl(e,"type")}));const t=Pn("button");return(n,i)=>(ct(),or("div",{class:Tt($(t).b("group"))},[dr(n.$slots,"default")],2))}});var hQ=yn(RXe,[["__file","button-group.vue"]]);const Nrt=Oo(PXe,{ButtonGroup:hQ});e2(hQ);const dQ=sn({modelValue:{type:[String,Number,Boolean],default:void 0},size:n2,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),BXe=sn({...dQ,border:Boolean}),vQ={[Is]:r=>qr(r)||qo(r)||Ko(r),[Kw]:r=>qr(r)||qo(r)||Ko(r)},pQ=Symbol("radioGroupKey"),gQ=(r,e)=>{const t=xt(),n=tn(pQ,void 0),i=Me(()=>!!n),a=Me(()=>g$(r.value)?r.label:r.value),o=Me({get(){return i.value?n.modelValue:r.modelValue},set(c){i.value?n.changeEvent(c):e&&e(Is,c),t.value.checked=r.modelValue===a.value}}),s=dd(Me(()=>n==null?void 0:n.size)),l=vy(Me(()=>n==null?void 0:n.disabled)),u=xt(!1),f=Me(()=>l.value||i.value&&o.value!==a.value?-1:0);return t2({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},Me(()=>i.value&&g$(r.value))),{radioRef:t,isGroup:i,radioGroup:n,focus:u,size:s,disabled:l,tabIndex:f,modelValue:o,actualValue:a}},FXe=Rt({name:"ElRadio"}),$Xe=Rt({...FXe,props:BXe,emits:vQ,setup(r,{emit:e}){const t=r,n=Pn("radio"),{radioRef:i,radioGroup:a,focus:o,size:s,disabled:l,modelValue:u,actualValue:f}=gQ(t,e);function c(){di(()=>e("change",u.value))}return(h,d)=>{var v;return ct(),or("label",{class:Tt([$(n).b(),$(n).is("disabled",$(l)),$(n).is("focus",$(o)),$(n).is("bordered",h.border),$(n).is("checked",$(u)===$(f)),$(n).m($(s))])},[xr("span",{class:Tt([$(n).e("input"),$(n).is("disabled",$(l)),$(n).is("checked",$(u)===$(f))])},[Kf(xr("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":p=>Sn(u)?u.value=p:null,class:Tt($(n).e("original")),value:$(f),name:h.name||((v=$(a))==null?void 0:v.name),disabled:$(l),checked:$(u)===$(f),type:"radio",onFocus:p=>o.value=!0,onBlur:p=>o.value=!1,onChange:c,onClick:Il(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[v9,$(u)]]),xr("span",{class:Tt($(n).e("inner"))},null,2)],2),xr("span",{class:Tt($(n).e("label")),onKeydown:Il(()=>{},["stop"])},[dr(h.$slots,"default",{},()=>[Tm(Oi(h.label),1)])],42,["onKeydown"])],2)}}});var zXe=yn($Xe,[["__file","radio.vue"]]);const GXe=sn({...dQ}),jXe=Rt({name:"ElRadioButton"}),UXe=Rt({...jXe,props:GXe,setup(r){const e=r,t=Pn("radio"),{radioRef:n,focus:i,size:a,disabled:o,modelValue:s,radioGroup:l,actualValue:u}=gQ(e),f=Me(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(c,h)=>{var d;return ct(),or("label",{class:Tt([$(t).b("button"),$(t).is("active",$(s)===$(u)),$(t).is("disabled",$(o)),$(t).is("focus",$(i)),$(t).bm("button",$(a))])},[Kf(xr("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":v=>Sn(s)?s.value=v:null,class:Tt($(t).be("button","original-radio")),value:$(u),type:"radio",name:c.name||((d=$(l))==null?void 0:d.name),disabled:$(o),onFocus:v=>i.value=!0,onBlur:v=>i.value=!1,onClick:Il(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[v9,$(s)]]),xr("span",{class:Tt($(t).be("button","inner")),style:ga($(s)===$(u)?$(f):{}),onKeydown:Il(()=>{},["stop"])},[dr(c.$slots,"default",{},()=>[Tm(Oi(c.label),1)])],46,["onKeydown"])],2)}}});var mQ=yn(UXe,[["__file","radio-button.vue"]]);const WXe=sn({id:{type:String,default:void 0},size:n2,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...dy(["ariaLabel"])}),VXe=vQ,HXe=Rt({name:"ElRadioGroup"}),XXe=Rt({...HXe,props:WXe,emits:VXe,setup(r,{emit:e}){const t=r,n=Pn("radio"),i=hp(),a=xt(),{formItem:o}=a2(),{inputId:s,isLabeledByFormItem:l}=KP(t,{formItemContext:o}),u=c=>{e(Is,c),di(()=>e("change",c))};Fn(()=>{const c=a.value.querySelectorAll("[type=radio]"),h=c[0];!Array.from(c).some(d=>d.checked)&&h&&(h.tabIndex=0)});const f=Me(()=>t.name||i.value);return Ia(pQ,dc({...LE(t),changeEvent:u,name:f})),qt(()=>t.modelValue,()=>{t.validateEvent&&(o==null||o.validate("change").catch(c=>void 0))}),(c,h)=>(ct(),or("div",{id:$(s),ref_key:"radioGroupRef",ref:a,class:Tt($(n).b("group")),role:"radiogroup","aria-label":$(l)?void 0:c.ariaLabel||"radio-group","aria-labelledby":$(l)?$(o).labelId:void 0},[dr(c.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var yQ=yn(XXe,[["__file","radio-group.vue"]]);Oo(zXe,{RadioButton:mQ,RadioGroup:yQ});const Rrt=e2(yQ),Brt=e2(mQ),YXe=sn({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:fy},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),KXe={close:r=>r instanceof MouseEvent,click:r=>r instanceof MouseEvent},qXe=Rt({name:"ElTag"}),ZXe=Rt({...qXe,props:YXe,emits:KXe,setup(r,{emit:e}){const t=r,n=dd(),i=Pn("tag"),a=Me(()=>{const{type:l,hit:u,effect:f,closable:c,round:h}=t;return[i.b(),i.is("closable",c),i.m(l||"primary"),i.m(n.value),i.m(f),i.is("hit",u),i.is("round",h)]}),o=l=>{e("close",l)},s=l=>{e("click",l)};return(l,u)=>l.disableTransitions?(ct(),or("span",{key:0,class:Tt($(a)),style:ga({backgroundColor:l.color}),onClick:s},[xr("span",{class:Tt($(i).e("content"))},[dr(l.$slots,"default")],2),l.closable?(ct(),mr($(Ci),{key:0,class:Tt($(i).e("close")),onClick:Il(o,["stop"])},{default:gr(()=>[_r($(Yw))]),_:1},8,["class","onClick"])):ar("v-if",!0)],6)):(ct(),mr(id,{key:1,name:`${$(i).namespace.value}-zoom-in-center`,appear:""},{default:gr(()=>[xr("span",{class:Tt($(a)),style:ga({backgroundColor:l.color}),onClick:s},[xr("span",{class:Tt($(i).e("content"))},[dr(l.$slots,"default")],2),l.closable?(ct(),mr($(Ci),{key:0,class:Tt($(i).e("close")),onClick:Il(o,["stop"])},{default:gr(()=>[_r($(Yw))]),_:1},8,["class","onClick"])):ar("v-if",!0)],6)]),_:3},8,["name"]))}});var QXe=yn(ZXe,[["__file","tag.vue"]]);const Frt=Oo(QXe),JXe=sn({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:pr([String,Array,Object])},zIndex:{type:pr([String,Number])}}),eYe={click:r=>r instanceof MouseEvent},tYe="overlay";var rYe=Rt({name:"ElOverlay",props:JXe,emits:eYe,setup(r,{slots:e,emit:t}){const n=Pn(tYe),i=l=>{t("click",l)},{onClick:a,onMousedown:o,onMouseup:s}=HZ(r.customMaskEvent?void 0:i);return()=>r.mask?_r("div",{class:[n.b(),r.overlayClass],style:{zIndex:r.zIndex},onClick:a,onMousedown:o,onMouseup:s},[dr(e,"default")],Ex.STYLE|Ex.CLASS|Ex.PROPS,["onClick","onMouseup","onMousedown"]):Ep("div",{class:r.overlayClass,style:{zIndex:r.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[dr(e,"default")])}});const bQ=rYe,xQ=Symbol("dialogInjectionKey"),wQ=sn({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ms},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),nYe={close:()=>!0},iYe=Rt({name:"ElDialogContent"}),aYe=Rt({...iYe,props:wQ,emits:nYe,setup(r,{expose:e}){const t=r,{t:n}=BP(),{Close:i}=kZ,{dialogRef:a,headerRef:o,bodyId:s,ns:l,style:u}=tn(xQ),{focusTrapRef:f}=tn(sQ),c=Me(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),h=S7e(f,a),d=Me(()=>t.draggable),v=Me(()=>t.overflow),{resetPostion:p}=I7e(a,o,d,v);return e({resetPostion:p}),(g,m)=>(ct(),or("div",{ref:$(h),class:Tt($(c)),style:ga($(u)),tabindex:"-1"},[xr("header",{ref_key:"headerRef",ref:o,class:Tt([$(l).e("header"),{"show-close":g.showClose}])},[dr(g.$slots,"header",{},()=>[xr("span",{role:"heading","aria-level":g.ariaLevel,class:Tt($(l).e("title"))},Oi(g.title),11,["aria-level"])]),g.showClose?(ct(),or("button",{key:0,"aria-label":$(n)("el.dialog.close"),class:Tt($(l).e("headerbtn")),type:"button",onClick:b=>g.$emit("close")},[_r($(Ci),{class:Tt($(l).e("close"))},{default:gr(()=>[(ct(),mr(Ma(g.closeIcon||$(i))))]),_:1},8,["class"])],10,["aria-label","onClick"])):ar("v-if",!0)],2),xr("div",{id:$(s),class:Tt($(l).e("body"))},[dr(g.$slots,"default")],10,["id"]),g.$slots.footer?(ct(),or("footer",{key:0,class:Tt($(l).e("footer"))},[dr(g.$slots,"footer")],2)):ar("v-if",!0)],6))}});var oYe=yn(aYe,[["__file","dialog-content.vue"]]);const EQ=sn({...wQ,appendToBody:Boolean,appendTo:{type:pr([String,Object]),default:"body"},beforeClose:{type:pr(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),_Q={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Is]:r=>Ko(r),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},SQ=(r,e)=>{var t;const i=Wn().emit,{nextZIndex:a}=YP();let o="";const s=hp(),l=hp(),u=xt(!1),f=xt(!1),c=xt(!1),h=xt((t=r.zIndex)!=null?t:a());let d,v;const p=i2("namespace",g0),g=Me(()=>{const N={},P=`--${p.value}-dialog`;return r.fullscreen||(r.top&&(N[`${P}-margin-top`]=r.top),r.width&&(N[`${P}-width`]=Pu(r.width))),N}),m=Me(()=>r.alignCenter?{display:"flex"}:{});function b(){i("opened")}function y(){i("closed"),i(Is,!1),r.destroyOnClose&&(c.value=!1)}function x(){i("close")}function w(){v==null||v(),d==null||d(),r.openDelay&&r.openDelay>0?{stop:d}=sO(()=>C(),r.openDelay):C()}function E(){d==null||d(),v==null||v(),r.closeDelay&&r.closeDelay>0?{stop:v}=sO(()=>M(),r.closeDelay):M()}function _(){function N(P){P||(f.value=!0,u.value=!1)}r.beforeClose?r.beforeClose(N):E()}function S(){r.closeOnClickModal&&_()}function C(){Ki&&(u.value=!0)}function M(){u.value=!1}function T(){i("openAutoFocus")}function A(){i("closeAutoFocus")}function O(N){var P;((P=N.detail)==null?void 0:P.focusReason)==="pointer"&&N.preventDefault()}r.lockScroll&&B7e(u);function L(){r.closeOnPressEscape&&_()}return qt(()=>r.modelValue,N=>{N?(f.value=!1,w(),c.value=!0,h.value=MZ(r.zIndex)?a():h.value++,di(()=>{i("open"),e.value&&(e.value.scrollTop=0)})):u.value&&E()}),qt(()=>r.fullscreen,N=>{e.value&&(N?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),Fn(()=>{r.modelValue&&(u.value=!0,c.value=!0,w())}),{afterEnter:b,afterLeave:y,beforeLeave:x,handleClose:_,onModalClick:S,close:E,doClose:M,onOpenAutoFocus:T,onCloseAutoFocus:A,onCloseRequested:L,onFocusoutPrevented:O,titleId:s,bodyId:l,closed:f,style:g,overlayDialogStyle:m,rendered:c,visible:u,zIndex:h}},sYe=Rt({name:"ElDialog",inheritAttrs:!1}),lYe=Rt({...sYe,props:EQ,emits:_Q,setup(r,{expose:e}){const t=r,n=Am();t2({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},Me(()=>!!n.title));const i=Pn("dialog"),a=xt(),o=xt(),s=xt(),{visible:l,titleId:u,bodyId:f,style:c,overlayDialogStyle:h,rendered:d,zIndex:v,afterEnter:p,afterLeave:g,beforeLeave:m,handleClose:b,onModalClick:y,onOpenAutoFocus:x,onCloseAutoFocus:w,onCloseRequested:E,onFocusoutPrevented:_}=SQ(t,a);Ia(xQ,{dialogRef:a,headerRef:o,bodyId:f,ns:i,rendered:d,style:c});const S=HZ(y),C=Me(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:s,resetPostion:()=>{s.value.resetPostion()}}),(T,A)=>(ct(),mr($(tD),{to:T.appendTo,disabled:T.appendTo!=="body"?!1:!T.appendToBody},{default:gr(()=>[_r(id,{name:"dialog-fade",onAfterEnter:$(p),onAfterLeave:$(g),onBeforeLeave:$(m),persisted:""},{default:gr(()=>[Kf(_r($(bQ),{"custom-mask-event":"",mask:T.modal,"overlay-class":T.modalClass,"z-index":$(v)},{default:gr(()=>[xr("div",{role:"dialog","aria-modal":"true","aria-label":T.title||void 0,"aria-labelledby":T.title?void 0:$(u),"aria-describedby":$(f),class:Tt(`${$(i).namespace.value}-overlay-dialog`),style:ga($(h)),onClick:$(S).onClick,onMousedown:$(S).onMousedown,onMouseup:$(S).onMouseup},[_r($(JP),{loop:"",trapped:$(l),"focus-start-el":"container",onFocusAfterTrapped:$(x),onFocusAfterReleased:$(w),onFocusoutPrevented:$(_),onReleaseRequested:$(E)},{default:gr(()=>[$(d)?(ct(),mr(oYe,Xo({key:0,ref_key:"dialogContentRef",ref:s},T.$attrs,{center:T.center,"align-center":T.alignCenter,"close-icon":T.closeIcon,draggable:$(C),overflow:T.overflow,fullscreen:T.fullscreen,"show-close":T.showClose,title:T.title,"aria-level":T.headerAriaLevel,onClose:$(b)}),iae({header:gr(()=>[T.$slots.title?dr(T.$slots,"title",{key:1}):dr(T.$slots,"header",{key:0,close:$(b),titleId:$(u),titleClass:$(i).e("title")})]),default:gr(()=>[dr(T.$slots,"default")]),_:2},[T.$slots.footer?{name:"footer",fn:gr(()=>[dr(T.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):ar("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[k0,$(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var uYe=yn(lYe,[["__file","dialog.vue"]]);const $rt=Oo(uYe),fYe=sn({...EQ,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),cYe=_Q,hYe=Rt({name:"ElDrawer",inheritAttrs:!1}),dYe=Rt({...hYe,props:fYe,emits:cYe,setup(r,{expose:e}){const t=r,n=Am();t2({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},Me(()=>!!n.title));const i=xt(),a=xt(),o=Pn("drawer"),{t:s}=BP(),{afterEnter:l,afterLeave:u,beforeLeave:f,visible:c,rendered:h,titleId:d,bodyId:v,zIndex:p,onModalClick:g,onOpenAutoFocus:m,onCloseAutoFocus:b,onFocusoutPrevented:y,onCloseRequested:x,handleClose:w}=SQ(t,i),E=Me(()=>t.direction==="rtl"||t.direction==="ltr"),_=Me(()=>Pu(t.size));return e({handleClose:w,afterEnter:l,afterLeave:u}),(S,C)=>(ct(),mr($(tD),{to:S.appendTo,disabled:S.appendTo!=="body"?!1:!S.appendToBody},{default:gr(()=>[_r(id,{name:$(o).b("fade"),onAfterEnter:$(l),onAfterLeave:$(u),onBeforeLeave:$(f),persisted:""},{default:gr(()=>[Kf(_r($(bQ),{mask:S.modal,"overlay-class":S.modalClass,"z-index":$(p),onClick:$(g)},{default:gr(()=>[_r($(JP),{loop:"",trapped:$(c),"focus-trap-el":i.value,"focus-start-el":a.value,onFocusAfterTrapped:$(m),onFocusAfterReleased:$(b),onFocusoutPrevented:$(y),onReleaseRequested:$(x)},{default:gr(()=>[xr("div",Xo({ref_key:"drawerRef",ref:i,"aria-modal":"true","aria-label":S.title||void 0,"aria-labelledby":S.title?void 0:$(d),"aria-describedby":$(v)},S.$attrs,{class:[$(o).b(),S.direction,$(c)&&"open"],style:$(E)?"width: "+$(_):"height: "+$(_),role:"dialog",onClick:Il(()=>{},["stop"])}),[xr("span",{ref_key:"focusStartRef",ref:a,class:Tt($(o).e("sr-focus")),tabindex:"-1"},null,2),S.withHeader?(ct(),or("header",{key:0,class:Tt($(o).e("header"))},[S.$slots.title?dr(S.$slots,"title",{key:1},()=>[ar(" DEPRECATED SLOT ")]):dr(S.$slots,"header",{key:0,close:$(w),titleId:$(d),titleClass:$(o).e("title")},()=>[S.$slots.title?ar("v-if",!0):(ct(),or("span",{key:0,id:$(d),role:"heading","aria-level":S.headerAriaLevel,class:Tt($(o).e("title"))},Oi(S.title),11,["id","aria-level"]))]),S.showClose?(ct(),or("button",{key:2,"aria-label":$(s)("el.drawer.close"),class:Tt($(o).e("close-btn")),type:"button",onClick:$(w)},[_r($(Ci),{class:Tt($(o).e("close"))},{default:gr(()=>[_r($(Yw))]),_:1},8,["class"])],10,["aria-label","onClick"])):ar("v-if",!0)],2)):ar("v-if",!0),$(h)?(ct(),or("div",{key:1,id:$(v),class:Tt($(o).e("body"))},[dr(S.$slots,"default")],10,["id"])):ar("v-if",!0),S.$slots.footer?(ct(),or("div",{key:2,class:Tt($(o).e("footer"))},[dr(S.$slots,"footer")],2)):ar("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[k0,$(c)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var vYe=yn(dYe,[["__file","drawer.vue"]]);const zrt=Oo(vYe),pYe=Rt({inheritAttrs:!1});function gYe(r,e,t,n,i,a){return dr(r.$slots,"default")}var mYe=yn(pYe,[["render",gYe],["__file","collection.vue"]]);const yYe=Rt({name:"ElCollectionItem",inheritAttrs:!1});function bYe(r,e,t,n,i,a){return dr(r.$slots,"default")}var xYe=yn(yYe,[["render",bYe],["__file","collection-item.vue"]]);const wYe="data-el-collection-item",EYe=r=>{const e=`El${r}Collection`,t=`${e}Item`,n=Symbol(e),i=Symbol(t),a={...mYe,name:e,setup(){const s=xt(null),l=new Map;Ia(n,{itemMap:l,getItems:()=>{const f=$(s);if(!f)return[];const c=Array.from(f.querySelectorAll(`[${wYe}]`));return[...l.values()].sort((d,v)=>c.indexOf(d.ref)-c.indexOf(v.ref))},collectionRef:s})}},o={...xYe,name:t,setup(s,{attrs:l}){const u=xt(null),f=tn(n,void 0);Ia(i,{collectionItemRef:u}),Fn(()=>{const c=$(u);c&&f.itemMap.set(c,{ref:c,...l})}),La(()=>{const c=$(u);f.itemMap.delete(c)})}};return{COLLECTION_INJECTION_KEY:n,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:a,ElCollectionItem:o}},MC=sn({trigger:cm.trigger,effect:{...Go.effect,default:"light"},type:{type:pr(String)},placement:{type:pr(String),default:"bottom"},popperOptions:{type:pr(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:pr([Number,String]),default:0},maxHeight:{type:pr([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:pr(Object)},teleported:Go.teleported});sn({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Ms}});sn({onKeydown:{type:pr(Function)}});EYe("Dropdown");const _Ye=sn({trigger:cm.trigger,placement:MC.placement,disabled:cm.disabled,visible:Go.visible,transition:Go.transition,popperOptions:MC.popperOptions,tabindex:MC.tabindex,content:Go.content,popperStyle:Go.popperStyle,popperClass:Go.popperClass,enterable:{...Go.enterable,default:!0},effect:{...Go.effect,default:"light"},teleported:Go.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),SYe={"update:visible":r=>Ko(r),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},MYe="onUpdate:visible",CYe=Rt({name:"ElPopover"}),AYe=Rt({...CYe,props:_Ye,emits:SYe,setup(r,{expose:e,emit:t}){const n=r,i=Me(()=>n[MYe]),a=Pn("popover"),o=xt(),s=Me(()=>{var g;return(g=$(o))==null?void 0:g.popperRef}),l=Me(()=>[{width:Pu(n.width)},n.popperStyle]),u=Me(()=>[a.b(),n.popperClass,{[a.m("plain")]:!!n.content}]),f=Me(()=>n.transition===`${a.namespace.value}-fade-in-linear`),c=()=>{var g;(g=o.value)==null||g.hide()},h=()=>{t("before-enter")},d=()=>{t("before-leave")},v=()=>{t("after-enter")},p=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:s,hide:c}),(g,m)=>(ct(),mr($(hXe),Xo({ref_key:"tooltipRef",ref:o},g.$attrs,{trigger:g.trigger,placement:g.placement,disabled:g.disabled,visible:g.visible,transition:g.transition,"popper-options":g.popperOptions,tabindex:g.tabindex,content:g.content,offset:g.offset,"show-after":g.showAfter,"hide-after":g.hideAfter,"auto-close":g.autoClose,"show-arrow":g.showArrow,"aria-label":g.title,effect:g.effect,enterable:g.enterable,"popper-class":$(u),"popper-style":$(l),teleported:g.teleported,persistent:g.persistent,"gpu-acceleration":$(f),"onUpdate:visible":$(i),onBeforeShow:h,onBeforeHide:d,onShow:v,onHide:p}),{content:gr(()=>[g.title?(ct(),or("div",{key:0,class:Tt($(a).e("title")),role:"title"},Oi(g.title),3)):ar("v-if",!0),dr(g.$slots,"default",{},()=>[Tm(Oi(g.content),1)])]),default:gr(()=>[g.$slots.reference?dr(g.$slots,"reference",{key:0}):ar("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var TYe=yn(AYe,[["__file","popover.vue"]]);const tz=(r,e)=>{const t=e.arg||e.value,n=t==null?void 0:t.popperRef;n&&(n.triggerRef=r)};var OYe={mounted(r,e){tz(r,e)},updated(r,e){tz(r,e)}};const kYe="popover",IYe=_7e(OYe,kYe),Grt=Oo(TYe,{directive:IYe}),LYe=sn({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:M7e},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:Ms},activeActionIcon:{type:Ms},activeIcon:{type:Ms},inactiveIcon:{type:Ms},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:pr(Function)},id:String,tabindex:{type:[String,Number]},...dy(["ariaLabel"])}),PYe={[Is]:r=>Ko(r)||qr(r)||qo(r),[Kw]:r=>Ko(r)||qr(r)||qo(r),[dO]:r=>Ko(r)||qr(r)||qo(r)},MQ="ElSwitch",DYe=Rt({name:MQ}),NYe=Rt({...DYe,props:LYe,emits:PYe,setup(r,{expose:e,emit:t}){const n=r,{formItem:i}=a2(),a=dd(),o=Pn("switch"),{inputId:s}=KP(n,{formItemContext:i}),l=vy(Me(()=>n.loading)),u=xt(n.modelValue!==!1),f=xt(),c=xt(),h=Me(()=>[o.b(),o.m(a.value),o.is("disabled",l.value),o.is("checked",m.value)]),d=Me(()=>[o.e("label"),o.em("label","left"),o.is("active",!m.value)]),v=Me(()=>[o.e("label"),o.em("label","right"),o.is("active",m.value)]),p=Me(()=>({width:Pu(n.width)}));qt(()=>n.modelValue,()=>{u.value=!0});const g=Me(()=>u.value?n.modelValue:!1),m=Me(()=>g.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(g.value)||(t(Is,n.inactiveValue),t(Kw,n.inactiveValue),t(dO,n.inactiveValue)),qt(m,w=>{var E;f.value.checked=w,n.validateEvent&&((E=i==null?void 0:i.validate)==null||E.call(i,"change").catch(_=>void 0))});const b=()=>{const w=m.value?n.inactiveValue:n.activeValue;t(Is,w),t(Kw,w),t(dO,w),di(()=>{f.value.checked=m.value})},y=()=>{if(l.value)return;const{beforeChange:w}=n;if(!w){b();return}const E=w();[Rx(E),Ko(E)].includes(!0)||NP(MQ,"beforeChange must return type `Promise<boolean>` or `boolean`"),Rx(E)?E.then(S=>{S&&b()}).catch(S=>{}):E&&b()},x=()=>{var w,E;(E=(w=f.value)==null?void 0:w.focus)==null||E.call(w)};return Fn(()=>{f.value.checked=m.value}),e({focus:x,checked:m}),(w,E)=>(ct(),or("div",{class:Tt($(h)),onClick:Il(y,["prevent"])},[xr("input",{id:$(s),ref_key:"input",ref:f,class:Tt($(o).e("input")),type:"checkbox",role:"switch","aria-checked":$(m),"aria-disabled":$(l),"aria-label":w.ariaLabel,name:w.name,"true-value":w.activeValue,"false-value":w.inactiveValue,disabled:$(l),tabindex:w.tabindex,onChange:b,onKeydown:Ioe(y,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!w.inlinePrompt&&(w.inactiveIcon||w.inactiveText)?(ct(),or("span",{key:0,class:Tt($(d))},[w.inactiveIcon?(ct(),mr($(Ci),{key:0},{default:gr(()=>[(ct(),mr(Ma(w.inactiveIcon)))]),_:1})):ar("v-if",!0),!w.inactiveIcon&&w.inactiveText?(ct(),or("span",{key:1,"aria-hidden":$(m)},Oi(w.inactiveText),9,["aria-hidden"])):ar("v-if",!0)],2)):ar("v-if",!0),xr("span",{ref_key:"core",ref:c,class:Tt($(o).e("core")),style:ga($(p))},[w.inlinePrompt?(ct(),or("div",{key:0,class:Tt($(o).e("inner"))},[w.activeIcon||w.inactiveIcon?(ct(),mr($(Ci),{key:0,class:Tt($(o).is("icon"))},{default:gr(()=>[(ct(),mr(Ma($(m)?w.activeIcon:w.inactiveIcon)))]),_:1},8,["class"])):w.activeText||w.inactiveText?(ct(),or("span",{key:1,class:Tt($(o).is("text")),"aria-hidden":!$(m)},Oi($(m)?w.activeText:w.inactiveText),11,["aria-hidden"])):ar("v-if",!0)],2)):ar("v-if",!0),xr("div",{class:Tt($(o).e("action"))},[w.loading?(ct(),mr($(Ci),{key:0,class:Tt($(o).is("loading"))},{default:gr(()=>[_r($(RP))]),_:1},8,["class"])):$(m)?dr(w.$slots,"active-action",{key:1},()=>[w.activeActionIcon?(ct(),mr($(Ci),{key:0},{default:gr(()=>[(ct(),mr(Ma(w.activeActionIcon)))]),_:1})):ar("v-if",!0)]):$(m)?ar("v-if",!0):dr(w.$slots,"inactive-action",{key:2},()=>[w.inactiveActionIcon?(ct(),mr($(Ci),{key:0},{default:gr(()=>[(ct(),mr(Ma(w.inactiveActionIcon)))]),_:1})):ar("v-if",!0)])],2)],6),!w.inlinePrompt&&(w.activeIcon||w.activeText)?(ct(),or("span",{key:1,class:Tt($(v))},[w.activeIcon?(ct(),mr($(Ci),{key:0},{default:gr(()=>[(ct(),mr(Ma(w.activeIcon)))]),_:1})):ar("v-if",!0),!w.activeIcon&&w.activeText?(ct(),or("span",{key:1,"aria-hidden":!$(m)},Oi(w.activeText),9,["aria-hidden"])):ar("v-if",!0)],2)):ar("v-if",!0)],10,["onClick"]))}});var RYe=yn(NYe,[["__file","switch.vue"]]);const jrt=Oo(RYe),CQ=["success","info","warning","error"],BYe=sn({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Ms},id:{type:String,default:""},message:{type:pr([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:pr(Function),default:()=>{}},onClose:{type:pr(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...CQ,""],default:""},zIndex:Number}),FYe={destroy:()=>!0},$Ye=Rt({name:"ElNotification"}),zYe=Rt({...$Ye,props:BYe,emits:FYe,setup(r,{expose:e}){const t=r,{ns:n,zIndex:i}=iVe("notification"),{nextZIndex:a,currentZIndex:o}=i,{Close:s}=kZ,l=xt(!1);let u;const f=Me(()=>{const y=t.type;return y&&b$[t.type]?n.m(y):""}),c=Me(()=>t.type&&b$[t.type]||t.icon),h=Me(()=>t.position.endsWith("right")?"right":"left"),d=Me(()=>t.position.startsWith("top")?"top":"bottom"),v=Me(()=>{var y;return{[d.value]:`${t.offset}px`,zIndex:(y=t.zIndex)!=null?y:o.value}});function p(){t.duration>0&&({stop:u}=sO(()=>{l.value&&m()},t.duration))}function g(){u==null||u()}function m(){l.value=!1}function b({code:y}){y===Dh.delete||y===Dh.backspace?g():y===Dh.esc?l.value&&m():p()}return Fn(()=>{p(),a(),l.value=!0}),Lh(document,"keydown",b),e({visible:l,close:m}),(y,x)=>(ct(),mr(id,{name:$(n).b("fade"),onBeforeLeave:y.onClose,onAfterLeave:w=>y.$emit("destroy"),persisted:""},{default:gr(()=>[Kf(xr("div",{id:y.id,class:Tt([$(n).b(),y.customClass,$(h)]),style:ga($(v)),role:"alert",onMouseenter:g,onMouseleave:p,onClick:y.onClick},[$(c)?(ct(),mr($(Ci),{key:0,class:Tt([$(n).e("icon"),$(f)])},{default:gr(()=>[(ct(),mr(Ma($(c))))]),_:1},8,["class"])):ar("v-if",!0),xr("div",{class:Tt($(n).e("group"))},[xr("h2",{class:Tt($(n).e("title")),textContent:Oi(y.title)},null,10,["textContent"]),Kf(xr("div",{class:Tt($(n).e("content")),style:ga(y.title?void 0:{margin:0})},[dr(y.$slots,"default",{},()=>[y.dangerouslyUseHTMLString?(ct(),or(Qn,{key:1},[ar(" Caution here, message could've been compromised, never use user's input as message "),xr("p",{innerHTML:y.message},null,8,["innerHTML"])],2112)):(ct(),or("p",{key:0},Oi(y.message),1))])],6),[[k0,y.message]]),y.showClose?(ct(),mr($(Ci),{key:0,class:Tt($(n).e("closeBtn")),onClick:Il(m,["stop"])},{default:gr(()=>[_r($(s))]),_:1},8,["class","onClick"])):ar("v-if",!0)],2)],46,["id","onClick"]),[[k0,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var GYe=yn(zYe,[["__file","notification.vue"]]);const Qw={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},EO=16;let jYe=1;const dp=function(r={},e=null){if(!Ki)return{close:()=>{}};(typeof r=="string"||Fh(r))&&(r={message:r});const t=r.position||"top-right";let n=r.offset||0;Qw[t].forEach(({vm:f})=>{var c;n+=(((c=f.el)==null?void 0:c.offsetHeight)||0)+EO}),n+=EO;const i=`notification_${jYe++}`,a=r.onClose,o={...r,offset:n,id:i,onClose:()=>{UYe(i,t,a)}};let s=document.body;Ph(r.appendTo)?s=r.appendTo:qr(r.appendTo)&&(s=document.querySelector(r.appendTo)),Ph(s)||(s=document.body);const l=document.createElement("div"),u=_r(GYe,o,Fh(o.message)?{default:()=>o.message}:null);return u.appContext=e??dp._context,u.props.onDestroy=()=>{s3(null,l)},s3(u,l),Qw[t].push({vm:u}),s.appendChild(l.firstElementChild),{close:()=>{u.component.exposed.visible.value=!1}}};CQ.forEach(r=>{dp[r]=(e={})=>((typeof e=="string"||Fh(e))&&(e={message:e}),dp({...e,type:r}))});function UYe(r,e,t){const n=Qw[e],i=n.findIndex(({vm:u})=>{var f;return((f=u.component)==null?void 0:f.props.id)===r});if(i===-1)return;const{vm:a}=n[i];if(!a)return;t==null||t(a);const o=a.el.offsetHeight,s=e.split("-")[0];n.splice(i,1);const l=n.length;if(!(l<1))for(let u=i;u<l;u++){const{el:f,component:c}=n[u].vm,h=Number.parseInt(f.style[s],10)-o-EO;c.props.offset=h}}function WYe(){for(const r of Object.values(Qw))r.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}dp.closeAll=WYe;dp._context=null;const Urt=E7e(dp,"$notify");class un{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=vp(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),hl.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=vp(this,e,t);let n=[];return this.decompose(e,t,n,0),hl.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new x0(this),a=new x0(e);for(let o=t,s=t;;){if(i.next(o),a.next(o),o=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}}iter(e=1){return new x0(this,e)}iterRange(e,t=this.length){return new AQ(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new TQ(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?un.empty:e.length<=32?new ai(e):hl.from(ai.split(e,[]))}}class ai extends un{constructor(e,t=VYe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let a=0;;a++){let o=this.text[a],s=i+o.length;if((t?n:s)>=e)return new HYe(i,s,n,o);i=s+1,n++}}decompose(e,t,n,i){let a=e<=0&&t>=this.length?this:new ai(rz(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),s=Mx(a.text,o.text.slice(),0,a.length);if(s.length<=32)n.push(new ai(s,o.length+a.length));else{let l=s.length>>1;n.push(new ai(s.slice(0,l)),new ai(s.slice(l)))}}else n.push(a)}replace(e,t,n){if(!(n instanceof ai))return super.replace(e,t,n);[e,t]=vp(this,e,t);let i=Mx(this.text,Mx(n.text,rz(this.text,0,e)),t),a=this.length+n.length-(t-e);return i.length<=32?new ai(i,a):hl.from(ai.split(i,[]),a)}sliceString(e,t=this.length,n=`
`){[e,t]=vp(this,e,t);let i="";for(let a=0,o=0;a<=t&&o<this.text.length;o++){let s=this.text[o],l=a+s.length;a>e&&o&&(i+=n),e<l&&t>a&&(i+=s.slice(Math.max(0,e-a),t-a)),a=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let a of e)n.push(a),i+=a.length+1,n.length==32&&(t.push(new ai(n,i)),n=[],i=-1);return i>-1&&t.push(new ai(n,i)),t}}class hl extends un{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let a=0;;a++){let o=this.children[a],s=i+o.length,l=n+o.lines-1;if((t?l:s)>=e)return o.lineInner(e,t,n,i);i=s+1,n=l+1}}decompose(e,t,n,i){for(let a=0,o=0;o<=t&&a<this.children.length;a++){let s=this.children[a],l=o+s.length;if(e<=l&&t>=o){let u=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?n.push(s):s.decompose(e-o,t-o,n,u)}o=l+1}}replace(e,t,n){if([e,t]=vp(this,e,t),n.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let o=this.children[i],s=a+o.length;if(e>=a&&t<=s){let l=o.replace(e-a,t-a,n),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let f=this.children.slice();return f[i]=l,new hl(f,this.length-(t-e)+n.length)}return super.replace(a,s,l)}a=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=vp(this,e,t);let i="";for(let a=0,o=0;a<this.children.length&&o<=t;a++){let s=this.children[a],l=o+s.length;o>e&&a&&(i+=n),e<l&&t>o&&(i+=s.sliceString(e-o,t-o,n)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof hl))return 0;let n=0,[i,a,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,a+=t){if(i==o||a==s)return n;let l=this.children[i],u=e.children[a];if(l!=u)return n+l.scanIdentical(u,t);n+=l.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let v of e)v.flatten(d);return new ai(d,t)}let i=Math.max(32,n>>5),a=i<<1,o=i>>1,s=[],l=0,u=-1,f=[];function c(d){let v;if(d.lines>a&&d instanceof hl)for(let p of d.children)c(p);else d.lines>o&&(l>o||!l)?(h(),s.push(d)):d instanceof ai&&l&&(v=f[f.length-1])instanceof ai&&d.lines+v.lines<=32?(l+=d.lines,u+=d.length+1,f[f.length-1]=new ai(v.text.concat(d.text),v.length+1+d.length)):(l+d.lines>i&&h(),l+=d.lines,u+=d.length+1,f.push(d))}function h(){l!=0&&(s.push(f.length==1?f[0]:hl.from(f,u)),u=-1,l=f.length=0)}for(let d of e)c(d);return h(),s.length==1?s[0]:new hl(s,t)}}un.empty=new ai([""],0);function VYe(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Mx(r,e,t=0,n=1e9){for(let i=0,a=0,o=!0;a<r.length&&i<=n;a++){let s=r[a],l=i+s.length;l>=t&&(l>n&&(s=s.slice(0,n-i)),i<t&&(s=s.slice(t-i)),o?(e[e.length-1]+=s,o=!1):e.push(s)),i=l+1}return e}function rz(r,e,t){return Mx(r,[""],e,t)}class x0{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ai?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],a=this.offsets[n],o=a>>1,s=i instanceof ai?i.text.length:i.children.length;if(o==(t>0?s:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ai){let l=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof ai?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class AQ{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new x0(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class TQ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(un.prototype[Symbol.iterator]=function(){return this.iter()},x0.prototype[Symbol.iterator]=AQ.prototype[Symbol.iterator]=TQ.prototype[Symbol.iterator]=function(){return this});class HYe{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function vp(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}let Av="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Av.length;r++)Av[r]+=Av[r-1];function XYe(r){for(let e=1;e<Av.length;e+=2)if(Av[e]>r)return Av[e-1]<=r;return!1}function nz(r){return r>=127462&&r<=127487}const iz=8205;function ra(r,e,t=!0,n=!0){return(t?OQ:YYe)(r,e,n)}function OQ(r,e,t){if(e==r.length)return e;e&&kQ(r.charCodeAt(e))&&IQ(r.charCodeAt(e-1))&&e--;let n=Ji(r,e);for(e+=Wo(n);e<r.length;){let i=Ji(r,e);if(n==iz||i==iz||t&&XYe(i))e+=Wo(i),n=i;else if(nz(i)){let a=0,o=e-2;for(;o>=0&&nz(Ji(r,o));)a++,o-=2;if(a%2==0)break;e+=2}else break}return e}function YYe(r,e,t){for(;e>0;){let n=OQ(r,e-2,t);if(n<e)return n;e--}return 0}function kQ(r){return r>=56320&&r<57344}function IQ(r){return r>=55296&&r<56320}function Ji(r,e){let t=r.charCodeAt(e);if(!IQ(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return kQ(n)?(t-55296<<10)+(n-56320)+65536:t}function rD(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Wo(r){return r<65536?1:2}const _O=/\r\n?|\n/;var Ta=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(Ta||(Ta={}));class Ol{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let a=this.sections[t++],o=this.sections[t++];o<0?(e(n,i,a),i+=a):i+=o,n+=a}}iterChangedRanges(e,t=!1){SO(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new Ol(e)}composeDesc(e){return this.empty?e:e.empty?this:LQ(this,e)}mapDesc(e,t=!1){return e.empty?this:MO(this,e,t)}mapPos(e,t=-1,n=Ta.Simple){let i=0,a=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],u=i+s;if(l<0){if(u>e)return a+(e-i);a+=s}else{if(n!=Ta.Simple&&u>=e&&(n==Ta.TrackDel&&i<e&&u>e||n==Ta.TrackBefore&&i<e||n==Ta.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!s)return e==i||t<0?a:a+l;a+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let a=this.sections[n++],o=this.sections[n++],s=i+a;if(o>=0&&i<=t&&s>=e)return i<e&&s>t?"cover":!0;i=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ol(e)}static create(e){return new Ol(e)}}class Si extends Ol{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return SO(this,(t,n,i,a,o)=>e=e.replace(i,i+(n-t),o),!1),e}mapDesc(e,t=!1){return MO(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,a=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s>=0){t[i]=s,t[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(un.empty);n.push(o?e.slice(a,a+o):un.empty)}a+=o}return new Si(t,n)}compose(e){return this.empty?e:e.empty?this:LQ(this,e,!0)}map(e,t=!1){return e.empty?this:MO(this,e,t,!0)}iterChanges(e,t=!1){SO(this,e,t)}get desc(){return Ol.create(this.sections)}filter(e){let t=[],n=[],i=[],a=new hm(this);e:for(let o=0,s=0;;){let l=o==e.length?1e9:e[o++];for(;s<l||s==l&&a.len==0;){if(a.done)break e;let f=Math.min(a.len,l-s);ua(i,f,-1);let c=a.ins==-1?-1:a.off==0?a.ins:0;ua(t,f,c),c>0&&Ff(n,t,a.text),a.forward(f),s+=f}let u=e[o++];for(;s<u;){if(a.done)break e;let f=Math.min(a.len,u-s);ua(t,f,-1),ua(i,f,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(f),s+=f}}return{changes:new Si(t,n),filtered:Ol.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],a=[],o=0,s=null;function l(f=!1){if(!f&&!i.length)return;o<t&&ua(i,t-o,-1);let c=new Si(i,a);s=s?s.compose(c.map(s)):c,i=[],a=[],o=0}function u(f){if(Array.isArray(f))for(let c of f)u(c);else if(f instanceof Si){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);l(),s=s?s.compose(f.map(s)):f}else{let{from:c,to:h=c,insert:d}=f;if(c>h||c<0||h>t)throw new RangeError(`Invalid change range ${c} to ${h} (in doc of length ${t})`);let v=d?typeof d=="string"?un.of(d.split(n||_O)):d:un.empty,p=v.length;if(c==h&&p==0)return;c<o&&l(),c>o&&ua(i,c-o,-1),ua(i,h-c,p),Ff(a,i,v),o=h}}return u(e),l(!s),s}static empty(e){return new Si(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,s)=>s&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;n.length<i;)n.push(un.empty);n[i]=un.of(a.slice(1)),t.push(a[0],n[i].length)}}}return new Si(t,n)}static createSet(e,t){return new Si(e,t)}}function ua(r,e,t,n=!1){if(e==0&&t<=0)return;let i=r.length-2;i>=0&&t<=0&&t==r[i+1]?r[i]+=e:e==0&&r[i]==0?r[i+1]+=t:n?(r[i]+=e,r[i+1]+=t):r.push(e,t)}function Ff(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(un.empty);r.push(t)}}function SO(r,e,t){let n=r.inserted;for(let i=0,a=0,o=0;o<r.sections.length;){let s=r.sections[o++],l=r.sections[o++];if(l<0)i+=s,a+=s;else{let u=i,f=a,c=un.empty;for(;u+=s,f+=l,l&&n&&(c=c.append(n[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)s=r.sections[o++],l=r.sections[o++];e(i,u,a,f,c),i=u,a=f}}}function MO(r,e,t,n=!1){let i=[],a=n?[]:null,o=new hm(r),s=new hm(e);for(let l=-1;;)if(o.ins==-1&&s.ins==-1){let u=Math.min(o.len,s.len);ua(i,u,-1),o.forward(u),s.forward(u)}else if(s.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(s.len<o.len||s.len==o.len&&!t))){let u=s.len;for(ua(i,s.ins,-1);u;){let f=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=f&&(ua(i,0,o.ins),a&&Ff(a,i,o.text),l=o.i),o.forward(f),u-=f}s.next()}else if(o.ins>=0){let u=0,f=o.len;for(;f;)if(s.ins==-1){let c=Math.min(f,s.len);u+=c,f-=c,s.forward(c)}else if(s.ins==0&&s.len<f)f-=s.len,s.next();else break;ua(i,u,l<o.i?o.ins:0),a&&l<o.i&&Ff(a,i,o.text),l=o.i,o.forward(o.len-f)}else{if(o.done&&s.done)return a?Si.createSet(i,a):Ol.create(i);throw new Error("Mismatched change set lengths")}}function LQ(r,e,t=!1){let n=[],i=t?[]:null,a=new hm(r),o=new hm(e);for(let s=!1;;){if(a.done&&o.done)return i?Si.createSet(n,i):Ol.create(n);if(a.ins==0)ua(n,a.len,0,s),a.next();else if(o.len==0&&!o.done)ua(n,0,o.ins,s),i&&Ff(i,n,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),u=n.length;if(a.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;ua(n,l,f,s),i&&f&&Ff(i,n,o.text)}else o.ins==-1?(ua(n,a.off?0:a.len,l,s),i&&Ff(i,n,a.textBit(l))):(ua(n,a.off?0:a.len,o.off?0:o.ins,s),i&&!o.off&&Ff(i,n,o.text));s=(a.ins>l||o.ins>=0&&o.len>l)&&(s||n.length>u),a.forward2(l),o.forward(l)}}}}class hm{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?un.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?un.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class bh{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new bh(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return at.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return at.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return at.range(e.anchor,e.head)}static create(e,t,n){return new bh(e,t,n)}}class at{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:at.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new at([this.main],0)}addRange(e,t=!0){return at.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,at.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new at(e.ranges.map(t=>bh.fromJSON(t)),e.main)}static single(e,t=e){return new at([at.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=n:a.from<n)return at.normalized(e.slice(),t);n=a.to}return new at(e,t)}static cursor(e,t=0,n,i){return bh.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,t,n,i){let a=(n??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?bh.create(t,e,48|a):bh.create(e,t,(t>e?8:0)|a)}static normalized(e,t=0){let n=e[t];e.sort((i,a)=>i.from-a.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let a=e[i],o=e[i-1];if(a.empty?a.from<=o.to:a.from<o.to){let s=o.from,l=Math.max(a.to,o.to);i<=t&&t--,e.splice(--i,2,a.anchor>a.head?at.range(l,s):at.range(s,l))}}return new at(e,t)}}function PQ(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let nD=0;class Gt{constructor(e,t,n,i,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=nD++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Gt(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:iD),!!e.static,e.enables)}of(e){return new Cx([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Cx(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Cx(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function iD(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}class Cx{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=nD++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,a=this.id,o=e[a]>>1,s=this.type==2,l=!1,u=!1,f=[];for(let c of this.dependencies)c=="doc"?l=!0:c=="selection"?u=!0:((t=e[c.id])!==null&&t!==void 0?t:1)&1||f.push(e[c.id]);return{create(c){return c.values[o]=n(c),1},update(c,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||CO(c,f)){let d=n(c);if(s?!az(d,c.values[o],i):!i(d,c.values[o]))return c.values[o]=d,1}return 0},reconfigure:(c,h)=>{let d,v=h.config.address[a];if(v!=null){let p=eE(h,v);if(this.dependencies.every(g=>g instanceof Gt?h.facet(g)===c.facet(g):g instanceof oa?h.field(g,!1)==c.field(g,!1):!0)||(s?az(d=n(c),p,i):i(d=n(c),p)))return c.values[o]=p,0}else d=n(c);return c.values[o]=d,1}}}}function az(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function CO(r,e){let t=!1;for(let n of e)w0(r,n)&1&&(t=!0);return t}function KYe(r,e,t){let n=t.map(l=>r[l.id]),i=t.map(l=>l.type),a=n.filter(l=>!(l&1)),o=r[e.id]>>1;function s(l){let u=[];for(let f=0;f<n.length;f++){let c=eE(l,n[f]);if(i[f]==2)for(let h of c)u.push(h);else u.push(c)}return e.combine(u)}return{create(l){for(let u of n)w0(l,u);return l.values[o]=s(l),1},update(l,u){if(!CO(l,a))return 0;let f=s(l);return e.compare(f,l.values[o])?0:(l.values[o]=f,1)},reconfigure(l,u){let f=CO(l,n),c=u.config.facets[e.id],h=u.facet(e);if(c&&!f&&iD(t,c))return l.values[o]=h,0;let d=s(l);return e.compare(d,h)?(l.values[o]=h,0):(l.values[o]=d,1)}}}const oz=Gt.define({static:!0});class oa{constructor(e,t,n,i,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let t=new oa(nD++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(oz).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let a=n.values[t],o=this.updateF(a,i);return this.compareF(a,o)?0:(n.values[t]=o,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,oz.of({field:this,create:e})]}get extension(){return this}}const uh={lowest:4,low:3,default:2,high:1,highest:0};function Sg(r){return e=>new DQ(e,r)}const vd={highest:Sg(uh.highest),high:Sg(uh.high),default:Sg(uh.default),low:Sg(uh.low),lowest:Sg(uh.lowest)};class DQ{constructor(e,t){this.inner=e,this.prec=t}}class gy{of(e){return new AO(this,e)}reconfigure(e){return gy.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class AO{constructor(e,t){this.compartment=e,this.inner=t}}class Jw{constructor(e,t,n,i,a,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],a=Object.create(null),o=new Map;for(let h of qYe(e,t,o))h instanceof oa?i.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let s=Object.create(null),l=[],u=[];for(let h of i)s[h.id]=u.length<<1,u.push(d=>h.slot(d));let f=n==null?void 0:n.config.facets;for(let h in a){let d=a[h],v=d[0].facet,p=f&&f[h]||[];if(d.every(g=>g.type==0))if(s[v.id]=l.length<<1|1,iD(p,d))l.push(n.facet(v));else{let g=v.combine(d.map(m=>m.value));l.push(n&&v.compare(g,n.facet(v))?n.facet(v):g)}else{for(let g of d)g.type==0?(s[g.id]=l.length<<1|1,l.push(g.value)):(s[g.id]=u.length<<1,u.push(m=>g.dynamicSlot(m)));s[v.id]=u.length<<1,u.push(g=>KYe(g,v,d))}}let c=u.map(h=>h(s));return new Jw(e,o,c,s,l,a)}}function qYe(r,e,t){let n=[[],[],[],[],[]],i=new Map;function a(o,s){let l=i.get(o);if(l!=null){if(l<=s)return;let u=n[l].indexOf(o);u>-1&&n[l].splice(u,1),o instanceof AO&&t.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let u of o)a(u,s);else if(o instanceof AO){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),a(u,s)}else if(o instanceof DQ)a(o.inner,o.prec);else if(o instanceof oa)n[s].push(o),o.provides&&a(o.provides,s);else if(o instanceof Cx)n[s].push(o),o.facet.extensions&&a(o.facet.extensions,uh.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(u,s)}}return a(r,uh.default),n.reduce((o,s)=>o.concat(s))}function w0(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let i=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|i}function eE(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const NQ=Gt.define(),TO=Gt.define({combine:r=>r.some(e=>e),static:!0}),RQ=Gt.define({combine:r=>r.length?r[0]:void 0,static:!0}),BQ=Gt.define(),FQ=Gt.define(),$Q=Gt.define(),zQ=Gt.define({combine:r=>r.length?r[0]:!1});class Ku{constructor(e,t){this.type=e,this.value=t}static define(){return new ZYe}}class ZYe{of(e){return new Ku(this,e)}}class QYe{constructor(e){this.map=e}of(e){return new Rr(this,e)}}class Rr{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Rr(this.type,t)}is(e){return this.type==e}static define(e={}){return new QYe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let a=i.map(t);a&&n.push(a)}return n}}Rr.reconfigure=Rr.define();Rr.appendConfig=Rr.define();class Li{constructor(e,t,n,i,a,o){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,n&&PQ(n,t.newLength),a.some(s=>s.type==Li.time)||(this.annotations=a.concat(Li.time.of(Date.now())))}static create(e,t,n,i,a,o){return new Li(e,t,n,i,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Li.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Li.time=Ku.define();Li.userEvent=Ku.define();Li.addToHistory=Ku.define();Li.remote=Ku.define();function JYe(r,e){let t=[];for(let n=0,i=0;;){let a,o;if(n<r.length&&(i==e.length||e[i]>=r[n]))a=r[n++],o=r[n++];else if(i<e.length)a=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<a?t.push(a,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function GQ(r,e,t){var n;let i,a,o;return t?(i=e.changes,a=Si.empty(e.changes.length),o=r.changes.compose(e.changes)):(i=e.changes.map(r.changes),a=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(a):(n=r.selection)===null||n===void 0?void 0:n.map(i),effects:Rr.mapEffects(r.effects,i).concat(Rr.mapEffects(e.effects,a)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function OO(r,e,t){let n=e.selection,i=Tv(e.annotations);return e.userEvent&&(i=i.concat(Li.userEvent.of(e.userEvent))),{changes:e.changes instanceof Si?e.changes:Si.of(e.changes||[],t,r.facet(RQ)),selection:n&&(n instanceof at?n:at.single(n.anchor,n.head)),effects:Tv(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function jQ(r,e,t){let n=OO(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let o=!!e[a].sequential;n=GQ(n,OO(r,e[a],o?n.changes.newLength:r.doc.length),o)}let i=Li.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return tKe(t?eKe(i):i)}function eKe(r){let e=r.startState,t=!0;for(let i of e.facet(BQ)){let a=i(r);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:JYe(t,a))}if(t!==!0){let i,a;if(t===!1)a=r.changes.invertedDesc,i=Si.empty(e.doc.length);else{let o=r.changes.filter(t);i=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}r=Li.create(e,i,r.selection&&r.selection.map(a),Rr.mapEffects(r.effects,a),r.annotations,r.scrollIntoView)}let n=e.facet(FQ);for(let i=n.length-1;i>=0;i--){let a=n[i](r);a instanceof Li?r=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Li?r=a[0]:r=jQ(e,Tv(a),!1)}return r}function tKe(r){let e=r.startState,t=e.facet($Q),n=r;for(let i=t.length-1;i>=0;i--){let a=t[i](r);a&&Object.keys(a).length&&(n=GQ(n,OO(e,a,r.changes.newLength),!0))}return n==r?r:Li.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const rKe=[];function Tv(r){return r==null?rKe:Array.isArray(r)?r:[r]}var Bn=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Bn||(Bn={}));const nKe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kO;try{kO=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function iKe(r){if(kO)return kO.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||nKe.test(t)))return!0}return!1}function aKe(r){return e=>{if(!/\S/.test(e))return Bn.Space;if(iKe(e))return Bn.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Bn.Word;return Bn.Other}}class Jr{constructor(e,t,n,i,a,o){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)w0(this,s<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return w0(this,n),eE(this,n)}update(...e){return jQ(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let s of e.effects)s.is(gy.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(Rr.reconfigure)?(t=null,n=s.value):s.is(Rr.appendConfig)&&(t=null,n=Tv(n).concat(s.value));let a;t?a=e.startState.values.slice():(t=Jw.resolve(n,i,this),a=new Jr(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(TO)?e.newSelection:e.newSelection.asSingle();new Jr(t,e.newDoc,o,a,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:at.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),a=[n.range],o=Tv(n.effects);for(let s=1;s<t.ranges.length;s++){let l=e(t.ranges[s]),u=this.changes(l.changes),f=u.map(i);for(let h=0;h<s;h++)a[h]=a[h].map(f);let c=i.mapDesc(u,!0);a.push(l.range.map(c)),i=i.compose(f),o=Rr.mapEffects(o,f).concat(Rr.mapEffects(Tv(l.effects),c))}return{changes:i,selection:at.create(a,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Si?e:Si.of(e,this.doc.length,this.facet(Jr.lineSeparator))}toText(e){return un.of(e.split(this.facet(Jr.lineSeparator)||_O))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(w0(this,t),eE(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof oa&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let o=n[a],s=e[a];i.push(o.init(l=>o.spec.fromJSON(s,l)))}}return Jr.create({doc:e.doc,selection:at.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Jw.resolve(e.extensions||[],new Map),n=e.doc instanceof un?e.doc:un.of((e.doc||"").split(t.staticFacet(Jr.lineSeparator)||_O)),i=e.selection?e.selection instanceof at?e.selection:at.single(e.selection.anchor,e.selection.head):at.single(0);return PQ(i,n.length),t.staticFacet(TO)||(i=i.asSingle()),new Jr(t,n,i,t.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(Jr.tabSize)}get lineBreak(){return this.facet(Jr.lineSeparator)||`
`}get readOnly(){return this.facet(zQ)}phrase(e,...t){for(let n of this.facet(Jr.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>t.length?n:t[a-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let a of this.facet(NQ))for(let o of a(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return aKe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let l=ra(t,o,!1);if(a(t.slice(l,o))!=Bn.Word)break;o=l}for(;s<i;){let l=ra(t,s);if(a(t.slice(s,l))!=Bn.Word)break;s=l}return o==s?null:at.range(o+n,s+n)}}Jr.allowMultipleSelections=TO;Jr.tabSize=Gt.define({combine:r=>r.length?r[0]:4});Jr.lineSeparator=RQ;Jr.readOnly=zQ;Jr.phrases=Gt.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(i=>r[i]==e[i])}});Jr.languageData=NQ;Jr.changeFilter=BQ;Jr.transactionFilter=FQ;Jr.transactionExtender=$Q;gy.reconfigure=Rr.define();function Yl(r,e,t={}){let n={};for(let i of r)for(let a of Object.keys(i)){let o=i[a],s=n[a];if(s===void 0)n[a]=o;else if(!(s===o||o===void 0))if(Object.hasOwnProperty.call(t,a))n[a]=t[a](s,o);else throw new Error("Config merge conflict for field "+a)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Qh{eq(e){return this==e}range(e,t=e){return IO.create(e,t,this)}}Qh.prototype.startSide=Qh.prototype.endSide=0;Qh.prototype.point=!1;Qh.prototype.mapMode=Ta.TrackDel;let IO=class UQ{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new UQ(e,t,n)}};function LO(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class aD{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let a=n?this.to:this.from;for(let o=i,s=a.length;;){if(o==s)return o;let l=o+s>>1,u=a[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:s;u>=0?s=l:o=l+1}}between(e,t,n,i){for(let a=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,a);a<o;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let n=[],i=[],a=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],f=this.from[l]+e,c=this.to[l]+e,h,d;if(f==c){let v=t.mapPos(f,u.startSide,u.mapMode);if(v==null||(h=d=v,u.startSide!=u.endSide&&(d=t.mapPos(f,u.endSide),d<h)))continue}else if(h=t.mapPos(f,u.startSide),d=t.mapPos(c,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(s=Math.max(s,d-h)),n.push(u),i.push(h-o),a.push(d-o))}return{mapped:n.length?new aD(i,a,n,s):null,pos:o}}}class an{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new an(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:a=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(LO)),this.isEmpty)return t.length?an.of(t):this;let s=new WQ(this,null,-1).goto(0),l=0,u=[],f=new ac;for(;s.value||l<t.length;)if(l<t.length&&(s.from-t[l].from||s.startSide-t[l].value.startSide)>=0){let c=t[l++];f.addInner(c.from,c.to,c.value)||u.push(c)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(s.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||a<this.chunkPos[s.chunkIndex])&&f.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||a<s.from||o(s.from,s.to,s.value))&&(f.addInner(s.from,s.to,s.value)||u.push(IO.create(s.from,s.to,s.value))),s.next());return f.finishInner(this.nextLayer.isEmpty&&!u.length?an.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),n.push(e.mapPos(s));else if(u===!0){let{mapped:f,pos:c}=l.map(s,e);f&&(i=Math.max(i,f.maxPoint),t.push(f),n.push(c))}}let a=this.nextLayer.map(e);return t.length==0?a:new an(n,t,a||an.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],o=this.chunk[i];if(t>=a&&e<=a+o.length&&o.between(a,e-a,t-a,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return dm.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return dm.from(e).goto(t)}static compare(e,t,n,i,a=-1){let o=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=a),s=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=a),l=sz(o,s,n),u=new Mg(o,l,a),f=new Mg(s,l,a);n.iterGaps((c,h,d)=>lz(u,c,f,h,d,i)),n.empty&&n.length==0&&lz(u,0,f,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=999999999);let a=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),o=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let s=sz(a,o),l=new Mg(a,s,0).goto(n),u=new Mg(o,s,0).goto(n);for(;;){if(l.to!=u.to||!PO(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,n,i,a=-1){let o=new Mg(e,null,a).goto(t),s=t,l=o.openStart;for(;;){let u=Math.min(o.to,n);if(o.point){let f=o.activeForPoint(o.to),c=o.pointFrom<t?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,l);i.point(s,u,o.point,f,c,o.pointRank),l=Math.min(o.openEnd(u),f.length)}else u>s&&(i.span(s,u,o.active,l),l=o.openEnd(u));if(o.to>n)return l+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,t=!1){let n=new ac;for(let i of e instanceof IO?[e]:t?oKe(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return an.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=an.empty;i=i.nextLayer)t=new an(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}an.empty=new an([],[],null,-1);function oKe(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(LO(e,n)>0)return r.slice().sort(LO);e=n}return r}an.empty.nextLayer=an.empty;class ac{finishChunk(e){this.chunks.push(new aD(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new ac)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(an.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=an.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function sz(r,e,t){let n=new Map;for(let a of r)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&n.set(a.chunk[o],a.chunkPos[o]);let i=new Set;for(let a of e)for(let o=0;o<a.chunk.length;o++){let s=n.get(a.chunk[o]);s!=null&&(t?t.mapPos(s):s)==a.chunkPos[o]&&!(t!=null&&t.touchesRange(s,s+a.chunk[o].length))&&i.add(a.chunk[o])}return i}class WQ{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class dm{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let a=0;a<e.length;a++)for(let o=e[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new WQ(o,t,n,a));return i.length==1?i[0]:new dm(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)CC(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)CC(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),CC(this.heap,0)}}}function CC(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let i=r[n];if(n+1<r.length&&i.compare(r[n+1])>=0&&(i=r[n+1],n++),t.compare(i)<0)break;r[n]=t,r[e]=i,e=n}}class Mg{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=dm.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){xb(this.active,e),xb(this.activeTo,e),xb(this.activeRank,e),this.minActive=uz(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:a}=this.cursor;for(;t<this.activeRank.length&&(a-this.activeRank[t]||i-this.activeTo[t])>0;)t++;wb(this.active,t,n),wb(this.activeTo,t,i),wb(this.activeRank,t,a),e&&wb(e,t,this.cursor.from),this.minActive=uz(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&xb(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function lz(r,e,t,n,i,a){r.goto(e),t.goto(n);let o=n+i,s=n,l=n-e;for(;;){let u=r.to+l-t.to||r.endSide-t.endSide,f=u<0?r.to+l:t.to,c=Math.min(f,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&PO(r.activeForPoint(r.to),t.activeForPoint(t.to))||a.comparePoint(s,c,r.point,t.point):c>s&&!PO(r.active,t.active)&&a.compareRange(s,c,r.active,t.active),f>o)break;s=f,u<=0&&r.next(),u>=0&&t.next()}}function PO(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function xb(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function wb(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function uz(r,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||r[i].endSide-r[t].endSide)<0&&(t=i,n=e[i]);return t}function Np(r,e,t=r.length){let n=0;for(let i=0;i<t;)r.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=ra(r,i));return n}function DO(r,e,t,n){for(let i=0,a=0;;){if(a>=e)return i;if(i==r.length)break;a+=r.charCodeAt(i)==9?t-a%t:1,i=ra(r,i)}return n===!0?-1:r.length}const NO="ͼ",fz=typeof Symbol>"u"?"__"+NO:Symbol.for(NO),RO=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class oc{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,s,l,u){let f=[],c=/^@(\w+)\b/.exec(o[0]),h=c&&c[1]=="keyframes";if(c&&s==null)return l.push(o[0]+";");for(let d in s){let v=s[d];if(/&/.test(d))a(d.split(/,\s*/).map(p=>o.map(g=>p.replace(/&/,g))).reduce((p,g)=>p.concat(g)),v,l);else if(v&&typeof v=="object"){if(!c)throw new RangeError("The value of a property ("+d+") should be a primitive value.");a(i(d),v,f,h)}else v!=null&&f.push(d.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+v+";")}(f.length||h)&&l.push((n&&!c&&!u?o.map(n):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in e)a(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cz[fz]||1;return cz[fz]=e+1,NO+e.toString(36)}static mount(e,t,n){let i=e[RO],a=n&&n.nonce;i?a&&i.setNonce(a):i=new sKe(e,a),i.mount(Array.isArray(t)?t:[t],e)}}let hz=new Map;class sKe{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=hz.get(n);if(a)return e[RO]=a;this.sheet=new i.CSSStyleSheet,hz.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[RO]=this}mount(e,t){let n=this.sheet,i=0,a=0;for(let o=0;o<e.length;o++){let s=e[o],l=this.modules.indexOf(s);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,s),n)for(let u=0;u<s.rules.length;u++)n.insertRule(s.rules[u],i++)}else{for(;a<l;)i+=this.modules[a++].rules.length;i+=s.rules.length,a++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let s=t.head||t;this.styleTag.parentNode!=s&&s.insertBefore(this.styleTag,s.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vm={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lKe=typeof navigator<"u"&&/Mac/.test(navigator.platform),uKe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ea=0;ea<10;ea++)sc[48+ea]=sc[96+ea]=String(ea);for(var ea=1;ea<=24;ea++)sc[ea+111]="F"+ea;for(var ea=65;ea<=90;ea++)sc[ea]=String.fromCharCode(ea+32),vm[ea]=String.fromCharCode(ea);for(var AC in sc)vm.hasOwnProperty(AC)||(vm[AC]=sc[AC]);function fKe(r){var e=lKe&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||uKe&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?vm:sc)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function tE(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function BO(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function cKe(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ax(r,e){if(!e.anchorNode)return!1;try{return BO(r,e.anchorNode)}catch{return!1}}function pp(r){return r.nodeType==3?ed(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function E0(r,e,t,n){return t?dz(r,e,t,n,-1)||dz(r,e,t,n,1):!1}function Jh(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function rE(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function dz(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:Nu(r))){if(r.nodeName=="DIV")return!1;let a=r.parentNode;if(!a||a.nodeType!=1)return!1;e=Jh(r)+(i<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=i<0?Nu(r):0}else return!1}}function Nu(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function s2(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function hKe(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function VQ(r,e){let t=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function dKe(r,e,t,n,i,a,o,s){let l=r.ownerDocument,u=l.defaultView||window;for(let f=r,c=!1;f&&!c;)if(f.nodeType==1){let h,d=f==l.body,v=1,p=1;if(d)h=hKe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(c=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let b=f.getBoundingClientRect();({scaleX:v,scaleY:p}=VQ(f,b)),h={left:b.left,right:b.left+f.clientWidth*v,top:b.top,bottom:b.top+f.clientHeight*p}}let g=0,m=0;if(i=="nearest")e.top<h.top?(m=-(h.top-e.top+o),t>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,t<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let b=e.bottom-e.top,y=h.bottom-h.top;m=(i=="center"&&b<=y?e.top+b/2-y/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-y+o)-h.top}if(n=="nearest"?e.left<h.left?(g=-(h.left-e.left+a),t>0&&e.right>h.right+g&&(g=e.right-h.right+g+a)):e.right>h.right&&(g=e.right-h.right+a,t<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+a))):g=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==s?e.left-a:e.right-(h.right-h.left)+a)-h.left,g||m)if(d)u.scrollBy(g,m);else{let b=0,y=0;if(m){let x=f.scrollTop;f.scrollTop+=m/p,y=(f.scrollTop-x)*p}if(g){let x=f.scrollLeft;f.scrollLeft+=g/v,b=(f.scrollLeft-x)*v}e={left:e.left-b,top:e.top-y,right:e.right-b,bottom:e.bottom-y},b&&Math.abs(b-g)<1&&(n="nearest"),y&&Math.abs(y-m)<1&&(i="nearest")}if(d)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function vKe(r){let e=r.ownerDocument;for(let t=r.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class pKe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Nu(t):0),n,Math.min(e.focusOffset,n?Nu(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let Yd=null;function HQ(r){if(r.setActive)return r.setActive();if(Yd)return r.focus(Yd);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Yd==null?{get preventScroll(){return Yd={preventScroll:!0},!0}}:void 0),!Yd){Yd=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],a=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let vz;function ed(r,e,t=e){let n=vz||(vz=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function Ov(r,e,t,n){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let a=new KeyboardEvent("keydown",i);a.synthetic=!0,r.dispatchEvent(a);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,r.dispatchEvent(o),a.defaultPrevented||o.defaultPrevented}function gKe(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function XQ(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function mKe(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Nu(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=Nu(t))}else{if(t==r)return!0;n=Jh(t),t=t.parentNode}}function YQ(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function KQ(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=Nu(t)}else if(t.parentNode&&!rE(t))n=Jh(t),t=t.parentNode;else return null}}function qQ(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!rE(t))n=Jh(t)+1,t=t.parentNode;else return null}}class da{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new da(e.parentNode,Jh(e),t)}static after(e,t){return new da(e.parentNode,Jh(e)+1,t)}}const oD=[];class mn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,a;for(let o of this.children){if(o.flags&7){if(!o.dom&&(a=i?i.nextSibling:n.firstChild)){let s=mn.get(a);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(e,t),o.flags&=-8}if(a=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&a!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;a&&a!=o.dom;)a=pz(a);else n.insertBefore(o.dom,a);i=o.dom}for(a=i?i.nextSibling:n.firstChild,a&&t&&t.node==n&&(t.written=!0);a;)a=pz(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=Nu(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!mn.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,a=0;;i++){let o=this.children[i];if(o.dom==n)return a;a+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,a=-1,o=-1,s=-1;for(let l=0,u=n,f=n;l<this.children.length;l++){let c=this.children[l],h=u+c.length;if(u<e&&h>t)return c.domBoundsAround(e,t,u);if(h>=e&&i==-1&&(i=l,a=u),u>t&&c.dom.parentNode==this.dom){o=l,s=f;break}f=h,u=h+c.breakAfter}return{from:a,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=oD){this.markDirty();for(let i=e;i<t;i++){let a=this.children[i];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,t-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ZQ(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,a,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}mn.prototype.breakAfter=0;function pz(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class ZQ{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function QQ(r,e,t,n,i,a,o,s,l){let{children:u}=r,f=u.length?u[e]:null,c=a.length?a[a.length-1]:null,h=c?c.breakAfter:o;if(!(e==n&&f&&!o&&!h&&a.length<2&&f.merge(t,i,a.length?c:null,t==0,s,l))){if(n<u.length){let d=u[n];d&&(i<d.length||d.breakAfter&&(c!=null&&c.breakAfter))?(e==n&&(d=d.split(i),i=0),!h&&c&&d.merge(0,i,c,!0,0,l)?a[a.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),a.push(d))):d!=null&&d.breakAfter&&(c?c.breakAfter=1:o=1),n++}for(f&&(f.breakAfter=o,t>0&&(!o&&a.length&&f.merge(t,f.length,a[0],!1,s,0)?f.breakAfter=a.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,s,0),e++));e<n&&a.length;)if(u[n-1].become(a[a.length-1]))n--,a.pop(),l=a.length?0:s;else if(u[e].become(a[0]))e++,a.shift(),s=a.length?0:l;else break;!a.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,s,l)&&e--,(e<n||a.length)&&r.replaceChildren(e,n,a)}}function JQ(r,e,t,n,i,a){let o=r.childCursor(),{i:s,off:l}=o.findPos(t,1),{i:u,off:f}=o.findPos(e,-1),c=e-t;for(let h of n)c+=h.length;r.length+=c,QQ(r,u,f,s,l,n,0,i,a)}let yo=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},FO=typeof document<"u"?document:{documentElement:{style:{}}};const $O=/Edge\/(\d+)/.exec(yo.userAgent),eJ=/MSIE \d/.test(yo.userAgent),zO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(yo.userAgent),l2=!!(eJ||zO||$O),gz=!l2&&/gecko\/(\d+)/i.test(yo.userAgent),TC=!l2&&/Chrome\/(\d+)/.exec(yo.userAgent),mz="webkitFontSmoothing"in FO.documentElement.style,tJ=!l2&&/Apple Computer/.test(yo.vendor),yz=tJ&&(/Mobile\/\w+/.test(yo.userAgent)||yo.maxTouchPoints>2);var zt={mac:yz||/Mac/.test(yo.platform),windows:/Win/.test(yo.platform),linux:/Linux|X11/.test(yo.platform),ie:l2,ie_version:eJ?FO.documentMode||6:zO?+zO[1]:$O?+$O[1]:0,gecko:gz,gecko_version:gz?+(/Firefox\/(\d+)/.exec(yo.userAgent)||[0,0])[1]:0,chrome:!!TC,chrome_version:TC?+TC[1]:0,ios:yz,android:/Android\b/.test(yo.userAgent),webkit:mz,safari:tJ,webkit_version:mz?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:FO.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const yKe=256;class Ls extends mn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof Ls)||this.length-(t-e)+n.length>yKe||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ls(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new da(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return bKe(this.dom,e,t)}}class Ru extends mn{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(XQ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,a,o){return n&&(!(n instanceof Ru&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&o<=0)?!1:(JQ(this,e,t,n?n.children.slice():[],a-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,a=0;for(let s of this.children){let l=n+s.length;l>e&&t.push(n<e?s.split(e-n):s),i<0&&n>=e&&(i=a),n=l,a++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Ru(this.mark,t,o)}domAtPos(e){return rJ(this,e)}coordsAt(e,t){return iJ(this,e,t)}}function bKe(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let i=e,a=e,o=0;e==0&&t<0||e==n&&t>=0?zt.chrome||zt.gecko||(e?(i--,o=1):a<n&&(a++,o=-1)):t<0?i--:a<n&&a++;let s=ed(r,i,a).getClientRects();if(!s.length)return null;let l=s[(o?o<0:t>=0)?0:s.length-1];return zt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),o?s2(l,o<0):l||null}class $f extends mn{static create(e,t,n){return new $f(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=$f.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,a,o){return n&&(!(n instanceof $f)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof $f&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return un.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):un.empty}domAtPos(e){return(this.length?e==0:this.side>0)?da.before(this.dom):da.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?i.length-1:0;a=i[s],!(e>0?s==0:s==i.length-1||a.top<a.bottom);s+=o?-1:1);return s2(a,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class gp extends mn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof gp&&e.side==this.side}split(){return new gp(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?da.before(this.dom):da.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return un.empty}get isHidden(){return!0}}Ls.prototype.children=$f.prototype.children=gp.prototype.children=oD;function rJ(r,e){let t=r.dom,{children:n}=r,i=0;for(let a=0;i<n.length;i++){let o=n[i],s=a+o.length;if(!(s==a&&o.getSide()<=0)){if(e>a&&e<s&&o.dom.parentNode==t)return o.domAtPos(e-a);if(e<=a)break;a=s}}for(let a=i;a>0;a--){let o=n[a-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let a=i;a<n.length;a++){let o=n[a];if(o.dom.parentNode==t)return o.domAtPos(0)}return new da(t,0)}function nJ(r,e,t){let n,{children:i}=r;t>0&&e instanceof Ru&&i.length&&(n=i[i.length-1])instanceof Ru&&n.mark.eq(e.mark)?nJ(n,e.children[0],t-1):(i.push(e),e.setParent(r)),r.length+=e.length}function iJ(r,e,t){let n=null,i=-1,a=null,o=-1;function s(u,f){for(let c=0,h=0;c<u.children.length&&h<=f;c++){let d=u.children[c],v=h+d.length;v>=f&&(d.children.length?s(d,f-h):(!a||a.isHidden&&t>0)&&(v>f||h==v&&d.getSide()>0)?(a=d,o=f-h):(h<f||h==v&&d.getSide()<0&&!d.isHidden)&&(n=d,i=f-h)),h=v}}s(r,e);let l=(t<0?n:a)||n||a;return l?l.coordsAt(Math.max(0,l==n?i:o),t):xKe(r)}function xKe(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=pp(e);return t[t.length-1]||null}function GO(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const bz=Object.create(null);function sD(r,e,t){if(r==e)return!0;r||(r=bz),e||(e=bz);let n=Object.keys(r),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let a of n)if(a!=t&&(i.indexOf(a)==-1||r[a]!==e[a]))return!1;return!0}function jO(r,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?r.style.cssText="":r.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?r.style.cssText=t[i]:r.setAttribute(i,t[i]));return n}function wKe(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}class Ei extends mn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,a,o){if(n){if(!(n instanceof Ei))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),JQ(this,e,t,n?n.children.slice():[],a,o),!0}split(e){let t=new Ei;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)t.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){sD(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){nJ(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=GO(t,this.attrs||{})),n&&(this.attrs=GO({class:n},this.attrs||{}))}domAtPos(e){return rJ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(XQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(jO(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&mn.get(i)instanceof Ru;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=mn.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!zt.ios||!this.children.some(a=>a instanceof Ls))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Ls)||/[^ -~]/.test(n.text))return null;let i=pp(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=iJ(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let o=(a-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let a=e.children[n],o=i+a.length;if(o>=t){if(a instanceof Ei)return a;if(o>t)break}i=o+a.breakAfter}return null}}class Hf extends mn{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,a,o){return n&&(!(n instanceof Hf)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?da.before(this.dom):da.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Hf(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return oD}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):un.empty}domBoundsAround(){return null}become(e){return e instanceof Hf&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class qu{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Oa=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Oa||(Oa={}));class sr extends Qh{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new my(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new lc(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:a,end:o}=aJ(e,t);n=(a?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new lc(e,n,i,t,e.widget||null,!0)}static line(e){return new yy(e)}static set(e,t=!1){return an.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}sr.none=an.empty;class my extends sr{constructor(e){let{start:t,end:n}=aJ(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof my&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&sD(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}my.prototype.point=!1;class yy extends sr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof yy&&this.spec.class==e.spec.class&&sD(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}yy.prototype.mapMode=Ta.TrackBefore;yy.prototype.point=!0;class lc extends sr{constructor(e,t,n,i,a,o){super(t,n,a,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Ta.TrackBefore:Ta.TrackAfter:Ta.TrackDel}get type(){return this.startSide!=this.endSide?Oa.WidgetRange:this.startSide<=0?Oa.WidgetBefore:Oa.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof lc&&EKe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}lc.prototype.point=!0;function aJ(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t??e,end:n??e}}function EKe(r,e){return r==e||!!(r&&e&&r.compare(e))}function UO(r,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=r?t[i]=Math.max(t[i],e):t.push(r,e)}class _0{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Hf&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ei),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Eb(new gp(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Hf)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Eb(new Ls(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,a,o){if(this.disallowBlockEffectsFor[o]&&n instanceof lc){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof lc)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Hf(n.widget||mp.block,s,n));else{let l=$f.create(n.widget||mp.inline,s,s?0:n.startSide),u=this.atCursorPos&&!l.isEditable&&a<=i.length&&(e<t||n.startSide>0),f=!l.isEditable&&(e<t||a>i.length||n.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(Eb(new gp(1),i),a),a=i.length+Math.max(0,a-i.length)),c.append(Eb(l,i),a),this.atCursorPos=f,this.pendingBuffer=f?e<t||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,i,a){let o=new _0(e,t,n,a);return o.openEnd=an.spans(i,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Eb(r,e){for(let t of e)r=new Ru(t,[r],r.length);return r}class mp extends qu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}mp.inline=new mp("span");mp.block=new mp("div");var In=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(In||(In={}));const td=In.LTR,lD=In.RTL;function oJ(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const _Ke=oJ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),SKe=oJ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),WO=Object.create(null),el=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);WO[e]=t,WO[t]=-e}function sJ(r){return r<=247?_Ke[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?SKe[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const MKe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class zf{get dir(){return this.level%2?lD:td}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let a=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(a<0||(i!=0?i<0?s.from<t:s.to>t:e[a].level>s.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}function lJ(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!lJ(n.inner,i.inner))return!1}return!0}const gn=[];function CKe(r,e,t,n,i){for(let a=0;a<=n.length;a++){let o=a?n[a-1].to:e,s=a<n.length?n[a].from:t,l=a?256:i;for(let u=o,f=l,c=l;u<s;u++){let h=sJ(r.charCodeAt(u));h==512?h=f:h==8&&c==4&&(h=16),gn[u]=h==4?2:h,h&7&&(c=h),f=h}for(let u=o,f=l,c=l;u<s;u++){let h=gn[u];if(h==128)u<s-1&&f==gn[u+1]&&f&24?h=gn[u]=f:gn[u]=256;else if(h==64){let d=u+1;for(;d<s&&gn[d]==64;)d++;let v=u&&f==8||d<t&&gn[d]==8?c==1?1:8:256;for(let p=u;p<d;p++)gn[p]=v;u=d-1}else h==8&&c==1&&(gn[u]=1);f=h,h&7&&(c=h)}}}function AKe(r,e,t,n,i){let a=i==1?2:1;for(let o=0,s=0,l=0;o<=n.length;o++){let u=o?n[o-1].to:e,f=o<n.length?n[o].from:t;for(let c=u,h,d,v;c<f;c++)if(d=WO[h=r.charCodeAt(c)])if(d<0){for(let p=s-3;p>=0;p-=3)if(el[p+1]==-d){let g=el[p+2],m=g&2?i:g&4?g&1?a:i:0;m&&(gn[c]=gn[el[p]]=m),s=p;break}}else{if(el.length==189)break;el[s++]=c,el[s++]=h,el[s++]=l}else if((v=gn[c])==2||v==1){let p=v==i;l=p?0:1;for(let g=s-3;g>=0;g-=3){let m=el[g+2];if(m&2)break;if(p)el[g+2]|=2;else{if(m&4)break;el[g+2]|=4}}}}}function TKe(r,e,t,n){for(let i=0,a=n;i<=t.length;i++){let o=i?t[i-1].to:r,s=i<t.length?t[i].from:e;for(let l=o;l<s;){let u=gn[l];if(u==256){let f=l+1;for(;;)if(f==s){if(i==t.length)break;f=t[i++].to,s=i<t.length?t[i].from:e}else if(gn[f]==256)f++;else break;let c=a==1,h=(f<e?gn[f]:n)==1,d=c==h?c?1:2:n;for(let v=f,p=i,g=p?t[p-1].to:r;v>l;)v==g&&(v=t[--p].from,g=p?t[p-1].to:r),gn[--v]=d;l=f}else a=u,l++}}}function VO(r,e,t,n,i,a,o){let s=n%2?2:1;if(n%2==i%2)for(let l=e,u=0;l<t;){let f=!0,c=!1;if(u==a.length||l<a[u].from){let p=gn[l];p!=s&&(f=!1,c=p==16)}let h=!f&&s==1?[]:null,d=f?n:n+1,v=l;e:for(;;)if(u<a.length&&v==a[u].from){if(c)break e;let p=a[u];if(!f)for(let g=p.to,m=u+1;;){if(g==t)break e;if(m<a.length&&a[m].from==g)g=a[m++].to;else{if(gn[g]==s)break e;break}}if(u++,h)h.push(p);else{p.from>l&&o.push(new zf(l,p.from,d));let g=p.direction==td!=!(d%2);HO(r,g?n+1:n,i,p.inner,p.from,p.to,o),l=p.to}v=p.to}else{if(v==t||(f?gn[v]!=s:gn[v]==s))break;v++}h?VO(r,l,v,n+1,i,h,o):l<v&&o.push(new zf(l,v,d)),l=v}else for(let l=t,u=a.length;l>e;){let f=!0,c=!1;if(!u||l>a[u-1].to){let p=gn[l-1];p!=s&&(f=!1,c=p==16)}let h=!f&&s==1?[]:null,d=f?n:n+1,v=l;e:for(;;)if(u&&v==a[u-1].to){if(c)break e;let p=a[--u];if(!f)for(let g=p.from,m=u;;){if(g==e)break e;if(m&&a[m-1].to==g)g=a[--m].from;else{if(gn[g-1]==s)break e;break}}if(h)h.push(p);else{p.to<l&&o.push(new zf(p.to,l,d));let g=p.direction==td!=!(d%2);HO(r,g?n+1:n,i,p.inner,p.from,p.to,o),l=p.from}v=p.from}else{if(v==e||(f?gn[v-1]!=s:gn[v-1]==s))break;v--}h?VO(r,v,l,n+1,i,h,o):v<l&&o.push(new zf(v,l,d)),l=v}}function HO(r,e,t,n,i,a,o){let s=e%2?2:1;CKe(r,i,a,n,s),AKe(r,i,a,n,s),TKe(i,a,n,s),VO(r,i,a,e,t,n,o)}function OKe(r,e,t){if(!r)return[new zf(0,0,e==lD?1:0)];if(e==td&&!t.length&&!MKe.test(r))return uJ(r.length);if(t.length)for(;r.length>gn.length;)gn[gn.length]=256;let n=[],i=e==td?0:1;return HO(r,i,i,t,0,r.length,n),n}function uJ(r){return[new zf(0,r,0)]}let fJ="";function kKe(r,e,t,n,i){var a;let o=n.head-r.from,s=zf.find(e,o,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),l=e[s],u=l.side(i,t);if(o==u){let h=s+=i?1:-1;if(h<0||h>=e.length)return null;l=e[s=h],o=l.side(!i,t),u=l.side(i,t)}let f=ra(r.text,o,l.forward(i,t));(f<l.from||f>l.to)&&(f=u),fJ=r.text.slice(Math.min(o,f),Math.max(o,f));let c=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return c&&f==u&&c.level+(i?0:1)<l.level?at.cursor(c.side(!i,t)+r.from,c.forward(i,t)?1:-1,c.level):at.cursor(f+r.from,l.forward(i,t)?-1:1,l.level)}function IKe(r,e,t){for(let n=e;n<t;n++){let i=sJ(r.charCodeAt(n));if(i==1)return td;if(i==2||i==4)return lD}return td}const cJ=Gt.define(),hJ=Gt.define(),dJ=Gt.define(),vJ=Gt.define(),XO=Gt.define(),pJ=Gt.define(),gJ=Gt.define(),mJ=Gt.define({combine:r=>r.some(e=>e)}),yJ=Gt.define({combine:r=>r.some(e=>e)}),bJ=Gt.define();class kv{constructor(e,t="nearest",n="nearest",i=5,a=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=a,this.isSnapshot=o}map(e){return e.empty?this:new kv(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new kv(at.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const _b=Rr.define({map:(r,e)=>r.map(e)});function Wa(r,e,t){let n=r.facet(vJ);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const u2=Gt.define({combine:r=>r.length?r[0]:!0});let LKe=0;const Ug=Gt.define();class si{constructor(e,t,n,i,a){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=a(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:a,decorations:o}=t||{};return new si(LKe++,e,n,i,s=>{let l=[Ug.of(s)];return o&&l.push(pm.of(u=>{let f=u.plugin(s);return f?o(f):sr.none})),a&&l.push(a(s)),l})}static fromClass(e,t){return si.define(n=>new e(n),t)}}class OC{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Wa(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Wa(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Wa(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xJ=Gt.define(),uD=Gt.define(),pm=Gt.define(),wJ=Gt.define(),fD=Gt.define(),EJ=Gt.define();function xz(r,e){let t=r.state.facet(EJ);if(!t.length)return t;let n=t.map(a=>a instanceof Function?a(r):a),i=[];return an.spans(n,e.from,e.to,{point(){},span(a,o,s,l){let u=a-e.from,f=o-e.from,c=i;for(let h=s.length-1;h>=0;h--,l--){let d=s[h].spec.bidiIsolate,v;if(d==null&&(d=IKe(e.text,u,f)),l>0&&c.length&&(v=c[c.length-1]).to==u&&v.direction==d)v.to=f,c=v.inner;else{let p={from:u,to:f,direction:d,inner:[]};c.push(p),c=p.inner}}}}),i}const _J=Gt.define();function SJ(r){let e=0,t=0,n=0,i=0;for(let a of r.state.facet(_J)){let o=a(r);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:n,bottom:i}}const Wg=Gt.define();class Qo{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new Qo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,a=0,o=0,s=0;;i++){let l=i==e.length?null:e[i],u=o-s,f=l?l.fromB:1e9;for(;a<t.length&&t[a]<f;){let c=t[a],h=t[a+1],d=Math.max(s,c),v=Math.min(f,h);if(d<=v&&new Qo(d+u,v+u,d,v).addToSet(n),h>f)break;a+=2}if(!l)return n;new Qo(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,s=l.toB}}}class nE{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Si.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,o,s,l)=>i.push(new Qo(a,o,s,l))),this.changedRanges=i}static create(e,t,n){return new nE(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class wz extends mn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ei],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Qo(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:f})=>f<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!$Ke(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?DKe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:f}=this.hasComposition;n=new Qo(u,f,e.changes.mapPos(u,-1),e.changes.mapPos(f,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(zt.ie||zt.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,s=this.updateDeco(),l=BKe(o,s,e.changes);return n=Qo.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=zt.chrome||zt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Hf&&o.widget instanceof Ez&&a.push(o.dom);i.updateGaps(a)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let o=i.length-1;;o--){let s=o>=0?i[o]:null;if(!s)break;let{fromA:l,toA:u,fromB:f,toB:c}=s,h,d,v,p;if(n&&n.range.fromB<c&&n.range.toB>f){let x=_0.build(this.view.state.doc,f,n.range.fromB,this.decorations,this.dynamicDecorationMap),w=_0.build(this.view.state.doc,n.range.toB,c,this.decorations,this.dynamicDecorationMap);d=x.breakAtStart,v=x.openStart,p=w.openEnd;let E=this.compositionView(n);w.breakAtStart?E.breakAfter=1:w.content.length&&E.merge(E.length,E.length,w.content[0],!1,w.openStart,0)&&(E.breakAfter=w.content[0].breakAfter,w.content.shift()),x.content.length&&E.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),h=x.content.concat(E).concat(w.content)}else({content:h,breakAtStart:d,openStart:v,openEnd:p}=_0.build(this.view.state.doc,f,c,this.decorations,this.dynamicDecorationMap));let{i:g,off:m}=a.findPos(u,1),{i:b,off:y}=a.findPos(l,-1);QQ(this,b,y,g,m,h,d,v,p)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new Ls(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Ru(i,[t],t.length);let n=new Ei;return n.append(t,0),n}fixCompositionDOM(e){let t=(a,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let s=mn.get(a);s&&s!=o&&(s.dom=null),o.setDOM(a)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)n=i.childPos(n.off,1),i=i.children[n.i],t(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,a=!i&&Ax(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||a))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),u=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(zt.gecko&&s.empty&&!this.hasComposition&&PKe(l)){let c=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(c,l.node.childNodes[l.offset]||null)),l=u=new da(c,0),o=!0}let f=this.view.observer.selectionRange;(o||!f.focusNode||(!E0(l.node,l.offset,f.anchorNode,f.anchorOffset)||!E0(u.node,u.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,s))&&(this.view.observer.ignore(()=>{zt.android&&zt.chrome&&this.dom.contains(f.focusNode)&&FKe(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=tE(this.view.root);if(c)if(s.empty){if(zt.gecko){let h=NKe(l.node,l.offset);if(h&&h!=3){let d=(h==1?KQ:qQ)(l.node,l.offset);d&&(l=new da(d.node,d.offset))}}c.collapse(l.node,l.offset),s.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=s.bidiLevel)}else if(c.extend){c.collapse(l.node,l.offset);try{c.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new da(f.anchorNode,f.anchorOffset),this.impreciseHead=u.precise?null:new da(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&E0(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=tE(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=Ei.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let f=this.domAtPos(t.head+t.assoc);n.collapse(f.node,f.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&n.collapse(i,a)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let a=mn.get(t.childNodes[i]);a instanceof Ei&&(n=a.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let a=mn.get(t.childNodes[i]);a instanceof Ei&&(n=a.domAtPos(a.length))}return n?new da(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=mn.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof Ei)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let a=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],l=a-s.breakAfter,u=l-s.length;if(l<e)break;u<=e&&(u<e||s.covers(-1))&&(l>e||s.covers(1))&&(!n||s instanceof Ei&&!(n instanceof Ei&&t>=0))&&(n=s,i=u),a=u}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Ei))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(n,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}n=l}if(!(i instanceof Ls))return null;let a=ra(i.text,n);if(a==n)return null;let o=ed(i.dom,n,a).getClientRects();for(let s=0;s<o.length;s++){let l=o[s];if(s==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==In.LTR;for(let u=0,f=0;f<this.children.length;f++){let c=this.children[f],h=u+c.length;if(h>i)break;if(u>=n){let d=c.dom.getBoundingClientRect();if(t.push(d.height),o){let v=c.dom.lastChild,p=v?pp(v):[];if(p.length){let g=p[p.length-1],m=l?g.right-d.left:d.right-g.left;m>s&&(s=m,this.minWidth=a,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?In.RTL:In.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Ei){let o=a.measureTextSize();if(o)return o}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=pp(e.firstChild)[0];t=e.getBoundingClientRect().height,n=a?a.width/27:7,i=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ZQ(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let a=i==t.viewports.length?null:t.viewports[i],o=a?a.from-1:this.length;if(o>n){let s=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(sr.replace({widget:new Ez(s),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!a)break;n=a.to+1}return sr.set(e)}updateDeco(){let e=0,t=this.view.state.facet(pm).map(a=>(this.dynamicDecorationMap[e++]=typeof a=="function")?a(this.view):a),n=!1,i=this.view.state.facet(wJ).map((a,o)=>{let s=typeof a=="function";return s&&(n=!0),s?a(this.view):a});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(an.join(i))),this.decorations=[...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(bJ))try{if(u(this.view,e.range,e))return!0}catch(f){Wa(this.view.state,f,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let a=SJ(this.view),o={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;dKe(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==In.LTR)}}function PKe(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class Ez extends qu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function MJ(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let n=KQ(t.focusNode,t.focusOffset),i=qQ(t.focusNode,t.focusOffset),a=n||i;if(i&&n&&i.node!=n.node){let s=mn.get(i.node);if(!s||s instanceof Ls&&s.text!=i.node.nodeValue)a=i;else if(r.docView.lastCompositionAfterCursor){let l=mn.get(n.node);!l||l instanceof Ls&&l.text!=n.node.nodeValue||(a=i)}}if(r.docView.lastCompositionAfterCursor=a!=n,!a)return null;let o=e-a.offset;return{from:o,to:o+a.node.nodeValue.length,node:a.node}}function DKe(r,e,t){let n=MJ(r,t);if(!n)return null;let{node:i,from:a,to:o}=n,s=i.nodeValue;if(/[\n\r]/.test(s)||r.state.doc.sliceString(n.from,n.to)!=s)return null;let l=e.invertedDesc,u=new Qo(l.mapPos(a),l.mapPos(o),a,o),f=[];for(let c=i.parentNode;;c=c.parentNode){let h=mn.get(c);if(h instanceof Ru)f.push({node:c,deco:h.mark});else{if(h instanceof Ei||c.nodeName=="DIV"&&c.parentNode==r.contentDOM)return{range:u,text:i,marks:f,line:c};if(c!=r.contentDOM)f.push({node:c,deco:new my({inclusive:!0,attributes:wKe(c),tagName:c.tagName.toLowerCase()})});else return null}}}function NKe(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let RKe=class{constructor(){this.changes=[]}compareRange(e,t){UO(e,t,this.changes)}comparePoint(e,t){UO(e,t,this.changes)}};function BKe(r,e,t){let n=new RKe;return an.compare(r,e,t,n),n.changes}function FKe(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function $Ke(r,e){let t=!1;return e&&r.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function zKe(r,e,t=1){let n=r.charCategorizer(e),i=r.doc.lineAt(e),a=e-i.from;if(i.length==0)return at.cursor(e);a==0?t=1:a==i.length&&(t=-1);let o=a,s=a;t<0?o=ra(i.text,a,!1):s=ra(i.text,a);let l=n(i.text.slice(o,s));for(;o>0;){let u=ra(i.text,o,!1);if(n(i.text.slice(u,o))!=l)break;o=u}for(;s<i.length;){let u=ra(i.text,s);if(n(i.text.slice(s,u))!=l)break;s=u}return at.range(o+i.from,s+i.from)}function GKe(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function jKe(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function kC(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function _z(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function Sz(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function YO(r,e,t){let n,i,a,o,s=!1,l,u,f,c;for(let v=r.firstChild;v;v=v.nextSibling){let p=pp(v);for(let g=0;g<p.length;g++){let m=p[g];i&&kC(i,m)&&(m=_z(Sz(m,i.bottom),i.top));let b=GKe(e,m),y=jKe(t,m);if(b==0&&y==0)return v.nodeType==3?Mz(v,e,t):YO(v,e,t);if(!n||o>y||o==y&&a>b){n=v,i=m,a=b,o=y;let x=y?t<m.top?-1:1:b?e<m.left?-1:1:0;s=!x||(x>0?g<p.length-1:g>0)}b==0?t>m.bottom&&(!f||f.bottom<m.bottom)?(l=v,f=m):t<m.top&&(!c||c.top>m.top)&&(u=v,c=m):f&&kC(f,m)?f=Sz(f,m.bottom):c&&kC(c,m)&&(c=_z(c,m.top))}}if(f&&f.bottom>=t?(n=l,i=f):c&&c.top<=t&&(n=u,i=c),!n)return{node:r,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return Mz(n,h,t);if(s&&n.contentEditable!="false")return YO(n,h,t);let d=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:r,offset:d}}function Mz(r,e,t){let n=r.nodeValue.length,i=-1,a=1e9,o=0;for(let s=0;s<n;s++){let l=ed(r,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let f=l[u];if(f.top==f.bottom)continue;o||(o=e-f.left);let c=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&c<a){let h=e>=(f.left+f.right)/2,d=h;if((zt.chrome||zt.gecko)&&ed(r,s).getBoundingClientRect().left==f.right&&(d=!h),c<=0)return{node:r,offset:s+(d?1:0)};i=s+(d?1:0),a=c}}}return{node:r,offset:i>-1?i:o>0?r.nodeValue.length:0}}function CJ(r,e,t,n=-1){var i,a;let o=r.contentDOM.getBoundingClientRect(),s=o.top+r.viewState.paddingTop,l,{docHeight:u}=r.viewState,{x:f,y:c}=e,h=c-s;if(h<0)return 0;if(h>u)return r.state.doc.length;for(let x=r.viewState.heightOracle.textHeight/2,w=!1;l=r.elementAtHeight(h),l.type!=Oa.Text;)for(;h=n>0?l.bottom+x:l.top-x,!(h>=0&&h<=u);){if(w)return t?null:0;w=!0,n=-n}c=s+h;let d=l.from;if(d<r.viewport.from)return r.viewport.from==0?0:t?null:Cz(r,o,l,f,c);if(d>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:Cz(r,o,l,f,c);let v=r.dom.ownerDocument,p=r.root.elementFromPoint?r.root:v,g=p.elementFromPoint(f,c);g&&!r.contentDOM.contains(g)&&(g=null),g||(f=Math.max(o.left+1,Math.min(o.right-1,f)),g=p.elementFromPoint(f,c),g&&!r.contentDOM.contains(g)&&(g=null));let m,b=-1;if(g&&((i=r.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(v.caretPositionFromPoint){let x=v.caretPositionFromPoint(f,c);x&&({offsetNode:m,offset:b}=x)}else if(v.caretRangeFromPoint){let x=v.caretRangeFromPoint(f,c);x&&({startContainer:m,startOffset:b}=x,(!r.contentDOM.contains(m)||zt.safari&&UKe(m,b,f)||zt.chrome&&WKe(m,b,f))&&(m=void 0))}}if(!m||!r.docView.dom.contains(m)){let x=Ei.find(r.docView,d);if(!x)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:b}=YO(x.dom,f,c))}let y=r.docView.nearest(m);if(!y)return null;if(y.isWidget&&((a=y.dom)===null||a===void 0?void 0:a.nodeType)==1){let x=y.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(m,b)+y.posAtStart}function Cz(r,e,t,n,i){let a=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let s=r.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(r.defaultLineHeight-s)*.5)/s);a+=l*r.viewState.heightOracle.lineLength}let o=r.state.sliceDoc(t.from,t.to);return t.from+DO(o,a,r.state.tabSize)}function UKe(r,e,t){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let i=r.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ed(r,n-1,n).getBoundingClientRect().left>t}function WKe(r,e,t){if(e!=0)return!1;for(let i=r;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let n=r.nodeType==1?r.getBoundingClientRect():ed(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function KO(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Oa.Text))return n}return t}function VKe(r,e,t,n){let i=KO(r,e.head),a=!n||i.type!=Oa.Text||!(r.lineWrapping||i.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let o=r.dom.getBoundingClientRect(),s=r.textDirectionAt(i.from),l=r.posAtCoords({x:t==(s==In.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(l!=null)return at.cursor(l,t?-1:1)}return at.cursor(t?i.to:i.from,t?-1:1)}function Az(r,e,t,n){let i=r.state.doc.lineAt(e.head),a=r.bidiSpans(i),o=r.textDirectionAt(i.from);for(let s=e,l=null;;){let u=kKe(i,a,o,s,t),f=fJ;if(!u){if(i.number==(t?r.state.doc.lines:1))return s;f=`
`,i=r.state.doc.line(i.number+(t?1:-1)),a=r.bidiSpans(i),u=r.visualLineSide(i,!t)}if(l){if(!l(f))return s}else{if(!n)return u;l=n(f)}s=u}}function HKe(r,e,t){let n=r.state.charCategorizer(e),i=n(t);return a=>{let o=n(a);return i==Bn.Space&&(i=o),i==o}}function XKe(r,e,t,n){let i=e.head,a=t?1:-1;if(i==(t?r.state.doc.length:0))return at.cursor(i,e.assoc);let o=e.goalColumn,s,l=r.contentDOM.getBoundingClientRect(),u=r.coordsAtPos(i,e.assoc||-1),f=r.documentTop;if(u)o==null&&(o=u.left-l.left),s=a<0?u.top:u.bottom;else{let d=r.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,r.defaultCharacterWidth*(i-d.from))),s=(a<0?d.top:d.bottom)+f}let c=l.left+o,h=n??r.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let v=s+(h+d)*a,p=CJ(r,{x:c,y:v},!1,a);if(v<l.top||v>l.bottom||(a<0?p<i:p>i)){let g=r.docView.coordsForChar(p),m=!g||v<g.top?-1:1;return at.cursor(p,m,void 0,o)}}}function Tx(r,e,t){for(;;){let n=0;for(let i of r)i.between(e-1,e+1,(a,o,s)=>{if(e>a&&e<o){let l=n||t||(e-a<o-e?-1:1);e=l<0?a:o,n=l}});if(!n)return e}}function IC(r,e,t){let n=Tx(r.state.facet(fD).map(i=>i(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:at.cursor(n,n<t.from?1:-1)}class YKe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,zt.safari&&e.contentDOM.addEventListener("input",()=>null),zt.gecko&&fqe(e.contentDOM.ownerDocument)}handleEvent(e){!rqe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=KKe(e),n=this.handlers,i=this.view.contentDOM;for(let a in t)if(a!="scroll"){let o=!t[a].handlers.length,s=n[a];s&&o!=!s.handlers.length&&(i.removeEventListener(a,this.handleEvent),s=null),s||i.addEventListener(a,this.handleEvent,{passive:o})}for(let a in n)a!="scroll"&&!t[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&TJ.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),zt.android&&zt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return zt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=AJ.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||qKe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ov(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:zt.safari&&!zt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Tz(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(i){Wa(t.state,i)}}}function KKe(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let i=n.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let o=i.domEventHandlers[a];o&&t(a).handlers.push(Tz(n.value,o))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let o=i.domEventObservers[a];o&&t(a).observers.push(Tz(n.value,o))}}for(let n in Ps)t(n).handlers.push(Ps[n]);for(let n in is)t(n).observers.push(is[n]);return e}const AJ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qKe="dthko",TJ=[16,17,18,20,91,92,224,225],Sb=6;function Mb(r){return Math.max(0,r)*.7+8}function ZKe(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class QKe{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=vKe(e.contentDOM),this.atoms=e.state.facet(fD).map(o=>o(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Jr.allowMultipleSelections)&&JKe(e,t),this.dragging=tqe(e,t)&&LJ(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ZKe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=SJ(this.view);e.clientX-o.left<=a.left+Sb?n=-Mb(a.left-e.clientX):e.clientX+o.right>=a.right-Sb&&(n=Mb(e.clientX-a.right)),e.clientY-o.top<=a.top+Sb?i=-Mb(a.top-e.clientY):e.clientY+o.bottom>=a.bottom-Sb&&(i=Mb(e.clientY-a.bottom)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],a=null;if(i.empty){let o=Tx(this.atoms,i.from,0);o!=i.from&&(a=at.cursor(o,-1))}else{let o=Tx(this.atoms,i.from,-1),s=Tx(this.atoms,i.to,1);(o!=i.from||s!=i.to)&&(a=at.range(i.from==i.anchor?o:s,i.from==i.head?o:s))}a&&(t||(t=e.ranges.slice()),t[n]=a)}return t?at.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function JKe(r,e){let t=r.state.facet(cJ);return t.length?t[0](e):zt.mac?e.metaKey:e.ctrlKey}function eqe(r,e){let t=r.state.facet(hJ);return t.length?t[0](e):zt.mac?!e.altKey:!e.ctrlKey}function tqe(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=tE(r.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let o=i[a];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function rqe(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=mn.get(t))&&n.ignoreEvent(e))return!1;return!0}const Ps=Object.create(null),is=Object.create(null),OJ=zt.ie&&zt.ie_version<15||zt.ios&&zt.webkit_version<604;function nqe(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),kJ(r,t.value)},50)}function kJ(r,e){let{state:t}=r,n,i=1,a=t.toText(e),o=a.lines==t.selection.ranges.length;if(qO!=null&&t.selection.ranges.every(l=>l.empty)&&qO==a.toString()){let l=-1;n=t.changeByRange(u=>{let f=t.doc.lineAt(u.from);if(f.from==l)return{range:u};l=f.from;let c=t.toText((o?a.line(i++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:c},range:at.cursor(u.from+c.length)}})}else o?n=t.changeByRange(l=>{let u=a.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:at.cursor(l.from+u.length)}}):n=t.replaceSelection(a);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}is.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};Ps.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&(r.inputState.lastEscPress=Date.now()),!1);is.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};is.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};Ps.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(dJ))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=oqe(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new QKe(r,e,t,n)),n&&r.observer.ignore(()=>HQ(r.contentDOM));let i=r.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function Oz(r,e,t,n){if(n==1)return at.cursor(e,t);if(n==2)return zKe(r.state,e,t);{let i=Ei.find(r.docView,e),a=r.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:a.from,s=i?i.posAtEnd:a.to;return s<r.state.doc.length&&s==a.to&&s++,at.range(o,s)}}let IJ=(r,e)=>r>=e.top&&r<=e.bottom,kz=(r,e,t)=>IJ(e,t)&&r>=t.left&&r<=t.right;function iqe(r,e,t,n){let i=Ei.find(r.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let o=i.coordsAt(a,-1);if(o&&kz(t,n,o))return-1;let s=i.coordsAt(a,1);return s&&kz(t,n,s)?1:o&&IJ(n,o)?-1:1}function Iz(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:iqe(r,t,e.clientX,e.clientY)}}const aqe=zt.ie&&zt.ie_version<=11;let Lz=null,Pz=0,Dz=0;function LJ(r){if(!aqe)return r.detail;let e=Lz,t=Dz;return Lz=r,Dz=Date.now(),Pz=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(Pz+1)%3:1}function oqe(r,e){let t=Iz(r,e),n=LJ(e),i=r.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),i=i.map(a.changes))},get(a,o,s){let l=Iz(r,a),u,f=Oz(r,l.pos,l.bias,n);if(t.pos!=l.pos&&!o){let c=Oz(r,t.pos,t.bias,n),h=Math.min(c.from,f.from),d=Math.max(c.to,f.to);f=h<f.from?at.range(h,d):at.range(d,h)}return o?i.replaceRange(i.main.extend(f.from,f.to)):s&&n==1&&i.ranges.length>1&&(u=sqe(i,l.pos))?u:s?i.addRange(f):at.create([f])}}}function sqe(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:i}=r.ranges[t];if(n<=e&&i>=e)return at.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}Ps.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let i=r.docView.nearest(e.target);if(i&&i.isWidget){let a=i.posAtStart,o=a+i.length;(a>=t.to||o<=t.from)&&(t=at.range(a,o))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Ps.dragend=r=>(r.inputState.draggedContent=null,!1);function Nz(r,e,t,n){if(!t)return;let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=r.inputState,o=n&&a&&eqe(r,e)?{from:a.from,to:a.to}:null,s={from:i,insert:t},l=r.state.changes(o?[o,s]:s);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),r.inputState.draggedContent=null}Ps.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,a=()=>{++i==t.length&&Nz(r,e,n.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let s=new FileReader;s.onerror=a,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(n[o]=s.result),a()},s.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return Nz(r,e,n,!0),!0}return!1};Ps.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=OJ?null:e.clipboardData;return t?(kJ(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(nqe(r),!1)};function lqe(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function uqe(r){let e=[],t=[],n=!1;for(let i of r.selection.ranges)i.empty||(e.push(r.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:a}of r.selection.ranges){let o=r.doc.lineAt(a);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),i=o.number}n=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:n}}let qO=null;Ps.copy=Ps.cut=(r,e)=>{let{text:t,ranges:n,linewise:i}=uqe(r.state);if(!t&&!i)return!1;qO=i?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=OJ?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",t),!0):(lqe(r,t),!1)};const PJ=Ku.define();function DJ(r,e){let t=[];for(let n of r.facet(gJ)){let i=n(r,e);i&&t.push(i)}return t?r.update({effects:t,annotations:PJ.of(!0)}):null}function NJ(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=DJ(r.state,e);t?r.dispatch(t):r.update([])}},10)}is.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),NJ(r)};is.blur=r=>{r.observer.clearSelectionRange(),NJ(r)};is.compositionstart=is.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0)};is.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,zt.chrome&&zt.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50)};is.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};Ps.beforeinput=(r,e)=>{var t;let n;if(zt.chrome&&zt.android&&(n=AJ.find(i=>i.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return zt.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),zt.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>is.compositionend(r,e),20),!1};const Rz=new Set;function fqe(r){Rz.has(r)||(Rz.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const Bz=["pre-wrap","normal","pre-line","break-spaces"];class cqe{constructor(e){this.lineWrapping=e,this.doc=un.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Bz.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,a,o){let s=Bz.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=a,l){this.heightSamples={};for(let u=0;u<o.length;u++){let f=o[u];f<0?u++:this.heightSamples[Math.floor(f*10)]=!0}}return l}}class hqe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class dl{constructor(e,t,n,i,a){this.from=e,this.length=t,this.top=n,this.height=i,this._content=a}get type(){return typeof this._content=="number"?Oa.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof lc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new dl(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var On=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(On||(On={}));const Ox=.001;class ka{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Ox&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return ka.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let a=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:f,toB:c}=i[s],h=a.lineAt(l,On.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=u?h:a.lineAt(u,On.ByPosNoHeight,n,0,0);for(c+=d.to-u,u=d.to;s>0&&h.from<=i[s-1].toA;)l=i[s-1].fromA,f=i[s-1].fromB,s--,l<h.from&&(h=a.lineAt(l,On.ByPosNoHeight,n,0,0));f+=h.from-l,l=h.from;let v=cD.build(n.setDoc(o),e,f,c);a=a.replace(l,u,v)}return a.updateHeight(n,0)}static empty(){return new vo(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,a=0;for(;;)if(t==n)if(i>a*2){let s=e[t-1];s.break?e.splice(--t,1,s.left,null,s.right):e.splice(--t,1,s.left,s.right),n+=1+s.break,i-=s.size}else if(a>i*2){let s=e[n];s.break?e.splice(n,1,s.left,null,s.right):e.splice(n,1,s.left,s.right),n+=2+s.break,a-=s.size}else break;else if(i<a){let s=e[t++];s&&(i+=s.size)}else{let s=e[--n];s&&(a+=s.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new dqe(ka.of(e.slice(0,t)),o,ka.of(e.slice(n)))}}ka.prototype.size=1;class RJ extends ka{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new dl(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,a){return this.blockAt(0,n,i,a)}forEachLine(e,t,n,i,a,o){e<=a+this.length&&t>=a&&o(this.blockAt(0,n,i,a))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class vo extends RJ{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new dl(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof vo||i instanceof Zi&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Zi?i=new vo(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):ka.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Zi extends ka{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,a=i-n+1,o,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*a);o=l/a,this.length>a+1&&(s=(this.height-l)/(this.length-a-1))}else o=this.height/a;return{firstLine:n,lastLine:i,perLine:o,perChar:s}}blockAt(e,t,n,i){let{firstLine:a,lastLine:o,perLine:s,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),f=t.doc.lineAt(u),c=s+f.length*l,h=Math.max(n,e-c/2);return new dl(f.from,f.length,h,c,0)}else{let u=Math.max(0,Math.min(o-a,Math.floor((e-n)/s))),{from:f,length:c}=t.doc.line(a+u);return new dl(f,c,n+s*u,s,0)}}lineAt(e,t,n,i,a){if(t==On.ByHeight)return this.blockAt(e,n,i,a);if(t==On.ByPosNoHeight){let{from:d,to:v}=n.doc.lineAt(e);return new dl(d,v-d,0,0,0)}let{firstLine:o,perLine:s,perChar:l}=this.heightMetrics(n,a),u=n.doc.lineAt(e),f=s+u.length*l,c=u.number-o,h=i+s*c+l*(u.from-a-c);return new dl(u.from,u.length,Math.max(i,Math.min(h,i+this.height-f)),f,0)}forEachLine(e,t,n,i,a,o){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(n,a);for(let f=e,c=i;f<=t;){let h=n.doc.lineAt(f);if(f==e){let v=h.number-s;c+=l*v+u*(e-a-v)}let d=l+u*h.length;o(new dl(h.from,h.length,c,d,0)),c+=d,f=h.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let a=n[n.length-1];a instanceof Zi?n[n.length-1]=new Zi(a.length+i):n.push(null,new Zi(i-1))}if(e>0){let a=n[0];a instanceof Zi?n[0]=new Zi(e+a.length):n.unshift(new Zi(e-1),null)}return ka.of(n)}decomposeLeft(e,t){t.push(new Zi(e-1),null)}decomposeRight(e,t){t.push(null,new Zi(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let a=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],s=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new Zi(i.from-t-1).updateHeight(e,t));s<=a&&i.more;){let f=e.doc.lineAt(s).length;o.length&&o.push(null);let c=i.heights[i.index++];l==-1?l=c:Math.abs(c-l)>=Ox&&(l=-2);let h=new vo(f,c);h.outdated=!1,o.push(h),s+=f+1}s<=a&&o.push(null,new Zi(a-s).updateHeight(e,s));let u=ka.of(o);return(l<0||Math.abs(u.height-this.height)>=Ox||Math.abs(l-this.heightMetrics(e,t).perLine)>=Ox)&&(e.heightChanged=!0),u}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class dqe extends ka{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,a,i+this.left.length+this.break)}lineAt(e,t,n,i,a){let o=i+this.left.height,s=a+this.left.length+this.break,l=t==On.ByHeight?e<o:e<s,u=l?this.left.lineAt(e,t,n,i,a):this.right.lineAt(e,t,n,o,s);if(this.break||(l?u.to<s:u.from>s))return u;let f=t==On.ByPosNoHeight?On.ByPosNoHeight:On.ByPos;return l?u.join(this.right.lineAt(s,f,n,o,s)):this.left.lineAt(s,f,n,i,a).join(u)}forEachLine(e,t,n,i,a,o){let s=i+this.left.height,l=a+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,i,a,o),t>=l&&this.right.forEachLine(e,t,n,s,l,o);else{let u=this.lineAt(l,On.ByPos,n,i,a);e<u.from&&this.left.forEachLine(e,u.from-1,n,i,a,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,n,s,l,o)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let a=[];e>0&&this.decomposeLeft(e,a);let o=a.length;for(let s of n)a.push(s);if(e>0&&Fz(a,o-1),t<this.length){let s=a.length;this.decomposeRight(t,a),Fz(a,s)}return ka.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ka.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:a,right:o}=this,s=t+a.length+this.break,l=null;return i&&i.from<=t+a.length&&i.more?l=a=a.updateHeight(e,t,n,i):a.updateHeight(e,t,n),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(e,s,n,i):o.updateHeight(e,s,n),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Fz(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof Zi&&(n=r[e+1])instanceof Zi&&r.splice(e-1,3,new Zi(t.length+1+n.length))}const vqe=5;class cD{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof vo?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new vo(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new RJ(o,i,n)):(o||a||i>=vqe)&&this.addLineDeco(i,a,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new vo(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Zi(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof vo)return e;let t=new vo(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof vo)&&!this.isCovered?this.nodes.push(new vo(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof vo&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let a=new cD(n,e);return an.spans(t,n,i,a,0),a.finish(n)}}function pqe(r,e,t){let n=new gqe;return an.compare(r,e,t,n,0),n.changes}class gqe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&UO(e,t,this.changes,5)}}function mqe(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,i=n.defaultView||window,a=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),s=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=r.parentNode;u&&u!=n.body;)if(u.nodeType==1){let f=u,c=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&c.overflow!="visible"){let h=f.getBoundingClientRect();a=Math.max(a,h.left),o=Math.min(o,h.right),s=Math.max(s,h.top),l=u==r.parentNode?h.bottom:Math.min(l,h.bottom)}u=c.position=="absolute"||c.position=="fixed"?f.offsetParent:f.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:a-t.left,right:Math.max(a,o)-t.left,top:s-(t.top+e),bottom:Math.max(s,l)-(t.top+e)}}function yqe(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class LC{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],a=t[n];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,t){return sr.replace({widget:new bqe(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class bqe extends qu{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class $z{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=zz,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=In.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(uD).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new cqe(t),this.stateDeco=e.facet(pm).filter(n=>typeof n!="function"),this.heightMap=ka.empty().applyChanges(this.stateDeco,un.empty,this.heightOracle.setDoc(e.doc),[new Qo(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=sr.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:a,to:o})=>i>=a&&i<=o)){let{from:a,to:o}=this.lineBlockAt(i);e.push(new Cb(a,o))}}this.viewports=e.sort((n,i)=>n.from-i.from),this.scaler=this.heightMap.height<=7e6?zz:new Eqe(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Vg(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(pm).filter(f=>typeof f!="function");let i=e.changedRanges,a=Qo.extendWithRanges(i,pqe(n,this.stateDeco,e?e.changes:Si.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(yJ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?In.RTL:In.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),s=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,f=0;if(s.width&&s.height){let{scaleX:x,scaleY:w}=VQ(t,s);(x>.005&&Math.abs(this.scaleX-x)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=x,this.scaleY=w,u|=8,o=l=!0)}let c=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=h)&&(this.paddingTop=c,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=YQ(e.scrollDOM);let v=(this.printing?yqe:mqe)(t,this.paddingTop),p=v.top-this.pixelViewport.top,g=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=s.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let x=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(x)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:E,textHeight:_}=e.docView.measureTextSize();o=w>0&&i.refresh(a,w,E,_,b/E,x),o&&(e.docView.minWidth=0,u|=8)}p>0&&g>0?f=Math.max(p,g):p<0&&g<0&&(f=Math.min(p,g)),i.heightChanged=!1;for(let w of this.viewports){let E=w.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?ka.empty().applyChanges(this.stateDeco,un.empty,this.heightOracle,[new Qo(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new hqe(w.from,E))}i.heightChanged&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(f,this.scrollTarget)),this.updateForViewport(),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,l=new Cb(i.lineAt(o-n*1e3,On.ByHeight,a,0,0).from,i.lineAt(s+(1-n)*1e3,On.ByHeight,a,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,On.ByPos,a,0,0),h;t.y=="center"?h=(c.top+c.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&u<l.from?h=c.top:h=c.bottom-f,l=new Cb(i.lineAt(h-1e3/2,On.ByHeight,a,0,0).from,i.lineAt(h+f+1e3/2,On.ByHeight,a,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Cb(this.heightMap.lineAt(n,On.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,On.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,On.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,On.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=s+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&a<s+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new LC(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,a=i>>1,o=i<<1;if(this.defaultTextDirection!=In.LTR&&!n)return[];let s=[],l=(u,f,c,h)=>{if(f-u<a)return;let d=this.state.selection.main,v=[d.from];d.empty||v.push(d.to);for(let g of v)if(g>u&&g<f){l(u,g-10,c,h),l(g+10,f,c,h);return}let p=wqe(e,g=>g.from>=c.from&&g.to<=c.to&&Math.abs(g.from-u)<a&&Math.abs(g.to-f)<a&&!v.some(m=>g.from<m&&g.to>m));if(!p){if(f<c.to&&t&&n&&t.visibleRanges.some(g=>g.from<=f&&g.to>=f)){let g=t.moveToLineBoundary(at.cursor(f),!1,!0).head;g>u&&(f=g)}p=new LC(u,f,this.gapSize(c,u,f,h))}s.push(p)};for(let u of this.viewportLines){if(u.length<o)continue;let f=xqe(u.from,u.to,this.stateDeco);if(f.total<o)continue;let c=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(n){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,g;if(c!=null){let m=Tb(f,c),b=((this.visibleBottom-this.visibleTop)/2+v)/u.height;p=m-b,g=m+b}else p=(this.visibleTop-u.top-v)/u.height,g=(this.visibleBottom-u.top+v)/u.height;h=Ab(f,p),d=Ab(f,g)}else{let v=f.total*this.heightOracle.charWidth,p=i*this.heightOracle.charWidth,g,m;if(c!=null){let b=Tb(f,c),y=((this.pixelViewport.right-this.pixelViewport.left)/2+p)/v;g=b-y,m=b+y}else g=(this.pixelViewport.left-p)/v,m=(this.pixelViewport.right+p)/v;h=Ab(f,g),d=Ab(f,m)}h>u.from&&l(u.from,h,u,f),d<u.to&&l(d,u.to,u,f)}return s}gapSize(e,t,n,i){let a=Tb(i,n)-Tb(i,t);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){LC.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=sr.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];an.spans(e,this.viewport.from,this.viewport.to,{span(i,a){t.push({from:i,to:a})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=t[a].from||i.to!=t[a].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Vg(this.heightMap.lineAt(e,On.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Vg(this.heightMap.lineAt(this.scaler.fromDOM(e),On.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Vg(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Cb{constructor(e,t){this.from=e,this.to=t}}function xqe(r,e,t){let n=[],i=r,a=0;return an.spans(t,r,e,{span(){},point(o,s){o>i&&(n.push({from:i,to:o}),a+=o-i),i=s}},20),i<e&&(n.push({from:i,to:e}),a+=e-i),{total:a,ranges:n}}function Ab({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let i=0;;i++){let{from:a,to:o}=e[i],s=o-a;if(n<=s)return a+n;n-=s}}function Tb(r,e){let t=0;for(let{from:n,to:i}of r.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/r.total}function wqe(r,e){for(let t of r)if(e(t))return t}const zz={toDOM(r){return r},fromDOM(r){return r},scale:1};class Eqe{constructor(e,t,n){let i=0,a=0,o=0;this.viewports=n.map(({from:s,to:l})=>{let u=t.lineAt(s,On.ByPos,e,0,0).top,f=t.lineAt(l,On.ByPos,e,0,0).bottom;return i+=f-u,{from:s,to:l,top:u,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let s of this.viewports)s.domTop=o+(s.top-a)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),a=s.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return i+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,i=a.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,i=a.domBottom}}}function Vg(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new dl(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(i=>Vg(i,e)):r._content)}const Ob=Gt.define({combine:r=>r.join(" ")}),ZO=Gt.define({combine:r=>r.indexOf(!0)>-1}),QO=oc.newName(),BJ=oc.newName(),FJ=oc.newName(),$J={"&light":"."+BJ,"&dark":"."+FJ};function JO(r,e,t){return new oc(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return r;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):r+" "+n}})}const _qe=JO("."+QO,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},$J),Hg="￿";class Sqe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Jr.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Hg}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let a=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let s=mn.get(i),l=mn.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:rE(i))||rE(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,s;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=i.exec(t))&&(a=s.index,o=s[0].length),this.append(t.slice(n,a<0?t.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=a+o}}readNode(e){if(e.cmIgnore)return;let t=mn.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(Mqe(e,n.node,n.offset)?t:0))}}function Mqe(r,e,t){for(;;){if(!e||t<Nu(e))return!1;if(e==r)return!0;t=Jh(e)+1,e=e.parentNode}}class Gz{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Cqe{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let s=a||o?[]:Oqe(e),l=new Sqe(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=kqe(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=a&&a.node==s.focusNode&&a.offset==s.focusOffset||!BO(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=o&&o.node==s.anchorNode&&o.offset==s.anchorOffset||!BO(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),f=e.viewport;if((zt.ios||zt.chrome)&&e.state.selection.main.empty&&l!=u&&(f.from>0||f.to<e.state.doc.length)){let c=Math.min(l,u),h=Math.max(l,u),d=f.from-c,v=f.to-h;(d==0||d==1||c==0)&&(v==0||v==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=at.single(u,l)}}}function zJ(r,e){let t,{newSel:n}=e,i=r.state.selection.main,a=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:s}=e.bounds,l=i.from,u=null;(a===8||zt.android&&e.text.length<s-o)&&(l=i.to,u="end");let f=Tqe(r.state.doc.sliceString(o,s,Hg),e.text,l-o,u);f&&(zt.chrome&&a==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Hg+Hg&&f.toB--,t={from:o+f.from,to:o+f.toA,insert:un.of(e.text.slice(f.from,f.toB).split(Hg))})}else n&&(!r.hasFocus&&r.state.facet(u2)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,i.to))}:(zt.mac||zt.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=at.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:un.of([" "])}):zt.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=at.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:un.of([" "])}),t){if(zt.ios&&r.inputState.flushIOSKey(t)||zt.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&r.state.sliceDoc(t.from,i.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Ov(r.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&t.insert.length==0||a==8&&t.insert.length<t.to-t.from&&t.to>i.head)&&Ov(r.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&Ov(r.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let s,l=()=>s||(s=Aqe(r,t,n));return r.state.facet(pJ).some(u=>u(r,t.from,t.to,o,l))||r.dispatch(l()),!0}else if(n&&!n.main.eq(i)){let o=!1,s="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),s=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:o,userEvent:s}),!0}else return!1}function Aqe(r,e,t){let n,i=r.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let s=a.from<e.from?i.sliceDoc(a.from,e.from):"",l=a.to>e.to?i.sliceDoc(e.to,a.to):"";n=i.replaceSelection(r.state.toText(s+e.insert.sliceString(0,void 0,r.state.lineBreak)+l))}else{let s=i.changes(e),l=t&&t.main.to<=s.newLength?t.main:void 0;if(i.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let u=r.state.sliceDoc(e.from,e.to),f,c=t&&MJ(r,t.main.head);if(c){let v=e.insert.length-(e.to-e.from);f={from:c.from,to:c.to-v}}else f=r.state.doc.lineAt(a.head);let h=a.to-e.to,d=a.to-a.from;n=i.changeByRange(v=>{if(v.from==a.from&&v.to==a.to)return{changes:s,range:l||v.map(s)};let p=v.to-h,g=p-u.length;if(v.to-v.from!=d||r.state.sliceDoc(g,p)!=u||v.to>=f.from&&v.from<=f.to)return{range:v};let m=i.changes({from:g,to:p,insert:e.insert}),b=v.to-a.to;return{changes:m,range:l?at.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):v.map(m)}})}else n={changes:s,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function Tqe(r,e,t,n){let i=Math.min(r.length,e.length),a=0;for(;a<i&&r.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&r.length==e.length)return null;let o=r.length,s=e.length;for(;o>0&&s>0&&r.charCodeAt(o-1)==e.charCodeAt(s-1);)o--,s--;if(n=="end"){let l=Math.max(0,a-Math.min(o,s));t-=o+l-a}if(o<a&&r.length<e.length){let l=t<=a&&t>=o?a-t:0;a-=l,s=a+(s-o),o=a}else if(s<a){let l=t<=a&&t>=s?a-t:0;a-=l,o=a+(o-s),s=a}return{from:a,toA:o,toB:s}}function Oqe(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:a}=r.observer.selectionRange;return t&&(e.push(new Gz(t,n)),(i!=t||a!=n)&&e.push(new Gz(i,a))),e}function kqe(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?at.single(t+e,n+e):null}const Iqe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},PC=zt.ie&&zt.ie_version<=11;class Lqe{constructor(e){this.view=e,this.active=!1,this.selectionRange=new pKe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(zt.ie&&zt.ie_version<=11||zt.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),PC&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(u2)?n.root.activeElement!=this.dom:!Ax(n.dom,i))return;let a=i.anchorNode&&n.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(zt.ie&&zt.ie_version<=11||zt.android&&zt.chrome)&&!n.state.selection.main.empty&&i.focusNode&&E0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=tE(e.root);if(!t)return!1;let n=zt.safari&&e.root.nodeType==11&&cKe(this.dom.ownerDocument)==this.dom&&Pqe(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=Ax(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&mKe(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Iqe),PC&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),PC&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&Ov(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let a of e){let o=this.readMutation(a);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&Ax(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new Cqe(this.view,e,t,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=zJ(this.view,t);return this.view.state==n&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=jz(t,e.previousSibling||e.target.previousSibling,-1),i=jz(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function jz(r,e,t){for(;e;){let n=mn.get(e);if(n&&n.parent==r)return n;let i=e.parentNode;e=i!=r.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function Uz(r,e){let t=e.startContainer,n=e.startOffset,i=e.endContainer,a=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return E0(o.node,o.offset,i,a)&&([t,n,i,a]=[i,a,t,n]),{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:a}}function Pqe(r,e){if(e.getComposedRanges){let i=e.getComposedRanges(r.root)[0];if(i)return Uz(r,i)}let t=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),t?Uz(r,t):null}class Dt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(n=>n.forEach(i=>t(i,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||gKe(e.parent)||document,this.viewState=new $z(e.state||Jr.create(e)),e.scrollTo&&e.scrollTo.is(_b)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ug).map(n=>new OC(n));for(let n of this.plugins)n.update(this);this.observer=new Lqe(this),this.inputState=new YKe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new wz(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof Li?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,a=this.state;for(let h of e){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,s=0,l=null;e.some(h=>h.annotation(PJ))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=DJ(a,o),l||(s=1));let u=this.observer.delayedAndroidKey,f=null;if(u?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(f=null)):this.observer.clear(),a.facet(Jr.phrases)!=this.state.facet(Jr.phrases))return this.setState(a);i=nE.create(this,a,e),i.flags|=s;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(c&&(c=c.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;c=new kv(d.empty?d:at.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(_b)&&(c=d.value.clip(this.state))}this.viewState.update(i,c),this.bidiCache=iE.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Wg)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Ob)!=i.state.facet(Ob)&&(this.viewState.mustMeasureContent=!0),(t||n||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(XO))try{h(i)}catch(d){Wa(this.state,d,"update listener")}(l||f)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),f&&!zJ(this,f)&&u.force&&Ov(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new $z(e),this.plugins=e.facet(Ug).map(n=>new OC(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new wz(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ug),n=e.state.facet(Ug);if(t!=n){let i=[];for(let a of n){let o=t.indexOf(a);if(o<0)i.push(new OC(a));else{let s=this.plugins[o];s.mustUpdate=e,i.push(s)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){Wa(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(o<0)if(YQ(n))a=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);a=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(d=>{try{return d.read(this)}catch(v){return Wa(this.state,v),Wz}}),c=nE.create(this,this.state,[]),h=!1;c.flags|=l,t?t.flags|=l:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(f[d]!=Wz)try{let v=u[d];v.write&&v.write(f[d],this)}catch(v){Wa(this.state,v)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-o;if(v>1||v<-1){i=i+v,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(XO))s(t)}get themeClasses(){return QO+" "+(this.state.facet(ZO)?FJ:BJ)+" "+this.state.facet(Ob)}updateAttrs(){let e=Vz(this,xJ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(u2)?"true":"false",class:"cm-content",style:`${zt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Vz(this,uD,t);let n=this.observer.ignore(()=>{let i=jO(this.contentDOM,this.contentAttrs,t),a=jO(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(Dt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Wg);let e=this.state.facet(Dt.cspNonce);oc.mount(this.root,this.styleModules.concat(_qe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return IC(this,e,Az(this,e,t,n))}moveByGroup(e,t){return IC(this,e,Az(this,e,t,n=>HKe(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),a=n[t?n.length-1:0];return at.cursor(a.side(t,i)+e.from,a.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return VKe(this,e,t,n)}moveVertically(e,t,n){return IC(this,e,XKe(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),CJ(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),o=a[zf.find(a,e-i.from,-1,t)];return s2(n,o.dir==In.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(mJ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Dqe)return uJ(e.length);let t=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==t&&(a.fresh||lJ(a.isolates,n=xz(this,e))))return a.order;n||(n=xz(this,e));let i=OKe(e.text,t,n);return this.bidiCache.push(new iE(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||zt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{HQ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return _b.of(new kv(typeof e=="number"?at.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return _b.of(new kv(at.cursor(n.from),"start","start",n.top-e,t,!0))}static domEventHandlers(e){return si.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return si.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=oc.newName(),i=[Ob.of(n),Wg.of(JO(`.${n}`,e))];return t&&t.dark&&i.push(ZO.of(!0)),i}static baseTheme(e){return vd.lowest(Wg.of(JO("."+QO,e,$J)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&mn.get(n)||mn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}Dt.styleModule=Wg;Dt.inputHandler=pJ;Dt.scrollHandler=bJ;Dt.focusChangeEffect=gJ;Dt.perLineTextDirection=mJ;Dt.exceptionSink=vJ;Dt.updateListener=XO;Dt.editable=u2;Dt.mouseSelectionStyle=dJ;Dt.dragMovesSelection=hJ;Dt.clickAddsSelectionRange=cJ;Dt.decorations=pm;Dt.outerDecorations=wJ;Dt.atomicRanges=fD;Dt.bidiIsolatedRanges=EJ;Dt.scrollMargins=_J;Dt.darkTheme=ZO;Dt.cspNonce=Gt.define({combine:r=>r.length?r[0]:""});Dt.contentAttributes=uD;Dt.editorAttributes=xJ;Dt.lineWrapping=Dt.contentAttributes.of({class:"cm-lineWrapping"});Dt.announce=Rr.define();const Dqe=4096,Wz={};class iE{constructor(e,t,n,i,a,o){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=a,this.order=o}static update(e,t){if(t.empty&&!e.some(a=>a.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:In.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let o=e[a];o.dir==i&&!t.touchesRange(o.from,o.to)&&n.push(new iE(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function Vz(r,e,t){for(let n=r.state.facet(e),i=n.length-1;i>=0;i--){let a=n[i],o=typeof a=="function"?a(r):a;o&&GO(o,t)}return t}const Nqe=zt.mac?"mac":zt.windows?"win":zt.linux?"linux":"key";function Rqe(r,e){const t=r.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,a,o,s;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))a=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:a=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(n="Alt-"+n),a&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function kb(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const Bqe=vd.default(Dt.domEventHandlers({keydown(r,e){return jJ(GJ(e.state),r,e,"editor")}})),f2=Gt.define({enables:Bqe}),Hz=new WeakMap;function GJ(r){let e=r.facet(f2),t=Hz.get(e);return t||Hz.set(e,t=zqe(e.reduce((n,i)=>n.concat(i),[]))),t}function Fqe(r,e,t){return jJ(GJ(r.state),e,r,t)}let Of=null;const $qe=4e3;function zqe(r,e=Nqe){let t=Object.create(null),n=Object.create(null),i=(o,s)=>{let l=n[o];if(l==null)n[o]=s;else if(l!=s)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,s,l,u,f)=>{var c,h;let d=t[o]||(t[o]=Object.create(null)),v=s.split(/ (?!$)/).map(m=>Rqe(m,e));for(let m=1;m<v.length;m++){let b=v.slice(0,m).join(" ");i(b,!0),d[b]||(d[b]={preventDefault:!0,stopPropagation:!1,run:[y=>{let x=Of={view:y,prefix:b,scope:o};return setTimeout(()=>{Of==x&&(Of=null)},$qe),!0}]})}let p=v.join(" ");i(p,!1);let g=d[p]||(d[p]={preventDefault:!1,stopPropagation:!1,run:((h=(c=d._any)===null||c===void 0?void 0:c.run)===null||h===void 0?void 0:h.slice())||[]});l&&g.run.push(l),u&&(g.preventDefault=!0),f&&(g.stopPropagation=!0)};for(let o of r){let s=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of s){let f=t[u]||(t[u]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let c in f)f[c].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of s)a(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}function jJ(r,e,t,n){let i=fKe(e),a=Ji(i,0),o=Wo(a)==i.length&&i!=" ",s="",l=!1,u=!1,f=!1;Of&&Of.view==t&&Of.scope==n&&(s=Of.prefix+" ",TJ.indexOf(e.keyCode)<0&&(u=!0,Of=null));let c=new Set,h=g=>{if(g){for(let m of g.run)if(!c.has(m)&&(c.add(m),m(t,e)))return g.stopPropagation&&(f=!0),!0;g.preventDefault&&(g.stopPropagation&&(f=!0),u=!0)}return!1},d=r[n],v,p;return d&&(h(d[s+kb(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(zt.windows&&e.ctrlKey&&e.altKey)&&(v=sc[e.keyCode])&&v!=i?(h(d[s+kb(v,e,!0)])||e.shiftKey&&(p=vm[e.keyCode])!=i&&p!=v&&h(d[s+kb(p,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(d[s+kb(i,e,!0)])&&(l=!0),!l&&h(d._any)&&(l=!0)),u&&(l=!0),l&&f&&e.stopPropagation(),l}class by{constructor(e,t,n,i,a){this.className=e,this.left=t,this.top=n,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let a=UJ(e);return[new by(t,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return Gqe(e,t,n)}}function UJ(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==In.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function Xz(r,e,t){let n=at.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(n,!0,!0).from),type:Oa.Text}}function Gqe(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let n=Math.max(t.from,r.viewport.from),i=Math.min(t.to,r.viewport.to),a=r.textDirection==In.LTR,o=r.contentDOM,s=o.getBoundingClientRect(),l=UJ(r),u=o.querySelector(".cm-line"),f=u&&window.getComputedStyle(u),c=s.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),h=s.right-(f?parseInt(f.paddingRight):0),d=KO(r,n),v=KO(r,i),p=d.type==Oa.Text?d:null,g=v.type==Oa.Text?v:null;if(p&&(r.lineWrapping||d.widgetLineBreaks)&&(p=Xz(r,n,p)),g&&(r.lineWrapping||v.widgetLineBreaks)&&(g=Xz(r,i,g)),p&&g&&p.from==g.from)return b(y(t.from,t.to,p));{let w=p?y(t.from,null,p):x(d,!1),E=g?y(null,t.to,g):x(v,!0),_=[];return(p||d).to<(g||v).from-(p&&g?1:0)||d.widgetLineBreaks>1&&w.bottom+r.defaultLineHeight/2<E.top?_.push(m(c,w.bottom,h,E.top)):w.bottom<E.top&&r.elementAtHeight((w.bottom+E.top)/2).type==Oa.Text&&(w.bottom=E.top=(w.bottom+E.top)/2),b(w).concat(_).concat(b(E))}function m(w,E,_,S){return new by(e,w-l.left,E-l.top-.01,_-w,S-E+.01)}function b({top:w,bottom:E,horizontal:_}){let S=[];for(let C=0;C<_.length;C+=2)S.push(m(_[C],w,_[C+1],E));return S}function y(w,E,_){let S=1e9,C=-1e9,M=[];function T(L,N,P,R,G){let D=r.coordsAtPos(L,L==_.to?-2:2),B=r.coordsAtPos(P,P==_.from?2:-2);!D||!B||(S=Math.min(D.top,B.top,S),C=Math.max(D.bottom,B.bottom,C),G==In.LTR?M.push(a&&N?c:D.left,a&&R?h:B.right):M.push(!a&&R?c:B.left,!a&&N?h:D.right))}let A=w??_.from,O=E??_.to;for(let L of r.visibleRanges)if(L.to>A&&L.from<O)for(let N=Math.max(L.from,A),P=Math.min(L.to,O);;){let R=r.state.doc.lineAt(N);for(let G of r.bidiSpans(R)){let D=G.from+R.from,B=G.to+R.from;if(D>=P)break;B>N&&T(Math.max(D,N),w==null&&D<=A,Math.min(B,P),E==null&&B>=O,G.dir)}if(N=R.to+1,N>=P)break}return M.length==0&&T(A,w==null,O,E==null,r.textDirection),{top:S,bottom:C,horizontal:M}}function x(w,E){let _=s.top+(E?w.top:w.bottom);return{top:_,bottom:_,horizontal:[]}}}function jqe(r,e){return r.constructor==e.constructor&&r.eq(e)}class Uqe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(kx)!=e.state.facet(kx)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(kx);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!jqe(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const kx=Gt.define();function WJ(r){return[si.define(e=>new Uqe(e,r)),kx.of(r)]}const VJ=!zt.ios,gm=Gt.define({combine(r){return Yl(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Wqe(r={}){return[gm.of(r),Vqe,Hqe,Xqe,yJ.of(!0)]}function HJ(r){return r.startState.facet(gm)!=r.state.facet(gm)}const Vqe=WJ({above:!0,markers(r){let{state:e}=r,t=e.facet(gm),n=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||VJ:t.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:at.cursor(i.head,i.head>i.anchor?-1:1);for(let l of by.forRange(r,o,s))n.push(l)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=HJ(r);return t&&Yz(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){Yz(e.state,r)},class:"cm-cursorLayer"});function Yz(r,e){e.style.animationDuration=r.facet(gm).cursorBlinkRate+"ms"}const Hqe=WJ({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:by.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||HJ(r)},class:"cm-selectionLayer"}),ek={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};VJ&&(ek[".cm-line"].caretColor="transparent !important",ek[".cm-content"]={caretColor:"transparent !important"});const Xqe=vd.highest(Dt.theme(ek)),XJ=Rr.define({map(r,e){return r==null?null:e.mapPos(r)}}),Xg=oa.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,n)=>n.is(XJ)?n.value:t,r)}}),Yqe=si.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(Xg);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Xg)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(Xg),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Xg)!=r&&this.view.dispatch({effects:XJ.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Kqe(){return[Xg,Yqe]}function Kz(r,e,t,n,i){e.lastIndex=0;for(let a=r.iterRange(t,n),o=t,s;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;s=e.exec(a.value);)i(o+s.index,s)}function qqe(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let n=[];for(let{from:i,to:a}of t)i=Math.max(r.state.doc.lineAt(i).from,i-e),a=Math.min(r.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=a:n.push({from:i,to:a});return n}class Zqe{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:a,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(s,l,u,f)=>i(f,u,u+s[0].length,s,l);else if(typeof n=="function")this.addMatch=(s,l,u,f)=>{let c=n(s,l,u);c&&f(u,u+s[0].length,c)};else if(n)this.addMatch=(s,l,u,f)=>f(u,u+s[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(e){let t=new ac,n=t.add.bind(t);for(let{from:i,to:a}of qqe(e,this.maxLength))Kz(e.state.doc,this.regexp,i,a,(o,s)=>this.addMatch(s,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,o,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),i=Math.max(l,i))}),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let a of e.visibleRanges){let o=Math.max(a.from,n),s=Math.min(a.to,i);if(s>o){let l=e.state.doc.lineAt(o),u=l.to<s?e.state.doc.lineAt(s):l,f=Math.max(a.from,l.from),c=Math.min(a.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){f=o;break}for(;s<u.to;s++)if(this.boundary.test(u.text[s-u.from])){c=s;break}}let h=[],d,v=(p,g,m)=>h.push(m.range(p,g));if(l==u)for(this.regexp.lastIndex=f-l.from;(d=this.regexp.exec(l.text))&&d.index<c-l.from;)this.addMatch(d,e,d.index+l.from,v);else Kz(e.state.doc,this.regexp,f,c,(p,g)=>this.addMatch(g,e,p,v));t=t.update({filterFrom:f,filterTo:c,filter:(p,g)=>p<f||g>c,add:h})}}return t}}const tk=/x/.unicode!=null?"gu":"g",Qqe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,tk),Jqe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let DC=null;function eZe(){var r;if(DC==null&&typeof document<"u"&&document.body){let e=document.body.style;DC=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return DC||!1}const Ix=Gt.define({combine(r){let e=Yl(r,{render:null,specialChars:Qqe,addSpecialChars:null});return(e.replaceTabs=!eZe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,tk)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,tk)),e}});function tZe(r={}){return[Ix.of(r),rZe()]}let qz=null;function rZe(){return qz||(qz=si.fromClass(class{constructor(r){this.view=r,this.decorations=sr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(Ix)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new Zqe({regexp:r.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,a=Ji(e[0],0);if(a==9){let o=i.lineAt(n),s=t.state.tabSize,l=Np(o.text,s,n-o.from);return sr.replace({widget:new oZe((s-l%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=sr.replace({widget:new aZe(r,a)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(Ix);r.startState.facet(Ix)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const nZe="•";function iZe(r){return r>=32?nZe:r==10?"␤":String.fromCharCode(9216+r)}class aZe extends qu{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=iZe(this.code),n=e.state.phrase("Control character")+" "+(Jqe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class oZe extends qu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function sZe(){return uZe}const lZe=sr.line({class:"cm-activeLine"}),uZe=si.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let n of r.state.selection.ranges){let i=r.lineBlockAt(n.head);i.from>e&&(t.push(lZe.range(i.from)),e=i.from)}return sr.set(t)}},{decorations:r=>r.decorations});class fZe extends qu{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?pp(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=s2(t[0],n.direction!="rtl"),a=parseInt(n.lineHeight);return i.bottom-i.top>a*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+a}:i}ignoreEvent(){return!1}}function cZe(r){return si.fromClass(class{constructor(e){this.view=e,this.placeholder=r?sr.set([sr.widget({widget:new fZe(r),side:1}).range(0)]):sr.none}get decorations(){return this.view.state.doc.length?sr.none:this.placeholder}},{decorations:e=>e.decorations})}const rk=2e3;function hZe(r,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),a=[];if(e.off>rk||t.off>rk||e.col<0||t.col<0){let o=Math.min(e.off,t.off),s=Math.max(e.off,t.off);for(let l=n;l<=i;l++){let u=r.doc.line(l);u.length<=s&&a.push(at.range(u.from+o,u.to+s))}}else{let o=Math.min(e.col,t.col),s=Math.max(e.col,t.col);for(let l=n;l<=i;l++){let u=r.doc.line(l),f=DO(u.text,o,r.tabSize,!0);if(f<0)a.push(at.cursor(u.to));else{let c=DO(u.text,s,r.tabSize);a.push(at.range(u.from+f,u.from+c))}}}return a}function dZe(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function Zz(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(t),i=t-n.from,a=i>rk?-1:i==n.length?dZe(r,e.clientX):Np(n.text,r.state.tabSize,t-n.from);return{line:n.number,col:a,off:i}}function vZe(r,e){let t=Zz(r,e),n=r.state.selection;return t?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(a);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(i.changes)}},get(i,a,o){let s=Zz(r,i);if(!s)return n;let l=hZe(r.state,t,s);return l.length?o?at.create(l.concat(n.ranges)):at.create(l):n}}:null}function pZe(r){let e=(r==null?void 0:r.eventFilter)||(t=>t.altKey&&t.button==0);return Dt.mouseSelectionStyle.of((t,n)=>e(n)?vZe(t,n):null)}const gZe={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},mZe={style:"cursor: crosshair"};function yZe(r={}){let[e,t]=gZe[r.key||"Alt"],n=si.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,Dt.contentAttributes.of(i=>{var a;return!((a=i.plugin(n))===null||a===void 0)&&a.isDown?mZe:null})]}const Cg="-10000px";class YJ{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let a=null;this.tooltipViews=this.tooltips.map(o=>a=n(o,a))}update(e,t){var n;let i=e.state.facet(this.facet),a=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],s=t?[]:null;for(let l=0;l<a.length;l++){let u=a[l],f=-1;if(u){for(let c=0;c<this.tooltips.length;c++){let h=this.tooltips[c];h&&h.create==u.create&&(f=c)}if(f<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),s&&(s[l]=!!u.above);else{let c=o[l]=this.tooltipViews[f];s&&(s[l]=t[f]),c.update&&c.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(s.forEach((l,u)=>t[u]=l),t.length=s.length),this.input=i,this.tooltips=a,this.tooltipViews=o,!0}}function bZe(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const NC=Gt.define({combine:r=>{var e,t,n;return{position:zt.ios?"absolute":((e=r.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||bZe}}}),Qz=new WeakMap,hD=si.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(NC);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new YJ(r,dD,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(NC);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Cg,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(zt.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Cg&&i.style.left=="0px"){let a=i.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((i,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(NC).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{editor:t,space:n,scaleX:i,scaleY:a}=r,o=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:f}=u,c=r.pos[s],h=r.size[s];if(!c||c.bottom<=Math.max(t.top,n.top)||c.top>=Math.min(t.bottom,n.bottom)||c.right<Math.max(t.left,n.left)-.1||c.left>Math.min(t.right,n.right)+.1){f.style.top=Cg;continue}let d=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,v=d?7:0,p=h.right-h.left,g=(e=Qz.get(u))!==null&&e!==void 0?e:h.bottom-h.top,m=u.offset||wZe,b=this.view.textDirection==In.LTR,y=h.width>n.right-n.left?b?n.left:n.right-h.width:b?Math.min(c.left-(d?14:0)+m.x,n.right-p):Math.max(n.left,c.left-p+(d?14:0)-m.x),x=this.above[s];!l.strictSide&&(x?c.top-(h.bottom-h.top)-m.y<n.top:c.bottom+(h.bottom-h.top)+m.y>n.bottom)&&x==n.bottom-c.bottom>c.top-n.top&&(x=this.above[s]=!x);let w=(x?c.top-n.top:n.bottom-c.bottom)-v;if(w<g&&u.resize!==!1){if(w<this.view.defaultLineHeight){f.style.top=Cg;continue}Qz.set(u,g),f.style.height=(g=w)/a+"px"}else f.style.height&&(f.style.height="");let E=x?c.top-g-v-m.y:c.bottom+v+m.y,_=y+p;if(u.overlap!==!0)for(let S of o)S.left<_&&S.right>y&&S.top<E+g&&S.bottom>E&&(E=x?S.top-g-2-v:S.bottom+v+2);if(this.position=="absolute"?(f.style.top=(E-r.parent.top)/a+"px",f.style.left=(y-r.parent.left)/i+"px"):(f.style.top=E/a+"px",f.style.left=y/i+"px"),d){let S=c.left+(b?m.x:-m.x)-(y+14-7);d.style.left=S/i+"px"}u.overlap!==!0&&o.push({left:y,top:E,right:_,bottom:E+g}),f.classList.toggle("cm-tooltip-above",x),f.classList.toggle("cm-tooltip-below",!x),u.positioned&&u.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=Cg}},{eventObservers:{scroll(){this.maybeMeasure()}}}),xZe=Dt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),wZe={x:0,y:0},dD=Gt.define({enables:[hD,xZe]}),aE=Gt.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class c2{static create(e){return new c2(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new YJ(e,aE,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const EZe=dD.compute([aE],r=>{let e=r.facet(aE);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:c2.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class _Ze{constructor(e,t,n,i,a){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,a=1;if(n instanceof $f)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let s=e.coordsAtPos(i);if(!s||t.y<s.top||t.y>s.bottom||t.x<s.left-e.defaultCharacterWidth||t.x>s.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(f=>f.from<=i&&f.to>=i),u=l&&l.dir==In.RTL?-1:1;a=t.x<s.left?-u:u}let o=this.source(e,i,a);if(o!=null&&o.then){let s=this.pending={pos:i};o.then(l=>{this.pending==s&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Wa(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(hD),t=e?e.manager.tooltips.findIndex(n=>n.create==c2.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:a}=this;if(i.length&&a&&!SZe(a.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,s=(n=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==s?this.view.posAtCoords(this.lastMove)!=o:!MZe(this.view,o,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ib=4;function SZe(r,e){let t=r.getBoundingClientRect();return e.clientX>=t.left-Ib&&e.clientX<=t.right+Ib&&e.clientY>=t.top-Ib&&e.clientY<=t.bottom+Ib}function MZe(r,e,t,n,i,a){let o=r.scrollDOM.getBoundingClientRect(),s=r.documentTop+r.documentPadding.top+r.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,s)<i)return!1;let l=r.posAtCoords({x:n,y:i},!1);return l>=e&&l<=t}function CZe(r,e={}){let t=Rr.define(),n=oa.define({create(){return[]},update(i,a){if(i.length&&(e.hideOnChange&&(a.docChanged||a.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(a,o))),a.docChanged)){let o=[];for(let s of i){let l=a.changes.mapPos(s.pos,-1,Ta.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),s);u.pos=l,u.end!=null&&(u.end=a.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of a.effects)o.is(t)&&(i=o.value),o.is(AZe)&&(i=[]);return i},provide:i=>aE.from(i)});return[n,si.define(i=>new _Ze(i,r,n,t,e.hoverTime||300)),EZe]}function KJ(r,e){let t=r.plugin(hD);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const AZe=Rr.define(),Jz=Gt.define({combine(r){let e,t;for(let n of r)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function mm(r,e){let t=r.plugin(qJ),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const qJ=si.fromClass(class{constructor(r){this.input=r.state.facet(ym),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(Jz);this.top=new Lb(r,!0,e.topContainer),this.bottom=new Lb(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(Jz);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Lb(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Lb(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(ym);if(t!=this.input){let n=t.filter(l=>l),i=[],a=[],o=[],s=[];for(let l of n){let u=this.specs.indexOf(l),f;u<0?(f=l(r.view),s.push(f)):(f=this.panels[u],f.update&&f.update(r)),i.push(f),(f.top?a:o).push(f)}this.specs=n,this.panels=i,this.top.sync(a),this.bottom.sync(o);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>Dt.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Lb{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=eG(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=eG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function eG(r){let e=r.nextSibling;return r.remove(),e}const ym=Gt.define({enables:qJ});class Bu extends Qh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Bu.prototype.elementClass="";Bu.prototype.toDOM=void 0;Bu.prototype.mapMode=Ta.TrackBefore;Bu.prototype.startSide=Bu.prototype.endSide=-1;Bu.prototype.point=!0;const Lx=Gt.define(),TZe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>an.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},S0=Gt.define();function OZe(r){return[ZJ(),S0.of(Object.assign(Object.assign({},TZe),r))]}const nk=Gt.define({combine:r=>r.some(e=>e)});function ZJ(r){let e=[kZe];return r&&r.fixed===!1&&e.push(nk.of(!0)),e}const kZe=si.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(S0).map(e=>new rG(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(nk),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(nk)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=an.iter(this.view.state.facet(Lx),this.view.viewport.from),n=[],i=this.gutters.map(a=>new IZe(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let o=!0;for(let s of a.type)if(s.type==Oa.Text&&o){ik(t,n,s.from);for(let l of i)l.line(this.view,s,n);o=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(a.type==Oa.Text){ik(t,n,a.from);for(let o of i)o.line(this.view,a,n)}else if(a.widget)for(let o of i)o.widget(this.view,a);for(let a of i)a.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(S0),t=r.state.facet(S0),n=r.docChanged||r.heightChanged||r.viewportChanged||!an.eq(r.startState.facet(Lx),r.state.facet(Lx),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(r)&&(n=!0);else{n=!0;let i=[];for(let a of t){let o=e.indexOf(a);o<0?i.push(new rG(this.view,a)):(this.gutters[o].update(r),i.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>Dt.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==In.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function tG(r){return Array.isArray(r)?r:[r]}function ik(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class IZe{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=an.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,a=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let s=new QJ(e,o,a,n);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,o,a,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];ik(this.cursor,i,t.from),n.length&&(i=i.concat(n));let a=this.gutter.config.lineMarker(e,t,i);a&&i.unshift(a);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class rG{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let a=i.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,s,i)&&i.preventDefault()});this.markers=tG(t.markers(e)),t.initialSpacer&&(this.spacer=new QJ(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=tG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!an.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class QJ{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),LZe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let a=0,o=0;;){let s=o,l=a<t.length?t[a++]:null,u=!1;if(l){let f=l.elementClass;f&&(n+=" "+f);for(let c=o;c<this.markers.length;c++)if(this.markers[c].compare(l)){s=c,u=!0;break}}else s=this.markers.length;for(;o<s;){let f=this.markers[o++];if(f.toDOM){f.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function LZe(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const PZe=Gt.define(),hv=Gt.define({combine(r){return Yl(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let a=n[i],o=t[i];n[i]=a?(s,l,u)=>a(s,l,u)||o(s,l,u):o}return n}})}});class RC extends Bu{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function BC(r,e){return r.state.facet(hv).formatNumber(e,r.state)}const DZe=S0.compute([hv],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(PZe)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new RC(BC(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(hv)!=e.state.facet(hv),initialSpacer(e){return new RC(BC(e,nG(e.state.doc.lines)))},updateSpacer(e,t){let n=BC(t.view,nG(t.view.state.doc.lines));return n==e.number?e:new RC(n)},domEventHandlers:r.facet(hv).domEventHandlers}));function NZe(r={}){return[hv.of(r),ZJ(),DZe]}function nG(r){let e=9;for(;e<r;)e=e*10+9;return e}const RZe=new class extends Bu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},BZe=Lx.compute(["selection"],r=>{let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.head).from;i>t&&(t=i,e.push(RZe.range(i)))}return an.of(e)});function FZe(){return BZe}const JJ=1024;let $Ze=0;class FC{constructor(e,t){this.from=e,this.to=t}}class Xr{constructor(e={}){this.id=$Ze++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ja.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Xr.closedBy=new Xr({deserialize:r=>r.split(" ")});Xr.openedBy=new Xr({deserialize:r=>r.split(" ")});Xr.group=new Xr({deserialize:r=>r.split(" ")});Xr.isolate=new Xr({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});Xr.contextHash=new Xr({perNode:!0});Xr.lookAhead=new Xr({perNode:!0});Xr.mounted=new Xr({perNode:!0});class oE{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Xr.mounted.id]}}const zZe=Object.create(null);class Ja{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):zZe,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ja(e.name||"",t,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Xr.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(Xr.group),a=-1;a<(i?i.length:0);a++){let o=t[a<0?n.name:i[a]];if(o)return o}}}}Ja.none=new Ja("",Object.create(null),0,8);class vD{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let a of e){let o=a(n);o&&(i||(i=Object.assign({},n.props)),i[o[0].id]=o[1])}t.push(i?new Ja(n.name,i,n.id,n.flags):n)}return new vD(t)}}const Pb=new WeakMap,iG=new WeakMap;var Ui;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Ui||(Ui={}));class pi{constructor(e,t,n,i,a){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,s]of a)this.props[typeof o=="number"?o:o.id]=s}}toString(){let e=oE.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ok(this.topNode,e)}cursorAt(e,t=0,n=0){let i=Pb.get(this)||this.topNode,a=new ok(i);return a.moveTo(e,t),Pb.set(this,a._tree),a}get topNode(){return new Jo(this,0,0,null)}resolve(e,t=0){let n=bm(Pb.get(this)||this.topNode,e,t,!1);return Pb.set(this,n),n}resolveInner(e,t=0){let n=bm(iG.get(this)||this.topNode,e,t,!0);return iG.set(this,n),n}resolveStack(e,t=0){return UZe(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:a=this.length}=e,o=e.mode||0,s=(o&Ui.IncludeAnonymous)>0;for(let l=this.cursor(o|Ui.IncludeAnonymous);;){let u=!1;if(l.from<=a&&l.to>=i&&(!s&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&n&&(s||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mD(Ja.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new pi(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new pi(Ja.none,t,n,i)))}static build(e){return WZe(e)}}pi.empty=new pi(Ja.none,[],[],0);class pD{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pD(this.buffer,this.index)}}class uc{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Ja.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return a+"("+o.join(",")+")"}findChild(e,t,n,i,a){let{buffer:o}=this,s=-1;for(let l=e;l!=t&&!(eee(a,i,o[l+1],o[l+2])&&(s=l,n>0));l=o[l+3]);return s}slice(e,t,n){let i=this.buffer,a=new Uint16Array(t-e),o=0;for(let s=e,l=0;s<t;){a[l++]=i[s++],a[l++]=i[s++]-n;let u=a[l++]=i[s++]-n;a[l++]=i[s++]-e,o=Math.max(o,u)}return new uc(a,o,this.set)}}function eee(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function bm(r,e,t,n){for(var i;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!n&&r instanceof Jo&&r.index<0?null:r.parent;if(!o)return r;r=o}let a=n?0:Ui.IgnoreOverlays;if(n)for(let o=r,s=o.parent;s;o=s,s=o.parent)o instanceof Jo&&o.index<0&&((i=s.enter(e,t,a))===null||i===void 0?void 0:i.from)!=o.from&&(r=s);for(;;){let o=r.enter(e,t,a);if(!o)return r;r=o}}class tee{cursor(e=0){return new ok(this,e)}getChild(e,t=null,n=null){let i=aG(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return aG(this,e,t,n)}resolve(e,t=0){return bm(this,e,t,!1)}resolveInner(e,t=0){return bm(this,e,t,!0)}matchContext(e){return ak(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class Jo extends tee{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,a=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,u=t>0?s.length:-1;e!=u;e+=t){let f=s[e],c=l[e]+o.from;if(eee(i,n,c,c+f.length)){if(f instanceof uc){if(a&Ui.ExcludeBuffers)continue;let h=f.findChild(0,f.buffer.length,t,n-c,i);if(h>-1)return new Gf(new GZe(o,f,e,c),null,h)}else if(a&Ui.IncludeAnonymous||!f.type.isAnonymous||gD(f)){let h;if(!(a&Ui.IgnoreMounts)&&(h=oE.get(f))&&!h.overlay)return new Jo(h.tree,c,e,o);let d=new Jo(f,c,e,o);return a&Ui.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?f.children.length-1:0,t,n,i)}}}if(a&Ui.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&Ui.IgnoreOverlays)&&(i=oE.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:o,to:s}of i.overlay)if((t>0?o<=a:o<a)&&(t<0?s>=a:s>a))return new Jo(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function aG(r,e,t,n){let i=r.cursor(),a=[];if(!i.firstChild())return a;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return a}for(;;){if(n!=null&&i.type.is(n))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return n==null?a:[]}}function ak(r,e,t=e.length-1){for(let n=r.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class GZe{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class Gf extends tee{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new Gf(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Ui.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new Gf(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Gf(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Gf(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,a=n.buffer[this.index+3];if(a>i){let o=n.buffer[this.index+1];e.push(n.slice(i,a,o)),t.push(0)}return new pi(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ree(r){if(!r.length)return null;let e=0,t=r[0];for(let a=1;a<r.length;a++){let o=r[a];(o.from>t.from||o.to<t.to)&&(t=o,e=a)}let n=t instanceof Jo&&t.index<0?null:t.parent,i=r.slice();return n?i[e]=n:i.splice(e,1),new jZe(i,t)}class jZe{constructor(e,t){this.heads=e,this.node=t}get next(){return ree(this.heads)}}function UZe(r,e,t){let n=r.resolveInner(e,t),i=null;for(let a=n instanceof Jo?n:n.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(i||(i=[n])).push(o.resolve(e,t)),a=o}else{let o=oE.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new Jo(o.tree,o.overlay[0].from+a.from,-1,a);(i||(i=[n])).push(bm(s,e,t,!1))}}return i?ree(i):n}class ok{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Jo)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Jo?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Ui.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ui.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ui.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let a=t+e,o=e<0?-1:n._tree.children.length;a!=o;a+=e){let s=n._tree.children[a];if(this.mode&Ui.IncludeAnonymous||s instanceof uc||!s.type.isAnonymous||gD(s))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,a=this.stack.length;a>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=a+1;break e}i=this.stack[--a]}for(let i=n;i<this.stack.length;i++)t=new Gf(this.buffer,t,this.stack[i]);return this.bufferNode=new Gf(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return ak(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return ak(this.node,e,i);let o=n[t.buffer[this.stack[a]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function gD(r){return r.children.some(e=>e instanceof uc||!e.type.isAnonymous||gD(e))}function WZe(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=JJ,reused:a=[],minRepeatType:o=n.types.length}=r,s=Array.isArray(t)?new pD(t,t.length):t,l=n.types,u=0,f=0;function c(w,E,_,S,C,M){let{id:T,start:A,end:O,size:L}=s,N=f;for(;L<0;)if(s.next(),L==-1){let B=a[T];_.push(B),S.push(A-w);return}else if(L==-3){u=T;return}else if(L==-4){f=T;return}else throw new RangeError(`Unrecognized record size: ${L}`);let P=l[T],R,G,D=A-w;if(O-A<=i&&(G=g(s.pos-E,C))){let B=new Uint16Array(G.size-G.skip),Y=s.pos-G.size,ee=B.length;for(;s.pos>Y;)ee=m(G.start,B,ee);R=new uc(B,O-G.start,n),D=G.start-w}else{let B=s.pos-L;s.next();let Y=[],ee=[],ne=T>=o?T:-1,Q=0,ye=O;for(;s.pos>B;)ne>=0&&s.id==ne&&s.size>=0?(s.end<=ye-i&&(v(Y,ee,A,Q,s.end,ye,ne,N),Q=Y.length,ye=s.end),s.next()):M>2500?h(A,B,Y,ee):c(A,B,Y,ee,ne,M+1);if(ne>=0&&Q>0&&Q<Y.length&&v(Y,ee,A,Q,A,ye,ne,N),Y.reverse(),ee.reverse(),ne>-1&&Q>0){let Le=d(P);R=mD(P,Y,ee,0,Y.length,0,O-A,Le,Le)}else R=p(P,Y,ee,O-A,N-O)}_.push(R),S.push(D)}function h(w,E,_,S){let C=[],M=0,T=-1;for(;s.pos>E;){let{id:A,start:O,end:L,size:N}=s;if(N>4)s.next();else{if(T>-1&&O<T)break;T<0&&(T=L-i),C.push(A,O,L),M++,s.next()}}if(M){let A=new Uint16Array(M*4),O=C[C.length-2];for(let L=C.length-3,N=0;L>=0;L-=3)A[N++]=C[L],A[N++]=C[L+1]-O,A[N++]=C[L+2]-O,A[N++]=N;_.push(new uc(A,C[2]-O,n)),S.push(O-w)}}function d(w){return(E,_,S)=>{let C=0,M=E.length-1,T,A;if(M>=0&&(T=E[M])instanceof pi){if(!M&&T.type==w&&T.length==S)return T;(A=T.prop(Xr.lookAhead))&&(C=_[M]+T.length+A)}return p(w,E,_,S,C)}}function v(w,E,_,S,C,M,T,A){let O=[],L=[];for(;w.length>S;)O.push(w.pop()),L.push(E.pop()+_-C);w.push(p(n.types[T],O,L,M-C,A-M)),E.push(C-_)}function p(w,E,_,S,C=0,M){if(u){let T=[Xr.contextHash,u];M=M?[T].concat(M):[T]}if(C>25){let T=[Xr.lookAhead,C];M=M?[T].concat(M):[T]}return new pi(w,E,_,S,M)}function g(w,E){let _=s.fork(),S=0,C=0,M=0,T=_.end-i,A={size:0,start:0,skip:0};e:for(let O=_.pos-w;_.pos>O;){let L=_.size;if(_.id==E&&L>=0){A.size=S,A.start=C,A.skip=M,M+=4,S+=4,_.next();continue}let N=_.pos-L;if(L<0||N<O||_.start<T)break;let P=_.id>=o?4:0,R=_.start;for(_.next();_.pos>N;){if(_.size<0)if(_.size==-3)P+=4;else break e;else _.id>=o&&(P+=4);_.next()}C=R,S+=L,M+=P}return(E<0||S==w)&&(A.size=S,A.start=C,A.skip=M),A.size>4?A:void 0}function m(w,E,_){let{id:S,start:C,end:M,size:T}=s;if(s.next(),T>=0&&S<o){let A=_;if(T>4){let O=s.pos-(T-4);for(;s.pos>O;)_=m(w,E,_)}E[--_]=A,E[--_]=M-w,E[--_]=C-w,E[--_]=S}else T==-3?u=S:T==-4&&(f=S);return _}let b=[],y=[];for(;s.pos>0;)c(r.start||0,r.bufferStart||0,b,y,-1,0);let x=(e=r.length)!==null&&e!==void 0?e:b.length?y[0]+b[0].length:0;return new pi(l[r.topID],b.reverse(),y.reverse(),x)}const oG=new WeakMap;function Px(r,e){if(!r.isAnonymous||e instanceof uc||e.type!=r)return 1;let t=oG.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof pi)){t=1;break}t+=Px(r,n)}oG.set(e,t)}return t}function mD(r,e,t,n,i,a,o,s,l){let u=0;for(let v=n;v<i;v++)u+=Px(r,e[v]);let f=Math.ceil(u*1.5/8),c=[],h=[];function d(v,p,g,m,b){for(let y=g;y<m;){let x=y,w=p[y],E=Px(r,v[y]);for(y++;y<m;y++){let _=Px(r,v[y]);if(E+_>=f)break;E+=_}if(y==x+1){if(E>f){let _=v[x];d(_.children,_.positions,0,_.children.length,p[x]+b);continue}c.push(v[x])}else{let _=p[y-1]+v[y-1].length-w;c.push(mD(r,v,p,x,y,w,_,null,l))}h.push(w+b-a)}}return d(e,t,n,i,0),(s||l)(c,h,o)}class Rh{constructor(e,t,n,i,a=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new Rh(0,e.length,e,0,!1,n)];for(let a of t)a.to>e.length&&i.push(a);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],a=1,o=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let f=s<t.length?t[s]:null,c=f?f.fromA:1e9;if(c-l>=n)for(;o&&o.from<c;){let h=o;if(l>=h.from||c<=h.to||u){let d=Math.max(h.from,l)-u,v=Math.min(h.to,c)-u;h=d>=v?null:new Rh(d,v,h.tree,h.offset+u,s>0,!!f)}if(h&&i.push(h),o.to>c)break;o=a<e.length?e[a++]:null}if(!f)break;l=f.toA,u=f.toA-f.toB}return i}}class nee{startParse(e,t,n){return typeof e=="string"&&(e=new VZe(e)),n=n?n.length?n.map(i=>new FC(i.from,i.to)):[new FC(0,0)]:[new FC(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let a=i.advance();if(a)return a}}}class VZe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Xr({perNode:!0});let HZe=0;class ll{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=HZe++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new ll([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new sE;return t=>t.modified.indexOf(e)>-1?t:sE.get(t.base||t,t.modified.concat(e).sort((n,i)=>n.id-i.id))}}let XZe=0;class sE{constructor(){this.instances=[],this.id=XZe++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(s=>s.base==e&&YZe(t,s.modified));if(n)return n;let i=[],a=new ll(i,e,t);for(let s of t)s.instances.push(a);let o=KZe(t);for(let s of e.set)if(!s.modified.length)for(let l of o)i.push(sE.get(s,l));return a}}function YZe(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function KZe(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function iee(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let a=[],o=2,s=i;for(let c=0;;){if(s=="..."&&c>0&&c+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!h)throw new RangeError("Invalid path: "+i);if(a.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),c+=h[0].length,c==i.length)break;let d=i[c++];if(c==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);s=i.slice(c)}let l=a.length-1,u=a[l];if(!u)throw new RangeError("Invalid path: "+i);let f=new lE(n,o,l>0?a.slice(0,l):null);e[u]=f.sort(e[u])}}return aee.add(e)}const aee=new Xr;class lE{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}lE.empty=new lE([],2,null);function oee(r,e){let t=Object.create(null);for(let a of r)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let o of a.tag)t[o.id]=a.class;let{scope:n,all:i=null}=e||{};return{style:a=>{let o=i;for(let s of a)for(let l of s.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:n}}function qZe(r,e){let t=null;for(let n of r){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function ZZe(r,e,t,n=0,i=r.length){let a=new QZe(n,Array.isArray(e)?e:[e],t);a.highlightRange(r.cursor(),n,i,"",a.highlighters),a.flush(i)}class QZe{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,a){let{type:o,from:s,to:l}=e;if(s>=n||l<=t)return;o.isTop&&(a=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=i,f=JZe(e)||lE.empty,c=qZe(a,f.tags);if(c&&(u&&(u+=" "),u+=c,f.mode==1&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(t,s),u),f.opaque)return;let h=e.tree&&e.tree.prop(Xr.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+s,1),v=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),p=e.firstChild();for(let g=0,m=s;;g++){let b=g<h.overlay.length?h.overlay[g]:null,y=b?b.from+s:l,x=Math.max(t,m),w=Math.min(n,y);if(x<w&&p)for(;e.from<w&&(this.highlightRange(e,x,w,i,a),this.startSpan(Math.min(w,e.to),u),!(e.to>=y||!e.nextSibling())););if(!b||y>n)break;m=b.to+s,m>t&&(this.highlightRange(d.cursor(),Math.max(t,b.from+s),Math.min(n,m),"",v),this.startSpan(Math.min(n,m),u))}p&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,a),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}}function JZe(r){let e=r.type.prop(aee);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const Ct=ll.define,Db=Ct(),Cf=Ct(),sG=Ct(Cf),lG=Ct(Cf),Af=Ct(),Nb=Ct(Af),$C=Ct(Af),nl=Ct(),Qc=Ct(nl),tl=Ct(),rl=Ct(),sk=Ct(),Ag=Ct(sk),Rb=Ct(),Ue={comment:Db,lineComment:Ct(Db),blockComment:Ct(Db),docComment:Ct(Db),name:Cf,variableName:Ct(Cf),typeName:sG,tagName:Ct(sG),propertyName:lG,attributeName:Ct(lG),className:Ct(Cf),labelName:Ct(Cf),namespace:Ct(Cf),macroName:Ct(Cf),literal:Af,string:Nb,docString:Ct(Nb),character:Ct(Nb),attributeValue:Ct(Nb),number:$C,integer:Ct($C),float:Ct($C),bool:Ct(Af),regexp:Ct(Af),escape:Ct(Af),color:Ct(Af),url:Ct(Af),keyword:tl,self:Ct(tl),null:Ct(tl),atom:Ct(tl),unit:Ct(tl),modifier:Ct(tl),operatorKeyword:Ct(tl),controlKeyword:Ct(tl),definitionKeyword:Ct(tl),moduleKeyword:Ct(tl),operator:rl,derefOperator:Ct(rl),arithmeticOperator:Ct(rl),logicOperator:Ct(rl),bitwiseOperator:Ct(rl),compareOperator:Ct(rl),updateOperator:Ct(rl),definitionOperator:Ct(rl),typeOperator:Ct(rl),controlOperator:Ct(rl),punctuation:sk,separator:Ct(sk),bracket:Ag,angleBracket:Ct(Ag),squareBracket:Ct(Ag),paren:Ct(Ag),brace:Ct(Ag),content:nl,heading:Qc,heading1:Ct(Qc),heading2:Ct(Qc),heading3:Ct(Qc),heading4:Ct(Qc),heading5:Ct(Qc),heading6:Ct(Qc),contentSeparator:Ct(nl),list:Ct(nl),quote:Ct(nl),emphasis:Ct(nl),strong:Ct(nl),link:Ct(nl),monospace:Ct(nl),strikethrough:Ct(nl),inserted:Ct(),deleted:Ct(),changed:Ct(),invalid:Ct(),meta:Rb,documentMeta:Ct(Rb),annotation:Ct(Rb),processingInstruction:Ct(Rb),definition:ll.defineModifier(),constant:ll.defineModifier(),function:ll.defineModifier(),standard:ll.defineModifier(),local:ll.defineModifier(),special:ll.defineModifier()};oee([{tag:Ue.link,class:"tok-link"},{tag:Ue.heading,class:"tok-heading"},{tag:Ue.emphasis,class:"tok-emphasis"},{tag:Ue.strong,class:"tok-strong"},{tag:Ue.keyword,class:"tok-keyword"},{tag:Ue.atom,class:"tok-atom"},{tag:Ue.bool,class:"tok-bool"},{tag:Ue.url,class:"tok-url"},{tag:Ue.labelName,class:"tok-labelName"},{tag:Ue.inserted,class:"tok-inserted"},{tag:Ue.deleted,class:"tok-deleted"},{tag:Ue.literal,class:"tok-literal"},{tag:Ue.string,class:"tok-string"},{tag:Ue.number,class:"tok-number"},{tag:[Ue.regexp,Ue.escape,Ue.special(Ue.string)],class:"tok-string2"},{tag:Ue.variableName,class:"tok-variableName"},{tag:Ue.local(Ue.variableName),class:"tok-variableName tok-local"},{tag:Ue.definition(Ue.variableName),class:"tok-variableName tok-definition"},{tag:Ue.special(Ue.variableName),class:"tok-variableName2"},{tag:Ue.definition(Ue.propertyName),class:"tok-propertyName tok-definition"},{tag:Ue.typeName,class:"tok-typeName"},{tag:Ue.namespace,class:"tok-namespace"},{tag:Ue.className,class:"tok-className"},{tag:Ue.macroName,class:"tok-macroName"},{tag:Ue.propertyName,class:"tok-propertyName"},{tag:Ue.operator,class:"tok-operator"},{tag:Ue.comment,class:"tok-comment"},{tag:Ue.meta,class:"tok-meta"},{tag:Ue.invalid,class:"tok-invalid"},{tag:Ue.punctuation,class:"tok-punctuation"}]);var zC;const dv=new Xr;function eQe(r){return Gt.define({combine:r?e=>e.concat(r):void 0})}const tQe=new Xr;class Cs{constructor(e,t,n=[],i=""){this.data=e,this.name=i,Jr.prototype.hasOwnProperty("tree")||Object.defineProperty(Jr.prototype,"tree",{get(){return ma(this)}}),this.parser=t,this.extension=[fc.of(this),Jr.languageData.of((a,o,s)=>{let l=uG(a,o,s),u=l.type.prop(dv);if(!u)return[];let f=a.facet(u),c=l.type.prop(tQe);if(c){let h=l.resolve(o-l.from,s);for(let d of c)if(d.test(h,a)){let v=a.facet(d.facet);return d.type=="replace"?v:v.concat(f)}}return f})].concat(n)}isActiveAt(e,t,n=-1){return uG(e,t,n).type.prop(dv)==this.data}findRegions(e){let t=e.facet(fc);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(a,o)=>{if(a.prop(dv)==this.data){n.push({from:o,to:o+a.length});return}let s=a.prop(Xr.mounted);if(s){if(s.tree.prop(dv)==this.data){if(s.overlay)for(let l of s.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+a.length});return}else if(s.overlay){let l=n.length;if(i(s.tree,s.overlay[0].from+o),n.length>l)return}}for(let l=0;l<a.children.length;l++){let u=a.children[l];u instanceof pi&&i(u,a.positions[l]+o)}};return i(ma(e),0),n}get allowsNesting(){return!0}}Cs.setState=Rr.define();function uG(r,e,t){let n=r.facet(fc),i=ma(r).topNode;if(!n||n.allowsNesting)for(let a=i;a;a=a.enter(e,t,Ui.ExcludeBuffers))a.type.isTop&&(i=a);return i}class uE extends Cs{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=eQe(e.languageData);return new uE(t,e.parser.configure({props:[dv.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new uE(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ma(r){let e=r.field(Cs.state,!1);return e?e.tree:pi.empty}class rQe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Tg=null;class fE{constructor(e,t,n=[],i,a,o,s,l){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new fE(e,t,[],pi.empty,0,n,[],null)}startParse(){return this.parser.startParse(new rQe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=pi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Rh.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Rh.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Tg;Tg=this;try{return e()}finally{Tg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=fG(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:a,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,f,c,h)=>l.push({fromA:u,toA:f,fromB:c,toB:h})),n=Rh.applyChanges(n,l),i=pi.empty,a=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let f=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);f<c&&s.push({from:f,to:c})}}}return new fE(this.parser,t,n,i,a,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=fG(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends nee{createParse(t,n,i){let a=i[0].from,o=i[i.length-1].to;return{parsedPos:a,advance(){let l=Tg;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new pi(Ja.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Tg}}function fG(r,e,t){return Rh.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class yp{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new yp(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=fE.create(e.facet(fc).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new yp(n)}}Cs.state=oa.define({create:yp.init,update(r,e){for(let t of e.effects)if(t.is(Cs.setState))return t.value;return e.startState.facet(fc)!=e.state.facet(fc)?yp.init(e.state):r.apply(e)}});let see=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(see=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const GC=typeof navigator<"u"&&(!((zC=navigator.scheduling)===null||zC===void 0)&&zC.isInputPending)?()=>navigator.scheduling.isInputPending():null,nQe=si.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Cs.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Cs.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=see(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,a=n.field(Cs.state);if(a.tree==a.context.tree&&a.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!GC?Math.max(25,e.timeRemaining()-5):1e9),s=a.context.treeLen<i&&n.doc.length>i+1e3,l=a.context.work(()=>GC&&GC()||Date.now()>o,i+(s?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Cs.setState.of(new yp(a.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Wa(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),fc=Gt.define({combine(r){return r.length?r[0]:null},enables:r=>[Cs.state,nQe,Dt.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class iQe{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const aQe=Gt.define(),h2=Gt.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function cE(r){let e=r.facet(h2);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function xm(r,e){let t="",n=r.tabSize,i=r.facet(h2)[0];if(i=="	"){for(;e>=n;)t+="	",e-=n;i=" "}for(let a=0;a<e;a++)t+=i;return t}function yD(r,e){r instanceof Jr&&(r=new d2(r));for(let n of r.state.facet(aQe)){let i=n(r,e);if(i!==void 0)return i}let t=ma(r.state);return t.length>=e?oQe(r,t,e):null}class d2{constructor(e,t={}){this.state=e,this.options=t,this.unit=cE(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(a+=o-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return Np(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let o=a(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const lee=new Xr;function oQe(r,e,t){let n=e.resolveStack(t),i=n.node.enterUnfinishedNodesBefore(t);if(i!=n.node){let a=[];for(let o=i;o!=n.node;o=o.parent)a.push(o);for(let o=a.length-1;o>=0;o--)n={node:a[o],next:n}}return uee(n,r,t)}function uee(r,e,t){for(let n=r;n;n=n.next){let i=lQe(n.node);if(i)return i(bD.create(e,t,n))}return 0}function sQe(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function lQe(r){let e=r.type.prop(lee);if(e)return e;let t=r.firstChild,n;if(t&&(n=t.type.prop(Xr.closedBy))){let i=r.lastChild,a=i&&n.indexOf(i.name)>-1;return o=>hQe(o,!0,1,void 0,a&&!sQe(o)?i.from:void 0)}return r.parent==null?uQe:null}function uQe(){return 0}class bD extends d2{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new bD(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(fQe(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return uee(this.context.next,this.base,this.pos)}}function fQe(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function cQe(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=r.options.simulateBreak,a=r.state.doc.lineAt(t.from),o=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let s=t.to;;){let l=e.childAfter(s);if(!l||l==n)return null;if(!l.type.isSkipped)return l.from<o?t:null;s=l.to}}function hQe(r,e,t,n,i){let a=r.textAfter,o=a.match(/^\s*/)[0].length,s=n&&a.slice(o,o+n.length)==n||i==r.pos+o,l=e?cQe(r):null;return l?s?r.column(l.from):r.column(l.to):r.baseIndent+(s?0:r.unit*t)}function cG({except:r,units:e=1}={}){return t=>{let n=r&&r.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const dQe=200;function vQe(){return Jr.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:n}=r.newSelection.main,i=t.lineAt(n);if(n>i.from+dQe)return r;let a=t.sliceString(i.from,n);if(!e.some(u=>u.test(a)))return r;let{state:o}=r,s=-1,l=[];for(let{head:u}of o.selection.ranges){let f=o.doc.lineAt(u);if(f.from==s)continue;s=f.from;let c=yD(o,f.from);if(c==null)continue;let h=/^\s*/.exec(f.text)[0],d=xm(o,c);h!=d&&l.push({from:f.from,to:f.from+h.length,insert:d})}return l.length?[r,{changes:l,sequential:!0}]:r})}const pQe=Gt.define(),fee=new Xr;function gQe(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}function mQe(r,e,t){let n=ma(r);if(n.length<t)return null;let i=n.resolveStack(t,1),a=null;for(let o=i;o;o=o.next){let s=o.node;if(s.to<=t||s.from>t)continue;if(a&&s.from<e)break;let l=s.type.prop(fee);if(l&&(s.to<n.length-50||n.length==r.doc.length||!yQe(s))){let u=l(s,r);u&&u.from<=t&&u.from>=e&&u.to>t&&(a=u)}}return a}function yQe(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function hE(r,e,t){for(let n of r.facet(pQe)){let i=n(r,e,t);if(i)return i}return mQe(r,e,t)}function cee(r,e){let t=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return t>=n?void 0:{from:t,to:n}}const v2=Rr.define({map:cee}),xy=Rr.define({map:cee});function hee(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(r.lineBlockAt(t));return e}const rd=oa.define({create(){return sr.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(v2)&&!bQe(r,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(xD),i=n?sr.replace({widget:new CQe(n(e.state,t.value))}):hG;r=r.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(xy)&&(r=r.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;r.between(n,n,(i,a)=>{i<n&&a>n&&(t=!0)}),t&&(r=r.update({filterFrom:n,filterTo:n,filter:(i,a)=>a<=n||i>=n}))}return r},provide:r=>Dt.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let n=r[t++],i=r[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(hG.range(n,i))}return sr.set(e,!0)}});function dE(r,e,t){var n;let i=null;return(n=r.field(rd,!1))===null||n===void 0||n.between(e,t,(a,o)=>{(!i||i.from>a)&&(i={from:a,to:o})}),i}function bQe(r,e,t){let n=!1;return r.between(e,e,(i,a)=>{i==e&&a==t&&(n=!0)}),n}function dee(r,e){return r.field(rd,!1)?e:e.concat(Rr.appendConfig.of(pee()))}const xQe=r=>{for(let e of hee(r)){let t=hE(r.state,e.from,e.to);if(t)return r.dispatch({effects:dee(r.state,[v2.of(t),vee(r,t)])}),!0}return!1},wQe=r=>{if(!r.state.field(rd,!1))return!1;let e=[];for(let t of hee(r)){let n=dE(r.state,t.from,t.to);n&&e.push(xy.of(n),vee(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function vee(r,e,t=!0){let n=r.state.doc.lineAt(e.from).number,i=r.state.doc.lineAt(e.to).number;return Dt.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${i}.`)}const EQe=r=>{let{state:e}=r,t=[];for(let n=0;n<e.doc.length;){let i=r.lineBlockAt(n),a=hE(e,i.from,i.to);a&&t.push(v2.of(a)),n=(a?r.lineBlockAt(a.to):i).to+1}return t.length&&r.dispatch({effects:dee(r.state,t)}),!!t.length},_Qe=r=>{let e=r.state.field(rd,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(n,i)=>{t.push(xy.of({from:n,to:i}))}),r.dispatch({effects:t}),!0},SQe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:xQe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:wQe},{key:"Ctrl-Alt-[",run:EQe},{key:"Ctrl-Alt-]",run:_Qe}],MQe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},xD=Gt.define({combine(r){return Yl(r,MQe)}});function pee(r){let e=[rd,OQe];return r&&e.push(xD.of(r)),e}function gee(r,e){let{state:t}=r,n=t.facet(xD),i=o=>{let s=r.lineBlockAt(r.posAtDOM(o.target)),l=dE(r.state,s.from,s.to);l&&r.dispatch({effects:xy.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,i,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=i,a}const hG=sr.replace({widget:new class extends qu{toDOM(r){return gee(r,null)}}});class CQe extends qu{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gee(e,this.value)}}const AQe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class jC extends Bu{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function TQe(r={}){let e=Object.assign(Object.assign({},AQe),r),t=new jC(e,!0),n=new jC(e,!1),i=si.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(fc)!=o.state.facet(fc)||o.startState.field(rd,!1)!=o.state.field(rd,!1)||ma(o.startState)!=ma(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let s=new ac;for(let l of o.viewportLineBlocks){let u=dE(o.state,l.from,l.to)?n:hE(o.state,l.from,l.to)?t:null;u&&s.add(l.from,l.from,u)}return s.finish()}}),{domEventHandlers:a}=e;return[i,OZe({class:"cm-foldGutter",markers(o){var s;return((s=o.plugin(i))===null||s===void 0?void 0:s.markers)||an.empty},initialSpacer(){return new jC(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,s,l)=>{if(a.click&&a.click(o,s,l))return!0;let u=dE(o.state,s.from,s.to);if(u)return o.dispatch({effects:xy.of(u)}),!0;let f=hE(o.state,s.from,s.to);return f?(o.dispatch({effects:v2.of(f)}),!0):!1}})}),pee()]}const OQe=Dt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class wy{constructor(e,t){this.specs=e;let n;function i(s){let l=oc.newName();return(n||(n=Object.create(null)))["."+l]=s,l}const a=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Cs?s=>s.prop(dv)==o.data:o?s=>s==o:void 0,this.style=oee(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:a}).style,this.module=n?new oc(n):null,this.themeType=t.themeType}static define(e,t){return new wy(e,t||{})}}const lk=Gt.define(),mee=Gt.define({combine(r){return r.length?[r[0]]:null}});function UC(r){let e=r.facet(lk);return e.length?e:r.facet(mee)}function yee(r,e){let t=[IQe],n;return r instanceof wy&&(r.module&&t.push(Dt.styleModule.of(r.module)),n=r.themeType),e!=null&&e.fallback?t.push(mee.of(r)):n?t.push(lk.computeN([Dt.darkTheme],i=>i.facet(Dt.darkTheme)==(n=="dark")?[r]:[])):t.push(lk.of(r)),t}class kQe{constructor(e){this.markCache=Object.create(null),this.tree=ma(e.state),this.decorations=this.buildDeco(e,UC(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ma(e.state),n=UC(e.state),i=n!=UC(e.startState),{viewport:a}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<a.to&&!i&&t.type==this.tree.type&&o>=a.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=a.to)}buildDeco(e,t){if(!t||!this.tree.length)return sr.none;let n=new ac;for(let{from:i,to:a}of e.visibleRanges)ZZe(this.tree,t,(o,s,l)=>{n.add(o,s,this.markCache[l]||(this.markCache[l]=sr.mark({class:l})))},i,a);return n.finish()}}const IQe=vd.high(si.fromClass(kQe,{decorations:r=>r.decorations})),LQe=wy.define([{tag:Ue.meta,color:"#404740"},{tag:Ue.link,textDecoration:"underline"},{tag:Ue.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ue.emphasis,fontStyle:"italic"},{tag:Ue.strong,fontWeight:"bold"},{tag:Ue.strikethrough,textDecoration:"line-through"},{tag:Ue.keyword,color:"#708"},{tag:[Ue.atom,Ue.bool,Ue.url,Ue.contentSeparator,Ue.labelName],color:"#219"},{tag:[Ue.literal,Ue.inserted],color:"#164"},{tag:[Ue.string,Ue.deleted],color:"#a11"},{tag:[Ue.regexp,Ue.escape,Ue.special(Ue.string)],color:"#e40"},{tag:Ue.definition(Ue.variableName),color:"#00f"},{tag:Ue.local(Ue.variableName),color:"#30a"},{tag:[Ue.typeName,Ue.namespace],color:"#085"},{tag:Ue.className,color:"#167"},{tag:[Ue.special(Ue.variableName),Ue.macroName],color:"#256"},{tag:Ue.definition(Ue.propertyName),color:"#00c"},{tag:Ue.comment,color:"#940"},{tag:Ue.invalid,color:"#f00"}]),PQe=Dt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),bee=1e4,xee="()[]{}",wee=Gt.define({combine(r){return Yl(r,{afterCursor:!0,brackets:xee,maxScanDistance:bee,renderMatch:RQe})}}),DQe=sr.mark({class:"cm-matchingBracket"}),NQe=sr.mark({class:"cm-nonmatchingBracket"});function RQe(r){let e=[],t=r.matched?DQe:NQe;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const BQe=oa.define({create(){return sr.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],n=e.state.facet(wee);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=_l(e.state,i.head,-1,n)||i.head>0&&_l(e.state,i.head-1,1,n)||n.afterCursor&&(_l(e.state,i.head,1,n)||i.head<e.state.doc.length&&_l(e.state,i.head+1,-1,n));a&&(t=t.concat(n.renderMatch(a,e.state)))}return sr.set(t,!0)},provide:r=>Dt.decorations.from(r)}),FQe=[BQe,PQe];function $Qe(r={}){return[wee.of(r),FQe]}const zQe=new Xr;function uk(r,e,t){let n=r.prop(e<0?Xr.openedBy:Xr.closedBy);if(n)return n;if(r.name.length==1){let i=t.indexOf(r.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function fk(r){let e=r.type.prop(zQe);return e?e(r.node):r}function _l(r,e,t,n={}){let i=n.maxScanDistance||bee,a=n.brackets||xee,o=ma(r),s=o.resolveInner(e,t);for(let l=s;l;l=l.parent){let u=uk(l.type,t,a);if(u&&l.from<l.to){let f=fk(l);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return GQe(r,e,t,l,f,u,a)}}return jQe(r,e,t,o,s.type,i,a)}function GQe(r,e,t,n,i,a,o){let s=n.parent,l={from:i.from,to:i.to},u=0,f=s==null?void 0:s.cursor();if(f&&(t<0?f.childBefore(n.from):f.childAfter(n.to)))do if(t<0?f.to<=n.from:f.from>=n.to){if(u==0&&a.indexOf(f.type.name)>-1&&f.from<f.to){let c=fk(f);return{start:l,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(uk(f.type,t,o))u++;else if(uk(f.type,-t,o)){if(u==0){let c=fk(f);return{start:l,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}u--}}while(t<0?f.prevSibling():f.nextSibling());return{start:l,matched:!1}}function jQe(r,e,t,n,i,a,o){let s=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),l=o.indexOf(s);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},f=r.doc.iterRange(e,t>0?r.doc.length:0),c=0;for(let h=0;!f.next().done&&h<=a;){let d=f.value;t<0&&(h+=d.length);let v=e+h*t;for(let p=t>0?0:d.length-1,g=t>0?d.length:-1;p!=g;p+=t){let m=o.indexOf(d[p]);if(!(m<0||n.resolveInner(v+p,1).type!=i))if(m%2==0==t>0)c++;else{if(c==1)return{start:u,end:{from:v+p,to:v+p+1},matched:m>>1==l>>1};c--}}t>0&&(h+=d.length)}return f.done?{start:u,matched:!1}:null}const UQe=Object.create(null),dG=[Ja.none],vG=[],pG=Object.create(null),WQe=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])WQe[r]=VQe(UQe,e);function WC(r,e){vG.indexOf(r)>-1||(vG.push(r),console.warn(e))}function VQe(r,e){let t=[];for(let s of e.split(" ")){let l=[];for(let u of s.split(".")){let f=r[u]||Ue[u];f?typeof f=="function"?l.length?l=l.map(f):WC(u,`Modifier ${u} used at start of tag`):l.length?WC(u,`Tag ${u} used as modifier`):l=Array.isArray(f)?f:[f]:WC(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(s=>s.id),a=pG[i];if(a)return a.id;let o=pG[i]=Ja.define({id:dG.length,name:n,props:[iee({[n]:t})]});return dG.push(o),o.id}In.RTL,In.LTR;const HQe=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),n=ED(r.state,t.from);return n.line?XQe(r):n.block?KQe(r):!1};function wD(r,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=r(e,t);return i?(n(t.update(i)),!0):!1}}const XQe=wD(QQe,0),YQe=wD(Eee,0),KQe=wD((r,e)=>Eee(r,e,ZQe(e)),0);function ED(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Og=50;function qQe(r,{open:e,close:t},n,i){let a=r.sliceDoc(n-Og,n),o=r.sliceDoc(i,i+Og),s=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,u=a.length-s;if(a.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:n-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let f,c;i-n<=2*Og?f=c=r.sliceDoc(n,i):(f=r.sliceDoc(n,n+Og),c=r.sliceDoc(i-Og,i));let h=/^\s*/.exec(f)[0].length,d=/\s*$/.exec(c)[0].length,v=c.length-d-t.length;return f.slice(h,h+e.length)==e&&c.slice(v,v+t.length)==t?{open:{pos:n+h+e.length,margin:/\s/.test(f.charAt(h+e.length))?1:0},close:{pos:i-d-t.length,margin:/\s/.test(c.charAt(v-1))?1:0}}:null}function ZQe(r){let e=[];for(let t of r.selection.ranges){let n=r.doc.lineAt(t.from),i=t.to<=n.to?n:r.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function Eee(r,e,t=e.selection.ranges){let n=t.map(a=>ED(e,a.from).block);if(!n.every(a=>a))return null;let i=t.map((a,o)=>qQe(e,n[o],a.from,a.to));if(r!=2&&!i.every(a=>a))return{changes:e.changes(t.map((a,o)=>i[o]?[]:[{from:a.from,insert:n[o].open+" "},{from:a.to,insert:" "+n[o].close}]))};if(r!=1&&i.some(a=>a)){let a=[];for(let o=0,s;o<i.length;o++)if(s=i[o]){let l=n[o],{open:u,close:f}=s;a.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:f.pos-f.margin,to:f.pos+l.close.length})}return{changes:a}}return null}function QQe(r,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:a,to:o}of t){let s=n.length,l=1e9,u=ED(e,a).line;if(u){for(let f=a;f<=o;){let c=e.doc.lineAt(f);if(c.from>i&&(a==o||o>c.from)){i=c.from;let h=/^\s*/.exec(c.text)[0].length,d=h==c.length,v=c.text.slice(h,h+u.length)==u?h:-1;h<c.text.length&&h<l&&(l=h),n.push({line:c,comment:v,token:u,indent:h,empty:d,single:!1})}f=c.to+1}if(l<1e9)for(let f=s;f<n.length;f++)n[f].indent<n[f].line.text.length&&(n[f].indent=l);n.length==s+1&&(n[s].single=!0)}}if(r!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:s,token:l,indent:u,empty:f,single:c}of n)(c||!f)&&a.push({from:s.from+u,insert:l+" "});let o=e.changes(a);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:s,token:l}of n)if(s>=0){let u=o.from+s,f=u+l.length;o.text[f-o.from]==" "&&f++,a.push({from:u,to:f})}return{changes:a}}return null}const ck=Ku.define(),JQe=Ku.define(),eJe=Gt.define(),_ee=Gt.define({combine(r){return Yl(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}}),See=oa.define({create(){return Sl.empty},update(r,e){let t=e.state.facet(_ee),n=e.annotation(ck);if(n){let l=Va.fromTransaction(e,n.selection),u=n.side,f=u==0?r.undone:r.done;return l?f=vE(f,f.length,t.minDepth,l):f=Aee(f,e.startState.selection),new Sl(u==0?n.rest:f,u==0?f:n.rest)}let i=e.annotation(JQe);if((i=="full"||i=="before")&&(r=r.isolate()),e.annotation(Li.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let a=Va.fromTransaction(e),o=e.annotation(Li.time),s=e.annotation(Li.userEvent);return a?r=r.addChanges(a,o,s,t,e):e.selection&&(r=r.addSelection(e.startState.selection,o,s,t.newGroupDelay)),(i=="full"||i=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Sl(r.done.map(Va.fromJSON),r.undone.map(Va.fromJSON))}});function tJe(r={}){return[See,_ee.of(r),Dt.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?Mee:e.inputType=="historyRedo"?hk:null;return n?(e.preventDefault(),n(t)):!1}})]}function p2(r,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field(See,!1);if(!i)return!1;let a=i.pop(r,t,e);return a?(n(a),!0):!1}}const Mee=p2(0,!1),hk=p2(1,!1),rJe=p2(0,!0),nJe=p2(1,!0);class Va{constructor(e,t,n,i,a){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new Va(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Va(e.changes&&Si.fromJSON(e.changes),[],e.mapped&&Ol.fromJSON(e.mapped),e.startSelection&&at.fromJSON(e.startSelection),e.selectionsAfter.map(at.fromJSON))}static fromTransaction(e,t){let n=Vo;for(let i of e.startState.facet(eJe)){let a=i(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new Va(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Vo)}static selection(e){return new Va(void 0,Vo,void 0,void 0,e)}}function vE(r,e,t,n){let i=e+1>t+20?e-t-1:0,a=r.slice(i,e);return a.push(n),a}function iJe(r,e){let t=[],n=!1;return r.iterChangedRanges((i,a)=>t.push(i,a)),e.iterChangedRanges((i,a,o,s)=>{for(let l=0;l<t.length;){let u=t[l++],f=t[l++];s>=u&&o<=f&&(n=!0)}}),n}function aJe(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function Cee(r,e){return r.length?e.length?r.concat(e):r:e}const Vo=[],oJe=200;function Aee(r,e){if(r.length){let t=r[r.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-oJe));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),vE(r,r.length-1,1e9,t.setSelAfter(n)))}else return[Va.selection([e])]}function sJe(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function VC(r,e){if(!r.length)return r;let t=r.length,n=Vo;for(;t;){let i=lJe(r[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let a=r.slice(0,t);return a[t-1]=i,a}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[Va.selection(n)]:Vo}function lJe(r,e,t){let n=Cee(r.selectionsAfter.length?r.selectionsAfter.map(s=>s.map(e)):Vo,t);if(!r.changes)return Va.selection(n);let i=r.changes.map(e),a=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(a):a;return new Va(i,Rr.mapEffects(r.effects,e),o,r.startSelection.map(a),n)}const uJe=/^(input\.type|delete)($|\.)/;class Sl{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Sl(this.done,this.undone):this}addChanges(e,t,n,i,a){let o=this.done,s=o[o.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!n||uJe.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,iJe(s.changes,e.changes))||n=="input.type.compose")?o=vE(o,o.length-1,i.minDepth,new Va(e.changes.compose(s.changes),Cee(e.effects,s.effects),s.mapped,s.startSelection,Vo)):o=vE(o,o.length,i.minDepth,e),new Sl(o,Vo,t,n)}addSelection(e,t,n,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Vo;return a.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&aJe(a[a.length-1],e)?this:new Sl(Aee(this.done,e),this.undone,t,n)}addMapping(e){return new Sl(VC(this.done,e),VC(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1],o=a.selectionsAfter[0]||t.selection;if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:ck.of({side:e,rest:sJe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let s=i.length==1?Vo:i.slice(0,i.length-1);return a.mapped&&(s=VC(s,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:ck.of({side:e,rest:s,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Sl.empty=new Sl(Vo,Vo);const fJe=[{key:"Mod-z",run:Mee,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:hk,preventDefault:!0},{linux:"Ctrl-Shift-z",run:hk,preventDefault:!0},{key:"Mod-u",run:rJe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:nJe,preventDefault:!0}];function Rp(r,e){return at.create(r.ranges.map(e),r.mainIndex)}function Kl(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Gs({state:r,dispatch:e},t){let n=Rp(r.selection,t);return n.eq(r.selection,!0)?!1:(e(Kl(r,n)),!0)}function g2(r,e){return at.cursor(e?r.to:r.from)}function Tee(r,e){return Gs(r,t=>t.empty?r.moveByChar(t,e):g2(t,e))}function ya(r){return r.textDirectionAt(r.state.selection.main.head)==In.LTR}const Oee=r=>Tee(r,!ya(r)),kee=r=>Tee(r,ya(r));function Iee(r,e){return Gs(r,t=>t.empty?r.moveByGroup(t,e):g2(t,e))}const cJe=r=>Iee(r,!ya(r)),hJe=r=>Iee(r,ya(r));function dJe(r,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function m2(r,e,t){let n=ma(r).resolveInner(e.head),i=t?Xr.closedBy:Xr.openedBy;for(let l=e.head;;){let u=t?n.childAfter(l):n.childBefore(l);if(!u)break;dJe(r,u,i)?n=u:l=t?u.to:u.from}let a=n.type.prop(i),o,s;return a&&(o=t?_l(r,n.from,1):_l(r,n.to,-1))&&o.matched?s=t?o.end.to:o.end.from:s=t?n.to:n.from,at.cursor(s,t?-1:1)}const vJe=r=>Gs(r,e=>m2(r.state,e,!ya(r))),pJe=r=>Gs(r,e=>m2(r.state,e,ya(r)));function Lee(r,e){return Gs(r,t=>{if(!t.empty)return g2(t,e);let n=r.moveVertically(t,e);return n.head!=t.head?n:r.moveToLineBoundary(t,e)})}const Pee=r=>Lee(r,!1),Dee=r=>Lee(r,!0);function Nee(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let a of r.state.facet(Dt.scrollMargins)){let o=a(r);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=r.scrollDOM.clientHeight-t-n}else i=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,i-5)}}function Ree(r,e){let t=Nee(r),{state:n}=r,i=Rp(n.selection,o=>o.empty?r.moveVertically(o,e,t.height):g2(o,e));if(i.eq(n.selection))return!1;let a;if(t.selfScroll){let o=r.coordsAtPos(n.selection.main.head),s=r.scrollDOM.getBoundingClientRect(),l=s.top+t.marginTop,u=s.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(a=Dt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return r.dispatch(Kl(n,i),{effects:a}),!0}const gG=r=>Ree(r,!1),dk=r=>Ree(r,!0);function Sc(r,e,t){let n=r.lineBlockAt(e.head),i=r.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=r.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let a=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(i=at.cursor(n.from+a))}return i}const gJe=r=>Gs(r,e=>Sc(r,e,!0)),mJe=r=>Gs(r,e=>Sc(r,e,!1)),yJe=r=>Gs(r,e=>Sc(r,e,!ya(r))),bJe=r=>Gs(r,e=>Sc(r,e,ya(r))),xJe=r=>Gs(r,e=>at.cursor(r.lineBlockAt(e.head).from,1)),wJe=r=>Gs(r,e=>at.cursor(r.lineBlockAt(e.head).to,-1));function EJe(r,e,t){let n=!1,i=Rp(r.selection,a=>{let o=_l(r,a.head,-1)||_l(r,a.head,1)||a.head>0&&_l(r,a.head-1,1)||a.head<r.doc.length&&_l(r,a.head+1,-1);if(!o||!o.end)return a;n=!0;let s=o.start.from==a.head?o.end.to:o.end.from;return t?at.range(a.anchor,s):at.cursor(s)});return n?(e(Kl(r,i)),!0):!1}const _Je=({state:r,dispatch:e})=>EJe(r,e,!1);function ss(r,e){let t=Rp(r.state.selection,n=>{let i=e(n);return at.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(Kl(r.state,t)),!0)}function Bee(r,e){return ss(r,t=>r.moveByChar(t,e))}const Fee=r=>Bee(r,!ya(r)),$ee=r=>Bee(r,ya(r));function zee(r,e){return ss(r,t=>r.moveByGroup(t,e))}const SJe=r=>zee(r,!ya(r)),MJe=r=>zee(r,ya(r)),CJe=r=>ss(r,e=>m2(r.state,e,!ya(r))),AJe=r=>ss(r,e=>m2(r.state,e,ya(r)));function Gee(r,e){return ss(r,t=>r.moveVertically(t,e))}const jee=r=>Gee(r,!1),Uee=r=>Gee(r,!0);function Wee(r,e){return ss(r,t=>r.moveVertically(t,e,Nee(r).height))}const mG=r=>Wee(r,!1),yG=r=>Wee(r,!0),TJe=r=>ss(r,e=>Sc(r,e,!0)),OJe=r=>ss(r,e=>Sc(r,e,!1)),kJe=r=>ss(r,e=>Sc(r,e,!ya(r))),IJe=r=>ss(r,e=>Sc(r,e,ya(r))),LJe=r=>ss(r,e=>at.cursor(r.lineBlockAt(e.head).from)),PJe=r=>ss(r,e=>at.cursor(r.lineBlockAt(e.head).to)),bG=({state:r,dispatch:e})=>(e(Kl(r,{anchor:0})),!0),xG=({state:r,dispatch:e})=>(e(Kl(r,{anchor:r.doc.length})),!0),wG=({state:r,dispatch:e})=>(e(Kl(r,{anchor:r.selection.main.anchor,head:0})),!0),EG=({state:r,dispatch:e})=>(e(Kl(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),DJe=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),NJe=({state:r,dispatch:e})=>{let t=y2(r).map(({from:n,to:i})=>at.range(n,Math.min(i+1,r.doc.length)));return e(r.update({selection:at.create(t),userEvent:"select"})),!0},RJe=({state:r,dispatch:e})=>{let t=Rp(r.selection,n=>{var i;let a=ma(r).resolveStack(n.from,1);for(let o=a;o;o=o.next){let{node:s}=o;if((s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from)&&(!((i=s.parent)===null||i===void 0)&&i.parent))return at.range(s.to,s.from)}return n});return e(Kl(r,t)),!0},BJe=({state:r,dispatch:e})=>{let t=r.selection,n=null;return t.ranges.length>1?n=at.create([t.main]):t.main.empty||(n=at.create([at.cursor(t.main.head)])),n?(e(Kl(r,n)),!0):!1};function Ey(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:n}=r,i=n.changeByRange(a=>{let{from:o,to:s}=a;if(o==s){let l=e(a);l<o?(t="delete.backward",l=Bb(r,l,!1)):l>o&&(t="delete.forward",l=Bb(r,l,!0)),o=Math.min(o,l),s=Math.max(s,l)}else o=Bb(r,o,!1),s=Bb(r,s,!0);return o==s?{range:a}:{changes:{from:o,to:s},range:at.cursor(o,o<a.head?-1:1)}});return i.changes.empty?!1:(r.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Dt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Bb(r,e,t){if(r instanceof Dt)for(let n of r.state.facet(Dt.atomicRanges).map(i=>i(r)))n.between(e,e,(i,a)=>{i<e&&a>e&&(e=t?a:i)});return e}const Vee=(r,e,t)=>Ey(r,n=>{let i=n.from,{state:a}=r,o=a.doc.lineAt(i),s,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(s=o.text.slice(0,i-o.from))){if(s[s.length-1]=="	")return i-1;let u=Np(s,a.tabSize),f=u%cE(a)||cE(a);for(let c=0;c<f&&s[s.length-1-c]==" ";c++)i--;l=i}else l=ra(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?a.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=ra(o.text,l-o.from,!1,!1)+o.from);return l}),vk=r=>Vee(r,!1,!0),Hee=r=>Vee(r,!0,!1),Xee=(r,e)=>Ey(r,t=>{let n=t.head,{state:i}=r,a=i.doc.lineAt(n),o=i.charCategorizer(n);for(let s=null;;){if(n==(e?a.to:a.from)){n==t.head&&a.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=ra(a.text,n-a.from,e)+a.from,u=a.text.slice(Math.min(n,l)-a.from,Math.max(n,l)-a.from),f=o(u);if(s!=null&&f!=s)break;(u!=" "||n!=t.head)&&(s=f),n=l}return n}),Yee=r=>Xee(r,!1),FJe=r=>Xee(r,!0),$Je=r=>Ey(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),zJe=r=>Ey(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),GJe=r=>Ey(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),jJe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:un.of(["",""])},range:at.cursor(n.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},UJe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let i=n.from,a=r.doc.lineAt(i),o=i==a.from?i-1:ra(a.text,i-a.from,!1)+a.from,s=i==a.to?i+1:ra(a.text,i-a.from,!0)+a.from;return{changes:{from:o,to:s,insert:r.doc.slice(i,s).append(r.doc.slice(o,i))},range:at.cursor(s)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function y2(r){let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.from),a=r.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=r.doc.lineAt(n.to-1)),t>=i.number){let o=e[e.length-1];o.to=a.to,o.ranges.push(n)}else e.push({from:i.from,to:a.to,ranges:[n]});t=a.number+1}return e}function Kee(r,e,t){if(r.readOnly)return!1;let n=[],i=[];for(let a of y2(r)){if(t?a.to==r.doc.length:a.from==0)continue;let o=r.doc.lineAt(t?a.to+1:a.from-1),s=o.length+1;if(t){n.push({from:a.to,to:o.to},{from:a.from,insert:o.text+r.lineBreak});for(let l of a.ranges)i.push(at.range(Math.min(r.doc.length,l.anchor+s),Math.min(r.doc.length,l.head+s)))}else{n.push({from:o.from,to:a.from},{from:a.to,insert:r.lineBreak+o.text});for(let l of a.ranges)i.push(at.range(l.anchor-s,l.head-s))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:at.create(i,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const WJe=({state:r,dispatch:e})=>Kee(r,e,!1),VJe=({state:r,dispatch:e})=>Kee(r,e,!0);function qee(r,e,t){if(r.readOnly)return!1;let n=[];for(let i of y2(r))t?n.push({from:i.from,insert:r.doc.slice(i.from,i.to)+r.lineBreak}):n.push({from:i.to,insert:r.lineBreak+r.doc.slice(i.from,i.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const HJe=({state:r,dispatch:e})=>qee(r,e,!1),XJe=({state:r,dispatch:e})=>qee(r,e,!0),YJe=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(y2(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),n=Rp(e.selection,i=>{let a;if(r.lineWrapping){let o=r.lineBlockAt(i.head),s=r.coordsAtPos(i.head,i.assoc||1);s&&(a=o.bottom+r.documentTop-s.bottom+r.defaultLineHeight/2)}return r.moveVertically(i,!0,a)}).map(t);return r.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function KJe(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ma(r).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),a;return n&&i&&n.to<=e&&i.from>=e&&(a=n.type.prop(Xr.closedBy))&&a.indexOf(i.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(i.from).from&&!/\S/.test(r.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const qJe=Zee(!1),ZJe=Zee(!0);function Zee(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:a,to:o}=i,s=e.doc.lineAt(a),l=!r&&a==o&&KJe(e,a);r&&(a=o=(o<=s.to?s:e.doc.lineAt(o)).to);let u=new d2(e,{simulateBreak:a,simulateDoubleBreak:!!l}),f=yD(u,a);for(f==null&&(f=Np(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));o<s.to&&/\s/.test(s.text[o-s.from]);)o++;l?{from:a,to:o}=l:a>s.from&&a<s.from+100&&!/\S/.test(s.text.slice(0,a))&&(a=s.from);let c=["",xm(e,f)];return l&&c.push(xm(e,u.lineIndent(s.from,-1))),{changes:{from:a,to:o,insert:un.of(c)},range:at.cursor(a+1+c[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function _D(r,e){let t=-1;return r.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let s=r.doc.lineAt(o);s.number>t&&(n.empty||n.to>s.from)&&(e(s,i,n),t=s.number),o=s.to+1}let a=r.changes(i);return{changes:i,range:at.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const QJe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),n=new d2(r,{overrideIndentation:a=>{let o=t[a];return o??-1}}),i=_D(r,(a,o,s)=>{let l=yD(n,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let u=/^\s*/.exec(a.text)[0],f=xm(r,l);(u!=f||s.from<a.from+u.length)&&(t[a.from]=l,o.push({from:a.from,to:a.from+u.length,insert:f}))});return i.changes.empty||e(r.update(i,{userEvent:"indent"})),!0},Qee=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(_D(r,(t,n)=>{n.push({from:t.from,insert:r.facet(h2)})}),{userEvent:"input.indent"})),!0),Jee=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(_D(r,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let a=Np(i,r.tabSize),o=0,s=xm(r,Math.max(0,a-cE(r)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+i.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),JJe=[{key:"Ctrl-b",run:Oee,shift:Fee,preventDefault:!0},{key:"Ctrl-f",run:kee,shift:$ee},{key:"Ctrl-p",run:Pee,shift:jee},{key:"Ctrl-n",run:Dee,shift:Uee},{key:"Ctrl-a",run:xJe,shift:LJe},{key:"Ctrl-e",run:wJe,shift:PJe},{key:"Ctrl-d",run:Hee},{key:"Ctrl-h",run:vk},{key:"Ctrl-k",run:$Je},{key:"Ctrl-Alt-h",run:Yee},{key:"Ctrl-o",run:jJe},{key:"Ctrl-t",run:UJe},{key:"Ctrl-v",run:dk}],eet=[{key:"ArrowLeft",run:Oee,shift:Fee,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cJe,shift:SJe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:yJe,shift:kJe,preventDefault:!0},{key:"ArrowRight",run:kee,shift:$ee,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:hJe,shift:MJe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:bJe,shift:IJe,preventDefault:!0},{key:"ArrowUp",run:Pee,shift:jee,preventDefault:!0},{mac:"Cmd-ArrowUp",run:bG,shift:wG},{mac:"Ctrl-ArrowUp",run:gG,shift:mG},{key:"ArrowDown",run:Dee,shift:Uee,preventDefault:!0},{mac:"Cmd-ArrowDown",run:xG,shift:EG},{mac:"Ctrl-ArrowDown",run:dk,shift:yG},{key:"PageUp",run:gG,shift:mG},{key:"PageDown",run:dk,shift:yG},{key:"Home",run:mJe,shift:OJe,preventDefault:!0},{key:"Mod-Home",run:bG,shift:wG},{key:"End",run:gJe,shift:TJe,preventDefault:!0},{key:"Mod-End",run:xG,shift:EG},{key:"Enter",run:qJe},{key:"Mod-a",run:DJe},{key:"Backspace",run:vk,shift:vk},{key:"Delete",run:Hee},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Yee},{key:"Mod-Delete",mac:"Alt-Delete",run:FJe},{mac:"Mod-Backspace",run:zJe},{mac:"Mod-Delete",run:GJe}].concat(JJe.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),tet=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:vJe,shift:CJe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:pJe,shift:AJe},{key:"Alt-ArrowUp",run:WJe},{key:"Shift-Alt-ArrowUp",run:HJe},{key:"Alt-ArrowDown",run:VJe},{key:"Shift-Alt-ArrowDown",run:XJe},{key:"Escape",run:BJe},{key:"Mod-Enter",run:ZJe},{key:"Alt-l",mac:"Ctrl-l",run:NJe},{key:"Mod-i",run:RJe,preventDefault:!0},{key:"Mod-[",run:Jee},{key:"Mod-]",run:Qee},{key:"Mod-Alt-\\",run:QJe},{key:"Shift-Mod-k",run:YJe},{key:"Shift-Mod-\\",run:_Je},{key:"Mod-/",run:HQe},{key:"Alt-A",run:YQe}].concat(eet),ret={key:"Tab",run:Qee,shift:Jee};function wn(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?r.setAttribute(n,i):i!=null&&(r[n]=i)}e++}for(;e<arguments.length;e++)ete(r,arguments[e]);return r}function ete(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)ete(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const _G=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class bp{constructor(e,t,n=0,i=e.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=a?s=>a(_G(s)):_G,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ji(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=rD(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Wo(e);let i=this.normalize(t);for(let a=0,o=n;;a++){let s=i.charCodeAt(a),l=this.match(s,o,this.bufferPos+this.bufferStart);if(a==i.length-1){if(l)return this.value=l,this;break}o==n&&a<t.length&&t.charCodeAt(a)==s&&o++}}}match(e,t,n){let i=null;for(let a=0;a<this.matches.length;a+=2){let o=this.matches[a],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[a+1],to:n}:(this.matches[a]++,s=!0)),s||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(bp.prototype[Symbol.iterator]=function(){return this});const tte={from:-1,to:-1,match:/.*/.exec("")},SD="gm"+(/x/.unicode==null?"":"u");class rte{constructor(e,t,n,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=tte,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new nte(e,t,n,i,a);this.re=new RegExp(t,SD+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=pE(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=pE(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const HC=new WeakMap;class Iv{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=HC.get(e);if(!i||i.from>=n||i.to<=t){let s=new Iv(t,e.sliceString(t,n));return HC.set(e,s),s}if(i.from==t&&i.to==n)return i;let{text:a,from:o}=i;return o>t&&(a=e.sliceString(t,o)+a,o=t),i.to<n&&(a+=e.sliceString(i.to,n)),HC.set(e,new Iv(o,a)),new Iv(t,a.slice(t-o,n-o))}}class nte{constructor(e,t,n,i,a){this.text=e,this.to=a,this.done=!1,this.value=tte,this.matchPos=pE(e,i),this.re=new RegExp(t,SD+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Iv.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=pE(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Iv.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(rte.prototype[Symbol.iterator]=nte.prototype[Symbol.iterator]=function(){return this});function net(r){try{return new RegExp(r,SD),!0}catch{return!1}}function pE(r,e){if(e>=r.length)return e;let t=r.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function pk(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=wn("input",{class:"cm-textfield",name:"line",value:e}),n=wn("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),r.dispatch({effects:gE.of(!1)}),r.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},wn("label",r.state.phrase("Go to line"),": ",t)," ",wn("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!a)return;let{state:o}=r,s=o.doc.lineAt(o.selection.main.head),[,l,u,f,c]=a,h=f?+f.slice(1):0,d=u?+u:s.number;if(u&&c){let g=d/100;l&&(g=g*(l=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else u&&l&&(d=d*(l=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),p=at.cursor(v.from+Math.max(0,Math.min(h,v.length)));r.dispatch({effects:[gE.of(!1),Dt.scrollIntoView(p.from,{y:"center"})],selection:p}),r.focus()}return{dom:n}}const gE=Rr.define(),SG=oa.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(gE)&&(r=t.value);return r},provide:r=>ym.from(r,e=>e?pk:null)}),iet=r=>{let e=mm(r,pk);if(!e){let t=[gE.of(!0)];r.state.field(SG,!1)==null&&t.push(Rr.appendConfig.of([SG,aet])),r.dispatch({effects:t}),e=mm(r,pk)}return e&&e.dom.querySelector("input").select(),!0},aet=Dt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),oet={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},ite=Gt.define({combine(r){return Yl(r,oet,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function set(r){let e=[det,het];return r&&e.push(ite.of(r)),e}const uet=sr.mark({class:"cm-selectionMatch"}),fet=sr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function MG(r,e,t,n){return(t==0||r(e.sliceDoc(t-1,t))!=Bn.Word)&&(n==e.doc.length||r(e.sliceDoc(n,n+1))!=Bn.Word)}function cet(r,e,t,n){return r(e.sliceDoc(t,t+1))==Bn.Word&&r(e.sliceDoc(n-1,n))==Bn.Word}const het=si.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(ite),{state:t}=r,n=t.selection;if(n.ranges.length>1)return sr.none;let i=n.main,a,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return sr.none;let l=t.wordAt(i.head);if(!l)return sr.none;o=t.charCategorizer(i.head),a=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return sr.none;if(e.wholeWords){if(a=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(MG(o,t,i.from,i.to)&&cet(o,t,i.from,i.to)))return sr.none}else if(a=t.sliceDoc(i.from,i.to),!a)return sr.none}let s=[];for(let l of r.visibleRanges){let u=new bp(t.doc,a,l.from,l.to);for(;!u.next().done;){let{from:f,to:c}=u.value;if((!o||MG(o,t,f,c))&&(i.empty&&f<=i.from&&c>=i.to?s.push(fet.range(f,c)):(f>=i.to||c<=i.from)&&s.push(uet.range(f,c)),s.length>e.maxMatches))return sr.none}}return sr.set(s)}},{decorations:r=>r.decorations}),det=Dt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),vet=({state:r,dispatch:e})=>{let{selection:t}=r,n=at.create(t.ranges.map(i=>r.wordAt(i.head)||at.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(r.update({selection:n})),!0)};function pet(r,e){let{main:t,ranges:n}=r.selection,i=r.wordAt(t.head),a=i&&i.from==t.from&&i.to==t.to;for(let o=!1,s=new bp(r.doc,e,n[n.length-1].to);;)if(s.next(),s.done){if(o)return null;s=new bp(r.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==s.value.from))continue;if(a){let l=r.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const get=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(a=>a.from===a.to))return vet({state:r,dispatch:e});let n=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(a=>r.sliceDoc(a.from,a.to)!=n))return!1;let i=pet(r,n);return i?(e(r.update({selection:r.selection.addRange(at.range(i.from,i.to),!1),effects:Dt.scrollIntoView(i.to)})),!0):!1},Bp=Gt.define({combine(r){return Yl(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Oet(e),scrollToMatch:e=>Dt.scrollIntoView(e)})}});class ate{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||net(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new xet(this):new yet(this)}getCursor(e,t=0,n){let i=e.doc?e:Jr.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?av(this,i,t,n):iv(this,i,t,n)}}class ote{constructor(e){this.spec=e}}function iv(r,e,t,n){return new bp(e.doc,r.unquoted,t,n,r.caseSensitive?void 0:i=>i.toLowerCase(),r.wholeWord?met(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function met(r,e){return(t,n,i,a)=>((a>t||a+i.length<n)&&(a=Math.max(0,t-2),i=r.sliceString(a,Math.min(r.length,n+2))),(e(mE(i,t-a))!=Bn.Word||e(yE(i,t-a))!=Bn.Word)&&(e(yE(i,n-a))!=Bn.Word||e(mE(i,n-a))!=Bn.Word))}class yet extends ote{constructor(e){super(e)}nextMatch(e,t,n){let i=iv(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=iv(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let a=Math.max(t,i-1e4-this.spec.unquoted.length),o=iv(this.spec,e,a,i),s=null;for(;!o.nextOverlapping().done;)s=o.value;if(s)return s;if(a==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=iv(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=iv(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function av(r,e,t,n){return new rte(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?bet(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function mE(r,e){return r.slice(ra(r,e,!1),e)}function yE(r,e){return r.slice(e,ra(r,e))}function bet(r){return(e,t,n)=>!n[0].length||(r(mE(n.input,n.index))!=Bn.Word||r(yE(n.input,n.index))!=Bn.Word)&&(r(yE(n.input,n.index+n[0].length))!=Bn.Word||r(mE(n.input,n.index+n[0].length))!=Bn.Word)}class xet extends ote{nextMatch(e,t,n){let i=av(this.spec,e,n,e.doc.length).next();return i.done&&(i=av(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let a=Math.max(t,n-i*1e4),o=av(this.spec,e,a,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(a==t||s.from>a+10))return s;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:t)}matchAll(e,t){let n=av(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=av(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const wm=Rr.define(),MD=Rr.define(),Xf=oa.define({create(r){return new XC(gk(r).create(),null)},update(r,e){for(let t of e.effects)t.is(wm)?r=new XC(t.value.create(),r.panel):t.is(MD)&&(r=new XC(r.query,t.value?CD:null));return r},provide:r=>ym.from(r,e=>e.panel)});class XC{constructor(e,t){this.query=e,this.panel=t}}const wet=sr.mark({class:"cm-searchMatch"}),Eet=sr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_et=si.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Xf))}update(r){let e=r.state.field(Xf);(e!=r.startState.field(Xf)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return sr.none;let{view:t}=this,n=new ac;for(let i=0,a=t.visibleRanges,o=a.length;i<o;i++){let{from:s,to:l}=a[i];for(;i<o-1&&l>a[i+1].from-2*250;)l=a[++i].to;r.highlight(t.state,s,l,(u,f)=>{let c=t.state.selection.ranges.some(h=>h.from==u&&h.to==f);n.add(u,f,c?Eet:wet)})}return n.finish()}},{decorations:r=>r.decorations});function _y(r){return e=>{let t=e.state.field(Xf,!1);return t&&t.query.spec.valid?r(e,t):ute(e)}}const bE=_y((r,{query:e})=>{let{to:t}=r.state.selection.main,n=e.nextMatch(r.state,t,t);if(!n)return!1;let i=at.single(n.from,n.to),a=r.state.facet(Bp);return r.dispatch({selection:i,effects:[AD(r,n),a.scrollToMatch(i.main,r)],userEvent:"select.search"}),lte(r),!0}),xE=_y((r,{query:e})=>{let{state:t}=r,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let a=at.single(i.from,i.to),o=r.state.facet(Bp);return r.dispatch({selection:a,effects:[AD(r,i),o.scrollToMatch(a.main,r)],userEvent:"select.search"}),lte(r),!0}),Met=_y((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:at.create(t.map(n=>at.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Cet=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,a=[],o=0;for(let s=new bp(r.doc,r.sliceDoc(n,i));!s.next().done;){if(a.length>1e3)return!1;s.value.from==n&&(o=a.length),a.push(at.range(s.value.from,s.value.to))}return e(r.update({selection:at.create(a,o),userEvent:"select.search.matches"})),!0},CG=_y((r,{query:e})=>{let{state:t}=r,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,n,n);if(!a)return!1;let o=[],s,l,u=[];if(a.from==n&&a.to==i&&(l=t.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=e.nextMatch(t,a.from,a.to),u.push(Dt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let f=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;s=at.single(a.from-f,a.to-f),u.push(AD(r,a)),u.push(t.facet(Bp).scrollToMatch(s.main,r))}return r.dispatch({changes:o,selection:s,effects:u,userEvent:"input.replace"}),!0}),Aet=_y((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(i=>{let{from:a,to:o}=i;return{from:a,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:Dt.announce.of(n),userEvent:"input.replace.all"}),!0});function CD(r){return r.state.facet(Bp).createPanel(r)}function gk(r,e){var t,n,i,a,o;let s=r.selection.main,l=s.empty||s.to>s.from+100?"":r.sliceDoc(s.from,s.to);if(e&&!l)return e;let u=r.facet(Bp);return new ate({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function ste(r){let e=mm(r,CD);return e&&e.dom.querySelector("[main-field]")}function lte(r){let e=ste(r);e&&e==r.root.activeElement&&e.select()}const ute=r=>{let e=r.state.field(Xf,!1);if(e&&e.panel){let t=ste(r);if(t&&t!=r.root.activeElement){let n=gk(r.state,e.query.spec);n.valid&&r.dispatch({effects:wm.of(n)}),t.focus(),t.select()}}else r.dispatch({effects:[MD.of(!0),e?wm.of(gk(r.state,e.query.spec)):Rr.appendConfig.of(Iet)]});return!0},fte=r=>{let e=r.state.field(Xf,!1);if(!e||!e.panel)return!1;let t=mm(r,CD);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:MD.of(!1)}),!0},Tet=[{key:"Mod-f",run:ute,scope:"editor search-panel"},{key:"F3",run:bE,shift:xE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:bE,shift:xE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:fte,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Cet},{key:"Mod-Alt-g",run:iet},{key:"Mod-d",run:get,preventDefault:!0}];class Oet{constructor(e){this.view=e;let t=this.query=e.state.field(Xf).query.spec;this.commit=this.commit.bind(this),this.searchField=wn("input",{value:t.search,placeholder:oo(e,"Find"),"aria-label":oo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=wn("input",{value:t.replace,placeholder:oo(e,"Replace"),"aria-label":oo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=wn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=wn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=wn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,a,o){return wn("button",{class:"cm-button",name:i,onclick:a,type:"button"},o)}this.dom=wn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>bE(e),[oo(e,"next")]),n("prev",()=>xE(e),[oo(e,"previous")]),n("select",()=>Met(e),[oo(e,"all")]),wn("label",null,[this.caseField,oo(e,"match case")]),wn("label",null,[this.reField,oo(e,"regexp")]),wn("label",null,[this.wordField,oo(e,"by word")]),...e.state.readOnly?[]:[wn("br"),this.replaceField,n("replace",()=>CG(e),[oo(e,"replace")]),n("replaceAll",()=>Aet(e),[oo(e,"replace all")])],wn("button",{name:"close",onclick:()=>fte(e),"aria-label":oo(e,"close"),type:"button"},["×"])])}commit(){let e=new ate({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:wm.of(e)}))}keydown(e){Fqe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?xE:bE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),CG(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(wm)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Bp).top}}function oo(r,e){return r.state.phrase(e)}const Fb=30,$b=/[\s\.,:;?!]/;function AD(r,{from:e,to:t}){let n=r.state.doc.lineAt(e),i=r.state.doc.lineAt(t).to,a=Math.max(n.from,e-Fb),o=Math.min(i,t+Fb),s=r.state.sliceDoc(a,o);if(a!=n.from){for(let l=0;l<Fb;l++)if(!$b.test(s[l+1])&&$b.test(s[l])){s=s.slice(l);break}}if(o!=i){for(let l=s.length-1;l>s.length-Fb;l--)if(!$b.test(s[l-1])&&$b.test(s[l])){s=s.slice(0,l);break}}return Dt.announce.of(`${r.state.phrase("current match")}. ${s} ${r.state.phrase("on line")} ${n.number}.`)}const ket=Dt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Iet=[Xf,vd.low(_et),ket];class cte{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=ma(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),a=i.search(hte(e,!1));return a<0?null:{from:n+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function AG(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Let(r){let e=Object.create(null),t=Object.create(null);for(let{label:i}of r){e[i[0]]=!0;for(let a=1;a<i.length;a++)t[i[a]]=!0}let n=AG(e)+AG(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function Pet(r){let e=r.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Let(e);return i=>{let a=i.matchBefore(n);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:t}:null}}class TG{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function Yf(r){return r.selection.main.from}function hte(r,e){var t;let{source:n}=r,i=e&&n[0]!="^",a=n[n.length-1]!="$";return!i&&!a?r:new RegExp(`${i?"^":""}(?:${n})${a?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const dte=Ku.define();function Det(r,e,t,n){let{main:i}=r.selection,a=t-i.from,o=n-i.from;return Object.assign(Object.assign({},r.changeByRange(s=>s!=i&&t!=n&&r.sliceDoc(s.from+a,s.from+o)!=r.sliceDoc(t,n)?{range:s}:{changes:{from:s.from+a,to:n==i.from?s.to:s.from+o,insert:e},range:at.cursor(s.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const OG=new WeakMap;function Net(r){if(!Array.isArray(r))return r;let e=OG.get(r);return e||OG.set(r,e=Pet(r)),e}const wE=Rr.define(),Em=Rr.define();class Ret{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Ji(e,t),i=Wo(n);this.chars.push(n);let a=e.slice(t,t+i),o=a.toUpperCase();this.folded.push(Ji(o==a?a.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:a,byWord:o}=this;if(t.length==1){let b=Ji(e,0),y=Wo(b),x=y==e.length?0:-100;if(b!=t[0])if(b==n[0])x+=-200;else return null;return this.ret(x,[0,y])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(s<0){for(let b=0,y=Math.min(e.length,200);b<y&&u<l;){let x=Ji(e,b);(x==t[u]||x==n[u])&&(i[u++]=b),b+=Wo(x)}if(u<l)return null}let f=0,c=0,h=!1,d=0,v=-1,p=-1,g=/[a-z]/.test(e),m=!0;for(let b=0,y=Math.min(e.length,200),x=0;b<y&&c<l;){let w=Ji(e,b);s<0&&(f<l&&w==t[f]&&(a[f++]=b),d<l&&(w==t[d]||w==n[d]?(d==0&&(v=b),p=b+1,d++):d=0));let E,_=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(E=rD(w))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!b||_==1&&g||x==0&&_!=0)&&(t[c]==w||n[c]==w&&(h=!0)?o[c++]=b:o.length&&(m=!1)),x=_,b+=Wo(w)}return c==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):d==l&&v==0?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):d==l?this.ret(-900-e.length,[v,p]):c==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],a=0;for(let o of t){let s=o+(this.astral?Wo(Ji(n,o)):1);a&&i[a-1]==o?i[a-1]=s:(i[a++]=o,i[a++]=s)}return this.ret(e-n.length,i)}}class Bet{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const ta=Gt.define({combine(r){return Yl(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Fet,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>kG(e(n),t(n)),optionClass:(e,t)=>n=>kG(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function kG(r,e){return r?e?r+" "+e:r:e}function Fet(r,e,t,n,i,a){let o=r.textDirection==In.RTL,s=o,l=!1,u="top",f,c,h=e.left-i.left,d=i.right-e.right,v=n.right-n.left,p=n.bottom-n.top;if(s&&h<Math.min(v,d)?s=!1:!s&&d<Math.min(v,h)&&(s=!0),v<=(s?h:d))f=Math.max(i.top,Math.min(t.top,i.bottom-p))-e.top,c=Math.min(400,s?h:d);else{l=!0,c=Math.min(400,(o?e.right:i.right-e.left)-30);let b=i.bottom-e.bottom;b>=p||b>e.top?f=t.bottom-e.top:(u="bottom",f=e.bottom-t.top)}let g=(e.bottom-e.top)/a.offsetHeight,m=(e.right-e.left)/a.offsetWidth;return{style:`${u}: ${f/g}px; max-width: ${c/m}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":s?"left":"right")}}function $et(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i,a){let o=document.createElement("span");o.className="cm-completionLabel";let s=t.displayLabel||t.label,l=0;for(let u=0;u<a.length;){let f=a[u++],c=a[u++];f>l&&o.appendChild(document.createTextNode(s.slice(l,f)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(s.slice(f,c))),h.className="cm-completionMatchedText",l=c}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function YC(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((r-e)/t);return{from:r-(n+1)*t,to:r-n*t}}class zet{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:a,selected:o}=i.open,s=e.state.facet(ta);this.optionContent=$et(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=YC(a.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let f=l.target,c;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(c=/-(\d+)$/.exec(f.id))&&+c[1]<u.length){this.applyCompletion(e,u[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(ta).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Em.of(null)})}),this.showOptions(a,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:a,selected:o,disabled:s}=n.open;(!i.open||i.open.options!=a)&&(this.range=YC(a.length,o,e.state.facet(ta).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),s!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=YC(t.options.length,t.selected,this.view.state.facet(ta).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(n);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>Wa(this.view.state,o,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:a}=e;n.appendChild(i),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&jet(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),a=this.space;if(!a){let o=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(a.bottom,t.bottom)-10||i.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(ta).positionInfo(this.view,t,i,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=e[o],{section:u}=s;if(u){let h=typeof u=="string"?u:u.name;if(h!=a&&(o>n.from||n.from==0))if(a=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const f=i.appendChild(document.createElement("li"));f.id=t+"-"+o,f.setAttribute("role","option");let c=this.optionClass(s);c&&(f.className=c);for(let h of this.optionContent){let d=h(s,this.view.state,this.view,l);d&&f.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Get(r,e){return t=>new zet(t,r,e)}function jet(r,e){let t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/r.offsetHeight;n.top<t.top?r.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(r.scrollTop+=(n.bottom-t.bottom)/i)}function IG(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function Uet(r,e){let t=[],n=null,i=u=>{t.push(u);let{section:f}=u.completion;if(f){n||(n=[]);let c=typeof f=="string"?f:f.name;n.some(h=>h.name==c)||n.push(typeof f=="string"?{name:c}:f)}},a=e.facet(ta);for(let u of r)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let c of u.result.options)i(new TG(c,u.source,f?f(c):[],1e9-t.length));else{let c=e.sliceDoc(u.from,u.to),h,d=a.filterStrict?new Bet(c):new Ret(c);for(let v of u.result.options)if(h=d.match(v.label)){let p=v.displayLabel?f?f(v,h.matched):[]:h.matched;i(new TG(v,u.source,p,h.score+(v.boost||0)))}}}if(n){let u=Object.create(null),f=0,c=(h,d)=>{var v,p;return((v=h.rank)!==null&&v!==void 0?v:1e9)-((p=d.rank)!==null&&p!==void 0?p:1e9)||(h.name<d.name?-1:1)};for(let h of n.sort(c))f-=1e5,u[h.name]=f;for(let h of t){let{section:d}=h.completion;d&&(h.score+=u[typeof d=="string"?d:d.name])}}let o=[],s=null,l=a.compareCompletions;for(let u of t.sort((f,c)=>c.score-f.score||l(f.completion,c.completion))){let f=u.completion;!s||s.label!=f.label||s.detail!=f.detail||s.type!=null&&f.type!=null&&s.type!=f.type||s.apply!=f.apply||s.boost!=f.boost?o.push(u):IG(u.completion)>IG(s)&&(o[o.length-1]=u),s=u.completion}return o}class vv{constructor(e,t,n,i,a,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=a,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vv(this.options,LG(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,a){let o=Uet(e,t);if(!o.length)return i&&e.some(l=>l.state==1)?new vv(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=t.facet(ta).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){s=u;break}}return new vv(o,LG(n,s),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:Yet,above:a.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new vv(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class EE{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new EE(Het,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(ta),a=(n.override||t.languageDataAt("autocomplete",Yf(t)).map(Net)).map(s=>(this.active.find(u=>u.source==s)||new _a(s,this.active.some(u=>u.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((s,l)=>s==this.active[l])&&(a=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||a.some(s=>s.hasResult()&&e.changes.touchesRange(s.from,s.to))||!Wet(a,this.active)?o=vv.build(a,t,this.id,o,n):o&&o.disabled&&!a.some(s=>s.state==1)&&(o=null),!o&&a.every(s=>s.state!=1)&&a.some(s=>s.hasResult())&&(a=a.map(s=>s.hasResult()?new _a(s.source,0):s));for(let s of e.effects)s.is(pte)&&(o=o&&o.setSelected(s.value,this.id));return a==this.active&&o==this.open?this:new EE(a,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Vet}}function Wet(r,e){if(r==e)return!0;for(let t=0,n=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let i=t==r.length,a=n==e.length;if(i||a)return i==a;if(r[t++].result!=e[n++].result)return!1}}const Vet={"aria-autocomplete":"list"};function LG(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const Het=[];function mk(r,e){if(r.isUserEvent("input.complete")){let t=r.annotation(dte);if(t&&e.activateOnCompletion(t))return"input"}return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class _a{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=mk(e,t),i=this;n?i=i.handleUserEvent(e,n,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new _a(i.source,0));for(let a of e.effects)if(a.is(wE))i=new _a(i.source,1,a.value?Yf(e.state):-1);else if(a.is(Em))i=new _a(i.source,0);else if(a.is(vte))for(let o of a.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new _a(this.source,1)}handleChange(e){return e.changes.touchesRange(Yf(e.startState))?new _a(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new _a(this.source,this.state,e.mapPos(this.explicitPos))}}class Lv extends _a{constructor(e,t,n,i,a){super(e,2,t),this.result=n,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,t,n){var i;let a=this.result;a.map&&!e.changes.empty&&(a=a.map(a,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Yf(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||!a||t=="delete"&&Yf(e.startState)==this.from)return new _a(this.source,t=="input"&&n.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return Xet(a.validFor,e.state,o,s)?new Lv(this.source,u,a,o,s):a.update&&(a=a.update(a,o,s,new cte(e.state,l,u>=0)))?new Lv(this.source,u,a,a.from,(i=a.to)!==null&&i!==void 0?i:Yf(e.state)):new _a(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new _a(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Lv(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new _a(this.source,0)}}function Xet(r,e,t,n){if(!r)return!1;let i=e.sliceDoc(t,n);return typeof r=="function"?r(i,t,n,e):hte(r,!0).test(i)}const vte=Rr.define({map(r,e){return r.map(t=>t.map(e))}}),pte=Rr.define(),za=oa.define({create(){return EE.start()},update(r,e){return r.update(e)},provide:r=>[dD.from(r,e=>e.tooltip),Dt.contentAttributes.from(r,e=>e.attrs)]});function TD(r,e){const t=e.completion.apply||e.completion.label;let n=r.state.field(za).active.find(i=>i.source==e.source);return n instanceof Lv?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},Det(r.state,t,n.from,n.to)),{annotations:dte.of(e.completion)})):t(r,e.completion,n.from,n.to),!0):!1}const Yet=Get(za,TD);function zb(r,e="option"){return t=>{let n=t.state.field(za,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(ta).interactionDelay)return!1;let i=1,a;e=="page"&&(a=KJ(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,s=n.open.selected>-1?n.open.selected+i*(r?1:-1):r?0:o-1;return s<0?s=e=="page"?0:o-1:s>=o&&(s=e=="page"?o-1:0),t.dispatch({effects:pte.of(s)}),!0}}const Ket=r=>{let e=r.state.field(za,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(ta).interactionDelay?!1:TD(r,e.open.options[e.open.selected])},qet=r=>r.state.field(za,!1)?(r.dispatch({effects:wE.of(!0)}),!0):!1,Zet=r=>{let e=r.state.field(za,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:Em.of(null)}),!0)};class Qet{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Jet=50,ett=1e3,ttt=si.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(za).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(za),t=r.state.facet(ta);if(!r.selectionSet&&!r.docChanged&&r.startState.field(za)==e)return;let n=r.transactions.some(a=>(a.selection||a.docChanged)&&!mk(a,t));for(let a=0;a<this.running.length;a++){let o=this.running[a];if(n||o.updates.length+r.transactions.length>Jet&&Date.now()-o.time>ett){for(let s of o.context.abortListeners)try{s()}catch(l){Wa(this.view.state,l)}o.context.abortListeners=null,this.running.splice(a--,1)}else o.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(a=>a.effects.some(o=>o.is(wE)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(a=>a.state==1&&!this.running.some(o=>o.active.source==a.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let a of r.transactions)mk(a,t)=="input"?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(za);for(let t of e.active)t.state==1&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Yf(e),n=new cte(e,t,r.explicitPos==t),i=new Qet(r,n);this.running.push(i),Promise.resolve(r.source(n)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:Em.of(null)}),Wa(this.view.state,a)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ta).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ta);for(let n=0;n<this.running.length;n++){let i=this.running[n];if(i.done===void 0)continue;if(this.running.splice(n--,1),i.done){let o=new Lv(i.active.source,i.active.explicitPos,i.done,i.done.from,(r=i.done.to)!==null&&r!==void 0?r:Yf(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)o=o.update(s,t);if(o.hasResult()){e.push(o);continue}}let a=this.view.state.field(za).active.find(o=>o.source==i.active.source);if(a&&a.state==1)if(i.done==null){let o=new _a(i.active.source,0);for(let s of i.updates)o=o.update(s,t);o.state!=1&&e.push(o)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:vte.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(za,!1);if(e&&e.tooltip&&this.view.state.facet(ta).closeOnBlur){let t=e.open&&KJ(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Em.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:wE.of(!1)}),20),this.composing=0}}}),rtt=typeof navigator=="object"&&/Win/.test(navigator.platform),ntt=vd.highest(Dt.domEventHandlers({keydown(r,e){let t=e.state.field(za,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(rtt&&r.altKey)||r.metaKey)return!1;let n=t.open.options[t.open.selected],i=t.active.find(o=>o.source==n.source),a=n.completion.commitCharacters||i.result.commitCharacters;return a&&a.indexOf(r.key)>-1&&TD(e,n),!1}})),itt=Dt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),_m={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},xh=Rr.define({map(r,e){let t=e.mapPos(r,-1,Ta.TrackAfter);return t??void 0}}),OD=new class extends Qh{};OD.startSide=1;OD.endSide=-1;const gte=oa.define({create(){return an.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(xh)&&(r=r.update({add:[OD.range(t.value,t.value+1)]}));return r}});function att(){return[stt,gte]}const KC="()[]{}<>";function mte(r){for(let e=0;e<KC.length;e+=2)if(KC.charCodeAt(e)==r)return KC.charAt(e+1);return rD(r<128?r:r+1)}function yte(r,e){return r.languageDataAt("closeBrackets",e)[0]||_m}const ott=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),stt=Dt.inputHandler.of((r,e,t,n)=>{if((ott?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let i=r.state.selection.main;if(n.length>2||n.length==2&&Wo(Ji(n,0))==1||e!=i.from||t!=i.to)return!1;let a=ftt(r.state,n);return a?(r.dispatch(a),!0):!1}),ltt=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=yte(r,r.selection.main.head).brackets||_m.brackets,i=null,a=r.changeByRange(o=>{if(o.empty){let s=ctt(r.doc,o.head);for(let l of n)if(l==s&&b2(r.doc,o.head)==mte(Ji(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:at.cursor(o.head-l.length)}}return{range:i=o}});return i||e(r.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},utt=[{key:"Backspace",run:ltt}];function ftt(r,e){let t=yte(r,r.selection.main.head),n=t.brackets||_m.brackets;for(let i of n){let a=mte(Ji(i,0));if(e==i)return a==i?vtt(r,i,n.indexOf(i+i+i)>-1,t):htt(r,i,a,t.before||_m.before);if(e==a&&bte(r,r.selection.main.from))return dtt(r,i,a)}return null}function bte(r,e){let t=!1;return r.field(gte).between(0,r.doc.length,n=>{n==e&&(t=!0)}),t}function b2(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Wo(Ji(t,0)))}function ctt(r,e){let t=r.sliceString(e-2,e);return Wo(Ji(t,0))==t.length?t:t.slice(1)}function htt(r,e,t,n){let i=null,a=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:xh.of(o.to+e.length),range:at.range(o.anchor+e.length,o.head+e.length)};let s=b2(r.doc,o.head);return!s||/\s/.test(s)||n.indexOf(s)>-1?{changes:{insert:e+t,from:o.head},effects:xh.of(o.head+e.length),range:at.cursor(o.head+e.length)}:{range:i=o}});return i?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function dtt(r,e,t){let n=null,i=r.changeByRange(a=>a.empty&&b2(r.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:at.cursor(a.head+t.length)}:n={range:a});return n?null:r.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function vtt(r,e,t,n){let i=n.stringPrefixes||_m.stringPrefixes,a=null,o=r.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:xh.of(s.to+e.length),range:at.range(s.anchor+e.length,s.head+e.length)};let l=s.head,u=b2(r.doc,l),f;if(u==e){if(PG(r,l))return{changes:{insert:e+e,from:l},effects:xh.of(l+e.length),range:at.cursor(l+e.length)};if(bte(r,l)){let h=t&&r.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:at.cursor(l+h.length)}}}else{if(t&&r.sliceDoc(l-2*e.length,l)==e+e&&(f=DG(r,l-2*e.length,i))>-1&&PG(r,f))return{changes:{insert:e+e+e+e,from:l},effects:xh.of(l+e.length),range:at.cursor(l+e.length)};if(r.charCategorizer(l)(u)!=Bn.Word&&DG(r,l,i)>-1&&!ptt(r,l,e,i))return{changes:{insert:e+e,from:l},effects:xh.of(l+e.length),range:at.cursor(l+e.length)}}return{range:a=s}});return a?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function PG(r,e){let t=ma(r).resolveInner(e+1);return t.parent&&t.from==e}function ptt(r,e,t,n){let i=ma(r).resolveInner(e,-1),a=n.reduce((o,s)=>Math.max(o,s.length),0);for(let o=0;o<5;o++){let s=r.sliceDoc(i.from,Math.min(i.to,i.from+t.length+a)),l=s.indexOf(t);if(!l||l>-1&&n.indexOf(s.slice(0,l))>-1){let f=i.firstChild;for(;f&&f.from==i.from&&f.to-f.from>t.length+l;){if(r.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function DG(r,e,t){let n=r.charCategorizer(e);if(n(r.sliceDoc(e-1,e))!=Bn.Word)return e;for(let i of t){let a=e-i.length;if(r.sliceDoc(a,e)==i&&n(r.sliceDoc(a-1,a))!=Bn.Word)return a}return-1}function gtt(r={}){return[ntt,za,ta.of(r),ttt,mtt,itt]}const xte=[{key:"Ctrl-Space",run:qet},{key:"Escape",run:Zet},{key:"ArrowDown",run:zb(!0)},{key:"ArrowUp",run:zb(!1)},{key:"PageDown",run:zb(!0,"page")},{key:"PageUp",run:zb(!1,"page")},{key:"Enter",run:Ket}],mtt=vd.highest(f2.computeN([ta],r=>r.facet(ta).defaultKeymap?[xte]:[]));class ytt{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class fh{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,a=n.facet(_te).markerFilter;a&&(i=a(i,n));let o=sr.set(i.map(s=>s.from==s.to||s.from==s.to-1&&n.doc.lineAt(s.from).to==s.from?sr.widget({widget:new Att(s),diagnostic:s}).range(s.from):sr.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s,inclusive:!0}).range(s.from,s.to)),!0);return new fh(o,t,xp(o))}}function xp(r,e=null,t=0){let n=null;return r.between(t,1e9,(i,a,{spec:o})=>{if(!(e&&o.diagnostic!=e))return n=new ytt(i,a,o.diagnostic),!1}),n}function btt(r,e){let t=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(n=>n.is(wte))||r.changes.touchesRange(t.from,t.to))}function xtt(r,e){return r.field(_o,!1)?e:e.concat(Rr.appendConfig.of(ktt))}const wte=Rr.define(),kD=Rr.define(),Ete=Rr.define(),_o=oa.define({create(){return new fh(sr.none,null,null)},update(r,e){if(e.docChanged){let t=r.diagnostics.map(e.changes),n=null;if(r.selected){let i=e.changes.mapPos(r.selected.from,1);n=xp(t,r.selected.diagnostic,i)||xp(t,null,i)}r=new fh(t,r.panel,n)}for(let t of e.effects)t.is(wte)?r=fh.init(t.value,r.panel,e.state):t.is(kD)?r=new fh(r.diagnostics,t.value?x2.open:null,r.selected):t.is(Ete)&&(r=new fh(r.diagnostics,r.panel,t.value));return r},provide:r=>[ym.from(r,e=>e.panel),Dt.decorations.from(r,e=>e.diagnostics)]}),wtt=sr.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function Ett(r,e,t){let{diagnostics:n}=r.state.field(_o),i=[],a=2e8,o=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:f})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(f.diagnostic),a=Math.min(l,a),o=Math.max(u,o))});let s=r.state.facet(_te).tooltipFilter;return s&&(i=s(i,r.state)),i.length?{pos:a,end:o,above:r.state.doc.lineAt(a).to<o,create(){return{dom:_tt(r,i)}}}:null}function _tt(r,e){return wn("ul",{class:"cm-tooltip-lint"},e.map(t=>Mte(r,t,!1)))}const Stt=r=>{let e=r.state.field(_o,!1);(!e||!e.panel)&&r.dispatch({effects:xtt(r.state,[kD.of(!0)])});let t=mm(r,x2.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},NG=r=>{let e=r.state.field(_o,!1);return!e||!e.panel?!1:(r.dispatch({effects:kD.of(!1)}),!0)},Mtt=r=>{let e=r.state.field(_o,!1);if(!e)return!1;let t=r.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},Ctt=[{key:"Mod-Shift-m",run:Stt,preventDefault:!0},{key:"F8",run:Mtt}],_te=Gt.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},Yl(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function Ste(r){let e=[];if(r)e:for(let{name:t}of r){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Mte(r,e,t){var n;let i=t?Ste(e.actions):[];return wn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},wn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,o)=>{let s=!1,l=h=>{if(h.preventDefault(),s)return;s=!0;let d=xp(r.state.field(_o).diagnostics,e);d&&a.apply(r,d.from,d.to)},{name:u}=a,f=i[o]?u.indexOf(i[o]):-1,c=f<0?u:[u.slice(0,f),wn("u",u.slice(f,f+1)),u.slice(f+1)];return wn("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${f<0?"":` (access key "${i[o]})"`}.`},c)}),e.source&&wn("div",{class:"cm-diagnosticSource"},e.source))}class Att extends qu{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return wn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class RG{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Mte(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class x2{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)NG(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=Ste(a.actions);for(let s=0;s<o.length;s++)if(o[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=xp(this.view.state.field(_o).diagnostics,a);l&&a.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=wn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=wn("div",{class:"cm-panel-lint"},this.list,wn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>NG(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(_o).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(_o),n=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(o,s,{spec:l})=>{let u=-1,f;for(let c=n;c<this.items.length;c++)if(this.items[c].diagnostic==l.diagnostic){u=c;break}u<0?(f=new RG(this.view,l.diagnostic),this.items.splice(n,0,f),i=!0):(f=this.items[u],u>n&&(this.items.splice(n,u-n),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),a=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new RG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:s})=>{let l=s.height/this.list.offsetHeight;o.top<s.top?this.list.scrollTop-=(s.top-o.top)/l:o.bottom>s.bottom&&(this.list.scrollTop+=(o.bottom-s.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(_o),n=xp(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Ete.of(n)})}static open(e){return new x2(e)}}function Ttt(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Gb(r){return Ttt(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Ott=Dt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Gb("#d11")},".cm-lintRange-warning":{backgroundImage:Gb("orange")},".cm-lintRange-info":{backgroundImage:Gb("#999")},".cm-lintRange-hint":{backgroundImage:Gb("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),ktt=[_o,Dt.decorations.compute([_o],r=>{let{selected:e,panel:t}=r.field(_o);return!e||!t||e.from==e.to?sr.none:sr.set([wtt.range(e.from,e.to)])}),CZe(Ett,{hideOn:btt}),Ott],Itt=[NZe(),FZe(),tZe(),tJe(),TQe(),Wqe(),Kqe(),Jr.allowMultipleSelections.of(!0),vQe(),yee(LQe,{fallback:!0}),$Qe(),att(),gtt(),pZe(),yZe(),sZe(),set(),f2.of([...utt,...tet,...Tet,...fJe,...SQe,...xte,...Ctt])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var Ltt=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[Itt]}),Ptt=Symbol("vue-codemirror-global-config"),Sa,Dtt=function(r){var e=r.onUpdate,t=r.onChange,n=r.onFocus,i=r.onBlur,a=function(o,s){var l={};for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&s.indexOf(u)<0&&(l[u]=o[u]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(u=Object.getOwnPropertySymbols(o);f<u.length;f++)s.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(o,u[f])&&(l[u[f]]=o[u[f]])}return l}(r,["onUpdate","onChange","onFocus","onBlur"]);return Jr.create({doc:a.doc,selection:a.selection,extensions:(Array.isArray(a.extensions)?a.extensions:[a.extensions]).concat([Dt.updateListener.of(function(o){e(o),o.docChanged&&t(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?n(o):i(o))})])})},ov=function(r){var e=new gy;return{compartment:e,run:function(t){e.get(r.state)?r.dispatch({effects:e.reconfigure(t)}):r.dispatch({effects:Rr.appendConfig.of(e.of(t))})}}},BG=function(r,e){var t=ov(r),n=t.compartment,i=t.run;return function(a){var o=n.get(r.state);i(a??o!==e?e:[])}},jb={type:Boolean,default:void 0},Ntt={autofocus:jb,disabled:jb,indentWithTab:jb,tabSize:Number,placeholder:String,style:Object,autoDestroy:jb,phrases:Object,root:Object,extensions:Array,selection:Object},Rtt={modelValue:{type:String,default:""}},Btt=Object.assign(Object.assign({},Ntt),Rtt);(function(r){r.Change="change",r.Update="update",r.Focus="focus",r.Blur="blur",r.Ready="ready",r.ModelUpdate="update:modelValue"})(Sa||(Sa={}));var ch={};ch[Sa.Change]=function(r,e){return!0},ch[Sa.Update]=function(r){return!0},ch[Sa.Focus]=function(r){return!0},ch[Sa.Blur]=function(r){return!0},ch[Sa.Ready]=function(r){return!0};var Cte={};Cte[Sa.ModelUpdate]=ch[Sa.Change];var Ftt=Object.assign(Object.assign({},ch),Cte),$tt=Rt({name:"VueCodemirror",props:Object.assign({},Btt),emits:Object.assign({},Ftt),setup:function(r,e){var t=As(),n=As(),i=As(),a=Object.assign(Object.assign({},Ltt),tn(Ptt,{})),o=Me(function(){var s={};return Object.keys(nn(r)).forEach(function(l){var u;l!=="modelValue"&&(s[l]=(u=r[l])!==null&&u!==void 0?u:a[l])}),s});return Fn(function(){var s;n.value=Dtt({doc:r.modelValue,selection:o.value.selection,extensions:(s=a.extensions)!==null&&s!==void 0?s:[],onFocus:function(u){return e.emit(Sa.Focus,u)},onBlur:function(u){return e.emit(Sa.Blur,u)},onUpdate:function(u){return e.emit(Sa.Update,u)},onChange:function(u,f){u!==r.modelValue&&(e.emit(Sa.Change,u,f),e.emit(Sa.ModelUpdate,u,f))}}),i.value=function(u){return new Dt(Object.assign({},u))}({state:n.value,parent:t.value,root:o.value.root});var l=function(u){var f=function(){return u.state.doc.toString()},c=ov(u).run,h=BG(u,[Dt.editable.of(!1),Jr.readOnly.of(!0)]),d=BG(u,f2.of([ret])),v=ov(u).run,p=ov(u).run,g=ov(u).run,m=ov(u).run;return{focus:function(){return u.focus()},getDoc:f,setDoc:function(b){b!==f()&&u.dispatch({changes:{from:0,to:u.state.doc.length,insert:b}})},reExtensions:c,toggleDisabled:h,toggleIndentWithTab:d,setTabSize:function(b){v([Jr.tabSize.of(b),h2.of(" ".repeat(b))])},setPhrases:function(b){p([Jr.phrases.of(b)])},setPlaceholder:function(b){g(cZe(b))},setStyle:function(b){b===void 0&&(b={}),m(Dt.theme({"&":Object.assign({},b)}))}}}(i.value);qt(function(){return r.modelValue},function(u){u!==l.getDoc()&&l.setDoc(u)}),qt(function(){return r.extensions},function(u){return l.reExtensions(u||[])},{immediate:!0}),qt(function(){return o.value.disabled},function(u){return l.toggleDisabled(u)},{immediate:!0}),qt(function(){return o.value.indentWithTab},function(u){return l.toggleIndentWithTab(u)},{immediate:!0}),qt(function(){return o.value.tabSize},function(u){return l.setTabSize(u)},{immediate:!0}),qt(function(){return o.value.phrases},function(u){return l.setPhrases(u||{})},{immediate:!0}),qt(function(){return o.value.placeholder},function(u){return l.setPlaceholder(u)},{immediate:!0}),qt(function(){return o.value.style},function(u){return l.setStyle(u)},{immediate:!0}),o.value.autofocus&&l.focus(),e.emit(Sa.Ready,{state:n.value,view:i.value,container:t.value})}),La(function(){o.value.autoDestroy&&i.value&&function(s){s.destroy()}(i.value)}),function(){return Ep("div",{class:"v-codemirror",style:{display:"contents"},ref:t})}}}),Hrt=$tt,FG={};class _E{constructor(e,t,n,i,a,o,s,l,u,f=0,c){this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=a,this.score=o,this.buffer=s,this.bufferBase=l,this.curContext=u,this.lookAhead=f,this.parent=c}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let i=e.parser.context;return new _E(e,[],t,n,n,0,[],0,i?new $G(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=e&65535,{parser:a}=this.p,o=a.dynamicPrecedence(i);if(o&&(this.score+=o),n==0){this.pushState(a.getGoto(this.state,i,!0),this.reducePos),i<a.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let s=this.stack.length-(n-1)*3-(e&262144?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let f=s?this.stack[s-1]:0,c=this.bufferBase+this.buffer.length-f;if(i<a.minRepeatTerm||e&131072){let h=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,h,c+4,!0)}if(e&262144)this.state=this.stack[s];else{let h=this.stack[s-3];this.state=a.getGoto(h,i,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,n,i=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,s=this.buffer.length;if(s==0&&o.parent&&(s=o.bufferBase-o.parent.bufferBase,o=o.parent),s>0&&o.buffer[s-4]==0&&o.buffer[s-1]>-1){if(t==n)return;if(o.buffer[s-2]>=t){o.buffer[s-2]=n;return}}}if(!a||this.pos==n)this.buffer.push(e,t,n,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>n;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=n,this.buffer[o+3]=i}}shift(e,t,n,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4);else{let a=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(a,1)||(this.reducePos=i)),this.pushState(a,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}}apply(e,t,n,i){e&65536?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new _E(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new ztt(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(n==0)return!1;if(!(n&65536))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let a=0,o;a<t.length;a+=2)(o=t[a+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[a],o);if(this.stack.length<120)for(let a=0;i.length<8&&a<t.length;a+=2){let o=t[a+1];i.some((s,l)=>l&1&&s==o)||i.push(t[a],o)}t=i}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let a=t[i+1];if(a==this.state)continue;let o=this.split();o.pushState(a,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,n.push(o)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=t&65535,a=this.stack.length-n*3;if(a<0||e.getGoto(this.stack[a],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,a)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let s=(o>>19)-a;if(s>1){let l=o&65535,u=this.stack.length-s*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return s<<19|65536|l}}else{let s=n(o,a+1);if(s!=null)return s}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new $G(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class $G{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class ztt{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class SE{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new SE(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new SE(this.stack,this.pos,this.index)}}function Ub(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let n=0,i=0;n<r.length;){let a=0;for(;;){let o=r.charCodeAt(n++),s=!1;if(o==126){a=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,s=!0),a+=l,s)break;a*=46}t?t[i++]=a:t=new e(a)}return t}class Dx{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const zG=new Dx;class Gtt{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=zG,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,a=this.pos+e;for(;a<n.from;){if(!i)return null;let o=this.ranges[--i];a-=n.from-o.to,n=o}for(;t<0?a>n.to:a>=n.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];a+=o.from-n.to,n=o}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,n,i;if(t>=0&&t<this.chunk.length)n=this.pos+e,i=this.chunk.charCodeAt(t);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(n=a,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let o=this.rangeIndex,s=this.range;for(;s.to<=n;)s=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-n)),i=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),i}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=zG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class Pv{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;jtt(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}Pv.prototype.contextual=Pv.prototype.fallback=Pv.prototype.extend=!1;Pv.prototype.fallback=Pv.prototype.extend=!1;function jtt(r,e,t,n,i,a){let o=0,s=1<<n,{dialect:l}=t.p.parser;e:for(;s&r[o];){let u=r[o+1];for(let d=o+3;d<u;d+=2)if((r[d+1]&s)>0){let v=r[d];if(l.allows(v)&&(e.token.value==-1||e.token.value==v||Utt(v,e.token.value,i,a))){e.acceptToken(v);break}}let f=e.next,c=0,h=r[o+2];if(e.next<0&&h>c&&r[u+h*3-3]==65535){o=r[u+h*3-1];continue e}for(;c<h;){let d=c+h>>1,v=u+d+(d<<1),p=r[v],g=r[v+1]||65536;if(f<p)h=d;else if(f>=g)c=d+1;else{o=r[v+2],e.advance();continue e}}break}}function GG(r,e,t){for(let n=e,i;(i=r[n])!=65535;n++)if(i==t)return n-e;return-1}function Utt(r,e,t,n){let i=GG(t,n,e);return i<0||GG(t,n,r)<i}const so=typeof process<"u"&&FG&&/\bparse\b/.test(FG.LOG);let qC=null;function jG(r,e,t){let n=r.cursor(Ui.IncludeAnonymous);for(n.moveTo(e);;)if(!(t<0?n.childBefore(e):n.childAfter(e)))for(;;){if((t<0?n.to<e:n.from>e)&&!n.type.isError)return t<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(r.length,Math.max(n.from+1,e+25));if(t<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return t<0?0:r.length}}class Wtt{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?jG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?jG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=n.children[i],o=this.start[t]+n.positions[i];if(o>e)return this.nextStart=o,null;if(a instanceof pi){if(o==e){if(o<this.safeFrom)return null;let s=o+a.length;if(s<=this.safeTo){let l=a.prop(Xr.lookAhead);if(!l||s+l<this.fragment.to)return a}}this.index[t]++,o+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+a.length}}}class Vtt{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new Dx)}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:a}=i,o=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<a.length;u++){if(!(1<<u&o))continue;let f=a[u],c=this.tokens[u];if(!(n&&!f.fallback)&&((f.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,f,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(l=Math.max(c.lookAhead,l)),c.value!=0)){let h=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!f.extend&&(n=c,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!n&&e.pos==this.stream.end&&(n=new Dx,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Dx,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:a}=n.p;for(let o=0;o<a.specialized.length;o++)if(a.specialized[o]==e.value){let s=a.specializers[o](this.stream.read(e.start,e.end),n);if(s>=0&&n.p.parser.dialect.allows(s>>1)){s&1?e.extended=s>>1:e.value=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let a=0;a<i;a+=3)if(this.actions[a]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:a}=e,{parser:o}=e.p,{data:s}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(a,l?2:1);;u+=3){if(s[u]==65535)if(s[u+1]==1)u=wu(s,u+2);else{i==0&&s[u+1]==2&&(i=this.putAction(wu(s,u+2),t,n,i));break}s[u]==t&&(i=this.putAction(wu(s,u+1),t,n,i))}return i}}class Htt{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Gtt(t,i),this.tokens=new Vtt(e,this.stream),this.topTerm=e.top[1];let{from:a}=i[0];this.stacks=[_E.start(this,e.top[0],a)],this.fragments=n.length&&this.stream.end-a>e.bufferLength*4?new Wtt(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],i,a;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let s=e[o];for(;;){if(this.tokens.mainToken=null,s.pos>t)n.push(s);else{if(this.advanceStack(s,n,e))continue;{i||(i=[],a=[]),i.push(s);let l=this.tokens.getMainToken(s);a.push(l.value,l.end)}}break}}if(!n.length){let o=i&&Ytt(i);if(o)return so&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw so&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,a,n);if(o)return so&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(n.length>o)for(n.sort((s,l)=>l.score-s.score);n.length>o;)n.pop();n.some(s=>s.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let o=0;o<n.length-1;o++){let s=n[o];for(let l=o+1;l<n.length;l++){let u=n[l];if(s.sameState(u)||s.buffer.length>500&&u.buffer.length>500)if((s.score-u.score||s.buffer.length-u.buffer.length)>0)n.splice(l--,1);else{n.splice(o--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let o=1;o<n.length;o++)n[o].pos<this.minStackPos&&(this.minStackPos=n[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:a}=this,o=so?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,f=u?e.curContext.hash:0;for(let c=this.fragments.nodeAt(i);c;){let h=this.parser.nodeSet.types[c.type.id]==c.type?a.getGoto(e.state,c.type.id):-1;if(h>-1&&c.length&&(!u||(c.prop(Xr.contextHash)||0)==f))return e.useNode(c,h),so&&console.log(o+this.stackID(e)+` (via reuse of ${a.getName(c.type.id)})`),!0;if(!(c instanceof pi)||c.children.length==0||c.positions[0]>0)break;let d=c.children[0];if(d instanceof pi&&c.positions[0]==0)c=d;else break}}let s=a.stateSlot(e.state,4);if(s>0)return e.reduce(s),so&&console.log(o+this.stackID(e)+` (via always-reduce ${a.getName(s&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let f=l[u++],c=l[u++],h=l[u++],d=u==l.length||!n,v=d?e:e.split(),p=this.tokens.mainToken;if(v.apply(f,c,p?p.start:v.pos,h),so&&console.log(o+this.stackID(v)+` (via ${f&65536?`reduce of ${a.getName(f&65535)}`:"shift"} for ${a.getName(c)} @ ${i}${v==e?"":", split"})`),d)return!0;v.pos>i?t.push(v):n.push(v)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return UG(e,t),!0}}runRecovery(e,t,n){let i=null,a=!1;for(let o=0;o<e.length;o++){let s=e[o],l=t[o<<1],u=t[(o<<1)+1],f=so?this.stackID(s)+" -> ":"";if(s.deadEnd&&(a||(a=!0,s.restart(),so&&console.log(f+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))))continue;let c=s.split(),h=f;for(let d=0;c.forceReduce()&&d<10&&(so&&console.log(h+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,n));d++)so&&(h=this.stackID(c)+" -> ");for(let d of s.recoverByInsert(l))so&&console.log(f+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,n);this.stream.end>s.pos?(u==s.pos&&(u++,l=0),s.recoverByDelete(l,u),so&&console.log(f+this.stackID(s)+` (via recover-delete ${this.parser.getName(l)})`),UG(s,n)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),pi.build({buffer:SE.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(qC||(qC=new WeakMap)).get(e);return t||qC.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function UG(r,e){for(let t=0;t<e.length;t++){let n=e[t];if(n.pos==r.pos&&n.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class Xtt{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}class ME extends nee{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let s=0;s<e.repeatNodeCount;s++)t.push("");let n=Object.keys(e.topRules).map(s=>e.topRules[s][1]),i=[];for(let s=0;s<t.length;s++)i.push([]);function a(s,l,u){i[s].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let s of e.nodeProps){let l=s[0];typeof l=="string"&&(l=Xr[l]);for(let u=1;u<s.length;){let f=s[u++];if(f>=0)a(f,l,s[u++]);else{let c=s[u+-f];for(let h=-f;h>0;h--)a(s[u++],l,c);u++}}}this.nodeSet=new vD(t.map((s,l)=>Ja.define({name:l>=this.minRepeatTerm?void 0:s,id:l,props:i[l],top:n.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=JJ;let o=Ub(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(WG),this.states=Ub(e.states,Uint32Array),this.data=Ub(e.stateData),this.goto=Ub(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(s=>typeof s=="number"?new Pv(o,s):s),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new Htt(this,e,t,n);for(let a of this.wrappers)i=a(i,e,t,n);return i}getGoto(e,t,n=!1){let i=this.goto;if(t>=i[0])return-1;for(let a=i[t+1];;){let o=i[a++],s=o&1,l=i[a++];if(s&&n)return l;for(let u=a+(o>>1);a<u;a++)if(i[a]==e)return l;if(s)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let a=this.stateSlot(e,i?2:1),o;;a+=3){if((o=n[a])==65535)if(n[a+1]==1)o=n[a=wu(n,a+2)];else{if(n[a+1]==2)return wu(n,a+2);break}if(o==t||o==0)return wu(n,a+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,n=>n==t?!0:null)}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let a=this.stateSlot(e,1);i==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=wu(this.data,a+2);else break;i=t(wu(this.data,a+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=wu(this.data,n+2);else break;if(!(this.data[n+2]&1)){let i=this.data[n+1];t.some((a,o)=>o&1&&a==i)||t.push(this.data[n],i)}}return t}configure(e){let t=Object.assign(Object.create(ME.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(n=>{let i=e.tokenizers.find(a=>a.from==n);return i?i.to:n})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,i)=>{let a=e.specializers.find(s=>s.from==n.external);if(!a)return n;let o=Object.assign(Object.assign({},n),{external:a.to});return t.specializers[i]=WG(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let a of e.split(" ")){let o=t.indexOf(a);o>=0&&(n[o]=!0)}let i=null;for(let a=0;a<t.length;a++)if(!n[a])for(let o=this.dialects[t[a]],s;(s=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new Xtt(e,n,i)}static deserialize(e){return new ME(e)}}function wu(r,e){return r[e]|r[e+1]<<16}function Ytt(r){let e=null;for(let t of r){let n=t.p.stoppedAt;(t.pos==t.p.stream.end||n!=null&&t.pos>n)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function WG(r){if(r.external){let e=r.extend?1:0;return(t,n)=>r.external(t,n)<<1|e}return r.get}const Ktt=iee({String:Ue.string,Number:Ue.number,"True False":Ue.bool,PropertyName:Ue.propertyName,Null:Ue.null,",":Ue.separator,"[ ]":Ue.squareBracket,"{ }":Ue.brace}),qtt=ME.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[Ktt],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Ztt=uE.define({name:"json",parser:qtt.configure({props:[lee.add({Object:cG({except:/^\s*\}/}),Array:cG({except:/^\s*\]/})}),fee.add({"Object Array":gQe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Xrt(){return new iQe(Ztt)}const Qtt="#e5c07b",VG="#e06c75",Jtt="#56b6c2",ert="#ffffff",Nx="#abb2bf",yk="#7d8799",trt="#61afef",rrt="#98c379",HG="#d19a66",nrt="#c678dd",irt="#21252b",XG="#2c313a",YG="#282c34",ZC="#353a42",art="#3E4451",KG="#528bff",ort=Dt.theme({"&":{color:Nx,backgroundColor:YG},".cm-content":{caretColor:KG},".cm-cursor, .cm-dropCursor":{borderLeftColor:KG},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:art},".cm-panels":{backgroundColor:irt,color:Nx},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:YG,color:yk,border:"none"},".cm-activeLineGutter":{backgroundColor:XG},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ZC},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ZC,borderBottomColor:ZC},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:XG,color:Nx}}},{dark:!0}),srt=wy.define([{tag:Ue.keyword,color:nrt},{tag:[Ue.name,Ue.deleted,Ue.character,Ue.propertyName,Ue.macroName],color:VG},{tag:[Ue.function(Ue.variableName),Ue.labelName],color:trt},{tag:[Ue.color,Ue.constant(Ue.name),Ue.standard(Ue.name)],color:HG},{tag:[Ue.definition(Ue.name),Ue.separator],color:Nx},{tag:[Ue.typeName,Ue.className,Ue.number,Ue.changed,Ue.annotation,Ue.modifier,Ue.self,Ue.namespace],color:Qtt},{tag:[Ue.operator,Ue.operatorKeyword,Ue.url,Ue.escape,Ue.regexp,Ue.link,Ue.special(Ue.string)],color:Jtt},{tag:[Ue.meta,Ue.comment],color:yk},{tag:Ue.strong,fontWeight:"bold"},{tag:Ue.emphasis,fontStyle:"italic"},{tag:Ue.strikethrough,textDecoration:"line-through"},{tag:Ue.link,color:yk,textDecoration:"underline"},{tag:Ue.heading,fontWeight:"bold",color:VG},{tag:[Ue.atom,Ue.bool,Ue.special(Ue.variableName)],color:HG},{tag:[Ue.processingInstruction,Ue.string,Ue.inserted],color:rrt},{tag:Ue.invalid,color:ert}]),Yrt=[ort,yee(srt)],Krt={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((r,e)=>(r[e.id]=e)&&r,{})}},methods:{updatePaneComponents(){this.panes.forEach(r=>{r.update&&r.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[r.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(r,e){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=e},onMouseMove(r){this.touch.mouseDown&&(r.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(r)),this.$emit("resize",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(r=>({min:r.min,max:r.max,size:r.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(r,e){"ontouchstart"in window&&(r.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===e?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(r,e),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=e,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[e])},onSplitterDblClick(r,e){let t=0;this.panes=this.panes.map((n,i)=>(n.size=i===e?n.max:n.min,i!==e&&(t+=n.min),n)),this.panes[e].size-=t,this.$emit("pane-maximize",this.panes[e]),this.$emit("resized",this.panes.map(n=>({min:n.min,max:n.max,size:n.size})))},onPaneClick(r,e){this.$emit("pane-click",this.indexedPanes[e])},getCurrentMouseDrag(r){const e=this.container.getBoundingClientRect(),{clientX:t,clientY:n}="ontouchstart"in window&&r.touches?r.touches[0]:r;return{x:t-e.left,y:n-e.top}},getCurrentDragPercentage(r){r=r[this.horizontal?"y":"x"];const e=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(r=e-r),r*100/e},calculatePanesSize(r){const e=this.touch.activeSplitter;let t={prevPanesSize:this.sumPrevPanesSize(e),nextPanesSize:this.sumNextPanesSize(e),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(this.pushOtherPanes?0:t.prevPanesSize),i=100-(this.pushOtherPanes?0:t.nextPanesSize),a=Math.max(Math.min(this.getCurrentDragPercentage(r),i),n);let o=[e,e+1],s=this.panes[o[0]]||null,l=this.panes[o[1]]||null;const u=s.max<100&&a>=s.max+t.prevPanesSize,f=l.max<100&&a<=100-(l.max+this.sumNextPanesSize(e+1));if(u||f){u?(s.size=s.max,l.size=Math.max(100-s.max-t.prevPanesSize-t.nextPanesSize,0)):(s.size=Math.max(100-l.max-t.prevPanesSize-this.sumNextPanesSize(e+1),0),l.size=l.max);return}if(this.pushOtherPanes){const c=this.doPushOtherPanes(t,a);if(!c)return;({sums:t,panesToResize:o}=c),s=this.panes[o[0]]||null,l=this.panes[o[1]]||null}s!==null&&(s.size=Math.min(Math.max(a-t.prevPanesSize-t.prevReachedMinPanes,s.min),s.max)),l!==null&&(l.size=Math.min(Math.max(100-a-t.nextPanesSize-t.nextReachedMinPanes,l.min),l.max))},doPushOtherPanes(r,e){const t=this.touch.activeSplitter,n=[t,t+1];return e<r.prevPanesSize+this.panes[n[0]].min&&(n[0]=this.findPrevExpandedPane(t).index,r.prevReachedMinPanes=0,n[0]<t&&this.panes.forEach((i,a)=>{a>n[0]&&a<=t&&(i.size=i.min,r.prevReachedMinPanes+=i.min)}),r.prevPanesSize=this.sumPrevPanesSize(n[0]),n[0]===void 0)?(r.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((i,a)=>{a>0&&a<=t&&(i.size=i.min,r.prevReachedMinPanes+=i.min)}),this.panes[n[1]].size=100-r.prevReachedMinPanes-this.panes[0].min-r.prevPanesSize-r.nextPanesSize,null):e>100-r.nextPanesSize-this.panes[n[1]].min&&(n[1]=this.findNextExpandedPane(t).index,r.nextReachedMinPanes=0,n[1]>t+1&&this.panes.forEach((i,a)=>{a>t&&a<n[1]&&(i.size=i.min,r.nextReachedMinPanes+=i.min)}),r.nextPanesSize=this.sumNextPanesSize(n[1]-1),n[1]===void 0)?(r.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((i,a)=>{a<this.panesCount-1&&a>=t+1&&(i.size=i.min,r.nextReachedMinPanes+=i.min)}),this.panes[n[0]].size=100-r.prevPanesSize-r.nextReachedMinPanes-this.panes[this.panesCount-1].min-r.nextPanesSize,null):{sums:r,panesToResize:n}},sumPrevPanesSize(r){return this.panes.reduce((e,t,n)=>e+(n<r?t.size:0),0)},sumNextPanesSize(r){return this.panes.reduce((e,t,n)=>e+(n>r+1?t.size:0),0)},findPrevExpandedPane(r){return[...this.panes].reverse().find(e=>e.index<r&&e.size>e.min)||{}},findNextExpandedPane(r){return this.panes.find(e=>e.index>r+1&&e.size>e.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(r=>{const e=r.classList.contains("splitpanes__pane"),t=r.classList.contains("splitpanes__splitter");!e&&!t&&(r.parentNode.removeChild(r),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(r,e,t=!1){const n=r-1,i=document.createElement("div");i.classList.add("splitpanes__splitter"),t||(i.onmousedown=a=>this.onMouseDown(a,n),typeof window<"u"&&"ontouchstart"in window&&(i.ontouchstart=a=>this.onMouseDown(a,n)),i.onclick=a=>this.onSplitterClick(a,n+1)),this.dblClickSplitter&&(i.ondblclick=a=>this.onSplitterDblClick(a,n+1)),e.parentNode.insertBefore(i,e)},removeSplitter(r){r.onmousedown=void 0,r.onclick=void 0,r.ondblclick=void 0,r.parentNode.removeChild(r)},redoSplitters(){const r=Array.from(this.container.children);r.forEach(t=>{t.className.includes("splitpanes__splitter")&&this.removeSplitter(t)});let e=0;r.forEach(t=>{t.className.includes("splitpanes__pane")&&(!e&&this.firstSplitter?this.addSplitter(e,t,!0):e&&this.addSplitter(e,t),e++)})},requestUpdate({target:r,...e}){const t=this.indexedPanes[r._.uid];Object.entries(e).forEach(([n,i])=>t[n]=i)},onPaneAdd(r){let e=-1;Array.from(r.$el.parentNode.children).some(i=>(i.className.includes("splitpanes__pane")&&e++,i===r.$el));const t=parseFloat(r.minSize),n=parseFloat(r.maxSize);this.panes.splice(e,0,{id:r._.uid,index:e,min:isNaN(t)?0:t,max:isNaN(n)?100:n,size:r.size===null?null:parseFloat(r.size),givenSize:r.size,update:r.update}),this.panes.forEach((i,a)=>i.index=a),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[e]}),this.$emit("pane-add",{index:e,panes:this.panes.map(i=>({min:i.min,max:i.max,size:i.size}))})})},onPaneRemove(r){const e=this.panes.findIndex(n=>n.id===r._.uid),t=this.panes.splice(e,1)[0];this.panes.forEach((n,i)=>n.index=i),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...t,index:e}}),this.$emit("pane-remove",{removed:t,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},resetPaneSizes(r={}){!r.addedPane&&!r.removedPane?this.initialPanesSizing():this.panes.some(e=>e.givenSize!==null||e.min||e.max<100)?this.equalizeAfterAddOrRemove(r):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size})))},equalize(){const r=100/this.panesCount;let e=0;const t=[],n=[];this.panes.forEach(i=>{i.size=Math.max(Math.min(r,i.max),i.min),e-=i.size,i.size>=i.max&&t.push(i.id),i.size<=i.min&&n.push(i.id)}),e>.1&&this.readjustSizes(e,t,n)},initialPanesSizing(){let r=100;const e=[],t=[];let n=0;this.panes.forEach(a=>{r-=a.size,a.size!==null&&n++,a.size>=a.max&&e.push(a.id),a.size<=a.min&&t.push(a.id)});let i=100;r>.1&&(this.panes.forEach(a=>{a.size===null&&(a.size=Math.max(Math.min(r/(this.panesCount-n),a.max),a.min)),i-=a.size}),i>.1&&this.readjustSizes(r,e,t))},equalizeAfterAddOrRemove({addedPane:r,removedPane:e}={}){let t=100/this.panesCount,n=0;const i=[],a=[];r&&r.givenSize!==null&&(t=(100-r.givenSize)/(this.panesCount-1)),this.panes.forEach(o=>{n-=o.size,o.size>=o.max&&i.push(o.id),o.size<=o.min&&a.push(o.id)}),!(Math.abs(n)<.1)&&(this.panes.forEach(o=>{r&&r.givenSize!==null&&r.id===o.id||(o.size=Math.max(Math.min(t,o.max),o.min)),n-=o.size,o.size>=o.max&&i.push(o.id),o.size<=o.min&&a.push(o.id)}),n>.1&&this.readjustSizes(n,i,a))},readjustSizes(r,e,t){let n;r>0?n=r/(this.panesCount-e.length):n=r/(this.panesCount-t.length),this.panes.forEach((i,a)=>{if(r>0&&!e.includes(i.id)){const o=Math.max(Math.min(i.size+n,i.max),i.min),s=o-i.size;r-=s,i.size=o}else if(!t.includes(i.id)){const o=Math.max(Math.min(i.size+n,i.max),i.min),s=o-i.size;r-=s,i.size=o}i.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[i.id].size}%`})}),Math.abs(r)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(r){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((e,t)=>{e.ondblclick=r?n=>this.onSplitterDblClick(n,t):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return Ep("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},lrt=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t},urt={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(r){this.style=r}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(r){this.requestUpdate({target:this,size:r})},minSizeNumber(r){this.requestUpdate({target:this,min:r})},maxSizeNumber(r){this.requestUpdate({target:this,max:r})}}};function frt(r,e,t,n,i,a){return ct(),or("div",{class:"splitpanes__pane",onClick:e[0]||(e[0]=o=>a.onPaneClick(o,r._.uid)),style:ga(r.style)},[dr(r.$slots,"default")],4)}const qrt=lrt(urt,[["render",frt]]);export{crt as $,Kf as A,mrt as B,$ as C,Sn as D,Urt as E,_r as F,OFe as G,gr as H,k0 as I,Oi as J,mr as K,dr as L,Qn as M,vrt as N,Tt as O,ga as P,Grt as Q,Xrt as R,Yrt as S,id as T,Hrt as U,ar as V,qrt as W,Krt as X,drt as Y,hXe as Z,Nrt as _,Srt as a,hrt as a0,Ert as a1,brt as a2,wrt as a3,yrt as a4,Tm as a5,Drt as a6,Prt as a7,Brt as a8,Rrt as a9,Lrt as aa,$rt as ab,Ioe as ac,Frt as ad,jrt as ae,zrt as af,krt as ag,Art as b,Crt as c,Eze as d,_rt as e,xrt as f,hP as g,Me as h,Nr as i,dc as j,Rt as k,Irt as l,prt as m,di as n,grt as o,Ort as p,Mrt as q,xt as r,Fn as s,LE as t,Trt as u,RE as v,qt as w,ct as x,or as y,xr as z};
